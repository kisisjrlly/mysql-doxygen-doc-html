<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: s_mysql_log_service Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structs__mysql__log__service.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structs__mysql__log__service-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">s_mysql_log_service Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="log__service_8h_source.html">log_service.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afd65bb522b9c10788434fec3939d3413"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__mysql__log__service.html#afd65bb522b9c10788434fec3939d3413">run</a> )(void *instance, <a class="el" href="log__shared_8h.html#abef61f7610a42c29cd8b3a92f391143f">log_line</a> *ll)</td></tr>
<tr class="memdesc:afd65bb522b9c10788434fec3939d3413"><td class="mdescLeft">&#160;</td><td class="mdescRight">Have the service process one log line.  <a href="#afd65bb522b9c10788434fec3939d3413">More...</a><br /></td></tr>
<tr class="separator:afd65bb522b9c10788434fec3939d3413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b5950a80e17cb43868f22d5437a1d60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__mysql__log__service.html#a8b5950a80e17cb43868f22d5437a1d60">flush</a> )(void **instance)</td></tr>
<tr class="memdesc:a8b5950a80e17cb43868f22d5437a1d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush any buffers.  <a href="#a8b5950a80e17cb43868f22d5437a1d60">More...</a><br /></td></tr>
<tr class="separator:a8b5950a80e17cb43868f22d5437a1d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6060765d86b7a608ea1f57c27dc27c2b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__mysql__log__service.html#a6060765d86b7a608ea1f57c27dc27c2b">open</a> )(<a class="el" href="log__shared_8h.html#abef61f7610a42c29cd8b3a92f391143f">log_line</a> *ll, void **instance)</td></tr>
<tr class="memdesc:a6060765d86b7a608ea1f57c27dc27c2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a new instance.  <a href="#a6060765d86b7a608ea1f57c27dc27c2b">More...</a><br /></td></tr>
<tr class="separator:a6060765d86b7a608ea1f57c27dc27c2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18b4a78e7d7dc21415d27e482c14b678"><td class="memItemLeft" align="right" valign="top"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__mysql__log__service.html#a18b4a78e7d7dc21415d27e482c14b678">close</a> )(void **instance)</td></tr>
<tr class="memdesc:a18b4a78e7d7dc21415d27e482c14b678"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close and release an instance.  <a href="#a18b4a78e7d7dc21415d27e482c14b678">More...</a><br /></td></tr>
<tr class="separator:a18b4a78e7d7dc21415d27e482c14b678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4e9cce3439fd2c92ce2873e331088df"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__mysql__log__service.html#ac4e9cce3439fd2c92ce2873e331088df">characteristics</a> )(void)</td></tr>
<tr class="memdesc:ac4e9cce3439fd2c92ce2873e331088df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get characteristics of a log-service.  <a href="#ac4e9cce3439fd2c92ce2873e331088df">More...</a><br /></td></tr>
<tr class="separator:ac4e9cce3439fd2c92ce2873e331088df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ce0adb27c97ef991304979ae908035"><td class="memItemLeft" align="right" valign="top"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__mysql__log__service.html#ad8ce0adb27c97ef991304979ae908035">parse_log_line</a> )(const char *line_start, size_t line_length)</td></tr>
<tr class="memdesc:ad8ce0adb27c97ef991304979ae908035"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse a single line in an error log of this format.  <a href="#ad8ce0adb27c97ef991304979ae908035">More...</a><br /></td></tr>
<tr class="separator:ad8ce0adb27c97ef991304979ae908035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80fc5da119c1d5f8fe993e49461a0a32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structs__mysql__log__service.html#a80fc5da119c1d5f8fe993e49461a0a32">get_log_name</a> )(void *instance, char *buf, size_t bufsize)</td></tr>
<tr class="memdesc:a80fc5da119c1d5f8fe993e49461a0a32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provide the name for a log file this service would access.  <a href="#a80fc5da119c1d5f8fe993e49461a0a32">More...</a><br /></td></tr>
<tr class="separator:a80fc5da119c1d5f8fe993e49461a0a32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac4e9cce3439fd2c92ce2873e331088df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4e9cce3439fd2c92ce2873e331088df">&#9670;&nbsp;</a></span>characteristics</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(*  s_mysql_log_service::characteristics) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get characteristics of a log-service. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;0</td><td>an error occurred </td></tr>
    <tr><td class="paramname">&gt;=0</td><td>characteristics (a set of log_service_chistics flags) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a18b4a78e7d7dc21415d27e482c14b678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18b4a78e7d7dc21415d27e482c14b678">&#9670;&nbsp;</a></span>close</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*  s_mysql_log_service::close) (void **instance)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close and release an instance. </p>
<p>Flushes any buffers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>State-pointer that was returned on open. If memory was allocated for this state, it should be released, and the pointer set to nullptr.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">LOG_SERVICE_SUCCESS</td><td>success </td></tr>
    <tr><td class="paramname">otherwise</td><td>an error occurred </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8b5950a80e17cb43868f22d5437a1d60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b5950a80e17cb43868f22d5437a1d60">&#9670;&nbsp;</a></span>flush</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*  s_mysql_log_service::flush) (void **instance)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush any buffers. </p>
<p>This function will be called by the server on FLUSH ERROR LOGS. The service may write its buffers, close and re-open any log files to work with log-rotation, etc. The flush function MUST NOT itself log anything! A service implementation may provide a nullptr if it does not wish to provide a flush function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>State-pointer that was returned on open. Value may be changed in flush.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">LOG_SERVICE_NOTHING_DONE</td><td>no work was done </td></tr>
    <tr><td class="paramname">LOG_SERVICE_SUCCESS</td><td>flush completed without incident </td></tr>
    <tr><td class="paramname">otherwise</td><td>an error occurred </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a80fc5da119c1d5f8fe993e49461a0a32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80fc5da119c1d5f8fe993e49461a0a32">&#9670;&nbsp;</a></span>get_log_name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*  s_mysql_log_service::get_log_name) (void *instance, char *buf, size_t bufsize)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provide the name for a log file this service would access. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>instance info returned by open() if requesting the file-name for a specific open instance. nullptr to get the name of the default instance (even if it that log is not open). This is used to determine the name of the log-file to load on start-up. </td></tr>
    <tr><td class="paramname">buf</td><td>Address of a buffer allocated in the caller. The callee may return an extension starting with '.', in which case the path and file-name will be the system's default, except with the given extension. Alternatively, the callee may return a file-name which is assumed to be in the same directory as the default log. Values are C-strings. </td></tr>
    <tr><td class="paramname">bufsize</td><td>The size of the allocation in the caller.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Mode not supported (only default / only instances supported) </td></tr>
    <tr><td class="paramname">-2</td><td>Buffer not large enough </td></tr>
    <tr><td class="paramname">-3</td><td>Misc. error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6060765d86b7a608ea1f57c27dc27c2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6060765d86b7a608ea1f57c27dc27c2b">&#9670;&nbsp;</a></span>open</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*  s_mysql_log_service::open) (<a class="el" href="log__shared_8h.html#abef61f7610a42c29cd8b3a92f391143f">log_line</a> *ll, void **instance)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a new instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ll</td><td>optional arguments </td></tr>
    <tr><td class="paramname">instance</td><td>If state is needed, the service may allocate and initialize it and return a pointer to it here. (This of course is particularly pertinent to components that may be opened multiple times, such as the JSON log writer.) This state is for use of the log-service component in question only and can take any layout suitable to that component's need. The state is opaque to the server/logging framework. It must be released on close.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">LOG_SERVICE_SUCCESS</td><td>success, returned hande is valid </td></tr>
    <tr><td class="paramname">otherwise</td><td>a new instance could not be created </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad8ce0adb27c97ef991304979ae908035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ce0adb27c97ef991304979ae908035">&#9670;&nbsp;</a></span>parse_log_line</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="log__service_8h.html#ae4871f54cbb0619a0c304c2818298685">log_service_error</a>(*  s_mysql_log_service::parse_log_line) (const char *line_start, size_t line_length)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse a single line in an error log of this format. </p>
<p>(optional)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">line_start</td><td>pointer to the beginning of the line ('{') </td></tr>
    <tr><td class="paramname">line_length</td><td>length of the line</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">!=0</td><td>Failure (out of memory, malformed argument, etc.) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afd65bb522b9c10788434fec3939d3413"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd65bb522b9c10788434fec3939d3413">&#9670;&nbsp;</a></span>run</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(*  s_mysql_log_service::run) (void *instance, <a class="el" href="log__shared_8h.html#abef61f7610a42c29cd8b3a92f391143f">log_line</a> *ll)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Have the service process one log line. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>State-pointer that was returned on open. </td></tr>
    <tr><td class="paramname">ll</td><td>The log_line collection of log_items.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;0</td><td>an error occurred </td></tr>
    <tr><td class="paramname">=0</td><td>no work was done </td></tr>
    <tr><td class="paramname">&gt;0</td><td>number of processed entities </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>include/mysql/components/services/<a class="el" href="log__service_8h_source.html">log_service.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structs__mysql__log__service.html">s_mysql_log_service</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
