<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: metadata_cache::MetadataCacheAPIBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classmetadata__cache_1_1MetadataCacheAPIBase.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmetadata__cache_1_1MetadataCacheAPIBase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">metadata_cache::MetadataCacheAPIBase Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="include_2mysqlrouter_2metadata__cache_8h_source.html">metadata_cache.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for metadata_cache::MetadataCacheAPIBase:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmetadata__cache_1_1MetadataCacheAPIBase.png" usemap="#metadata_5Fcache::MetadataCacheAPIBase_map" alt=""/>
  <map id="metadata_5Fcache::MetadataCacheAPIBase_map" name="metadata_5Fcache::MetadataCacheAPIBase_map">
<area href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html" title="Abstract class that provides interface for adding and removing observers on replicaset status changes..." alt="metadata_cache::ReplicasetStateNotifierInterface" shape="rect" coords="0,0,287,24"/>
<area href="classmetadata__cache_1_1MetadataCacheAPI.html" alt="metadata_cache::MetadataCacheAPI" shape="rect" coords="0,112,287,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmetadata__cache_1_1MetadataCacheAPIBase_1_1RefreshStatus.html">RefreshStatus</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1fb3eb84e822aba7871bd542cc891a46"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a1fb3eb84e822aba7871bd542cc891a46">cache_init</a> (const <a class="el" href="namespacemysqlrouter.html#a1e3a9a2c74de52b9be7ce0e318f4db30">mysqlrouter::ClusterType</a> <a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#ac332ed8c130a8f7117ecfead3ec59625">cluster_type</a>, const unsigned router_id, const std::string &amp;<a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a0aaba7bf1bacfc8757e452e945f3a834">cluster_type_specific_id</a>, const std::vector&lt; <a class="el" href="classmysql__harness_1_1TCPAddress.html">mysql_harness::TCPAddress</a> &gt; &amp;metadata_servers, const <a class="el" href="structmysqlrouter_1_1UserCredentials.html">mysqlrouter::UserCredentials</a> &amp;user_credentials, const std::chrono::milliseconds <a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a10625bae87b1877a79e9f254bfde1207">ttl</a>, const std::chrono::milliseconds auth_cache_ttl, const std::chrono::milliseconds auth_cache_refresh_interval, const <a class="el" href="structmysqlrouter_1_1SSLOptions.html">mysqlrouter::SSLOptions</a> &amp;ssl_options, const std::string &amp;<a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#aa71ddd5dc977bcec674faaee92325372">cluster_name</a>, int <a class="el" href="mysqld_8h.html#a68e9f802f3cd3bfaecdd7e0bbce6b99e">connect_timeout</a>, int read_timeout, size_t thread_stack_size=<a class="el" href="namespacemysql__harness.html#a750283a88722200951921eea3b5aac03">mysql_harness::kDefaultStackSizeInKiloBytes</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> use_cluster_notifications=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>, const unsigned view_id=0)=0</td></tr>
<tr class="memdesc:a1fb3eb84e822aba7871bd542cc891a46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a MetadataCache object and start caching.  <a href="#a1fb3eb84e822aba7871bd542cc891a46">More...</a><br /></td></tr>
<tr class="separator:a1fb3eb84e822aba7871bd542cc891a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e7fb6e53d25f54aa2e69ac4fd796c96"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a1e7fb6e53d25f54aa2e69ac4fd796c96">instance_name</a> (const std::string &amp;inst_name)=0</td></tr>
<tr class="separator:a1e7fb6e53d25f54aa2e69ac4fd796c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dee6b03bd3d4eb8fdd64a057193172b"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a0dee6b03bd3d4eb8fdd64a057193172b">instance_name</a> () const =0</td></tr>
<tr class="separator:a0dee6b03bd3d4eb8fdd64a057193172b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f83de603a3c036d224ca04b16727e21"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a4f83de603a3c036d224ca04b16727e21">is_initialized</a> () noexcept=0</td></tr>
<tr class="separator:a4f83de603a3c036d224ca04b16727e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac332ed8c130a8f7117ecfead3ec59625"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemysqlrouter.html#a1e3a9a2c74de52b9be7ce0e318f4db30">mysqlrouter::ClusterType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#ac332ed8c130a8f7117ecfead3ec59625">cluster_type</a> () const =0</td></tr>
<tr class="separator:ac332ed8c130a8f7117ecfead3ec59625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a995b500be63c13015a3aaac2b8bd3f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a1a995b500be63c13015a3aaac2b8bd3f">cache_start</a> ()=0</td></tr>
<tr class="memdesc:a1a995b500be63c13015a3aaac2b8bd3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the metadata cache.  <a href="#a1a995b500be63c13015a3aaac2b8bd3f">More...</a><br /></td></tr>
<tr class="separator:a1a995b500be63c13015a3aaac2b8bd3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9751ee89adc5f66087826b8732c31396"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a9751ee89adc5f66087826b8732c31396">cache_stop</a> () noexcept=0</td></tr>
<tr class="memdesc:a9751ee89adc5f66087826b8732c31396"><td class="mdescLeft">&#160;</td><td class="mdescRight">Teardown the metadata cache.  <a href="#a9751ee89adc5f66087826b8732c31396">More...</a><br /></td></tr>
<tr class="separator:a9751ee89adc5f66087826b8732c31396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af005253128ab8bc4721ec398a56fa7b6"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classmetadata__cache_1_1LookupResult.html">LookupResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#af005253128ab8bc4721ec398a56fa7b6">lookup_replicaset</a> (const std::string &amp;replicaset_name)=0</td></tr>
<tr class="memdesc:af005253128ab8bc4721ec398a56fa7b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns list of managed server in a HA replicaset.  <a href="#af005253128ab8bc4721ec398a56fa7b6">More...</a><br /></td></tr>
<tr class="separator:af005253128ab8bc4721ec398a56fa7b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b95846bb53e705e5763fe31e1a1b164"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a2b95846bb53e705e5763fe31e1a1b164">mark_instance_reachability</a> (const std::string &amp;instance_id, <a class="el" href="namespacemetadata__cache.html#aa6ad35031a354436ec8dddd0904ca4f5">InstanceStatus</a> <a class="el" href="mysql_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">status</a>)=0</td></tr>
<tr class="memdesc:a2b95846bb53e705e5763fe31e1a1b164"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the status of the instance.  <a href="#a2b95846bb53e705e5763fe31e1a1b164">More...</a><br /></td></tr>
<tr class="separator:a2b95846bb53e705e5763fe31e1a1b164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7c9881c019da57d3a743a51ef0f7b6a"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#ab7c9881c019da57d3a743a51ef0f7b6a">wait_primary_failover</a> (const std::string &amp;replicaset_name, const <a class="el" href="task_8h.html#a541442824a656f9c820631f4b8adf441">std::chrono::seconds</a> &amp;timeout)=0</td></tr>
<tr class="memdesc:ab7c9881c019da57d3a743a51ef0f7b6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until there's a primary member in the replicaset.  <a href="#ab7c9881c019da57d3a743a51ef0f7b6a">More...</a><br /></td></tr>
<tr class="separator:ab7c9881c019da57d3a743a51ef0f7b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45e0aaba59b325e60dadb5b883de14ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a45e0aaba59b325e60dadb5b883de14ab">add_listener</a> (const std::string &amp;replicaset_name, <a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">ReplicasetStateListenerInterface</a> *listener) override=0</td></tr>
<tr class="memdesc:a45e0aaba59b325e60dadb5b883de14ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register observer that is notified when there is a change in the replicaset nodes setup/state discovered.  <a href="#a45e0aaba59b325e60dadb5b883de14ab">More...</a><br /></td></tr>
<tr class="separator:a45e0aaba59b325e60dadb5b883de14ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ac784dcbd3cdbd388e30fd35904bf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a19ac784dcbd3cdbd388e30fd35904bf2">remove_listener</a> (const std::string &amp;replicaset_name, <a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">ReplicasetStateListenerInterface</a> *listener) override=0</td></tr>
<tr class="memdesc:a19ac784dcbd3cdbd388e30fd35904bf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister observer previously registered with add_listener()  <a href="#a19ac784dcbd3cdbd388e30fd35904bf2">More...</a><br /></td></tr>
<tr class="separator:a19ac784dcbd3cdbd388e30fd35904bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a601963eeba390d787c29fd4269ceec68"><td class="memItemLeft" align="right" valign="top">virtual std::pair&lt; <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>, std::pair&lt; std::string, rapidjson::Document &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a601963eeba390d787c29fd4269ceec68">get_rest_user_auth_data</a> (const std::string &amp;username) const =0</td></tr>
<tr class="memdesc:a601963eeba390d787c29fd4269ceec68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get authentication data (password hash and privileges) for the given user.  <a href="#a601963eeba390d787c29fd4269ceec68">More...</a><br /></td></tr>
<tr class="separator:a601963eeba390d787c29fd4269ceec68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb2eeca3d3a70b28562471fbe9934b4"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#aadb2eeca3d3a70b28562471fbe9934b4">enable_fetch_auth_metadata</a> ()=0</td></tr>
<tr class="memdesc:aadb2eeca3d3a70b28562471fbe9934b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable fetching authentication metadata when using metadata_cache http authentication backend.  <a href="#aadb2eeca3d3a70b28562471fbe9934b4">More...</a><br /></td></tr>
<tr class="separator:aadb2eeca3d3a70b28562471fbe9934b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46254dab326576d09ffb10fc7cd2b26b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a46254dab326576d09ffb10fc7cd2b26b">force_cache_update</a> ()=0</td></tr>
<tr class="memdesc:a46254dab326576d09ffb10fc7cd2b26b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force cache update in refresh loop.  <a href="#a46254dab326576d09ffb10fc7cd2b26b">More...</a><br /></td></tr>
<tr class="separator:a46254dab326576d09ffb10fc7cd2b26b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf3b89fb8d5ba835ef88bfddc62cbd55"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#abf3b89fb8d5ba835ef88bfddc62cbd55">check_auth_metadata_timers</a> () const =0</td></tr>
<tr class="memdesc:abf3b89fb8d5ba835ef88bfddc62cbd55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check values of auth_cache_ttl and auth_cache_refresh_interval timers.  <a href="#abf3b89fb8d5ba835ef88bfddc62cbd55">More...</a><br /></td></tr>
<tr class="separator:abf3b89fb8d5ba835ef88bfddc62cbd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a658249b1470c438130b4f37a5925b976"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a658249b1470c438130b4f37a5925b976">MetadataCacheAPIBase</a> ()=default</td></tr>
<tr class="separator:a658249b1470c438130b4f37a5925b976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7ac2a1d285d5f1b051b63854a7e864"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#aae7ac2a1d285d5f1b051b63854a7e864">MetadataCacheAPIBase</a> (const <a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html">MetadataCacheAPIBase</a> &amp;)=delete</td></tr>
<tr class="separator:aae7ac2a1d285d5f1b051b63854a7e864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2026a3d889f7ef7e88fdcb183b34bed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html">MetadataCacheAPIBase</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#ad2026a3d889f7ef7e88fdcb183b34bed">operator=</a> (const <a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html">MetadataCacheAPIBase</a> &amp;)=delete</td></tr>
<tr class="separator:ad2026a3d889f7ef7e88fdcb183b34bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8423a3405626bd1c4dcb88b6ec6e91e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a8423a3405626bd1c4dcb88b6ec6e91e7">~MetadataCacheAPIBase</a> () override</td></tr>
<tr class="separator:a8423a3405626bd1c4dcb88b6ec6e91e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93d446792462c203a1d37e9f0923510b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structmetadata__cache_1_1MetadataCacheAPIBase_1_1RefreshStatus.html">RefreshStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a93d446792462c203a1d37e9f0923510b">get_refresh_status</a> ()=0</td></tr>
<tr class="separator:a93d446792462c203a1d37e9f0923510b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aaba7bf1bacfc8757e452e945f3a834"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a0aaba7bf1bacfc8757e452e945f3a834">cluster_type_specific_id</a> () const =0</td></tr>
<tr class="separator:a0aaba7bf1bacfc8757e452e945f3a834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa71ddd5dc977bcec674faaee92325372"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#aa71ddd5dc977bcec674faaee92325372">cluster_name</a> () const =0</td></tr>
<tr class="separator:aa71ddd5dc977bcec674faaee92325372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10625bae87b1877a79e9f254bfde1207"><td class="memItemLeft" align="right" valign="top">virtual std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html#a10625bae87b1877a79e9f254bfde1207">ttl</a> () const =0</td></tr>
<tr class="separator:a10625bae87b1877a79e9f254bfde1207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html">metadata_cache::ReplicasetStateNotifierInterface</a></td></tr>
<tr class="memitem:aa31d146f4271fdfaaa38efca0462641d inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#aa31d146f4271fdfaaa38efca0462641d">ReplicasetStateNotifierInterface</a> ()=default</td></tr>
<tr class="separator:aa31d146f4271fdfaaa38efca0462641d inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a376f36a46883b82dda20de50505ce88f inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a376f36a46883b82dda20de50505ce88f">ReplicasetStateNotifierInterface</a> (const <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html">ReplicasetStateNotifierInterface</a> &amp;)=delete</td></tr>
<tr class="separator:a376f36a46883b82dda20de50505ce88f inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c43e36505cc1cdafccc0a72de75497 inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html">ReplicasetStateNotifierInterface</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a22c43e36505cc1cdafccc0a72de75497">operator=</a> (const <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html">ReplicasetStateNotifierInterface</a> &amp;)=delete</td></tr>
<tr class="separator:a22c43e36505cc1cdafccc0a72de75497 inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9fe951a9318d110b5d981b73659659 inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a3a9fe951a9318d110b5d981b73659659">~ReplicasetStateNotifierInterface</a> ()</td></tr>
<tr class="separator:a3a9fe951a9318d110b5d981b73659659 inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a658249b1470c438130b4f37a5925b976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a658249b1470c438130b4f37a5925b976">&#9670;&nbsp;</a></span>MetadataCacheAPIBase() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">metadata_cache::MetadataCacheAPIBase::MetadataCacheAPIBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aae7ac2a1d285d5f1b051b63854a7e864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae7ac2a1d285d5f1b051b63854a7e864">&#9670;&nbsp;</a></span>MetadataCacheAPIBase() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">metadata_cache::MetadataCacheAPIBase::MetadataCacheAPIBase </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html">MetadataCacheAPIBase</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8423a3405626bd1c4dcb88b6ec6e91e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8423a3405626bd1c4dcb88b6ec6e91e7">&#9670;&nbsp;</a></span>~MetadataCacheAPIBase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">metadata_cache::MetadataCacheAPIBase::~MetadataCacheAPIBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a45e0aaba59b325e60dadb5b883de14ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45e0aaba59b325e60dadb5b883de14ab">&#9670;&nbsp;</a></span>add_listener()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void metadata_cache::MetadataCacheAPIBase::add_listener </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>replicaset_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">ReplicasetStateListenerInterface</a> *&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register observer that is notified when there is a change in the replicaset nodes setup/state discovered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replicaset_name</td><td>name of the replicaset </td></tr>
    <tr><td class="paramname">listener</td><td>Observer object that is notified when replicaset nodes state is changed. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a2d554cea4a9625b68ceb8937aa57152d">metadata_cache::ReplicasetStateNotifierInterface</a>.</p>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#aaf7ff320d7819f082f521e1ce63195ac">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a1fb3eb84e822aba7871bd542cc891a46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fb3eb84e822aba7871bd542cc891a46">&#9670;&nbsp;</a></span>cache_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void metadata_cache::MetadataCacheAPIBase::cache_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacemysqlrouter.html#a1e3a9a2c74de52b9be7ce0e318f4db30">mysqlrouter::ClusterType</a>&#160;</td>
          <td class="paramname"><em>cluster_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>router_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cluster_type_specific_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classmysql__harness_1_1TCPAddress.html">mysql_harness::TCPAddress</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>metadata_servers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmysqlrouter_1_1UserCredentials.html">mysqlrouter::UserCredentials</a> &amp;&#160;</td>
          <td class="paramname"><em>user_credentials</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>auth_cache_ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>auth_cache_refresh_interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmysqlrouter_1_1SSLOptions.html">mysqlrouter::SSLOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>ssl_options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cluster_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connect_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>read_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thread_stack_size</em> = <code><a class="el" href="namespacemysql__harness.html#a750283a88722200951921eea3b5aac03">mysql_harness::kDefaultStackSizeInKiloBytes</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>use_cluster_notifications</em> = <code><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>view_id</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize a MetadataCache object and start caching. </p>
<p>The metadata_cache::cache_init function will initialize a MetadataCache object using the given arguments and store it globally using the given cache_name.</p>
<p>Parameters host, port, user, password are used to setup the connection with the metadata server.</p>
<p>Cache name given by cache_name can be empty, but must be unique.</p>
<p>The parameters connection_timeout and connection_attempts are used when connected to the metadata server.</p>
<p>Throws a std::runtime_error when the cache object was already initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cluster_type</td><td>type of the cluster the metadata cache object will represent (GR or ReplicaSet) </td></tr>
    <tr><td class="paramname">router_id</td><td>id of the router in the cluster metadata </td></tr>
    <tr><td class="paramname">cluster_type_specific_id</td><td>(id of the replication group for GR, cluster_id for ReplicaSet) </td></tr>
    <tr><td class="paramname">metadata_servers</td><td>The list of cluster metadata servers </td></tr>
    <tr><td class="paramname">user_credentials</td><td>MySQL Metadata username and password </td></tr>
    <tr><td class="paramname">ttl</td><td>The time to live for the cached data </td></tr>
    <tr><td class="paramname">auth_cache_ttl</td><td>TTL of the rest user authentication data </td></tr>
    <tr><td class="paramname">auth_cache_refresh_interval</td><td>Refresh rate of the rest user authentication data </td></tr>
    <tr><td class="paramname">ssl_options</td><td>SSL relatd options for connection </td></tr>
    <tr><td class="paramname">cluster_name</td><td>The name of the cluster to be used. </td></tr>
    <tr><td class="paramname">connect_timeout</td><td>The time in seconds after which trying to connect to metadata server should time out. </td></tr>
    <tr><td class="paramname">read_timeout</td><td>The time in seconds after which read from metadata server should time out. </td></tr>
    <tr><td class="paramname">thread_stack_size</td><td>memory in kilobytes allocated for thread's stack </td></tr>
    <tr><td class="paramname">use_cluster_notifications</td><td>Flag indicating if the metadata cache should use cluster notifications as an additional trigger for metadata refresh (only available for GR cluster type) </td></tr>
    <tr><td class="paramname">view_id</td><td>last known view_id of the cluster metadata (only relevant for ReplicaSet cluster) </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a761ab1d29f2cfdb4e5c75109706bda9b">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a1a995b500be63c13015a3aaac2b8bd3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a995b500be63c13015a3aaac2b8bd3f">&#9670;&nbsp;</a></span>cache_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void metadata_cache::MetadataCacheAPIBase::cache_start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the metadata cache. </p>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a4793eea0c68d1943e671767d4529e50b">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a9751ee89adc5f66087826b8732c31396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9751ee89adc5f66087826b8732c31396">&#9670;&nbsp;</a></span>cache_stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void metadata_cache::MetadataCacheAPIBase::cache_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Teardown the metadata cache. </p>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#aaac8076eb27f96f0ff9fac1b427de4e2">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="abf3b89fb8d5ba835ef88bfddc62cbd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf3b89fb8d5ba835ef88bfddc62cbd55">&#9670;&nbsp;</a></span>check_auth_metadata_timers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void metadata_cache::MetadataCacheAPIBase::check_auth_metadata_timers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check values of auth_cache_ttl and auth_cache_refresh_interval timers. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>for each of the following scenarios:<ol type="1">
<li>auth_cache_ttl &lt; ttl</li>
<li>auth_cache_refresh_interval &lt; ttl</li>
<li>auth_cache_refresh_interval &gt; auth_cache_ttl </li>
</ol>
</td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a3e1a87277ad4a5c08127bc9a4cdcd0cb">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="aa71ddd5dc977bcec674faaee92325372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa71ddd5dc977bcec674faaee92325372">&#9670;&nbsp;</a></span>cluster_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string metadata_cache::MetadataCacheAPIBase::cluster_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a0224192d08f9e1b15ece087a006b0c56">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="ac332ed8c130a8f7117ecfead3ec59625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac332ed8c130a8f7117ecfead3ec59625">&#9670;&nbsp;</a></span>cluster_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacemysqlrouter.html#a1e3a9a2c74de52b9be7ce0e318f4db30">mysqlrouter::ClusterType</a> metadata_cache::MetadataCacheAPIBase::cluster_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a2a192e61b01c549279bf343ec0638671">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a0aaba7bf1bacfc8757e452e945f3a834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aaba7bf1bacfc8757e452e945f3a834">&#9670;&nbsp;</a></span>cluster_type_specific_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string metadata_cache::MetadataCacheAPIBase::cluster_type_specific_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#af9e635c1c6cea154ee9e4ed56549212d">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="aadb2eeca3d3a70b28562471fbe9934b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadb2eeca3d3a70b28562471fbe9934b4">&#9670;&nbsp;</a></span>enable_fetch_auth_metadata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void metadata_cache::MetadataCacheAPIBase::enable_fetch_auth_metadata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable fetching authentication metadata when using metadata_cache http authentication backend. </p>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a031658e112123f4bc25cdc3ee8ee2e3a">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a46254dab326576d09ffb10fc7cd2b26b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46254dab326576d09ffb10fc7cd2b26b">&#9670;&nbsp;</a></span>force_cache_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void metadata_cache::MetadataCacheAPIBase::force_cache_update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Force cache update in refresh loop. </p>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a59d73926cae21c4730b34cab30a3b747">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a93d446792462c203a1d37e9f0923510b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93d446792462c203a1d37e9f0923510b">&#9670;&nbsp;</a></span>get_refresh_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="structmetadata__cache_1_1MetadataCacheAPIBase_1_1RefreshStatus.html">RefreshStatus</a> metadata_cache::MetadataCacheAPIBase::get_refresh_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a53156ad6b21ccbe1769a49fc31938473">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a601963eeba390d787c29fd4269ceec68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a601963eeba390d787c29fd4269ceec68">&#9670;&nbsp;</a></span>get_rest_user_auth_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::pair&lt;<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>, std::pair&lt;std::string, rapidjson::Document&gt; &gt; metadata_cache::MetadataCacheAPIBase::get_rest_user_auth_data </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>username</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get authentication data (password hash and privileges) for the given user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">username</td><td>- name of the user for which the authentidation data is requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true and password hash with privileges - authentication data requested for the given user. </dd>
<dd>
false and empty data set - username is not found or authentication data expired. </dd></dl>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#acacb1b6d9056e04475b03acf27e7c9f5">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a1e7fb6e53d25f54aa2e69ac4fd796c96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e7fb6e53d25f54aa2e69ac4fd796c96">&#9670;&nbsp;</a></span>instance_name() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void metadata_cache::MetadataCacheAPIBase::instance_name </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>inst_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a81f4deb23b26f38030c400b77f3e272c">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a0dee6b03bd3d4eb8fdd64a057193172b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dee6b03bd3d4eb8fdd64a057193172b">&#9670;&nbsp;</a></span>instance_name() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string metadata_cache::MetadataCacheAPIBase::instance_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a6dce6f9451c2ebd027d9e72f6a9e328c">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a4f83de603a3c036d224ca04b16727e21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f83de603a3c036d224ca04b16727e21">&#9670;&nbsp;</a></span>is_initialized()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> metadata_cache::MetadataCacheAPIBase::is_initialized </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a94e075175e43ae71633b50c55141897a">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="af005253128ab8bc4721ec398a56fa7b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af005253128ab8bc4721ec398a56fa7b6">&#9670;&nbsp;</a></span>lookup_replicaset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classmetadata__cache_1_1LookupResult.html">LookupResult</a> metadata_cache::MetadataCacheAPIBase::lookup_replicaset </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>replicaset_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns list of managed server in a HA replicaset. </p>
<ul>
<li>Returns a list of MySQL servers managed by the topology for the given HA replicaset.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replicaset_name</td><td>ID of the HA replicaset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>List of ManagedInstance objects </dd></dl>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a54ceaeb2f7d1e7eafafb8697b8d05dac">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a2b95846bb53e705e5763fe31e1a1b164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b95846bb53e705e5763fe31e1a1b164">&#9670;&nbsp;</a></span>mark_instance_reachability()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void metadata_cache::MetadataCacheAPIBase::mark_instance_reachability </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>instance_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacemetadata__cache.html#aa6ad35031a354436ec8dddd0904ca4f5">InstanceStatus</a>&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the status of the instance. </p>
<p>Called when an instance from a replicaset cannot be reached for one reason or another. When an instance becomes unreachable, an emergency mode is set (the rate of refresh of the metadata cache increases to once per second) and lasts until disabled after a suitable change in the metadata cache is discovered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance_id</td><td>- the mysql_server_uuid that identifies the server instance </td></tr>
    <tr><td class="paramname">status</td><td>- the status of the instance </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a4d11038e1a0508f1a556bc1fa9fc3c49">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="ad2026a3d889f7ef7e88fdcb183b34bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2026a3d889f7ef7e88fdcb183b34bed">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html">MetadataCacheAPIBase</a>&amp; metadata_cache::MetadataCacheAPIBase::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html">MetadataCacheAPIBase</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a19ac784dcbd3cdbd388e30fd35904bf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19ac784dcbd3cdbd388e30fd35904bf2">&#9670;&nbsp;</a></span>remove_listener()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void metadata_cache::MetadataCacheAPIBase::remove_listener </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>replicaset_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">ReplicasetStateListenerInterface</a> *&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregister observer previously registered with add_listener() </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replicaset_name</td><td>name of the replicaset </td></tr>
    <tr><td class="paramname">listener</td><td>Observer object that should be unregistered. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a7ecb7107d33d7475bee394cf95f0d871">metadata_cache::ReplicasetStateNotifierInterface</a>.</p>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a99185b2eedeca2ced0acd74f4b846221">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="a10625bae87b1877a79e9f254bfde1207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10625bae87b1877a79e9f254bfde1207">&#9670;&nbsp;</a></span>ttl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::chrono::milliseconds metadata_cache::MetadataCacheAPIBase::ttl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#a5ccb9ba2d979b854bf69a583f9164af7">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<a id="ab7c9881c019da57d3a743a51ef0f7b6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7c9881c019da57d3a743a51ef0f7b6a">&#9670;&nbsp;</a></span>wait_primary_failover()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> metadata_cache::MetadataCacheAPIBase::wait_primary_failover </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>replicaset_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="task_8h.html#a541442824a656f9c820631f4b8adf441">std::chrono::seconds</a> &amp;&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait until there's a primary member in the replicaset. </p>
<p>To be called when the primary member of a single-primary replicaset is down and we want to wait until one becomes elected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replicaset_name</td><td>- the name of the replicaset </td></tr>
    <tr><td class="paramname">timeout</td><td>- amount of time to wait for a failover, in seconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a primary member exists </dd></dl>

<p>Implemented in <a class="el" href="classmetadata__cache_1_1MetadataCacheAPI.html#ac179ab6fb00624f23cdb5365d144934b">metadata_cache::MetadataCacheAPI</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>router/src/metadata_cache/include/mysqlrouter/<a class="el" href="include_2mysqlrouter_2metadata__cache_8h_source.html">metadata_cache.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemetadata__cache.html">metadata_cache</a></li><li class="navelem"><a class="el" href="classmetadata__cache_1_1MetadataCacheAPIBase.html">MetadataCacheAPIBase</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
