<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: ibt::Tablespace_pool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classibt_1_1Tablespace__pool.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classibt_1_1Tablespace__pool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ibt::Tablespace_pool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Pool of session temporary tablespaces.  
 <a href="classibt_1_1Tablespace__pool.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="srv0tmp_8h_source.html">srv0tmp.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2afd3f18b7d9d930acc0ac941d0cf6ed"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#a2afd3f18b7d9d930acc0ac941d0cf6ed">Pool</a> = <a class="el" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">std::list</a>&lt; <a class="el" href="classibt_1_1Tablespace.html">Tablespace</a> *, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt; <a class="el" href="classibt_1_1Tablespace.html">Tablespace</a> * &gt; &gt;</td></tr>
<tr class="separator:a2afd3f18b7d9d930acc0ac941d0cf6ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad838d7a514330fc03a926925e078253e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#ad838d7a514330fc03a926925e078253e">Tablespace_pool</a> (size_t init_size)</td></tr>
<tr class="memdesc:ad838d7a514330fc03a926925e078253e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tablespace_pool constructor.  <a href="#ad838d7a514330fc03a926925e078253e">More...</a><br /></td></tr>
<tr class="separator:ad838d7a514330fc03a926925e078253e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a0eac5c3cf7707f5ad110b5b9e8e50b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#a1a0eac5c3cf7707f5ad110b5b9e8e50b">~Tablespace_pool</a> ()</td></tr>
<tr class="memdesc:a1a0eac5c3cf7707f5ad110b5b9e8e50b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a1a0eac5c3cf7707f5ad110b5b9e8e50b">More...</a><br /></td></tr>
<tr class="separator:a1a0eac5c3cf7707f5ad110b5b9e8e50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3cb7b4addf6fbdc85c008fd02f4c92a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classibt_1_1Tablespace.html">Tablespace</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#ae3cb7b4addf6fbdc85c008fd02f4c92a">get</a> (<a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a> <a class="el" href="xcom__base_8cc.html#a7307f729d2752bdbe1d32d9fda65f30a">id</a>, enum <a class="el" href="namespaceibt.html#ac0764eda1b839aefdfa473c4c6d32cca">tbsp_purpose</a> purpose)</td></tr>
<tr class="memdesc:ae3cb7b4addf6fbdc85c008fd02f4c92a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a session temporary tablespace.  <a href="#ae3cb7b4addf6fbdc85c008fd02f4c92a">More...</a><br /></td></tr>
<tr class="separator:ae3cb7b4addf6fbdc85c008fd02f4c92a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4b806d689733df89f1d985500000169"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#af4b806d689733df89f1d985500000169">free_ts</a> (<a class="el" href="classibt_1_1Tablespace.html">Tablespace</a> *ts)</td></tr>
<tr class="memdesc:af4b806d689733df89f1d985500000169"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate and release the tablespace back to the pool.  <a href="#af4b806d689733df89f1d985500000169">More...</a><br /></td></tr>
<tr class="separator:af4b806d689733df89f1d985500000169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2a0152499ed6dc467d46ee2940a1b32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#aa2a0152499ed6dc467d46ee2940a1b32">initialize</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> create_new_db)</td></tr>
<tr class="memdesc:aa2a0152499ed6dc467d46ee2940a1b32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the pool on startup.  <a href="#aa2a0152499ed6dc467d46ee2940a1b32">More...</a><br /></td></tr>
<tr class="separator:aa2a0152499ed6dc467d46ee2940a1b32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd8bc4c75921f3d7e2ce563682a10fe"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a5dd8bc4c75921f3d7e2ce563682a10fe"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#a5dd8bc4c75921f3d7e2ce563682a10fe">iterate_tbsp</a> (F &amp;&amp;f)</td></tr>
<tr class="memdesc:a5dd8bc4c75921f3d7e2ce563682a10fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate through the list of tablespaces and perform specified operation on the tablespace on every iteration.  <a href="#a5dd8bc4c75921f3d7e2ce563682a10fe">More...</a><br /></td></tr>
<tr class="separator:a5dd8bc4c75921f3d7e2ce563682a10fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a16dfd046e918c29bd0819c482e50fd24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#a16dfd046e918c29bd0819c482e50fd24">acquire</a> ()</td></tr>
<tr class="memdesc:a16dfd046e918c29bd0819c482e50fd24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire the mutex.  <a href="#a16dfd046e918c29bd0819c482e50fd24">More...</a><br /></td></tr>
<tr class="separator:a16dfd046e918c29bd0819c482e50fd24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a770f3210ea9de216a1bd94a517ae295d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#a770f3210ea9de216a1bd94a517ae295d">release</a> ()</td></tr>
<tr class="memdesc:a770f3210ea9de216a1bd94a517ae295d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the mutex.  <a href="#a770f3210ea9de216a1bd94a517ae295d">More...</a><br /></td></tr>
<tr class="separator:a770f3210ea9de216a1bd94a517ae295d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9fa6b89335f656f22ea38a35543fe1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#ac9fa6b89335f656f22ea38a35543fe1f">expand</a> (size_t size)</td></tr>
<tr class="memdesc:ac9fa6b89335f656f22ea38a35543fe1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand the pool to the requested size.  <a href="#ac9fa6b89335f656f22ea38a35543fe1f">More...</a><br /></td></tr>
<tr class="separator:ac9fa6b89335f656f22ea38a35543fe1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56602dd5516eababcf1c4f64c7707981"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#a56602dd5516eababcf1c4f64c7707981">delete_old_pool</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> create_new_db)</td></tr>
<tr class="memdesc:a56602dd5516eababcf1c4f64c7707981"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete old session temporary tablespaces found on startup.  <a href="#a56602dd5516eababcf1c4f64c7707981">More...</a><br /></td></tr>
<tr class="separator:a56602dd5516eababcf1c4f64c7707981"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a46c9e71461608885e51fd6150d8c4cbd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#a46c9e71461608885e51fd6150d8c4cbd">m_pool_initialized</a></td></tr>
<tr class="memdesc:a46c9e71461608885e51fd6150d8c4cbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">True after the pool has been initialized.  <a href="#a46c9e71461608885e51fd6150d8c4cbd">More...</a><br /></td></tr>
<tr class="separator:a46c9e71461608885e51fd6150d8c4cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759767d2bc9960249622a290a5cb5354"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#a759767d2bc9960249622a290a5cb5354">m_init_size</a></td></tr>
<tr class="memdesc:a759767d2bc9960249622a290a5cb5354"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial size of pool.  <a href="#a759767d2bc9960249622a290a5cb5354">More...</a><br /></td></tr>
<tr class="separator:a759767d2bc9960249622a290a5cb5354"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeec512b6bf87aec9c37a537b688ec6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classibt_1_1Tablespace__pool.html#a2afd3f18b7d9d930acc0ac941d0cf6ed">Pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#aeeec512b6bf87aec9c37a537b688ec6e">m_free</a></td></tr>
<tr class="memdesc:aeeec512b6bf87aec9c37a537b688ec6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of tablespaces that are unused.  <a href="#aeeec512b6bf87aec9c37a537b688ec6e">More...</a><br /></td></tr>
<tr class="separator:aeeec512b6bf87aec9c37a537b688ec6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d350a60277192c75ca31764dd23814"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classibt_1_1Tablespace__pool.html#a2afd3f18b7d9d930acc0ac941d0cf6ed">Pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#af7d350a60277192c75ca31764dd23814">m_active</a></td></tr>
<tr class="memdesc:af7d350a60277192c75ca31764dd23814"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of tablespaces that are being used.  <a href="#af7d350a60277192c75ca31764dd23814">More...</a><br /></td></tr>
<tr class="separator:af7d350a60277192c75ca31764dd23814"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5b7918cd449eeeabc576bcb80648fd1"><td class="memItemLeft" align="right" valign="top">ib_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classibt_1_1Tablespace__pool.html#af5b7918cd449eeeabc576bcb80648fd1">m_mutex</a></td></tr>
<tr class="memdesc:af5b7918cd449eeeabc576bcb80648fd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to protect concurrent operations on the pool.  <a href="#af5b7918cd449eeeabc576bcb80648fd1">More...</a><br /></td></tr>
<tr class="separator:af5b7918cd449eeeabc576bcb80648fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Pool of session temporary tablespaces. </p>
<p>Each session gets at max two tablespaces. For a session, we allocate one tablespace on the creation of first intrinsic table and another on the creation of first user temporary table (CREATE TEMPORARY TABLE t1). These tablespaces are private to session. No other session can use them when a tablespace is in-use by the session.</p>
<p>Once a session disconnects, the tablespaces are truncated and released to the pool. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a2afd3f18b7d9d930acc0ac941d0cf6ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2afd3f18b7d9d930acc0ac941d0cf6ed">&#9670;&nbsp;</a></span>Pool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classibt_1_1Tablespace__pool.html#a2afd3f18b7d9d930acc0ac941d0cf6ed">ibt::Tablespace_pool::Pool</a> =  <a class="el" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">std::list</a>&lt;<a class="el" href="classibt_1_1Tablespace.html">Tablespace</a> *, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt;<a class="el" href="classibt_1_1Tablespace.html">Tablespace</a> *&gt; &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad838d7a514330fc03a926925e078253e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad838d7a514330fc03a926925e078253e">&#9670;&nbsp;</a></span>Tablespace_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibt::Tablespace_pool::Tablespace_pool </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>init_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tablespace_pool constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">init_size</td><td>Initial size of the tablespace pool </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1a0eac5c3cf7707f5ad110b5b9e8e50b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a0eac5c3cf7707f5ad110b5b9e8e50b">&#9670;&nbsp;</a></span>~Tablespace_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibt::Tablespace_pool::~Tablespace_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a16dfd046e918c29bd0819c482e50fd24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16dfd046e918c29bd0819c482e50fd24">&#9670;&nbsp;</a></span>acquire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ibt::Tablespace_pool::acquire </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire the mutex. </p>
<p>It is used for all operations on the pool </p>

</div>
</div>
<a id="a56602dd5516eababcf1c4f64c7707981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56602dd5516eababcf1c4f64c7707981">&#9670;&nbsp;</a></span>delete_old_pool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ibt::Tablespace_pool::delete_old_pool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>create_new_db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete old session temporary tablespaces found on startup. </p>
<p>This can happen if server is killed and started again </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">create_new_db</td><td>true if we are bootstrapping </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac9fa6b89335f656f22ea38a35543fe1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9fa6b89335f656f22ea38a35543fe1f">&#9670;&nbsp;</a></span>expand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> ibt::Tablespace_pool::expand </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expand the pool to the requested size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Number of tablespaces to be created </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS on success, else DB_ERROR on error </dd></dl>

</div>
</div>
<a id="af4b806d689733df89f1d985500000169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4b806d689733df89f1d985500000169">&#9670;&nbsp;</a></span>free_ts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ibt::Tablespace_pool::free_ts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classibt_1_1Tablespace.html">Tablespace</a> *&#160;</td>
          <td class="paramname"><em>ts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncate and release the tablespace back to the pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ts</td><td>tablespace that need to be released back to the pool </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae3cb7b4addf6fbdc85c008fd02f4c92a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3cb7b4addf6fbdc85c008fd02f4c92a">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classibt_1_1Tablespace.html">Tablespace</a> * ibt::Tablespace_pool::get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="namespaceibt.html#ac0764eda1b839aefdfa473c4c6d32cca">tbsp_purpose</a>&#160;</td>
          <td class="paramname"><em>purpose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a session temporary tablespace. </p>
<p>If pool is exhausted, expand and return one </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>session id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">purpose</td><td>purpose of using the tablespace </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to the tablespace </dd></dl>

</div>
</div>
<a id="aa2a0152499ed6dc467d46ee2940a1b32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2a0152499ed6dc467d46ee2940a1b32">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> ibt::Tablespace_pool::initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>create_new_db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the pool on startup. </p>
<p>Also delete old tablespaces if found </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">create_new_db</td><td>true if the database is being created, false otherwise </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS on success, else DB_ERROR on failure </dd></dl>

</div>
</div>
<a id="a5dd8bc4c75921f3d7e2ce563682a10fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd8bc4c75921f3d7e2ce563682a10fe">&#9670;&nbsp;</a></span>iterate_tbsp()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ibt::Tablespace_pool::iterate_tbsp </td>
          <td>(</td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterate through the list of tablespaces and perform specified operation on the tablespace on every iteration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>Function pointer for the function to be executed on every iteration </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a770f3210ea9de216a1bd94a517ae295d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a770f3210ea9de216a1bd94a517ae295d">&#9670;&nbsp;</a></span>release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ibt::Tablespace_pool::release </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release the mutex. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af7d350a60277192c75ca31764dd23814"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7d350a60277192c75ca31764dd23814">&#9670;&nbsp;</a></span>m_active</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classibt_1_1Tablespace__pool.html#a2afd3f18b7d9d930acc0ac941d0cf6ed">Pool</a>* ibt::Tablespace_pool::m_active</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of tablespaces that are being used. </p>

</div>
</div>
<a id="aeeec512b6bf87aec9c37a537b688ec6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeec512b6bf87aec9c37a537b688ec6e">&#9670;&nbsp;</a></span>m_free</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classibt_1_1Tablespace__pool.html#a2afd3f18b7d9d930acc0ac941d0cf6ed">Pool</a>* ibt::Tablespace_pool::m_free</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of tablespaces that are unused. </p>

</div>
</div>
<a id="a759767d2bc9960249622a290a5cb5354"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a759767d2bc9960249622a290a5cb5354">&#9670;&nbsp;</a></span>m_init_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ibt::Tablespace_pool::m_init_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initial size of pool. </p>

</div>
</div>
<a id="af5b7918cd449eeeabc576bcb80648fd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5b7918cd449eeeabc576bcb80648fd1">&#9670;&nbsp;</a></span>m_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ib_mutex_t ibt::Tablespace_pool::m_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex to protect concurrent operations on the pool. </p>

</div>
</div>
<a id="a46c9e71461608885e51fd6150d8c4cbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c9e71461608885e51fd6150d8c4cbd">&#9670;&nbsp;</a></span>m_pool_initialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> ibt::Tablespace_pool::m_pool_initialized</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True after the pool has been initialized. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>storage/innobase/include/<a class="el" href="srv0tmp_8h_source.html">srv0tmp.h</a></li>
<li>storage/innobase/srv/<a class="el" href="srv0tmp_8cc.html">srv0tmp.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceibt.html">ibt</a></li><li class="navelem"><a class="el" href="classibt_1_1Tablespace__pool.html">Tablespace_pool</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
