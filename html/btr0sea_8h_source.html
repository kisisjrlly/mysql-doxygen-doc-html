<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/btr0sea.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('btr0sea_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">btr0sea.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="btr0sea_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 1996, 2020, Oracle and/or its affiliates. All Rights Reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/btr0sea.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> The index tree adaptive search</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> Created 2/17/1996 Heikki Tuuri</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *************************************************************************/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifndef btr0sea_h</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define btr0sea_h</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;univ.i&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="btr0types_8h.html">btr0types.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict0dict_8h.html">dict0dict.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ha0ha_8h.html">ha0ha.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mtr0mtr_8h.html">mtr0mtr.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rem0rec_8h.html">rem0rec.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">/** Creates and initializes the adaptive search system at a database start.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">@param[in]      hash_size       hash table size. */</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#ab978894ba96e9edfb7097c2973e78ea3">btr_search_sys_create</a>(ulint hash_size);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/** Resize hash index hash table.</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">@param[in]      hash_size       hash index hash table size */</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#aae5afff4ab34f3a949fa400fef17d74b">btr_search_sys_resize</a>(ulint hash_size);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/** Frees the adaptive search system at a database shutdown. */</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a5aeee1c109d4f24433611280240eca24">btr_search_sys_free</a>();</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/** Disable the adaptive hash search system and empty the index.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">@param[in]      need_mutex      Need to acquire dict_sys-&gt;mutex */</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a888c563e815dc38cb86bc5505e6283d9">btr_search_disable</a>(<span class="keywordtype">bool</span> need_mutex);<span class="comment"></span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/** Enable the adaptive hash search system. */</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#af1b9a64291047300e38c456a881f750c">btr_search_enable</a>();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/** Returns search info for an index.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> @return search info; search mutex reserved */</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<a class="code" href="structbtr__search__t.html">btr_search_t</a> *<a class="code" href="btr0sea_8h.html#ad32b39d2c8d0479d5a4c3473171e03f6">btr_search_get_info</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>); <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/** Creates and initializes a search info struct.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">@param[in]      heap            heap where created.</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">@return own: search info struct */</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="structbtr__search__t.html">btr_search_t</a> *<a class="code" href="btr0sea_8h.html#aa8c01f670ee3f67f8dc42c0a44b40379">btr_search_info_create</a>(<a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/** Returns the value of ref_count. The value is protected by latch.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">@param[in]      info            search info</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">@param[in]      index           index identifier</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">@return ref_count value. */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;ulint <a class="code" href="btr0sea_8h.html#a756846481bf82101fdb3c13e1e650020">btr_search_info_get_ref_count</a>(<span class="keyword">const</span> <a class="code" href="structbtr__search__t.html">btr_search_t</a> *<a class="code" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/** Updates the search info.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">@param[in]      index   index of the cursor</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">@param[in]      cursor  cursor which was just positioned */</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a25ed49d7532a5527dec1a0153f9104ae">btr_search_info_update</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">/** Tries to guess the right search position based on the hash search info</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">of the index. Note that if mode is PAGE_CUR_LE, which is used in inserts,</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">and the function returns TRUE, then cursor-&gt;up_match and cursor-&gt;low_match</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">both have sensible values.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">@param[in,out]  index           Index</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">@param[in,out]  info            Index search info</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">@param[in]      tuple           Logical record</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">@param[in]      mode            PAGE_CUR_L, ....</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">@param[in]      latch_mode      BTR_SEARCH_LEAF, ...;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">                                NOTE that only if has_search_latch is 0, we will</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">                                have a latch set on the cursor page, otherwise</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">                                we assume the caller uses his search latch</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">                                to protect the record!</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">@param[out]     cursor          Tree cursor</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">@param[in]      has_search_latch</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">                                Latch mode the caller currently has on</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">                                search system: RW_S/X_LATCH or 0</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">@param[in]      mtr             Mini-transaction</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">@return true if succeeded */</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;ibool <a class="code" href="btr0sea_8h.html#ae2078f620596010d2d1a078635f58bfa">btr_search_guess_on_hash</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structbtr__search__t.html">btr_search_t</a> *<a class="code" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                               <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *tuple, ulint <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                               ulint latch_mode, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                               ulint has_search_latch, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">/** Moves or deletes hash entries for moved records. If new_page is already</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">hashed, then the hash index for page, if any, is dropped. If new_page is not</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">hashed, and page is hashed, then a new hash index is built to new_page with the</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">same parameters as page (this often happens when a page is split).</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">@param[in,out]  new_block       records are copied to this page.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">@param[in,out]  block           index page from which record are copied, and the</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">                                copied records will be deleted from this page.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">@param[in,out]  index           record descriptor */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a0e1819915b9d3ea4cc7bc68099c8c197">btr_search_move_or_delete_hash_entries</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *new_block,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                            <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                            <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/** Drop any adaptive hash index entries that point to an index page.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">@param[in,out]  block   block containing index page, s- or x-latched, or an</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">                        index page for which we know that</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">                        block-&gt;buf_fix_count == 0 or it is an index page which</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">                        has already been removed from the buf_pool-&gt;page_hash</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">                        i.e.: it is in state BUF_BLOCK_REMOVE_HASH */</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#ab39702c67c70b79fda87632a6c275ef6">btr_search_drop_page_hash_index</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/** Drop any adaptive hash index entries that may point to an index</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">page that may be in the buffer pool, when a page is evicted from the</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">buffer pool or freed in a file segment.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">@param[in]      page_id         page id</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">@param[in]      page_size       page size */</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#adaff45b572509cfee812d29b6bff70ae">btr_search_drop_page_hash_when_freed</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/** Drop any adaptive hash index entries for a table.</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">@param[in,out]  table   to drop indexes of this table */</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#ac818315fb97b5d54d297cf412099c539">btr_drop_ahi_for_table</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">/** Drop any adaptive hash index entries for a index.</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">@param[in,out]  index   to drop hash indexes for this index */</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#acd22a606d71c0a3c3f16e44c4ca762d3">btr_drop_ahi_for_index</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/** Updates the page hash index when a single record is inserted on a page.</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">@param[in]      cursor  cursor which was positioned to the place to insert</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">                        using btr_cur_search_, and the new record has been</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">                        inserted next to the cursor. */</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#af6127ad9f7dc94470ae793678a142733">btr_search_update_hash_node_on_insert</a>(<a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">/** Updates the page hash index when a single record is inserted on a page.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">@param[in,out]  cursor          cursor which was positioned to the</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">                                place to insert using btr_cur_search_...,</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">                                and the new record has been inserted next</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">                                to the cursor */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a3db029db26ac3aebf644f8fddab1291a">btr_search_update_hash_on_insert</a>(<a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">/** Updates the page hash index when a single record is deleted from a page.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">@param[in]      cursor  cursor which was positioned on the record to delete</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">                        using btr_cur_search_, the record is not yet deleted.*/</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a60642dc094d4d5e7a543931b9208a193">btr_search_update_hash_on_delete</a>(<a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">/** Validates the search system.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">@return true if ok */</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="btr0sea_8h.html#a2f95d30143774139cb7a348a98d05b50">btr_search_validate</a>();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/** X-Lock the search latch (corresponding to given index)</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">@param[in]      index   index handler */</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#abf46be1a7e18a9168aca24bcf536c686">btr_search_x_lock</a>(<span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/** X-Unlock the search latch (corresponding to given index)</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">@param[in]      index   index handler */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a3d5c03e4869a12c5d204b5e885425bd6">btr_search_x_unlock</a>(<span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/** Lock all search latches in exclusive mode. */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a41ea0aa397378439876aa05e83fe8612">btr_search_x_lock_all</a>();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">/** Unlock all search latches from exclusive mode. */</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a6f1830473dd74b484b2db083cc2e8eb2">btr_search_x_unlock_all</a>();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/** S-Lock the search latch (corresponding to given index)</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">@param[in]      index   index handler */</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a63fd4c1b0e607eec1722bf21dee2772b">btr_search_s_lock</a>(<span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/** S-Unlock the search latch (corresponding to given index)</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">@param[in]      index   index handler */</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a823267487836b35fd0e4dfc39c0d7175">btr_search_s_unlock</a>(<span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">/** Lock all search latches in shared mode. */</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#aa5944c9d79529ddb2c031135eb6ce9b3">btr_search_s_lock_all</a>();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/** Check if thread owns all the search latches.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">@param[in]      mode    lock mode check</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">@retval true if owns all of them</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">@retval false if does not own some of them */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="btr0sea_8h.html#a33bd976de1c985fa296bb6a45decc359">btr_search_own_all</a>(ulint <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/** Check if thread owns any of the search latches.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">@param[in]      mode    lock mode check</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">@retval true if owns any of them</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">@retval false if owns no search latch */</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="btr0sea_8h.html#af7431d9d410ed06387f0f62018eb749d">btr_search_own_any</a>(ulint <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">/** Unlock all search latches from shared mode. */</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0sea_8h.html#a3032c7de90c2e7ff6d8c2f48e1b3bbcb">btr_search_s_unlock_all</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/** Get the latch based on index attributes.</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">A latch is selected from an array of latches using pair of index-id, space-id.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">@param[in]      index   index handler</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">@return latch */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<a class="code" href="structrw__lock__t.html">rw_lock_t</a> *<a class="code" href="btr0sea_8h.html#ae845a078c7369cf5df1f9ac2ad0513a2">btr_get_search_latch</a>(<span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/** Get the hash-table based on index attributes.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">A table is selected from an array of tables using pair of index-id, space-id.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">@param[in]      index   index handler</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">@return hash table */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<a class="code" href="structhash__table__t.html">hash_table_t</a> *<a class="code" href="btr0sea_8h.html#ac131c1c4742fbe16b4242a669b7498f5">btr_get_search_table</a>(<span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/** The search info struct in an index */</span></div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="structbtr__search__t.html">  233</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbtr__search__t.html">btr_search_t</a> {</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#ac1dd7f9282a776bc446a502c94d483f1">  234</a></span>&#160;  ulint <a class="code" href="structbtr__search__t.html#ac1dd7f9282a776bc446a502c94d483f1">ref_count</a>; <span class="comment">/*!&lt; Number of blocks in this index tree</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">                   that have search index built</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">                   i.e. block-&gt;index points to this index.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">                   Protected by search latch except</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">                   when during initialization in</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">                   btr_search_info_create(). */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">  /** @{ The following fields are not protected by any latch.</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">  Unfortunately, this means that they must be aligned to</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">  the machine word, i.e., they cannot be turned into bit-fields. */</span></div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#af4216924beaf6c60c89b380f9bfcc833">  244</a></span>&#160;  <a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="structbtr__search__t.html#af4216924beaf6c60c89b380f9bfcc833">root_guess</a>; <span class="comment">/*!&lt; the root page frame when it was last time</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">                           fetched, or NULL */</span></div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#afacfcfaeaf8cc55ebda9cd4b0e7db912">  246</a></span>&#160;  ulint <a class="code" href="structbtr__search__t.html#afacfcfaeaf8cc55ebda9cd4b0e7db912">hash_analysis</a>;     <span class="comment">/*!&lt; when this exceeds</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">                           BTR_SEARCH_HASH_ANALYSIS, the hash</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">                           analysis starts; this is reset if no</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">                           success noticed */</span></div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#ae9d03013e2574d9a6add81b1ed17f4c8">  250</a></span>&#160;  ibool <a class="code" href="structbtr__search__t.html#ae9d03013e2574d9a6add81b1ed17f4c8">last_hash_succ</a>;    <span class="comment">/*!&lt; TRUE if the last search would have</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">                           succeeded, or did succeed, using the hash</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">                           index; NOTE that the value here is not exact:</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">                           it is not calculated for every search, and the</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">                           calculation itself is not always accurate! */</span></div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#a3aad69276fc01b2ba03e55ed2805eee7">  255</a></span>&#160;  ulint <a class="code" href="structbtr__search__t.html#a3aad69276fc01b2ba03e55ed2805eee7">n_hash_potential</a>;<span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">  /*!&lt; number of consecutive searches</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">  which would have succeeded, or did succeed,</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">  using the hash index;</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">  the range is 0 .. BTR_SEARCH_BUILD_LIMIT + 5 */</span><span class="comment"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">  /** @} */</span><span class="comment"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">  /**---------------------- @{ */</span></div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#a2337174dc51e84b5410ac34fde7274a3">  262</a></span>&#160;  ulint <a class="code" href="structbtr__search__t.html#a2337174dc51e84b5410ac34fde7274a3">n_fields</a>;  <span class="comment">/*!&lt; recommended prefix length for hash search:</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">                   number of full fields */</span></div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#ad498c0ff8099ab4729bdb911bc36d247">  264</a></span>&#160;  ulint <a class="code" href="structbtr__search__t.html#ad498c0ff8099ab4729bdb911bc36d247">n_bytes</a>;   <span class="comment">/*!&lt; recommended prefix: number of bytes in</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">                   an incomplete field</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">                   @see BTR_PAGE_MAX_REC_SIZE */</span></div><div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#a2a4d60598249a973aa52028af1b94404">  267</a></span>&#160;  ibool <a class="code" href="structbtr__search__t.html#a2a4d60598249a973aa52028af1b94404">left_side</a>; <span class="comment">/*!&lt; TRUE or FALSE, depending on whether</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">                   the leftmost record of several records with</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">                   the same prefix should be indexed in the</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">                   hash index */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                   <span class="comment">/*---------------------- @} */</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#ifdef UNIV_SEARCH_PERF_STAT</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  ulint n_hash_succ; <span class="comment">/*!&lt; number of successful hash searches thus</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">                     far */</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  ulint n_hash_fail; <span class="comment">/*!&lt; number of failed hash searches */</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  ulint n_patt_succ; <span class="comment">/*!&lt; number of successful pattern searches thus</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">                     far */</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  ulint n_searches;  <span class="comment">/*!&lt; number of searches */</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">#endif               </span><span class="comment">/* UNIV_SEARCH_PERF_STAT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="structbtr__search__t.html#acd0e9d6a0cfc93c0e20c58ad3322218c">  281</a></span>&#160;  ulint <a class="code" href="structbtr__search__t.html#acd0e9d6a0cfc93c0e20c58ad3322218c">magic_n</a>; <span class="comment">/*!&lt; magic number @see BTR_SEARCH_MAGIC_N */</span><span class="comment"></span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">/** value of btr_search_t::magic_n, used in assertions */</span></div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="btr0sea_8h.html#a21af67e8ab8196f51750925dbe2d73de">  283</a></span>&#160;<span class="preprocessor">#define BTR_SEARCH_MAGIC_N 1112765</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;};</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">/** The hash index system */</span></div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="structbtr__search__sys__t.html">  288</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbtr__search__sys__t.html">btr_search_sys_t</a> {</div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="structbtr__search__sys__t.html#a2867591f5aa02e0a48939c398dc63530">  289</a></span>&#160;  <a class="code" href="structhash__table__t.html">hash_table_t</a> **<a class="code" href="structbtr__search__sys__t.html#a2867591f5aa02e0a48939c398dc63530">hash_tables</a>; <span class="comment">/*!&lt; the adaptive hash tables,</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">                              mapping dtuple_fold values</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">                              to rec_t pointers on index pages */</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;};</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">/** Latches protecting access to adaptive hash index. */</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="keyword">extern</span> <a class="code" href="structrw__lock__t.html">rw_lock_t</a> **<a class="code" href="btr0sea_8h.html#a769f54cf6b0504b3890aca75005c1232">btr_search_latches</a>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">/** The adaptive hash index */</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="keyword">extern</span> <a class="code" href="structbtr__search__sys__t.html">btr_search_sys_t</a> *<a class="code" href="btr0sea_8h.html#ad0e4dd1c1cef9ea852db235d0f6aa959">btr_search_sys</a>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#ifdef UNIV_SEARCH_PERF_STAT</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/** Number of successful adaptive hash index lookups */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keyword">extern</span> ulint btr_search_n_succ;<span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">/** Number of failed adaptive hash index lookups */</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="keyword">extern</span> ulint btr_search_n_hash_fail;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_SEARCH_PERF_STAT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/** After change in n_fields or n_bytes in info, this many rounds are waited</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">before starting the hash analysis again: this is to save CPU time when there</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">is no hope in building a hash index. */</span></div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="btr0sea_8h.html#a431171bce1a77fe307d3235a816d483f">  310</a></span>&#160;<span class="preprocessor">#define BTR_SEARCH_HASH_ANALYSIS 17</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">/** Limit of consecutive searches for trying a search shortcut on the search</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">pattern */</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="btr0sea_8h.html#afa444f1d3967c86ca3e4839ea5732094">  314</a></span>&#160;<span class="preprocessor">#define BTR_SEARCH_ON_PATTERN_LIMIT 3</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">/** Limit of consecutive searches for trying a search shortcut using</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">the hash index */</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="btr0sea_8h.html#ae8021dc6fe525e918d403fa5cd50c450">  318</a></span>&#160;<span class="preprocessor">#define BTR_SEARCH_ON_HASH_LIMIT 3</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor">#include &quot;btr0sea.ic&quot;</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="btr0sea_8h_html_acd22a606d71c0a3c3f16e44c4ca762d3"><div class="ttname"><a href="btr0sea_8h.html#acd22a606d71c0a3c3f16e44c4ca762d3">btr_drop_ahi_for_index</a></div><div class="ttdeci">void btr_drop_ahi_for_index(dict_index_t *index)</div><div class="ttdoc">Drop any adaptive hash index entries for a index. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:1363</div></div>
<div class="ttc" id="structbtr__search__t_html_afacfcfaeaf8cc55ebda9cd4b0e7db912"><div class="ttname"><a href="structbtr__search__t.html#afacfcfaeaf8cc55ebda9cd4b0e7db912">btr_search_t::hash_analysis</a></div><div class="ttdeci">ulint hash_analysis</div><div class="ttdoc">when this exceeds BTR_SEARCH_HASH_ANALYSIS, the hash analysis starts; this is reset if no success not...</div><div class="ttdef"><b>Definition:</b> btr0sea.h:246</div></div>
<div class="ttc" id="structbtr__search__t_html_a2a4d60598249a973aa52028af1b94404"><div class="ttname"><a href="structbtr__search__t.html#a2a4d60598249a973aa52028af1b94404">btr_search_t::left_side</a></div><div class="ttdeci">ibool left_side</div><div class="ttdoc">TRUE or FALSE, depending on whether the leftmost record of several records with the same prefix shoul...</div><div class="ttdef"><b>Definition:</b> btr0sea.h:267</div></div>
<div class="ttc" id="structrw__lock__t_html"><div class="ttname"><a href="structrw__lock__t.html">rw_lock_t</a></div><div class="ttdoc">The structure used in the spin lock implementation of a read-write lock. </div><div class="ttdef"><b>Definition:</b> sync0rw.h:564</div></div>
<div class="ttc" id="btr0sea_8h_html_abf46be1a7e18a9168aca24bcf536c686"><div class="ttname"><a href="btr0sea_8h.html#abf46be1a7e18a9168aca24bcf536c686">btr_search_x_lock</a></div><div class="ttdeci">UNIV_INLINE void btr_search_x_lock(const dict_index_t *index)</div><div class="ttdoc">X-Lock the search latch (corresponding to given index) </div></div>
<div class="ttc" id="btr0sea_8h_html_ac131c1c4742fbe16b4242a669b7498f5"><div class="ttname"><a href="btr0sea_8h.html#ac131c1c4742fbe16b4242a669b7498f5">btr_get_search_table</a></div><div class="ttdeci">UNIV_INLINE hash_table_t * btr_get_search_table(const dict_index_t *index)</div><div class="ttdoc">Get the hash-table based on index attributes. </div></div>
<div class="ttc" id="btr0sea_8h_html_ab39702c67c70b79fda87632a6c275ef6"><div class="ttname"><a href="btr0sea_8h.html#ab39702c67c70b79fda87632a6c275ef6">btr_search_drop_page_hash_index</a></div><div class="ttdeci">void btr_search_drop_page_hash_index(buf_block_t *block)</div><div class="ttdoc">Drop any adaptive hash index entries that point to an index page. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:1052</div></div>
<div class="ttc" id="btr0sea_8h_html_aae5afff4ab34f3a949fa400fef17d74b"><div class="ttname"><a href="btr0sea_8h.html#aae5afff4ab34f3a949fa400fef17d74b">btr_search_sys_resize</a></div><div class="ttdeci">void btr_search_sys_resize(ulint hash_size)</div><div class="ttdoc">Resize hash index hash table. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:225</div></div>
<div class="ttc" id="structbuf__block__t_html"><div class="ttname"><a href="structbuf__block__t.html">buf_block_t</a></div><div class="ttdoc">The buffer control block structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1324</div></div>
<div class="ttc" id="classpage__id__t_html"><div class="ttname"><a href="classpage__id__t.html">page_id_t</a></div><div class="ttdoc">Page identifier. </div><div class="ttdef"><b>Definition:</b> buf0types.h:158</div></div>
<div class="ttc" id="btr0sea_8h_html_a2f95d30143774139cb7a348a98d05b50"><div class="ttname"><a href="btr0sea_8h.html#a2f95d30143774139cb7a348a98d05b50">btr_search_validate</a></div><div class="ttdeci">bool btr_search_validate()</div><div class="ttdoc">Validates the search system. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:2120</div></div>
<div class="ttc" id="structbtr__search__t_html_af4216924beaf6c60c89b380f9bfcc833"><div class="ttname"><a href="structbtr__search__t.html#af4216924beaf6c60c89b380f9bfcc833">btr_search_t::root_guess</a></div><div class="ttdeci">buf_block_t * root_guess</div><div class="ttdoc">the root page frame when it was last time fetched, or NULL </div><div class="ttdef"><b>Definition:</b> btr0sea.h:244</div></div>
<div class="ttc" id="btr0sea_8h_html_ad0e4dd1c1cef9ea852db235d0f6aa959"><div class="ttname"><a href="btr0sea_8h.html#ad0e4dd1c1cef9ea852db235d0f6aa959">btr_search_sys</a></div><div class="ttdeci">btr_search_sys_t * btr_search_sys</div><div class="ttdoc">The adaptive hash index. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:87</div></div>
<div class="ttc" id="btr0sea_8h_html_adaff45b572509cfee812d29b6bff70ae"><div class="ttname"><a href="btr0sea_8h.html#adaff45b572509cfee812d29b6bff70ae">btr_search_drop_page_hash_when_freed</a></div><div class="ttdeci">void btr_search_drop_page_hash_when_freed(const page_id_t &amp;page_id, const page_size_t &amp;page_size)</div><div class="ttdoc">Drop any adaptive hash index entries that may point to an index page that may be in the buffer pool...</div><div class="ttdef"><b>Definition:</b> btr0sea.cc:1242</div></div>
<div class="ttc" id="btr0sea_8h_html_af6127ad9f7dc94470ae793678a142733"><div class="ttname"><a href="btr0sea_8h.html#af6127ad9f7dc94470ae793678a142733">btr_search_update_hash_node_on_insert</a></div><div class="ttdeci">void btr_search_update_hash_node_on_insert(btr_cur_t *cursor)</div><div class="ttdoc">Updates the page hash index when a single record is inserted on a page. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:1739</div></div>
<div class="ttc" id="namespacestdx_1_1io_html_a2c9b563b772005f7960909d0d12186f5"><div class="ttname"><a href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">stdx::io::mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> file_handle.h:59</div></div>
<div class="ttc" id="structdict__table__t_html"><div class="ttname"><a href="structdict__table__t.html">dict_table_t</a></div><div class="ttdoc">Data structure for a database table. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:1532</div></div>
<div class="ttc" id="structbtr__cur__t_html"><div class="ttname"><a href="structbtr__cur__t.html">btr_cur_t</a></div><div class="ttdoc">The tree cursor: the definition appears here only for the compiler to know struct size! ...</div><div class="ttdef"><b>Definition:</b> btr0cur.h:698</div></div>
<div class="ttc" id="btr0sea_8h_html_ae845a078c7369cf5df1f9ac2ad0513a2"><div class="ttname"><a href="btr0sea_8h.html#ae845a078c7369cf5df1f9ac2ad0513a2">btr_get_search_latch</a></div><div class="ttdeci">UNIV_INLINE rw_lock_t * btr_get_search_latch(const dict_index_t *index)</div><div class="ttdoc">Get the latch based on index attributes. </div></div>
<div class="ttc" id="ha0ha_8h_html"><div class="ttname"><a href="ha0ha_8h.html">ha0ha.h</a></div><div class="ttdoc">The hash table with external chains. </div></div>
<div class="ttc" id="structbtr__search__t_html"><div class="ttname"><a href="structbtr__search__t.html">btr_search_t</a></div><div class="ttdoc">The search info struct in an index. </div><div class="ttdef"><b>Definition:</b> btr0sea.h:233</div></div>
<div class="ttc" id="btr0sea_8h_html_ad32b39d2c8d0479d5a4c3473171e03f6"><div class="ttname"><a href="btr0sea_8h.html#ad32b39d2c8d0479d5a4c3473171e03f6">btr_search_get_info</a></div><div class="ttdeci">UNIV_INLINE btr_search_t * btr_search_get_info(dict_index_t *index)</div><div class="ttdoc">Returns search info for an index. </div></div>
<div class="ttc" id="structmem__block__info__t_html"><div class="ttname"><a href="structmem__block__info__t.html">mem_block_info_t</a></div><div class="ttdoc">The info structure stored at the beginning of a heap block. </div><div class="ttdef"><b>Definition:</b> mem0mem.h:349</div></div>
<div class="ttc" id="btr0sea_8h_html_a888c563e815dc38cb86bc5505e6283d9"><div class="ttname"><a href="btr0sea_8h.html#a888c563e815dc38cb86bc5505e6283d9">btr_search_disable</a></div><div class="ttdeci">void btr_search_disable(bool need_mutex)</div><div class="ttdoc">Disable the adaptive hash search system and empty the index. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:301</div></div>
<div class="ttc" id="structbtr__search__t_html_ac1dd7f9282a776bc446a502c94d483f1"><div class="ttname"><a href="structbtr__search__t.html#ac1dd7f9282a776bc446a502c94d483f1">btr_search_t::ref_count</a></div><div class="ttdeci">ulint ref_count</div><div class="ttdoc">Number of blocks in this index tree that have search index built i.e. </div><div class="ttdef"><b>Definition:</b> btr0sea.h:234</div></div>
<div class="ttc" id="structbtr__search__t_html_a2337174dc51e84b5410ac34fde7274a3"><div class="ttname"><a href="structbtr__search__t.html#a2337174dc51e84b5410ac34fde7274a3">btr_search_t::n_fields</a></div><div class="ttdeci">ulint n_fields</div><div class="ttdoc"> </div><div class="ttdef"><b>Definition:</b> btr0sea.h:262</div></div>
<div class="ttc" id="structhash__table__t_html"><div class="ttname"><a href="structhash__table__t.html">hash_table_t</a></div><div class="ttdef"><b>Definition:</b> hash0hash.h:405</div></div>
<div class="ttc" id="btr0types_8h_html"><div class="ttname"><a href="btr0types_8h.html">btr0types.h</a></div><div class="ttdoc">The index tree general types. </div></div>
<div class="ttc" id="btr0sea_8h_html_a3d5c03e4869a12c5d204b5e885425bd6"><div class="ttname"><a href="btr0sea_8h.html#a3d5c03e4869a12c5d204b5e885425bd6">btr_search_x_unlock</a></div><div class="ttdeci">UNIV_INLINE void btr_search_x_unlock(const dict_index_t *index)</div><div class="ttdoc">X-Unlock the search latch (corresponding to given index) </div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="btr0sea_8h_html_a33bd976de1c985fa296bb6a45decc359"><div class="ttname"><a href="btr0sea_8h.html#a33bd976de1c985fa296bb6a45decc359">btr_search_own_all</a></div><div class="ttdeci">UNIV_INLINE bool btr_search_own_all(ulint mode)</div><div class="ttdoc">Check if thread owns all the search latches. </div></div>
<div class="ttc" id="btr0sea_8h_html_a769f54cf6b0504b3890aca75005c1232"><div class="ttname"><a href="btr0sea_8h.html#a769f54cf6b0504b3890aca75005c1232">btr_search_latches</a></div><div class="ttdeci">rw_lock_t ** btr_search_latches</div><div class="ttdoc">Latches protecting access to adaptive hash index. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:80</div></div>
<div class="ttc" id="dict0dict_8h_html"><div class="ttname"><a href="dict0dict_8h.html">dict0dict.h</a></div><div class="ttdoc">Data dictionary system. </div></div>
<div class="ttc" id="btr0sea_8h_html_a63fd4c1b0e607eec1722bf21dee2772b"><div class="ttname"><a href="btr0sea_8h.html#a63fd4c1b0e607eec1722bf21dee2772b">btr_search_s_lock</a></div><div class="ttdeci">UNIV_INLINE void btr_search_s_lock(const dict_index_t *index)</div><div class="ttdoc">S-Lock the search latch (corresponding to given index) </div></div>
<div class="ttc" id="structdtuple__t_html"><div class="ttname"><a href="structdtuple__t.html">dtuple_t</a></div><div class="ttdoc">Structure for an SQL data tuple of fields (logical record) </div><div class="ttdef"><b>Definition:</b> data0data.h:711</div></div>
<div class="ttc" id="structbtr__search__t_html_a3aad69276fc01b2ba03e55ed2805eee7"><div class="ttname"><a href="structbtr__search__t.html#a3aad69276fc01b2ba03e55ed2805eee7">btr_search_t::n_hash_potential</a></div><div class="ttdeci">ulint n_hash_potential</div><div class="ttdoc">number of consecutive searches which would have succeeded, or did succeed, using the hash index; the ...</div><div class="ttdef"><b>Definition:</b> btr0sea.h:255</div></div>
<div class="ttc" id="btr0sea_8h_html_ac818315fb97b5d54d297cf412099c539"><div class="ttname"><a href="btr0sea_8h.html#ac818315fb97b5d54d297cf412099c539">btr_drop_ahi_for_table</a></div><div class="ttdeci">void btr_drop_ahi_for_table(dict_table_t *table)</div><div class="ttdoc">Drop any adaptive hash index entries for a table. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:1283</div></div>
<div class="ttc" id="btr0sea_8h_html_a756846481bf82101fdb3c13e1e650020"><div class="ttname"><a href="btr0sea_8h.html#a756846481bf82101fdb3c13e1e650020">btr_search_info_get_ref_count</a></div><div class="ttdeci">ulint btr_search_info_get_ref_count(const btr_search_t *info, const dict_index_t *index)</div><div class="ttdoc">Returns the value of ref_count. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:400</div></div>
<div class="ttc" id="btr0sea_8h_html_a6f1830473dd74b484b2db083cc2e8eb2"><div class="ttname"><a href="btr0sea_8h.html#a6f1830473dd74b484b2db083cc2e8eb2">btr_search_x_unlock_all</a></div><div class="ttdeci">UNIV_INLINE void btr_search_x_unlock_all()</div><div class="ttdoc">Unlock all search latches from exclusive mode. </div></div>
<div class="ttc" id="btr0sea_8h_html_af7431d9d410ed06387f0f62018eb749d"><div class="ttname"><a href="btr0sea_8h.html#af7431d9d410ed06387f0f62018eb749d">btr_search_own_any</a></div><div class="ttdeci">UNIV_INLINE bool btr_search_own_any(ulint mode)</div><div class="ttdoc">Check if thread owns any of the search latches. </div></div>
<div class="ttc" id="structbtr__search__sys__t_html_a2867591f5aa02e0a48939c398dc63530"><div class="ttname"><a href="structbtr__search__sys__t.html#a2867591f5aa02e0a48939c398dc63530">btr_search_sys_t::hash_tables</a></div><div class="ttdeci">hash_table_t ** hash_tables</div><div class="ttdoc">the adaptive hash tables, mapping dtuple_fold values to rec_t pointers on index pages ...</div><div class="ttdef"><b>Definition:</b> btr0sea.h:289</div></div>
<div class="ttc" id="btr0sea_8h_html_aa5944c9d79529ddb2c031135eb6ce9b3"><div class="ttname"><a href="btr0sea_8h.html#aa5944c9d79529ddb2c031135eb6ce9b3">btr_search_s_lock_all</a></div><div class="ttdeci">UNIV_INLINE void btr_search_s_lock_all()</div><div class="ttdoc">Lock all search latches in shared mode. </div></div>
<div class="ttc" id="btr0sea_8h_html_a3db029db26ac3aebf644f8fddab1291a"><div class="ttname"><a href="btr0sea_8h.html#a3db029db26ac3aebf644f8fddab1291a">btr_search_update_hash_on_insert</a></div><div class="ttdeci">void btr_search_update_hash_on_insert(btr_cur_t *cursor)</div><div class="ttdoc">Updates the page hash index when a single record is inserted on a page. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:1797</div></div>
<div class="ttc" id="structbtr__search__t_html_acd0e9d6a0cfc93c0e20c58ad3322218c"><div class="ttname"><a href="structbtr__search__t.html#acd0e9d6a0cfc93c0e20c58ad3322218c">btr_search_t::magic_n</a></div><div class="ttdeci">ulint magic_n</div><div class="ttdoc">magic number </div><div class="ttdef"><b>Definition:</b> btr0sea.h:281</div></div>
<div class="ttc" id="structbtr__search__t_html_ad498c0ff8099ab4729bdb911bc36d247"><div class="ttname"><a href="structbtr__search__t.html#ad498c0ff8099ab4729bdb911bc36d247">btr_search_t::n_bytes</a></div><div class="ttdeci">ulint n_bytes</div><div class="ttdoc">recommended prefix: number of bytes in an incomplete field </div><div class="ttdef"><b>Definition:</b> btr0sea.h:264</div></div>
<div class="ttc" id="btr0sea_8h_html_a25ed49d7532a5527dec1a0153f9104ae"><div class="ttname"><a href="btr0sea_8h.html#a25ed49d7532a5527dec1a0153f9104ae">btr_search_info_update</a></div><div class="ttdeci">UNIV_INLINE void btr_search_info_update(dict_index_t *index, btr_cur_t *cursor)</div><div class="ttdoc">Updates the search info. </div></div>
<div class="ttc" id="btr0sea_8h_html_a823267487836b35fd0e4dfc39c0d7175"><div class="ttname"><a href="btr0sea_8h.html#a823267487836b35fd0e4dfc39c0d7175">btr_search_s_unlock</a></div><div class="ttdeci">UNIV_INLINE void btr_search_s_unlock(const dict_index_t *index)</div><div class="ttdoc">S-Unlock the search latch (corresponding to given index) </div></div>
<div class="ttc" id="classpage__size__t_html"><div class="ttname"><a href="classpage__size__t.html">page_size_t</a></div><div class="ttdoc">Page size descriptor. </div><div class="ttdef"><b>Definition:</b> page0size.h:49</div></div>
<div class="ttc" id="btr0sea_8h_html_a41ea0aa397378439876aa05e83fe8612"><div class="ttname"><a href="btr0sea_8h.html#a41ea0aa397378439876aa05e83fe8612">btr_search_x_lock_all</a></div><div class="ttdeci">UNIV_INLINE void btr_search_x_lock_all()</div><div class="ttdoc">Lock all search latches in exclusive mode. </div></div>
<div class="ttc" id="structbtr__search__t_html_ae9d03013e2574d9a6add81b1ed17f4c8"><div class="ttname"><a href="structbtr__search__t.html#ae9d03013e2574d9a6add81b1ed17f4c8">btr_search_t::last_hash_succ</a></div><div class="ttdeci">ibool last_hash_succ</div><div class="ttdoc">TRUE if the last search would have succeeded, or did succeed, using the hash index; NOTE that the val...</div><div class="ttdef"><b>Definition:</b> btr0sea.h:250</div></div>
<div class="ttc" id="structbtr__search__sys__t_html"><div class="ttname"><a href="structbtr__search__sys__t.html">btr_search_sys_t</a></div><div class="ttdoc">The hash index system. </div><div class="ttdef"><b>Definition:</b> btr0sea.h:288</div></div>
<div class="ttc" id="btr0sea_8h_html_a3032c7de90c2e7ff6d8c2f48e1b3bbcb"><div class="ttname"><a href="btr0sea_8h.html#a3032c7de90c2e7ff6d8c2f48e1b3bbcb">btr_search_s_unlock_all</a></div><div class="ttdeci">UNIV_INLINE void btr_search_s_unlock_all()</div><div class="ttdoc">Unlock all search latches from shared mode. </div></div>
<div class="ttc" id="mtr0mtr_8h_html"><div class="ttname"><a href="mtr0mtr_8h.html">mtr0mtr.h</a></div><div class="ttdoc">Mini-transaction buffer. </div></div>
<div class="ttc" id="btr0sea_8h_html_a5aeee1c109d4f24433611280240eca24"><div class="ttname"><a href="btr0sea_8h.html#a5aeee1c109d4f24433611280240eca24">btr_search_sys_free</a></div><div class="ttdeci">void btr_search_sys_free()</div><div class="ttdoc">Frees the adaptive search system at a database shutdown. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:257</div></div>
<div class="ttc" id="btr0sea_8h_html_ae2078f620596010d2d1a078635f58bfa"><div class="ttname"><a href="btr0sea_8h.html#ae2078f620596010d2d1a078635f58bfa">btr_search_guess_on_hash</a></div><div class="ttdeci">ibool btr_search_guess_on_hash(dict_index_t *index, btr_search_t *info, const dtuple_t *tuple, ulint mode, ulint latch_mode, btr_cur_t *cursor, ulint has_search_latch, mtr_t *mtr)</div><div class="ttdoc">Tries to guess the right search position based on the hash search info of the index. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:863</div></div>
<div class="ttc" id="btr0sea_8h_html_a60642dc094d4d5e7a543931b9208a193"><div class="ttname"><a href="btr0sea_8h.html#a60642dc094d4d5e7a543931b9208a193">btr_search_update_hash_on_delete</a></div><div class="ttdeci">void btr_search_update_hash_on_delete(btr_cur_t *cursor)</div><div class="ttdoc">Updates the page hash index when a single record is deleted from a page. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:1675</div></div>
<div class="ttc" id="mysql__ssl__rsa__setup_8cc_html_a5f4e2d00e13f7f971e3fbce0dee76947"><div class="ttname"><a href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a></div><div class="ttdeci">Log info(cout, &quot;NOTE&quot;)</div></div>
<div class="ttc" id="btr0sea_8h_html_aa8c01f670ee3f67f8dc42c0a44b40379"><div class="ttname"><a href="btr0sea_8h.html#aa8c01f670ee3f67f8dc42c0a44b40379">btr_search_info_create</a></div><div class="ttdeci">btr_search_t * btr_search_info_create(mem_heap_t *heap)</div><div class="ttdoc">Creates and initializes a search info struct. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:365</div></div>
<div class="ttc" id="btr0sea_8h_html_a0e1819915b9d3ea4cc7bc68099c8c197"><div class="ttname"><a href="btr0sea_8h.html#a0e1819915b9d3ea4cc7bc68099c8c197">btr_search_move_or_delete_hash_entries</a></div><div class="ttdeci">void btr_search_move_or_delete_hash_entries(buf_block_t *new_block, buf_block_t *block, dict_index_t *index)</div><div class="ttdoc">Moves or deletes hash entries for moved records. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:1617</div></div>
<div class="ttc" id="structmtr__t_html"><div class="ttname"><a href="structmtr__t.html">mtr_t</a></div><div class="ttdoc">Mini-transaction handle and buffer. </div><div class="ttdef"><b>Definition:</b> mtr0mtr.h:169</div></div>
<div class="ttc" id="btr0sea_8h_html_ab978894ba96e9edfb7097c2973e78ea3"><div class="ttname"><a href="btr0sea_8h.html#ab978894ba96e9edfb7097c2973e78ea3">btr_search_sys_create</a></div><div class="ttdeci">void btr_search_sys_create(ulint hash_size)</div><div class="ttdoc">Creates and initializes the adaptive search system at a database start. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:188</div></div>
<div class="ttc" id="btr0sea_8h_html_af1b9a64291047300e38c456a881f750c"><div class="ttname"><a href="btr0sea_8h.html#af1b9a64291047300e38c456a881f750c">btr_search_enable</a></div><div class="ttdeci">void btr_search_enable()</div><div class="ttdoc">Enable the adaptive hash search system. </div><div class="ttdef"><b>Definition:</b> btr0sea.cc:351</div></div>
<div class="ttc" id="rem0rec_8h_html"><div class="ttname"><a href="rem0rec_8h.html">rem0rec.h</a></div><div class="ttdoc">Record manager. </div></div>
<div class="ttc" id="structdict__index__t_html"><div class="ttname"><a href="structdict__index__t.html">dict_index_t</a></div><div class="ttdoc">Data structure for an index. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:886</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="btr0sea_8h.html">btr0sea.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
