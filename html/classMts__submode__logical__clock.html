<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Mts_submode_logical_clock Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classMts__submode__logical__clock.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classMts__submode__logical__clock-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Mts_submode_logical_clock Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Parallelization using Master parallelization information For significance of each method check definition of Mts_submode.  
 <a href="classMts__submode__logical__clock.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rpl__mts__submode_8h_source.html">rpl_mts_submode.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Mts_submode_logical_clock:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMts__submode__logical__clock.png" usemap="#Mts_5Fsubmode_5Flogical_5Fclock_map" alt=""/>
  <map id="Mts_5Fsubmode_5Flogical_5Fclock_map" name="Mts_5Fsubmode_5Flogical_5Fclock_map">
<area href="classMts__submode.html" alt="Mts_submode" shape="rect" coords="0,0,170,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac1335f9c05adbbaed2c71e5568036bfa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#ac1335f9c05adbbaed2c71e5568036bfa">Mts_submode_logical_clock</a> ()</td></tr>
<tr class="separator:ac1335f9c05adbbaed2c71e5568036bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79723c0de53677f98348a61bfa38d764"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a79723c0de53677f98348a61bfa38d764">schedule_next_event</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="classLog__event.html">Log_event</a> *ev) override</td></tr>
<tr class="memdesc:a79723c0de53677f98348a61bfa38d764"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does necessary arrangement before scheduling next event.  <a href="#a79723c0de53677f98348a61bfa38d764">More...</a><br /></td></tr>
<tr class="separator:a79723c0de53677f98348a61bfa38d764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbfd9090a94cc1e479f7c41bd33d68aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#abbfd9090a94cc1e479f7c41bd33d68aa">attach_temp_tables</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="classQuery__log__event.html">Query_log_event</a> *ev) override</td></tr>
<tr class="memdesc:abbfd9090a94cc1e479f7c41bd33d68aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logic to attach the temporary tables from the worker threads upon event execution.  <a href="#abbfd9090a94cc1e479f7c41bd33d68aa">More...</a><br /></td></tr>
<tr class="separator:abbfd9090a94cc1e479f7c41bd33d68aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac11536cfd6d892247984c01be8f12e9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#ac11536cfd6d892247984c01be8f12e9d">detach_temp_tables</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="classQuery__log__event.html">Query_log_event</a> *) override</td></tr>
<tr class="memdesc:ac11536cfd6d892247984c01be8f12e9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logic to detach the temporary tables from the worker threads upon event execution.  <a href="#ac11536cfd6d892247984c01be8f12e9d">More...</a><br /></td></tr>
<tr class="separator:ac11536cfd6d892247984c01be8f12e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a7a26b03382be8f1f3d10d84995c1cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSlave__worker.html">Slave_worker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a0a7a26b03382be8f1f3d10d84995c1cb">get_least_occupied_worker</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="rpl__mts__submode_8h.html#a1d19304bdce3da4512a26949c51d603c">Slave_worker_array</a> *ws, <a class="el" href="classLog__event.html">Log_event</a> *ev) override</td></tr>
<tr class="memdesc:a0a7a26b03382be8f1f3d10d84995c1cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logic to get least occupied worker when the sql mts_submode= master_parallel.  <a href="#a0a7a26b03382be8f1f3d10d84995c1cb">More...</a><br /></td></tr>
<tr class="separator:a0a7a26b03382be8f1f3d10d84995c1cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb83dbd9dd69537395bfe08dc5b97bc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#acb83dbd9dd69537395bfe08dc5b97bc6">start_new_group</a> ()</td></tr>
<tr class="separator:acb83dbd9dd69537395bfe08dc5b97bc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1f42bc5a3528849c24ffd45b8b25aca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#ab1f42bc5a3528849c24ffd45b8b25aca">withdraw_delegated_job</a> ()</td></tr>
<tr class="memdesc:ab1f42bc5a3528849c24ffd45b8b25aca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Withdraw the delegated_job increased by the group.  <a href="#ab1f42bc5a3528849c24ffd45b8b25aca">More...</a><br /></td></tr>
<tr class="separator:ab1f42bc5a3528849c24ffd45b8b25aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc1c8a482f2f041960335f2761a883c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#afc1c8a482f2f041960335f2761a883c6">wait_for_workers_to_finish</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="classSlave__worker.html">Slave_worker</a> *<a class="el" href="mysqlimport_8cc.html#ad60915d5b7c97ed8b59ff830f2f6eee1">ignore</a>=<a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>) override</td></tr>
<tr class="memdesc:afc1c8a482f2f041960335f2761a883c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for slave workers to finish off the pending tasks before returning.  <a href="#afc1c8a482f2f041960335f2761a883c6">More...</a><br /></td></tr>
<tr class="separator:afc1c8a482f2f041960335f2761a883c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607928e5b74a629de1d60347b5c1b718"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a607928e5b74a629de1d60347b5c1b718">wait_for_last_committed_trx</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> last_committed_arg)</td></tr>
<tr class="memdesc:a607928e5b74a629de1d60347b5c1b718"><td class="mdescLeft">&#160;</td><td class="mdescRight">The method implements logical timestamp conflict detection and resolution through waiting by the calling thread.  <a href="#a607928e5b74a629de1d60347b5c1b718">More...</a><br /></td></tr>
<tr class="separator:a607928e5b74a629de1d60347b5c1b718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac91a392c2d94d6e6045f0ca8f1cbfa00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#ac91a392c2d94d6e6045f0ca8f1cbfa00">get_lwm_timestamp</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> need_lock)</td></tr>
<tr class="memdesc:ac91a392c2d94d6e6045f0ca8f1cbfa00"><td class="mdescLeft">&#160;</td><td class="mdescRight">The method finds the minimum logical timestamp (low-water-mark) of committed transactions.  <a href="#ac91a392c2d94d6e6045f0ca8f1cbfa00">More...</a><br /></td></tr>
<tr class="separator:ac91a392c2d94d6e6045f0ca8f1cbfa00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b02848ef72e31334a02a3df9854680f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a8b02848ef72e31334a02a3df9854680f">estimate_lwm_timestamp</a> ()</td></tr>
<tr class="separator:a8b02848ef72e31334a02a3df9854680f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a5b7f3cafdef99d8851e35d4f6780c9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a3a5b7f3cafdef99d8851e35d4f6780c9">~Mts_submode_logical_clock</a> () override</td></tr>
<tr class="separator:a3a5b7f3cafdef99d8851e35d4f6780c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classMts__submode"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classMts__submode')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classMts__submode.html">Mts_submode</a></td></tr>
<tr class="memitem:af26ac1309f488afac7efd4ff5aa0cb41 inherit pub_methods_classMts__submode"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode.html#af26ac1309f488afac7efd4ff5aa0cb41">Mts_submode</a> ()</td></tr>
<tr class="separator:af26ac1309f488afac7efd4ff5aa0cb41 inherit pub_methods_classMts__submode"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8669d5047ddf9668c5d6d5d6977cb371 inherit pub_methods_classMts__submode"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rpl__mts__submode_8h.html#a959672287d6c22e4e95d1a1ad28bbe0b">enum_mts_parallel_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode.html#a8669d5047ddf9668c5d6d5d6977cb371">get_type</a> ()</td></tr>
<tr class="separator:a8669d5047ddf9668c5d6d5d6977cb371 inherit pub_methods_classMts__submode"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4159b81fba3b6ddd0ac04fdb0e0461b3 inherit pub_methods_classMts__submode"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode.html#a4159b81fba3b6ddd0ac04fdb0e0461b3">set_multi_threaded_applier_context</a> (const <a class="el" href="classRelay__log__info.html">Relay_log_info</a> &amp;, <a class="el" href="classLog__event.html">Log_event</a> &amp;)</td></tr>
<tr class="memdesc:a4159b81fba3b6ddd0ac04fdb0e0461b3 inherit pub_methods_classMts__submode"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets additional context before the event is set to execute.  <a href="classMts__submode.html#a4159b81fba3b6ddd0ac04fdb0e0461b3">More...</a><br /></td></tr>
<tr class="separator:a4159b81fba3b6ddd0ac04fdb0e0461b3 inherit pub_methods_classMts__submode"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df42d810f403e66de4e6c8663eb925f inherit pub_methods_classMts__submode"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode.html#a1df42d810f403e66de4e6c8663eb925f">~Mts_submode</a> ()</td></tr>
<tr class="separator:a1df42d810f403e66de4e6c8663eb925f inherit pub_methods_classMts__submode"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a864989cdf17ff4a696b4f74dd8a00c1d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a864989cdf17ff4a696b4f74dd8a00c1d">clock_leq</a> (<a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> a, <a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> b)</td></tr>
<tr class="separator:a864989cdf17ff4a696b4f74dd8a00c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a691eb2ea538782d6dada60468d28cb0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a691eb2ea538782d6dada60468d28cb0a">jobs_done</a></td></tr>
<tr class="separator:a691eb2ea538782d6dada60468d28cb0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f1fd1935a78bbd7dac021de2354ea7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a62f1fd1935a78bbd7dac021de2354ea7">is_error</a></td></tr>
<tr class="separator:a62f1fd1935a78bbd7dac021de2354ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e5167812d9cb16cb8d232b919c44cf0"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a8e5167812d9cb16cb8d232b919c44cf0">min_waited_timestamp</a></td></tr>
<tr class="separator:a8e5167812d9cb16cb8d232b919c44cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a744169bad4e3ea03a15e62ba4e24492b"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a744169bad4e3ea03a15e62ba4e24492b">INDEX_UNDEF</a> = (<a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>)-1</td></tr>
<tr class="separator:a744169bad4e3ea03a15e62ba4e24492b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ac75e4dcd258a79d3c4eb03ab0bf0ad02"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#ac75e4dcd258a79d3c4eb03ab0bf0ad02">get_server_and_thread_id</a> (<a class="el" href="structTABLE.html">TABLE</a> *table)</td></tr>
<tr class="memdesc:ac75e4dcd258a79d3c4eb03ab0bf0ad02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protected method to fetch the server_id and pseudo_thread_id from a temporary table.  <a href="#ac75e4dcd258a79d3c4eb03ab0bf0ad02">More...</a><br /></td></tr>
<tr class="separator:ac75e4dcd258a79d3c4eb03ab0bf0ad02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a093957d2566da47579792a82f499e147"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSlave__worker.html">Slave_worker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a093957d2566da47579792a82f499e147">get_free_worker</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli)</td></tr>
<tr class="memdesc:a093957d2566da47579792a82f499e147"><td class="mdescLeft">&#160;</td><td class="mdescRight">Protected method to fetch a worker having no events assigned.  <a href="#a093957d2566da47579792a82f499e147">More...</a><br /></td></tr>
<tr class="separator:a093957d2566da47579792a82f499e147"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a394f571fe48959aede98d7ef4775764e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a394f571fe48959aede98d7ef4775764e">first_event</a></td></tr>
<tr class="separator:a394f571fe48959aede98d7ef4775764e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa226980f6b1698dc32f821042386750c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#aa226980f6b1698dc32f821042386750c">force_new_group</a></td></tr>
<tr class="separator:aa226980f6b1698dc32f821042386750c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d851e38d495e3cca9a9c6dc843af97"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#ac9d851e38d495e3cca9a9c6dc843af97">is_new_group</a></td></tr>
<tr class="separator:ac9d851e38d495e3cca9a9c6dc843af97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0a56173d0e5b06c32c0059251f04029"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#ab0a56173d0e5b06c32c0059251f04029">delegated_jobs</a></td></tr>
<tr class="separator:ab0a56173d0e5b06c32c0059251f04029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a478738d20a0cc56cf54868e243b80775"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a478738d20a0cc56cf54868e243b80775">last_lwm_timestamp</a></td></tr>
<tr class="separator:a478738d20a0cc56cf54868e243b80775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb2136f0fa270836bb3fba5beaed74d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a2eb2136f0fa270836bb3fba5beaed74d">last_lwm_index</a></td></tr>
<tr class="separator:a2eb2136f0fa270836bb3fba5beaed74d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd435e52f1d326bb3fd36c459af74db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a6bd435e52f1d326bb3fd36c459af74db">last_committed</a></td></tr>
<tr class="separator:a6bd435e52f1d326bb3fd36c459af74db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a395d92725f74ec0f35e61e0e86b05061"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode__logical__clock.html#a395d92725f74ec0f35e61e0e86b05061">sequence_number</a></td></tr>
<tr class="separator:a395d92725f74ec0f35e61e0e86b05061"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classMts__submode"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classMts__submode')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classMts__submode.html">Mts_submode</a></td></tr>
<tr class="memitem:a463807bdef1fea15c6bd7653b1e420ce inherit pro_attribs_classMts__submode"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rpl__mts__submode_8h.html#a959672287d6c22e4e95d1a1ad28bbe0b">enum_mts_parallel_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMts__submode.html#a463807bdef1fea15c6bd7653b1e420ce">type</a></td></tr>
<tr class="separator:a463807bdef1fea15c6bd7653b1e420ce inherit pro_attribs_classMts__submode"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Parallelization using Master parallelization information For significance of each method check definition of Mts_submode. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac1335f9c05adbbaed2c71e5568036bfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1335f9c05adbbaed2c71e5568036bfa">&#9670;&nbsp;</a></span>Mts_submode_logical_clock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mts_submode_logical_clock::Mts_submode_logical_clock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3a5b7f3cafdef99d8851e35d4f6780c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a5b7f3cafdef99d8851e35d4f6780c9">&#9670;&nbsp;</a></span>~Mts_submode_logical_clock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Mts_submode_logical_clock::~Mts_submode_logical_clock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abbfd9090a94cc1e479f7c41bd33d68aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbfd9090a94cc1e479f7c41bd33d68aa">&#9670;&nbsp;</a></span>attach_temp_tables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Mts_submode_logical_clock::attach_temp_tables </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classQuery__log__event.html">Query_log_event</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logic to attach the temporary tables from the worker threads upon event execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>THD instance </td></tr>
    <tr><td class="paramname">rli</td><td>Relay_log_info instance </td></tr>
    <tr><td class="paramname">ev</td><td>Query_log_event that is being applied </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classMts__submode.html#a4b330d64e341d662c2194f3c132e33a8">Mts_submode</a>.</p>

</div>
</div>
<a id="a864989cdf17ff4a696b4f74dd8a00c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a864989cdf17ff4a696b4f74dd8a00c1d">&#9670;&nbsp;</a></span>clock_leq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Mts_submode_logical_clock::clock_leq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac11536cfd6d892247984c01be8f12e9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac11536cfd6d892247984c01be8f12e9d">&#9670;&nbsp;</a></span>detach_temp_tables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Mts_submode_logical_clock::detach_temp_tables </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classQuery__log__event.html">Query_log_event</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logic to detach the temporary tables from the worker threads upon event execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>THD instance </td></tr>
    <tr><td class="paramname">rli</td><td>Relay_log_info instance </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classMts__submode.html#ab6ae736d1ecbcc67a737ceb6f853a135">Mts_submode</a>.</p>

</div>
</div>
<a id="a8b02848ef72e31334a02a3df9854680f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b02848ef72e31334a02a3df9854680f">&#9670;&nbsp;</a></span>estimate_lwm_timestamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> Mts_submode_logical_clock::estimate_lwm_timestamp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a093957d2566da47579792a82f499e147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a093957d2566da47579792a82f499e147">&#9670;&nbsp;</a></span>get_free_worker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSlave__worker.html">Slave_worker</a> * Mts_submode_logical_clock::get_free_worker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Protected method to fetch a worker having no events assigned. </p>
<p>The method is supposed to be called by Coordinator, therefore comparison like w_i-&gt;jobs.len == 0 must (eventually) succeed.</p>
<p>todo: consider to optimize scan that is getting more expensive with more # of Workers.</p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to Worker or NULL if none is free. </dd></dl>

</div>
</div>
<a id="a0a7a26b03382be8f1f3d10d84995c1cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a7a26b03382be8f1f3d10d84995c1cb">&#9670;&nbsp;</a></span>get_least_occupied_worker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSlave__worker.html">Slave_worker</a> * Mts_submode_logical_clock::get_least_occupied_worker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpl__mts__submode_8h.html#a1d19304bdce3da4512a26949c51d603c">Slave_worker_array</a> *&#160;</td>
          <td class="paramname"><em>ws</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLog__event.html">Log_event</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logic to get least occupied worker when the sql mts_submode= master_parallel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rli</td><td>relay log info of coordinator </td></tr>
    <tr><td class="paramname">ws</td><td>array of worker threads </td></tr>
    <tr><td class="paramname">ev</td><td>event for which we are searching for a worker. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>slave worker thread or NULL when coordinator is killed by any worker. </dd></dl>

<p>Implements <a class="el" href="classMts__submode.html#a3ed9f6d210fe4c04b6601da18479d0d3">Mts_submode</a>.</p>

</div>
</div>
<a id="ac91a392c2d94d6e6045f0ca8f1cbfa00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac91a392c2d94d6e6045f0ca8f1cbfa00">&#9670;&nbsp;</a></span>get_lwm_timestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> Mts_submode_logical_clock::get_lwm_timestamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>need_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The method finds the minimum logical timestamp (low-water-mark) of committed transactions. </p>
<p>The successful search results in a pair of a logical timestamp value and a GAQ index that contains it. last_lwm_timestamp may still be raised though the search does not find any satisfying running index. Search is implemented as headway scanning of GAQ from a point of a previous search's stop position (last_lwm_index). Whether the cached (memorized) index value is considered to be stale when its timestamp gets less than the current "stable" LWM: </p><pre class="fragment"> last_lwm_timestamp &lt;= GAQ.lwm.sequence_number           (*)
</pre><p>Staleness is caused by GAQ garbage collection that increments the rhs of (*), see <code>move_queue_head()</code>. When that's diagnosed, the search in GAQ needs restarting from the queue tail.</p>
<p>Formally, the undefined cached value of last_lwm_timestamp is also stale.</p>
<pre class="fragment">           the last time index containg lwm
               +------+
               | LWM  |
               |  |   |
               V  V   V
GAQ:   xoooooxxxxxXXXXX...X
             ^   ^
             |   | LWM+1
             |
             +- tne new current_lwm

      &lt;---- logical (commit) time ----
</pre><p>here `x' stands for committed, `X' for committed and discarded from the running range of the queue, `o' for not committed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rli</td><td>Relay_log_info pointer </td></tr>
    <tr><td class="paramname">need_lock</td><td>Either the caller or the function must hold a mutex to avoid race with concurrent GAQ update.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>possibly updated current_lwm </dd></dl>

</div>
</div>
<a id="ac75e4dcd258a79d3c4eb03ab0bf0ad02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac75e4dcd258a79d3c4eb03ab0bf0ad02">&#9670;&nbsp;</a></span>get_server_and_thread_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>, <a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a> &gt; Mts_submode_logical_clock::get_server_and_thread_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Protected method to fetch the server_id and pseudo_thread_id from a temporary table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>instance pointer of TABLE structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std:pair&lt;uint, my_thread_id&gt; </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It is the caller's responsibility to make sure we call this function only for temp tables. </dd></dl>

</div>
</div>
<a id="a79723c0de53677f98348a61bfa38d764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79723c0de53677f98348a61bfa38d764">&#9670;&nbsp;</a></span>schedule_next_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Mts_submode_logical_clock::schedule_next_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLog__event.html">Log_event</a> *&#160;</td>
          <td class="paramname"><em>ev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Does necessary arrangement before scheduling next event. </p>
<p>The method computes the meta-group status of the being scheduled transaction represented by the event argument. When the status is found OUT (of the current meta-group) as encoded as is_new_group == true the global Scheduler (Coordinator thread) requests full synchronization with all Workers. The current being assigned group descriptor gets associated with the group's logical timestamp aka sequence_number.</p>
<dl class="section return"><dt>Returns</dt><dd>ER_MTS_CANT_PARALLEL, ER_MTS_INCONSISTENT_DATA 0 if no error or slave has been killed gracefully </dd></dl>

<p>Implements <a class="el" href="classMts__submode.html#ab3cfb824fb23b2ac1ee7d2d2b8845193">Mts_submode</a>.</p>

</div>
</div>
<a id="acb83dbd9dd69537395bfe08dc5b97bc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb83dbd9dd69537395bfe08dc5b97bc6">&#9670;&nbsp;</a></span>start_new_group()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Mts_submode_logical_clock::start_new_group </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a607928e5b74a629de1d60347b5c1b718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a607928e5b74a629de1d60347b5c1b718">&#9670;&nbsp;</a></span>wait_for_last_committed_trx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Mts_submode_logical_clock::wait_for_last_committed_trx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&#160;</td>
          <td class="paramname"><em>last_committed_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The method implements logical timestamp conflict detection and resolution through waiting by the calling thread. </p>
<p>The conflict or waiting condition is like the following </p><pre class="fragment">    lwm &lt; last_committed,
</pre><p>where lwm is a minimum logical timestamp of committed transactions. Since the lwm's exact value is not always available its pessimistic estimate (an old version) is improved (get_lwm_timestamp()) as the first step before to the actual waiting commitment.</p>
<p>Special cases include:</p>
<p>When <code>last_committed_arg</code> is uninitialized the calling thread must proceed without waiting for anyone. Any possible dependency with unknown commit parent transaction shall be sorted out by the parent;</p>
<p>When the gaq index is subsequent to the last lwm index there's no dependency of the current transaction with any regardless of lwm timestamp should it be SEQ_UNINIT. Consequently when GAQ consists of just one item there's none to wait. Such latter case is left to the caller to handle.</p>
<dl class="section note"><dt>Note</dt><dd>The caller must make sure the current transaction won't be waiting for itself. That is the method should not be caller by a Worker whose group assignment is in the GAQ front item.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rli</td><td>relay log info of coordinator </td></tr>
    <tr><td class="paramname">last_committed_arg</td><td>logical timestamp of a parent transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false as success, true when the error flag is raised or the caller thread is found killed. </dd></dl>

</div>
</div>
<a id="afc1c8a482f2f041960335f2761a883c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc1c8a482f2f041960335f2761a883c6">&#9670;&nbsp;</a></span>wait_for_workers_to_finish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Mts_submode_logical_clock::wait_for_workers_to_finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSlave__worker.html">Slave_worker</a> *&#160;</td>
          <td class="paramname"><em>ignore</em> = <code><a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits for slave workers to finish off the pending tasks before returning. </p>
<p>Used in this submode to make sure that all assigned jobs have been done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rli</td><td>coordinator rli. </td></tr>
    <tr><td class="paramname">ignore</td><td>worker to ignore. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 for error. 0 no error. </dd></dl>

<p>Implements <a class="el" href="classMts__submode.html#ab8570c46c0550e309b9206241e3303e0">Mts_submode</a>.</p>

</div>
</div>
<a id="ab1f42bc5a3528849c24ffd45b8b25aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1f42bc5a3528849c24ffd45b8b25aca">&#9670;&nbsp;</a></span>withdraw_delegated_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Mts_submode_logical_clock::withdraw_delegated_job </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Withdraw the delegated_job increased by the group. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab0a56173d0e5b06c32c0059251f04029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0a56173d0e5b06c32c0059251f04029">&#9670;&nbsp;</a></span>delegated_jobs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> Mts_submode_logical_clock::delegated_jobs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a394f571fe48959aede98d7ef4775764e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a394f571fe48959aede98d7ef4775764e">&#9670;&nbsp;</a></span>first_event</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Mts_submode_logical_clock::first_event</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa226980f6b1698dc32f821042386750c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa226980f6b1698dc32f821042386750c">&#9670;&nbsp;</a></span>force_new_group</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Mts_submode_logical_clock::force_new_group</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a744169bad4e3ea03a15e62ba4e24492b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744169bad4e3ea03a15e62ba4e24492b">&#9670;&nbsp;</a></span>INDEX_UNDEF</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> Mts_submode_logical_clock::INDEX_UNDEF = (<a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>)-1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a62f1fd1935a78bbd7dac021de2354ea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62f1fd1935a78bbd7dac021de2354ea7">&#9670;&nbsp;</a></span>is_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Mts_submode_logical_clock::is_error</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac9d851e38d495e3cca9a9c6dc843af97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d851e38d495e3cca9a9c6dc843af97">&#9670;&nbsp;</a></span>is_new_group</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Mts_submode_logical_clock::is_new_group</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a691eb2ea538782d6dada60468d28cb0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a691eb2ea538782d6dada60468d28cb0a">&#9670;&nbsp;</a></span>jobs_done</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> Mts_submode_logical_clock::jobs_done</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6bd435e52f1d326bb3fd36c459af74db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd435e52f1d326bb3fd36c459af74db">&#9670;&nbsp;</a></span>last_committed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> Mts_submode_logical_clock::last_committed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2eb2136f0fa270836bb3fba5beaed74d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb2136f0fa270836bb3fba5beaed74d">&#9670;&nbsp;</a></span>last_lwm_index</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> Mts_submode_logical_clock::last_lwm_index</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a478738d20a0cc56cf54868e243b80775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a478738d20a0cc56cf54868e243b80775">&#9670;&nbsp;</a></span>last_lwm_timestamp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&gt; Mts_submode_logical_clock::last_lwm_timestamp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8e5167812d9cb16cb8d232b919c44cf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e5167812d9cb16cb8d232b919c44cf0">&#9670;&nbsp;</a></span>min_waited_timestamp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>&gt; Mts_submode_logical_clock::min_waited_timestamp</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a395d92725f74ec0f35e61e0e86b05061"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a395d92725f74ec0f35e61e0e86b05061">&#9670;&nbsp;</a></span>sequence_number</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> Mts_submode_logical_clock::sequence_number</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="rpl__mts__submode_8h_source.html">rpl_mts_submode.h</a></li>
<li>sql/<a class="el" href="rpl__mts__submode_8cc.html">rpl_mts_submode.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classMts__submode__logical__clock.html">Mts_submode_logical_clock</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
