<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Rpl_info_factory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classRpl__info__factory.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classRpl__info__factory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Rpl_info_factory Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="rpl__info__factory_8h_source.html">rpl_info_factory.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRpl__info__factory_1_1file__data.html">file_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRpl__info__factory_1_1table__data.html">table_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a19567a82a93640860e1055d8e015e323"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a19567a82a93640860e1055d8e015e323">create_slave_info_objects</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mi_option, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rli_option, int thread_mask, <a class="el" href="classMultisource__info.html">Multisource_info</a> *pchannel_map)</td></tr>
<tr class="memdesc:a19567a82a93640860e1055d8e015e323"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function should be called from init_slave() only.  <a href="#a19567a82a93640860e1055d8e015e323">More...</a><br /></td></tr>
<tr class="separator:a19567a82a93640860e1055d8e015e323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c0849637b429290e926148c1567cd73"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a9c0849637b429290e926148c1567cd73">configure_channel_replication_filters</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, const char *channel_name)</td></tr>
<tr class="memdesc:a9c0849637b429290e926148c1567cd73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establish the relation between the channel's replication filters and the channel's Relay_log_info, and copy global replication filters to the channel's replication filters if needed.  <a href="#a9c0849637b429290e926148c1567cd73">More...</a><br /></td></tr>
<tr class="separator:a9c0849637b429290e926148c1567cd73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3d18b441c989fd4e43c4eb046e312a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMaster__info.html">Master_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a9f3d18b441c989fd4e43c4eb046e312a">create_mi_and_rli_objects</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mi_option, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rli_option, const char *<a class="el" href="structchannel.html">channel</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> convert_repo, <a class="el" href="classMultisource__info.html">Multisource_info</a> *<a class="el" href="rpl__msr_8h.html#ac754c881862033099c917aad939690f2">channel_map</a>)</td></tr>
<tr class="memdesc:a9f3d18b441c989fd4e43c4eb046e312a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create Master_info and Relay_log_info objects for a new channel.  <a href="#a9f3d18b441c989fd4e43c4eb046e312a">More...</a><br /></td></tr>
<tr class="separator:a9f3d18b441c989fd4e43c4eb046e312a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a74c072922deaaf75a2ae27883d163"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMaster__info.html">Master_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a12a74c072922deaaf75a2ae27883d163">create_mi</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rli_option, const char *<a class="el" href="structchannel.html">channel</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> conver_repo)</td></tr>
<tr class="memdesc:a12a74c072922deaaf75a2ae27883d163"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a Master info repository whose type is defined as a parameter.  <a href="#a12a74c072922deaaf75a2ae27883d163">More...</a><br /></td></tr>
<tr class="separator:a12a74c072922deaaf75a2ae27883d163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e8170af4eaaedeb71017b26290a827a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a3e8170af4eaaedeb71017b26290a827a">change_mi_repository</a> (<a class="el" href="classMaster__info.html">Master_info</a> *mi, const <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mi_option, const char **<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="memdesc:a3e8170af4eaaedeb71017b26290a827a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows to change the master info repository after startup.  <a href="#a3e8170af4eaaedeb71017b26290a827a">More...</a><br /></td></tr>
<tr class="separator:a3e8170af4eaaedeb71017b26290a827a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d77a4206e69472ba16b8c5706caffd9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a0d77a4206e69472ba16b8c5706caffd9">create_rli</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rli_option, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_slave_recovery, const char *<a class="el" href="structchannel.html">channel</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> convert_repo)</td></tr>
<tr class="memdesc:a0d77a4206e69472ba16b8c5706caffd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a Relay log info repository whose type is defined as a parameter.  <a href="#a0d77a4206e69472ba16b8c5706caffd9">More...</a><br /></td></tr>
<tr class="separator:a0d77a4206e69472ba16b8c5706caffd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18dca6c8099bc8cef77efe3ad1991fbb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a18dca6c8099bc8cef77efe3ad1991fbb">change_rli_repository</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, const <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rli_option, const char **<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="memdesc:a18dca6c8099bc8cef77efe3ad1991fbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows to change the relay log info repository after startup.  <a href="#a18dca6c8099bc8cef77efe3ad1991fbb">More...</a><br /></td></tr>
<tr class="separator:a18dca6c8099bc8cef77efe3ad1991fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a945ddc4fb1706f626f4e3b757b63b6d0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSlave__worker.html">Slave_worker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a945ddc4fb1706f626f4e3b757b63b6d0">create_worker</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> rli_option, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> worker_id, <a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_gaps_collecting_phase)</td></tr>
<tr class="memdesc:a945ddc4fb1706f626f4e3b757b63b6d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a Slave worker repository whose type is defined as a parameter.  <a href="#a945ddc4fb1706f626f4e3b757b63b6d0">More...</a><br /></td></tr>
<tr class="separator:a945ddc4fb1706f626f4e3b757b63b6d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc596368fb235f9007a3b8a4a94f1abf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#adc596368fb235f9007a3b8a4a94f1abf">reset_workers</a> (<a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli)</td></tr>
<tr class="memdesc:adc596368fb235f9007a3b8a4a94f1abf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all info from Worker info tables to render them useless in future MTS recovery, and indicate that in Coordinator info table.  <a href="#adc596368fb235f9007a3b8a4a94f1abf">More...</a><br /></td></tr>
<tr class="separator:adc596368fb235f9007a3b8a4a94f1abf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ade960ac36e822572410d09af44d90f0a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structRpl__info__factory_1_1file__data.html">Rpl_info_factory::file_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">struct_file_data</a></td></tr>
<tr class="separator:ade960ac36e822572410d09af44d90f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29445b681daa4fd4e5dd65b9973b206f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structRpl__info__factory_1_1table__data.html">Rpl_info_factory::table_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">struct_table_data</a></td></tr>
<tr class="separator:a29445b681daa4fd4e5dd65b9973b206f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a72142bc5d9427e55018297d733c99b9a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a72142bc5d9427e55018297d733c99b9a">init_repository_metadata</a> ()</td></tr>
<tr class="memdesc:a72142bc5d9427e55018297d733c99b9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes startup information on diferent repositories.  <a href="#a72142bc5d9427e55018297d733c99b9a">More...</a><br /></td></tr>
<tr class="separator:a72142bc5d9427e55018297d733c99b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc22549922ec12a0149454e216083179"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#adc22549922ec12a0149454e216083179">decide_repository</a> (<a class="el" href="classRpl__info.html">Rpl_info</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="structoption.html">option</a>, <a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **handler_src, <a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **handler_dest, const char **<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="memdesc:adc22549922ec12a0149454e216083179"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decides during startup what repository will be used based on the following decision table:  <a href="#adc22549922ec12a0149454e216083179">More...</a><br /></td></tr>
<tr class="separator:adc22549922ec12a0149454e216083179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7f622d8eef6206a892ac6e02538e55"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a9d7f622d8eef6206a892ac6e02538e55">init_repositories</a> (const <a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">struct_table_data</a> &amp;<a class="el" href="structRpl__info__factory_1_1table__data.html">table_data</a>, const <a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">struct_file_data</a> &amp;<a class="el" href="structRpl__info__factory_1_1file__data.html">file_data</a>, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="structoption.html">option</a>, <a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **handler_src, <a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **handler_dest, const char **<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="memdesc:a9d7f622d8eef6206a892ac6e02538e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates repositories that will be associated to either the Master_info or Relay_log_info.  <a href="#a9d7f622d8eef6206a892ac6e02538e55">More...</a><br /></td></tr>
<tr class="separator:a9d7f622d8eef6206a892ac6e02538e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29eda2ea119a765b618a5e322b5c43bb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a29eda2ea119a765b618a5e322b5c43bb">check_src_repository</a> (<a class="el" href="classRpl__info.html">Rpl_info</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="structoption.html">option</a>, <a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **handler_src)</td></tr>
<tr class="memdesc:a29eda2ea119a765b618a5e322b5c43bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is called by the decide_repository() and is used to check if the source repository exits.  <a href="#a29eda2ea119a765b618a5e322b5c43bb">More...</a><br /></td></tr>
<tr class="separator:a29eda2ea119a765b618a5e322b5c43bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd3e6ee25aa1dd76837b48be13b1844a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#abd3e6ee25aa1dd76837b48be13b1844a">check_error_repository</a> (<a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> *handler_src, <a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> *handler_dst, <a class="el" href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a> err_src, <a class="el" href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a> err_dst, const char **<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="memdesc:abd3e6ee25aa1dd76837b48be13b1844a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is called by the decide_repository() and is used print out information on errors.  <a href="#abd3e6ee25aa1dd76837b48be13b1844a">More...</a><br /></td></tr>
<tr class="separator:abd3e6ee25aa1dd76837b48be13b1844a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1754f07f644b2e7ea68d752d86ab0c3a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a1754f07f644b2e7ea68d752d86ab0c3a">init_repositories</a> (<a class="el" href="classRpl__info.html">Rpl_info</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **handler_src, <a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **handler_dst, const char **<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="memdesc:a1754f07f644b2e7ea68d752d86ab0c3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is called by the decide_repository() and is used to initialize the repositories through a low-level interfacei, which means that if they do not exist nothing will be created.  <a href="#a1754f07f644b2e7ea68d752d86ab0c3a">More...</a><br /></td></tr>
<tr class="separator:a1754f07f644b2e7ea68d752d86ab0c3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c381e2898c132c8453d207c5180916"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#aa8c381e2898c132c8453d207c5180916">scan_repositories</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *found_instances, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *found_rep_option, const <a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">struct_table_data</a> &amp;<a class="el" href="structRpl__info__factory_1_1table__data.html">table_data</a>, const <a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">struct_file_data</a> &amp;<a class="el" href="structRpl__info__factory_1_1file__data.html">file_data</a>, const char **<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="separator:aa8c381e2898c132c8453d207c5180916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aede114eafbbf95755a710e93d887072d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#aede114eafbbf95755a710e93d887072d">load_channel_names_from_repository</a> (std::vector&lt; std::string &gt; &amp;channel_list, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mi_instances, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mi_repository, const char *default_channel, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *default_channel_created_previously)</td></tr>
<tr class="memdesc:aede114eafbbf95755a710e93d887072d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a list of all the channels if existed on the previos slave run.  <a href="#aede114eafbbf95755a710e93d887072d">More...</a><br /></td></tr>
<tr class="separator:aede114eafbbf95755a710e93d887072d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a243ce53f1114c01350e2bdeacbeccfba"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a243ce53f1114c01350e2bdeacbeccfba">load_channel_names_from_table</a> (std::vector&lt; std::string &gt; &amp;channel_list, const char *default_channel, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *default_channel_created_previously)</td></tr>
<tr class="memdesc:a243ce53f1114c01350e2bdeacbeccfba"><td class="mdescLeft">&#160;</td><td class="mdescRight">In a multisourced slave, during init_slave(), the repositories are read to initialize the slave info objects.  <a href="#a243ce53f1114c01350e2bdeacbeccfba">More...</a><br /></td></tr>
<tr class="separator:a243ce53f1114c01350e2bdeacbeccfba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ac3fdb960d2f83e519947b5d171e618d6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">struct_table_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#ac3fdb960d2f83e519947b5d171e618d6">rli_table_data</a></td></tr>
<tr class="separator:ac3fdb960d2f83e519947b5d171e618d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae299281afb92b99aa71ed79722663cef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">struct_file_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#ae299281afb92b99aa71ed79722663cef">rli_file_data</a></td></tr>
<tr class="separator:ae299281afb92b99aa71ed79722663cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d464e0a79b1c8637cdc151dd04741b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">struct_table_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a92d464e0a79b1c8637cdc151dd04741b">mi_table_data</a></td></tr>
<tr class="separator:a92d464e0a79b1c8637cdc151dd04741b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8bd971906a31e5d813870e44476a33d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">struct_file_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#ad8bd971906a31e5d813870e44476a33d">mi_file_data</a></td></tr>
<tr class="separator:ad8bd971906a31e5d813870e44476a33d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c9ee74a7c7c5e2794d2a38b67497739"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">struct_table_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a0c9ee74a7c7c5e2794d2a38b67497739">worker_table_data</a></td></tr>
<tr class="separator:a0c9ee74a7c7c5e2794d2a38b67497739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04498cb336af7960b666b64ef1e47a75"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">struct_file_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRpl__info__factory.html#a04498cb336af7960b666b64ef1e47a75">worker_file_data</a></td></tr>
<tr class="separator:a04498cb336af7960b666b64ef1e47a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ade960ac36e822572410d09af44d90f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade960ac36e822572410d09af44d90f0a">&#9670;&nbsp;</a></span>struct_file_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structRpl__info__factory_1_1file__data.html">Rpl_info_factory::file_data</a>  <a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">Rpl_info_factory::struct_file_data</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a29445b681daa4fd4e5dd65b9973b206f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29445b681daa4fd4e5dd65b9973b206f">&#9670;&nbsp;</a></span>struct_table_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structRpl__info__factory_1_1table__data.html">Rpl_info_factory::table_data</a>  <a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">Rpl_info_factory::struct_table_data</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3e8170af4eaaedeb71017b26290a827a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e8170af4eaaedeb71017b26290a827a">&#9670;&nbsp;</a></span>change_mi_repository()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::change_mi_repository </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMaster__info.html">Master_info</a> *&#160;</td>
          <td class="paramname"><em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mi_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows to change the master info repository after startup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mi</td><td>Reference to Master_info. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mi_option</td><td>Type of the repository, e.g. FILE TABLE. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>Error message if something goes wrong.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>No error </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a18dca6c8099bc8cef77efe3ad1991fbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18dca6c8099bc8cef77efe3ad1991fbb">&#9670;&nbsp;</a></span>change_rli_repository()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::change_rli_repository </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>rli_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows to change the relay log info repository after startup. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rli</td><td>Pointer to Relay_log_info. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rli_option</td><td>Type of the repository, e.g. FILE TABLE. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>Error message if something goes wrong.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>No error </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abd3e6ee25aa1dd76837b48be13b1844a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd3e6ee25aa1dd76837b48be13b1844a">&#9670;&nbsp;</a></span>check_error_repository()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::check_error_repository </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> *&#160;</td>
          <td class="paramname"><em>handler_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> *&#160;</td>
          <td class="paramname"><em>handler_dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a>&#160;</td>
          <td class="paramname"><em>err_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a>&#160;</td>
          <td class="paramname"><em>err_dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is called by the decide_repository() and is used print out information on errors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">handler_src</td><td>Source repository from where information is copied into the destination repository. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">handler_dest</td><td>Destination repository to where informaiton is copied. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">err_src</td><td>Possible error status of the source repo check </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">err_dst</td><td>Possible error status of the destination repo check </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>Error message if something goes wrong.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a29eda2ea119a765b618a5e322b5c43bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29eda2ea119a765b618a5e322b5c43bb">&#9670;&nbsp;</a></span>check_src_repository()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a> Rpl_info_factory::check_src_repository </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRpl__info.html">Rpl_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **&#160;</td>
          <td class="paramname"><em>handler_src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is called by the decide_repository() and is used to check if the source repository exits. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>Either master info or relay log info. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">option</td><td>Identifies the type of the repository that will be used, i.e., destination repository. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handler_src</td><td>Source repository from where information is</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>enum_return_check The repository's status. </dd></dl>

</div>
</div>
<a id="a9c0849637b429290e926148c1567cd73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c0849637b429290e926148c1567cd73">&#9670;&nbsp;</a></span>configure_channel_replication_filters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::configure_channel_replication_filters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Establish the relation between the channel's replication filters and the channel's Relay_log_info, and copy global replication filters to the channel's replication filters if needed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rli</td><td>Pointer to Relay_log_info. </td></tr>
    <tr><td class="paramname">channel_name</td><td>The channel name.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>No error </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a12a74c072922deaaf75a2ae27883d163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12a74c072922deaaf75a2ae27883d163">&#9670;&nbsp;</a></span>create_mi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaster__info.html">Master_info</a> * Rpl_info_factory::create_mi </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mi_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>to_decide_repo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a Master info repository whose type is defined as a parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mi_option</td><td>Type of the repository, e.g. FILE TABLE. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channel</td><td>the channel for which mi is to be created </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to_decide_repo</td><td>the flag is set to true if mi repositories are allowed to convert. For details, see init_slave()</td></tr>
  </table>
  </dd>
</dl>
<p>The execution fails if a user requests a type but a different type already exists in the system. This is done to avoid that a user accidentally accesses the wrong repository and makes the slave go out of sync.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Pointer</td><td>to Master_info Success </td></tr>
    <tr><td class="paramname">NULL</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f3d18b441c989fd4e43c4eb046e312a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f3d18b441c989fd4e43c4eb046e312a">&#9670;&nbsp;</a></span>create_mi_and_rli_objects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMaster__info.html">Master_info</a> * Rpl_info_factory::create_mi_and_rli_objects </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mi_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>rli_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>to_decide_repo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMultisource__info.html">Multisource_info</a> *&#160;</td>
          <td class="paramname"><em>pchannel_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create Master_info and Relay_log_info objects for a new channel. </p>
<p>Also, set cross dependencies between these objects used all over the code.</p>
<p>Both master_info and relay_log_info repositories should be of the type TABLE. We do a check for this here as well.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mi_option</td><td>master info repository </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rli_option</td><td>relay log info repository </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channel</td><td>the channel for which these objects should be created. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to_decide_repo</td><td>For this channel, check if repositories are allowed to convert from one type to other. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pchannel_map</td><td>a pointer to channel_map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer pointer to the created Master_info </dd>
<dd>
NULL when creation fails </dd></dl>

</div>
</div>
<a id="a0d77a4206e69472ba16b8c5706caffd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d77a4206e69472ba16b8c5706caffd9">&#9670;&nbsp;</a></span>create_rli()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> * Rpl_info_factory::create_rli </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>rli_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_slave_recovery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>to_decide_repo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a Relay log info repository whose type is defined as a parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rli_option</td><td>Type of the Relay log info repository </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_slave_recovery</td><td>If the slave should try to start a recovery process to get consistent relay log files </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channel</td><td>the channel for which mi is to be created </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to_decide_repo</td><td>If true, rli repositories are allowed to convert from one repo to other</td></tr>
  </table>
  </dd>
</dl>
<p>The execution fails if a user requests a type but a different type already exists in the system. This is done to avoid that a user accidentally accesses the wrong repository and make the slave go out of sync.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Pointer</td><td>to Relay_log_info Success </td></tr>
    <tr><td class="paramname">NULL</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a19567a82a93640860e1055d8e015e323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19567a82a93640860e1055d8e015e323">&#9670;&nbsp;</a></span>create_slave_info_objects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::create_slave_info_objects </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mi_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>rli_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>thread_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMultisource__info.html">Multisource_info</a> *&#160;</td>
          <td class="paramname"><em>pchannel_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function should be called from init_slave() only. </p>
<p>During the server start, read all the slave repositories on disk (either in FILE or TABLE form) and create corresponding slave info objects. Each thus created master_info object is added to pchannel_map.</p>
<p>Multisource replication is supported by only TABLE based repositories. Based on this fact, the following table shows the supported cases considering the repository type and multiple channels of a slave. Each &lt;&mdash;&gt; represents a channel with a name on top of it. '' is an empty stringed channel (or default channel). 'N' indicates some name for a channel.</p>
<p>+--------------------------&mdash;+---------------&mdash;+--------&mdash;+ | channels | Supported? FILE | TABLE | +--------------------------&mdash;+---------------&mdash;+--------&mdash;+ | '' | | | </p><table class="doxtable">
<tr>
<th>A) Master&lt;----&mdash;&gt;Slave </th><th>YES </th><th>YES  </th></tr>
<tr>
<td></td><td></td><td></td></tr>
<tr>
<td>'N' </td><td></td><td></td></tr>
<tr>
<td>B) Master&lt;----&mdash;&gt;Slave </td><td>NO </td><td>YES </td></tr>
<tr>
<td></td><td></td><td></td></tr>
<tr>
<td>'' </td><td></td><td></td></tr>
<tr>
<td>Master0&lt;---------&mdash;+ </td><td></td><td></td></tr>
<tr>
<td>'N' v </td><td>NO </td><td>YES </td></tr>
<tr>
<td>C) Master1&lt;--------&mdash;&gt;Slave</td><td></td><td></td></tr>
<tr>
<td>'N' ^ </td><td></td><td></td></tr>
<tr>
<td>Mastern&lt;---------&mdash;+ </td><td></td><td></td></tr>
<tr>
<td></td><td></td><td></td></tr>
<tr>
<td></td><td></td><td></td></tr>
<tr>
<td>'N' </td><td></td><td></td></tr>
<tr>
<td>Master1&lt;---------&mdash;+ </td><td></td><td></td></tr>
<tr>
<td>'N' v </td><td>NO </td><td>YES </td></tr>
<tr>
<td>D) Master2&lt;--------&mdash;&gt;Slave</td><td></td><td></td></tr>
<tr>
<td>'N' ^ </td><td></td><td></td></tr>
<tr>
<td>Mastern&lt;---------&mdash;+ </td><td></td><td></td></tr>
<tr>
<td></td><td></td><td></td></tr>
<tr>
<td></td><td></td><td></td></tr>
</table>
<p>+--------------------------&mdash;+---------------&mdash;+--------&mdash;+</p>
<p>In a new server, A) shown above is created by default. If there are multiple 'named' channels, but and if a default_channel is not created, it is created.</p>
<h1>Some points to note from the above table </h1>
<p>From the table it also follows that conversion of repositories is possible <em>ONLY</em> in the case of A) i.e for ex: if B) type repository (i.e a named slave channel) was found during server starup but the user repository option is INFO_REPOSITORY_FILE, then we exit the function.</p>
<dl class="section note"><dt>Note</dt><dd>: only for type A) i.e default channel, it is permissable to have different repo types for Master_info and Relay_log_info (Ex: FILE for mi and TABLE for rli)</dd>
<dd>
: The above restrictions break factory pattern in the code which has been followed throughout before.</dd>
<dd>
: All the repository conversion(or live migration) functions (ex: decide_repository()) take Rpl_info::internal_id as an identifier which is always 1 for the case of Master_info and Relay_log_info. So, in the case of multisource replication, the decision to convert the repositories shall be made even before invoking decide_repository(). In other words, if a channel is not a default channel('') we shall not invoke decide_repository().</dd>
<dd>
: In general, the algorithm in creation of slave info object is: l1: new slave_info; l2: Initialize the repository handlers l3: if (default_channel) check and convert repositories else TABLE type repository set the value of PK in the TABLE handler.</dd>
<dd>
: Update from 5.6 to 5.7(which has Channel_Name in slave_info_tables) is handled in the upgrade script as usual.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mi_option</td><td>the user provided master_info_repository </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rli_option</td><td>the user provided relay_log_info_repository </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thread_mask</td><td>thread mask </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pchannel_map</td><td>the pointer to the multi source map (see, rpl_msr.h)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>success </td></tr>
    <tr><td class="paramname">true</td><td>fail </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a945ddc4fb1706f626f4e3b757b63b6d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a945ddc4fb1706f626f4e3b757b63b6d0">&#9670;&nbsp;</a></span>create_worker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSlave__worker.html">Slave_worker</a> * Rpl_info_factory::create_worker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>rli_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>worker_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_gaps_collecting_phase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a Slave worker repository whose type is defined as a parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rli_option</td><td>Type of the repository, e.g. FILE TABLE. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">worker_id</td><td>ID of the worker to be created. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rli</td><td>Pointer to Relay_log_info. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_gaps_collecting_phase</td><td>See Slave_worker::rli_init_info</td></tr>
  </table>
  </dd>
</dl>
<p>The execution fails if a user requests a type but a different type already exists in the system. This is done to avoid that a user accidentally accesses the wrong repository and make the slave go out of sync.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Pointer</td><td>to Slave_worker Success </td></tr>
    <tr><td class="paramname">NULL</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adc22549922ec12a0149454e216083179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc22549922ec12a0149454e216083179">&#9670;&nbsp;</a></span>decide_repository()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::decide_repository </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRpl__info.html">Rpl_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **&#160;</td>
          <td class="paramname"><em>handler_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **&#160;</td>
          <td class="paramname"><em>handler_dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decides during startup what repository will be used based on the following decision table: </p>
<div class="fragment"><div class="line">|--------------+-----------------------+-----------------------|</div><div class="line">| Exists \ Opt |         SOURCE        |      DESTINATION      |</div><div class="line">|--------------+-----------------------+-----------------------|</div><div class="line">| ~is_s, ~is_d |            -          | <a class="code" href="ha__mock_8cc.html#abfcfcc648279e13885ee4d22b1b7f5c9">Create</a>/Update D       |</div><div class="line">| ~is_s,  is_d |            -          | <a class="code" href="namespaceHttpStatusCode.html#a1ddc313c35bbc7ae58ae49506027abb2">Continue</a> with D       |</div><div class="line">|  is_s, ~is_d | Copy S into D         | <a class="code" href="ha__mock_8cc.html#abfcfcc648279e13885ee4d22b1b7f5c9">Create</a>/Update D       |</div><div class="line">|  is_s,  is_d | <a class="code" href="classError.html">Error</a>                 | <a class="code" href="classError.html">Error</a>                 |</div><div class="line">|--------------+-----------------------+-----------------------|</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>Either master info or relay log info. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">option</td><td>Identifies the type of the repository that will be used, i.e., destination repository. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handler_src</td><td>Source repository from where information is copied into the destination repository. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handler_dest</td><td>Destination repository to where informaiton is copied. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>Error message if something goes wrong.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>No error </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d7f622d8eef6206a892ac6e02538e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7f622d8eef6206a892ac6e02538e55">&#9670;&nbsp;</a></span>init_repositories() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::init_repositories </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">struct_table_data</a> &amp;&#160;</td>
          <td class="paramname"><em>table_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">struct_file_data</a> &amp;&#160;</td>
          <td class="paramname"><em>file_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>rep_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **&#160;</td>
          <td class="paramname"><em>handler_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **&#160;</td>
          <td class="paramname"><em>handler_dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates repositories that will be associated to either the Master_info or Relay_log_info. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table_data</td><td>Defines information to create a table repository. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">file_data</td><td>Defines information to create a file repository. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rep_option</td><td>Identifies the type of the repository that will be used, i.e., destination repository. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handler_src</td><td>Source repository from where information is copied into the destination repository. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handler_dest</td><td>Destination repository to where informaiton is copied. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>Error message if something goes wrong.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>No error </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1754f07f644b2e7ea68d752d86ab0c3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1754f07f644b2e7ea68d752d86ab0c3a">&#9670;&nbsp;</a></span>init_repositories() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::init_repositories </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRpl__info.html">Rpl_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **&#160;</td>
          <td class="paramname"><em>handler_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRpl__info__handler.html">Rpl_info_handler</a> **&#160;</td>
          <td class="paramname"><em>handler_dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is called by the decide_repository() and is used to initialize the repositories through a low-level interfacei, which means that if they do not exist nothing will be created. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>Either master info or relay log info. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handler_src</td><td>Source repository from where information is copied into the destination repository. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handler_dest</td><td>Destination repository to where informaiton is copied. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>Error message if something goes wrong.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>No error </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a72142bc5d9427e55018297d733c99b9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72142bc5d9427e55018297d733c99b9a">&#9670;&nbsp;</a></span>init_repository_metadata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Rpl_info_factory::init_repository_metadata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes startup information on diferent repositories. </p>

</div>
</div>
<a id="aede114eafbbf95755a710e93d887072d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aede114eafbbf95755a710e93d887072d">&#9670;&nbsp;</a></span>load_channel_names_from_repository()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::load_channel_names_from_repository </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>channel_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mi_instances</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>mi_repository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>default_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>default_channel_existed_previously</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a list of all the channels if existed on the previos slave run. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">channel_list</td><td>the names of all channels that exists on this slave.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mi_instances</td><td>number of master_info repositories</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mi_repository</td><td>Found master_info repository</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">default_channel</td><td>pointer to default channel.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">default_channel_existed_previously</td><td>Value filled with true if default channel existed previously. False if it is not.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>fail </td></tr>
    <tr><td class="paramname">false</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a243ce53f1114c01350e2bdeacbeccfba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a243ce53f1114c01350e2bdeacbeccfba">&#9670;&nbsp;</a></span>load_channel_names_from_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::load_channel_names_from_table </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>channel_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>default_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>default_channel_existed_previously</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>In a multisourced slave, during init_slave(), the repositories are read to initialize the slave info objects. </p>
<p>To initialize the slave info objects, we need the number of channels the slave was connected to previously. The following function, finds the number of channels in the master info repository. Later, this chanenl list is used to create a pair of {mi, rli} objects required for IO and SQL threads respectively.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">channel_list</td><td>A reference to the channel list. This will be filled after reading the master info table, row by row.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">default_channel</td><td>pointer to default channel.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">default_channel_existed_previously</td><td>Value filled with true if default channel existed previously. False if it is not.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adc596368fb235f9007a3b8a4a94f1abf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc596368fb235f9007a3b8a4a94f1abf">&#9670;&nbsp;</a></span>reset_workers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::reset_workers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete all info from Worker info tables to render them useless in future MTS recovery, and indicate that in Coordinator info table. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>on success </td></tr>
    <tr><td class="paramname">true</td><td>when a failure in deletion or writing to Coordinator table fails. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa8c381e2898c132c8453d207c5180916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c381e2898c132c8453d207c5180916">&#9670;&nbsp;</a></span>scan_repositories()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Rpl_info_factory::scan_repositories </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td>
          <td class="paramname"><em>found_instances</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td>
          <td class="paramname"><em>found_rep_option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">struct_table_data</a> &amp;&#160;</td>
          <td class="paramname"><em>table_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">struct_file_data</a> &amp;&#160;</td>
          <td class="paramname"><em>file_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad8bd971906a31e5d813870e44476a33d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8bd971906a31e5d813870e44476a33d">&#9670;&nbsp;</a></span>mi_file_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">Rpl_info_factory::struct_file_data</a> Rpl_info_factory::mi_file_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a92d464e0a79b1c8637cdc151dd04741b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92d464e0a79b1c8637cdc151dd04741b">&#9670;&nbsp;</a></span>mi_table_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">Rpl_info_factory::struct_table_data</a> Rpl_info_factory::mi_table_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae299281afb92b99aa71ed79722663cef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae299281afb92b99aa71ed79722663cef">&#9670;&nbsp;</a></span>rli_file_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">Rpl_info_factory::struct_file_data</a> Rpl_info_factory::rli_file_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac3fdb960d2f83e519947b5d171e618d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3fdb960d2f83e519947b5d171e618d6">&#9670;&nbsp;</a></span>rli_table_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">Rpl_info_factory::struct_table_data</a> Rpl_info_factory::rli_table_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a04498cb336af7960b666b64ef1e47a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04498cb336af7960b666b64ef1e47a75">&#9670;&nbsp;</a></span>worker_file_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRpl__info__factory.html#ade960ac36e822572410d09af44d90f0a">Rpl_info_factory::struct_file_data</a> Rpl_info_factory::worker_file_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0c9ee74a7c7c5e2794d2a38b67497739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c9ee74a7c7c5e2794d2a38b67497739">&#9670;&nbsp;</a></span>worker_table_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRpl__info__factory.html#a29445b681daa4fd4e5dd65b9973b206f">Rpl_info_factory::struct_table_data</a> Rpl_info_factory::worker_table_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="rpl__info__factory_8h_source.html">rpl_info_factory.h</a></li>
<li>sql/<a class="el" href="rpl__info__factory_8cc.html">rpl_info_factory.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classRpl__info__factory.html">Rpl_info_factory</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
