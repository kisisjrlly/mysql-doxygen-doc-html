<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: mysqltest — Program to Run Test Cases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('PAGE_MYSQLTEST.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">mysqltest — Program to Run Test Cases </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> program runs a test case against a MySQL server and optionally compares the output with a result file.</p>
<p>This program reads input written in a special test language. Typically, you invoke <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> using <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> rather than invoking it directly.</p>
<p>Features of <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>:</p>
<ul>
<li>Can send SQL statements to MySQL servers for execution</li>
<li>Can execute external shell commands</li>
<li>Can test whether the result from an SQL statement or shell command is as expected</li>
<li>Can connect to one or more standalone <b>mysqld</b> servers and switch between connections</li>
</ul>
<p>By default, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> reads the test case on the standard input. To run <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> this way, you normally invoke it like this:</p>
<pre class="fragment">shell&gt; mysqltest [options] [db_name] &lt; test_file
</pre><p>You can also name the test case file with a <b><code>--test- file</code>=<em>file_name</em></b> option.</p>
<p>The exit value from <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> is 0 for success, 1 for failure, and 62 if it skips the test case (for example, if after checking some preconditions it decides not to run the test).</p>
<p><a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> supports the following options:</p>
<ul>
<li>
<p class="startli"><code><code>--help</code>, -?</code></p>
<p>Display a help message and exit. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--async-client</code></code></p>
<p>Enable asynchronous communication support in mysql protocol. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--basedir</code>=<b>dir_name</b>, -b <b>dir_name</b></code></p>
<p>The base directory for tests. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--character-sets-dir</code>=<b>path</b></code></p>
<p>The directory where character sets are installed. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--colored-diff</code></code></p>
<p>Colorize the diff part of the output.</p>
<p>If enabled, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> uses <b>diff</b> command with <b><code>--color</code>='always'</b> option to print the colored diff. If the command fails or is not supported, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> will report an error and abort the test run.</p>
<dl class="section note"><dt>Note</dt><dd><b><code>--color</code></b> option for <b>diff</b> command is available from <b>GNU diffutils</b> version <b>3.4</b>. </dd></dl>
</li>
<li>
<p class="startli"><code><code>--compress</code>, -C</code></p>
<p>Compress all information sent between the client and the server if both support compression. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--cursor-protocol</code></code></p>
<p>Use cursors for prepared statements. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--database</code>=<b>db_name</b>, -D <b>db_name</b></code></p>
<p>The default database to use. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--debug</code>[=<b>debug_options</b>], -#[<b>debug_options</b>]</code></p>
<p>Write a debugging log if MySQL is built with debugging support. The default <b><em>debug_options</em></b> value is <b>'d:t:S:i:O,/tmp/mysqltest.trace'</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--debug-check</code></code></p>
<p>Print some debugging information when the program exits. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--debug-info</code></code></p>
<p>Print debugging information and memory and CPU usage statistics when the program exits. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--default-character-set</code>=<b>charset_name</b></code></p>
<p>Use <b>charset_name</b> as the default character set for the client and connection. For more information, see <a href="https://dev.mysql.com/doc/refman/8.0/en/charset-connection.html">Connection Character Sets and Collations</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--explain-protocol</code></code></p>
<p>Run <b>EXPLAIN EXTENDED</b> on all <b>SELECT</b>, <b>INSERT</b>, <b>REPLACE</b>, <b>UPDATE</b> and <b>DELETE</b> queries. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--host</code>=<b>host_name</b>, -h <b>host_name</b></code></p>
<p>Connect to the MySQL server on the given host. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--include</code>=<b>file_name</b>, -i <b>file_name</b></code></p>
<p>Include the contents of the given file before processing the contents of the test file. The included file should have the same format as other <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> test files. This option has the same effect as putting a <b><code>--source</code> <em>file_name</em></b> command as the first line of the test file. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--json-explain-protocol</code></code></p>
<p>Run <b>EXPLAIN EXTENDED</b> on all <b>SELECT</b>, <b>INSERT</b>, <b>REPLACE</b>, <b>UPDATE</b> and <b>DELETE</b> queries. The <b>json-explain-protocol</b> </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--logdir</code>=<b>dir_name</b></code></p>
<p>The directory to use for log files. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--mark-progress</code></code></p>
<p>Write the line number and elapsed time to <b><em>test_file</em>.progress.</b> </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--max-connect-retries</code>=<b>num</b></code></p>
<p>The maximum number of connection attempts when connecting to server. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--max-connections</code>=<b>num</b></code></p>
<p>The maximum number of simultaneous server connections per client (that is, per test). If not set, the maximum is 128. Minimum allowed limit is 8, maximum is 5120. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--no-defaults</code></code></p>
<p>Do not read default options from any option files. If used, this must be the first option. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--plugin-dir</code>=<b>path</b></code></p>
<p>The directory in which to look for plugins. It may be necessary to specify this option if the <b><em>default_auth</em></b> argument is used for the <b>connect()</b> command to specify an authentication plugin but <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> does not find it. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--password</code>[=<b>password</b>], -p[<b>password</b>]</code></p>
<p>The password to use when connecting to the server. If you use the short option form (<b>-p</b>), you <b><em>cannot</em></b> have a space between the option and the password. If you omit the <b><em>password</em></b> value following the <b><code>--password</code></b> or <b>-p</b> option on the command line, you are prompted for one. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--port</code>=<b>port_num</b>, -P <b>port_num</b></code></p>
<p>The TCP/IP port number to use for the connection. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--protocol</code>={TCP|SOCKET|PIPE|MEMORY}</code></p>
<p>Choose the protocol for communication with the server. <b>SOCKET</b> is default. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--ps-protocol</code></code></p>
<p>Use the prepared-statement protocol for communication. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--quiet</code></code></p>
<p>Suppress all normal output. This is a synonym for <b><code>--silent</code></b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--record</code>, -r</code></p>
<p>Record the output that results from running the test file into the file named by the <b><code>--result-file</code></b> option, if that option is given. It is an error to use this option without also using <b><code>--result-file</code></b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--result-file</code>=<b>file_name</b>, -R <b>file_name</b></code></p>
<p>This option specifies the file for test case expected results. <b><code>--result-file</code></b>, together with <b><code>--record</code></b>, determines how <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> treats the test actual and expected results for a test case:</p>
<ul>
<li>
<p class="startli">If the test produces no results, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> exits with an error message to that effect, unless <b><code>--result-file</code></b> is given and the named file is an empty file. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Otherwise, if <b><code>--result-file</code></b> is not given, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> sends test results to the standard output. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">With <b><code>--result-file</code></b> but not <b><code>--record</code></b>, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> reads the expected results from the given file and compares them with the actual results. If the results do not match, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> writes a <b>.reject</b> file in the log directory, outputs a diff of the two files, and exits with an error. </p>
<p class="endli"></p>
</li>
<li>
With both <b><code>--result-file</code></b> and <b><code>--record</code></b>, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> updates the given file by writing the actual test results to it.  </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--server-public-key-path</code>=<b>file_name</b></code></p>
<p>The path name to a file containing the server RSA public key. The file must be in PEM format. The public key is used for RSA encryption of the client password for connections to the server made using accounts that authenticate with the <b>sha256_password</b> plugin. This option is ignored for client accounts that do not authenticate with that plugin. It is also ignored if password encryption is not needed, as is the case when the client connects to the server using an SSL connection.</p>
<p>The server sends the public key to the client as needed, so it is not necessary to use this option for RSA password encryption to occur. It is more efficient to do so because then the server need not send the key.</p>
<p>For additional discussion regarding use of the <b>sha256_password plugin</b>, including how to get the RSA public key, see <a href="https://dev.mysql.com/doc/refman/8.0/en/sha256-authentication-plugin.html">The SHA-256 Authentication Plugin</a>.</p>
<p></p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--silent</code>, -s</code></p>
<p>Suppress all normal output. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--skip-safemalloc</code></code></p>
<p>Do not use memory allocation checking. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--socket</code>=<b>path</b>, -S <b>path</b></code></p>
<p>The socket file to use when connecting to <b>localhost</b> (which is the default host). </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--sp-protocol</code></code></p>
<p>Execute DML statements within a stored procedure. For every DML statement, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> creates and invokes a stored procedure that executes the statement rather than executing the statement directly. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--tail-lines</code>=<b>n</b></code></p>
<p>Specify how many lines of the result to include in the output if the test fails because an SQL statement fails. The default is 0, meaning no lines of result printed. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--test-file</code>=<b>file_name</b>, -x <b>file_name</b></code></p>
<p>Read test input from this file. The default is to read from the standard input. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--timer-file</code>=<b>file_name</b>, -m <b>file_name</b></code></p>
<p>If given, the number of millisecond spent running the test will be written to this file. This is used by <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> for its reporting. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--tls-version</code>=<b>protocol_list</b></code></p>
<p>The protocols permitted by the client for encrypted connections. The value is a comma-separated list containing one or more of these protocols: TLSv1, TLSv1.1, TLSv1.2. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--tmpdir</code>=<b>dir_name</b>, -t <b>dir_name</b></code></p>
<p>The temporary directory where socket files are created. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--trace-exec</code></code></p>
<p>If enabled, this option causes <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> to immediately display the output from executed programs to stdout. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--user</code>=<b>user_name</b>, -u <b>user_name</b></code></p>
<p>The MySQL user name to use when connecting to the server. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--verbose, -v</code></code></p>
<p>Verbose mode. Print out more information about what the program does. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--version, -V</code></code></p>
<p>Display version information and exit. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--view-protocol</code></code></p>
<p class="endli">Every <b>SELECT</b> statement is wrapped inside a view.  </p>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="PAGE_TESTING_TOOLS.html">Testing Tools</a></li><li class="navelem"><a class="el" href="PAGE_MYSQL_TEST_RUN.html">The MySQL Test Framework</a></li><li class="navelem"><a class="el" href="PAGE_MYSQLTEST_PROGRAMS.html">MySQL Test Programs</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
