<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: sql/transaction.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('transaction_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">transaction.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &quot;<a class="el" href="lex__string_8h_source.html">lex_string.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__inttypes_8h_source.html">my_inttypes.h</a>&quot;</code><br />
</div>
<p><a href="transaction_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3cc4e6afc93bd028f859c7282efe5f0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a3cc4e6afc93bd028f859c7282efe5f0a">trans_check_state</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a3cc4e6afc93bd028f859c7282efe5f0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we have a condition where the transaction state must not be changed (committed or rolled back).  <a href="#a3cc4e6afc93bd028f859c7282efe5f0a">More...</a><br /></td></tr>
<tr class="separator:a3cc4e6afc93bd028f859c7282efe5f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bdb01cd357511c0bb79aacb89956e6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a3bdb01cd357511c0bb79aacb89956e6b">trans_reset_one_shot_chistics</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a3bdb01cd357511c0bb79aacb89956e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper: transaction ended, SET TRANSACTION one-shot variables revert to session values.  <a href="#a3bdb01cd357511c0bb79aacb89956e6b">More...</a><br /></td></tr>
<tr class="separator:a3bdb01cd357511c0bb79aacb89956e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4f03373f333c0b00ec731b62b362fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a2d4f03373f333c0b00ec731b62b362fb">trans_track_end_trx</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a2d4f03373f333c0b00ec731b62b362fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper: Tell tracker (if any) that transaction ended.  <a href="#a2d4f03373f333c0b00ec731b62b362fb">More...</a><br /></td></tr>
<tr class="separator:a2d4f03373f333c0b00ec731b62b362fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8c98d977f080dae9ed9619c928855d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#ac8c98d977f080dae9ed9619c928855d9">trans_begin</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>=0)</td></tr>
<tr class="memdesc:ac8c98d977f080dae9ed9619c928855d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin a new transaction.  <a href="#ac8c98d977f080dae9ed9619c928855d9">More...</a><br /></td></tr>
<tr class="separator:ac8c98d977f080dae9ed9619c928855d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b50a2a2fc791fc8d6fdd49a7bcbabc4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a8b50a2a2fc791fc8d6fdd49a7bcbabc4">trans_commit</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> ignore_global_read_lock=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:a8b50a2a2fc791fc8d6fdd49a7bcbabc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commit the current transaction, making its changes permanent.  <a href="#a8b50a2a2fc791fc8d6fdd49a7bcbabc4">More...</a><br /></td></tr>
<tr class="separator:a8b50a2a2fc791fc8d6fdd49a7bcbabc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b4e20f436a5726f9dd446c46a542417"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a6b4e20f436a5726f9dd446c46a542417">trans_commit_implicit</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> ignore_global_read_lock=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:a6b4e20f436a5726f9dd446c46a542417"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implicitly commit the current transaction.  <a href="#a6b4e20f436a5726f9dd446c46a542417">More...</a><br /></td></tr>
<tr class="separator:a6b4e20f436a5726f9dd446c46a542417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1880c8f9bae6139c96b44f39282c1c86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a1880c8f9bae6139c96b44f39282c1c86">trans_rollback</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a1880c8f9bae6139c96b44f39282c1c86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback the current transaction, canceling its changes.  <a href="#a1880c8f9bae6139c96b44f39282c1c86">More...</a><br /></td></tr>
<tr class="separator:a1880c8f9bae6139c96b44f39282c1c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61ce790f2addf9bbb49b50716de8402e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a61ce790f2addf9bbb49b50716de8402e">trans_rollback_implicit</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a61ce790f2addf9bbb49b50716de8402e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implicitly rollback the current transaction, typically after deadlock was discovered.  <a href="#a61ce790f2addf9bbb49b50716de8402e">More...</a><br /></td></tr>
<tr class="separator:a61ce790f2addf9bbb49b50716de8402e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d7b58f987847836d1654f772275797c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a5d7b58f987847836d1654f772275797c">trans_commit_stmt</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> ignore_global_read_lock=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:a5d7b58f987847836d1654f772275797c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commit the single statement transaction.  <a href="#a5d7b58f987847836d1654f772275797c">More...</a><br /></td></tr>
<tr class="separator:a5d7b58f987847836d1654f772275797c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f7b78cd022171a50ea05ebcd820e951"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a3f7b78cd022171a50ea05ebcd820e951">trans_rollback_stmt</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a3f7b78cd022171a50ea05ebcd820e951"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback the single statement transaction.  <a href="#a3f7b78cd022171a50ea05ebcd820e951">More...</a><br /></td></tr>
<tr class="separator:a3f7b78cd022171a50ea05ebcd820e951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53fa6b803ea8278db331e1bfba4ae552"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a53fa6b803ea8278db331e1bfba4ae552">trans_commit_attachable</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a53fa6b803ea8278db331e1bfba4ae552"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commit the attachable transaction.  <a href="#a53fa6b803ea8278db331e1bfba4ae552">More...</a><br /></td></tr>
<tr class="separator:a53fa6b803ea8278db331e1bfba4ae552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a997dc3db8ac5cc5f47fdbb69bbb97ecd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a997dc3db8ac5cc5f47fdbb69bbb97ecd">trans_savepoint</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="lex__string_8h.html#a1fb89d4ad1109660fb2b796efdb3933e">LEX_STRING</a> <a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="memdesc:a997dc3db8ac5cc5f47fdbb69bbb97ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a named transaction savepoint.  <a href="#a997dc3db8ac5cc5f47fdbb69bbb97ecd">More...</a><br /></td></tr>
<tr class="separator:a997dc3db8ac5cc5f47fdbb69bbb97ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa91f1125e59f2968fac9a6b4e9b2326"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#aaa91f1125e59f2968fac9a6b4e9b2326">trans_rollback_to_savepoint</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="lex__string_8h.html#a1fb89d4ad1109660fb2b796efdb3933e">LEX_STRING</a> <a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="memdesc:aaa91f1125e59f2968fac9a6b4e9b2326"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback a transaction to the named savepoint.  <a href="#aaa91f1125e59f2968fac9a6b4e9b2326">More...</a><br /></td></tr>
<tr class="separator:aaa91f1125e59f2968fac9a6b4e9b2326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795c5c0fa9a4792c57fb641e787a4f8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a795c5c0fa9a4792c57fb641e787a4f8e">trans_release_savepoint</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="lex__string_8h.html#a1fb89d4ad1109660fb2b796efdb3933e">LEX_STRING</a> <a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="memdesc:a795c5c0fa9a4792c57fb641e787a4f8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the named savepoint from the set of savepoints of the current transaction.  <a href="#a795c5c0fa9a4792c57fb641e787a4f8e">More...</a><br /></td></tr>
<tr class="separator:a795c5c0fa9a4792c57fb641e787a4f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac8c98d977f080dae9ed9619c928855d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8c98d977f080dae9ed9619c928855d9">&#9670;&nbsp;</a></span>trans_begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_begin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin a new transaction. </p>
<dl class="section note"><dt>Note</dt><dd>Beginning a transaction implicitly commits any current transaction and releases existing locks.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Current thread </td></tr>
    <tr><td class="paramname">flags</td><td>Transaction flags</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3cc4e6afc93bd028f859c7282efe5f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cc4e6afc93bd028f859c7282efe5f0a">&#9670;&nbsp;</a></span>trans_check_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_check_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if we have a condition where the transaction state must not be changed (committed or rolled back). </p>
<p>Currently we check that we are not executing a stored program and that we don't have an active XA transaction.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the commit/rollback cannot be executed, false otherwise. </dd></dl>

</div>
</div>
<a id="a8b50a2a2fc791fc8d6fdd49a7bcbabc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b50a2a2fc791fc8d6fdd49a7bcbabc4">&#9670;&nbsp;</a></span>trans_commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_commit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>ignore_global_read_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commit the current transaction, making its changes permanent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Current thread </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ignore_global_read_lock</td><td>Allow commit to complete even if a global read lock is active. This can be used to allow changes to internal tables (e.g. slave status tables, analyze table).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a53fa6b803ea8278db331e1bfba4ae552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53fa6b803ea8278db331e1bfba4ae552">&#9670;&nbsp;</a></span>trans_commit_attachable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_commit_attachable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commit the attachable transaction. </p>
<dl class="section note"><dt>Note</dt><dd>This is slimmed down version of trans_commit_stmt() which commits attachable transaction but skips code which is unnecessary and unsafe for them (like dealing with GTIDs).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Current thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">False</td><td>- Success </td></tr>
    <tr><td class="paramname">True</td><td>- Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6b4e20f436a5726f9dd446c46a542417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b4e20f436a5726f9dd446c46a542417">&#9670;&nbsp;</a></span>trans_commit_implicit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_commit_implicit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>ignore_global_read_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implicitly commit the current transaction. </p>
<dl class="section note"><dt>Note</dt><dd>A implicit commit does not releases existing table locks.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Current thread </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ignore_global_read_lock</td><td>Allow commit to complete even if a global read lock is active. This can be used to allow changes to internal tables (e.g. slave status tables, analyze table).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5d7b58f987847836d1654f772275797c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d7b58f987847836d1654f772275797c">&#9670;&nbsp;</a></span>trans_commit_stmt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_commit_stmt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>ignore_global_read_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commit the single statement transaction. </p>
<dl class="section note"><dt>Note</dt><dd>Note that if the autocommit is on, then the following call inside InnoDB will commit or rollback the whole transaction (= the statement). The autocommit mechanism built into InnoDB is based on counting locks, but if the user has used LOCK TABLES then that mechanism does not know to do the commit.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Current thread </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ignore_global_read_lock</td><td>Allow commit to complete even if a global read lock is active. This can be used to allow changes to internal tables (e.g. slave status tables, analyze table).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a795c5c0fa9a4792c57fb641e787a4f8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795c5c0fa9a4792c57fb641e787a4f8e">&#9670;&nbsp;</a></span>trans_release_savepoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_release_savepoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lex__string_8h.html#a1fb89d4ad1109660fb2b796efdb3933e">LEX_STRING</a>&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the named savepoint from the set of savepoints of the current transaction. </p>
<dl class="section note"><dt>Note</dt><dd>No commit or rollback occurs. It is an error if the savepoint does not exist.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Current thread </td></tr>
    <tr><td class="paramname">name</td><td>Savepoint name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3bdb01cd357511c0bb79aacb89956e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bdb01cd357511c0bb79aacb89956e6b">&#9670;&nbsp;</a></span>trans_reset_one_shot_chistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trans_reset_one_shot_chistics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper: transaction ended, SET TRANSACTION one-shot variables revert to session values. </p>
<p>Let the transaction state tracker know. </p>

</div>
</div>
<a id="a1880c8f9bae6139c96b44f39282c1c86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1880c8f9bae6139c96b44f39282c1c86">&#9670;&nbsp;</a></span>trans_rollback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_rollback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback the current transaction, canceling its changes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Current thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61ce790f2addf9bbb49b50716de8402e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61ce790f2addf9bbb49b50716de8402e">&#9670;&nbsp;</a></span>trans_rollback_implicit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_rollback_implicit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implicitly rollback the current transaction, typically after deadlock was discovered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Current thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">False</td><td>Success </td></tr>
    <tr><td class="paramname">True</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>ha_rollback_low() which is indirectly called by this function will mark XA transaction for rollback by setting appropriate RM error status if there was transaction rollback request. </dd></dl>

</div>
</div>
<a id="a3f7b78cd022171a50ea05ebcd820e951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f7b78cd022171a50ea05ebcd820e951">&#9670;&nbsp;</a></span>trans_rollback_stmt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_rollback_stmt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback the single statement transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Current thread</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaa91f1125e59f2968fac9a6b4e9b2326"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa91f1125e59f2968fac9a6b4e9b2326">&#9670;&nbsp;</a></span>trans_rollback_to_savepoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_rollback_to_savepoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lex__string_8h.html#a1fb89d4ad1109660fb2b796efdb3933e">LEX_STRING</a>&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback a transaction to the named savepoint. </p>
<dl class="section note"><dt>Note</dt><dd>Modifications that the current transaction made to rows after the savepoint was set are undone in the rollback.</dd>
<dd>
Savepoints that were set at a later time than the named savepoint are deleted.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Current thread </td></tr>
    <tr><td class="paramname">name</td><td>Savepoint name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>
<p>Checking whether it is safe to release metadata locks acquired after savepoint, if rollback to savepoint is successful.</p>
<p>Whether it is safe to release MDL after rollback to savepoint depends on storage engines participating in transaction:</p>
<ul>
<li>InnoDB doesn't release any row-locks on rollback to savepoint so it is probably a bad idea to release MDL as well.</li>
<li>Binary log implementation in some cases (e.g when non-transactional tables involved) may choose not to remove events added after savepoint from transactional cache, but instead will write them to binary log accompanied with ROLLBACK TO SAVEPOINT statement. Since the real write happens at the end of transaction releasing MDL on tables mentioned in these events (i.e. acquired after savepoint and before rollback ot it) can break replication, as concurrent DROP TABLES statements will be able to drop these tables before events will get into binary log,</li>
</ul>

</div>
</div>
<a id="a997dc3db8ac5cc5f47fdbb69bbb97ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a997dc3db8ac5cc5f47fdbb69bbb97ecd">&#9670;&nbsp;</a></span>trans_savepoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trans_savepoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lex__string_8h.html#a1fb89d4ad1109660fb2b796efdb3933e">LEX_STRING</a>&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a named transaction savepoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Current thread </td></tr>
    <tr><td class="paramname">name</td><td>Savepoint name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d4f03373f333c0b00ec731b62b362fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4f03373f333c0b00ec731b62b362fb">&#9670;&nbsp;</a></span>trans_track_end_trx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trans_track_end_trx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper: Tell tracker (if any) that transaction ended. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li><li class="navelem"><a class="el" href="transaction_8h.html">transaction.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
