<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Running Test Cases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('PAGE_RUNNING_TESTCASES.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Running Test Cases </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Typically, you run the test suite either from within a source tree (after MySQL has been built), or on a host where the MySQL server distribution has been installed.</p>
<p>(If you find that the test suite is not included in your distribution, look for a similar distribution with <b>-test</b> in the name and install that as well.)</p>
<p>To run tests, your current working directory should be the <b>mysql-test</b> directory of your source tree or installed distribution. In a source distribution, <b> mysql-test</b> is under the root of the source tree. In a binary distribution, the location of <b>mysql-test</b> depends on the distribution layout. The program that runs the test suite, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a>, will figure out whether you are in a source tree or an installed directory tree.</p>
<p>To run the test suite, change location into your <b>mysql-test</b> directory and invoke the <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> script:</p>
<pre class="fragment">shell&gt; cd mysql-test
shell&gt; ./mysql-test-run.pl
</pre><p><a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> accepts options on the command line. For example:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl --force --suite=binlog
</pre><p>By default, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> exits if a test case fails. <b><code>--force</code></b> causes execution to continue regardless of test case failure.</p>
<p>For a full list of the supported options, see <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl â€” Run MySQL Test Suite</a>.</p>
<p>To run one or more specific test cases, name them on the <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> command line. Test case files have names like <b>t/<em>test_name</em>.test</b>, where <b><em>test_name</em></b> is the name of the test case, but each name given on the command line should be the test case name, not the full test case file name. The following command runs the test case named <b>rpl_abcd</b>, which has a test file of <b>t/rpl_abcd.test</b>:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl rpl_abcd
</pre><p>To run a family of test cases for which the names share a common prefix, use the <b><code>--do-test</code></b> option:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl --do-test=prefix
</pre><p>For example, the following command runs the events tests (test cases that have names beginning with <b>events</b>):</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl --do-test=events
</pre><p>To run a specific named testsuite with all the test cases in it, use the <b><code>--suite</code></b> option:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl --suite=suite_name
</pre><p>For example, the following command runs the replication tests located in the <b>rpl</b> suite:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl --suite=rpl
</pre><p><a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> starts the MySQL server, sets up the environment for calling the <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> program, and invokes <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> to run the test case. For each test case to be run, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> handles operations such as reading input from the test case file, creating server connections, and sending SQL statements to servers.</p>
<p>The language used in test case files is a mix of commands that the <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> program understands and SQL statements. Input that <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> doesn't understand is assumed to consist of SQL statements to be sent to the database server. This makes the test case language familiar to those that know how to write SQL and powerful enough to add the control needed to write test cases.</p>
<p>You need not start a MySQL server first before running tests. Instead, the <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> program will start the server or servers as needed. Any servers started for the test run use ports in the range from 13000 by default.</p>
<h1><a class="anchor" id="SECTION_RUNNING_TESTS_IN_PARALLEL"></a>
Running Tests in Parallel</h1>
<p>It is possible to run more than one instance of <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> simultaneously on the same machine. Both will by default use server ports from 13000 but will coordinate used port numbers as well as check for availibility, to avoid conflicts.</p>
<p>Running several instances from the same <b>mysql-test</b> directory is possible but problematic. You must the use the <b><code>--vardir</code></b> to set different log directories for each instance. Even so, you can get into trouble becuse they will write <b>.reject</b> files to the same directories.</p>
<p>It is also possible to have a single <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> run tests in several threads in parallel. Execution of the tests will be distributed among the threads. This is achieved using the <b><code>--parallel</code></b> option, with the number of threads as argument. The special value <b>auto</b> will ask <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> to pick a value automatically, based on system information. The parallel option may also be given using the environment variable <b>MTR_PARALLEL</b>.</p>
<dl class="section note"><dt>Note</dt><dd>Test cases which use <b>not_parallel.inc</b> are run at the end with a parallel value of <b>1</b> overriding the <b><code>--parallel</code></b> option value. Such test cases will be executed at the end of the test run one at a time. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="PAGE_TESTING_TOOLS.html">Testing Tools</a></li><li class="navelem"><a class="el" href="PAGE_MYSQL_TEST_RUN.html">The MySQL Test Framework</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
