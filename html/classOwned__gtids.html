<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Owned_gtids Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classOwned__gtids.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classOwned__gtids-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Owned_gtids Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents the set of GTIDs that are owned by some thread.  
 <a href="classOwned__gtids.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rpl__gtid_8h_source.html">rpl_gtid.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids_1_1Gtid__iterator.html">Gtid_iterator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterator over all gtids in a Owned_gtids set.  <a href="classOwned__gtids_1_1Gtid__iterator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOwned__gtids_1_1Node.html">Node</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents one owned GTID.  <a href="structOwned__gtids_1_1Node.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7b91d015754445c004455b37096da3f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a7b91d015754445c004455b37096da3f1">Owned_gtids</a> (<a class="el" href="classCheckable__rwlock.html">Checkable_rwlock</a> *<a class="el" href="classOwned__gtids.html#ac37bee236019cbcfad785a047075b2b9">sid_lock</a>)</td></tr>
<tr class="memdesc:a7b91d015754445c004455b37096da3f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new, empty Owned_gtids object.  <a href="#a7b91d015754445c004455b37096da3f1">More...</a><br /></td></tr>
<tr class="separator:a7b91d015754445c004455b37096da3f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91e433dfe634b5c501a681a145aabfb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#ad91e433dfe634b5c501a681a145aabfb">~Owned_gtids</a> ()</td></tr>
<tr class="memdesc:ad91e433dfe634b5c501a681a145aabfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys this Owned_gtids.  <a href="#ad91e433dfe634b5c501a681a145aabfb">More...</a><br /></td></tr>
<tr class="separator:ad91e433dfe634b5c501a681a145aabfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a323fa3724e5214e36bac9153e9cb3585"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rpl__gtid_8h.html#a3cf0e1a495b2402d8e6aa88f870316d5">enum_return_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a323fa3724e5214e36bac9153e9cb3585">add_gtid_owner</a> (const <a class="el" href="structGtid.html">Gtid</a> &amp;gtid, <a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a> owner)</td></tr>
<tr class="memdesc:a323fa3724e5214e36bac9153e9cb3585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a GTID to this Owned_gtids.  <a href="#a323fa3724e5214e36bac9153e9cb3585">More...</a><br /></td></tr>
<tr class="separator:a323fa3724e5214e36bac9153e9cb3585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4499c42b596c5ebd0e0cf7227783532"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#aa4499c42b596c5ebd0e0cf7227783532">get_gtids</a> (<a class="el" href="classGtid__set.html">Gtid_set</a> &amp;gtid_set) const</td></tr>
<tr class="separator:aa4499c42b596c5ebd0e0cf7227783532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc63a8ed9cff1f2dddd102176535073d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#afc63a8ed9cff1f2dddd102176535073d">remove_gtid</a> (const <a class="el" href="structGtid.html">Gtid</a> &amp;gtid, const <a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a> owner)</td></tr>
<tr class="memdesc:afc63a8ed9cff1f2dddd102176535073d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the given GTID.  <a href="#afc63a8ed9cff1f2dddd102176535073d">More...</a><br /></td></tr>
<tr class="separator:afc63a8ed9cff1f2dddd102176535073d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed0354047916db07b6a854e621f48674"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rpl__gtid_8h.html#a3cf0e1a495b2402d8e6aa88f870316d5">enum_return_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#aed0354047916db07b6a854e621f48674">ensure_sidno</a> (<a class="el" href="rpl__gtid_8h.html#a4873b950f954adcfa36c1665428ce3ff">rpl_sidno</a> sidno)</td></tr>
<tr class="memdesc:aed0354047916db07b6a854e621f48674"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensures that this Owned_gtids object can accomodate SIDNOs up to the given SIDNO.  <a href="#aed0354047916db07b6a854e621f48674">More...</a><br /></td></tr>
<tr class="separator:aed0354047916db07b6a854e621f48674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d5a45f8d36a5ae5efb668babcd9e09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a39d5a45f8d36a5ae5efb668babcd9e09">is_intersection_nonempty</a> (const <a class="el" href="classGtid__set.html">Gtid_set</a> *other) const</td></tr>
<tr class="memdesc:a39d5a45f8d36a5ae5efb668babcd9e09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if there is a least one element of this Owned_gtids set in the other Gtid_set.  <a href="#a39d5a45f8d36a5ae5efb668babcd9e09">More...</a><br /></td></tr>
<tr class="separator:a39d5a45f8d36a5ae5efb668babcd9e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64a21addf48daf859e338e8f8f49695e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a64a21addf48daf859e338e8f8f49695e">is_empty</a> () const</td></tr>
<tr class="memdesc:a64a21addf48daf859e338e8f8f49695e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this Owned_gtids is empty.  <a href="#a64a21addf48daf859e338e8f8f49695e">More...</a><br /></td></tr>
<tr class="separator:a64a21addf48daf859e338e8f8f49695e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87a9e66aa429f4d562c24623bd113093"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rpl__gtid_8h.html#a4873b950f954adcfa36c1665428ce3ff">rpl_sidno</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a87a9e66aa429f4d562c24623bd113093">get_max_sidno</a> () const</td></tr>
<tr class="memdesc:a87a9e66aa429f4d562c24623bd113093"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the maximal sidno that this Owned_gtids currently has space for.  <a href="#a87a9e66aa429f4d562c24623bd113093">More...</a><br /></td></tr>
<tr class="separator:a87a9e66aa429f4d562c24623bd113093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a746e2bc47416a49a418fa6dd0abb8421"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a746e2bc47416a49a418fa6dd0abb8421">to_string</a> (char *out) const</td></tr>
<tr class="memdesc:a746e2bc47416a49a418fa6dd0abb8421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a string representation of this Owned_gtids to the given buffer.  <a href="#a746e2bc47416a49a418fa6dd0abb8421">More...</a><br /></td></tr>
<tr class="separator:a746e2bc47416a49a418fa6dd0abb8421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d71e2cdcab169bbe86b9f6067b1c93a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a0d71e2cdcab169bbe86b9f6067b1c93a">get_max_string_length</a> () const</td></tr>
<tr class="memdesc:a0d71e2cdcab169bbe86b9f6067b1c93a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an upper bound on the length of the string representation of this Owned_gtids.  <a href="#a0d71e2cdcab169bbe86b9f6067b1c93a">More...</a><br /></td></tr>
<tr class="separator:a0d71e2cdcab169bbe86b9f6067b1c93a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc24132eb1138e5c291da8db213e47c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a2dc24132eb1138e5c291da8db213e47c">thread_owns_anything</a> (<a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a> thd_id) const</td></tr>
<tr class="memdesc:a2dc24132eb1138e5c291da8db213e47c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the given thread is the owner of any gtids.  <a href="#a2dc24132eb1138e5c291da8db213e47c">More...</a><br /></td></tr>
<tr class="separator:a2dc24132eb1138e5c291da8db213e47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4abec5df6285656ea7f69a4bef7ba79"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#ad4abec5df6285656ea7f69a4bef7ba79">to_string</a> () const</td></tr>
<tr class="memdesc:ad4abec5df6285656ea7f69a4bef7ba79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug only: return a newly allocated string representation of this Owned_gtids.  <a href="#ad4abec5df6285656ea7f69a4bef7ba79">More...</a><br /></td></tr>
<tr class="separator:ad4abec5df6285656ea7f69a4bef7ba79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa9384e98baaa628266f8d5e6a70c38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#adaa9384e98baaa628266f8d5e6a70c38">print</a> () const</td></tr>
<tr class="memdesc:adaa9384e98baaa628266f8d5e6a70c38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug only: print this Owned_gtids to stdout.  <a href="#adaa9384e98baaa628266f8d5e6a70c38">More...</a><br /></td></tr>
<tr class="separator:adaa9384e98baaa628266f8d5e6a70c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2aa4bc59310407ed3f5b00db77d0021"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#aa2aa4bc59310407ed3f5b00db77d0021">dbug_print</a> (const char *text=&quot;&quot;) const</td></tr>
<tr class="memdesc:aa2aa4bc59310407ed3f5b00db77d0021"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print this Owned_gtids to the trace file if debug is enabled; no-op otherwise.  <a href="#aa2aa4bc59310407ed3f5b00db77d0021">More...</a><br /></td></tr>
<tr class="separator:aa2aa4bc59310407ed3f5b00db77d0021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a377386748e0fbb46229e097388bf05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a5a377386748e0fbb46229e097388bf05">is_owned_by</a> (const <a class="el" href="structGtid.html">Gtid</a> &amp;gtid, const <a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a> thd_id) const</td></tr>
<tr class="memdesc:a5a377386748e0fbb46229e097388bf05"><td class="mdescLeft">&#160;</td><td class="mdescRight">If thd_id==0, returns true when gtid is not owned by any thread.  <a href="#a5a377386748e0fbb46229e097388bf05">More...</a><br /></td></tr>
<tr class="separator:a5a377386748e0fbb46229e097388bf05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab2b09eb5c303e1dde9e190b6582d1281"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmalloc__unordered__multimap.html">malloc_unordered_multimap</a>&lt; <a class="el" href="rpl__gtid_8h.html#a74378e47532331d3ac920082cf954668">rpl_gno</a>, <a class="el" href="map__helpers_8h.html#ab9bfec3d68fe066cd76cd78c5039d012">unique_ptr_my_free</a>&lt; <a class="el" href="structOwned__gtids_1_1Node.html">Node</a> &gt; &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#ab2b09eb5c303e1dde9e190b6582d1281">get_hash</a> (<a class="el" href="rpl__gtid_8h.html#a4873b950f954adcfa36c1665428ce3ff">rpl_sidno</a> sidno) const</td></tr>
<tr class="memdesc:ab2b09eb5c303e1dde9e190b6582d1281"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the hash for the given SIDNO.  <a href="#ab2b09eb5c303e1dde9e190b6582d1281">More...</a><br /></td></tr>
<tr class="separator:ab2b09eb5c303e1dde9e190b6582d1281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb18bab8a85075ead64cfdbd84c935d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#abb18bab8a85075ead64cfdbd84c935d8">contains_gtid</a> (const <a class="el" href="structGtid.html">Gtid</a> &amp;gtid) const</td></tr>
<tr class="memdesc:abb18bab8a85075ead64cfdbd84c935d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true iff this Owned_gtids object contains the given gtid.  <a href="#abb18bab8a85075ead64cfdbd84c935d8">More...</a><br /></td></tr>
<tr class="separator:abb18bab8a85075ead64cfdbd84c935d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac37bee236019cbcfad785a047075b2b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCheckable__rwlock.html">Checkable_rwlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#ac37bee236019cbcfad785a047075b2b9">sid_lock</a></td></tr>
<tr class="memdesc:ac37bee236019cbcfad785a047075b2b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read-write lock that protects updates to the number of SIDs.  <a href="#ac37bee236019cbcfad785a047075b2b9">More...</a><br /></td></tr>
<tr class="separator:ac37bee236019cbcfad785a047075b2b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d495c67a1b99f18932073e0c82c6e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPrealloced__array.html">Prealloced_array</a>&lt; <a class="el" href="classmalloc__unordered__multimap.html">malloc_unordered_multimap</a>&lt; <a class="el" href="rpl__gtid_8h.html#a74378e47532331d3ac920082cf954668">rpl_gno</a>, <a class="el" href="map__helpers_8h.html#ab9bfec3d68fe066cd76cd78c5039d012">unique_ptr_my_free</a>&lt; <a class="el" href="structOwned__gtids_1_1Node.html">Node</a> &gt; &gt; *, 8 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOwned__gtids.html#a91d495c67a1b99f18932073e0c82c6e3">sidno_to_hash</a></td></tr>
<tr class="memdesc:a91d495c67a1b99f18932073e0c82c6e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Growable array of hashes.  <a href="#a91d495c67a1b99f18932073e0c82c6e3">More...</a><br /></td></tr>
<tr class="separator:a91d495c67a1b99f18932073e0c82c6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents the set of GTIDs that are owned by some thread. </p>
<p>This data structure has a read-write lock that protects the number of SIDNOs. The lock is provided by the invoker of the constructor and it is generally the caller's responsibility to acquire the read lock. Access methods assert that the caller already holds the read (or write) lock. If a method of this class grows the number of SIDNOs, then the method temporarily upgrades this lock to a write lock and then degrades it to a read lock again; there will be a short period when the lock is not held at all.</p>
<p>The internal representation is a multi-valued map from GTIDs to threads, mapping GTIDs to one or more threads that owns it.</p>
<p>In Group Replication multiple threads can own a GTID whereas if GR is disabeld there is at most one owner per GTID. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7b91d015754445c004455b37096da3f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b91d015754445c004455b37096da3f1">&#9670;&nbsp;</a></span>Owned_gtids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Owned_gtids::Owned_gtids </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckable__rwlock.html">Checkable_rwlock</a> *&#160;</td>
          <td class="paramname"><em>sid_lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a new, empty Owned_gtids object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sid_lock</td><td>Read-write lock that protects updates to the number of SIDs. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad91e433dfe634b5c501a681a145aabfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad91e433dfe634b5c501a681a145aabfb">&#9670;&nbsp;</a></span>~Owned_gtids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Owned_gtids::~Owned_gtids </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys this Owned_gtids. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a323fa3724e5214e36bac9153e9cb3585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a323fa3724e5214e36bac9153e9cb3585">&#9670;&nbsp;</a></span>add_gtid_owner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpl__gtid_8h.html#a3cf0e1a495b2402d8e6aa88f870316d5">enum_return_status</a> Owned_gtids::add_gtid_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structGtid.html">Gtid</a> &amp;&#160;</td>
          <td class="paramname"><em>gtid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a>&#160;</td>
          <td class="paramname"><em>owner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a GTID to this Owned_gtids. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gtid</td><td>The Gtid to add. </td></tr>
    <tr><td class="paramname">owner</td><td>The my_thread_id of the gtid to add. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RETURN_STATUS_OK or RETURN_STATUS_REPORTED_ERROR. </dd></dl>

</div>
</div>
<a id="abb18bab8a85075ead64cfdbd84c935d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb18bab8a85075ead64cfdbd84c935d8">&#9670;&nbsp;</a></span>contains_gtid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Owned_gtids::contains_gtid </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structGtid.html">Gtid</a> &amp;&#160;</td>
          <td class="paramname"><em>gtid</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true iff this Owned_gtids object contains the given gtid. </p>

</div>
</div>
<a id="aa2aa4bc59310407ed3f5b00db77d0021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2aa4bc59310407ed3f5b00db77d0021">&#9670;&nbsp;</a></span>dbug_print()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Owned_gtids::dbug_print </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em> = <code>&quot;&quot;</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print this Owned_gtids to the trace file if debug is enabled; no-op otherwise. </p>

</div>
</div>
<a id="aed0354047916db07b6a854e621f48674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed0354047916db07b6a854e621f48674">&#9670;&nbsp;</a></span>ensure_sidno()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpl__gtid_8h.html#a3cf0e1a495b2402d8e6aa88f870316d5">enum_return_status</a> Owned_gtids::ensure_sidno </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpl__gtid_8h.html#a4873b950f954adcfa36c1665428ce3ff">rpl_sidno</a>&#160;</td>
          <td class="paramname"><em>sidno</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ensures that this Owned_gtids object can accomodate SIDNOs up to the given SIDNO. </p>
<p>If this Owned_gtids object needs to be resized, then the lock will be temporarily upgraded to a write lock and then degraded to a read lock again; there will be a short period when the lock is not held at all.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sidno</td><td>The SIDNO. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RETURN_STATUS_OK or RETURN_STATUS_REPORTED_ERROR. </dd></dl>

</div>
</div>
<a id="aa4499c42b596c5ebd0e0cf7227783532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4499c42b596c5ebd0e0cf7227783532">&#9670;&nbsp;</a></span>get_gtids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Owned_gtids::get_gtids </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classGtid__set.html">Gtid_set</a> &amp;&#160;</td>
          <td class="paramname"><em>gtid_set</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab2b09eb5c303e1dde9e190b6582d1281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2b09eb5c303e1dde9e190b6582d1281">&#9670;&nbsp;</a></span>get_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmalloc__unordered__multimap.html">malloc_unordered_multimap</a>&lt;<a class="el" href="rpl__gtid_8h.html#a74378e47532331d3ac920082cf954668">rpl_gno</a>, <a class="el" href="map__helpers_8h.html#ab9bfec3d68fe066cd76cd78c5039d012">unique_ptr_my_free</a>&lt;<a class="el" href="structOwned__gtids_1_1Node.html">Node</a>&gt; &gt;* Owned_gtids::get_hash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rpl__gtid_8h.html#a4873b950f954adcfa36c1665428ce3ff">rpl_sidno</a>&#160;</td>
          <td class="paramname"><em>sidno</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the hash for the given SIDNO. </p>

</div>
</div>
<a id="a87a9e66aa429f4d562c24623bd113093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87a9e66aa429f4d562c24623bd113093">&#9670;&nbsp;</a></span>get_max_sidno()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rpl__gtid_8h.html#a4873b950f954adcfa36c1665428ce3ff">rpl_sidno</a> Owned_gtids::get_max_sidno </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the maximal sidno that this Owned_gtids currently has space for. </p>

</div>
</div>
<a id="a0d71e2cdcab169bbe86b9f6067b1c93a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d71e2cdcab169bbe86b9f6067b1c93a">&#9670;&nbsp;</a></span>get_max_string_length()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Owned_gtids::get_max_string_length </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return an upper bound on the length of the string representation of this Owned_gtids. </p>
<p>The actual length may be smaller. This includes the trailing '\0'. </p>

</div>
</div>
<a id="a64a21addf48daf859e338e8f8f49695e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64a21addf48daf859e338e8f8f49695e">&#9670;&nbsp;</a></span>is_empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Owned_gtids::is_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if this Owned_gtids is empty. </p>

</div>
</div>
<a id="a39d5a45f8d36a5ae5efb668babcd9e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39d5a45f8d36a5ae5efb668babcd9e09">&#9670;&nbsp;</a></span>is_intersection_nonempty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Owned_gtids::is_intersection_nonempty </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classGtid__set.html">Gtid_set</a> *&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if there is a least one element of this Owned_gtids set in the other Gtid_set. </p>

</div>
</div>
<a id="a5a377386748e0fbb46229e097388bf05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a377386748e0fbb46229e097388bf05">&#9670;&nbsp;</a></span>is_owned_by()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Owned_gtids::is_owned_by </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structGtid.html">Gtid</a> &amp;&#160;</td>
          <td class="paramname"><em>gtid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a>&#160;</td>
          <td class="paramname"><em>thd_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If thd_id==0, returns true when gtid is not owned by any thread. </p>
<p>If thd_id!=0, returns true when gtid is owned by that thread. </p>

</div>
</div>
<a id="adaa9384e98baaa628266f8d5e6a70c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaa9384e98baaa628266f8d5e6a70c38">&#9670;&nbsp;</a></span>print()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Owned_gtids::print </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Debug only: print this Owned_gtids to stdout. </p>

</div>
</div>
<a id="afc63a8ed9cff1f2dddd102176535073d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc63a8ed9cff1f2dddd102176535073d">&#9670;&nbsp;</a></span>remove_gtid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Owned_gtids::remove_gtid </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structGtid.html">Gtid</a> &amp;&#160;</td>
          <td class="paramname"><em>gtid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a>&#160;</td>
          <td class="paramname"><em>owner</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the given GTID. </p>
<p>If the gtid does not exist in this Owned_gtids object, does nothing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gtid</td><td>The Gtid. </td></tr>
    <tr><td class="paramname">owner</td><td>thread_id of the owner thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2dc24132eb1138e5c291da8db213e47c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dc24132eb1138e5c291da8db213e47c">&#9670;&nbsp;</a></span>thread_owns_anything()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Owned_gtids::thread_owns_anything </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__thread__local_8h.html#a507db6035f89ca9c3d96c1ed3b987fcc">my_thread_id</a>&#160;</td>
          <td class="paramname"><em>thd_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if the given thread is the owner of any gtids. </p>

</div>
</div>
<a id="a746e2bc47416a49a418fa6dd0abb8421"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a746e2bc47416a49a418fa6dd0abb8421">&#9670;&nbsp;</a></span>to_string() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Owned_gtids::to_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write a string representation of this Owned_gtids to the given buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>Buffer to write to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of characters written. </dd></dl>

</div>
</div>
<a id="ad4abec5df6285656ea7f69a4bef7ba79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4abec5df6285656ea7f69a4bef7ba79">&#9670;&nbsp;</a></span>to_string() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* Owned_gtids::to_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Debug only: return a newly allocated string representation of this Owned_gtids. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac37bee236019cbcfad785a047075b2b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac37bee236019cbcfad785a047075b2b9">&#9670;&nbsp;</a></span>sid_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCheckable__rwlock.html">Checkable_rwlock</a>* Owned_gtids::sid_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read-write lock that protects updates to the number of SIDs. </p>

</div>
</div>
<a id="a91d495c67a1b99f18932073e0c82c6e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91d495c67a1b99f18932073e0c82c6e3">&#9670;&nbsp;</a></span>sidno_to_hash</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPrealloced__array.html">Prealloced_array</a>&lt; <a class="el" href="classmalloc__unordered__multimap.html">malloc_unordered_multimap</a>&lt;<a class="el" href="rpl__gtid_8h.html#a74378e47532331d3ac920082cf954668">rpl_gno</a>, <a class="el" href="map__helpers_8h.html#ab9bfec3d68fe066cd76cd78c5039d012">unique_ptr_my_free</a>&lt;<a class="el" href="structOwned__gtids_1_1Node.html">Node</a>&gt; &gt; *, 8&gt; Owned_gtids::sidno_to_hash</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Growable array of hashes. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="rpl__gtid_8h_source.html">rpl_gtid.h</a></li>
<li>sql/<a class="el" href="rpl__gtid__owned_8cc.html">rpl_gtid_owned.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classOwned__gtids.html">Owned_gtids</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
