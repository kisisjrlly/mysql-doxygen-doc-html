<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/log/log0chkp.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('log0chkp_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">log0chkp.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Redo log checkpoints, margins and log file headers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ha__prototypes_8h_source.html">ha_prototypes.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="debug__sync_8h_source.html">debug_sync.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="arch0arch_8h_source.html">arch0arch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0buf_8h_source.html">buf0buf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0flu_8h_source.html">buf0flu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0boot_8h_source.html">dict0boot.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0stats__bg_8h_source.html">dict0stats_bg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fil0fil_8h_source.html">fil0fil.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log0log_8h_source.html">log0log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log0recv_8h_source.html">log0recv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem0mem_8h_source.html">mem0mem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0mon_8h_source.html">srv0mon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0srv_8h_source.html">srv0srv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0start_8h_source.html">srv0start.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sync0sync_8h_source.html">sync0sync.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0roll_8h_source.html">trx0roll.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0sys_8h_source.html">trx0sys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8df7e8203d6ddc157167436c9a7815d8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a8df7e8203d6ddc157167436c9a7815d8">log_fsync</a> ()</td></tr>
<tr class="memdesc:a8df7e8203d6ddc157167436c9a7815d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync log file changes to disk if required.  <a href="#a8df7e8203d6ddc157167436c9a7815d8">More...</a><br /></td></tr>
<tr class="separator:a8df7e8203d6ddc157167436c9a7815d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Margin calculations</div></td></tr>
<tr><td colspan="2"><div class="groupText"><pre class="fragment"></pre> </div></td></tr>
<tr class="memitem:ac1582019546a12410d0b91f91b29224e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#ac1582019546a12410d0b91f91b29224e">log_update_limits_low</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:ac1582019546a12410d0b91f91b29224e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates free_check_limit in the log.  <a href="#ac1582019546a12410d0b91f91b29224e">More...</a><br /></td></tr>
<tr class="separator:ac1582019546a12410d0b91f91b29224e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee300afd8ce3c7669a310140b428fdf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#abee300afd8ce3c7669a310140b428fdf">log_free_check_margin</a> (const <a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:abee300afd8ce3c7669a310140b428fdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates margin which has to be used in log_free_check() call, when checking if user thread should wait for more space in redo log.  <a href="#abee300afd8ce3c7669a310140b428fdf">More...</a><br /></td></tr>
<tr class="separator:abee300afd8ce3c7669a310140b428fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a667e8f6328b49ab67d7a309ea2448fed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a667e8f6328b49ab67d7a309ea2448fed">log_calc_concurrency_margin</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a667e8f6328b49ab67d7a309ea2448fed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates concurrency margin.  <a href="#a667e8f6328b49ab67d7a309ea2448fed">More...</a><br /></td></tr>
<tr class="separator:a667e8f6328b49ab67d7a309ea2448fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bbf2817e798bf2fdf037d3666fbba83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a7bbf2817e798bf2fdf037d3666fbba83">log_calc_max_ages</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a7bbf2817e798bf2fdf037d3666fbba83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates limits for maximum age of checkpoint and maximum age of the oldest page.  <a href="#a7bbf2817e798bf2fdf037d3666fbba83">More...</a><br /></td></tr>
<tr class="separator:a7bbf2817e798bf2fdf037d3666fbba83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa271b2c4c066b6ea7e2ed164e3a954bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#aa271b2c4c066b6ea7e2ed164e3a954bd">log_increase_concurrency_margin</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:aa271b2c4c066b6ea7e2ed164e3a954bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increase concurrency_margin used inside log_free_check() calls.  <a href="#aa271b2c4c066b6ea7e2ed164e3a954bd">More...</a><br /></td></tr>
<tr class="separator:aa271b2c4c066b6ea7e2ed164e3a954bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cee09331bbe60115096df0002c1ab16"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a8cee09331bbe60115096df0002c1ab16">log_update_limits</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a8cee09331bbe60115096df0002c1ab16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates limits related to free space in redo log files: log.available_for_checkpoint_lsn and log.free_check_limit_sn.  <a href="#a8cee09331bbe60115096df0002c1ab16">More...</a><br /></td></tr>
<tr class="separator:a8cee09331bbe60115096df0002c1ab16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab750053f5ac4435674a85e67da94fc41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#ab750053f5ac4435674a85e67da94fc41">log_set_dict_persist_margin</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, <a class="el" href="log0types_8h.html#a57d287f79a40a87174b5bf6aa922c5cd">sn_t</a> margin)</td></tr>
<tr class="memdesc:ab750053f5ac4435674a85e67da94fc41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates log.dict_persist_margin and recompute free check limit.  <a href="#ab750053f5ac4435674a85e67da94fc41">More...</a><br /></td></tr>
<tr class="separator:ab750053f5ac4435674a85e67da94fc41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67448e9305037fc42cca18a988a55a35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a67448e9305037fc42cca18a988a55a35">log_set_dict_max_allowed_checkpoint_lsn</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> max_lsn)</td></tr>
<tr class="memdesc:a67448e9305037fc42cca18a988a55a35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the field log.dict_max_allowed_checkpoint_lsn.  <a href="#a67448e9305037fc42cca18a988a55a35">More...</a><br /></td></tr>
<tr class="separator:a67448e9305037fc42cca18a988a55a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08dc003b724b6829d17dc94eb6ca2fc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a08dc003b724b6829d17dc94eb6ca2fc7">log_get_free_check_capacity</a> (const <a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a08dc003b724b6829d17dc94eb6ca2fc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes capacity of redo log available until log_free_check() reaches point where it needs to wait.  <a href="#a08dc003b724b6829d17dc94eb6ca2fc7">More...</a><br /></td></tr>
<tr class="separator:a08dc003b724b6829d17dc94eb6ca2fc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ea04dc505c613d203d2c149964f3522"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a5ea04dc505c613d203d2c149964f3522">log_free_check_wait</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a5ea04dc505c613d203d2c149964f3522"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits until there is free space in log files which includes concurrency margin required for all threads.  <a href="#a5ea04dc505c613d203d2c149964f3522">More...</a><br /></td></tr>
<tr class="separator:a5ea04dc505c613d203d2c149964f3522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bcde2984e35e4ad64a19484f8fca66e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a9bcde2984e35e4ad64a19484f8fca66e">log_get_max_modified_age_async</a> (const <a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a9bcde2984e35e4ad64a19484f8fca66e"><td class="mdescLeft">&#160;</td><td class="mdescRight">When the oldest dirty page age exceeds this value, we start an asynchronous preflush of dirty pages.  <a href="#a9bcde2984e35e4ad64a19484f8fca66e">More...</a><br /></td></tr>
<tr class="separator:a9bcde2984e35e4ad64a19484f8fca66e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Coordination with buffer pool and oldest_lsn</div></td></tr>
<tr><td colspan="2"><div class="groupText"><pre class="fragment"></pre> </div></td></tr>
<tr class="memitem:a71fecb32b86659f4c5ac4e664ee9b904"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a71fecb32b86659f4c5ac4e664ee9b904">log_update_available_for_checkpoint_lsn</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a71fecb32b86659f4c5ac4e664ee9b904"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates lsn available for checkpoint.  <a href="#a71fecb32b86659f4c5ac4e664ee9b904">More...</a><br /></td></tr>
<tr class="separator:a71fecb32b86659f4c5ac4e664ee9b904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b17b18dc4b081dd767b54e338543e74"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a2b17b18dc4b081dd767b54e338543e74">log_compute_available_for_checkpoint_lsn</a> (const <a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a2b17b18dc4b081dd767b54e338543e74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates lsn at which we might write a next checkpoint.  <a href="#a2b17b18dc4b081dd767b54e338543e74">More...</a><br /></td></tr>
<tr class="separator:a2b17b18dc4b081dd767b54e338543e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Making checkpoints</div></td></tr>
<tr><td colspan="2"><div class="groupText"><pre class="fragment"></pre> </div></td></tr>
<tr class="memitem:a018b2ba157390431812578a643bf9487"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a018b2ba157390431812578a643bf9487">log_should_checkpoint</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a018b2ba157390431812578a643bf9487"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if checkpoint should be written.  <a href="#a018b2ba157390431812578a643bf9487">More...</a><br /></td></tr>
<tr class="separator:a018b2ba157390431812578a643bf9487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aef6e597f7f0dfad36b5cf0b6927d0e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a1aef6e597f7f0dfad36b5cf0b6927d0e">log_consider_checkpoint</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a1aef6e597f7f0dfad36b5cf0b6927d0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Considers writing next checkpoint.  <a href="#a1aef6e597f7f0dfad36b5cf0b6927d0e">More...</a><br /></td></tr>
<tr class="separator:a1aef6e597f7f0dfad36b5cf0b6927d0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad75418bff64178d7a881bf0611ef4494"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#ad75418bff64178d7a881bf0611ef4494">log_consider_sync_flush</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:ad75418bff64178d7a881bf0611ef4494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Considers requesting page cleaners to execute sync flush.  <a href="#ad75418bff64178d7a881bf0611ef4494">More...</a><br /></td></tr>
<tr class="separator:ad75418bff64178d7a881bf0611ef4494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7257aafb52ae88dea836f26ba0ad7c64"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a7257aafb52ae88dea836f26ba0ad7c64">log_checkpoint</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a7257aafb52ae88dea836f26ba0ad7c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a checkpoint.  <a href="#a7257aafb52ae88dea836f26ba0ad7c64">More...</a><br /></td></tr>
<tr class="separator:a7257aafb52ae88dea836f26ba0ad7c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab31fb64a3c8bdde05638d797747926"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#abab31fb64a3c8bdde05638d797747926">log_checkpoint_time_elapsed</a> (const <a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:abab31fb64a3c8bdde05638d797747926"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates time that elapsed since last checkpoint.  <a href="#abab31fb64a3c8bdde05638d797747926">More...</a><br /></td></tr>
<tr class="separator:abab31fb64a3c8bdde05638d797747926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab548062ad0f966f005ee97255c0b0ca4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#ab548062ad0f966f005ee97255c0b0ca4">log_request_checkpoint_low</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> requested_lsn)</td></tr>
<tr class="memdesc:ab548062ad0f966f005ee97255c0b0ca4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests a checkpoint written for lsn greater or equal to provided one.  <a href="#ab548062ad0f966f005ee97255c0b0ca4">More...</a><br /></td></tr>
<tr class="separator:ab548062ad0f966f005ee97255c0b0ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a299288e24f41bff3395562c39b5dff6d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a299288e24f41bff3395562c39b5dff6d">log_wait_for_checkpoint</a> (const <a class="el" href="structlog__t.html">log_t</a> &amp;log, <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="el" href="xcom__base_8cc.html#a0ce0765b958f7289d206f0c78bd105c7">lsn</a>)</td></tr>
<tr class="memdesc:a299288e24f41bff3395562c39b5dff6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for checkpoint advanced to at least that lsn.  <a href="#a299288e24f41bff3395562c39b5dff6d">More...</a><br /></td></tr>
<tr class="separator:a299288e24f41bff3395562c39b5dff6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b3ddb7296037c2d1b8cfa6d0da5ab8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#ac5b3ddb7296037c2d1b8cfa6d0da5ab8">log_request_sync_flush</a> (const <a class="el" href="structlog__t.html">log_t</a> &amp;log, <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> new_oldest)</td></tr>
<tr class="memdesc:ac5b3ddb7296037c2d1b8cfa6d0da5ab8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests for urgent flush of dirty pages, to advance oldest_lsn in flush lists to provided value.  <a href="#ac5b3ddb7296037c2d1b8cfa6d0da5ab8">More...</a><br /></td></tr>
<tr class="separator:ac5b3ddb7296037c2d1b8cfa6d0da5ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a721bc490fc99184d94819fa439f7962f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a721bc490fc99184d94819fa439f7962f">log_determine_checkpoint_lsn</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="separator:a721bc490fc99184d94819fa439f7962f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeef30baecaf583e6df90df4c880f0390"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#aeef30baecaf583e6df90df4c880f0390">log_files_write_checkpoint</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> next_checkpoint_lsn)</td></tr>
<tr class="memdesc:aeef30baecaf583e6df90df4c880f0390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the next checkpoint info to header of the first log file.  <a href="#aeef30baecaf583e6df90df4c880f0390">More...</a><br /></td></tr>
<tr class="separator:aeef30baecaf583e6df90df4c880f0390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b8d3f6bc57daae40de99d163594af8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a0b8d3f6bc57daae40de99d163594af8b">log_create_first_checkpoint</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="el" href="xcom__base_8cc.html#a0ce0765b958f7289d206f0c78bd105c7">lsn</a>)</td></tr>
<tr class="memdesc:a0b8d3f6bc57daae40de99d163594af8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the first checkpoint ever in the log files.  <a href="#a0b8d3f6bc57daae40de99d163594af8b">More...</a><br /></td></tr>
<tr class="separator:a0b8d3f6bc57daae40de99d163594af8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0015b4cafa805f40163416ab98e76e0e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a0015b4cafa805f40163416ab98e76e0e">log_request_checkpoint_validate</a> (const <a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="separator:a0015b4cafa805f40163416ab98e76e0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac436f4001a69ebe55b632a7520a57ac1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#ac436f4001a69ebe55b632a7520a57ac1">log_request_checkpoint</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> sync)</td></tr>
<tr class="memdesc:ac436f4001a69ebe55b632a7520a57ac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests a fuzzy checkpoint write (for lsn currently available for checkpointing).  <a href="#ac436f4001a69ebe55b632a7520a57ac1">More...</a><br /></td></tr>
<tr class="separator:ac436f4001a69ebe55b632a7520a57ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa940744755df755553c2bc66b53f9744"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#aa940744755df755553c2bc66b53f9744">log_make_latest_checkpoint</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:aa940744755df755553c2bc66b53f9744"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a checkpoint at the current lsn.  <a href="#aa940744755df755553c2bc66b53f9744">More...</a><br /></td></tr>
<tr class="separator:aa940744755df755553c2bc66b53f9744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a705ccaacbd5aec93ed0763ab888931a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a705ccaacbd5aec93ed0763ab888931a4">log_make_latest_checkpoint</a> ()</td></tr>
<tr class="memdesc:a705ccaacbd5aec93ed0763ab888931a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a checkpoint at the current lsn.  <a href="#a705ccaacbd5aec93ed0763ab888931a4">More...</a><br /></td></tr>
<tr class="separator:a705ccaacbd5aec93ed0763ab888931a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab61b0f0b5c4140bcfee7db299ea18cb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#ab61b0f0b5c4140bcfee7db299ea18cb2">log_checkpointer</a> (<a class="el" href="structlog__t.html">log_t</a> *log_ptr)</td></tr>
<tr class="memdesc:ab61b0f0b5c4140bcfee7db299ea18cb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The log checkpointer thread co-routine.  <a href="#ab61b0f0b5c4140bcfee7db299ea18cb2">More...</a><br /></td></tr>
<tr class="separator:ab61b0f0b5c4140bcfee7db299ea18cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Log file headers</div></td></tr>
<tr><td colspan="2"><div class="groupText"><pre class="fragment"></pre> </div></td></tr>
<tr class="memitem:a6d92ed7b8dfea6a235e4dac08a6417ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a6d92ed7b8dfea6a235e4dac08a6417ee">log_files_header_fill</a> (<a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *buf, <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> start_lsn, const char *creator, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> no_logging, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> crash_unsafe)</td></tr>
<tr class="memdesc:a6d92ed7b8dfea6a235e4dac08a6417ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill redo log header.  <a href="#a6d92ed7b8dfea6a235e4dac08a6417ee">More...</a><br /></td></tr>
<tr class="separator:a6d92ed7b8dfea6a235e4dac08a6417ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af590824741975786e0c81cbad29b985b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#af590824741975786e0c81cbad29b985b">log_files_header_flush</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, uint32_t nth_file, <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> start_lsn)</td></tr>
<tr class="memdesc:af590824741975786e0c81cbad29b985b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a log file header to the log file space.  <a href="#af590824741975786e0c81cbad29b985b">More...</a><br /></td></tr>
<tr class="separator:af590824741975786e0c81cbad29b985b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43a535884aae0b56dd072680c7f17ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#ae43a535884aae0b56dd072680c7f17ae">log_files_header_read</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, uint32_t header)</td></tr>
<tr class="memdesc:ae43a535884aae0b56dd072680c7f17ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a log file header page to log.checkpoint_buf.  <a href="#ae43a535884aae0b56dd072680c7f17ae">More...</a><br /></td></tr>
<tr class="separator:ae43a535884aae0b56dd072680c7f17ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dacf05917b1e2199ba85d44b5acbf26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a4dacf05917b1e2199ba85d44b5acbf26">log_persist_enable</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a4dacf05917b1e2199ba85d44b5acbf26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable redo logging and persist the information.  <a href="#a4dacf05917b1e2199ba85d44b5acbf26">More...</a><br /></td></tr>
<tr class="separator:a4dacf05917b1e2199ba85d44b5acbf26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa901f215026a45d64e1203a76a1e406f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#aa901f215026a45d64e1203a76a1e406f">log_persist_disable</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:aa901f215026a45d64e1203a76a1e406f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable redo logging and persist the information.  <a href="#aa901f215026a45d64e1203a76a1e406f">More...</a><br /></td></tr>
<tr class="separator:aa901f215026a45d64e1203a76a1e406f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a238a5de56d64ef12be9eb570bc21e987"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a238a5de56d64ef12be9eb570bc21e987">log_persist_crash_safe</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a238a5de56d64ef12be9eb570bc21e987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Persist the information that it is safe to restart server.  <a href="#a238a5de56d64ef12be9eb570bc21e987">More...</a><br /></td></tr>
<tr class="separator:a238a5de56d64ef12be9eb570bc21e987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04c072f6fe6142287409d7abe82a6a90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log0chkp_8cc.html#a04c072f6fe6142287409d7abe82a6a90">log_files_downgrade</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log)</td></tr>
<tr class="memdesc:a04c072f6fe6142287409d7abe82a6a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes format of redo files to previous format version.  <a href="#a04c072f6fe6142287409d7abe82a6a90">More...</a><br /></td></tr>
<tr class="separator:a04c072f6fe6142287409d7abe82a6a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Redo log checkpoints, margins and log file headers. </p>
<p>File consists of four groups:</p><ol type="1">
<li>Coordination between log and buffer pool (oldest_lsn)</li>
<li>Reading/writing log file headers</li>
<li>Making checkpoints</li>
<li>Margin calculations </li>
</ol>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a667e8f6328b49ab67d7a309ea2448fed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a667e8f6328b49ab67d7a309ea2448fed">&#9670;&nbsp;</a></span>log_calc_concurrency_margin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> log_calc_concurrency_margin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates concurrency margin. </p>
<p>Uses current value of srv_thread_concurrency. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if success </td></tr>
    <tr><td class="paramname">false</td><td>if the redo log is too small to accommodate the number of OS threads in the database server </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7bbf2817e798bf2fdf037d3666fbba83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bbf2817e798bf2fdf037d3666fbba83">&#9670;&nbsp;</a></span>log_calc_max_ages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_calc_max_ages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates limits for maximum age of checkpoint and maximum age of the oldest page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7257aafb52ae88dea836f26ba0ad7c64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7257aafb52ae88dea836f26ba0ad7c64">&#9670;&nbsp;</a></span>log_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void log_checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes a checkpoint. </p>
<p>Note that this function does not flush dirty blocks from the buffer pool. It only checks what is lsn of the oldest modification in the buffer pool, and writes information about the lsn in log files. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abab31fb64a3c8bdde05638d797747926"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abab31fb64a3c8bdde05638d797747926">&#9670;&nbsp;</a></span>log_checkpoint_time_elapsed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t log_checkpoint_time_elapsed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates time that elapsed since last checkpoint. </p>
<dl class="section return"><dt>Returns</dt><dd>number of microseconds since the last checkpoint </dd></dl>

</div>
</div>
<a id="ab61b0f0b5c4140bcfee7db299ea18cb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab61b0f0b5c4140bcfee7db299ea18cb2">&#9670;&nbsp;</a></span>log_checkpointer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_checkpointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> *&#160;</td>
          <td class="paramname"><em>log_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The log checkpointer thread co-routine. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="PAGE_INNODB_REDO_LOG_THREADS.html#sect_redo_log_checkpointer">Thread: log checkpointer</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log_ptr</td><td>pointer to redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2b17b18dc4b081dd767b54e338543e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b17b18dc4b081dd767b54e338543e74">&#9670;&nbsp;</a></span>log_compute_available_for_checkpoint_lsn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> log_compute_available_for_checkpoint_lsn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates lsn at which we might write a next checkpoint. </p>
<p>It does the best effort, but possibly the maximum allowed lsn, could be even bigger. That's because the order of dirty pages in flush lists has been relaxed, and we don't want to spend time on traversing the whole flush lists here.</p>
<p>Note that some flush lists could be empty, and some additions of dirty pages could be pending (threads have written data to the log buffer and became scheduled out just before adding the dirty pages). That's why the calculated value cannot be larger than the log.buf_dirty_pages_added_up_to_lsn (only up to this lsn value we are sure, that all the dirty pages have been added).</p>
<p>It is guaranteed, that the returned value will not be smaller than the log.last_checkpoint_lsn.</p>
<dl class="section return"><dt>Returns</dt><dd>lsn for which we might write the checkpoint </dd></dl>

</div>
</div>
<a id="a1aef6e597f7f0dfad36b5cf0b6927d0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aef6e597f7f0dfad36b5cf0b6927d0e">&#9670;&nbsp;</a></span>log_consider_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void log_consider_checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Considers writing next checkpoint. </p>
<p>Checks if checkpoint should be written (using log_should_checkpoint()) and writes the checkpoint if that's the case. </p>

</div>
</div>
<a id="ad75418bff64178d7a881bf0611ef4494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad75418bff64178d7a881bf0611ef4494">&#9670;&nbsp;</a></span>log_consider_sync_flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void log_consider_sync_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Considers requesting page cleaners to execute sync flush. </p>

</div>
</div>
<a id="a0b8d3f6bc57daae40de99d163594af8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b8d3f6bc57daae40de99d163594af8b">&#9670;&nbsp;</a></span>log_create_first_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_create_first_checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>lsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the first checkpoint ever in the log files. </p>
<p>Used during initialization of new log files. Flushes:</p><ul>
<li>header of the first log file (including checkpoint headers),</li>
<li>log block with data addressed by the checkpoint lsn. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lsn</td><td>the first checkpoint lsn </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

</div>
</div>
<a id="a721bc490fc99184d94819fa439f7962f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a721bc490fc99184d94819fa439f7962f">&#9670;&nbsp;</a></span>log_determine_checkpoint_lsn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> log_determine_checkpoint_lsn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a04c072f6fe6142287409d7abe82a6a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04c072f6fe6142287409d7abe82a6a90">&#9670;&nbsp;</a></span>log_files_downgrade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_files_downgrade </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes format of redo files to previous format version. </p>
<dl class="section note"><dt>Note</dt><dd>Note this will work between the two formats 5_7_9 &amp; current because the only change is the version number </dd></dl>

</div>
</div>
<a id="a6d92ed7b8dfea6a235e4dac08a6417ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d92ed7b8dfea6a235e4dac08a6417ee">&#9670;&nbsp;</a></span>log_files_header_fill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_files_header_fill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>start_lsn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>creator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>no_logging</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>crash_unsafe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill redo log header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>filled buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start_lsn</td><td>log start LSN </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">creator</td><td>creator of the header </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">no_logging</td><td>redo logging is disabled </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">crash_unsafe</td><td>it is not safe to crash </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af590824741975786e0c81cbad29b985b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af590824741975786e0c81cbad29b985b">&#9670;&nbsp;</a></span>log_files_header_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_files_header_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nth_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>start_lsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a log file header to the log file space. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nth_file</td><td>header for the nth file in the log files </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start_lsn</td><td>log file data starts at this lsn </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae43a535884aae0b56dd072680c7f17ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae43a535884aae0b56dd072680c7f17ae">&#9670;&nbsp;</a></span>log_files_header_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_files_header_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a log file header page to log.checkpoint_buf. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">header</td><td>0 or LOG_CHECKPOINT_1 or LOG_CHECKPOINT2 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeef30baecaf583e6df90df4c880f0390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeef30baecaf583e6df90df4c880f0390">&#9670;&nbsp;</a></span>log_files_write_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_files_write_checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>next_checkpoint_lsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the next checkpoint info to header of the first log file. </p>
<p>Note that two pages of the header are used alternately for consecutive checkpoints. If we crashed during the write, we would still have the previous checkpoint info and recovery would work. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">next_checkpoint_lsn</td><td>writes checkpoint at this lsn </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abee300afd8ce3c7669a310140b428fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee300afd8ce3c7669a310140b428fdf">&#9670;&nbsp;</a></span>log_free_check_margin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> log_free_check_margin </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates margin which has to be used in log_free_check() call, when checking if user thread should wait for more space in redo log. </p>
<dl class="section return"><dt>Returns</dt><dd>size of the margin to use </dd></dl>

</div>
</div>
<a id="a5ea04dc505c613d203d2c149964f3522"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ea04dc505c613d203d2c149964f3522">&#9670;&nbsp;</a></span>log_free_check_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_free_check_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits until there is free space in log files which includes concurrency margin required for all threads. </p>
<p>You should rather use log_free_check(). </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="PAGE_INNODB_REDO_LOG_BUF.html#sect_redo_log_reclaim_space">Reclaiming space in redo log</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8df7e8203d6ddc157167436c9a7815d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8df7e8203d6ddc157167436c9a7815d8">&#9670;&nbsp;</a></span>log_fsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void log_fsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sync log file changes to disk if required. </p>

</div>
</div>
<a id="a08dc003b724b6829d17dc94eb6ca2fc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08dc003b724b6829d17dc94eb6ca2fc7">&#9670;&nbsp;</a></span>log_get_free_check_capacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> log_get_free_check_capacity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes capacity of redo log available until log_free_check() reaches point where it needs to wait. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>lsn capacity up to free_check_wait happens </dd></dl>

</div>
</div>
<a id="a9bcde2984e35e4ad64a19484f8fca66e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bcde2984e35e4ad64a19484f8fca66e">&#9670;&nbsp;</a></span>log_get_max_modified_age_async()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> log_get_max_modified_age_async </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>When the oldest dirty page age exceeds this value, we start an asynchronous preflush of dirty pages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>age of dirty page at which async preflush is started </dd></dl>

</div>
</div>
<a id="aa271b2c4c066b6ea7e2ed164e3a954bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa271b2c4c066b6ea7e2ed164e3a954bd">&#9670;&nbsp;</a></span>log_increase_concurrency_margin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_increase_concurrency_margin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increase concurrency_margin used inside log_free_check() calls. </p>

</div>
</div>
<a id="aa940744755df755553c2bc66b53f9744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa940744755df755553c2bc66b53f9744">&#9670;&nbsp;</a></span>log_make_latest_checkpoint() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> log_make_latest_checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a checkpoint at the current lsn. </p>
<p>Reads current lsn and waits until all dirty pages have been flushed up to that lsn. Afterwards requests a checkpoint write and waits until it is finished. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true iff current lsn was greater than last checkpoint lsn </dd></dl>

</div>
</div>
<a id="a705ccaacbd5aec93ed0763ab888931a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a705ccaacbd5aec93ed0763ab888931a4">&#9670;&nbsp;</a></span>log_make_latest_checkpoint() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> log_make_latest_checkpoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a checkpoint at the current lsn. </p>
<p>Reads current lsn and waits until all dirty pages have been flushed up to that lsn. Afterwards requests a checkpoint write and waits until it is finished. </p><dl class="section return"><dt>Returns</dt><dd>true iff current lsn was greater than last checkpoint lsn </dd></dl>

</div>
</div>
<a id="a238a5de56d64ef12be9eb570bc21e987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a238a5de56d64ef12be9eb570bc21e987">&#9670;&nbsp;</a></span>log_persist_crash_safe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_persist_crash_safe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Persist the information that it is safe to restart server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa901f215026a45d64e1203a76a1e406f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa901f215026a45d64e1203a76a1e406f">&#9670;&nbsp;</a></span>log_persist_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_persist_disable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable redo logging and persist the information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4dacf05917b1e2199ba85d44b5acbf26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dacf05917b1e2199ba85d44b5acbf26">&#9670;&nbsp;</a></span>log_persist_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_persist_enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable redo logging and persist the information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac436f4001a69ebe55b632a7520a57ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac436f4001a69ebe55b632a7520a57ac1">&#9670;&nbsp;</a></span>log_request_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_request_checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests a fuzzy checkpoint write (for lsn currently available for checkpointing). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sync</td><td>true -&gt; wait until it is finished </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab548062ad0f966f005ee97255c0b0ca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab548062ad0f966f005ee97255c0b0ca4">&#9670;&nbsp;</a></span>log_request_checkpoint_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void log_request_checkpoint_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>requested_lsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requests a checkpoint written for lsn greater or equal to provided one. </p>
<p>The log.checkpointer_mutex has to be acquired before it is called, and it is not released within this function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">requested_lsn</td><td>provided lsn (checkpoint should be not older) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0015b4cafa805f40163416ab98e76e0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0015b4cafa805f40163416ab98e76e0e">&#9670;&nbsp;</a></span>log_request_checkpoint_validate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> log_request_checkpoint_validate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac5b3ddb7296037c2d1b8cfa6d0da5ab8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5b3ddb7296037c2d1b8cfa6d0da5ab8">&#9670;&nbsp;</a></span>log_request_sync_flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> log_request_sync_flush </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>new_oldest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requests for urgent flush of dirty pages, to advance oldest_lsn in flush lists to provided value. </p>
<p>This should force page cleaners to perform the sync-flush in which case the innodb_max_io_capacity is not respected. This should be called when we are close to running out of space in redo log (close to free_check_limit_sn). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_oldest</td><td>oldest_lsn to stop flush at (or greater) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a67448e9305037fc42cca18a988a55a35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67448e9305037fc42cca18a988a55a35">&#9670;&nbsp;</a></span>log_set_dict_max_allowed_checkpoint_lsn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_set_dict_max_allowed_checkpoint_lsn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>max_lsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the field log.dict_max_allowed_checkpoint_lsn. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_lsn</td><td>new value for the field </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab750053f5ac4435674a85e67da94fc41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab750053f5ac4435674a85e67da94fc41">&#9670;&nbsp;</a></span>log_set_dict_persist_margin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_set_dict_persist_margin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#a57d287f79a40a87174b5bf6aa922c5cd">sn_t</a>&#160;</td>
          <td class="paramname"><em>margin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates log.dict_persist_margin and recompute free check limit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">margin</td><td>new value for log.dict_persist_margin </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a018b2ba157390431812578a643bf9487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a018b2ba157390431812578a643bf9487">&#9670;&nbsp;</a></span>log_should_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> log_should_checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if checkpoint should be written. </p>
<p>Checks time elapsed since the last checkpoint, age of the last checkpoint and if there was any extra request to write the checkpoint (e.g. coming from log_make_latest_checkpoint()). </p><dl class="section return"><dt>Returns</dt><dd>true if checkpoint should be written </dd></dl>

</div>
</div>
<a id="a71fecb32b86659f4c5ac4e664ee9b904"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71fecb32b86659f4c5ac4e664ee9b904">&#9670;&nbsp;</a></span>log_update_available_for_checkpoint_lsn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> log_update_available_for_checkpoint_lsn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates lsn available for checkpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the updated lsn value </dd></dl>

</div>
</div>
<a id="a8cee09331bbe60115096df0002c1ab16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cee09331bbe60115096df0002c1ab16">&#9670;&nbsp;</a></span>log_update_limits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_update_limits </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates limits related to free space in redo log files: log.available_for_checkpoint_lsn and log.free_check_limit_sn. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac1582019546a12410d0b91f91b29224e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1582019546a12410d0b91f91b29224e">&#9670;&nbsp;</a></span>log_update_limits_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void log_update_limits_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates free_check_limit in the log. </p>
<p>Needs log_limits_mutex prior calling. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a299288e24f41bff3395562c39b5dff6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a299288e24f41bff3395562c39b5dff6d">&#9670;&nbsp;</a></span>log_wait_for_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void log_wait_for_checkpoint </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>lsn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits for checkpoint advanced to at least that lsn. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lsn</td><td>lsn up to which we are waiting </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_7c61b8982e4f26eda8a4a9a87fddd769.html">log</a></li><li class="navelem"><a class="el" href="log0chkp_8cc.html">log0chkp.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
