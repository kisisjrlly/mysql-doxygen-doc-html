<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/dict0stats.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dict0stats_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dict0stats.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Code used for calculating and manipulating table statistics.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;univ.i&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0types_8h_source.html">dict0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem0mem_8h_source.html">mem0mem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0types_8h_source.html">trx0types.h</a>&quot;</code><br />
<code>#include &quot;dict0stats.ic&quot;</code><br />
</div>
<p><a href="dict0stats_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTableStatsRecord.html">TableStatsRecord</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represent the record of innodb_table_stats table.  <a href="classTableStatsRecord.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a440278fb245556fdd3ac4bdd5ee75b57"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57">dict_stats_upd_option_t</a> { <a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57a34ecf83a8f4f3c73c0504e563bd4ae6f">DICT_STATS_RECALC_PERSISTENT</a>, 
<a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57a6a665443bfc2fd9df5edb37390b53792">DICT_STATS_RECALC_TRANSIENT</a>, 
<a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57afc9a0ad017ea9154d407c3f77900b51f">DICT_STATS_EMPTY_TABLE</a>, 
<a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57a95ccdb651e6c99e5e0473ead1cc0f3d6">DICT_STATS_FETCH_ONLY_IF_NOT_IN_MEMORY</a>
 }</td></tr>
<tr class="separator:a440278fb245556fdd3ac4bdd5ee75b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a831aab69c418350db305a9c806946a54"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a831aab69c418350db305a9c806946a54">dict_stats_set_persistent</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table, ibool ps_on, ibool ps_off)</td></tr>
<tr class="memdesc:a831aab69c418350db305a9c806946a54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the persistent statistics flag for a given table.  <a href="#a831aab69c418350db305a9c806946a54">More...</a><br /></td></tr>
<tr class="separator:a831aab69c418350db305a9c806946a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace09cd7507b389b0d033ede68cf20001"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#ace09cd7507b389b0d033ede68cf20001">dict_stats_is_persistent_enabled</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:ace09cd7507b389b0d033ede68cf20001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether persistent statistics is enabled for a given table.  <a href="#ace09cd7507b389b0d033ede68cf20001">More...</a><br /></td></tr>
<tr class="separator:ace09cd7507b389b0d033ede68cf20001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2487659bea8380443438a1da804cb1c8"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a2487659bea8380443438a1da804cb1c8">dict_stats_auto_recalc_set</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table, ibool auto_recalc_on, ibool auto_recalc_off)</td></tr>
<tr class="memdesc:a2487659bea8380443438a1da804cb1c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the auto recalc flag for a given table (only honored for a persistent stats enabled table).  <a href="#a2487659bea8380443438a1da804cb1c8">More...</a><br /></td></tr>
<tr class="separator:a2487659bea8380443438a1da804cb1c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a4781b97ab970ad6373cdb39227599"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a33a4781b97ab970ad6373cdb39227599">dict_stats_auto_recalc_is_enabled</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a33a4781b97ab970ad6373cdb39227599"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether auto recalc is enabled for a given table.  <a href="#a33a4781b97ab970ad6373cdb39227599">More...</a><br /></td></tr>
<tr class="separator:a33a4781b97ab970ad6373cdb39227599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a832e9e73628c4654b56251aa63f1152a"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a832e9e73628c4654b56251aa63f1152a">dict_stats_init</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a832e9e73628c4654b56251aa63f1152a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize table's stats for the first time when opening a table.  <a href="#a832e9e73628c4654b56251aa63f1152a">More...</a><br /></td></tr>
<tr class="separator:a832e9e73628c4654b56251aa63f1152a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88cf03f084d11073579698a3a8c52aa1"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a88cf03f084d11073579698a3a8c52aa1">dict_stats_deinit</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a88cf03f084d11073579698a3a8c52aa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitialize table's stats after the last close of the table.  <a href="#a88cf03f084d11073579698a3a8c52aa1">More...</a><br /></td></tr>
<tr class="separator:a88cf03f084d11073579698a3a8c52aa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa88a532ba8ddc058552774b2c5f266"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a9fa88a532ba8ddc058552774b2c5f266">dict_stats_update</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table, <a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57">dict_stats_upd_option_t</a> stats_upd_option)</td></tr>
<tr class="memdesc:a9fa88a532ba8ddc058552774b2c5f266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates new estimates for table and index statistics.  <a href="#a9fa88a532ba8ddc058552774b2c5f266">More...</a><br /></td></tr>
<tr class="separator:a9fa88a532ba8ddc058552774b2c5f266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86b8ade1d130c52d1b2f64dbdb53ebae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a86b8ade1d130c52d1b2f64dbdb53ebae">dict_stats_drop_index</a> (const char *tname, const char *iname, char *errstr, ulint errstr_sz)</td></tr>
<tr class="memdesc:a86b8ade1d130c52d1b2f64dbdb53ebae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the information for a particular index's stats from the persistent storage if it exists and if there is data stored for this index.  <a href="#a86b8ade1d130c52d1b2f64dbdb53ebae">More...</a><br /></td></tr>
<tr class="separator:a86b8ade1d130c52d1b2f64dbdb53ebae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a25eb369771095b56fb3ba5578a4c07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a4a25eb369771095b56fb3ba5578a4c07">dict_stats_drop_table</a> (const char *table_name, char *errstr, ulint errstr_sz)</td></tr>
<tr class="memdesc:a4a25eb369771095b56fb3ba5578a4c07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the statistics for a table and all of its indexes from the persistent storage if it exists and if there is data stored for the table.  <a href="#a4a25eb369771095b56fb3ba5578a4c07">More...</a><br /></td></tr>
<tr class="separator:a4a25eb369771095b56fb3ba5578a4c07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1ec528959596a472a7374ba116dc98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a7b1ec528959596a472a7374ba116dc98">dict_stats_update_for_index</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a7b1ec528959596a472a7374ba116dc98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches or calculates new estimates for index statistics.  <a href="#a7b1ec528959596a472a7374ba116dc98">More...</a><br /></td></tr>
<tr class="separator:a7b1ec528959596a472a7374ba116dc98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d6e96bb860057a9d91520e4ca8a4a8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a3d6e96bb860057a9d91520e4ca8a4a8c">dict_stats_rename_table</a> (const char *old_name, const char *new_name, char *errstr, size_t errstr_sz)</td></tr>
<tr class="memdesc:a3d6e96bb860057a9d91520e4ca8a4a8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames a table in InnoDB persistent stats storage.  <a href="#a3d6e96bb860057a9d91520e4ca8a4a8c">More...</a><br /></td></tr>
<tr class="separator:a3d6e96bb860057a9d91520e4ca8a4a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb04d42df8e81737a044c10685ffb633"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#aeb04d42df8e81737a044c10685ffb633">dict_stats_rename_index</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const char *old_index_name, const char *new_index_name)</td></tr>
<tr class="memdesc:aeb04d42df8e81737a044c10685ffb633"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames an index in InnoDB persistent stats storage.  <a href="#aeb04d42df8e81737a044c10685ffb633">More...</a><br /></td></tr>
<tr class="separator:aeb04d42df8e81737a044c10685ffb633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae6b2364480e0ec168b1053c660cd89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8h.html#a2ae6b2364480e0ec168b1053c660cd89">dict_stats_evict_tablespaces</a> ()</td></tr>
<tr class="memdesc:a2ae6b2364480e0ec168b1053c660cd89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evict the stats tables if they loaded in tablespace cache and also close the stats .ibd files.  <a href="#a2ae6b2364480e0ec168b1053c660cd89">More...</a><br /></td></tr>
<tr class="separator:a2ae6b2364480e0ec168b1053c660cd89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Code used for calculating and manipulating table statistics. </p>
<p>Created Jan 06, 2010 Vasil Dimov </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a440278fb245556fdd3ac4bdd5ee75b57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a440278fb245556fdd3ac4bdd5ee75b57">&#9670;&nbsp;</a></span>dict_stats_upd_option_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57">dict_stats_upd_option_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a440278fb245556fdd3ac4bdd5ee75b57a34ecf83a8f4f3c73c0504e563bd4ae6f"></a>DICT_STATS_RECALC_PERSISTENT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a440278fb245556fdd3ac4bdd5ee75b57a6a665443bfc2fd9df5edb37390b53792"></a>DICT_STATS_RECALC_TRANSIENT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a440278fb245556fdd3ac4bdd5ee75b57afc9a0ad017ea9154d407c3f77900b51f"></a>DICT_STATS_EMPTY_TABLE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a440278fb245556fdd3ac4bdd5ee75b57a95ccdb651e6c99e5e0473ead1cc0f3d6"></a>DICT_STATS_FETCH_ONLY_IF_NOT_IN_MEMORY&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a33a4781b97ab970ad6373cdb39227599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33a4781b97ab970ad6373cdb39227599">&#9670;&nbsp;</a></span>dict_stats_auto_recalc_is_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ibool dict_stats_auto_recalc_is_enabled </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether auto recalc is enabled for a given table. </p>
<dl class="section return"><dt>Returns</dt><dd>true if enabled, false otherwise in: table </dd></dl>

</div>
</div>
<a id="a2487659bea8380443438a1da804cb1c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2487659bea8380443438a1da804cb1c8">&#9670;&nbsp;</a></span>dict_stats_auto_recalc_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void dict_stats_auto_recalc_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>auto_recalc_on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>auto_recalc_off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the auto recalc flag for a given table (only honored for a persistent stats enabled table). </p>
<p>The flag is set only in the in-memory table object and is not saved in InnoDB files. It will be read from the .frm file upon first open from MySQL after a server restart. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">auto_recalc_on</td><td>explicitly enabled </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">auto_recalc_off</td><td>explicitly disabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a88cf03f084d11073579698a3a8c52aa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88cf03f084d11073579698a3a8c52aa1">&#9670;&nbsp;</a></span>dict_stats_deinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void dict_stats_deinit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitialize table's stats after the last close of the table. </p>
<p>This is used to detect "FLUSH TABLE" and refresh the stats upon next open. in/out: table </p>

</div>
</div>
<a id="a86b8ade1d130c52d1b2f64dbdb53ebae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86b8ade1d130c52d1b2f64dbdb53ebae">&#9670;&nbsp;</a></span>dict_stats_drop_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_drop_index </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db_and_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>iname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>errstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>errstr_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the information for a particular index's stats from the persistent storage if it exists and if there is data stored for this index. </p>
<p>This function creates its own trx and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code in: size of the errstr buffer</dd></dl>
<p>This function creates its own trx and commits it. A note from Marko why we cannot edit user and sys_* tables in one trx: marko: The problem is that ibuf merges should be disabled while we are rolling back dict transactions. marko: If ibuf merges are not disabled, we need to scan the *.ibd files. But we shouldn't open *.ibd files before we have rolled back dict transactions and opened the SYS_* records for the *.ibd files. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db_and_table</td><td>in: db and table, e.g. 'db/table' </td></tr>
    <tr><td class="paramname">iname</td><td>in: index name </td></tr>
    <tr><td class="paramname">errstr</td><td>out: error message if != DB_SUCCESS is returned </td></tr>
    <tr><td class="paramname">errstr_sz</td><td>in: size of the errstr buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4a25eb369771095b56fb3ba5578a4c07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a25eb369771095b56fb3ba5578a4c07">&#9670;&nbsp;</a></span>dict_stats_drop_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_drop_table </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db_and_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>errstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>errstr_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the statistics for a table and all of its indexes from the persistent storage if it exists and if there is data stored for the table. </p>
<p>This function creates its own transaction and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code in: size of errstr buffer</dd></dl>
<p>Removes the statistics for a table and all of its indexes from the persistent storage if it exists and if there is data stored for the table.</p>
<p>This function creates its own transaction and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db_and_table</td><td>in: db and table, e.g. 'db/table' </td></tr>
    <tr><td class="paramname">errstr</td><td>out: error message if != DB_SUCCESS is returned </td></tr>
    <tr><td class="paramname">errstr_sz</td><td>in: size of errstr buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2ae6b2364480e0ec168b1053c660cd89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ae6b2364480e0ec168b1053c660cd89">&#9670;&nbsp;</a></span>dict_stats_evict_tablespaces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dict_stats_evict_tablespaces </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evict the stats tables if they loaded in tablespace cache and also close the stats .ibd files. </p>
<p>We have to close stats tables because 8.0 stats tables will use the same name. We load the stats from 5.7 with a suffix "_backup57" and migrate the statistics. </p>

</div>
</div>
<a id="a832e9e73628c4654b56251aa63f1152a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a832e9e73628c4654b56251aa63f1152a">&#9670;&nbsp;</a></span>dict_stats_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void dict_stats_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize table's stats for the first time when opening a table. </p>
<p>in/out: table </p>

</div>
</div>
<a id="ace09cd7507b389b0d033ede68cf20001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace09cd7507b389b0d033ede68cf20001">&#9670;&nbsp;</a></span>dict_stats_is_persistent_enabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ibool dict_stats_is_persistent_enabled </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether persistent statistics is enabled for a given table. </p>
<dl class="section return"><dt>Returns</dt><dd>true if enabled, false otherwise </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeb04d42df8e81737a044c10685ffb633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb04d42df8e81737a044c10685ffb633">&#9670;&nbsp;</a></span>dict_stats_rename_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_rename_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_index_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_index_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renames an index in InnoDB persistent stats storage. </p>
<p>This function creates its own transaction and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code. DB_STATS_DO_NOT_EXIST will be returned if the persistent stats do not exist. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table whose index is renamed </td></tr>
    <tr><td class="paramname">old_index_name</td><td>in: old index name </td></tr>
    <tr><td class="paramname">new_index_name</td><td>in: new index name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3d6e96bb860057a9d91520e4ca8a4a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d6e96bb860057a9d91520e4ca8a4a8c">&#9670;&nbsp;</a></span>dict_stats_rename_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_rename_table </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>errstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>errstr_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renames a table in InnoDB persistent stats storage. </p>
<p>This function creates its own transaction and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code in: errstr size</dd></dl>
<p>This function creates its own transaction and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_name</td><td>in: old name, e.g. 'db/table' </td></tr>
    <tr><td class="paramname">new_name</td><td>in: new name, e.g. 'db/table' </td></tr>
    <tr><td class="paramname">errstr</td><td>out: error string if != DB_SUCCESS is returned </td></tr>
    <tr><td class="paramname">errstr_sz</td><td>in: errstr size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a831aab69c418350db305a9c806946a54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a831aab69c418350db305a9c806946a54">&#9670;&nbsp;</a></span>dict_stats_set_persistent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void dict_stats_set_persistent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>ps_on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>ps_off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the persistent statistics flag for a given table. </p>
<p>This is set only in the in-memory table object and is not saved on disk. It will be read from the .frm file upon first open from MySQL after a server restart. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ps_on</td><td>persistent stats explicitly enabled </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ps_off</td><td>persistent stats explicitly disabled </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9fa88a532ba8ddc058552774b2c5f266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fa88a532ba8ddc058552774b2c5f266">&#9670;&nbsp;</a></span>dict_stats_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57">dict_stats_upd_option_t</a>&#160;</td>
          <td class="paramname"><em>stats_upd_option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates new estimates for table and index statistics. </p>
<p>The statistics are used in query optimization. </p><dl class="section return"><dt>Returns</dt><dd>DB_* error code or DB_SUCCESS in: whether to (re) calc the stats or to fetch them from the persistent storage</dd></dl>
<p>The statistics are used in query optimization. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in/out: table </td></tr>
    <tr><td class="paramname">stats_upd_option</td><td>in: whether to (re) calc the stats or to fetch them from the persistent statistics storage </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b1ec528959596a472a7374ba116dc98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b1ec528959596a472a7374ba116dc98">&#9670;&nbsp;</a></span>dict_stats_update_for_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dict_stats_update_for_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches or calculates new estimates for index statistics. </p>
<p>in/out: index</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="dict0stats_8h.html">dict0stats.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
