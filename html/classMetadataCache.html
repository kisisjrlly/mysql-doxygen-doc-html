<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: MetadataCache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classMetadataCache.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classMetadataCache-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MetadataCache Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>The MetadataCache manages cached information fetched from the MySQL Server.  
 <a href="classMetadataCache.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="src_2metadata__cache_8h_source.html">metadata_cache.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MetadataCache:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMetadataCache.png" usemap="#MetadataCache_map" alt=""/>
  <map id="MetadataCache_map" name="MetadataCache_map">
<area href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html" title="Abstract class that provides interface for adding and removing observers on replicaset status changes..." alt="metadata_cache::ReplicasetStateNotifierInterface" shape="rect" coords="148,0,435,24"/>
<area href="classARMetadataCache.html" alt="ARMetadataCache" shape="rect" coords="0,112,287,136"/>
<area href="classGRMetadataCache.html" alt="GRMetadataCache" shape="rect" coords="297,112,584,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a88ecb33549cd8be594f6baf8fc1058b9"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a88ecb33549cd8be594f6baf8fc1058b9">metadata_servers_list_t</a> = std::vector&lt; <a class="el" href="classmetadata__cache_1_1ManagedInstance.html">metadata_cache::ManagedInstance</a> &gt;</td></tr>
<tr class="separator:a88ecb33549cd8be594f6baf8fc1058b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad0ce30c5eb32916f968f798da10e1cb2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ad0ce30c5eb32916f968f798da10e1cb2">MetadataCache</a> (const unsigned router_id, const std::string &amp;cluster_specific_type_id, const std::vector&lt; <a class="el" href="classmysql__harness_1_1TCPAddress.html">mysql_harness::TCPAddress</a> &gt; &amp;<a class="el" href="classMetadataCache.html#a6da4f56a0c5cb88bb624f360e346ea70">metadata_servers</a>, std::shared_ptr&lt; <a class="el" href="classMetaData.html">MetaData</a> &gt; cluster_metadata, std::chrono::milliseconds <a class="el" href="classMetadataCache.html#a3a06dfaa5127ef91b65953309459d7b9">ttl</a>, const std::chrono::milliseconds auth_cache_ttl, const std::chrono::milliseconds auth_cache_refresh_interval, const <a class="el" href="structmysqlrouter_1_1SSLOptions.html">mysqlrouter::SSLOptions</a> &amp;ssl_options, const std::string &amp;<a class="el" href="classMetadataCache.html#a818e59e857ac5d9d05129bef38e0406a">cluster_name</a>, size_t thread_stack_size=<a class="el" href="namespacemysql__harness.html#a750283a88722200951921eea3b5aac03">mysql_harness::kDefaultStackSizeInKiloBytes</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> use_cluster_notifications=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:ad0ce30c5eb32916f968f798da10e1cb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a connection to the MySQL Metadata server.  <a href="#ad0ce30c5eb32916f968f798da10e1cb2">More...</a><br /></td></tr>
<tr class="separator:ad0ce30c5eb32916f968f798da10e1cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f36d814d1fdd5a43b6eeaca59a674c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a49f36d814d1fdd5a43b6eeaca59a674c">~MetadataCache</a> () override</td></tr>
<tr class="separator:a49f36d814d1fdd5a43b6eeaca59a674c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa911048ec2f3a37ff5b8eefa701b4fcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#aa911048ec2f3a37ff5b8eefa701b4fcb">start</a> ()</td></tr>
<tr class="memdesc:aa911048ec2f3a37ff5b8eefa701b4fcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the Metadata Cache.  <a href="#aa911048ec2f3a37ff5b8eefa701b4fcb">More...</a><br /></td></tr>
<tr class="separator:aa911048ec2f3a37ff5b8eefa701b4fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3001ccdd4d81813d43f508173cb0c6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ac3001ccdd4d81813d43f508173cb0c6c">stop</a> () noexcept</td></tr>
<tr class="memdesc:ac3001ccdd4d81813d43f508173cb0c6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the Metadata Cache.  <a href="#ac3001ccdd4d81813d43f508173cb0c6c">More...</a><br /></td></tr>
<tr class="separator:ac3001ccdd4d81813d43f508173cb0c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab06bf46c592ebca3350e828f6092d3e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMetadataCache.html#a88ecb33549cd8be594f6baf8fc1058b9">metadata_servers_list_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ab06bf46c592ebca3350e828f6092d3e4">replicaset_lookup</a> (const std::string &amp;replicaset_name)</td></tr>
<tr class="memdesc:ab06bf46c592ebca3350e828f6092d3e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns list of managed servers in a replicaset.  <a href="#ab06bf46c592ebca3350e828f6092d3e4">More...</a><br /></td></tr>
<tr class="separator:ab06bf46c592ebca3350e828f6092d3e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66684b25b7ae0ec2a7f3575d305791c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a66684b25b7ae0ec2a7f3575d305791c2">mark_instance_reachability</a> (const std::string &amp;instance_id, <a class="el" href="namespacemetadata__cache.html#aa6ad35031a354436ec8dddd0904ca4f5">metadata_cache::InstanceStatus</a> <a class="el" href="mysql_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">status</a>)</td></tr>
<tr class="memdesc:a66684b25b7ae0ec2a7f3575d305791c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the status of the instance.  <a href="#a66684b25b7ae0ec2a7f3575d305791c2">More...</a><br /></td></tr>
<tr class="separator:a66684b25b7ae0ec2a7f3575d305791c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf300933586caac16e5c334c38d7dab3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#abf300933586caac16e5c334c38d7dab3">wait_primary_failover</a> (const std::string &amp;replicaset_name, const <a class="el" href="task_8h.html#a541442824a656f9c820631f4b8adf441">std::chrono::seconds</a> &amp;timeout)</td></tr>
<tr class="memdesc:abf300933586caac16e5c334c38d7dab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until there's a primary member in the replicaset.  <a href="#abf300933586caac16e5c334c38d7dab3">More...</a><br /></td></tr>
<tr class="separator:abf300933586caac16e5c334c38d7dab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd7dc431a13fa8b1717696e31c6d2783"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#abd7dc431a13fa8b1717696e31c6d2783">refresh_thread</a> ()</td></tr>
<tr class="memdesc:abd7dc431a13fa8b1717696e31c6d2783"><td class="mdescLeft">&#160;</td><td class="mdescRight">refresh replicaset information  <a href="#abd7dc431a13fa8b1717696e31c6d2783">More...</a><br /></td></tr>
<tr class="separator:abd7dc431a13fa8b1717696e31c6d2783"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04805f2156d569bbf436e4e141ef349"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#af04805f2156d569bbf436e4e141ef349">add_listener</a> (const std::string &amp;replicaset_name, <a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">metadata_cache::ReplicasetStateListenerInterface</a> *listener) override</td></tr>
<tr class="memdesc:af04805f2156d569bbf436e4e141ef349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register observer that is notified when there is a change in the replicaset nodes setup/state discovered.  <a href="#af04805f2156d569bbf436e4e141ef349">More...</a><br /></td></tr>
<tr class="separator:af04805f2156d569bbf436e4e141ef349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec835babc6ebe51684cc849438b51ba1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#aec835babc6ebe51684cc849438b51ba1">remove_listener</a> (const std::string &amp;replicaset_name, <a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">metadata_cache::ReplicasetStateListenerInterface</a> *listener) override</td></tr>
<tr class="memdesc:aec835babc6ebe51684cc849438b51ba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister observer previously registered with add_listener()  <a href="#aec835babc6ebe51684cc849438b51ba1">More...</a><br /></td></tr>
<tr class="separator:aec835babc6ebe51684cc849438b51ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16db1c5c6964097d8e468548270b4c8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmetadata__cache_1_1MetadataCacheAPIBase_1_1RefreshStatus.html">metadata_cache::MetadataCacheAPIBase::RefreshStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a16db1c5c6964097d8e468548270b4c8e">refresh_status</a> ()</td></tr>
<tr class="separator:a16db1c5c6964097d8e468548270b4c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d769d584e03e8a781673f36fd1b95d1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a1d769d584e03e8a781673f36fd1b95d1">cluster_type_specific_id</a> () const</td></tr>
<tr class="separator:a1d769d584e03e8a781673f36fd1b95d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a06dfaa5127ef91b65953309459d7b9"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a3a06dfaa5127ef91b65953309459d7b9">ttl</a> () const</td></tr>
<tr class="separator:a3a06dfaa5127ef91b65953309459d7b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a818e59e857ac5d9d05129bef38e0406a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a818e59e857ac5d9d05129bef38e0406a">cluster_name</a> () const</td></tr>
<tr class="separator:a818e59e857ac5d9d05129bef38e0406a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e683b134add0f7bb93d745d46284584"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacemysqlrouter.html#a1e3a9a2c74de52b9be7ce0e318f4db30">mysqlrouter::ClusterType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a7e683b134add0f7bb93d745d46284584">cluster_type</a> () const noexcept=0</td></tr>
<tr class="separator:a7e683b134add0f7bb93d745d46284584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6da4f56a0c5cb88bb624f360e346ea70"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classmysql__harness_1_1TCPAddress.html">mysql_harness::TCPAddress</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a6da4f56a0c5cb88bb624f360e346ea70">metadata_servers</a> ()</td></tr>
<tr class="separator:a6da4f56a0c5cb88bb624f360e346ea70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bf91867c275a241d7aea6f75c6c85b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a22bf91867c275a241d7aea6f75c6c85b">enable_fetch_auth_metadata</a> ()</td></tr>
<tr class="separator:a22bf91867c275a241d7aea6f75c6c85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee6e960ee2cfc7f9534959b63cfa116b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#aee6e960ee2cfc7f9534959b63cfa116b">force_cache_update</a> ()</td></tr>
<tr class="separator:aee6e960ee2cfc7f9534959b63cfa116b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8afd7683df73d1f215826b1d04cd1a23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a8afd7683df73d1f215826b1d04cd1a23">check_auth_metadata_timers</a> () const</td></tr>
<tr class="separator:a8afd7683df73d1f215826b1d04cd1a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d5482a32db7ae1233056069a8d65588"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>, MetaData::auth_credentials_t::mapped_type &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a9d5482a32db7ae1233056069a8d65588">get_rest_user_auth_data</a> (const std::string &amp;<a class="el" href="persisted__variable_8cc.html#a8b83cc1a954492359ecbdba847d13e53">user</a>)</td></tr>
<tr class="separator:a9d5482a32db7ae1233056069a8d65588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html">metadata_cache::ReplicasetStateNotifierInterface</a></td></tr>
<tr class="memitem:aa31d146f4271fdfaaa38efca0462641d inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#aa31d146f4271fdfaaa38efca0462641d">ReplicasetStateNotifierInterface</a> ()=default</td></tr>
<tr class="separator:aa31d146f4271fdfaaa38efca0462641d inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a376f36a46883b82dda20de50505ce88f inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a376f36a46883b82dda20de50505ce88f">ReplicasetStateNotifierInterface</a> (const <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html">ReplicasetStateNotifierInterface</a> &amp;)=delete</td></tr>
<tr class="separator:a376f36a46883b82dda20de50505ce88f inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c43e36505cc1cdafccc0a72de75497 inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html">ReplicasetStateNotifierInterface</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a22c43e36505cc1cdafccc0a72de75497">operator=</a> (const <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html">ReplicasetStateNotifierInterface</a> &amp;)=delete</td></tr>
<tr class="separator:a22c43e36505cc1cdafccc0a72de75497 inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9fe951a9318d110b5d981b73659659 inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a3a9fe951a9318d110b5d981b73659659">~ReplicasetStateNotifierInterface</a> ()</td></tr>
<tr class="separator:a3a9fe951a9318d110b5d981b73659659 inherit pub_methods_classmetadata__cache_1_1ReplicasetStateNotifierInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a91e502504fdd97f1cfd0aa16a8396375"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a91e502504fdd97f1cfd0aa16a8396375">run_thread</a> (void *context)</td></tr>
<tr class="memdesc:a91e502504fdd97f1cfd0aa16a8396375"><td class="mdescLeft">&#160;</td><td class="mdescRight">run refresh thread  <a href="#a91e502504fdd97f1cfd0aa16a8396375">More...</a><br /></td></tr>
<tr class="separator:a91e502504fdd97f1cfd0aa16a8396375"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a38992d9ad9aec5904a4e414c84500a43"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a38992d9ad9aec5904a4e414c84500a43">refresh</a> ()=0</td></tr>
<tr class="memdesc:a38992d9ad9aec5904a4e414c84500a43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refreshes the cache.  <a href="#a38992d9ad9aec5904a4e414c84500a43">More...</a><br /></td></tr>
<tr class="separator:a38992d9ad9aec5904a4e414c84500a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92fbca147dd07794e5c15771807fd0b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a92fbca147dd07794e5c15771807fd0b8">on_refresh_failed</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> terminated)</td></tr>
<tr class="separator:a92fbca147dd07794e5c15771807fd0b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae907bdbc4548e4cf8ab5622eff8b4351"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ae907bdbc4548e4cf8ab5622eff8b4351">on_refresh_succeeded</a> (const <a class="el" href="classmetadata__cache_1_1ManagedInstance.html">metadata_cache::ManagedInstance</a> &amp;metadata_server)</td></tr>
<tr class="separator:ae907bdbc4548e4cf8ab5622eff8b4351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a351a5756113dff4aa2c5af2a509b12c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a351a5756113dff4aa2c5af2a509b12c1">on_instances_changed</a> (const <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> md_servers_reachable, unsigned view_id=0)</td></tr>
<tr class="separator:a351a5756113dff4aa2c5af2a509b12c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86550702a777ad407c225e5028490f9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a86550702a777ad407c225e5028490f9f">on_refresh_requested</a> ()</td></tr>
<tr class="separator:a86550702a777ad407c225e5028490f9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5ca9f6a59a015bbc17e3f16130d24dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ac5ca9f6a59a015bbc17e3f16130d24dc">on_refresh_completed</a> ()</td></tr>
<tr class="separator:ac5ca9f6a59a015bbc17e3f16130d24dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd842a0a0f6cce222629449ce960dbde"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#abd842a0a0f6cce222629449ce960dbde">update_auth_cache</a> ()</td></tr>
<tr class="separator:abd842a0a0f6cce222629449ce960dbde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a64c5f67aa9991740b8bf5a5f3fe6803a"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="classmetadata__cache_1_1ManagedReplicaSet.html">metadata_cache::ManagedReplicaSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a64c5f67aa9991740b8bf5a5f3fe6803a">replicaset_data_</a></td></tr>
<tr class="separator:a64c5f67aa9991740b8bf5a5f3fe6803a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8507a982b67dafcc44507fcfb26b1b0"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ab8507a982b67dafcc44507fcfb26b1b0">cluster_name_</a></td></tr>
<tr class="separator:ab8507a982b67dafcc44507fcfb26b1b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6686a5c748b04f88b23d5bb356390de"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#af6686a5c748b04f88b23d5bb356390de">cluster_type_specific_id_</a></td></tr>
<tr class="separator:af6686a5c748b04f88b23d5bb356390de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea0ed6cdf4bc1c7bfc030cb39446bdf3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMetadataCache.html#a88ecb33549cd8be594f6baf8fc1058b9">metadata_servers_list_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#aea0ed6cdf4bc1c7bfc030cb39446bdf3">metadata_servers_</a></td></tr>
<tr class="separator:aea0ed6cdf4bc1c7bfc030cb39446bdf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a0041db7a8cb235d8dd94f0c534b63"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a36a0041db7a8cb235d8dd94f0c534b63">ttl_</a></td></tr>
<tr class="separator:a36a0041db7a8cb235d8dd94f0c534b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd83ab532b1dfb2d0b2fbd5b554e2ae5"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#abd83ab532b1dfb2d0b2fbd5b554e2ae5">auth_cache_ttl_</a></td></tr>
<tr class="separator:abd83ab532b1dfb2d0b2fbd5b554e2ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98ece002db311fcbb46b3d5364e580a3"><td class="memItemLeft" align="right" valign="top">std::chrono::milliseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a98ece002db311fcbb46b3d5364e580a3">auth_cache_refresh_interval_</a></td></tr>
<tr class="separator:a98ece002db311fcbb46b3d5364e580a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea331572629fc8bce3f018e2f51466bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmysqlrouter_1_1SSLOptions.html">mysqlrouter::SSLOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#aea331572629fc8bce3f018e2f51466bf">ssl_options_</a></td></tr>
<tr class="separator:aea331572629fc8bce3f018e2f51466bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac275e668ed9c7e779c1e006603bb902"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#aac275e668ed9c7e779c1e006603bb902">router_id_</a></td></tr>
<tr class="separator:aac275e668ed9c7e779c1e006603bb902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a33cd79b7b78d3f4adeafeb34b12d41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMetaData.html#acea99745e7a15788bef0d538f35c18fb">MetaData::auth_credentials_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a4a33cd79b7b78d3f4adeafeb34b12d41">rest_auth_data_</a></td></tr>
<tr class="separator:a4a33cd79b7b78d3f4adeafeb34b12d41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f89b6d7eed1f54df26e6cfa095b666c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a4f89b6d7eed1f54df26e6cfa095b666c">auth_metadata_fetch_enabled_</a> {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td></tr>
<tr class="separator:a4f89b6d7eed1f54df26e6cfa095b666c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3610dbed84d7c33bc321fcc3af8a1c85"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classMetaData.html">MetaData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a3610dbed84d7c33bc321fcc3af8a1c85">meta_data_</a></td></tr>
<tr class="separator:a3610dbed84d7c33bc321fcc3af8a1c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29eaabdb7aaafdf94b5f9c13965f95e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmysql__harness_1_1MySQLRouterThread.html">mysql_harness::MySQLRouterThread</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a29eaabdb7aaafdf94b5f9c13965f95e1">refresh_thread_</a></td></tr>
<tr class="memdesc:a29eaabdb7aaafdf94b5f9c13965f95e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">refresh thread facade  <a href="#a29eaabdb7aaafdf94b5f9c13965f95e1">More...</a><br /></td></tr>
<tr class="separator:a29eaabdb7aaafdf94b5f9c13965f95e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afec11024b2c339e34d7da5ddc6be1b07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmysql__harness_1_1MySQLRouterThread.html">mysql_harness::MySQLRouterThread</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#afec11024b2c339e34d7da5ddc6be1b07">notification_thread_</a></td></tr>
<tr class="memdesc:afec11024b2c339e34d7da5ddc6be1b07"><td class="mdescLeft">&#160;</td><td class="mdescRight">notification thread facade  <a href="#afec11024b2c339e34d7da5ddc6be1b07">More...</a><br /></td></tr>
<tr class="separator:afec11024b2c339e34d7da5ddc6be1b07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d3b42b83d4b197ab498ea5f4910eeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a25d3b42b83d4b197ab498ea5f4910eeb">cache_refreshing_mutex_</a></td></tr>
<tr class="separator:a25d3b42b83d4b197ab498ea5f4910eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e87d061476f0794820ee2775ba0489"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ab1e87d061476f0794820ee2775ba0489">metadata_servers_mutex_</a></td></tr>
<tr class="separator:ab1e87d061476f0794820ee2775ba0489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab32f5415687ac63fa602a3a0bd08733b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="suite__stubs_8h.html#ad287d8e71b971be7d1c8998b3284340c">std::set</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ab32f5415687ac63fa602a3a0bd08733b">replicasets_with_unreachable_nodes_</a></td></tr>
<tr class="separator:ab32f5415687ac63fa602a3a0bd08733b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5164ef72a9f2bf5ebcd0953542eda15"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ab5164ef72a9f2bf5ebcd0953542eda15">replicasets_with_unreachable_nodes_mtx_</a></td></tr>
<tr class="separator:ab5164ef72a9f2bf5ebcd0953542eda15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a388785027731b505fcb48e442460228a"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a388785027731b505fcb48e442460228a">terminated_</a> {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td></tr>
<tr class="separator:a388785027731b505fcb48e442460228a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91b1295ea48974bb5bccbe690b2ec484"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a91b1295ea48974bb5bccbe690b2ec484">refresh_requested_</a> {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td></tr>
<tr class="separator:a91b1295ea48974bb5bccbe690b2ec484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a343bc2ff0974bf81615436435076d53d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a343bc2ff0974bf81615436435076d53d">use_cluster_notifications_</a></td></tr>
<tr class="separator:a343bc2ff0974bf81615436435076d53d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8114dcc5cbe31fe469bee6f60ec3a6c4"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a8114dcc5cbe31fe469bee6f60ec3a6c4">refresh_wait_</a></td></tr>
<tr class="separator:a8114dcc5cbe31fe469bee6f60ec3a6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9541bd676336afc86b7d978f44eca987"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a9541bd676336afc86b7d978f44eca987">refresh_wait_mtx_</a></td></tr>
<tr class="separator:a9541bd676336afc86b7d978f44eca987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a218c66321ff4dece00ec3e2c8139e9a4"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a218c66321ff4dece00ec3e2c8139e9a4">refresh_completed_</a></td></tr>
<tr class="separator:a218c66321ff4dece00ec3e2c8139e9a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac196df2b574de3738b85e1b0fb8962da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ac196df2b574de3738b85e1b0fb8962da">refresh_completed_mtx_</a></td></tr>
<tr class="separator:ac196df2b574de3738b85e1b0fb8962da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe30a8bf9a9604d6fd9e12329dd786b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#abe30a8bf9a9604d6fd9e12329dd786b8">replicaset_instances_change_callbacks_mtx_</a></td></tr>
<tr class="separator:abe30a8bf9a9604d6fd9e12329dd786b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b1780665f40d614934326fdc1249410"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="suite__stubs_8h.html#ad287d8e71b971be7d1c8998b3284340c">std::set</a>&lt; <a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">metadata_cache::ReplicasetStateListenerInterface</a> * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a2b1780665f40d614934326fdc1249410">listeners_</a></td></tr>
<tr class="separator:a2b1780665f40d614934326fdc1249410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d02539085228b31d40e3afbdcb56a60"><td class="memItemLeft" align="right" valign="top">std::chrono::system_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a8d02539085228b31d40e3afbdcb56a60">last_refresh_failed_</a></td></tr>
<tr class="separator:a8d02539085228b31d40e3afbdcb56a60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6929aa60e18bb41fcb4d65d244b686"><td class="memItemLeft" align="right" valign="top">std::chrono::system_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#aed6929aa60e18bb41fcb4d65d244b686">last_refresh_succeeded_</a></td></tr>
<tr class="separator:aed6929aa60e18bb41fcb4d65d244b686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac07027ad94a55c0f943ef43a56107985"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ac07027ad94a55c0f943ef43a56107985">refresh_failed_</a> {0}</td></tr>
<tr class="separator:ac07027ad94a55c0f943ef43a56107985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa99204c23f32e56d86e05a1e532eb41"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#afa99204c23f32e56d86e05a1e532eb41">refresh_succeeded_</a> {0}</td></tr>
<tr class="separator:afa99204c23f32e56d86e05a1e532eb41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab776f5140d8fd59e1c5e10989fc7ed70"><td class="memItemLeft" align="right" valign="top">std::chrono::system_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ab776f5140d8fd59e1c5e10989fc7ed70">last_credentials_update_</a></td></tr>
<tr class="separator:ab776f5140d8fd59e1c5e10989fc7ed70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9fdbad666d96220eb2c7986baf412d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a5e9fdbad666d96220eb2c7986baf412d">last_metadata_server_host_</a></td></tr>
<tr class="separator:a5e9fdbad666d96220eb2c7986baf412d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9143b3dc52ef510be64f60b7c4066b8a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a9143b3dc52ef510be64f60b7c4066b8a">last_metadata_server_port_</a></td></tr>
<tr class="separator:a9143b3dc52ef510be64f60b7c4066b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa550f1dc4a61be41244a3526ce631da0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#aa550f1dc4a61be41244a3526ce631da0">version_updated_</a> {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td></tr>
<tr class="separator:aa550f1dc4a61be41244a3526ce631da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8871b07e5e61b0231a1fa56ed4cdc1e"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#ad8871b07e5e61b0231a1fa56ed4cdc1e">last_check_in_updated_</a> {0}</td></tr>
<tr class="separator:ad8871b07e5e61b0231a1fa56ed4cdc1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c4674414f55718952a2edab44d14302"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMetadataCache.html#a2c4674414f55718952a2edab44d14302">ready_announced_</a> {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td></tr>
<tr class="separator:a2c4674414f55718952a2edab44d14302"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The MetadataCache manages cached information fetched from the MySQL Server. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a88ecb33549cd8be594f6baf8fc1058b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88ecb33549cd8be594f6baf8fc1058b9">&#9670;&nbsp;</a></span>metadata_servers_list_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classMetadataCache.html#a88ecb33549cd8be594f6baf8fc1058b9">MetadataCache::metadata_servers_list_t</a> =  std::vector&lt;<a class="el" href="classmetadata__cache_1_1ManagedInstance.html">metadata_cache::ManagedInstance</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad0ce30c5eb32916f968f798da10e1cb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ce30c5eb32916f968f798da10e1cb2">&#9670;&nbsp;</a></span>MetadataCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MetadataCache::MetadataCache </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>router_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cluster_specific_type_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classmysql__harness_1_1TCPAddress.html">mysql_harness::TCPAddress</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>metadata_servers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classMetaData.html">MetaData</a> &gt;&#160;</td>
          <td class="paramname"><em>cluster_metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>auth_cache_ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::chrono::milliseconds&#160;</td>
          <td class="paramname"><em>auth_cache_refresh_interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmysqlrouter_1_1SSLOptions.html">mysqlrouter::SSLOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>ssl_options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cluster_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thread_stack_size</em> = <code><a class="el" href="namespacemysql__harness.html#a750283a88722200951921eea3b5aac03">mysql_harness::kDefaultStackSizeInKiloBytes</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>use_cluster_notifications</em> = <code><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a connection to the MySQL Metadata server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">router_id</td><td>id of the router in the cluster metadata </td></tr>
    <tr><td class="paramname">cluster_specific_type_id</td><td>id of the replication group </td></tr>
    <tr><td class="paramname">metadata_servers</td><td>The servers that store the metadata </td></tr>
    <tr><td class="paramname">cluster_metadata</td><td>metadata of the cluster </td></tr>
    <tr><td class="paramname">ttl</td><td>The TTL of the cached data </td></tr>
    <tr><td class="paramname">auth_cache_ttl</td><td>TTL of the rest users authentication data </td></tr>
    <tr><td class="paramname">auth_cache_refresh_interval</td><td>Refresh rate of the rest users authentiction data </td></tr>
    <tr><td class="paramname">ssl_options</td><td>SSL related options for connection </td></tr>
    <tr><td class="paramname">cluster_name</td><td>The name of the desired cluster in the metadata server </td></tr>
    <tr><td class="paramname">thread_stack_size</td><td>The maximum memory allocated for thread's stack </td></tr>
    <tr><td class="paramname">use_cluster_notifications</td><td>Flag indicating if the metadata cache should use GR notifications as an additional trigger for metadata refresh </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a49f36d814d1fdd5a43b6eeaca59a674c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49f36d814d1fdd5a43b6eeaca59a674c">&#9670;&nbsp;</a></span>~MetadataCache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MetadataCache::~MetadataCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af04805f2156d569bbf436e4e141ef349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04805f2156d569bbf436e4e141ef349">&#9670;&nbsp;</a></span>add_listener()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::add_listener </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>replicaset_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">metadata_cache::ReplicasetStateListenerInterface</a> *&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register observer that is notified when there is a change in the replicaset nodes setup/state discovered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replicaset_name</td><td>name of the replicaset </td></tr>
    <tr><td class="paramname">listener</td><td>Observer object that is notified when replicaset nodes state is changed. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a2d554cea4a9625b68ceb8937aa57152d">metadata_cache::ReplicasetStateNotifierInterface</a>.</p>

</div>
</div>
<a id="a8afd7683df73d1f215826b1d04cd1a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8afd7683df73d1f215826b1d04cd1a23">&#9670;&nbsp;</a></span>check_auth_metadata_timers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::check_auth_metadata_timers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a818e59e857ac5d9d05129bef38e0406a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a818e59e857ac5d9d05129bef38e0406a">&#9670;&nbsp;</a></span>cluster_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string MetadataCache::cluster_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7e683b134add0f7bb93d745d46284584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e683b134add0f7bb93d745d46284584">&#9670;&nbsp;</a></span>cluster_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacemysqlrouter.html#a1e3a9a2c74de52b9be7ce0e318f4db30">mysqlrouter::ClusterType</a> MetadataCache::cluster_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classGRMetadataCache.html#ae1cbd02f59067f37d4fa813c96e34d73">GRMetadataCache</a>, and <a class="el" href="classARMetadataCache.html#a61a646ceef1100a6cd9858d822efa40e">ARMetadataCache</a>.</p>

</div>
</div>
<a id="a1d769d584e03e8a781673f36fd1b95d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d769d584e03e8a781673f36fd1b95d1">&#9670;&nbsp;</a></span>cluster_type_specific_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string MetadataCache::cluster_type_specific_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a22bf91867c275a241d7aea6f75c6c85b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22bf91867c275a241d7aea6f75c6c85b">&#9670;&nbsp;</a></span>enable_fetch_auth_metadata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::enable_fetch_auth_metadata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aee6e960ee2cfc7f9534959b63cfa116b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee6e960ee2cfc7f9534959b63cfa116b">&#9670;&nbsp;</a></span>force_cache_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::force_cache_update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9d5482a32db7ae1233056069a8d65588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d5482a32db7ae1233056069a8d65588">&#9670;&nbsp;</a></span>get_rest_user_auth_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>, MetaData::auth_credentials_t::mapped_type &gt; MetadataCache::get_rest_user_auth_data </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a66684b25b7ae0ec2a7f3575d305791c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66684b25b7ae0ec2a7f3575d305791c2">&#9670;&nbsp;</a></span>mark_instance_reachability()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::mark_instance_reachability </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>instance_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacemetadata__cache.html#aa6ad35031a354436ec8dddd0904ca4f5">metadata_cache::InstanceStatus</a>&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the status of the instance. </p>
<p>Called when an instance from a replicaset cannot be reached for one reason or another. When an instance becomes unreachable, an emergency mode is set (the rate of refresh of the metadata cache increases to once per second if currently lower) and lasts until disabled after a suitable change in the metadata cache is discovered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance_id</td><td>- the mysql_server_uuid that identifies the server instance </td></tr>
    <tr><td class="paramname">status</td><td>- the status of the instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6da4f56a0c5cb88bb624f360e346ea70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6da4f56a0c5cb88bb624f360e346ea70">&#9670;&nbsp;</a></span>metadata_servers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classmysql__harness_1_1TCPAddress.html">mysql_harness::TCPAddress</a>&gt; MetadataCache::metadata_servers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a351a5756113dff4aa2c5af2a509b12c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a351a5756113dff4aa2c5af2a509b12c1">&#9670;&nbsp;</a></span>on_instances_changed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::on_instances_changed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>md_servers_reachable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>view_id</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac5ca9f6a59a015bbc17e3f16130d24dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5ca9f6a59a015bbc17e3f16130d24dc">&#9670;&nbsp;</a></span>on_refresh_completed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::on_refresh_completed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a92fbca147dd07794e5c15771807fd0b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92fbca147dd07794e5c15771807fd0b8">&#9670;&nbsp;</a></span>on_refresh_failed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::on_refresh_failed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>terminated</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a86550702a777ad407c225e5028490f9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86550702a777ad407c225e5028490f9f">&#9670;&nbsp;</a></span>on_refresh_requested()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::on_refresh_requested </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae907bdbc4548e4cf8ab5622eff8b4351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae907bdbc4548e4cf8ab5622eff8b4351">&#9670;&nbsp;</a></span>on_refresh_succeeded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::on_refresh_succeeded </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmetadata__cache_1_1ManagedInstance.html">metadata_cache::ManagedInstance</a> &amp;&#160;</td>
          <td class="paramname"><em>metadata_server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a38992d9ad9aec5904a4e414c84500a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38992d9ad9aec5904a4e414c84500a43">&#9670;&nbsp;</a></span>refresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MetadataCache::refresh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Refreshes the cache. </p>

<p>Implemented in <a class="el" href="classGRMetadataCache.html#a02b0c15c0985eb71dd74d38b9104cae7">GRMetadataCache</a>, and <a class="el" href="classARMetadataCache.html#a766849b08227d0e34d0927e1e44f0866">ARMetadataCache</a>.</p>

</div>
</div>
<a id="a16db1c5c6964097d8e468548270b4c8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16db1c5c6964097d8e468548270b4c8e">&#9670;&nbsp;</a></span>refresh_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmetadata__cache_1_1MetadataCacheAPIBase_1_1RefreshStatus.html">metadata_cache::MetadataCacheAPIBase::RefreshStatus</a> MetadataCache::refresh_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abd7dc431a13fa8b1717696e31c6d2783"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd7dc431a13fa8b1717696e31c6d2783">&#9670;&nbsp;</a></span>refresh_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::refresh_thread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>refresh replicaset information </p>

</div>
</div>
<a id="aec835babc6ebe51684cc849438b51ba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec835babc6ebe51684cc849438b51ba1">&#9670;&nbsp;</a></span>remove_listener()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::remove_listener </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>replicaset_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">metadata_cache::ReplicasetStateListenerInterface</a> *&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregister observer previously registered with add_listener() </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replicaset_name</td><td>name of the replicaset </td></tr>
    <tr><td class="paramname">listener</td><td>Observer object that should be unregistered. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classmetadata__cache_1_1ReplicasetStateNotifierInterface.html#a7ecb7107d33d7475bee394cf95f0d871">metadata_cache::ReplicasetStateNotifierInterface</a>.</p>

</div>
</div>
<a id="ab06bf46c592ebca3350e828f6092d3e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab06bf46c592ebca3350e828f6092d3e4">&#9670;&nbsp;</a></span>replicaset_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMetadataCache.html#a88ecb33549cd8be594f6baf8fc1058b9">MetadataCache::metadata_servers_list_t</a> MetadataCache::replicaset_lookup </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>replicaset_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns list of managed servers in a replicaset. </p>
<p>Returns list of managed servers in a replicaset.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replicaset_name</td><td>The ID of the replicaset being looked up </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::vector containing ManagedInstance objects </dd></dl>

</div>
</div>
<a id="a91e502504fdd97f1cfd0aa16a8396375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91e502504fdd97f1cfd0aa16a8396375">&#9670;&nbsp;</a></span>run_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * MetadataCache::run_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>run refresh thread </p>

</div>
</div>
<a id="aa911048ec2f3a37ff5b8eefa701b4fcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa911048ec2f3a37ff5b8eefa701b4fcb">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the Metadata Cache. </p>
<p>Connect to the metadata servers and refresh the metadata information in the cache.</p>
<p>Starts the Metadata Cache and launch thread. </p>

</div>
</div>
<a id="ac3001ccdd4d81813d43f508173cb0c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3001ccdd4d81813d43f508173cb0c6c">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MetadataCache::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops the Metadata Cache. </p>
<p>Stop the refresh thread.</p>
<p>Stops the Metadata Cache and the launch thread. </p>

</div>
</div>
<a id="a3a06dfaa5127ef91b65953309459d7b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a06dfaa5127ef91b65953309459d7b9">&#9670;&nbsp;</a></span>ttl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds MetadataCache::ttl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abd842a0a0f6cce222629449ce960dbde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd842a0a0f6cce222629449ce960dbde">&#9670;&nbsp;</a></span>update_auth_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MetadataCache::update_auth_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abf300933586caac16e5c334c38d7dab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf300933586caac16e5c334c38d7dab3">&#9670;&nbsp;</a></span>wait_primary_failover()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MetadataCache::wait_primary_failover </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>replicaset_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="task_8h.html#a541442824a656f9c820631f4b8adf441">std::chrono::seconds</a> &amp;&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait until there's a primary member in the replicaset. </p>
<p>To be called when the primary member of a single-primary replicaset is down and we want to wait until one becomes elected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replicaset_name</td><td>name of the replicaset </td></tr>
    <tr><td class="paramname">timeout</td><td>- amount of time to wait for a failover </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a primary member exists </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a98ece002db311fcbb46b3d5364e580a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98ece002db311fcbb46b3d5364e580a3">&#9670;&nbsp;</a></span>auth_cache_refresh_interval_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds MetadataCache::auth_cache_refresh_interval_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abd83ab532b1dfb2d0b2fbd5b554e2ae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd83ab532b1dfb2d0b2fbd5b554e2ae5">&#9670;&nbsp;</a></span>auth_cache_ttl_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds MetadataCache::auth_cache_ttl_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4f89b6d7eed1f54df26e6cfa095b666c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f89b6d7eed1f54df26e6cfa095b666c">&#9670;&nbsp;</a></span>auth_metadata_fetch_enabled_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MetadataCache::auth_metadata_fetch_enabled_ {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a25d3b42b83d4b197ab498ea5f4910eeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d3b42b83d4b197ab498ea5f4910eeb">&#9670;&nbsp;</a></span>cache_refreshing_mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> MetadataCache::cache_refreshing_mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab8507a982b67dafcc44507fcfb26b1b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8507a982b67dafcc44507fcfb26b1b0">&#9670;&nbsp;</a></span>cluster_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string MetadataCache::cluster_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af6686a5c748b04f88b23d5bb356390de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6686a5c748b04f88b23d5bb356390de">&#9670;&nbsp;</a></span>cluster_type_specific_id_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string MetadataCache::cluster_type_specific_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad8871b07e5e61b0231a1fa56ed4cdc1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8871b07e5e61b0231a1fa56ed4cdc1e">&#9670;&nbsp;</a></span>last_check_in_updated_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned MetadataCache::last_check_in_updated_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab776f5140d8fd59e1c5e10989fc7ed70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab776f5140d8fd59e1c5e10989fc7ed70">&#9670;&nbsp;</a></span>last_credentials_update_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::system_clock::time_point MetadataCache::last_credentials_update_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5e9fdbad666d96220eb2c7986baf412d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9fdbad666d96220eb2c7986baf412d">&#9670;&nbsp;</a></span>last_metadata_server_host_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string MetadataCache::last_metadata_server_host_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9143b3dc52ef510be64f60b7c4066b8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9143b3dc52ef510be64f60b7c4066b8a">&#9670;&nbsp;</a></span>last_metadata_server_port_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t MetadataCache::last_metadata_server_port_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8d02539085228b31d40e3afbdcb56a60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d02539085228b31d40e3afbdcb56a60">&#9670;&nbsp;</a></span>last_refresh_failed_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::system_clock::time_point MetadataCache::last_refresh_failed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aed6929aa60e18bb41fcb4d65d244b686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed6929aa60e18bb41fcb4d65d244b686">&#9670;&nbsp;</a></span>last_refresh_succeeded_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::system_clock::time_point MetadataCache::last_refresh_succeeded_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2b1780665f40d614934326fdc1249410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b1780665f40d614934326fdc1249410">&#9670;&nbsp;</a></span>listeners_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, <a class="el" href="suite__stubs_8h.html#ad287d8e71b971be7d1c8998b3284340c">std::set</a>&lt;<a class="el" href="classmetadata__cache_1_1ReplicasetStateListenerInterface.html">metadata_cache::ReplicasetStateListenerInterface</a> *&gt; &gt; MetadataCache::listeners_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3610dbed84d7c33bc321fcc3af8a1c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3610dbed84d7c33bc321fcc3af8a1c85">&#9670;&nbsp;</a></span>meta_data_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classMetaData.html">MetaData</a>&gt; MetadataCache::meta_data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aea0ed6cdf4bc1c7bfc030cb39446bdf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea0ed6cdf4bc1c7bfc030cb39446bdf3">&#9670;&nbsp;</a></span>metadata_servers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMetadataCache.html#a88ecb33549cd8be594f6baf8fc1058b9">metadata_servers_list_t</a> MetadataCache::metadata_servers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab1e87d061476f0794820ee2775ba0489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e87d061476f0794820ee2775ba0489">&#9670;&nbsp;</a></span>metadata_servers_mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> MetadataCache::metadata_servers_mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afec11024b2c339e34d7da5ddc6be1b07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afec11024b2c339e34d7da5ddc6be1b07">&#9670;&nbsp;</a></span>notification_thread_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmysql__harness_1_1MySQLRouterThread.html">mysql_harness::MySQLRouterThread</a> MetadataCache::notification_thread_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>notification thread facade </p>

</div>
</div>
<a id="a2c4674414f55718952a2edab44d14302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c4674414f55718952a2edab44d14302">&#9670;&nbsp;</a></span>ready_announced_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MetadataCache::ready_announced_ {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a218c66321ff4dece00ec3e2c8139e9a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a218c66321ff4dece00ec3e2c8139e9a4">&#9670;&nbsp;</a></span>refresh_completed_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable MetadataCache::refresh_completed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac196df2b574de3738b85e1b0fb8962da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac196df2b574de3738b85e1b0fb8962da">&#9670;&nbsp;</a></span>refresh_completed_mtx_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> MetadataCache::refresh_completed_mtx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac07027ad94a55c0f943ef43a56107985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac07027ad94a55c0f943ef43a56107985">&#9670;&nbsp;</a></span>refresh_failed_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t MetadataCache::refresh_failed_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a91b1295ea48974bb5bccbe690b2ec484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91b1295ea48974bb5bccbe690b2ec484">&#9670;&nbsp;</a></span>refresh_requested_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MetadataCache::refresh_requested_ {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afa99204c23f32e56d86e05a1e532eb41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa99204c23f32e56d86e05a1e532eb41">&#9670;&nbsp;</a></span>refresh_succeeded_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t MetadataCache::refresh_succeeded_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a29eaabdb7aaafdf94b5f9c13965f95e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29eaabdb7aaafdf94b5f9c13965f95e1">&#9670;&nbsp;</a></span>refresh_thread_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmysql__harness_1_1MySQLRouterThread.html">mysql_harness::MySQLRouterThread</a> MetadataCache::refresh_thread_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>refresh thread facade </p>

</div>
</div>
<a id="a8114dcc5cbe31fe469bee6f60ec3a6c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8114dcc5cbe31fe469bee6f60ec3a6c4">&#9670;&nbsp;</a></span>refresh_wait_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable MetadataCache::refresh_wait_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9541bd676336afc86b7d978f44eca987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9541bd676336afc86b7d978f44eca987">&#9670;&nbsp;</a></span>refresh_wait_mtx_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> MetadataCache::refresh_wait_mtx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a64c5f67aa9991740b8bf5a5f3fe6803a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c5f67aa9991740b8bf5a5f3fe6803a">&#9670;&nbsp;</a></span>replicaset_data_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, <a class="el" href="classmetadata__cache_1_1ManagedReplicaSet.html">metadata_cache::ManagedReplicaSet</a>&gt; MetadataCache::replicaset_data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abe30a8bf9a9604d6fd9e12329dd786b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe30a8bf9a9604d6fd9e12329dd786b8">&#9670;&nbsp;</a></span>replicaset_instances_change_callbacks_mtx_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> MetadataCache::replicaset_instances_change_callbacks_mtx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab32f5415687ac63fa602a3a0bd08733b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab32f5415687ac63fa602a3a0bd08733b">&#9670;&nbsp;</a></span>replicasets_with_unreachable_nodes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="suite__stubs_8h.html#ad287d8e71b971be7d1c8998b3284340c">std::set</a>&lt;std::string&gt; MetadataCache::replicasets_with_unreachable_nodes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab5164ef72a9f2bf5ebcd0953542eda15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5164ef72a9f2bf5ebcd0953542eda15">&#9670;&nbsp;</a></span>replicasets_with_unreachable_nodes_mtx_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> MetadataCache::replicasets_with_unreachable_nodes_mtx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a33cd79b7b78d3f4adeafeb34b12d41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a33cd79b7b78d3f4adeafeb34b12d41">&#9670;&nbsp;</a></span>rest_auth_data_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMetaData.html#acea99745e7a15788bef0d538f35c18fb">MetaData::auth_credentials_t</a> MetadataCache::rest_auth_data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aac275e668ed9c7e779c1e006603bb902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac275e668ed9c7e779c1e006603bb902">&#9670;&nbsp;</a></span>router_id_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned MetadataCache::router_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aea331572629fc8bce3f018e2f51466bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea331572629fc8bce3f018e2f51466bf">&#9670;&nbsp;</a></span>ssl_options_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmysqlrouter_1_1SSLOptions.html">mysqlrouter::SSLOptions</a> MetadataCache::ssl_options_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a388785027731b505fcb48e442460228a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a388785027731b505fcb48e442460228a">&#9670;&nbsp;</a></span>terminated_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&gt; MetadataCache::terminated_ {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a36a0041db7a8cb235d8dd94f0c534b63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a0041db7a8cb235d8dd94f0c534b63">&#9670;&nbsp;</a></span>ttl_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::milliseconds MetadataCache::ttl_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a343bc2ff0974bf81615436435076d53d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a343bc2ff0974bf81615436435076d53d">&#9670;&nbsp;</a></span>use_cluster_notifications_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MetadataCache::use_cluster_notifications_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa550f1dc4a61be41244a3526ce631da0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa550f1dc4a61be41244a3526ce631da0">&#9670;&nbsp;</a></span>version_updated_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MetadataCache::version_updated_ {<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>router/src/metadata_cache/src/<a class="el" href="src_2metadata__cache_8h_source.html">metadata_cache.h</a></li>
<li>router/src/metadata_cache/src/<a class="el" href="metadata__cache_8cc.html">metadata_cache.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classMetadataCache.html">MetadataCache</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
