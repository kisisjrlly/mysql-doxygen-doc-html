<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/fts0fts.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fts0fts_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">fts0fts.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="fts0fts_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 2006, 2020, Oracle and/or its affiliates. All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/fts0fts.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> Full text search header file</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> Created 2011/09/02 Sunny Bains</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> ***********************************************************************/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifndef fts0fts_h</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define fts0fts_h</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ha__prototypes_8h.html">ha_prototypes.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="data0type_8h.html">data0type.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="data0types_8h.html">data0types.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict0types_8h.html">dict0types.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ft__global_8h.html">ft_global.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hash0hash_8h.html">hash0hash.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem0mem_8h.html">mem0mem.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="plugin__ftparser_8h.html">mysql/plugin_ftparser.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="que0types_8h.html">que0types.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rem0types_8h.html">rem0types.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="row0types_8h.html">row0types.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="trx0types_8h.html">trx0types.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0rbt_8h.html">ut0rbt.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0vec_8h.html">ut0vec.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0wqueue_8h.html">ut0wqueue.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/** &quot;NULL&quot; value of a document id. */</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a5906e749319373555e167eb66bc4bbac">   54</a></span>&#160;<span class="preprocessor">#define FTS_NULL_DOC_ID 0</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/** FTS hidden column that is used to map to and from the row */</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af7ca71b793201492e95da03003e7b640">   57</a></span>&#160;<span class="preprocessor">#define FTS_DOC_ID_COL_NAME &quot;FTS_DOC_ID&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/** The name of the index created by FTS */</span></div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ae5221515c66530e540c2fb8b02dc73aa">   60</a></span>&#160;<span class="preprocessor">#define FTS_DOC_ID_INDEX_NAME &quot;FTS_DOC_ID_INDEX&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a65db951a9ad676443dedc5d04ef8dbc9">   62</a></span>&#160;<span class="preprocessor">#define FTS_DOC_ID_INDEX_NAME_LEN 16</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/** Doc ID is a 8 byte value */</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a0f05da263ceeaad9082a47a297940b5f">   65</a></span>&#160;<span class="preprocessor">#define FTS_DOC_ID_LEN 8</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/** The number of fields to sort when we build FT index with</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">FIC. Three fields are sort: (word, doc_id, position) */</span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ae94286ad197b69b6c6aec8cfe53076fa">   69</a></span>&#160;<span class="preprocessor">#define FTS_NUM_FIELDS_SORT 3</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/** Maximum number of rows in a table, smaller than which, we will</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">optimize using a 4 byte Doc ID for FIC merge sort to reduce sort size */</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a130ab649a888fa09e72d908082601f24">   73</a></span>&#160;<span class="preprocessor">#define MAX_DOC_ID_OPT_VAL 1073741824</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/** Document id type. */</span></div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">   76</a></span>&#160;<span class="keyword">typedef</span> ib_uint64_t <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/** doc_id_t printf format */</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a6223623e7a4773b0754eb2d76c8d300f">   79</a></span>&#160;<span class="preprocessor">#define FTS_DOC_ID_FORMAT IB_ID_FMT</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/** Convert document id to the InnoDB (BIG ENDIAN) storage format. */</span></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aa02d1e13cb6055003f70394048e189a0">   82</a></span>&#160;<span class="preprocessor">#define fts_write_doc_id(d, s) mach_write_to_8(d, s)</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">/** Read a document id to internal format. */</span></div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a56ea4e94591dca10b20dd35ef68a17e5">   85</a></span>&#160;<span class="preprocessor">#define fts_read_doc_id(s) mach_read_from_8(s)</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/** Bind the doc id to a variable */</span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aad28c391c67cdc7315fc98f63f546744">   88</a></span>&#160;<span class="preprocessor">#define fts_bind_doc_id(i, n, v) pars_info_bind_int8_literal(i, n, v)</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/** Defines for FTS query mode, they have the same values as</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">those defined in mysql file ft_global.h */</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a14fe790339733f6e97210e6a2263d311">   92</a></span>&#160;<span class="preprocessor">#define FTS_NL 0</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af5464db4013c27d1ef72f242008c081d">   93</a></span>&#160;<span class="preprocessor">#define FTS_BOOL 1</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a08dcc0390411c7f1c66caa741fb495d3">   94</a></span>&#160;<span class="preprocessor">#define FTS_SORTED 2</span></div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a4afdeb1e98fcb635d5f9edf637013910">   95</a></span>&#160;<span class="preprocessor">#define FTS_EXPAND 4</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a4da9df91151cde7803c067366b72fad7">   96</a></span>&#160;<span class="preprocessor">#define FTS_NO_RANKING 8</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ac5351eb79bab4832b9acd9a41cbc07c6">   97</a></span>&#160;<span class="preprocessor">#define FTS_PROXIMITY 16</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aa988f65c1fb5bc39bc611a405f87e093">   98</a></span>&#160;<span class="preprocessor">#define FTS_PHRASE 32</span></div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a0d47946aae644600f959ff86ca5b63ce">   99</a></span>&#160;<span class="preprocessor">#define FTS_OPT_RANKING 64</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a971934382516cc1da295117c112fc3ca">  101</a></span>&#160;<span class="preprocessor">#define FTS_INDEX_TABLE_IND_NAME &quot;FTS_INDEX_TABLE_IND&quot;</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aa0dae399249ebff83080acb3cd52cbee">  102</a></span>&#160;<span class="preprocessor">#define FTS_COMMON_TABLE_IND_NAME &quot;FTS_COMMON_TABLE_IND&quot;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/** The number of FTS index partitions for a fulltext idnex */</span></div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a83293766ab844685a17ef8f50173165f">  105</a></span>&#160;<span class="preprocessor">#define FTS_NUM_AUX_INDEX 6</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/** The number of FTS AUX common table for a fulltext idnex */</span></div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aade5794903bce038ff949bdeae04bbb3">  108</a></span>&#160;<span class="preprocessor">#define FTS_NUM_AUX_COMMON 5</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/** Threshold where our optimize thread automatically kicks in */</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a3f975133375879626b7bd030cc7f648a">  111</a></span>&#160;<span class="preprocessor">#define FTS_OPTIMIZE_THRESHOLD 10000000</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/** Threshold to avoid exhausting of doc ids. Consecutive doc id difference</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">should not exceed FTS_DOC_ID_MAX_STEP */</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a0994c74230770ac0a6dff7f9fab05d47">  115</a></span>&#160;<span class="preprocessor">#define FTS_DOC_ID_MAX_STEP 65535</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/** Maximum possible Fulltext word length */</span></div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#adeb237de07817f648b3417b7455358a3">  118</a></span>&#160;<span class="preprocessor">#define FTS_MAX_WORD_LEN HA_FT_MAXBYTELEN</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/** Maximum possible Fulltext word length (in characters) */</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a42233ee6162740c6d609819f38eef289">  121</a></span>&#160;<span class="preprocessor">#define FTS_MAX_WORD_LEN_IN_CHAR HA_FT_MAXCHARLEN</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/** Number of columns in FTS AUX Tables */</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a837701a4e7ac8d27e321f75118adab91">  124</a></span>&#160;<span class="preprocessor">#define FTS_DELETED_TABLE_NUM_COLS 1</span></div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a2fc3f8b3e5f881b31599ccb7fe70591f">  125</a></span>&#160;<span class="preprocessor">#define FTS_CONFIG_TABLE_NUM_COLS 2</span></div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a691d2d80ae35e21b11c784bfb87d29b9">  126</a></span>&#160;<span class="preprocessor">#define FTS_AUX_INDEX_TABLE_NUM_COLS 5</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/** DELETED_TABLE(doc_id BIGINT UNSIGNED) */</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a38c0a72c68fbe8f31cb697a22df5560e">  129</a></span>&#160;<span class="preprocessor">#define FTS_DELETED_TABLE_COL_LEN 8</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">/** CONFIG_TABLE(key CHAR(50), value CHAR(200)) */</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ad8c532484170e775a15cd679637bdec2">  131</a></span>&#160;<span class="preprocessor">#define FTS_CONFIG_TABLE_KEY_COL_LEN 50</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a55fda86d69b54250accbf22f0731e41c">  132</a></span>&#160;<span class="preprocessor">#define FTS_CONFIG_TABLE_VALUE_COL_LEN 200</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a3c198b92bd06dc6715930e7499877f39">  134</a></span>&#160;<span class="preprocessor">#define FTS_INDEX_WORD_LEN FTS_MAX_WORD_LEN</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ae195210d525cdc0ac112b1501c634487">  135</a></span>&#160;<span class="preprocessor">#define FTS_INDEX_FIRST_DOC_ID_LEN 8</span></div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a87425c7a84087589be8dd30d639fff27">  136</a></span>&#160;<span class="preprocessor">#define FTS_INDEX_LAST_DOC_ID_LEN 8</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aeb1f538ff2fd678c40e0e2db83b5eaba">  137</a></span>&#160;<span class="preprocessor">#define FTS_INDEX_DOC_COUNT_LEN 4</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">/* BLOB COLUMN, 0 means VARIABLE SIZE */</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aaceeaf83f98f808682c13c5e7d88a79d">  139</a></span>&#160;<span class="preprocessor">#define FTS_INDEX_ILIST_LEN 0</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">/* Maximum nested expression in fulltext binary search string */</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a1102110890a232be3e46ff69d732240a">  141</a></span>&#160;<span class="preprocessor">#define FTS_MAX_NESTED_EXP 31</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#aabafa9bd8eb12678db42b15c0c110e2e">FTS_PREFIX</a>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#aa16c38d9b2f67282a31ef07e7fcb7cce">FTS_SUFFIX_BEING_DELETED</a>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#a2b5cba5b66ad8edd6df8811887a77e1e">FTS_SUFFIX_BEING_DELETED_CACHE</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#a41cf40984aa74cfe055e93f3159683c3">FTS_SUFFIX_CONFIG</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#aefb2518700f5a8edbbdac0415a791e5e">FTS_SUFFIX_DELETED</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#af509a0af164b5fc7326653f4eb9c2b1e">FTS_SUFFIX_DELETED_CACHE</a>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#ad160279a5d90642c1b3e382d754feab6">FTS_PREFIX_5_7</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#a0241413c2481273fdc69da0d1b0d1752">FTS_SUFFIX_CONFIG_5_7</a>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">/** Variable specifying the FTS parallel sort degree */</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keyword">extern</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="fts0fts_8h.html#a8a8b74a88f03afff192835462a225fa6">fts_sort_pll_degree</a>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">/** Variable specifying the number of word to optimize for each optimize table</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">call */</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">extern</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="fts0fts_8h.html#aea590c3216a103482d8e6c8867cc1c79">fts_num_word_optimize</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">/** Variable specifying whether we do additional FTS diagnostic printout</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">in the log */</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="fts0fts_8h.html#aa27da593ca22ff9447f1889662c99dcd">fts_enable_diag_print</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">/** FTS rank type, which will be between 0 .. 1 inclusive */</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aee2e5f8ecbfbc7a54f2bd83e21d51ef4">  165</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="fts0fts_8h.html#aee2e5f8ecbfbc7a54f2bd83e21d51ef4">fts_rank_t</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">/** Structure to manage FTS AUX table name and MDL during its drop */</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="structaux__name__vec__t.html">  168</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structaux__name__vec__t.html">aux_name_vec_t</a> {<span class="comment"></span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">  /** AUX table name */</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="structaux__name__vec__t.html#a8cdd959d5f275febd9f21332879dc0e7">  170</a></span>&#160;  std::vector&lt;char *&gt; <a class="code" href="structaux__name__vec__t.html#a8cdd959d5f275febd9f21332879dc0e7">aux_name</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;};</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">/** Type of a row during a transaction. FTS_NOTHING means the row can be</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">forgotten from the FTS system&#39;s POV, FTS_INVALID is an internal value used</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">to mark invalid states.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">NOTE: Do not change the order or value of these, fts_trx_row_get_new_state</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">depends on them being exactly as they are. */</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9">  179</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9">fts_row_state</a> {</div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9af3c32cd5318441a04304d5ed353509d7">  180</a></span>&#160;  <a class="code" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9af3c32cd5318441a04304d5ed353509d7">FTS_INSERT</a> = 0,</div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9aa9af396e2aa7273b8ec0a00b82e5f8c5">  181</a></span>&#160;  <a class="code" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9aa9af396e2aa7273b8ec0a00b82e5f8c5">FTS_MODIFY</a>,</div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9a0f4e0cdbf69b30c2daf28e1f94736fd3">  182</a></span>&#160;  <a class="code" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9a0f4e0cdbf69b30c2daf28e1f94736fd3">FTS_DELETE</a>,</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9ab41850376e5826a29ccab94e7bccae87">  183</a></span>&#160;  <a class="code" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9ab41850376e5826a29ccab94e7bccae87">FTS_NOTHING</a>,</div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9a6c74a88bb3520f741790cf2f57a8f417">  184</a></span>&#160;  <a class="code" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9a6c74a88bb3520f741790cf2f57a8f417">FTS_INVALID</a></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;};</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">/** The FTS table types. */</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044">  188</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044">fts_table_type_t</a> {</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044a21b87f6420941fde6f4450234170954b">  189</a></span>&#160;  <a class="code" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044a21b87f6420941fde6f4450234170954b">FTS_INDEX_TABLE</a>, <span class="comment">/*!&lt; FTS auxiliary table that is</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">                   specific to a particular FTS index</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">                   on a table */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044ad0fd9b9b5d01a52aa788a269cd74c444">  193</a></span>&#160;  <a class="code" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044ad0fd9b9b5d01a52aa788a269cd74c444">FTS_COMMON_TABLE</a>, <span class="comment">/*!&lt; FTS auxiliary table that is common</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">                    for all FTS index on a table */</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044ac45fb1f2435810945e5d67a62e92ff52">  196</a></span>&#160;  <a class="code" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044ac45fb1f2435810945e5d67a62e92ff52">FTS_OBSOLETED_TABLE</a> <span class="comment">/*!&lt; FTS obsoleted tables like DOC_ID,</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">                      ADDED, STOPWORDS */</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;};</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__doc__t.html">fts_doc_t</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__cache__t.html">fts_cache_t</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__token__t.html">fts_token_t</a>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__doc__ids__t.html">fts_doc_ids_t</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__index__cache__t.html">fts_index_cache_t</a>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/** Initialize the &quot;fts_table&quot; for internal query into FTS auxiliary</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">tables */</span></div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ac8a5edddfa4234dbdc11a94d94d870ee">  208</a></span>&#160;<span class="preprocessor">#define FTS_INIT_FTS_TABLE(fts_table, m_suffix, m_type, m_table) \</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">  do {                                                           \</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="preprocessor">    (fts_table)-&gt;suffix = m_suffix;                              \</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">    (fts_table)-&gt;type = m_type;                                  \</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">    (fts_table)-&gt;table_id = m_table-&gt;id;                         \</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">    (fts_table)-&gt;parent = m_table-&gt;name.m_name;                  \</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">    (fts_table)-&gt;table = m_table;                                \</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">  } while (0);</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ae0bdfe66fed00db5b3ad5300d5735204">  217</a></span>&#160;<span class="preprocessor">#define FTS_INIT_INDEX_TABLE(fts_table, m_suffix, m_type, m_index) \</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">  do {                                                             \</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">    (fts_table)-&gt;suffix = m_suffix;                                \</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">    (fts_table)-&gt;type = m_type;                                    \</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">    (fts_table)-&gt;table_id = m_index-&gt;table-&gt;id;                    \</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">    (fts_table)-&gt;parent = m_index-&gt;table-&gt;name.m_name;             \</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">    (fts_table)-&gt;table = m_index-&gt;table;                           \</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">    (fts_table)-&gt;index_id = m_index-&gt;id;                           \</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">  } while (0);</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">/** Information about changes in a single transaction affecting</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">the FTS system. */</span></div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="structfts__trx__t.html">  229</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__trx__t.html">fts_trx_t</a> {</div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="structfts__trx__t.html#ae46516fba16a9adc3d0f27ab2b4a65a1">  230</a></span>&#160;  <a class="code" href="structtrx__t.html">trx_t</a> *<a class="code" href="structfts__trx__t.html#ae46516fba16a9adc3d0f27ab2b4a65a1">trx</a>; <span class="comment">/*!&lt; InnoDB transaction */</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="structfts__trx__t.html#af85af66dea00a06730cec04e9791338a">  232</a></span>&#160;  <a class="code" href="structib__vector__t.html">ib_vector_t</a> *<a class="code" href="structfts__trx__t.html#af85af66dea00a06730cec04e9791338a">savepoints</a>; <span class="comment">/*!&lt; Active savepoints, must have at</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">                           least one element, the implied</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">                           savepoint */</span></div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="structfts__trx__t.html#a17232a937565cb907d67b1d10564b32f">  235</a></span>&#160;  <a class="code" href="structib__vector__t.html">ib_vector_t</a> *<a class="code" href="structfts__trx__t.html#a17232a937565cb907d67b1d10564b32f">last_stmt</a>;  <span class="comment">/*!&lt; last_stmt */</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="structfts__trx__t.html#a5d04d7eadb7e43ebe31da027a99c1b66">  237</a></span>&#160;  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structfts__trx__t.html#a5d04d7eadb7e43ebe31da027a99c1b66">heap</a>; <span class="comment">/*!&lt; heap */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;};</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/** Information required for transaction savepoint handling. */</span></div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="structfts__savepoint__t.html">  241</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__savepoint__t.html">fts_savepoint_t</a> {</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="structfts__savepoint__t.html#a52304c1cd676287820dc449ae5fa7e79">  242</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="structfts__savepoint__t.html#a52304c1cd676287820dc449ae5fa7e79">name</a>; <span class="comment">/*!&lt; First entry is always NULL, the</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">              default instance. Otherwise the name</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">              of the savepoint */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="structfts__savepoint__t.html#a442498686de9b9463aa77da74c3af7dc">  246</a></span>&#160;  <a class="code" href="structib__rbt__t.html">ib_rbt_t</a> *<a class="code" href="structfts__savepoint__t.html#a442498686de9b9463aa77da74c3af7dc">tables</a>; <span class="comment">/*!&lt; Modified FTS tables */</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;};</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/** Information about changed rows in a transaction for a single table. */</span></div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="structfts__trx__table__t.html">  250</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__trx__table__t.html">fts_trx_table_t</a> {</div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="structfts__trx__table__t.html#a26d558d2fec87455e0bef9d5b6083c52">  251</a></span>&#160;  <a class="code" href="structdict__table__t.html">dict_table_t</a> *<a class="code" href="structfts__trx__table__t.html#a26d558d2fec87455e0bef9d5b6083c52">table</a>; <span class="comment">/*!&lt; table */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="structfts__trx__table__t.html#a25d7feafb066431695749f3ae71abf99">  253</a></span>&#160;  <a class="code" href="structfts__trx__t.html">fts_trx_t</a> *<a class="code" href="structfts__trx__table__t.html#a25d7feafb066431695749f3ae71abf99">fts_trx</a>; <span class="comment">/*!&lt; link to parent */</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="structfts__trx__table__t.html#a1d918bd63994a9d56ae7c074854c6a87">  255</a></span>&#160;  <a class="code" href="structib__rbt__t.html">ib_rbt_t</a> *<a class="code" href="structfts__trx__table__t.html#a1d918bd63994a9d56ae7c074854c6a87">rows</a>; <span class="comment">/*!&lt; rows changed; indexed by doc-id,</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">                  cells are fts_trx_row_t* */</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="structfts__trx__table__t.html#af9abe33a2c43fad82b05f27fdd60704f">  258</a></span>&#160;  <a class="code" href="structfts__doc__ids__t.html">fts_doc_ids_t</a> *<a class="code" href="structfts__trx__table__t.html#af9abe33a2c43fad82b05f27fdd60704f">added_doc_ids</a>; <span class="comment">/*!&lt; list of added doc ids (NULL until</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">                                the first addition) */</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">  /*!&lt; for adding doc ids */</span></div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="structfts__trx__table__t.html#a285d52cc8180aa79fce88fa0e5537a75">  262</a></span>&#160;  <a class="code" href="structque__fork__t.html">que_t</a> *<a class="code" href="structfts__trx__table__t.html#a285d52cc8180aa79fce88fa0e5537a75">docs_added_graph</a>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;};</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/** Information about one changed row in a transaction. */</span></div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="structfts__trx__row__t.html">  266</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__trx__row__t.html">fts_trx_row_t</a> {</div><div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="structfts__trx__row__t.html#a0217f28f4bfd9b747b4313152f53eba1">  267</a></span>&#160;  <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> <a class="code" href="structfts__trx__row__t.html#a0217f28f4bfd9b747b4313152f53eba1">doc_id</a>; <span class="comment">/*!&lt; Id of the ins/upd/del document */</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="structfts__trx__row__t.html#a63e7174440a1dcf449ab357b58929171">  269</a></span>&#160;  <a class="code" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9">fts_row_state</a> <a class="code" href="structfts__trx__row__t.html#a63e7174440a1dcf449ab357b58929171">state</a>; <span class="comment">/*!&lt; state of the row */</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="structfts__trx__row__t.html#ae4fd76c871f4de1a8c997db8cf6308eb">  271</a></span>&#160;  <a class="code" href="structib__vector__t.html">ib_vector_t</a> *<a class="code" href="structfts__trx__row__t.html#ae4fd76c871f4de1a8c997db8cf6308eb">fts_indexes</a>; <span class="comment">/*!&lt; The indexes that are affected */</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;};</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">/** List of document ids that were added during a transaction. This</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">list is passed on to a background &#39;Add&#39; thread and OPTIMIZE, so it</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">needs its own memory heap. */</span></div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="structfts__doc__ids__t.html">  277</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__doc__ids__t.html">fts_doc_ids_t</a> {</div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structfts__doc__ids__t.html#a01297b8022bd157afc77ee970db49010">  278</a></span>&#160;  <a class="code" href="structib__vector__t.html">ib_vector_t</a> *<a class="code" href="structfts__doc__ids__t.html#a01297b8022bd157afc77ee970db49010">doc_ids</a>; <span class="comment">/*!&lt; document ids (each element is</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">                        of type doc_id_t). */</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="structfts__doc__ids__t.html#ad6e907ee3f2da5e0ed96021a0251d8f1">  281</a></span>&#160;  <a class="code" href="structib__alloc__t.html">ib_alloc_t</a> *<a class="code" href="structfts__doc__ids__t.html#ad6e907ee3f2da5e0ed96021a0251d8f1">self_heap</a>; <span class="comment">/*!&lt; Allocator used to create an</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">                         instance of this type and the</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">                         doc_ids vector */</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;};</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">// FIXME: Get rid of this if possible.</span><span class="comment"></span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">/** Since MySQL&#39;s character set support for Unicode is woefully inadequate</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">(it supports basic operations like isalpha etc. only for 8-bit characters),</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">we have to implement our own. We use UTF-16 without surrogate processing</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">as our in-memory format. This typedef is a single such character. */</span></div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#af4c5e3bd80d78c5656d4e646e7d0bae7">  291</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="fts0fts_8h.html#af4c5e3bd80d78c5656d4e646e7d0bae7">ib_uc_t</a>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">/** An UTF-16 ro UTF-8 string. */</span></div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="structfts__string__t.html">  294</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__string__t.html">fts_string_t</a> {</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="structfts__string__t.html#ac305966b0b98fff2c6c3b06d7150b741">  295</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structfts__string__t.html#ac305966b0b98fff2c6c3b06d7150b741">f_str</a>;    <span class="comment">/*!&lt; string, not necessary terminated in</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">                  any way */</span></div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="structfts__string__t.html#a66b2c7c56382e0bbeaa11906e033895c">  297</a></span>&#160;  ulint <a class="code" href="structfts__string__t.html#a66b2c7c56382e0bbeaa11906e033895c">f_len</a>;    <span class="comment">/*!&lt; Length of the string in bytes */</span></div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="structfts__string__t.html#a40f54627160c8bdbd8d9262d7550c9f9">  298</a></span>&#160;  ulint <a class="code" href="structfts__string__t.html#a40f54627160c8bdbd8d9262d7550c9f9">f_n_char</a>; <span class="comment">/*!&lt; Number of characters */</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;};</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/** Query ranked doc ids. */</span></div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="structfts__ranking__t.html">  302</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__ranking__t.html">fts_ranking_t</a> {</div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="structfts__ranking__t.html#a8372a07fc53c5b3de79cc17ce50fb2db">  303</a></span>&#160;  <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> <a class="code" href="structfts__ranking__t.html#a8372a07fc53c5b3de79cc17ce50fb2db">doc_id</a>; <span class="comment">/*!&lt; Document id */</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="structfts__ranking__t.html#a37202c8a2744f72f4534be685ca0941e">  305</a></span>&#160;  <a class="code" href="fts0fts_8h.html#aee2e5f8ecbfbc7a54f2bd83e21d51ef4">fts_rank_t</a> <a class="code" href="structfts__ranking__t.html#a37202c8a2744f72f4534be685ca0941e">rank</a>; <span class="comment">/*!&lt; Rank is between 0 .. 1 */</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="structfts__ranking__t.html#a5ad5308b97be5321109205efc3ca1aad">  307</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structfts__ranking__t.html#a5ad5308b97be5321109205efc3ca1aad">words</a>;     <span class="comment">/*!&lt; this contains the words</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">                   that were queried</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">                   and found in this document */</span></div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="structfts__ranking__t.html#a0495989a90017494d548527c4498a79d">  310</a></span>&#160;  ulint <a class="code" href="structfts__ranking__t.html#a0495989a90017494d548527c4498a79d">words_len</a>; <span class="comment">/*!&lt; words len */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;};</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">/** Query result. */</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="structfts__result__t.html">  314</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__result__t.html">fts_result_t</a> {</div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="structfts__result__t.html#ae6ef48436472e164592defb89d1ab2ff">  315</a></span>&#160;  <a class="code" href="structib__rbt__node__t.html">ib_rbt_node_t</a> *<a class="code" href="structfts__result__t.html#ae6ef48436472e164592defb89d1ab2ff">current</a>; <span class="comment">/*!&lt; Current element */</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="structfts__result__t.html#ad12a41274c8059dffbc5842064693e2e">  317</a></span>&#160;  <a class="code" href="structib__rbt__t.html">ib_rbt_t</a> *<a class="code" href="structfts__result__t.html#ad12a41274c8059dffbc5842064693e2e">rankings_by_id</a>;   <span class="comment">/*!&lt; RB tree of type fts_ranking_t</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">                              indexed by doc id */</span></div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="structfts__result__t.html#ae0aab92531626229073cdf7b1bf2bc8c">  319</a></span>&#160;  <a class="code" href="structib__rbt__t.html">ib_rbt_t</a> *<a class="code" href="structfts__result__t.html#ae0aab92531626229073cdf7b1bf2bc8c">rankings_by_rank</a>; <span class="comment">/*!&lt; RB tree of type fts_ranking_t</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">                             indexed by rank */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;};</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/** This is used to generate the FTS auxiliary table name, we need the</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">table id and the index id to generate the column specific FTS auxiliary</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">table name. */</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="structfts__table__t.html">  326</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__table__t.html">fts_table_t</a> {</div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="structfts__table__t.html#ad782c90cb2c2714c1e0c0fa3fc413344">  327</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structfts__table__t.html#ad782c90cb2c2714c1e0c0fa3fc413344">parent</a>; <span class="comment">/*!&lt; Parent table name, this is</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">                      required only for the database</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">                      name */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="structfts__table__t.html#a51d3f243c364decb90acd6c709477136">  331</a></span>&#160;  <a class="code" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044">fts_table_type_t</a> <a class="code" href="structfts__table__t.html#a51d3f243c364decb90acd6c709477136">type</a>; <span class="comment">/*!&lt; The auxiliary table type */</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="structfts__table__t.html#abe1bcd617c5f2143cf091c25ca928c18">  333</a></span>&#160;  <a class="code" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> <a class="code" href="structfts__table__t.html#abe1bcd617c5f2143cf091c25ca928c18">table_id</a>; <span class="comment">/*!&lt; The table id */</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="structfts__table__t.html#a14283694aa07e12fe3927a781a4aeae8">  335</a></span>&#160;  <a class="code" href="dict0types_8h.html#a00c394837dddc950522d91155514e7de">space_index_t</a> <a class="code" href="structfts__table__t.html#a14283694aa07e12fe3927a781a4aeae8">index_id</a>; <span class="comment">/*!&lt; The index id */</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="structfts__table__t.html#ad1c62180395d52af84002a060d25c3ae">  337</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structfts__table__t.html#ad1c62180395d52af84002a060d25c3ae">suffix</a>;        <span class="comment">/*!&lt; The suffix of the fts auxiliary</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">                             table name, can be NULL, not used</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">                             everywhere (yet) */</span></div><div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="structfts__table__t.html#aafd661db35efee039a75d6df3f4579fc">  340</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *<a class="code" href="structfts__table__t.html#aafd661db35efee039a75d6df3f4579fc">table</a>; <span class="comment">/*!&lt; Parent table */</span></div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="structfts__table__t.html#a267b90f7d29c6eea3d835b9db2f27a78">  341</a></span>&#160;  <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *<a class="code" href="structfts__table__t.html#a267b90f7d29c6eea3d835b9db2f27a78">charset</a>;     <span class="comment">/*!&lt; charset info if it is for FTS</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">                             index auxiliary table */</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;};</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07">  345</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07">fts_status</a> {</div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a006ed7d30704bc51f0b1d7f3ad0e3aa3">  346</a></span>&#160;  <a class="code" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a006ed7d30704bc51f0b1d7f3ad0e3aa3">BG_THREAD_STOP</a> = 1, <span class="comment">/*!&lt; TRUE if the FTS background thread</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">                      has finished reading the ADDED table,</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">                      meaning more items can be added to</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">                      the table. */</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a02dc2c11825185507667d190f317fa6d">  351</a></span>&#160;  <a class="code" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a02dc2c11825185507667d190f317fa6d">BG_THREAD_READY</a> = 2, <span class="comment">/*!&lt; TRUE if the FTS background thread</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">                       is ready */</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a3a3d0656dfd2376b345a43758e18f058">  354</a></span>&#160;  <a class="code" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a3a3d0656dfd2376b345a43758e18f058">ADD_THREAD_STARTED</a> = 4, <span class="comment">/*!&lt; TRUE if the FTS add thread</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">                          has started */</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a2fe85ef7d1467c31fd3a06dcfb60777e">  357</a></span>&#160;  <a class="code" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a2fe85ef7d1467c31fd3a06dcfb60777e">ADDED_TABLE_SYNCED</a> = 8, <span class="comment">/*!&lt; TRUE if the ADDED table record is</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">                          sync-ed after crash recovery */</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;};</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a473428a9d324fed9d2447a1a5da6ad41">  361</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07">fts_status</a> <a class="code" href="fts0fts_8h.html#a473428a9d324fed9d2447a1a5da6ad41">fts_status_t</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">/** The state of the FTS sub system. */</span></div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="classfts__t.html">  364</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfts__t.html">fts_t</a> {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">  /** fts_t constructor.</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">  @param[in]    table   table with FTS indexes</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">  @param[in,out]        heap    memory heap where &#39;this&#39; is stored */</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="classfts__t.html">fts_t</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">  /** fts_t destructor. */</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  ~<a class="code" href="classfts__t.html">fts_t</a>();</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">  /** Mutex protecting bg_threads* and fts_add_wq. */</span></div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classfts__t.html#a8b4bc51ea180ad50c0077deac51215ed">  375</a></span>&#160;  ib_mutex_t <a class="code" href="classfts__t.html#a8b4bc51ea180ad50c0077deac51215ed">bg_threads_mutex</a>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">  /** Number of background threads accessing this table. */</span></div><div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="classfts__t.html#a3a82a978d6de0c12fe9271cfbfac9ff5">  378</a></span>&#160;  ulint <a class="code" href="classfts__t.html#a3a82a978d6de0c12fe9271cfbfac9ff5">bg_threads</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">  /** Status bit regarding fts running state. TRUE if background</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">  threads running should stop themselves. */</span></div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="classfts__t.html#ad909b1e954712598494ab1d9b2c24957">  382</a></span>&#160;  ulint <a class="code" href="classfts__t.html#ad909b1e954712598494ab1d9b2c24957">fts_status</a>;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">  /** Work queue for scheduling jobs for the FTS &#39;Add&#39; thread, or NULL</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">  if the thread has not yet been created. Each work item is a</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">  fts_trx_doc_ids_t*. */</span></div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classfts__t.html#a93ba8a0a36c8a3f11824e6d89a18af48">  387</a></span>&#160;  <a class="code" href="structib__wqueue__t.html">ib_wqueue_t</a> *<a class="code" href="classfts__t.html#a93ba8a0a36c8a3f11824e6d89a18af48">add_wq</a>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">  /** FTS memory buffer for this table, or NULL if the table has no FTS</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">  index. */</span></div><div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="classfts__t.html#a31b450060297c8df9c3aa9727959aaec">  391</a></span>&#160;  <a class="code" href="structfts__cache__t.html">fts_cache_t</a> *<a class="code" href="classfts__t.html#a31b450060297c8df9c3aa9727959aaec">cache</a>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">  /** FTS doc id hidden column number in the CLUSTERED index. */</span></div><div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="classfts__t.html#a8e5a92a66bb7a4a0d787ea8242a34cf4">  394</a></span>&#160;  ulint <a class="code" href="classfts__t.html#a8e5a92a66bb7a4a0d787ea8242a34cf4">doc_col</a>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">  /** Vector of FTS indexes, this is mainly for caching purposes. */</span></div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classfts__t.html#afc118c175b3dfcf1e30290bb68f2284e">  397</a></span>&#160;  <a class="code" href="structib__vector__t.html">ib_vector_t</a> *<a class="code" href="classfts__t.html#afc118c175b3dfcf1e30290bb68f2284e">indexes</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">  /** Heap for fts_t allocation. */</span></div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="classfts__t.html#a4f3ab755949331ae6e024b581c866c88">  400</a></span>&#160;  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="classfts__t.html#a4f3ab755949331ae6e024b581c866c88">fts_heap</a>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;};</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__stopword__t.html">fts_stopword_t</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">/** status bits for fts_stopword_t status field. */</span></div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a50bd608cadb6ef0f515ccfd1d98833f9">  406</a></span>&#160;<span class="preprocessor">#define STOPWORD_NOT_INIT 0x1</span></div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a748aee496eafe78876c553269cc2fa11">  407</a></span>&#160;<span class="preprocessor">#define STOPWORD_OFF 0x2</span></div><div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#ad9971bcfa9bc69c38c00bc48b4387133">  408</a></span>&#160;<span class="preprocessor">#define STOPWORD_FROM_DEFAULT 0x4</span></div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#a94afb72e6a85d1e827cc114803bc02a9">  409</a></span>&#160;<span class="preprocessor">#define STOPWORD_USER_TABLE 0x8</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#a33b9ef316e6aa2a65ea570164dce27e7">fts_default_stopword</a>[];</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">/** Variable specifying the maximum FTS cache size for each table */</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="keyword">extern</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="fts0fts_8h.html#a57c325e3bddce58a3d4014e7f05de44b">fts_max_cache_size</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">/** Variable specifying the total memory allocated for FTS cache */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keyword">extern</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="fts0fts_8h.html#ae3f9a2d9b14145c3a8bb08a5a4bafad8">fts_max_total_cache_size</a>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">/** Variable specifying the FTS result cache limit for each query */</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="keyword">extern</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="fts0fts_8h.html#a2f8e2bec431d214b2d13fd33eba8f92b">fts_result_cache_limit</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">/** Variable specifying the maximum FTS max token size */</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="keyword">extern</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="fts0fts_8h.html#a6726b95b9b7d05875c9946ece1720227">fts_max_token_size</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/** Variable specifying the minimum FTS max token size */</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="keyword">extern</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="fts0fts_8h.html#aba2a98943f78d743d90a9ae8dbaca69f">fts_min_token_size</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">/** Whether the total memory used for FTS cache is exhausted, and we will</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">need a sync to free some memory */</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="fts0fts_8h.html#a9f74fec07c64f19a16c589c1f6326ca0">fts_need_sync</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">/** Variable specifying the table that has Fulltext index to display its</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">content through information schema table */</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#a3eb893387d1f24b05af4fdeb2baa3462">fts_internal_tbl_name</a>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="fts0fts_8h.html#aeb81ea50eb8d45963686bb2a141b6841">  436</a></span>&#160;<span class="preprocessor">#define fts_que_graph_free(graph) \</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">  do {                            \</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">    que_graph_free(graph);        \</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">/** Create a FTS cache. */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<a class="code" href="structfts__cache__t.html">fts_cache_t</a> *<a class="code" href="fts0fts_8h.html#a221a2f9e57b7a160589ecf4306c74291">fts_cache_create</a>(</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; table owns the FTS cache */</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/** Create a FTS index cache.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"> @return Index Cache */</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<a class="code" href="structfts__index__cache__t.html">fts_index_cache_t</a> *<a class="code" href="fts0fts_8h.html#acbb3e1d2f25f94e0cfccd8db3d0f1fe0">fts_cache_index_cache_create</a>(</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="structdict__table__t.html">dict_table_t</a> *table,  <span class="comment">/*!&lt; in: table with FTS index */</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>); <span class="comment">/*!&lt; in: FTS index */</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/** Remove a FTS index cache</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">@param[in]      table   table with FTS index</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">@param[in]      index   FTS index */</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a48c80a6e074c8fd6620c322a3113662b">fts_cache_index_cache_remove</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">/** Get the next available document id. This function creates a new</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"> transaction to generate the document id.</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"> @return DB_SUCCESS if OK */</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a3642a0a0b1ff644638499ee3de688b10">fts_get_next_doc_id</a>(<span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="comment">/*!&lt; in: table */</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                            <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> *doc_id); <span class="comment">/*!&lt; out: new document id */</span><span class="comment"></span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">/** Update the next and last Doc ID in the CONFIG table to be the input</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"> &quot;doc_id&quot; value (+ 1). We would do so after each FTS index build or</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"> table truncate */</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a4e7732c602ff55fec117889e2a56ddc5">fts_update_next_doc_id</a>(</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="structtrx__t.html">trx_t</a> *trx,                <span class="comment">/*!&lt; in/out: transaction */</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="comment">/*!&lt; in: table */</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacerules__table__service.html#a58d8b2e690d4fb60a8d9557c8a4b5cd1">table_name</a>,    <span class="comment">/*!&lt; in: table name, or NULL */</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> doc_id);          <span class="comment">/*!&lt; in: DOC ID to set */</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">/** Create a new document id.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">@param[in]      table  Row is of this table.</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">@param[in,out]  row    Add doc id value to this row. This is the current row</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">that is being inserted.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">@param[in]      heap</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">@return DB_SUCCESS if all went well else error */</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a118577aab5eb80a7b95e61b23399a315">fts_create_doc_id</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <a class="code" href="structdtuple__t.html">dtuple_t</a> *row, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structfts__stopword__t.html#ae3ee42adc1ebd12d954c63f9d14e8714">heap</a>);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">/** Create a new fts_doc_ids_t.</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"> @return new fts_doc_ids_t. */</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<a class="code" href="structfts__doc__ids__t.html">fts_doc_ids_t</a> *<a class="code" href="fts0fts_8h.html#a21b291c0f49fa2c56b231749ef298cf3">fts_doc_ids_create</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">/** Free a fts_doc_ids_t. */</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a6c691dbc42620cb2152c29a2f1bf6b78">fts_doc_ids_free</a>(<a class="code" href="structfts__doc__ids__t.html">fts_doc_ids_t</a> *doc_ids); <span class="comment">/*!&lt; in: doc_ids to free */</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">/** Notify the FTS system about an operation on an FTS-indexed table.</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">@param[in] trx Innodb transaction</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">@param[in] table Table</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">@param[in] doc_id Doc id</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">@param[in] state State of the row</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">@param[in] fts_indexes Fts indexes affected (null=all) */</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#af99b12f79ac64311db98cbee223f68c5">fts_trx_add_op</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> doc_id,</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    <a class="code" href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9">fts_row_state</a> state, <a class="code" href="structib__vector__t.html">ib_vector_t</a> *fts_indexes);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">/** Free an FTS trx. */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a499f19a5cf269bd24a964bf487eceef9">fts_trx_free</a>(<a class="code" href="structfts__trx__t.html">fts_trx_t</a> *fts_trx); <span class="comment">/*!&lt; in, own: FTS trx */</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">/** Check if common tables already exist</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">@param[in]      table   table with fts index</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">@return true on success, false on failure */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fts0fts_8h.html#a3df321fe54dc77f80db8cab275dfc8fe">fts_check_common_tables_exist</a>(<span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/** Creates the common auxiliary tables needed for supporting an FTS index</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">on the given table. row_mysql_lock_data_dictionary must have been called</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">before this.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">The following tables are created.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">CREATE TABLE $FTS_PREFIX_DELETED</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">        (doc_id BIGINT UNSIGNED, UNIQUE CLUSTERED INDEX on doc_id)</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">CREATE TABLE $FTS_PREFIX_DELETED_CACHE</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">        (doc_id BIGINT UNSIGNED, UNIQUE CLUSTERED INDEX on doc_id)</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">CREATE TABLE $FTS_PREFIX_BEING_DELETED</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">        (doc_id BIGINT UNSIGNED, UNIQUE CLUSTERED INDEX on doc_id)</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">CREATE TABLE $FTS_PREFIX_BEING_DELETED_CACHE</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">        (doc_id BIGINT UNSIGNED, UNIQUE CLUSTERED INDEX on doc_id)</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">CREATE TABLE $FTS_PREFIX_CONFIG</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">        (key CHAR(50), value CHAR(200), UNIQUE CLUSTERED INDEX on key)</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">@param[in,out]  trx                     transaction</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">@param[in]      table                   table with FTS index</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">@param[in]      name                    table name normalized</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">@param[in]      skip_doc_id_index       Skip index on doc id</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">@return DB_SUCCESS if succeed */</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#aacf07b4f327cce0ae20bbead4417f904">fts_create_common_tables</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table,</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>, <span class="keywordtype">bool</span> skip_doc_id_index)</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">/** Creates the column specific ancillary tables needed for supporting an</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">FTS index on the given table. row_mysql_lock_data_dictionary must have</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">been called before this.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">All FTS AUX Index tables have the following schema.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">CREAT TABLE $FTS_PREFIX_INDEX_[1-6](</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">        word            VARCHAR(FTS_MAX_WORD_LEN),</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">        first_doc_id    INT NOT NULL,</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">        last_doc_id     UNSIGNED NOT NULL,</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">        doc_count       UNSIGNED INT NOT NULL,</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">        ilist           VARBINARY NOT NULL,</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">        UNIQUE CLUSTERED INDEX ON (word, first_doc_id))</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">@param[in,out]  trx     transaction</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">@param[in]      index   index instance</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a09dc9224a6121337f1093149123710c6">fts_create_index_tables</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">/** Create auxiliary index tables for an FTS index.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">@param[in,out]  trx             transaction</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">@param[in]      index           the index instance</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">@param[in]      table_name      table name</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">@param[in]      table_id        the table id</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a862b2ce1333444e27bbda6d94cb94655">fts_create_index_tables_low</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacerules__table__service.html#a58d8b2e690d4fb60a8d9557c8a4b5cd1">table_name</a>, <a class="code" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> table_id)</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">/** Add the FTS document id hidden column.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">@param[in,out] table Table with FTS index</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">@param[in] heap Temporary memory heap, or NULL */</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a29aa50975af4e1b2c898db58c73b4e9a">fts_add_doc_id_column</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structfts__stopword__t.html#ae3ee42adc1ebd12d954c63f9d14e8714">heap</a>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">/** Drops the ancillary tables needed for supporting an FTS index on a</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">given table. row_mysql_lock_data_dictionary must have been called before</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">this.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">@param[in,out]  trx     transaction</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">@param[in]      table   table has the fts index</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">@param[in,out]  aux_vec fts aux table name vector</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a99bb419fa99bc1bdfdd49d8e9ff55d7d">fts_drop_tables</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__table__t.html">dict_table_t</a> *table,</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                        <a class="code" href="structaux__name__vec__t.html">aux_name_vec_t</a> *aux_vec);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">/** Lock all FTS AUX tables (for dropping table)</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">@param[in]      thd     thread locking the AUX table</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">@param[in]      table   table has the fts index</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#aceb40b1d995f6fdfb46ae00223a4d3c9">fts_lock_all_aux_tables</a>(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">/** Drop FTS AUX table DD table objects in vector</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">@param[in]      aux_vec         aux table name vector</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">@param[in]      file_per_table  whether file per table</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">@return true on success, false on failure. */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fts0fts_8h.html#a3c805c9176a796cf78c95b501b4d0cd6">fts_drop_dd_tables</a>(<span class="keyword">const</span> <a class="code" href="structaux__name__vec__t.html">aux_name_vec_t</a> *aux_vec, <span class="keywordtype">bool</span> file_per_table);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">/** Free FTS AUX table names in vector</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">@param[in]      aux_vec         aux table name vector</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a59fe32367f8d6d6b6cdafcb768669e4c">fts_free_aux_names</a>(<a class="code" href="structaux__name__vec__t.html">aux_name_vec_t</a> *aux_vec);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">/** The given transaction is about to be committed; do whatever is necessary</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"> from the FTS system&#39;s POV.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"> @return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#ad261622a30e1c4b7e058c88676e718e0">fts_commit</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx) <span class="comment">/*!&lt; in: transaction */</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">/** FTS Query entry point.</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">@param[in]      trx             transaction</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">@param[in]      index           fts index to search</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">@param[in]      flags           FTS search mode</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">@param[in]      query_str       FTS query</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">@param[in]      query_len       FTS query string len in bytes</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">@param[in,out]  result          result doc ids</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">@param[in]      limit           limit value</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">@return DB_SUCCESS if successful otherwise error code */</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a3bf82a13ded5cc254d6dd38cf1a2d877">fts_query</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>,</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                  <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *query_str, ulint query_len, <a class="code" href="structfts__result__t.html">fts_result_t</a> **<a class="code" href="structresult.html">result</a>,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> limit) MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">/** Retrieve the FTS Relevance Ranking result for doc with doc_id</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment"> @return the relevance ranking value. */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="keywordtype">float</span> <a class="code" href="fts0fts_8h.html#a131af06538b7764dcf2ddcaac79b2f86">fts_retrieve_ranking</a>(</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="structfts__result__t.html">fts_result_t</a> *<a class="code" href="structresult.html">result</a>, <span class="comment">/*!&lt; in: FTS result structure */</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> doc_id);     <span class="comment">/*!&lt; in: the interested document</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">                          doc_id */</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">/** FTS Query sort result, returned by fts_query() on fts_ranking_t::rank. */</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a1528b8bcb29a75ce08a20b64b71c8c88">fts_query_sort_result_on_rank</a>(<a class="code" href="structfts__result__t.html">fts_result_t</a> *<a class="code" href="structresult.html">result</a>); <span class="comment">/*!&lt; out: result</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">                                                          instance to sort.*/</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/** FTS Query free result, returned by fts_query(). */</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#af00b41a8c897e0eeca2ff2b3f8cfdc50">fts_query_free_result</a>(<a class="code" href="structfts__result__t.html">fts_result_t</a> *<a class="code" href="structresult.html">result</a>); <span class="comment">/*!&lt; in: result instance</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">                                                  to free.*/</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">/** Extract the doc id from the FTS hidden column. */</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> <a class="code" href="fts0fts_8h.html#a8f1368eced1aae561c60c66463e81590">fts_get_doc_id_from_row</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="comment">/*!&lt; in: table */</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                 <a class="code" href="structdtuple__t.html">dtuple_t</a> *row); <span class="comment">/*!&lt; in: row whose FTS doc id</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">                                                 we want to extract.*/</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">/** Extract the doc id from the record that belongs to index.</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">@param[in]      table   table</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">@param[in]      rec     record contains FTS_DOC_ID</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">@param[in]      index   index of rec</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">@param[in]      heap    heap memory</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">@return doc id that was extracted from rec */</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> <a class="code" href="fts0fts_8h.html#a9ad80c8507d79414de4fcdaf8d7ea9b5">fts_get_doc_id_from_rec</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structfts__stopword__t.html#ae3ee42adc1ebd12d954c63f9d14e8714">heap</a>);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">/** Add new fts doc id to the update vector.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">@param[in]      table           the table that contains the FTS index.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">@param[in,out]  ufield          the fts doc id field in the update vector.</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">                                No new memory is allocated for this in this</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">                                function.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">@param[in,out]  next_doc_id     the fts doc id that has been added to the</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">                                update vector.  If 0, a new fts doc id is</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">                                automatically generated.  The memory provided</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">                                for this argument will be used by the update</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">                                vector. Ensure that the life time of this</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">                                memory matches that of the update vector.</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">@return the fts doc id used in the update vector */</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> <a class="code" href="fts0fts_8h.html#a2bfac35f044e649536a29fd1fae697e2">fts_update_doc_id</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <a class="code" href="structupd__field__t.html">upd_field_t</a> *ufield,</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                           <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> *next_doc_id);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">/** FTS initialize. */</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a1aeaee5f4b63a4d376f19c8bf643d1c5">fts_startup</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="preprocessor">#if 0  // TODO: Enable this in WL#6608</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">/******************************************************************/</span><span class="comment">/**</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">Signal FTS threads to initiate shutdown. */</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;fts_start_shutdown(</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <a class="code" href="structdict__table__t.html">dict_table_t</a>*   table,                  <span class="comment">/*!&lt; in: table with FTS</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">                                                indexes */</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="classfts__t.html">fts_t</a>*          fts);                   <span class="comment">/*!&lt; in: fts instance to</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">                                                shutdown */</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">/******************************************************************/</span><span class="comment">/**</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">Wait for FTS threads to shutdown. */</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;fts_shutdown(</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <a class="code" href="structdict__table__t.html">dict_table_t</a>*   table,                  <span class="comment">/*!&lt; in: table with FTS</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">                                                indexes */</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <a class="code" href="classfts__t.html">fts_t</a>*          fts);                   <span class="comment">/*!&lt; in: fts instance to</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">                                                shutdown */</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">/** Create an instance of fts_t.</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"> @return instance of fts_t */</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<a class="code" href="classfts__t.html">fts_t</a> *<a class="code" href="fts0fts_8h.html#a6eaa3140bbbe6c97a4ab0abef5501eba">fts_create</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; out: table with FTS</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">                                        indexes */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">/** Free the FTS resources. */</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#ae5138f9e015955f6de8179f7aba6f4fe">fts_free</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; in/out: table with</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">                                    FTS indexes */</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">/** Run OPTIMIZE on the given table.</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment"> @return DB_SUCCESS if all OK */</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a4fc948b546a25a7d00be9e9e8fd48eb3">fts_optimize_table</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; in: table to optimiza */</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">/** Startup the optimize thread and create the work queue. */</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a491b0fb210b0620f3c9a3f655b1e4be9">fts_optimize_init</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/** Since we do a horizontal split on the index table, we need to drop</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">all the split tables.</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">@param[in]      trx             transaction</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">@param[in]      index           fts index</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">@param[out]     aux_vec         dropped table names vector</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#aa30e6050ff1eaf4d7deb332914d9e468">fts_drop_index_tables</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                              <a class="code" href="structaux__name__vec__t.html">aux_name_vec_t</a> *aux_vec);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">/** Empty all common talbes.</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">@param[in,out]  trx     transaction</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">@param[in]      table   dict table</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">@return DB_SUCCESS or error code. */</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#ae3679e73d0e9befc4039eb03f56f921b">fts_empty_common_tables</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">/** Remove the table from the OPTIMIZER&#39;s list. We do wait for</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment"> acknowledgement from the consumer of the message. */</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#aac5f6042d1ee47dcc941828c2ed84368">fts_optimize_remove_table</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; in: table to remove */</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">/** Shutdown fts optimize thread. */</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a2730a91e3da686b48ddbee082de7f3f9">fts_optimize_shutdown</a>();</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">/** Send sync fts cache for the table.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">@param[in]      table   table to sync */</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a1bc15571f87f005549b6f5672ed00098">fts_optimize_request_sync_table</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">/** Take a FTS savepoint.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">@param[in] trx Transaction</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">@param[in] fts_trx Fts transaction</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">@param[in] name Savepoint name */</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a3f20089ac133e2ff0f228fb3ef352813">fts_savepoint_take</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structfts__trx__t.html">fts_trx_t</a> *fts_trx, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">/** Refresh last statement savepoint. */</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#ae4aeaee9e589d2e7cb36f9467f297c94">fts_savepoint_laststmt_refresh</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx); <span class="comment">/*!&lt; in: transaction */</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">/** Release the savepoint data identified by  name. */</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a613fe68835da014fd74af5cd2eb44f48">fts_savepoint_release</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx,        <span class="comment">/*!&lt; in: transaction */</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                           <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>); <span class="comment">/*!&lt; in: savepoint name */</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">/** Clear cache.</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">@param[in,out]  cache   fts cache */</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#adffd63e086001163473386322b93cb76">fts_cache_clear</a>(<a class="code" href="structfts__cache__t.html">fts_cache_t</a> *cache);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">/** Initialize things in cache. */</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a7955a68feeb414081daee62fe748d282">fts_cache_init</a>(<a class="code" href="structfts__cache__t.html">fts_cache_t</a> *cache); <span class="comment">/*!&lt; in: cache */</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">/** Rollback to and including savepoint indentified by name. */</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a3c755def2cb096a2d310ff174e55cf18">fts_savepoint_rollback</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx,        <span class="comment">/*!&lt; in: transaction */</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>); <span class="comment">/*!&lt; in: savepoint name */</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">/** Rollback to and including savepoint indentified by name. */</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#ae4ac84511ecdca212c72e45717ddade7">fts_savepoint_rollback_last_stmt</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx); <span class="comment">/*!&lt; in: transaction */</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">/* Get parent table name if it&#39;s a fts aux table</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">@param[in]      aux_table_name  aux table name</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">@param[in]      aux_table_len   aux table length</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">@return parent table name, or NULL */</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="fts0fts_8h.html#af4f1b49b67dc926603c7754f2d8bb41e">fts_get_parent_table_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *aux_table_name,</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                                ulint aux_table_len);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">/** Run SYNC on the table, i.e., write out data from the cache to the</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">FTS auxiliary INDEX table and clear the cache at the end.</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">@param[in,out]  table           fts table</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">@param[in]      unlock_cache    whether unlock cache when write node</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">@param[in]      wait            whether wait for existing sync to finish</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">@param[in]      has_dict        whether has dict operation lock</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">@return DB_SUCCESS on success, error code on failure. */</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a61dc85dfeef96fbd5abf3309e1cebdbf">fts_sync_table</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="keywordtype">bool</span> unlock_cache, <span class="keywordtype">bool</span> <a class="code" href="namespacenet_1_1impl_1_1socket.html#af0aef40a99065320448f6e90710198cc">wait</a>,</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                       <span class="keywordtype">bool</span> has_dict);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">/** Create an FTS index cache. */</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *<a class="code" href="fts0fts_8h.html#aebf2ffff3f364f45fbccb91a2c960bcf">fts_index_get_charset</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>); <span class="comment">/*!&lt; in: FTS index */</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">/** Get the initial Doc ID by consulting the CONFIG table</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"> @return initial Doc ID */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> <a class="code" href="fts0fts_8h.html#a61ba28450ef494623d959881f4f3971c">fts_init_doc_id</a>(<span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; in: table */</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">/** Compare two character string according to their charset.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">@param[in] cs Character set</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">@param[in] p1 Key</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">@param[in] p2 Node */</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="fts0fts_8h.html#a8d2f2e97171ab7bdd8659de69108daf6">innobase_fts_text_cmp</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *cs, <span class="keyword">const</span> <span class="keywordtype">void</span> *p1,</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">void</span> *p2);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">/** Makes all characters in a string lower case.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">@param[in] cs Character set</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">@param[in] src String to put in lower case</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">@param[in] src_len Input string length</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">@param[in] dst Buffer for result string</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">@param[in] dst_len Buffer size */</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">size_t</span> <a class="code" href="fts0fts_8h.html#a02079dacd7099d8c154784ca51660a07">innobase_fts_casedn_str</a>(<a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs, <span class="keywordtype">char</span> *src,</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                      <span class="keywordtype">size_t</span> src_len, <span class="keywordtype">char</span> *dst,</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                      <span class="keywordtype">size_t</span> dst_len);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">/** Compare two character string according to their charset.</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">@param[in] cs Character set</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">@param[in] p1 Key</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">@param[in] p2 Node */</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="fts0fts_8h.html#a70f8b039b8206509e39c463f4f32e864">innobase_fts_text_cmp_prefix</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *cs, <span class="keyword">const</span> <span class="keywordtype">void</span> *p1,</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                                        <span class="keyword">const</span> <span class="keywordtype">void</span> *p2);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">/** Get the next token from the given string and store it in *token. */</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="fts0fts_8h.html#aee1df01fb68706740733b819f59fcea1">innobase_mysql_fts_get_token</a>(</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *<a class="code" href="namespaceudf__ext_1_1consts.html#a6ddd3738c569a0bf58c9fab6a56731df">charset</a>, <span class="comment">/*!&lt; in: Character set */</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="http__auth__backend__plugin_8cc.html#aee70c8416f705726100824ba89f1e090">start</a>,     <span class="comment">/*!&lt; in: start of text */</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>,       <span class="comment">/*!&lt; in: one character past</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">                           end of text */</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="structfts__string__t.html">fts_string_t</a> *token);  <span class="comment">/*!&lt; out: token&#39;s text */</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">/** Drop dd table &amp; tablespace for fts aux table</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">@param[in]      name            table name</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">@param[in]      file_per_table  flag whether use file per table</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">@return true on success, false on failure. */</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fts0fts_8h.html#a704a38f42e634fe63a278f5e04c3e796">innobase_fts_drop_dd_table</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>, <span class="keywordtype">bool</span> file_per_table);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">/** Get token char size by charset</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"> @return the number of token char size */</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;ulint <a class="code" href="fts0fts_8h.html#af01620c4b4a5598fdb992ecb2c91fb0e">fts_get_token_size</a>(<span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs, <span class="comment">/*!&lt; in: Character set */</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span> *token,      <span class="comment">/*!&lt; in: token */</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                         ulint len);             <span class="comment">/*!&lt; in: token length */</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/** FULLTEXT tokenizer internal in MYSQL_FTPARSER_SIMPLE_MODE</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"> @return 0 if tokenize sucessfully */</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="keywordtype">int</span> <a class="code" href="fts0fts_8h.html#a0cae2d73fe2a8a2a92bb69f582d3962f">fts_tokenize_document_internal</a>(</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="structMYSQL__FTPARSER__PARAM.html">MYSQL_FTPARSER_PARAM</a> *param, <span class="comment">/*!&lt; in: parser parameter */</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordtype">char</span> *doc,                   <span class="comment">/*!&lt; in: document to tokenize */</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordtype">int</span> len);                    <span class="comment">/*!&lt; in: document length */</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">/** Fetch COUNT(*) from specified table.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment"> @return the number of rows in the table */</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;ulint <a class="code" href="fts0fts_8h.html#a9e0e71dc7acb692e79560853708c3260">fts_get_rows_count</a>(<a class="code" href="structfts__table__t.html">fts_table_t</a> *fts_table); <span class="comment">/*!&lt; in: fts table to read */</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">/** Get maximum Doc ID in a table if index &quot;FTS_DOC_ID_INDEX&quot; exists</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment"> @return max Doc ID or 0 if index &quot;FTS_DOC_ID_INDEX&quot; does not exist */</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> <a class="code" href="fts0fts_8h.html#a3e31d04b2c2b90809505492339a7cfa9">fts_get_max_doc_id</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; in: user table */</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">/** Check whether user supplied stopword table exists and is of</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment"> the right format.</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment"> @return the stopword column charset if qualifies */</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *<a class="code" href="fts0fts_8h.html#a1006145341371c7b0d70a4fca05a6125">fts_valid_stopword_table</a>(</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *stopword_table_name); <span class="comment">/*!&lt; in: Stopword table</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">                                      name */</span><span class="comment"></span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">/** This function loads specified stopword into FTS cache</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment"> @return true if success */</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;ibool <a class="code" href="fts0fts_8h.html#a78cff4105736098fa88b7f0d659e1eaa">fts_load_stopword</a>(</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table,          <span class="comment">/*!&lt; in: Table with FTS */</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="structtrx__t.html">trx_t</a> *trx,                         <span class="comment">/*!&lt; in: Transaction */</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *global_stopword_table,  <span class="comment">/*!&lt; in: Global stopword table</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">                                        name */</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *session_stopword_table, <span class="comment">/*!&lt; in: Session stopword table</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">                                        name */</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    ibool stopword_is_on,               <span class="comment">/*!&lt; in: Whether stopword</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">                                        option is turned on/off */</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    ibool <a class="code" href="rewriter__plugin_8cc.html#ad8134bdf32a5bc18ee04cf8db74f17f5">reload</a>);                      <span class="comment">/*!&lt; in: Whether it is during</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">                                        reload of FTS table */</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">/** Read the rows from the FTS index</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment"> @return DB_SUCCESS if OK */</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#aefdd19df9af8ceedda3b84f00bee46b3">fts_table_fetch_doc_ids</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx,              <span class="comment">/*!&lt; in: transaction */</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                                <a class="code" href="structfts__table__t.html">fts_table_t</a> *fts_table,  <span class="comment">/*!&lt; in: aux table */</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                                <a class="code" href="structfts__doc__ids__t.html">fts_doc_ids_t</a> *doc_ids); <span class="comment">/*!&lt; in: For collecting</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">                                                         doc ids */</span><span class="comment"></span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">/** This function brings FTS index in sync when FTS index is first</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"> used. There are documents that have not yet sync-ed to auxiliary</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment"> tables from last server abnormally shutdown, we will need to bring</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment"> such document into FTS cache before any further operations</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"> @return true if all OK */</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;ibool <a class="code" href="fts0fts_8h.html#a6540f52d757233e074575303f65ebbdf">fts_init_index</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table,   <span class="comment">/*!&lt; in: Table with FTS */</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                     ibool has_cache_lock); <span class="comment">/*!&lt; in: Whether we already</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">                                            have cache lock */</span><span class="comment"></span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">/** Add a newly create index in FTS cache */</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a3e77800a20e68f3265afa6cbc727c5f5">fts_add_index</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,  <span class="comment">/*!&lt; FTS index to be added */</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                   <a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; table */</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">/** Drop auxiliary tables related to an FTS index</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">@param[in]      table           Table where indexes are dropped</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">@param[in]      index           Index to be dropped</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">@param[in]      trx             Transaction for the drop</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">@param[in,out]  aux_vec         Aux table name vector</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">@return DB_SUCCESS or error number */</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a9d1c05a49eb36d1436ad8f20d1712b26">fts_drop_index</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structtrx__t.html">trx_t</a> *trx,</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                       <a class="code" href="structaux__name__vec__t.html">aux_name_vec_t</a> *aux_vec);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">/** Rename auxiliary tables for all fts index for a table</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"> @return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#aa4be19bcf710955a0aa52b4ac040c980">fts_rename_aux_tables</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table,  <span class="comment">/*!&lt; in: user Table */</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                              <span class="keyword">const</span> <span class="keywordtype">char</span> *new_name, <span class="comment">/*!&lt; in: new table name */</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                              <a class="code" href="structtrx__t.html">trx_t</a> *trx,           <span class="comment">/*!&lt; in: transaction */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                              <span class="keywordtype">bool</span> replay);         <span class="comment">/*!&lt; Whether in replay</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">                                                    stage */</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">/** Check indexes in the fts-&gt;indexes is also present in index cache and</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment"> table-&gt;indexes list</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment"> @return true if all indexes match */</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;ibool <a class="code" href="fts0fts_8h.html#af0bd0a73c2c279f2bf77aa043bc942ca">fts_check_cached_index</a>(</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <a class="code" href="structdict__table__t.html">dict_table_t</a> *table); <span class="comment">/*!&lt; in: Table where indexes are dropped */</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">/** Fetch the document from tuple, tokenize the text data and</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">insert the text data into fts auxiliary table and</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">its cache. Moreover this tuple fields doesn&#39;t contain any information</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">about externally stored field. This tuple contains data directly</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">converted from mysql.</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">@param[in]      ftt     FTS transaction table</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">@param[in]      doc_id  doc id</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">@param[in]      tuple   tuple from where data can be retrieved</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">                        and tuple should be arranged in table</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">                        schema order. */</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#a32e0be4725ae7e7895566af7576b1867">fts_add_doc_from_tuple</a>(<a class="code" href="structfts__trx__table__t.html">fts_trx_table_t</a> *ftt, <a class="code" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> doc_id,</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                            <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *tuple);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">/** Create an FTS trx.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">@param[in,out]  trx     InnoDB Transaction</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">@return FTS transaction. */</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<a class="code" href="structfts__trx__t.html">fts_trx_t</a> *<a class="code" href="fts0fts_8h.html#a0e5bc4c2a9b538d39e37f74c9effdb8a">fts_trx_create</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">/** For storing table info when checking for orphaned tables. */</span></div><div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="structfts__aux__table__t.html">  903</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfts__aux__table__t.html">fts_aux_table_t</a> {<span class="comment"></span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">  /** Table id */</span></div><div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="structfts__aux__table__t.html#aca188ae075e5a6e4029d08b54da8be6c">  905</a></span>&#160;  <a class="code" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> <a class="code" href="structfts__aux__table__t.html#aca188ae075e5a6e4029d08b54da8be6c">id</a>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">  /** Parent table id */</span></div><div class="line"><a name="l00908"></a><span class="lineno"><a class="line" href="structfts__aux__table__t.html#ad99ae98f863b4ae4be188308162eb999">  908</a></span>&#160;  <a class="code" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> <a class="code" href="structfts__aux__table__t.html#ad99ae98f863b4ae4be188308162eb999">parent_id</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">  /** Table FT index id */</span></div><div class="line"><a name="l00911"></a><span class="lineno"><a class="line" href="structfts__aux__table__t.html#a3781d4149a82113f3c80f8f0a85be14e">  911</a></span>&#160;  <a class="code" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> <a class="code" href="structfts__aux__table__t.html#a3781d4149a82113f3c80f8f0a85be14e">index_id</a>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">  /** Name of the table */</span></div><div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="structfts__aux__table__t.html#a963e01b9cd7243d3db93844c1a87ac62">  914</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="structfts__aux__table__t.html#a963e01b9cd7243d3db93844c1a87ac62">name</a>;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">  /** FTS table type */</span></div><div class="line"><a name="l00917"></a><span class="lineno"><a class="line" href="structfts__aux__table__t.html#a195b4a41c6f5be7b00e466aae5637c71">  917</a></span>&#160;  <a class="code" href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044">fts_table_type_t</a> <a class="code" href="structfts__aux__table__t.html#a195b4a41c6f5be7b00e466aae5637c71">type</a>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;};</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">/** Check if a table is an FTS auxiliary table name.</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">@param[out]     table   FTS table info</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">@param[in]      name    Table name</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">@param[in]      len     Length of table name</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">@return true if the name matches an auxiliary table name pattern */</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fts0fts_8h.html#afa74c1370e24cbda29dc3a12ecfe044c">fts_is_aux_table_name</a>(<a class="code" href="structfts__aux__table__t.html">fts_aux_table_t</a> *table, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>, ulint len);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">/** Freeze all auiliary tables to be not evictable if exist, with dict_mutex</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">held</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">@param[in]      table           InnoDB table object */</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#ae0f286dacfe7bea9de95bac2ee467039">fts_freeze_aux_tables</a>(<span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">/** Allow all the auxiliary tables of specified base table to be evictable</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">if they exist, if not exist just ignore</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">@param[in]      table           InnoDB table object</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">@param[in]      dict_locked     True if we have dict_sys mutex */</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fts0fts_8h.html#aa8b6ca283bef70ddf631d917f4a61a99">fts_detach_aux_tables</a>(<span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="keywordtype">bool</span> dict_locked);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">/** Update DD system table for auxiliary common tables for an FTS index.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">@param[in]      table           dict table instance</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">@return true on success, false on failure */</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fts0fts_8h.html#a9db3fb9c1e832384454f2a0517940124">fts_create_common_dd_tables</a>(<span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">/** Check if a table has FTS index needs to have its auxiliary index</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">tables&#39; metadata updated in DD</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">@param[in,out]  table           table to check</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a27b9138f7da1e71d6d6c66368b153aa0">fts_create_index_dd_tables</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">/** Upgrade FTS AUX Tables. The FTS common and aux tables are</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">renamed because they have table_id in their name. We move table_ids</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">by DICT_MAX_DD_TABLES offset. Aux tables are registered into DD</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">afer rename.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">@param[in]      table           InnoDB table object</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#a1c58c8fc36af7418d1295a36332f2749">fts_upgrade_aux_tables</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">/** Rename FTS AUX tablespace name from 8.0 format to 5.7 format.</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">This will be done on upgrade failure</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">@param[in]      table           parent table</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">@param[in]      rollback        rollback the rename from 8.0 to 5.7</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">                                if true, rename to 5.7 format</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">                                if false, mark the table as evictable</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">@return DB_SUCCESS on success, DB_ERROR on error */</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fts0fts_8h.html#ace4eca8a4149387e02d1568900963cf4">fts_upgrade_rename</a>(<span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="keywordtype">bool</span> <a class="code" href="sql__cmd__srs_8cc.html#ae1f3a7aed6d381dcd98b265913716fd4">rollback</a>);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="fts0fts_8h_html_a3e31d04b2c2b90809505492339a7cfa9"><div class="ttname"><a href="fts0fts_8h.html#a3e31d04b2c2b90809505492339a7cfa9">fts_get_max_doc_id</a></div><div class="ttdeci">doc_id_t fts_get_max_doc_id(dict_table_t *table)</div><div class="ttdoc">Get maximum Doc ID in a table if index &quot;FTS_DOC_ID_INDEX&quot; exists. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:3758</div></div>
<div class="ttc" id="fts0fts_8h_html_aea590c3216a103482d8e6c8867cc1c79"><div class="ttname"><a href="fts0fts_8h.html#aea590c3216a103482d8e6c8867cc1c79">fts_num_word_optimize</a></div><div class="ttdeci">ulong fts_num_word_optimize</div><div class="ttdoc">Variable specifying the number of word to optimize for each optimize table call. </div><div class="ttdef"><b>Definition:</b> fts0opt.cc:238</div></div>
<div class="ttc" id="rem0types_8h_html"><div class="ttname"><a href="rem0types_8h.html">rem0types.h</a></div><div class="ttdoc">Record manager global types. </div></div>
<div class="ttc" id="structresult_html"><div class="ttname"><a href="structresult.html">result</a></div><div class="ttdef"><b>Definition:</b> result.h:29</div></div>
<div class="ttc" id="fts0fts_8h_html_af01620c4b4a5598fdb992ecb2c91fb0e"><div class="ttname"><a href="fts0fts_8h.html#af01620c4b4a5598fdb992ecb2c91fb0e">fts_get_token_size</a></div><div class="ttdeci">ulint fts_get_token_size(const CHARSET_INFO *cs, const char *token, ulint len)</div><div class="ttdoc">Get token char size by charset. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:4662</div></div>
<div class="ttc" id="structfts__result__t_html_ad12a41274c8059dffbc5842064693e2e"><div class="ttname"><a href="structfts__result__t.html#ad12a41274c8059dffbc5842064693e2e">fts_result_t::rankings_by_id</a></div><div class="ttdeci">ib_rbt_t * rankings_by_id</div><div class="ttdoc">RB tree of type fts_ranking_t indexed by doc id. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:317</div></div>
<div class="ttc" id="my__inttypes_8h_html_a22152088aba12c47e916b7f0ffee0f51"><div class="ttname"><a href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a></div><div class="ttdeci">unsigned long long int ulonglong</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:55</div></div>
<div class="ttc" id="structfts__trx__table__t_html_af9abe33a2c43fad82b05f27fdd60704f"><div class="ttname"><a href="structfts__trx__table__t.html#af9abe33a2c43fad82b05f27fdd60704f">fts_trx_table_t::added_doc_ids</a></div><div class="ttdeci">fts_doc_ids_t * added_doc_ids</div><div class="ttdoc">list of added doc ids (NULL until the first addition) </div><div class="ttdef"><b>Definition:</b> fts0fts.h:258</div></div>
<div class="ttc" id="fts0fts_8h_html_a57c325e3bddce58a3d4014e7f05de44b"><div class="ttname"><a href="fts0fts_8h.html#a57c325e3bddce58a3d4014e7f05de44b">fts_max_cache_size</a></div><div class="ttdeci">ulong fts_max_cache_size</div><div class="ttdoc">Variable specifying the maximum FTS cache size for each table. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:73</div></div>
<div class="ttc" id="data0type_8h_html"><div class="ttname"><a href="data0type_8h.html">data0type.h</a></div><div class="ttdoc">Data types. </div></div>
<div class="ttc" id="ut0vec_8h_html"><div class="ttname"><a href="ut0vec_8h.html">ut0vec.h</a></div><div class="ttdoc">A vector of pointers to data items. </div></div>
<div class="ttc" id="structfts__table__t_html_aafd661db35efee039a75d6df3f4579fc"><div class="ttname"><a href="structfts__table__t.html#aafd661db35efee039a75d6df3f4579fc">fts_table_t::table</a></div><div class="ttdeci">const dict_table_t * table</div><div class="ttdoc">Parent table. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:340</div></div>
<div class="ttc" id="fts0fts_8h_html_a09dc9224a6121337f1093149123710c6"><div class="ttname"><a href="fts0fts_8h.html#a09dc9224a6121337f1093149123710c6">fts_create_index_tables</a></div><div class="ttdeci">dberr_t fts_create_index_tables(trx_t *trx, dict_index_t *index)</div><div class="ttdoc">Creates the column specific ancillary tables needed for supporting an FTS index on the given table...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2329</div></div>
<div class="ttc" id="fts0fts_8h_html_a59fe32367f8d6d6b6cdafcb768669e4c"><div class="ttname"><a href="fts0fts_8h.html#a59fe32367f8d6d6b6cdafcb768669e4c">fts_free_aux_names</a></div><div class="ttdeci">void fts_free_aux_names(aux_name_vec_t *aux_vec)</div><div class="ttdoc">Free FTS AUX table names in vector. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1255</div></div>
<div class="ttc" id="classfts__t_html_a93ba8a0a36c8a3f11824e6d89a18af48"><div class="ttname"><a href="classfts__t.html#a93ba8a0a36c8a3f11824e6d89a18af48">fts_t::add_wq</a></div><div class="ttdeci">ib_wqueue_t * add_wq</div><div class="ttdoc">Work queue for scheduling jobs for the FTS &amp;#39;Add&amp;#39; thread, or NULL if the thread has not yet been creat...</div><div class="ttdef"><b>Definition:</b> fts0fts.h:387</div></div>
<div class="ttc" id="fts0fts_8h_html_af42deb4d3354f68b4da0cad3c9f3f9e9aa9af396e2aa7273b8ec0a00b82e5f8c5"><div class="ttname"><a href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9aa9af396e2aa7273b8ec0a00b82e5f8c5">FTS_MODIFY</a></div><div class="ttdef"><b>Definition:</b> fts0fts.h:181</div></div>
<div class="ttc" id="fts0fts_8h_html_a9ad80c8507d79414de4fcdaf8d7ea9b5"><div class="ttname"><a href="fts0fts_8h.html#a9ad80c8507d79414de4fcdaf8d7ea9b5">fts_get_doc_id_from_rec</a></div><div class="ttdeci">doc_id_t fts_get_doc_id_from_rec(dict_table_t *table, const rec_t *rec, const dict_index_t *index, mem_heap_t *heap)</div><div class="ttdoc">Extract the doc id from the record that belongs to index. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5185</div></div>
<div class="ttc" id="fts0fts_8h_html_a6ea5ca7737f3760bcd22823b14a00044"><div class="ttname"><a href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044">fts_table_type_t</a></div><div class="ttdeci">fts_table_type_t</div><div class="ttdoc">The FTS table types. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:188</div></div>
<div class="ttc" id="namespaceudf__ext_1_1consts_html_a6ddd3738c569a0bf58c9fab6a56731df"><div class="ttname"><a href="namespaceudf__ext_1_1consts.html#a6ddd3738c569a0bf58c9fab6a56731df">udf_ext::consts::charset</a></div><div class="ttdeci">const std::string charset(&quot;charset&quot;)</div></div>
<div class="ttc" id="fts0fts_8h_html_aacf07b4f327cce0ae20bbead4417f904"><div class="ttname"><a href="fts0fts_8h.html#aacf07b4f327cce0ae20bbead4417f904">fts_create_common_tables</a></div><div class="ttdeci">dberr_t fts_create_common_tables(trx_t *trx, const dict_table_t *table, const char *name, bool skip_doc_id_index)</div><div class="ttdoc">Creates the common auxiliary tables needed for supporting an FTS index on the given table...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1911</div></div>
<div class="ttc" id="ha__prototypes_8h_html"><div class="ttname"><a href="ha__prototypes_8h.html">ha_prototypes.h</a></div><div class="ttdoc">Prototypes for global functions in ha_innodb.cc that are called by InnoDB C code. ...</div></div>
<div class="ttc" id="structfts__aux__table__t_html"><div class="ttname"><a href="structfts__aux__table__t.html">fts_aux_table_t</a></div><div class="ttdoc">For storing table info when checking for orphaned tables. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:903</div></div>
<div class="ttc" id="fts0fts_8h_html_af42deb4d3354f68b4da0cad3c9f3f9e9a0f4e0cdbf69b30c2daf28e1f94736fd3"><div class="ttname"><a href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9a0f4e0cdbf69b30c2daf28e1f94736fd3">FTS_DELETE</a></div><div class="ttdef"><b>Definition:</b> fts0fts.h:182</div></div>
<div class="ttc" id="fts0fts_8h_html_ae3f9a2d9b14145c3a8bb08a5a4bafad8"><div class="ttname"><a href="fts0fts_8h.html#ae3f9a2d9b14145c3a8bb08a5a4bafad8">fts_max_total_cache_size</a></div><div class="ttdeci">ulong fts_max_total_cache_size</div><div class="ttdoc">Variable specifying the total memory allocated for FTS cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:80</div></div>
<div class="ttc" id="structfts__result__t_html"><div class="ttname"><a href="structfts__result__t.html">fts_result_t</a></div><div class="ttdoc">Query result. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:314</div></div>
<div class="ttc" id="fts0fts_8h_html_a2b5cba5b66ad8edd6df8811887a77e1e"><div class="ttname"><a href="fts0fts_8h.html#a2b5cba5b66ad8edd6df8811887a77e1e">FTS_SUFFIX_BEING_DELETED_CACHE</a></div><div class="ttdeci">const char * FTS_SUFFIX_BEING_DELETED_CACHE</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:136</div></div>
<div class="ttc" id="fts0fts_8h_html_a9db3fb9c1e832384454f2a0517940124"><div class="ttname"><a href="fts0fts_8h.html#a9db3fb9c1e832384454f2a0517940124">fts_create_common_dd_tables</a></div><div class="ttdeci">bool fts_create_common_dd_tables(const dict_table_t *table)</div><div class="ttdoc">Update DD system table for auxiliary common tables for an FTS index. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2170</div></div>
<div class="ttc" id="structfts__table__t_html_a51d3f243c364decb90acd6c709477136"><div class="ttname"><a href="structfts__table__t.html#a51d3f243c364decb90acd6c709477136">fts_table_t::type</a></div><div class="ttdeci">fts_table_type_t type</div><div class="ttdoc">The auxiliary table type. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:331</div></div>
<div class="ttc" id="fts0fts_8h_html_a4fc948b546a25a7d00be9e9e8fd48eb3"><div class="ttname"><a href="fts0fts_8h.html#a4fc948b546a25a7d00be9e9e8fd48eb3">fts_optimize_table</a></div><div class="ttdeci">dberr_t fts_optimize_table(dict_table_t *table)</div><div class="ttdoc">Run OPTIMIZE on the given table. </div><div class="ttdef"><b>Definition:</b> fts0opt.cc:2316</div></div>
<div class="ttc" id="structtrx__t_html"><div class="ttname"><a href="structtrx__t.html">trx_t</a></div><div class="ttdef"><b>Definition:</b> trx0trx.h:833</div></div>
<div class="ttc" id="structfts__table__t_html_a14283694aa07e12fe3927a781a4aeae8"><div class="ttname"><a href="structfts__table__t.html#a14283694aa07e12fe3927a781a4aeae8">fts_table_t::index_id</a></div><div class="ttdeci">space_index_t index_id</div><div class="ttdoc">The index id. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:335</div></div>
<div class="ttc" id="fts0fts_8h_html_a8d2f2e97171ab7bdd8659de69108daf6"><div class="ttname"><a href="fts0fts_8h.html#a8d2f2e97171ab7bdd8659de69108daf6">innobase_fts_text_cmp</a></div><div class="ttdeci">int innobase_fts_text_cmp(const void *cs, const void *p1, const void *p2)</div><div class="ttdoc">Compare two character string according to their charset. </div><div class="ttdef"><b>Definition:</b> ha_innodb.cc:7223</div></div>
<div class="ttc" id="fts0fts_8h_html_a6eaa3140bbbe6c97a4ab0abef5501eba"><div class="ttname"><a href="fts0fts_8h.html#a6eaa3140bbbe6c97a4ab0abef5501eba">fts_create</a></div><div class="ttdeci">fts_t * fts_create(dict_table_t *table)</div><div class="ttdoc">Create an instance of fts_t. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5441</div></div>
<div class="ttc" id="fts0fts_8h_html_ae5138f9e015955f6de8179f7aba6f4fe"><div class="ttname"><a href="fts0fts_8h.html#ae5138f9e015955f6de8179f7aba6f4fe">fts_free</a></div><div class="ttdeci">void fts_free(dict_table_t *table)</div><div class="ttdoc">Free the FTS resources. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5456</div></div>
<div class="ttc" id="fts0fts_8h_html_ac95bd8f0d489d126740d93bccfc5ea07a02dc2c11825185507667d190f317fa6d"><div class="ttname"><a href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a02dc2c11825185507667d190f317fa6d">BG_THREAD_READY</a></div><div class="ttdoc">TRUE if the FTS background thread is ready. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:351</div></div>
<div class="ttc" id="structib__alloc__t_html"><div class="ttname"><a href="structib__alloc__t.html">ib_alloc_t</a></div><div class="ttdef"><b>Definition:</b> ut0vec.h:220</div></div>
<div class="ttc" id="structaux__name__vec__t_html_a8cdd959d5f275febd9f21332879dc0e7"><div class="ttname"><a href="structaux__name__vec__t.html#a8cdd959d5f275febd9f21332879dc0e7">aux_name_vec_t::aux_name</a></div><div class="ttdeci">std::vector&lt; char * &gt; aux_name</div><div class="ttdoc">AUX table name. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:170</div></div>
<div class="ttc" id="structfts__trx__table__t_html_a1d918bd63994a9d56ae7c074854c6a87"><div class="ttname"><a href="structfts__trx__table__t.html#a1d918bd63994a9d56ae7c074854c6a87">fts_trx_table_t::rows</a></div><div class="ttdeci">ib_rbt_t * rows</div><div class="ttdoc">rows changed; indexed by doc-id, cells are fts_trx_row_t* </div><div class="ttdef"><b>Definition:</b> fts0fts.h:255</div></div>
<div class="ttc" id="fts0fts_8h_html_a78cff4105736098fa88b7f0d659e1eaa"><div class="ttname"><a href="fts0fts_8h.html#a78cff4105736098fa88b7f0d659e1eaa">fts_load_stopword</a></div><div class="ttdeci">ibool fts_load_stopword(const dict_table_t *table, trx_t *trx, const char *global_stopword_table, const char *session_stopword_table, ibool stopword_is_on, ibool reload)</div><div class="ttdoc">This function loads specified stopword into FTS cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5932</div></div>
<div class="ttc" id="structfts__stopword__t_html_ae3ee42adc1ebd12d954c63f9d14e8714"><div class="ttname"><a href="structfts__stopword__t.html#ae3ee42adc1ebd12d954c63f9d14e8714">fts_stopword_t::heap</a></div><div class="ttdeci">ib_alloc_t * heap</div><div class="ttdoc">The memory allocator to use. </div><div class="ttdef"><b>Definition:</b> fts0types.h:106</div></div>
<div class="ttc" id="sql__cmd__srs_8cc_html_ae1f3a7aed6d381dcd98b265913716fd4"><div class="ttname"><a href="sql__cmd__srs_8cc.html#ae1f3a7aed6d381dcd98b265913716fd4">rollback</a></div><div class="ttdeci">static bool rollback(THD *thd)</div><div class="ttdoc">Abort the current statement and transaction. </div><div class="ttdef"><b>Definition:</b> sql_cmd_srs.cc:139</div></div>
<div class="ttc" id="structfts__table__t_html_ad782c90cb2c2714c1e0c0fa3fc413344"><div class="ttname"><a href="structfts__table__t.html#ad782c90cb2c2714c1e0c0fa3fc413344">fts_table_t::parent</a></div><div class="ttdeci">const char * parent</div><div class="ttdoc">Parent table name, this is required only for the database name. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:327</div></div>
<div class="ttc" id="structfts__trx__t_html"><div class="ttname"><a href="structfts__trx__t.html">fts_trx_t</a></div><div class="ttdoc">Information about changes in a single transaction affecting the FTS system. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:229</div></div>
<div class="ttc" id="structfts__result__t_html_ae0aab92531626229073cdf7b1bf2bc8c"><div class="ttname"><a href="structfts__result__t.html#ae0aab92531626229073cdf7b1bf2bc8c">fts_result_t::rankings_by_rank</a></div><div class="ttdeci">ib_rbt_t * rankings_by_rank</div><div class="ttdoc">RB tree of type fts_ranking_t indexed by rank. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:319</div></div>
<div class="ttc" id="structfts__doc__ids__t_html_a01297b8022bd157afc77ee970db49010"><div class="ttname"><a href="structfts__doc__ids__t.html#a01297b8022bd157afc77ee970db49010">fts_doc_ids_t::doc_ids</a></div><div class="ttdeci">ib_vector_t * doc_ids</div><div class="ttdoc">document ids (each element is of type doc_id_t). </div><div class="ttdef"><b>Definition:</b> fts0fts.h:278</div></div>
<div class="ttc" id="structfts__table__t_html_abe1bcd617c5f2143cf091c25ca928c18"><div class="ttname"><a href="structfts__table__t.html#abe1bcd617c5f2143cf091c25ca928c18">fts_table_t::table_id</a></div><div class="ttdeci">table_id_t table_id</div><div class="ttdoc">The table id. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:333</div></div>
<div class="ttc" id="fts0fts_8h_html_a118577aab5eb80a7b95e61b23399a315"><div class="ttname"><a href="fts0fts_8h.html#a118577aab5eb80a7b95e61b23399a315">fts_create_doc_id</a></div><div class="ttdeci">dberr_t fts_create_doc_id(dict_table_t *table, dtuple_t *row, mem_heap_t *heap)</div><div class="ttdoc">Create a new document id. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:3136</div></div>
<div class="ttc" id="data0types_8h_html"><div class="ttname"><a href="data0types_8h.html">data0types.h</a></div><div class="ttdoc">Some type definitions. </div></div>
<div class="ttc" id="structfts__savepoint__t_html_a442498686de9b9463aa77da74c3af7dc"><div class="ttname"><a href="structfts__savepoint__t.html#a442498686de9b9463aa77da74c3af7dc">fts_savepoint_t::tables</a></div><div class="ttdeci">ib_rbt_t * tables</div><div class="ttdoc">Modified FTS tables. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:246</div></div>
<div class="ttc" id="fts0fts_8h_html_a1528b8bcb29a75ce08a20b64b71c8c88"><div class="ttname"><a href="fts0fts_8h.html#a1528b8bcb29a75ce08a20b64b71c8c88">fts_query_sort_result_on_rank</a></div><div class="ttdeci">void fts_query_sort_result_on_rank(fts_result_t *result)</div><div class="ttdoc">FTS Query sort result, returned by fts_query() on fts_ranking_t::rank. </div><div class="ttdef"><b>Definition:</b> fts0que.cc:3844</div></div>
<div class="ttc" id="fts0fts_8h_html_a8a8b74a88f03afff192835462a225fa6"><div class="ttname"><a href="fts0fts_8h.html#a8a8b74a88f03afff192835462a225fa6">fts_sort_pll_degree</a></div><div class="ttdeci">ulong fts_sort_pll_degree</div><div class="ttdoc">Variable specifying the FTS parallel sort degree. </div><div class="ttdef"><b>Definition:</b> row0ftsort.cc:64</div></div>
<div class="ttc" id="structib__rbt__node__t_html"><div class="ttname"><a href="structib__rbt__node__t.html">ib_rbt_node_t</a></div><div class="ttdoc">Red black tree node. </div><div class="ttdef"><b>Definition:</b> ut0rbt.h:63</div></div>
<div class="ttc" id="fts0fts_8h_html_ae4ac84511ecdca212c72e45717ddade7"><div class="ttname"><a href="fts0fts_8h.html#ae4ac84511ecdca212c72e45717ddade7">fts_savepoint_rollback_last_stmt</a></div><div class="ttdeci">void fts_savepoint_rollback_last_stmt(trx_t *trx)</div><div class="ttdoc">Rollback to and including savepoint indentified by name. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5671</div></div>
<div class="ttc" id="plugin__ftparser_8h_html"><div class="ttname"><a href="plugin__ftparser_8h.html">plugin_ftparser.h</a></div></div>
<div class="ttc" id="structdict__table__t_html"><div class="ttname"><a href="structdict__table__t.html">dict_table_t</a></div><div class="ttdoc">Data structure for a database table. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:1532</div></div>
<div class="ttc" id="fts0fts_8h_html_aebf2ffff3f364f45fbccb91a2c960bcf"><div class="ttname"><a href="fts0fts_8h.html#aebf2ffff3f364f45fbccb91a2c960bcf">fts_index_get_charset</a></div><div class="ttdeci">CHARSET_INFO * fts_index_get_charset(dict_index_t *index)</div><div class="ttdoc">Create an FTS index cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:782</div></div>
<div class="ttc" id="fts0fts_8h_html_af00b41a8c897e0eeca2ff2b3f8cfdc50"><div class="ttname"><a href="fts0fts_8h.html#af00b41a8c897e0eeca2ff2b3f8cfdc50">fts_query_free_result</a></div><div class="ttdeci">void fts_query_free_result(fts_result_t *result)</div><div class="ttdoc">FTS Query free result, returned by fts_query(). </div><div class="ttdef"><b>Definition:</b> fts0que.cc:3825</div></div>
<div class="ttc" id="fts0fts_8h_html_aceb40b1d995f6fdfb46ae00223a4d3c9"><div class="ttname"><a href="fts0fts_8h.html#aceb40b1d995f6fdfb46ae00223a4d3c9">fts_lock_all_aux_tables</a></div><div class="ttdeci">dberr_t fts_lock_all_aux_tables(THD *thd, dict_table_t *table)</div><div class="ttdoc">Lock all FTS AUX tables (for dropping table) </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1740</div></div>
<div class="ttc" id="structfts__string__t_html"><div class="ttname"><a href="structfts__string__t.html">fts_string_t</a></div><div class="ttdoc">An UTF-16 ro UTF-8 string. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:294</div></div>
<div class="ttc" id="fts0fts_8h_html_a61dc85dfeef96fbd5abf3309e1cebdbf"><div class="ttname"><a href="fts0fts_8h.html#a61dc85dfeef96fbd5abf3309e1cebdbf">fts_sync_table</a></div><div class="ttdeci">dberr_t fts_sync_table(dict_table_t *table, bool unlock_cache, bool wait, bool has_dict)</div><div class="ttdoc">Run SYNC on the table, i.e., write out data from the cache to the FTS auxiliary INDEX table and clear...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:4458</div></div>
<div class="ttc" id="structfts__ranking__t_html_a0495989a90017494d548527c4498a79d"><div class="ttname"><a href="structfts__ranking__t.html#a0495989a90017494d548527c4498a79d">fts_ranking_t::words_len</a></div><div class="ttdeci">ulint words_len</div><div class="ttdoc">words len </div><div class="ttdef"><b>Definition:</b> fts0fts.h:310</div></div>
<div class="ttc" id="classfts__t_html_a8b4bc51ea180ad50c0077deac51215ed"><div class="ttname"><a href="classfts__t.html#a8b4bc51ea180ad50c0077deac51215ed">fts_t::bg_threads_mutex</a></div><div class="ttdeci">ib_mutex_t bg_threads_mutex</div><div class="ttdoc">Mutex protecting bg_threads* and fts_add_wq. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:375</div></div>
<div class="ttc" id="structfts__aux__table__t_html_a3781d4149a82113f3c80f8f0a85be14e"><div class="ttname"><a href="structfts__aux__table__t.html#a3781d4149a82113f3c80f8f0a85be14e">fts_aux_table_t::index_id</a></div><div class="ttdeci">table_id_t index_id</div><div class="ttdoc">Table FT index id. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:911</div></div>
<div class="ttc" id="structib__wqueue__t_html"><div class="ttname"><a href="structib__wqueue__t.html">ib_wqueue_t</a></div><div class="ttdef"><b>Definition:</b> ut0wqueue.cc:42</div></div>
<div class="ttc" id="fts0fts_8h_html_adffd63e086001163473386322b93cb76"><div class="ttname"><a href="fts0fts_8h.html#adffd63e086001163473386322b93cb76">fts_cache_clear</a></div><div class="ttdeci">void fts_cache_clear(fts_cache_t *cache)</div><div class="ttdoc">Clear cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:912</div></div>
<div class="ttc" id="fts0fts_8h_html_a32e0be4725ae7e7895566af7576b1867"><div class="ttname"><a href="fts0fts_8h.html#a32e0be4725ae7e7895566af7576b1867">fts_add_doc_from_tuple</a></div><div class="ttdeci">void fts_add_doc_from_tuple(fts_trx_table_t *ftt, doc_id_t doc_id, const dtuple_t *tuple)</div><div class="ttdoc">Fetch the document from tuple, tokenize the text data and insert the text data into fts auxiliary tab...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:3499</div></div>
<div class="ttc" id="fts0fts_8h_html_af42deb4d3354f68b4da0cad3c9f3f9e9ab41850376e5826a29ccab94e7bccae87"><div class="ttname"><a href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9ab41850376e5826a29ccab94e7bccae87">FTS_NOTHING</a></div><div class="ttdef"><b>Definition:</b> fts0fts.h:183</div></div>
<div class="ttc" id="fts0fts_8h_html_aee2e5f8ecbfbc7a54f2bd83e21d51ef4"><div class="ttname"><a href="fts0fts_8h.html#aee2e5f8ecbfbc7a54f2bd83e21d51ef4">fts_rank_t</a></div><div class="ttdeci">float fts_rank_t</div><div class="ttdoc">FTS rank type, which will be between 0 . </div><div class="ttdef"><b>Definition:</b> fts0fts.h:165</div></div>
<div class="ttc" id="structmem__block__info__t_html"><div class="ttname"><a href="structmem__block__info__t.html">mem_block_info_t</a></div><div class="ttdoc">The info structure stored at the beginning of a heap block. </div><div class="ttdef"><b>Definition:</b> mem0mem.h:349</div></div>
<div class="ttc" id="fts0fts_8h_html_a1aeaee5f4b63a4d376f19c8bf643d1c5"><div class="ttname"><a href="fts0fts_8h.html#a1aeaee5f4b63a4d376f19c8bf643d1c5">fts_startup</a></div><div class="ttdeci">void fts_startup(void)</div><div class="ttdoc">FTS initialize. </div></div>
<div class="ttc" id="fts0fts_8h_html_af99b12f79ac64311db98cbee223f68c5"><div class="ttname"><a href="fts0fts_8h.html#af99b12f79ac64311db98cbee223f68c5">fts_trx_add_op</a></div><div class="ttdeci">void fts_trx_add_op(trx_t *trx, dict_table_t *table, doc_id_t doc_id, fts_row_state state, ib_vector_t *fts_indexes)</div><div class="ttdoc">Notify the FTS system about an operation on an FTS-indexed table. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2637</div></div>
<div class="ttc" id="fts0fts_8h_html_ac95bd8f0d489d126740d93bccfc5ea07a3a3d0656dfd2376b345a43758e18f058"><div class="ttname"><a href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a3a3d0656dfd2376b345a43758e18f058">ADD_THREAD_STARTED</a></div><div class="ttdoc">TRUE if the FTS add thread has started. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:354</div></div>
<div class="ttc" id="ut0rbt_8h_html"><div class="ttname"><a href="ut0rbt_8h.html">ut0rbt.h</a></div><div class="ttdoc">Various utilities. </div></div>
<div class="ttc" id="fts0fts_8h_html_aa27da593ca22ff9447f1889662c99dcd"><div class="ttname"><a href="fts0fts_8h.html#aa27da593ca22ff9447f1889662c99dcd">fts_enable_diag_print</a></div><div class="ttdeci">bool fts_enable_diag_print</div><div class="ttdoc">Variable specifying whether we do additional FTS diagnostic printout in the log. </div><div class="ttdef"><b>Definition:</b> fts0opt.cc:241</div></div>
<div class="ttc" id="structfts__trx__t_html_a17232a937565cb907d67b1d10564b32f"><div class="ttname"><a href="structfts__trx__t.html#a17232a937565cb907d67b1d10564b32f">fts_trx_t::last_stmt</a></div><div class="ttdeci">ib_vector_t * last_stmt</div><div class="ttdoc">last_stmt </div><div class="ttdef"><b>Definition:</b> fts0fts.h:235</div></div>
<div class="ttc" id="fts0fts_8h_html_a70f8b039b8206509e39c463f4f32e864"><div class="ttname"><a href="fts0fts_8h.html#a70f8b039b8206509e39c463f4f32e864">innobase_fts_text_cmp_prefix</a></div><div class="ttdeci">int innobase_fts_text_cmp_prefix(const void *cs, const void *p1, const void *p2)</div><div class="ttdoc">Compare two character string according to their charset. </div><div class="ttdef"><b>Definition:</b> ha_innodb.cc:7299</div></div>
<div class="ttc" id="structque__fork__t_html"><div class="ttname"><a href="structque__fork__t.html">que_fork_t</a></div><div class="ttdef"><b>Definition:</b> que0que.h:310</div></div>
<div class="ttc" id="structfts__token__t_html"><div class="ttname"><a href="structfts__token__t.html">fts_token_t</a></div><div class="ttdoc">A token and its positions within a document. </div><div class="ttdef"><b>Definition:</b> fts0types.h:291</div></div>
<div class="ttc" id="que0types_8h_html"><div class="ttname"><a href="que0types_8h.html">que0types.h</a></div><div class="ttdoc">Query graph global types. </div></div>
<div class="ttc" id="structfts__doc__t_html"><div class="ttname"><a href="structfts__doc__t.html">fts_doc_t</a></div><div class="ttdoc">This type represents a single document. </div><div class="ttdef"><b>Definition:</b> fts0types.h:265</div></div>
<div class="ttc" id="structfts__savepoint__t_html_a52304c1cd676287820dc449ae5fa7e79"><div class="ttname"><a href="structfts__savepoint__t.html#a52304c1cd676287820dc449ae5fa7e79">fts_savepoint_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">First entry is always NULL, the default instance. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:242</div></div>
<div class="ttc" id="structupd__field__t_html"><div class="ttname"><a href="structupd__field__t.html">upd_field_t</a></div><div class="ttdef"><b>Definition:</b> row0upd.h:486</div></div>
<div class="ttc" id="structfts__trx__row__t_html_a0217f28f4bfd9b747b4313152f53eba1"><div class="ttname"><a href="structfts__trx__row__t.html#a0217f28f4bfd9b747b4313152f53eba1">fts_trx_row_t::doc_id</a></div><div class="ttdeci">doc_id_t doc_id</div><div class="ttdoc">Id of the ins/upd/del document. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:267</div></div>
<div class="ttc" id="fts0fts_8h_html_ac95bd8f0d489d126740d93bccfc5ea07"><div class="ttname"><a href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07">fts_status</a></div><div class="ttdeci">fts_status</div><div class="ttdef"><b>Definition:</b> fts0fts.h:345</div></div>
<div class="ttc" id="fts0fts_8h_html_a1006145341371c7b0d70a4fca05a6125"><div class="ttname"><a href="fts0fts_8h.html#a1006145341371c7b0d70a4fca05a6125">fts_valid_stopword_table</a></div><div class="ttdeci">CHARSET_INFO * fts_valid_stopword_table(const char *stopword_table_name)</div><div class="ttdoc">Check whether user supplied stopword table exists and is of the right format. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5871</div></div>
<div class="ttc" id="structfts__aux__table__t_html_a195b4a41c6f5be7b00e466aae5637c71"><div class="ttname"><a href="structfts__aux__table__t.html#a195b4a41c6f5be7b00e466aae5637c71">fts_aux_table_t::type</a></div><div class="ttdeci">fts_table_type_t type</div><div class="ttdoc">FTS table type. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:917</div></div>
<div class="ttc" id="structMYSQL__FTPARSER__PARAM_html"><div class="ttname"><a href="structMYSQL__FTPARSER__PARAM.html">MYSQL_FTPARSER_PARAM</a></div><div class="ttdef"><b>Definition:</b> plugin_ftparser.h:190</div></div>
<div class="ttc" id="fts0fts_8h_html_a3e77800a20e68f3265afa6cbc727c5f5"><div class="ttname"><a href="fts0fts_8h.html#a3e77800a20e68f3265afa6cbc727c5f5">fts_add_index</a></div><div class="ttdeci">void fts_add_index(dict_index_t *index, dict_table_t *table)</div><div class="ttdoc">Add a newly create index in FTS cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:578</div></div>
<div class="ttc" id="fts0fts_8h_html_a48c80a6e074c8fd6620c322a3113662b"><div class="ttname"><a href="fts0fts_8h.html#a48c80a6e074c8fd6620c322a3113662b">fts_cache_index_cache_remove</a></div><div class="ttdeci">void fts_cache_index_cache_remove(dict_table_t *table, dict_index_t *index)</div><div class="ttdoc">Remove a FTS index cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:861</div></div>
<div class="ttc" id="fts0fts_8h_html_a9d1c05a49eb36d1436ad8f20d1712b26"><div class="ttname"><a href="fts0fts_8h.html#a9d1c05a49eb36d1436ad8f20d1712b26">fts_drop_index</a></div><div class="ttdeci">dberr_t fts_drop_index(dict_table_t *table, dict_index_t *index, trx_t *trx, aux_name_vec_t *aux_vec)</div><div class="ttdoc">Drop auxiliary tables related to an FTS index. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:706</div></div>
<div class="ttc" id="fts0fts_8h_html_ae4aeaee9e589d2e7cb36f9467f297c94"><div class="ttname"><a href="fts0fts_8h.html#ae4aeaee9e589d2e7cb36f9467f297c94">fts_savepoint_laststmt_refresh</a></div><div class="ttdeci">void fts_savepoint_laststmt_refresh(trx_t *trx)</div><div class="ttdoc">Refresh last statement savepoint. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5610</div></div>
<div class="ttc" id="structfts__cache__t_html"><div class="ttname"><a href="structfts__cache__t.html">fts_cache_t</a></div><div class="ttdoc">The cache for the FTS system. </div><div class="ttdef"><b>Definition:</b> fts0types.h:143</div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="fts0fts_8h_html_a9e0e71dc7acb692e79560853708c3260"><div class="ttname"><a href="fts0fts_8h.html#a9e0e71dc7acb692e79560853708c3260">fts_get_rows_count</a></div><div class="ttdeci">ulint fts_get_rows_count(fts_table_t *fts_table)</div><div class="ttdoc">Fetch COUNT(*) from specified table. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:4959</div></div>
<div class="ttc" id="fts0fts_8h_html_a380910af8d69503a3e3dcbf6d809a3b6"><div class="ttname"><a href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a></div><div class="ttdeci">ib_uint64_t doc_id_t</div><div class="ttdoc">Document id type. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:76</div></div>
<div class="ttc" id="structfts__aux__table__t_html_ad99ae98f863b4ae4be188308162eb999"><div class="ttname"><a href="structfts__aux__table__t.html#ad99ae98f863b4ae4be188308162eb999">fts_aux_table_t::parent_id</a></div><div class="ttdeci">table_id_t parent_id</div><div class="ttdoc">Parent table id. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:908</div></div>
<div class="ttc" id="fts0fts_8h_html_a6ea5ca7737f3760bcd22823b14a00044ad0fd9b9b5d01a52aa788a269cd74c444"><div class="ttname"><a href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044ad0fd9b9b5d01a52aa788a269cd74c444">FTS_COMMON_TABLE</a></div><div class="ttdoc">FTS auxiliary table that is common for all FTS index on a table. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:193</div></div>
<div class="ttc" id="fts0fts_8h_html_a131af06538b7764dcf2ddcaac79b2f86"><div class="ttname"><a href="fts0fts_8h.html#a131af06538b7764dcf2ddcaac79b2f86">fts_retrieve_ranking</a></div><div class="ttdeci">float fts_retrieve_ranking(fts_result_t *result, doc_id_t doc_id)</div><div class="ttdoc">Retrieve the FTS Relevance Ranking result for doc with doc_id. </div><div class="ttdef"><b>Definition:</b> fts0que.cc:3318</div></div>
<div class="ttc" id="fts0fts_8h_html_a862b2ce1333444e27bbda6d94cb94655"><div class="ttname"><a href="fts0fts_8h.html#a862b2ce1333444e27bbda6d94cb94655">fts_create_index_tables_low</a></div><div class="ttdeci">dberr_t fts_create_index_tables_low(trx_t *trx, dict_index_t *index, const char *table_name, table_id_t table_id)</div><div class="ttdoc">Create auxiliary index tables for an FTS index. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2266</div></div>
<div class="ttc" id="dict0types_8h_html"><div class="ttname"><a href="dict0types_8h.html">dict0types.h</a></div><div class="ttdoc">Data dictionary global types. </div></div>
<div class="ttc" id="structfts__trx__t_html_a5d04d7eadb7e43ebe31da027a99c1b66"><div class="ttname"><a href="structfts__trx__t.html#a5d04d7eadb7e43ebe31da027a99c1b66">fts_trx_t::heap</a></div><div class="ttdeci">mem_heap_t * heap</div><div class="ttdoc">heap </div><div class="ttdef"><b>Definition:</b> fts0fts.h:237</div></div>
<div class="ttc" id="fts0fts_8h_html_af4f1b49b67dc926603c7754f2d8bb41e"><div class="ttname"><a href="fts0fts_8h.html#af4f1b49b67dc926603c7754f2d8bb41e">fts_get_parent_table_name</a></div><div class="ttdeci">char * fts_get_parent_table_name(const char *aux_table_name, ulint aux_table_len)</div></div>
<div class="ttc" id="structfts__trx__row__t_html_ae4fd76c871f4de1a8c997db8cf6308eb"><div class="ttname"><a href="structfts__trx__row__t.html#ae4fd76c871f4de1a8c997db8cf6308eb">fts_trx_row_t::fts_indexes</a></div><div class="ttdeci">ib_vector_t * fts_indexes</div><div class="ttdoc">The indexes that are affected. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:271</div></div>
<div class="ttc" id="fts0fts_8h_html_a613fe68835da014fd74af5cd2eb44f48"><div class="ttname"><a href="fts0fts_8h.html#a613fe68835da014fd74af5cd2eb44f48">fts_savepoint_release</a></div><div class="ttdeci">void fts_savepoint_release(trx_t *trx, const char *name)</div><div class="ttdoc">Release the savepoint data identified by name. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5573</div></div>
<div class="ttc" id="rem0types_8h_html_a92caeffe2dc2fbe825a54aef9a163435"><div class="ttname"><a href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a></div><div class="ttdeci">byte rec_t</div><div class="ttdef"><b>Definition:</b> rem0types.h:39</div></div>
<div class="ttc" id="structdtuple__t_html"><div class="ttname"><a href="structdtuple__t.html">dtuple_t</a></div><div class="ttdoc">Structure for an SQL data tuple of fields (logical record) </div><div class="ttdef"><b>Definition:</b> data0data.h:711</div></div>
<div class="ttc" id="fts0fts_8h_html_a3f20089ac133e2ff0f228fb3ef352813"><div class="ttname"><a href="fts0fts_8h.html#a3f20089ac133e2ff0f228fb3ef352813">fts_savepoint_take</a></div><div class="ttdeci">void fts_savepoint_take(trx_t *trx, fts_trx_t *fts_trx, const char *name)</div><div class="ttdoc">Take a FTS savepoint. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5527</div></div>
<div class="ttc" id="http__auth__backend__plugin_8cc_html_aee70c8416f705726100824ba89f1e090"><div class="ttname"><a href="http__auth__backend__plugin_8cc.html#aee70c8416f705726100824ba89f1e090">start</a></div><div class="ttdeci">static void start(mysql_harness::PluginFuncEnv *env)</div><div class="ttdef"><b>Definition:</b> http_auth_backend_plugin.cc:161</div></div>
<div class="ttc" id="namespacerules__table__service_html_a71d6ca457fe4ae5d5151f92c06cc3fd3"><div class="ttname"><a href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">rules_table_service::end</a></div><div class="ttdeci">Cursor end()</div><div class="ttdoc">A past-the-end Cursor. </div><div class="ttdef"><b>Definition:</b> rules_table_service.cc:188</div></div>
<div class="ttc" id="fts0fts_8h_html_a29aa50975af4e1b2c898db58c73b4e9a"><div class="ttname"><a href="fts0fts_8h.html#a29aa50975af4e1b2c898db58c73b4e9a">fts_add_doc_id_column</a></div><div class="ttdeci">void fts_add_doc_id_column(dict_table_t *table, mem_heap_t *heap)</div><div class="ttdoc">Add the FTS document id hidden column. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5341</div></div>
<div class="ttc" id="classfts__t_html_a3a82a978d6de0c12fe9271cfbfac9ff5"><div class="ttname"><a href="classfts__t.html#a3a82a978d6de0c12fe9271cfbfac9ff5">fts_t::bg_threads</a></div><div class="ttdeci">ulint bg_threads</div><div class="ttdoc">Number of background threads accessing this table. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:378</div></div>
<div class="ttc" id="fts0fts_8h_html_a7955a68feeb414081daee62fe748d282"><div class="ttname"><a href="fts0fts_8h.html#a7955a68feeb414081daee62fe748d282">fts_cache_init</a></div><div class="ttdeci">void fts_cache_init(fts_cache_t *cache)</div><div class="ttdoc">Initialize things in cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:497</div></div>
<div class="ttc" id="fts0fts_8h_html_a473428a9d324fed9d2447a1a5da6ad41"><div class="ttname"><a href="fts0fts_8h.html#a473428a9d324fed9d2447a1a5da6ad41">fts_status_t</a></div><div class="ttdeci">enum fts_status fts_status_t</div><div class="ttdef"><b>Definition:</b> fts0fts.h:361</div></div>
<div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:38</div></div>
<div class="ttc" id="fts0fts_8h_html_ad261622a30e1c4b7e058c88676e718e0"><div class="ttname"><a href="fts0fts_8h.html#ad261622a30e1c4b7e058c88676e718e0">fts_commit</a></div><div class="ttdeci">dberr_t fts_commit(trx_t *trx)</div><div class="ttdoc">The given transaction is about to be committed; do whatever is necessary from the FTS system&amp;#39;s POV...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:3228</div></div>
<div class="ttc" id="row0types_8h_html"><div class="ttname"><a href="row0types_8h.html">row0types.h</a></div><div class="ttdoc">Row operation global types. </div></div>
<div class="ttc" id="structib__vector__t_html"><div class="ttname"><a href="structib__vector__t.html">ib_vector_t</a></div><div class="ttdef"><b>Definition:</b> ut0vec.h:229</div></div>
<div class="ttc" id="uca-dump_8cc_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> uca-dump.cc:29</div></div>
<div class="ttc" id="fts0fts_8h_html_ae0f286dacfe7bea9de95bac2ee467039"><div class="ttname"><a href="fts0fts_8h.html#ae0f286dacfe7bea9de95bac2ee467039">fts_freeze_aux_tables</a></div><div class="ttdeci">void fts_freeze_aux_tables(const dict_table_t *table)</div><div class="ttdoc">Freeze all auiliary tables to be not evictable if exist, with dict_mutex held. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2051</div></div>
<div class="ttc" id="sslopt-case_8h_html_ae00b773898ac853cec38cdf7a08b8e89"><div class="ttname"><a href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a></div><div class="ttdeci">case opt name</div><div class="ttdef"><b>Definition:</b> sslopt-case.h:32</div></div>
<div class="ttc" id="fts0fts_8h_html_af42deb4d3354f68b4da0cad3c9f3f9e9a6c74a88bb3520f741790cf2f57a8f417"><div class="ttname"><a href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9a6c74a88bb3520f741790cf2f57a8f417">FTS_INVALID</a></div><div class="ttdef"><b>Definition:</b> fts0fts.h:184</div></div>
<div class="ttc" id="structfts__trx__table__t_html_a285d52cc8180aa79fce88fa0e5537a75"><div class="ttname"><a href="structfts__trx__table__t.html#a285d52cc8180aa79fce88fa0e5537a75">fts_trx_table_t::docs_added_graph</a></div><div class="ttdeci">que_t * docs_added_graph</div><div class="ttdef"><b>Definition:</b> fts0fts.h:262</div></div>
<div class="ttc" id="fts0fts_8h_html_a21b291c0f49fa2c56b231749ef298cf3"><div class="ttname"><a href="fts0fts_8h.html#a21b291c0f49fa2c56b231749ef298cf3">fts_doc_ids_create</a></div><div class="ttdeci">fts_doc_ids_t * fts_doc_ids_create(void)</div><div class="ttdoc">Create a new fts_doc_ids_t. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2976</div></div>
<div class="ttc" id="structfts__table__t_html_a267b90f7d29c6eea3d835b9db2f27a78"><div class="ttname"><a href="structfts__table__t.html#a267b90f7d29c6eea3d835b9db2f27a78">fts_table_t::charset</a></div><div class="ttdeci">CHARSET_INFO * charset</div><div class="ttdoc">charset info if it is for FTS index auxiliary table </div><div class="ttdef"><b>Definition:</b> fts0fts.h:341</div></div>
<div class="ttc" id="fts0fts_8h_html_af0bd0a73c2c279f2bf77aa043bc942ca"><div class="ttname"><a href="fts0fts_8h.html#af0bd0a73c2c279f2bf77aa043bc942ca">fts_check_cached_index</a></div><div class="ttdeci">ibool fts_check_cached_index(dict_table_t *table)</div><div class="ttdoc">Check indexes in the fts-&gt;indexes is also present in index cache and table-&gt;indexes list...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:671</div></div>
<div class="ttc" id="fts0fts_8h_html_af42deb4d3354f68b4da0cad3c9f3f9e9af3c32cd5318441a04304d5ed353509d7"><div class="ttname"><a href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9af3c32cd5318441a04304d5ed353509d7">FTS_INSERT</a></div><div class="ttdef"><b>Definition:</b> fts0fts.h:180</div></div>
<div class="ttc" id="structaux__name__vec__t_html"><div class="ttname"><a href="structaux__name__vec__t.html">aux_name_vec_t</a></div><div class="ttdoc">Structure to manage FTS AUX table name and MDL during its drop. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:168</div></div>
<div class="ttc" id="fts0fts_8h_html_af4c5e3bd80d78c5656d4e646e7d0bae7"><div class="ttname"><a href="fts0fts_8h.html#af4c5e3bd80d78c5656d4e646e7d0bae7">ib_uc_t</a></div><div class="ttdeci">unsigned short ib_uc_t</div><div class="ttdoc">Since MySQL&amp;#39;s character set support for Unicode is woefully inadequate (it supports basic operations ...</div><div class="ttdef"><b>Definition:</b> fts0fts.h:291</div></div>
<div class="ttc" id="structfts__aux__table__t_html_aca188ae075e5a6e4029d08b54da8be6c"><div class="ttname"><a href="structfts__aux__table__t.html#aca188ae075e5a6e4029d08b54da8be6c">fts_aux_table_t::id</a></div><div class="ttdeci">table_id_t id</div><div class="ttdoc">Table id. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:905</div></div>
<div class="ttc" id="fts0fts_8h_html_a6ea5ca7737f3760bcd22823b14a00044a21b87f6420941fde6f4450234170954b"><div class="ttname"><a href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044a21b87f6420941fde6f4450234170954b">FTS_INDEX_TABLE</a></div><div class="ttdoc">FTS auxiliary table that is specific to a particular FTS index on a table. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:189</div></div>
<div class="ttc" id="structfts__doc__ids__t_html"><div class="ttname"><a href="structfts__doc__ids__t.html">fts_doc_ids_t</a></div><div class="ttdoc">List of document ids that were added during a transaction. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:277</div></div>
<div class="ttc" id="fts0fts_8h_html_acbb3e1d2f25f94e0cfccd8db3d0f1fe0"><div class="ttname"><a href="fts0fts_8h.html#acbb3e1d2f25f94e0cfccd8db3d0f1fe0">fts_cache_index_cache_create</a></div><div class="ttdeci">fts_index_cache_t * fts_cache_index_cache_create(dict_table_t *table, dict_index_t *index)</div><div class="ttdoc">Create a FTS index cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:817</div></div>
<div class="ttc" id="trx0types_8h_html"><div class="ttname"><a href="trx0types_8h.html">trx0types.h</a></div><div class="ttdoc">Transaction system global type definitions. </div></div>
<div class="ttc" id="fts0fts_8h_html_a33b9ef316e6aa2a65ea570164dce27e7"><div class="ttname"><a href="fts0fts_8h.html#a33b9ef316e6aa2a65ea570164dce27e7">fts_default_stopword</a></div><div class="ttdeci">const char * fts_default_stopword[]</div><div class="ttdoc">InnoDB default stopword list: There are different versions of stopwords, the stop words listed below ...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:117</div></div>
<div class="ttc" id="structCHARSET__INFO_html"><div class="ttname"><a href="structCHARSET__INFO.html">CHARSET_INFO</a></div><div class="ttdef"><b>Definition:</b> m_ctype.h:359</div></div>
<div class="ttc" id="fts0fts_8h_html_a6c691dbc42620cb2152c29a2f1bf6b78"><div class="ttname"><a href="fts0fts_8h.html#a6c691dbc42620cb2152c29a2f1bf6b78">fts_doc_ids_free</a></div><div class="ttdeci">void fts_doc_ids_free(fts_doc_ids_t *doc_ids)</div><div class="ttdoc">Free a fts_doc_ids_t. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2992</div></div>
<div class="ttc" id="dict0types_8h_html_ac877e05c194a7c04fa5921c88cdcb1f7"><div class="ttname"><a href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a></div><div class="ttdeci">ib_id_t table_id_t</div><div class="ttdoc">Table or partition identifier (unique within an InnoDB instance). </div><div class="ttdef"><b>Definition:</b> dict0types.h:215</div></div>
<div class="ttc" id="fts0fts_8h_html_a3bf82a13ded5cc254d6dd38cf1a2d877"><div class="ttname"><a href="fts0fts_8h.html#a3bf82a13ded5cc254d6dd38cf1a2d877">fts_query</a></div><div class="ttdeci">dberr_t fts_query(trx_t *trx, dict_index_t *index, uint flags, const byte *query_str, ulint query_len, fts_result_t **result, ulonglong limit)</div><div class="ttdoc">FTS Query entry point. </div><div class="ttdef"><b>Definition:</b> fts0que.cc:3618</div></div>
<div class="ttc" id="fts0fts_8h_html_a4e7732c602ff55fec117889e2a56ddc5"><div class="ttname"><a href="fts0fts_8h.html#a4e7732c602ff55fec117889e2a56ddc5">fts_update_next_doc_id</a></div><div class="ttdeci">void fts_update_next_doc_id(trx_t *trx, const dict_table_t *table, const char *table_name, doc_id_t doc_id)</div><div class="ttdoc">Update the next and last Doc ID in the CONFIG table to be the input &quot;doc_id&quot; value (+ 1)...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2747</div></div>
<div class="ttc" id="structfts__trx__row__t_html"><div class="ttname"><a href="structfts__trx__row__t.html">fts_trx_row_t</a></div><div class="ttdoc">Information about one changed row in a transaction. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:266</div></div>
<div class="ttc" id="fts0fts_8h_html_ad160279a5d90642c1b3e382d754feab6"><div class="ttname"><a href="fts0fts_8h.html#ad160279a5d90642c1b3e382d754feab6">FTS_PREFIX_5_7</a></div><div class="ttdeci">const char * FTS_PREFIX_5_7</div><div class="ttdoc">FTS auxiliary table prefix that are common to all FT indexes. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:128</div></div>
<div class="ttc" id="structfts__trx__table__t_html"><div class="ttname"><a href="structfts__trx__table__t.html">fts_trx_table_t</a></div><div class="ttdoc">Information about changed rows in a transaction for a single table. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:250</div></div>
<div class="ttc" id="structfts__index__cache__t_html"><div class="ttname"><a href="structfts__index__cache__t.html">fts_index_cache_t</a></div><div class="ttdoc">Since we can have multiple FTS indexes on a table, we keep a per index cache of words etc...</div><div class="ttdef"><b>Definition:</b> fts0types.h:70</div></div>
<div class="ttc" id="structfts__result__t_html_ae6ef48436472e164592defb89d1ab2ff"><div class="ttname"><a href="structfts__result__t.html#ae6ef48436472e164592defb89d1ab2ff">fts_result_t::current</a></div><div class="ttdeci">ib_rbt_node_t * current</div><div class="ttdoc">Current element. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:315</div></div>
<div class="ttc" id="classfts__t_html_ad909b1e954712598494ab1d9b2c24957"><div class="ttname"><a href="classfts__t.html#ad909b1e954712598494ab1d9b2c24957">fts_t::fts_status</a></div><div class="ttdeci">ulint fts_status</div><div class="ttdoc">Status bit regarding fts running state. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:382</div></div>
<div class="ttc" id="fts0fts_8h_html_aa8b6ca283bef70ddf631d917f4a61a99"><div class="ttname"><a href="fts0fts_8h.html#aa8b6ca283bef70ddf631d917f4a61a99">fts_detach_aux_tables</a></div><div class="ttdeci">void fts_detach_aux_tables(const dict_table_t *table, bool dict_locked)</div><div class="ttdoc">Allow all the auxiliary tables of specified base table to be evictable if they exist, if not exist just ignore. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2105</div></div>
<div class="ttc" id="fts0fts_8h_html_a499f19a5cf269bd24a964bf487eceef9"><div class="ttname"><a href="fts0fts_8h.html#a499f19a5cf269bd24a964bf487eceef9">fts_trx_free</a></div><div class="ttdeci">void fts_trx_free(fts_trx_t *fts_trx)</div><div class="ttdoc">Free an FTS trx. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5121</div></div>
<div class="ttc" id="fts0fts_8h_html_aa30e6050ff1eaf4d7deb332914d9e468"><div class="ttname"><a href="fts0fts_8h.html#aa30e6050ff1eaf4d7deb332914d9e468">fts_drop_index_tables</a></div><div class="ttdeci">dberr_t fts_drop_index_tables(trx_t *trx, dict_index_t *index, aux_name_vec_t *aux_vec)</div><div class="ttdoc">Since we do a horizontal split on the index table, we need to drop all the split tables. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1479</div></div>
<div class="ttc" id="fts0fts_8h_html_a2730a91e3da686b48ddbee082de7f3f9"><div class="ttname"><a href="fts0fts_8h.html#a2730a91e3da686b48ddbee082de7f3f9">fts_optimize_shutdown</a></div><div class="ttdeci">void fts_optimize_shutdown()</div><div class="ttdoc">Shutdown fts optimize thread. </div><div class="ttdef"><b>Definition:</b> fts0opt.cc:2948</div></div>
<div class="ttc" id="mem0mem_8h_html"><div class="ttname"><a href="mem0mem_8h.html">mem0mem.h</a></div><div class="ttdoc">The memory management. </div></div>
<div class="ttc" id="rewriter__plugin_8cc_html_ad8134bdf32a5bc18ee04cf8db74f17f5"><div class="ttname"><a href="rewriter__plugin_8cc.html#ad8134bdf32a5bc18ee04cf8db74f17f5">reload</a></div><div class="ttdeci">static bool reload(MYSQL_THD thd)</div><div class="ttdoc">Reloads the rules into the in-memory table. </div><div class="ttdef"><b>Definition:</b> rewriter_plugin.cc:250</div></div>
<div class="ttc" id="fts0fts_8h_html_a2f8e2bec431d214b2d13fd33eba8f92b"><div class="ttname"><a href="fts0fts_8h.html#a2f8e2bec431d214b2d13fd33eba8f92b">fts_result_cache_limit</a></div><div class="ttdeci">ulong fts_result_cache_limit</div><div class="ttdoc">Variable specifying the FTS result cache limit for each query. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:84</div></div>
<div class="ttc" id="structfts__trx__t_html_af85af66dea00a06730cec04e9791338a"><div class="ttname"><a href="structfts__trx__t.html#af85af66dea00a06730cec04e9791338a">fts_trx_t::savepoints</a></div><div class="ttdeci">ib_vector_t * savepoints</div><div class="ttdoc">Active savepoints, must have at least one element, the implied savepoint. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:232</div></div>
<div class="ttc" id="fts0fts_8h_html_a3c805c9176a796cf78c95b501b4d0cd6"><div class="ttname"><a href="fts0fts_8h.html#a3c805c9176a796cf78c95b501b4d0cd6">fts_drop_dd_tables</a></div><div class="ttdeci">bool fts_drop_dd_tables(const aux_name_vec_t *aux_vec, bool file_per_table)</div><div class="ttdoc">Drop FTS AUX table DD table objects in vector. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1233</div></div>
<div class="ttc" id="structfts__savepoint__t_html"><div class="ttname"><a href="structfts__savepoint__t.html">fts_savepoint_t</a></div><div class="ttdoc">Information required for transaction savepoint handling. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:241</div></div>
<div class="ttc" id="fts0fts_8h_html_a41cf40984aa74cfe055e93f3159683c3"><div class="ttname"><a href="fts0fts_8h.html#a41cf40984aa74cfe055e93f3159683c3">FTS_SUFFIX_CONFIG</a></div><div class="ttdeci">const char * FTS_SUFFIX_CONFIG</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:137</div></div>
<div class="ttc" id="structfts__stopword__t_html"><div class="ttname"><a href="structfts__stopword__t.html">fts_stopword_t</a></div><div class="ttdoc">Stop word control infotmation. </div><div class="ttdef"><b>Definition:</b> fts0types.h:104</div></div>
<div class="ttc" id="fts0fts_8h_html_a9f74fec07c64f19a16c589c1f6326ca0"><div class="ttname"><a href="fts0fts_8h.html#a9f74fec07c64f19a16c589c1f6326ca0">fts_need_sync</a></div><div class="ttdeci">bool fts_need_sync</div><div class="ttdoc">Whether the total memory used for FTS cache is exhausted, and we will need a sync to free some memory...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:77</div></div>
<div class="ttc" id="fts0fts_8h_html_a491b0fb210b0620f3c9a3f655b1e4be9"><div class="ttname"><a href="fts0fts_8h.html#a491b0fb210b0620f3c9a3f655b1e4be9">fts_optimize_init</a></div><div class="ttdeci">void fts_optimize_init(void)</div><div class="ttdoc">Startup the optimize thread and create the work queue. </div><div class="ttdef"><b>Definition:</b> fts0opt.cc:2931</div></div>
<div class="ttc" id="fts0fts_8h_html_a3df321fe54dc77f80db8cab275dfc8fe"><div class="ttname"><a href="fts0fts_8h.html#a3df321fe54dc77f80db8cab275dfc8fe">fts_check_common_tables_exist</a></div><div class="ttdeci">bool fts_check_common_tables_exist(const dict_table_t *table)</div><div class="ttdoc">Check if common tables already exist. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1863</div></div>
<div class="ttc" id="fts0fts_8h_html_a8f1368eced1aae561c60c66463e81590"><div class="ttname"><a href="fts0fts_8h.html#a8f1368eced1aae561c60c66463e81590">fts_get_doc_id_from_row</a></div><div class="ttdeci">doc_id_t fts_get_doc_id_from_row(dict_table_t *table, dtuple_t *row)</div><div class="ttdoc">Extract the doc id from the FTS hidden column. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5160</div></div>
<div class="ttc" id="structfts__aux__table__t_html_a963e01b9cd7243d3db93844c1a87ac62"><div class="ttname"><a href="structfts__aux__table__t.html#a963e01b9cd7243d3db93844c1a87ac62">fts_aux_table_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of the table. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:914</div></div>
<div class="ttc" id="structfts__ranking__t_html_a37202c8a2744f72f4534be685ca0941e"><div class="ttname"><a href="structfts__ranking__t.html#a37202c8a2744f72f4534be685ca0941e">fts_ranking_t::rank</a></div><div class="ttdeci">fts_rank_t rank</div><div class="ttdoc">Rank is between 0 . </div><div class="ttdef"><b>Definition:</b> fts0fts.h:305</div></div>
<div class="ttc" id="dict0types_8h_html_a00c394837dddc950522d91155514e7de"><div class="ttname"><a href="dict0types_8h.html#a00c394837dddc950522d91155514e7de">space_index_t</a></div><div class="ttdeci">ib_id_t space_index_t</div><div class="ttdoc">Index identifier (unique within a tablespace). </div><div class="ttdef"><b>Definition:</b> dict0types.h:217</div></div>
<div class="ttc" id="fts0fts_8h_html_a6726b95b9b7d05875c9946ece1720227"><div class="ttname"><a href="fts0fts_8h.html#a6726b95b9b7d05875c9946ece1720227">fts_max_token_size</a></div><div class="ttdeci">ulong fts_max_token_size</div><div class="ttdoc">Variable specifying the maximum FTS max token size. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:87</div></div>
<div class="ttc" id="structfts__ranking__t_html_a8372a07fc53c5b3de79cc17ce50fb2db"><div class="ttname"><a href="structfts__ranking__t.html#a8372a07fc53c5b3de79cc17ce50fb2db">fts_ranking_t::doc_id</a></div><div class="ttdeci">doc_id_t doc_id</div><div class="ttdoc">Document id. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:303</div></div>
<div class="ttc" id="fts0fts_8h_html_a27b9138f7da1e71d6d6c66368b153aa0"><div class="ttname"><a href="fts0fts_8h.html#a27b9138f7da1e71d6d6c66368b153aa0">fts_create_index_dd_tables</a></div><div class="ttdeci">dberr_t fts_create_index_dd_tables(dict_table_t *table)</div><div class="ttdoc">Check if a table has FTS index needs to have its auxiliary index tables&amp;#39; metadata updated in DD...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2244</div></div>
<div class="ttc" id="fts0fts_8h_html_ace4eca8a4149387e02d1568900963cf4"><div class="ttname"><a href="fts0fts_8h.html#ace4eca8a4149387e02d1568900963cf4">fts_upgrade_rename</a></div><div class="ttdeci">dberr_t fts_upgrade_rename(const dict_table_t *table, bool rollback)</div><div class="ttdoc">Rename FTS AUX tablespace name from 8.0 format to 5.7 format. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:6436</div></div>
<div class="ttc" id="fts0fts_8h_html_a0e5bc4c2a9b538d39e37f74c9effdb8a"><div class="ttname"><a href="fts0fts_8h.html#a0e5bc4c2a9b538d39e37f74c9effdb8a">fts_trx_create</a></div><div class="ttdeci">fts_trx_t * fts_trx_create(trx_t *trx)</div><div class="ttdoc">Create an FTS trx. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2475</div></div>
<div class="ttc" id="fts0fts_8h_html_a02079dacd7099d8c154784ca51660a07"><div class="ttname"><a href="fts0fts_8h.html#a02079dacd7099d8c154784ca51660a07">innobase_fts_casedn_str</a></div><div class="ttdeci">size_t innobase_fts_casedn_str(CHARSET_INFO *cs, char *src, size_t src_len, char *dst, size_t dst_len)</div><div class="ttdoc">Makes all characters in a string lower case. </div><div class="ttdef"><b>Definition:</b> ha_innodb.cc:7320</div></div>
<div class="ttc" id="structfts__trx__t_html_ae46516fba16a9adc3d0f27ab2b4a65a1"><div class="ttname"><a href="structfts__trx__t.html#ae46516fba16a9adc3d0f27ab2b4a65a1">fts_trx_t::trx</a></div><div class="ttdeci">trx_t * trx</div><div class="ttdoc">InnoDB transaction. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:230</div></div>
<div class="ttc" id="fts0fts_8h_html_a3eb893387d1f24b05af4fdeb2baa3462"><div class="ttname"><a href="fts0fts_8h.html#a3eb893387d1f24b05af4fdeb2baa3462">fts_internal_tbl_name</a></div><div class="ttdeci">char * fts_internal_tbl_name</div><div class="ttdoc">Variable specifying the table that has Fulltext index to display its content through information sche...</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:109</div></div>
<div class="ttc" id="fts0fts_8h_html_a6540f52d757233e074575303f65ebbdf"><div class="ttname"><a href="fts0fts_8h.html#a6540f52d757233e074575303f65ebbdf">fts_init_index</a></div><div class="ttdeci">ibool fts_init_index(dict_table_t *table, ibool has_cache_lock)</div><div class="ttdoc">This function brings FTS index in sync when FTS index is first used. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:6182</div></div>
<div class="ttc" id="structfts__doc__ids__t_html_ad6e907ee3f2da5e0ed96021a0251d8f1"><div class="ttname"><a href="structfts__doc__ids__t.html#ad6e907ee3f2da5e0ed96021a0251d8f1">fts_doc_ids_t::self_heap</a></div><div class="ttdeci">ib_alloc_t * self_heap</div><div class="ttdoc">Allocator used to create an instance of this type and the doc_ids vector. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:281</div></div>
<div class="ttc" id="structfts__table__t_html"><div class="ttname"><a href="structfts__table__t.html">fts_table_t</a></div><div class="ttdoc">This is used to generate the FTS auxiliary table name, we need the table id and the index id to gener...</div><div class="ttdef"><b>Definition:</b> fts0fts.h:326</div></div>
<div class="ttc" id="fts0fts_8h_html_afa74c1370e24cbda29dc3a12ecfe044c"><div class="ttname"><a href="fts0fts_8h.html#afa74c1370e24cbda29dc3a12ecfe044c">fts_is_aux_table_name</a></div><div class="ttdeci">bool fts_is_aux_table_name(fts_aux_table_t *table, const char *name, ulint len)</div><div class="ttdoc">Check if a table is an FTS auxiliary table name. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5769</div></div>
<div class="ttc" id="fts0fts_8h_html_a221a2f9e57b7a160589ecf4306c74291"><div class="ttname"><a href="fts0fts_8h.html#a221a2f9e57b7a160589ecf4306c74291">fts_cache_create</a></div><div class="ttdeci">fts_cache_t * fts_cache_create(dict_table_t *table)</div><div class="ttdoc">Create a FTS cache. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:525</div></div>
<div class="ttc" id="structfts__trx__table__t_html_a25d7feafb066431695749f3ae71abf99"><div class="ttname"><a href="structfts__trx__table__t.html#a25d7feafb066431695749f3ae71abf99">fts_trx_table_t::fts_trx</a></div><div class="ttdeci">fts_trx_t * fts_trx</div><div class="ttdoc">link to parent </div><div class="ttdef"><b>Definition:</b> fts0fts.h:253</div></div>
<div class="ttc" id="fts0fts_8h_html_a61ba28450ef494623d959881f4f3971c"><div class="ttname"><a href="fts0fts_8h.html#a61ba28450ef494623d959881f4f3971c">fts_init_doc_id</a></div><div class="ttdeci">doc_id_t fts_init_doc_id(const dict_table_t *table)</div><div class="ttdoc">Get the initial Doc ID by consulting the CONFIG table. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:4893</div></div>
<div class="ttc" id="fts0fts_8h_html_aee1df01fb68706740733b819f59fcea1"><div class="ttname"><a href="fts0fts_8h.html#aee1df01fb68706740733b819f59fcea1">innobase_mysql_fts_get_token</a></div><div class="ttdeci">ulint innobase_mysql_fts_get_token(CHARSET_INFO *charset, const byte *start, const byte *end, fts_string_t *token)</div><div class="ttdoc">Get the next token from the given string and store it in *token. </div><div class="ttdef"><b>Definition:</b> ha_innodb.cc:7341</div></div>
<div class="ttc" id="classfts__t_html_a31b450060297c8df9c3aa9727959aaec"><div class="ttname"><a href="classfts__t.html#a31b450060297c8df9c3aa9727959aaec">fts_t::cache</a></div><div class="ttdeci">fts_cache_t * cache</div><div class="ttdoc">FTS memory buffer for this table, or NULL if the table has no FTS index. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:391</div></div>
<div class="ttc" id="fts0fts_8h_html_aefdd19df9af8ceedda3b84f00bee46b3"><div class="ttname"><a href="fts0fts_8h.html#aefdd19df9af8ceedda3b84f00bee46b3">fts_table_fetch_doc_ids</a></div><div class="ttdeci">dberr_t fts_table_fetch_doc_ids(trx_t *trx, fts_table_t *fts_table, fts_doc_ids_t *doc_ids)</div><div class="ttdoc">Read the rows from the FTS index. </div><div class="ttdef"><b>Definition:</b> fts0opt.cc:897</div></div>
<div class="ttc" id="fts0fts_8h_html_aac5f6042d1ee47dcc941828c2ed84368"><div class="ttname"><a href="fts0fts_8h.html#aac5f6042d1ee47dcc941828c2ed84368">fts_optimize_remove_table</a></div><div class="ttdeci">void fts_optimize_remove_table(dict_table_t *table)</div><div class="ttdoc">Remove the table from the OPTIMIZER&amp;#39;s list. </div><div class="ttdef"><b>Definition:</b> fts0opt.cc:2465</div></div>
<div class="ttc" id="classfts__t_html_afc118c175b3dfcf1e30290bb68f2284e"><div class="ttname"><a href="classfts__t.html#afc118c175b3dfcf1e30290bb68f2284e">fts_t::indexes</a></div><div class="ttdeci">ib_vector_t * indexes</div><div class="ttdoc">Vector of FTS indexes, this is mainly for caching purposes. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:397</div></div>
<div class="ttc" id="structfts__string__t_html_ac305966b0b98fff2c6c3b06d7150b741"><div class="ttname"><a href="structfts__string__t.html#ac305966b0b98fff2c6c3b06d7150b741">fts_string_t::f_str</a></div><div class="ttdeci">byte * f_str</div><div class="ttdoc">string, not necessary terminated in any way </div><div class="ttdef"><b>Definition:</b> fts0fts.h:295</div></div>
<div class="ttc" id="fts0fts_8h_html_ac95bd8f0d489d126740d93bccfc5ea07a2fe85ef7d1467c31fd3a06dcfb60777e"><div class="ttname"><a href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a2fe85ef7d1467c31fd3a06dcfb60777e">ADDED_TABLE_SYNCED</a></div><div class="ttdoc">TRUE if the ADDED table record is sync-ed after crash recovery. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:357</div></div>
<div class="ttc" id="fts0fts_8h_html_a1c58c8fc36af7418d1295a36332f2749"><div class="ttname"><a href="fts0fts_8h.html#a1c58c8fc36af7418d1295a36332f2749">fts_upgrade_aux_tables</a></div><div class="ttdeci">dberr_t fts_upgrade_aux_tables(dict_table_t *table)</div><div class="ttdoc">Upgrade FTS AUX Tables. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:6332</div></div>
<div class="ttc" id="fts0fts_8h_html_aefb2518700f5a8edbbdac0415a791e5e"><div class="ttname"><a href="fts0fts_8h.html#aefb2518700f5a8edbbdac0415a791e5e">FTS_SUFFIX_DELETED</a></div><div class="ttdeci">const char * FTS_SUFFIX_DELETED</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:138</div></div>
<div class="ttc" id="fts0fts_8h_html_a6ea5ca7737f3760bcd22823b14a00044ac45fb1f2435810945e5d67a62e92ff52"><div class="ttname"><a href="fts0fts_8h.html#a6ea5ca7737f3760bcd22823b14a00044ac45fb1f2435810945e5d67a62e92ff52">FTS_OBSOLETED_TABLE</a></div><div class="ttdoc">FTS obsoleted tables like DOC_ID, ADDED, STOPWORDS. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:196</div></div>
<div class="ttc" id="classfts__t_html"><div class="ttname"><a href="classfts__t.html">fts_t</a></div><div class="ttdoc">The state of the FTS sub system. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:364</div></div>
<div class="ttc" id="structfts__trx__table__t_html_a26d558d2fec87455e0bef9d5b6083c52"><div class="ttname"><a href="structfts__trx__table__t.html#a26d558d2fec87455e0bef9d5b6083c52">fts_trx_table_t::table</a></div><div class="ttdeci">dict_table_t * table</div><div class="ttdoc">table </div><div class="ttdef"><b>Definition:</b> fts0fts.h:251</div></div>
<div class="ttc" id="fts0fts_8h_html_a99bb419fa99bc1bdfdd49d8e9ff55d7d"><div class="ttname"><a href="fts0fts_8h.html#a99bb419fa99bc1bdfdd49d8e9ff55d7d">fts_drop_tables</a></div><div class="ttdeci">dberr_t fts_drop_tables(trx_t *trx, dict_table_t *table, aux_name_vec_t *aux_vec)</div><div class="ttdoc">Drops the ancillary tables needed for supporting an FTS index on a given table. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1640</div></div>
<div class="ttc" id="fts0fts_8h_html_a1bc15571f87f005549b6f5672ed00098"><div class="ttname"><a href="fts0fts_8h.html#a1bc15571f87f005549b6f5672ed00098">fts_optimize_request_sync_table</a></div><div class="ttdeci">void fts_optimize_request_sync_table(dict_table_t *table)</div><div class="ttdoc">Send sync fts cache for the table. </div><div class="ttdef"><b>Definition:</b> fts0opt.cc:2495</div></div>
<div class="ttc" id="namespacenet_1_1impl_1_1socket_html_af0aef40a99065320448f6e90710198cc"><div class="ttname"><a href="namespacenet_1_1impl_1_1socket.html#af0aef40a99065320448f6e90710198cc">net::impl::socket::wait</a></div><div class="ttdeci">stdx::expected&lt; void, error_type &gt; wait(native_handle_type fd, wait_type wt)</div><div class="ttdef"><b>Definition:</b> socket.h:580</div></div>
<div class="ttc" id="classfts__t_html_a4f3ab755949331ae6e024b581c866c88"><div class="ttname"><a href="classfts__t.html#a4f3ab755949331ae6e024b581c866c88">fts_t::fts_heap</a></div><div class="ttdeci">mem_heap_t * fts_heap</div><div class="ttdoc">Heap for fts_t allocation. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:400</div></div>
<div class="ttc" id="fts0fts_8h_html_af509a0af164b5fc7326653f4eb9c2b1e"><div class="ttname"><a href="fts0fts_8h.html#af509a0af164b5fc7326653f4eb9c2b1e">FTS_SUFFIX_DELETED_CACHE</a></div><div class="ttdeci">const char * FTS_SUFFIX_DELETED_CACHE</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:139</div></div>
<div class="ttc" id="structib__rbt__t_html"><div class="ttname"><a href="structib__rbt__t.html">ib_rbt_t</a></div><div class="ttdoc">Red black tree instance. </div><div class="ttdef"><b>Definition:</b> ut0rbt.h:74</div></div>
<div class="ttc" id="fts0fts_8h_html_ae3679e73d0e9befc4039eb03f56f921b"><div class="ttname"><a href="fts0fts_8h.html#ae3679e73d0e9befc4039eb03f56f921b">fts_empty_common_tables</a></div><div class="ttdeci">dberr_t fts_empty_common_tables(trx_t *trx, dict_table_t *table)</div><div class="ttdoc">Empty all common talbes. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1576</div></div>
<div class="ttc" id="hp__test1_8cc_html_a6eec09a91807e20d7b3d6ef3da594067"><div class="ttname"><a href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a></div><div class="ttdeci">static int flags[50]</div><div class="ttdef"><b>Definition:</b> hp_test1.cc:39</div></div>
<div class="ttc" id="fts0fts_8h_html_ac95bd8f0d489d126740d93bccfc5ea07a006ed7d30704bc51f0b1d7f3ad0e3aa3"><div class="ttname"><a href="fts0fts_8h.html#ac95bd8f0d489d126740d93bccfc5ea07a006ed7d30704bc51f0b1d7f3ad0e3aa3">BG_THREAD_STOP</a></div><div class="ttdoc">TRUE if the FTS background thread has finished reading the ADDED table, meaning more items can be add...</div><div class="ttdef"><b>Definition:</b> fts0fts.h:346</div></div>
<div class="ttc" id="hash0hash_8h_html"><div class="ttname"><a href="hash0hash_8h.html">hash0hash.h</a></div><div class="ttdoc">The simple hash table utility. </div></div>
<div class="ttc" id="fts0fts_8h_html_a0241413c2481273fdc69da0d1b0d1752"><div class="ttname"><a href="fts0fts_8h.html#a0241413c2481273fdc69da0d1b0d1752">FTS_SUFFIX_CONFIG_5_7</a></div><div class="ttdeci">const char * FTS_SUFFIX_CONFIG_5_7</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:146</div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="structfts__table__t_html_ad1c62180395d52af84002a060d25c3ae"><div class="ttname"><a href="structfts__table__t.html#ad1c62180395d52af84002a060d25c3ae">fts_table_t::suffix</a></div><div class="ttdeci">const char * suffix</div><div class="ttdoc">The suffix of the fts auxiliary table name, can be NULL, not used everywhere (yet) ...</div><div class="ttdef"><b>Definition:</b> fts0fts.h:337</div></div>
<div class="ttc" id="structfts__string__t_html_a40f54627160c8bdbd8d9262d7550c9f9"><div class="ttname"><a href="structfts__string__t.html#a40f54627160c8bdbd8d9262d7550c9f9">fts_string_t::f_n_char</a></div><div class="ttdeci">ulint f_n_char</div><div class="ttdoc">Number of characters. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:298</div></div>
<div class="ttc" id="fts0fts_8h_html_a0cae2d73fe2a8a2a92bb69f582d3962f"><div class="ttname"><a href="fts0fts_8h.html#a0cae2d73fe2a8a2a92bb69f582d3962f">fts_tokenize_document_internal</a></div><div class="ttdeci">int fts_tokenize_document_internal(MYSQL_FTPARSER_PARAM *param, char *doc, int len)</div><div class="ttdoc">FULLTEXT tokenizer internal in MYSQL_FTPARSER_SIMPLE_MODE. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:4691</div></div>
<div class="ttc" id="structfts__ranking__t_html"><div class="ttname"><a href="structfts__ranking__t.html">fts_ranking_t</a></div><div class="ttdoc">Query ranked doc ids. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:302</div></div>
<div class="ttc" id="fts0fts_8h_html_a3642a0a0b1ff644638499ee3de688b10"><div class="ttname"><a href="fts0fts_8h.html#a3642a0a0b1ff644638499ee3de688b10">fts_get_next_doc_id</a></div><div class="ttdeci">dberr_t fts_get_next_doc_id(const dict_table_t *table, doc_id_t *doc_id)</div><div class="ttdoc">Get the next available document id. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:2764</div></div>
<div class="ttc" id="ft__global_8h_html"><div class="ttname"><a href="ft__global_8h.html">ft_global.h</a></div><div class="ttdoc">Some definitions for full-text indices. </div></div>
<div class="ttc" id="fts0fts_8h_html_a2bfac35f044e649536a29fd1fae697e2"><div class="ttname"><a href="fts0fts_8h.html#a2bfac35f044e649536a29fd1fae697e2">fts_update_doc_id</a></div><div class="ttdeci">doc_id_t fts_update_doc_id(dict_table_t *table, upd_field_t *ufield, doc_id_t *next_doc_id)</div><div class="ttdoc">Add new fts doc id to the update vector. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5363</div></div>
<div class="ttc" id="fts0fts_8h_html_af42deb4d3354f68b4da0cad3c9f3f9e9"><div class="ttname"><a href="fts0fts_8h.html#af42deb4d3354f68b4da0cad3c9f3f9e9">fts_row_state</a></div><div class="ttdeci">fts_row_state</div><div class="ttdoc">Type of a row during a transaction. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:179</div></div>
<div class="ttc" id="structfts__trx__row__t_html_a63e7174440a1dcf449ab357b58929171"><div class="ttname"><a href="structfts__trx__row__t.html#a63e7174440a1dcf449ab357b58929171">fts_trx_row_t::state</a></div><div class="ttdeci">fts_row_state state</div><div class="ttdoc">state of the row </div><div class="ttdef"><b>Definition:</b> fts0fts.h:269</div></div>
<div class="ttc" id="my__inttypes_8h_html_a718b4eb2652c286f4d42dc18a8e71a1a"><div class="ttname"><a href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a></div><div class="ttdeci">unsigned long ulong</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:48</div></div>
<div class="ttc" id="fts0fts_8h_html_a3c755def2cb096a2d310ff174e55cf18"><div class="ttname"><a href="fts0fts_8h.html#a3c755def2cb096a2d310ff174e55cf18">fts_savepoint_rollback</a></div><div class="ttdeci">void fts_savepoint_rollback(trx_t *trx, const char *name)</div><div class="ttdoc">Rollback to and including savepoint indentified by name. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:5711</div></div>
<div class="ttc" id="fts0fts_8h_html_aa16c38d9b2f67282a31ef07e7fcb7cce"><div class="ttname"><a href="fts0fts_8h.html#aa16c38d9b2f67282a31ef07e7fcb7cce">FTS_SUFFIX_BEING_DELETED</a></div><div class="ttdeci">const char * FTS_SUFFIX_BEING_DELETED</div><div class="ttdef"><b>Definition:</b> fts0fts.cc:135</div></div>
<div class="ttc" id="classfts__t_html_a8e5a92a66bb7a4a0d787ea8242a34cf4"><div class="ttname"><a href="classfts__t.html#a8e5a92a66bb7a4a0d787ea8242a34cf4">fts_t::doc_col</a></div><div class="ttdeci">ulint doc_col</div><div class="ttdoc">FTS doc id hidden column number in the CLUSTERED index. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:394</div></div>
<div class="ttc" id="fts0fts_8h_html_aa4be19bcf710955a0aa52b4ac040c980"><div class="ttname"><a href="fts0fts_8h.html#aa4be19bcf710955a0aa52b4ac040c980">fts_rename_aux_tables</a></div><div class="ttdeci">dberr_t fts_rename_aux_tables(dict_table_t *table, const char *new_name, trx_t *trx, bool replay)</div><div class="ttdoc">Rename auxiliary tables for all fts index for a table. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:1382</div></div>
<div class="ttc" id="fts0fts_8h_html_aabafa9bd8eb12678db42b15c0c110e2e"><div class="ttname"><a href="fts0fts_8h.html#aabafa9bd8eb12678db42b15c0c110e2e">FTS_PREFIX</a></div><div class="ttdeci">const char * FTS_PREFIX</div><div class="ttdoc">FTS auxiliary table prefix that are common to all FT indexes. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:125</div></div>
<div class="ttc" id="structfts__string__t_html_a66b2c7c56382e0bbeaa11906e033895c"><div class="ttname"><a href="structfts__string__t.html#a66b2c7c56382e0bbeaa11906e033895c">fts_string_t::f_len</a></div><div class="ttdeci">ulint f_len</div><div class="ttdoc">Length of the string in bytes. </div><div class="ttdef"><b>Definition:</b> fts0fts.h:297</div></div>
<div class="ttc" id="fts0fts_8h_html_aba2a98943f78d743d90a9ae8dbaca69f"><div class="ttname"><a href="fts0fts_8h.html#aba2a98943f78d743d90a9ae8dbaca69f">fts_min_token_size</a></div><div class="ttdeci">ulong fts_min_token_size</div><div class="ttdoc">Variable specifying the minimum FTS max token size. </div><div class="ttdef"><b>Definition:</b> fts0fts.cc:90</div></div>
<div class="ttc" id="structfts__ranking__t_html_a5ad5308b97be5321109205efc3ca1aad"><div class="ttname"><a href="structfts__ranking__t.html#a5ad5308b97be5321109205efc3ca1aad">fts_ranking_t::words</a></div><div class="ttdeci">byte * words</div><div class="ttdoc">this contains the words that were queried and found in this document </div><div class="ttdef"><b>Definition:</b> fts0fts.h:307</div></div>
<div class="ttc" id="classTHD_html"><div class="ttname"><a href="classTHD.html">THD</a></div><div class="ttdoc">For each client connection we create a separate thread with THD serving as a thread/connection descri...</div><div class="ttdef"><b>Definition:</b> sql_class.h:803</div></div>
<div class="ttc" id="ut0wqueue_8h_html"><div class="ttname"><a href="ut0wqueue_8h.html">ut0wqueue.h</a></div><div class="ttdoc">A work queue. </div></div>
<div class="ttc" id="namespacerules__table__service_html_a58d8b2e690d4fb60a8d9557c8a4b5cd1"><div class="ttname"><a href="namespacerules__table__service.html#a58d8b2e690d4fb60a8d9557c8a4b5cd1">rules_table_service::table_name</a></div><div class="ttdeci">const char * table_name</div><div class="ttdef"><b>Definition:</b> rules_table_service.cc:55</div></div>
<div class="ttc" id="structdict__index__t_html"><div class="ttname"><a href="structdict__index__t.html">dict_index_t</a></div><div class="ttdoc">Data structure for an index. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:886</div></div>
<div class="ttc" id="fts0fts_8h_html_a704a38f42e634fe63a278f5e04c3e796"><div class="ttname"><a href="fts0fts_8h.html#a704a38f42e634fe63a278f5e04c3e796">innobase_fts_drop_dd_table</a></div><div class="ttdeci">bool innobase_fts_drop_dd_table(const char *name, bool file_per_table)</div><div class="ttdoc">Drop dd table &amp; tablespace for fts aux table. </div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="fts0fts_8h.html">fts0fts.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
