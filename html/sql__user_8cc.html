<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: sql/auth/sql_user.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sql__user_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sql_user.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;set&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;unordered_map&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;<a class="el" href="lex__string_8h_source.html">lex_string.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="m__ctype_8h_source.html">m_ctype.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="m__string_8h_source.html">m_string.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="map__helpers_8h_source.html">map_helpers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__alloc_8h_source.html">my_alloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__base_8h_source.html">my_base.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__compiler_8h_source.html">my_compiler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__inttypes_8h_source.html">my_inttypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__loglevel_8h_source.html">my_loglevel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__sqlcommand_8h_source.html">my_sqlcommand.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__sys_8h_source.html">my_sys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__time_8h_source.html">my_time.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log__builtins_8h_source.html">mysql/components/services/log_builtins.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log__shared_8h_source.html">mysql/components/services/log_shared.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysql__lex__string_8h_source.html">mysql/mysql_lex_string.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="include_2mysql_2plugin_8h_source.html">mysql/plugin.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="plugin__audit_8h_source.html">mysql/plugin_audit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="plugin__auth_8h_source.html">mysql/plugin_auth.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psi_2mysql__mutex_8h_source.html">mysql/psi/mysql_mutex.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psi__base_8h_source.html">mysql/psi/psi_base.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysql__com_8h_source.html">mysql_com.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysql__time_8h_source.html">mysql_time.h</a>&quot;</code><br />
<code>#include &quot;mysqld_error.h&quot;</code><br />
<code>#include &quot;<a class="el" href="password_8h_source.html">password.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="auth__acls_8h_source.html">sql/auth/auth_acls.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="auth__common_8h_source.html">sql/auth/auth_common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dynamic__privilege__table_8h_source.html">sql/auth/dynamic_privilege_table.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__security__ctx_8h_source.html">sql/auth/sql_security_ctx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dictionary__client_8h_source.html">sql/dd/cache/dictionary_client.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="function_8h_source.html">sql/dd/types/function.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="procedure_8h_source.html">sql/dd/types/procedure.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="types_2routine_8h_source.html">sql/dd/types/routine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2dd_2types_2table_8h_source.html">sql/dd/types/table.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2dd_2types_2trigger_8h_source.html">sql/dd/types/trigger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2dd_2types_2view_8h_source.html">sql/dd/types/view.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug__sync_8h_source.html">sql/debug_sync.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2field_8h_source.html">sql/field.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2handler_8h_source.html">sql/handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item_8h_source.html">sql/item.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="key_8h_source.html">sql/key.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log__event_8h_source.html">sql/log_event.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2protocol_8h_source.html">sql/protocol.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__audit_8h_source.html">sql/sql_audit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__base_8h_source.html">sql/sql_base.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__class_8h_source.html">sql/sql_class.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__connect_8h_source.html">sql/sql_connect.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__const_8h_source.html">sql/sql_const.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__error_8h_source.html">sql/sql_error.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__lex_8h_source.html">sql/sql_lex.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__list_8h_source.html">sql/sql_list.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__parse_8h_source.html">sql/sql_parse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__plugin_8h_source.html">sql/sql_plugin.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__plugin__ref_8h_source.html">sql/sql_plugin_ref.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="strfunc_8h_source.html">sql/strfunc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="system__variables_8h_source.html">sql/system_variables.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2table_8h_source.html">sql/table.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thd__raii_8h_source.html">sql/thd_raii.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__string_8h_source.html">sql_string.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="violite_8h_source.html">violite.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="prealloced__array_8h_source.html">prealloced_array.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="auth__internal_8h_source.html">sql/auth/auth_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__auth__cache_8h_source.html">sql/auth/sql_auth_cache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__authentication_8h_source.html">sql/auth/sql_authentication.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__user__table_8h_source.html">sql/auth/sql_user_table.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="current__thd_8h_source.html">sql/current_thd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="derror_8h_source.html">sql/derror.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log_8h_source.html">sql/log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysqld_8h_source.html">sql/mysqld.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__rewrite_8h_source.html">sql/sql_rewrite.h</a>&quot;</code><br />
<code>#include &lt;openssl/rand.h&gt;</code><br />
<code>#include &quot;<a class="el" href="query__result_8h_source.html">sql/query_result.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tztime_8h_source.html">sql/tztime.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2cc2791bc7f8648242047f768af37fd9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9">enum_acl_lists</a> { <br />
&#160;&#160;<a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9a3854ba3906261178b52bede0373db46f">USER_ACL</a> = 0, 
<a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9a3bb6f694874a57496792c3a3eb74d864">DB_ACL</a>, 
<a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9afdf3d5e2db437d7a2dfbdc968a6617c4">COLUMN_PRIVILEGES_HASH</a>, 
<a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9ad098db637600380d980a1bd9810226e6">PROC_PRIVILEGES_HASH</a>, 
<br />
&#160;&#160;<a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9a6e1cf1d1229aa05d875b75d54e91ee35">FUNC_PRIVILEGES_HASH</a>, 
<a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9a349198dd448233842e8a8cbd3439fd64">PROXY_USERS_ACL</a>
<br />
 }</td></tr>
<tr class="separator:a2cc2791bc7f8648242047f768af37fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa31e04659b19744a358fcd48681bd073"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#aa31e04659b19744a358fcd48681bd073">log_user</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classString.html">String</a> *str, <a class="el" href="structLEX__USER.html">LEX_USER</a> *<a class="el" href="persisted__variable_8cc.html#a8b83cc1a954492359ecbdba847d13e53">user</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="persisted__variable_8cc.html#a62e46ba976330a60321ad0434914d7c1">comma</a>=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>)</td></tr>
<tr class="memdesc:aa31e04659b19744a358fcd48681bd073"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary function for constructing a user list string.  <a href="#aa31e04659b19744a358fcd48681bd073">More...</a><br /></td></tr>
<tr class="separator:aa31e04659b19744a358fcd48681bd073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a481b95b9475d3b4dee42e2f2e4f0c639"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a481b95b9475d3b4dee42e2f2e4f0c639">check_change_password</a> (<a class="el" href="classTHD.html">THD</a> *thd, const char *<a class="el" href="persisted__variable_8cc.html#ac27d1f298862a7b4c7d6b7bcc59c9ffd">host</a>, const char *<a class="el" href="persisted__variable_8cc.html#a8b83cc1a954492359ecbdba847d13e53">user</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> retain_current_password)</td></tr>
<tr class="separator:a481b95b9475d3b4dee42e2f2e4f0c639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc6cf7e5bc6d30b0dc15822bdd8b3e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#acbc6cf7e5bc6d30b0dc15822bdd8b3e5">acl_can_access_user</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_arg)</td></tr>
<tr class="memdesc:acbc6cf7e5bc6d30b0dc15822bdd8b3e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxilary function for the CAN_ACCESS_USER internal function used to check if a row from mysql.user can be accessed or not by the current user.  <a href="#acbc6cf7e5bc6d30b0dc15822bdd8b3e5">More...</a><br /></td></tr>
<tr class="separator:acbc6cf7e5bc6d30b0dc15822bdd8b3e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aa719449a0d543c810f064b5c78d228"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a5aa719449a0d543c810f064b5c78d228">mysql_show_create_user</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_name, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> are_both_users_same)</td></tr>
<tr class="memdesc:a5aa719449a0d543c810f064b5c78d228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary function for constructing CREATE USER sql for a given user.  <a href="#a5aa719449a0d543c810f064b5c78d228">More...</a><br /></td></tr>
<tr class="separator:a5aa719449a0d543c810f064b5c78d228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d1521026e428a4b9df890feae48b158"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a3d1521026e428a4b9df890feae48b158">auth_verify_password_history</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> *<a class="el" href="persisted__variable_8cc.html#a8b83cc1a954492359ecbdba847d13e53">user</a>, <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> *<a class="el" href="persisted__variable_8cc.html#ac27d1f298862a7b4c7d6b7bcc59c9ffd">host</a>, <a class="el" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a> password_history, long password_reuse_interval, <a class="el" href="structst__mysql__auth.html">st_mysql_auth</a> *auth, const char *cleartext, unsigned int cleartext_length, const char *cred_hash, unsigned int cred_hash_length, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *history_table, <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> what_to_set)</td></tr>
<tr class="memdesc:a3d1521026e428a4b9df890feae48b158"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform credentials history check and update the password history table.  <a href="#a3d1521026e428a4b9df890feae48b158">More...</a><br /></td></tr>
<tr class="separator:a3d1521026e428a4b9df890feae48b158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ff85d9b56820e5a44fa31c371d38513"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a4ff85d9b56820e5a44fa31c371d38513">handle_password_history_table</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *tables, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> drop, <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_from, <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_to, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *row_existed)</td></tr>
<tr class="memdesc:a4ff85d9b56820e5a44fa31c371d38513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the password history table for cases of deleting or renaming users.  <a href="#a4ff85d9b56820e5a44fa31c371d38513">More...</a><br /></td></tr>
<tr class="separator:a4ff85d9b56820e5a44fa31c371d38513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32b379fc6499854ad5c8fbe8823c299e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a32b379fc6499854ad5c8fbe8823c299e">validate_password_require_current</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="structLEX__USER.html">LEX_USER</a> *Str, <a class="el" href="classACL__USER.html">ACL_USER</a> *acl_user, <a class="el" href="structst__mysql__auth.html">st_mysql_auth</a> *auth, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_privileged_user, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> user_exists)</td></tr>
<tr class="memdesc:a32b379fc6499854ad5c8fbe8823c299e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks, if the REPLACE clause is required, optional or not required.  <a href="#a32b379fc6499854ad5c8fbe8823c299e">More...</a><br /></td></tr>
<tr class="separator:a32b379fc6499854ad5c8fbe8823c299e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b1b16d6074c549f479db6c0240cb519"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a1b1b16d6074c549f479db6c0240cb519">translate_byte_to_password_char</a> (unsigned char c)</td></tr>
<tr class="separator:a1b1b16d6074c549f479db6c0240cb519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1ba2868bd4ec208754749cca6ae5b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#aaa1ba2868bd4ec208754749cca6ae5b5">generate_random_password</a> (std::string *<a class="el" href="mysql__secure__installation_8cc.html#a59460a3ff2c12443d1022e5cc0fba85c">password</a>, uint32_t length)</td></tr>
<tr class="memdesc:aaa1ba2868bd4ec208754749cca6ae5b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a random password of the length decided by the system variable generated_random_password_length.  <a href="#aaa1ba2868bd4ec208754749cca6ae5b5">More...</a><br /></td></tr>
<tr class="separator:aaa1ba2868bd4ec208754749cca6ae5b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82ad28fabc3069e4ae6510342d50c1a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a82ad28fabc3069e4ae6510342d50c1a4">send_password_result_set</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="auth__common_8h.html#ac946bea2d20a5d346c0caa6eceaa8105">Userhostpassword_list</a> &amp;generated_passwords)</td></tr>
<tr class="memdesc:a82ad28fabc3069e4ae6510342d50c1a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the result set of generated passwords to the client.  <a href="#a82ad28fabc3069e4ae6510342d50c1a4">More...</a><br /></td></tr>
<tr class="separator:a82ad28fabc3069e4ae6510342d50c1a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15aadd23b740c6e434cbf33b4c6df37e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a15aadd23b740c6e434cbf33b4c6df37e">set_and_validate_user_attributes</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="structLEX__USER.html">LEX_USER</a> *Str, <a class="el" href="classacl__table_1_1Pod__user__what__to__update.html">acl_table::Pod_user_what_to_update</a> &amp;what_to_set, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_privileged_user, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_role, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *history_table, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *history_check_done, const char *<a class="el" href="test__sql__9__sessions_8cc.html#a93f1c5a856331f0b0082389b47f4ef32">cmd</a>, <a class="el" href="auth__common_8h.html#ac946bea2d20a5d346c0caa6eceaa8105">Userhostpassword_list</a> &amp;generated_passwords)</td></tr>
<tr class="memdesc:a15aadd23b740c6e434cbf33b4c6df37e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function does following:  <a href="#a15aadd23b740c6e434cbf33b4c6df37e">More...</a><br /></td></tr>
<tr class="separator:a15aadd23b740c6e434cbf33b4c6df37e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71e0249bbb119d659ac09cdc3f4a8535"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a71e0249bbb119d659ac09cdc3f4a8535">change_password</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="structLEX__USER.html">LEX_USER</a> *lex_user, const char *new_password, const char *current_password, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> retain_current_password)</td></tr>
<tr class="memdesc:a71e0249bbb119d659ac09cdc3f4a8535"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change a password hash for a user.  <a href="#a71e0249bbb119d659ac09cdc3f4a8535">More...</a><br /></td></tr>
<tr class="separator:a71e0249bbb119d659ac09cdc3f4a8535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab15b4c9fe9e98774c5c542d45dddd39e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#ab15b4c9fe9e98774c5c542d45dddd39e">handle_grant_struct</a> (enum <a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9">enum_acl_lists</a> struct_no, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> drop, <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_from, <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_to, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> on_drop_role_priv)</td></tr>
<tr class="memdesc:ab15b4c9fe9e98774c5c542d45dddd39e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle an in-memory privilege structure.  <a href="#ab15b4c9fe9e98774c5c542d45dddd39e">More...</a><br /></td></tr>
<tr class="separator:ab15b4c9fe9e98774c5c542d45dddd39e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac465d79abcde518c5acdc1299b08aca"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#aac465d79abcde518c5acdc1299b08aca">handle_grant_data</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *tables, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> drop, <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_from, <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_to, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> on_drop_role_priv)</td></tr>
<tr class="memdesc:aac465d79abcde518c5acdc1299b08aca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle all privilege tables and in-memory privilege structures.  <a href="#aac465d79abcde518c5acdc1299b08aca">More...</a><br /></td></tr>
<tr class="separator:aac465d79abcde518c5acdc1299b08aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1818940dfcf8c2347673f35c952bcd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#ac1818940dfcf8c2347673f35c952bcd5">check_set_user_id_priv</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="structLEX__USER.html">LEX_USER</a> *user_name, const std::string &amp;object_type)</td></tr>
<tr class="memdesc:ac1818940dfcf8c2347673f35c952bcd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function checks if a user which is referenced as a definer account in objects like view, trigger, event, procedure or function has SET_USER_ID privilege or not and report error or warning based on that.  <a href="#ac1818940dfcf8c2347673f35c952bcd5">More...</a><br /></td></tr>
<tr class="separator:ac1818940dfcf8c2347673f35c952bcd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d693e7abb04ba2c5ae4e8349ae691c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#af7d693e7abb04ba2c5ae4e8349ae691c">check_orphaned_definers</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;<a class="el" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">list</a>)</td></tr>
<tr class="memdesc:af7d693e7abb04ba2c5ae4e8349ae691c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if CREATE/RENAME/DROP USER should be allowed or not by checking if the user is referenced as definer in stored programs like procedures, functions, triggers, events and views or not.  <a href="#af7d693e7abb04ba2c5ae4e8349ae691c">More...</a><br /></td></tr>
<tr class="separator:af7d693e7abb04ba2c5ae4e8349ae691c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d938bf60ac6d83e616d85f17fe23951"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a8d938bf60ac6d83e616d85f17fe23951">mysql_create_user</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;<a class="el" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">list</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> if_not_exists, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_role)</td></tr>
<tr class="separator:a8d938bf60ac6d83e616d85f17fe23951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8db690496aeb4b4c376ea3d783dc5d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#aa8db690496aeb4b4c376ea3d783dc5d1">mysql_drop_user</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;<a class="el" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">list</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> if_exists, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> on_drop_role_priv)</td></tr>
<tr class="memdesc:aa8db690496aeb4b4c376ea3d783dc5d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop a list of users and all their privileges.  <a href="#aa8db690496aeb4b4c376ea3d783dc5d1">More...</a><br /></td></tr>
<tr class="separator:aa8db690496aeb4b4c376ea3d783dc5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56708a04cb262f70d58b4446c13edf1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#a56708a04cb262f70d58b4446c13edf1d">mysql_rename_user</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;<a class="el" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">list</a>)</td></tr>
<tr class="separator:a56708a04cb262f70d58b4446c13edf1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa4fc3d692a0349091dae6dec571f65"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#aeaa4fc3d692a0349091dae6dec571f65">mysql_alter_user</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;<a class="el" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">list</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> if_exists)</td></tr>
<tr class="separator:aeaa4fc3d692a0349091dae6dec571f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aedeffc7d23da25d52b9a50045189fe2b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__user_8cc.html#aedeffc7d23da25d52b9a50045189fe2b">initialized</a></td></tr>
<tr class="separator:aedeffc7d23da25d52b9a50045189fe2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a2cc2791bc7f8648242047f768af37fd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cc2791bc7f8648242047f768af37fd9">&#9670;&nbsp;</a></span>enum_acl_lists</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9">enum_acl_lists</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2cc2791bc7f8648242047f768af37fd9a3854ba3906261178b52bede0373db46f"></a>USER_ACL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2cc2791bc7f8648242047f768af37fd9a3bb6f694874a57496792c3a3eb74d864"></a>DB_ACL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2cc2791bc7f8648242047f768af37fd9afdf3d5e2db437d7a2dfbdc968a6617c4"></a>COLUMN_PRIVILEGES_HASH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2cc2791bc7f8648242047f768af37fd9ad098db637600380d980a1bd9810226e6"></a>PROC_PRIVILEGES_HASH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2cc2791bc7f8648242047f768af37fd9a6e1cf1d1229aa05d875b75d54e91ee35"></a>FUNC_PRIVILEGES_HASH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2cc2791bc7f8648242047f768af37fd9a349198dd448233842e8a8cbd3439fd64"></a>PROXY_USERS_ACL&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acbc6cf7e5bc6d30b0dc15822bdd8b3e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbc6cf7e5bc6d30b0dc15822bdd8b3e5">&#9670;&nbsp;</a></span>acl_can_access_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> acl_can_access_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auxilary function for the CAN_ACCESS_USER internal function used to check if a row from mysql.user can be accessed or not by the current user. </p>
<ul>
<li>thd the current thread </li>
<li>user_arg the user account to check <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>the current user can access the user </td></tr>
    <tr><td class="paramname">false</td><td>the current user can't access the user</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classItem__func__can__access__user.html">Item_func_can_access_user</a>, <a class="el" href="classdd_1_1system__views_1_1User__attributes.html">dd::system_views::User_attributes</a> </dd></dl>
</li>
</ul>

</div>
</div>
<a id="a3d1521026e428a4b9df890feae48b158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d1521026e428a4b9df890feae48b158">&#9670;&nbsp;</a></span>auth_verify_password_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> auth_verify_password_history </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>&#160;</td>
          <td class="paramname"><em>password_history</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>password_reuse_interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structst__mysql__auth.html">st_mysql_auth</a> *&#160;</td>
          <td class="paramname"><em>auth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cleartext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cleartext_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cred_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cred_hash_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>history_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>what_to_set</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform credentials history check and update the password history table. </p>
<p>Note that the data for the checks are extracted from LEX_USER. So these need to be up to date in all cases.</p>
<p>How credential history checks are performed: </p><div class="fragment"><div class="line"><a class="code" href="memcached_8c.html#a9e8f65e2f04446eb0a2f098411dacf9b">count</a>= 0;</div><div class="line">FOR <a class="code" href="namespaceconsts.html#ae42e6bb9561cb112c8df234e2d9ed34a">SELECT</a> * <a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9a60efb85363b2afd235602dc0aee155f0">FROM</a> <a class="code" href="mysql_8cc.html#a79ca285a0c0e720422fa6fb6a4bba330">mysql</a>.password_history <a class="code" href="structORDER.html">ORDER</a> <a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9a8a7f2ff9fd0ff128eb1a14b98d95b4e6">BY</a> <a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9ae2d30a195cee6b2961cc2c23ea4b520b">USER</a>,HOST,TS <a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9ac09f77dd64a2d5dedf24b5835d9eaa5a">DESC</a></div><div class="line">  <a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9a0116b78582fbf1fd6e069fde8dd308c4">WHERE</a> <a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9ae2d30a195cee6b2961cc2c23ea4b520b">USER</a>=<a class="code" href="mysqlcheck_8cc.html#ac1c0b7df7acc992128471e2af2625549">::current_user</a> AND HOST=<a class="code" href="mysqlcheck_8cc.html#a6acec0bb9f109fa75df603c2cbd53ca8">::current_host</a></div><div class="line">{</div><div class="line">   <span class="keywordflow">if</span> (<a class="code" href="memcached_8c.html#a9e8f65e2f04446eb0a2f098411dacf9b">count</a> &gt;= ::password_history &amp;&amp; (NOW() - ts) &gt; ::password_reuse_time)</div><div class="line">   {</div><div class="line">     <span class="keyword">delete</span> row;</div><div class="line">     <span class="keywordflow">continue</span>;</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (CRED was produced <a class="code" href="mysql__secure__installation_8cc.html#a59460a3ff2c12443d1022e5cc0fba85c">by ::password</a>)</div><div class="line">     signal(<span class="stringliteral">&quot;wrong password&quot;</span>);</div><div class="line"></div><div class="line">   <a class="code" href="memcached_8c.html#a9e8f65e2f04446eb0a2f098411dacf9b">count</a> = <a class="code" href="memcached_8c.html#a9e8f65e2f04446eb0a2f098411dacf9b">count</a> + 1;</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="json__diff_8h.html#ac6bdf4cd490db1c02e98ca88e25107faa61ee777e7f71dc466c3b2c685d8d313b">INSERT</a> <a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9aab0fb930b459cfb52c8929bc8f048c4f">INTO</a> <a class="code" href="mysql_8cc.html#a79ca285a0c0e720422fa6fb6a4bba330">mysql</a>.password_history (<a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9ae2d30a195cee6b2961cc2c23ea4b520b">USER</a>,HOST,TS,CRED)</div><div class="line">  <a class="code" href="sql__yacc_8h.html#a15c9f7bd2f0e9686df5d9df4f3314aa9a91a9a6a83761d5dd2b34344be9dc8000">VALUES</a> (::<a class="code" href="mysqlcheck_8cc.html#ac1c0b7df7acc992128471e2af2625549">current_user</a>, ::<a class="code" href="mysqlcheck_8cc.html#a6acec0bb9f109fa75df603c2cbd53ca8">current_host</a>, NOW(), ::hashed_password);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The current thread </td></tr>
    <tr><td class="paramname">user</td><td>The user account user to operate on </td></tr>
    <tr><td class="paramname">host</td><td>The user acount host to operate on </td></tr>
    <tr><td class="paramname">password_history</td><td>The effective password history value </td></tr>
    <tr><td class="paramname">password_reuse_interval</td><td>The effective password reuse interval value </td></tr>
    <tr><td class="paramname">auth</td><td>auth plugin to use for verification </td></tr>
    <tr><td class="paramname">cleartext</td><td>the clear text password supplied </td></tr>
    <tr><td class="paramname">cleartext_length</td><td>length of cleartext password </td></tr>
    <tr><td class="paramname">cred_hash</td><td>hash of the credential to be inserted into the history </td></tr>
    <tr><td class="paramname">cred_hash_length</td><td>length of cred_hash </td></tr>
    <tr><td class="paramname">history_table</td><td>The opened history table </td></tr>
    <tr><td class="paramname">what_to_set</td><td>The mask of what to set </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Password is OK </td></tr>
    <tr><td class="paramname">true</td><td>Password is not OK </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a71e0249bbb119d659ac09cdc3f4a8535"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e0249bbb119d659ac09cdc3f4a8535">&#9670;&nbsp;</a></span>change_password()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> change_password </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>lex_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>current_password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>retain_current_password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change a password hash for a user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle </td></tr>
    <tr><td class="paramname">lex_user</td><td>LEX_USER </td></tr>
    <tr><td class="paramname">new_password</td><td>New password hash for host@user </td></tr>
    <tr><td class="paramname">current_password</td><td>Current password for host@user </td></tr>
    <tr><td class="paramname">retain_current_password</td><td>Preference to retain current password</td></tr>
  </table>
  </dd>
</dl>
<p>Note : it will also reset the change_password flag. This is safe to do unconditionally since the simple userless form SET PASSWORD = 'text' will be the only allowed form when this flag is on. So we don't need to check user names here.</p>
<dl class="section see"><dt>See also</dt><dd>set_var_password::update(THD *thd)</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">1</td><td>ERROR; In this case the error is sent to the client. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a481b95b9475d3b4dee42e2f2e4f0c639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a481b95b9475d3b4dee42e2f2e4f0c639">&#9670;&nbsp;</a></span>check_change_password()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> check_change_password </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>retain_current_password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af7d693e7abb04ba2c5ae4e8349ae691c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7d693e7abb04ba2c5ae4e8349ae691c">&#9670;&nbsp;</a></span>check_orphaned_definers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> check_orphaned_definers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if CREATE/RENAME/DROP USER should be allowed or not by checking if the user is referenced as definer in stored programs like procedures, functions, triggers, events and views or not. </p>
<p>If the executing user does not have the SET_USER_ID privilege, and the user in the argument list is referenced as the definer of some entity, we will report an error and return.</p>
<p>If the executing user has the SET_USER_ID privilege, and the user in the argument list is referenced as the definer of some entity, we will report a warning and continue execution. In this case we will not return, because there may be additional users in the argument list, and if we ignore them, it may mean that a relevant warning would not be reported.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The current thread. </td></tr>
    <tr><td class="paramname">list</td><td>The users to check for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>OK </td></tr>
    <tr><td class="paramname">true</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac1818940dfcf8c2347673f35c952bcd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1818940dfcf8c2347673f35c952bcd5">&#9670;&nbsp;</a></span>check_set_user_id_priv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> check_set_user_id_priv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>object_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function checks if a user which is referenced as a definer account in objects like view, trigger, event, procedure or function has SET_USER_ID privilege or not and report error or warning based on that. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The current thread </td></tr>
    <tr><td class="paramname">user_name</td><td>user name which is referenced as a definer account </td></tr>
    <tr><td class="paramname">object_type</td><td>Can be a view, trigger, event, procedure or function</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>user_name has SET_USER_ID privilege </td></tr>
    <tr><td class="paramname">true</td><td>user_name does not have SET_USER_ID privilege </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaa1ba2868bd4ec208754749cca6ae5b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1ba2868bd4ec208754749cca6ae5b5">&#9670;&nbsp;</a></span>generate_random_password()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void generate_random_password </td>
          <td>(</td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a random password of the length decided by the system variable generated_random_password_length. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">password</td><td>The generated password. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">length</td><td>The length of the generated password. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aac465d79abcde518c5acdc1299b08aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac465d79abcde518c5acdc1299b08aca">&#9670;&nbsp;</a></span>handle_grant_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_grant_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>drop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>on_drop_role_priv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle all privilege tables and in-memory privilege structures. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle </td></tr>
    <tr><td class="paramname">tables</td><td>The array with the seven open tables. </td></tr>
    <tr><td class="paramname">drop</td><td>If user_from is to be dropped. </td></tr>
    <tr><td class="paramname">user_from</td><td>The the user to be searched/dropped/renamed. </td></tr>
    <tr><td class="paramname">user_to</td><td>The new name for the user if to be renamed, NULL otherwise. </td></tr>
    <tr><td class="paramname">on_drop_role_priv</td><td>Enabled via the DROP ROLE privilege</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Go through all grant tables and in-memory grant structures and apply the requested operation. Delete from grant data if drop is true. Update in grant data if drop is false and user_to is not NULL. Search in grant data if drop is false and user_to is NULL.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>operation result </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;</td><td>0 At least one element matched. </td></tr>
    <tr><td class="paramname">0</td><td>OK, but no element matched. </td></tr>
    <tr><td class="paramname">&lt;</td><td>0 System error (OOM, error from storage engine). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab15b4c9fe9e98774c5c542d45dddd39e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab15b4c9fe9e98774c5c542d45dddd39e">&#9670;&nbsp;</a></span>handle_grant_struct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_grant_struct </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="sql__user_8cc.html#a2cc2791bc7f8648242047f768af37fd9">enum_acl_lists</a>&#160;</td>
          <td class="paramname"><em>struct_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>drop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>on_drop_role_priv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle an in-memory privilege structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">struct_no</td><td>The number of the structure to handle (0..5). </td></tr>
    <tr><td class="paramname">drop</td><td>If user_from is to be dropped. </td></tr>
    <tr><td class="paramname">user_from</td><td>The the user to be searched/dropped/renamed. </td></tr>
    <tr><td class="paramname">user_to</td><td>The new name for the user if to be renamed, NULL otherwise. </td></tr>
    <tr><td class="paramname">on_drop_role_priv</td><td>true enabled by the DROP ROLE privilege</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Scan through all elements in an in-memory grant structure and apply the requested operation. Delete from grant structure if drop is true. Update in grant structure if drop is false and user_to is not NULL. Search in grant structure if drop is false and user_to is NULL. Structures are enumerated as follows: 0 ACL_USER 1 ACL_DB 2 COLUMN_PRIVILIGES_HASH 3 PROC_PRIVILEGES_HASH 4 FUNC_PRIVILEGES_HASH 5 ACL_PROXY_USERS</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;</td><td>0 At least one element matched. </td></tr>
    <tr><td class="paramname">0</td><td>OK, but no element matched. </td></tr>
    <tr><td class="paramname">-1</td><td>Wrong arguments to function or Out of Memory. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4ff85d9b56820e5a44fa31c371d38513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ff85d9b56820e5a44fa31c371d38513">&#9670;&nbsp;</a></span>handle_password_history_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> handle_password_history_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>drop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>row_existed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the password history table for cases of deleting or renaming users. </p>
<p>This function, unline the other "update" functions does not handle the addition of new data. That's done by auth_verify_password_history(). The function only handles renames and deletes of user accounts. It does not go via the normal non-mysql.user handle_grant_data() route since there is a (partial) key on user/host and hence no need to do a full table scan.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">thd</td><td>the execution context </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">tables</td><td>the list of opened ACL tables </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">drop</td><td>true if it's a drop operation </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">user_from</td><td>the user to rename from or the user to drop </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">user_to</td><td>the user to rename to or the user to add </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">row_existed</td><td>set to true if row matching user_from existed </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>operation failed </td></tr>
    <tr><td class="paramname">false</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa31e04659b19744a358fcd48681bd073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa31e04659b19744a358fcd48681bd073">&#9670;&nbsp;</a></span>log_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classString.html">String</a> *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>comma</em> = <code><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auxiliary function for constructing a user list string. </p>
<p>This function is used for error reporting and logging.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread context </td></tr>
    <tr><td class="paramname">str</td><td>A String to store the user list. </td></tr>
    <tr><td class="paramname">user</td><td>A LEX_USER which will be appended into user list. </td></tr>
    <tr><td class="paramname">comma</td><td>If true, append a ',' before the the user. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeaa4fc3d692a0349091dae6dec571f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaa4fc3d692a0349091dae6dec571f65">&#9670;&nbsp;</a></span>mysql_alter_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_alter_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>if_exists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8d938bf60ac6d83e616d85f17fe23951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d938bf60ac6d83e616d85f17fe23951">&#9670;&nbsp;</a></span>mysql_create_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_create_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>if_not_exists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_role</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa8db690496aeb4b4c376ea3d783dc5d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8db690496aeb4b4c376ea3d783dc5d1">&#9670;&nbsp;</a></span>mysql_drop_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_drop_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>if_exists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>on_drop_role_priv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop a list of users and all their privileges. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The current thread. </td></tr>
    <tr><td class="paramname">list</td><td>The users to drop. </td></tr>
    <tr><td class="paramname">if_exists</td><td>The if exists flag </td></tr>
    <tr><td class="paramname">on_drop_role_priv</td><td>enabled by the DROP ROLE privilege</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>OK </td></tr>
    <tr><td class="paramname">true</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a56708a04cb262f70d58b4446c13edf1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56708a04cb262f70d58b4446c13edf1d">&#9670;&nbsp;</a></span>mysql_rename_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_rename_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classList.html">List</a>&lt; <a class="el" href="structLEX__USER.html">LEX_USER</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5aa719449a0d543c810f064b5c78d228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aa719449a0d543c810f064b5c78d228">&#9670;&nbsp;</a></span>mysql_show_create_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_show_create_user </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>user_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>are_both_users_same</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auxiliary function for constructing CREATE USER sql for a given user. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread context </td></tr>
    <tr><td class="paramname">user_name</td><td>user for which the sql should be constructed. </td></tr>
    <tr><td class="paramname">are_both_users_same</td><td>If the command is issued for self or not.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>OK. 1 Error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a82ad28fabc3069e4ae6510342d50c1a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82ad28fabc3069e4ae6510342d50c1a4">&#9670;&nbsp;</a></span>send_password_result_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> send_password_result_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="auth__common_8h.html#ac946bea2d20a5d346c0caa6eceaa8105">Userhostpassword_list</a> &amp;&#160;</td>
          <td class="paramname"><em>generated_passwords</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the result set of generated passwords to the client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The thread handler </td></tr>
    <tr><td class="paramname">generated_passwords</td><td>A list of 3-tuple strings containing user, host and plaintext password. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>success state </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>An error occurred (DA is set) </td></tr>
    <tr><td class="paramname">false</td><td>Success (my_eof) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a15aadd23b740c6e434cbf33b4c6df37e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15aadd23b740c6e434cbf33b4c6df37e">&#9670;&nbsp;</a></span>set_and_validate_user_attributes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> set_and_validate_user_attributes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>Str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classacl__table_1_1Pod__user__what__to__update.html">acl_table::Pod_user_what_to_update</a> &amp;&#160;</td>
          <td class="paramname"><em>what_to_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_privileged_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>history_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>history_check_done</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="auth__common_8h.html#ac946bea2d20a5d346c0caa6eceaa8105">Userhostpassword_list</a> &amp;&#160;</td>
          <td class="paramname"><em>generated_passwords</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function does following: </p>
<ol type="1">
<li>Convert plain text password to hash and update the same in user definition.</li>
<li>Validate hash string if specified in user definition.</li>
<li>Identify what all fields needs to be updated in mysql.user table based on user definition.</li>
</ol>
<p>If the is_role flag is set, the password validation is not used.</p>
<p>The function perform some semantic parsing of the original statement by investigating the syntactic elements found in the LEX_USER object not-so-appropriately named Str.</p>
<p>The code fits the purpose as a helper function to mysql_create_user() but it is used from mysql_alter_user(), mysql_grant(), change_password() and mysql_routine_grant() with a slightly varying semantic meaning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">thd</td><td>Thread context </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">Str</td><td>user on which attributes has to be applied </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">what_to_set</td><td>User attributes </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">is_privileged_user</td><td>Whether caller has CREATE_USER_ACL or UPDATE_ACL over mysql.* </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">is_role</td><td>CREATE ROLE was used to create the authid. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">history_table</td><td>The table to verify history against. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">history_check_done</td><td>Set to on if the history table is updated </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cmd</td><td>Command information </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">generated_passwords</td><td>A list of generated random passwords. Depends on LEX_USER.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>ok </td></tr>
    <tr><td class="paramname">1</td><td>ERROR; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b1b16d6074c549f479db6c0240cb519"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b1b16d6074c549f479db6c0240cb519">&#9670;&nbsp;</a></span>translate_byte_to_password_char()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char translate_byte_to_password_char </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a32b379fc6499854ad5c8fbe8823c299e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32b379fc6499854ad5c8fbe8823c299e">&#9670;&nbsp;</a></span>validate_password_require_current()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> validate_password_require_current </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structLEX__USER.html">LEX_USER</a> *&#160;</td>
          <td class="paramname"><em>Str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classACL__USER.html">ACL_USER</a> *&#160;</td>
          <td class="paramname"><em>acl_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structst__mysql__auth.html">st_mysql_auth</a> *&#160;</td>
          <td class="paramname"><em>auth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_privileged_user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>user_exists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks, if the REPLACE clause is required, optional or not required. </p>
<p>It throws error: If REPLACE clause is required but not specified. If REPLACE clause is not required but specified. If current password specified in the REPLACE clause does not match with authentication string of the user.</p>
<p>The plaintext current password is erased from LEX_USER, iff its length &gt; 0 .</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>The execution context </td></tr>
    <tr><td class="paramname">Str</td><td>LEX user </td></tr>
    <tr><td class="paramname">acl_user</td><td>The associated user which carries the ACL </td></tr>
    <tr><td class="paramname">auth</td><td>Auth plugin to use for verification </td></tr>
    <tr><td class="paramname">is_privileged_user</td><td>Whether caller has CREATE_USER_ACL or UPDATE_ACL over mysql.* </td></tr>
    <tr><td class="paramname">user_exists</td><td>Whether user already exists</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>operation failed </td></tr>
    <tr><td class="paramname">false</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aedeffc7d23da25d52b9a50045189fe2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedeffc7d23da25d52b9a50045189fe2b">&#9670;&nbsp;</a></span>initialized</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> initialized</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li><li class="navelem"><a class="el" href="dir_1a808a163d09076bb7843dcdf3f1cd1a.html">auth</a></li><li class="navelem"><a class="el" href="sql__user_8cc.html">sql_user.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
