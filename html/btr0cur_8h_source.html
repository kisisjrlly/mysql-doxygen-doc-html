<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/btr0cur.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('btr0cur_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">btr0cur.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="btr0cur_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 1994, 2020, Oracle and/or its affiliates. All Rights Reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/** @file include/btr0cur.h</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> The index tree cursor</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> Created 10/16/1994 Heikki Tuuri</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *******************************************************/</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#ifndef btr0cur_h</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#define btr0cur_h</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="btr0types_8h.html">btr0types.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict0dict_8h.html">dict0dict.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gis0type_8h.html">gis0type.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="page0cur_8h.html">page0cur.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;univ.i&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/** Mode flags for btr_cur operations; these can be ORed */</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">enum</span> {<span class="comment"></span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">  /** do no undo logging */</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1fb016f118032fcb677c3b2a4f107e2b">   48</a></span>&#160;  <a class="code" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1fb016f118032fcb677c3b2a4f107e2b">BTR_NO_UNDO_LOG_FLAG</a> = 1,<span class="comment"></span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">  /** do no record lock checking */</span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea046932973ff414437088666363342436">   50</a></span>&#160;  <a class="code" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea046932973ff414437088666363342436">BTR_NO_LOCKING_FLAG</a> = 2,<span class="comment"></span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">  /** sys fields will be found in the update vector or inserted</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">  entry */</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea159501d7bc944849faa8082ce7b55466">   53</a></span>&#160;  <a class="code" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea159501d7bc944849faa8082ce7b55466">BTR_KEEP_SYS_FLAG</a> = 4,<span class="comment"></span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">  /** btr_cur_pessimistic_update() must keep cursor position</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">  when moving columns to big_rec */</span></div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1a9e17a40a357b5194b5b12eccdf9eee">   56</a></span>&#160;  <a class="code" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1a9e17a40a357b5194b5b12eccdf9eee">BTR_KEEP_POS_FLAG</a> = 8,<span class="comment"></span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">  /** the caller is creating the index or wants to bypass the</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">  index-&gt;info.online creation log */</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edeaa2e940baf537747a3cda3db0a2cbb865">   59</a></span>&#160;  <a class="code" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edeaa2e940baf537747a3cda3db0a2cbb865">BTR_CREATE_FLAG</a> = 16,<span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">  /** the caller of btr_cur_optimistic_update() or</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">  btr_cur_update_in_place() will take care of</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">  updating IBUF_BITMAP_FREE */</span></div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1891f77b4a41b153e3445a43c806efcf">   63</a></span>&#160;  <a class="code" href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1891f77b4a41b153e3445a43c806efcf">BTR_KEEP_IBUF_BITMAP</a> = 32</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;};</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/* btr_cur_latch_leaves() returns latched blocks and savepoints. */</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="structbtr__latch__leaves__t.html">   67</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbtr__latch__leaves__t.html">btr_latch_leaves_t</a> {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">/* left block, target block and right block */</span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="structbtr__latch__leaves__t.html#a1c0e4b869fa0d485f0ae57646906252f">   69</a></span>&#160;  <a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="structbtr__latch__leaves__t.html#a1c0e4b869fa0d485f0ae57646906252f">blocks</a>[3];</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="structbtr__latch__leaves__t.html#a3c758c5eef1e02412dc32e6f45f120f3">   70</a></span>&#160;  ulint <a class="code" href="structbtr__latch__leaves__t.html#a3c758c5eef1e02412dc32e6f45f120f3">savepoints</a>[3];</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;};</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ha0ha_8h.html">ha0ha.h</a>&quot;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="que0types_8h.html">que0types.h</a>&quot;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="row0types_8h.html">row0types.h</a>&quot;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/** Returns the page cursor component of a tree cursor.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> @return pointer to page cursor component */</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<a class="code" href="structpage__cur__t.html">page_cur_t</a> *<a class="code" href="btr0cur_8h.html#a9fbd32cfc53ed0bdd7cc7f50ad7c8e24">btr_cur_get_page_cur</a>(</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keyword">const</span> <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor); <span class="comment">/*!&lt; in: tree cursor */</span><span class="comment"></span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/** Returns the buffer block on which the tree cursor is positioned.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> @return pointer to buffer block */</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="btr0cur_8h.html#a0ed1c2c1c1cd96ec7b4a61206e74e0f9">btr_cur_get_block</a>(<span class="keyword">const</span> <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor); <span class="comment">/*!&lt; in: tree cursor */</span><span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/** Returns the record pointer of a tree cursor.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> @return pointer to record */</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *<a class="code" href="btr0cur_8h.html#ac2f6fdb5778c30d2f44cddb90e21c70e">btr_cur_get_rec</a>(<span class="keyword">const</span> <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor); <span class="comment">/*!&lt; in: tree cursor */</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#else                                            </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#define btr_cur_get_page_cur(cursor) (&amp;(cursor)-&gt;page_cur)</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#define btr_cur_get_block(cursor) ((cursor)-&gt;page_cur.block)</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#define btr_cur_get_rec(cursor) ((cursor)-&gt;page_cur.rec)</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/** Returns the compressed page on which the tree cursor is positioned.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> @return pointer to compressed page, or NULL if the page is not compressed */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *<a class="code" href="btr0cur_8h.html#a16857b9aaf748152f3d8729a81adc742">btr_cur_get_page_zip</a>(<a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor); <span class="comment">/*!&lt; in: tree cursor */</span><span class="comment"></span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/** Returns the page of a tree cursor.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> @return pointer to page */</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<a class="code" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="code" href="btr0cur_8h.html#aed5024b078b665885c29921798da75dc">btr_cur_get_page</a>(<a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor); <span class="comment">/*!&lt; in: tree cursor */</span><span class="comment"></span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/** Returns the index of a cursor.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> @param cursor b-tree cursor</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> @return index */</span></div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#a5a7d338c847f204984733a9fdbe14789">  109</a></span>&#160;<span class="preprocessor">#define btr_cur_get_index(cursor) ((cursor)-&gt;index)</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">/** Positions a tree cursor at a given record.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">@param[in]      index   index</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">@param[in]      rec     record in tree</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">@param[in]      block   buffer block of rec</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">@param[in]      cursor  cursor */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#aefd6e4cb05606cefb5d21f1e73825d41">btr_cur_position</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                      <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/** Optimistically latches the leaf page or pages requested.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">@param[in]      block           Guessed buffer block</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">@param[in]      modify_clock    Modify clock value</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">@param[in,out]  latch_mode      BTR_SEARCH_LEAF, ...</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">@param[in,out]  cursor          Cursor</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">@param[in]      file            File name</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">@param[in]      line            Line where called</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">@param[in]      mtr             Mini-transaction</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">@return true if success */</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="btr0cur_8h.html#a367d84590d5ae4ceb873a30c7d2a7b4d">btr_cur_optimistic_latch_leaves</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block,</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                     ib_uint64_t modify_clock,</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                     ulint *latch_mode, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/** Searches an index tree and positions a tree cursor on a given level.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> NOTE: n_fields_cmp in tuple must be set so that it cannot be compared</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> to node pointer page number fields on the upper levels of the tree!</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> Note that if mode is PAGE_CUR_LE, which is used in inserts, then</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> cursor-&gt;up_match and cursor-&gt;low_match both will have sensible values.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> If mode is PAGE_CUR_GE, then up_match will a have a sensible value. */</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#a542936a2ff210fb6502b04fd367a1ae0">btr_cur_search_to_nth_level</a>(</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,   <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    ulint level,           <span class="comment">/*!&lt; in: the tree level of search */</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *tuple, <span class="comment">/*!&lt; in: data tuple; NOTE: n_fields_cmp in</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">                           tuple must be set so that it cannot get</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">                           compared to the node ptr page number field! */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="page0types_8h.html#a09a7c28cbc96005a4ad8497a1a195dba">page_cur_mode_t</a> <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>,  <span class="comment">/*!&lt; in: PAGE_CUR_L, ...;</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">                           NOTE that if the search is made using a unique</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">                           prefix of a record, mode should be PAGE_CUR_LE,</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">                           not PAGE_CUR_GE, as the latter may end up on</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">                           the previous page of the record! Inserts</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">                           should always be made using PAGE_CUR_LE to</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">                           search the position! */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    ulint latch_mode,      <span class="comment">/*!&lt; in: BTR_SEARCH_LEAF, ..., ORed with</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">                       at most one of BTR_INSERT, BTR_DELETE_MARK,</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">                       BTR_DELETE, or BTR_ESTIMATE;</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">                       cursor-&gt;left_block is used to store a pointer</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">                       to the left neighbor page, in the cases</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">                       BTR_SEARCH_PREV and BTR_MODIFY_PREV;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">                       NOTE that if has_search_latch</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">                       is != 0, we maybe do not have a latch set</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">                       on the cursor page, we assume</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">                       the caller uses his search latch</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">                       to protect the record! */</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,     <span class="comment">/*!&lt; in/out: tree cursor; the cursor page is</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">                           s- or x-latched, but see also above! */</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    ulint has_search_latch,<span class="comment"></span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">    /*!&lt; in: latch mode the caller</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">    currently has on search system:</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    RW_S_LATCH, or 0 */</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, <span class="comment">/*!&lt; in: file name */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    ulint line,       <span class="comment">/*!&lt; in: line where called */</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);      <span class="comment">/*!&lt; in: mtr */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">/** Searches an index tree and positions a tree cursor on a given level.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">This function will avoid placing latches while traversing the path and so</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">should be used only for cases where-in latching is not needed.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">@param[in]      index   Index</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">@param[in]      level   The tree level of search</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">@param[in]      tuple   Data tuple; Note: n_fields_cmp in compared</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">                        to the node ptr page node field</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">@param[in]      mode    PAGE_CUR_L, ....</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">                        Insert should always be made using PAGE_CUR_LE</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">                        to search the position.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">@param[in,out]  cursor  Tree cursor; points to record of interest.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">@param[in]      file    File name</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">@param[in]      line    Line where called from</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">@param[in,out]  mtr     Mini-transaction</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">@param[in]      mark_dirty if true then mark the block as dirty */</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#a52da3d18db03ccf442a23ac877cc8336">btr_cur_search_to_nth_level_with_no_latch</a>(</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint level, <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *tuple,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="page0types_8h.html#a09a7c28cbc96005a4ad8497a1a195dba">page_cur_mode_t</a> <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line,</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr, <span class="keywordtype">bool</span> mark_dirty = <span class="keyword">true</span>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">/** Opens a cursor at either end of an index.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">@param[in]      from_left   True if open to the low end, false if to the high</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">end</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">@param[in]      index       Index</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">@param[in]      latch_mode  Latch mode</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">@param[in,out]  cursor      Cursor</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">@param[in]      level       Level to search for (0=leaf)</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">@param[in]      file        File name</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">@param[in]      line        Line where called</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">@param[in,out] mtr Mini-transaction */</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#a5e2ef1b901ec66346efc1096bb1aeece">btr_cur_open_at_index_side_func</a>(<span class="keywordtype">bool</span> from_left, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                     ulint latch_mode, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                     ulint level, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                     <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#a5c8f65d3ff6c409b5a5a948098916698">  210</a></span>&#160;<span class="preprocessor">#define btr_cur_open_at_index_side(f, i, l, c, lv, m) \</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">  btr_cur_open_at_index_side_func(f, i, l, c, lv, __FILE__, __LINE__, m)</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/** Opens a cursor at either end of an index.</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">Avoid taking latches on buffer, just pin (by incrementing fix_count)</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">to keep them in buffer pool. This mode is used by intrinsic table</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">as they are not shared and so there is no need of latching.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">@param[in]      from_left       true if open to low end, false if open to high</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">end.</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">@param[in]      index   Index</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">@param[in,out]  cursor  Cursor</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">@param[in]      level   Level to search for (0=leaf)</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">@param[in]      file    File name</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">@param[in]      line    Line where called</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">@param[in,out]  mtr     Mini-transaction */</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#ae37c362a21cd664ca4fe74169890e1db">btr_cur_open_at_index_side_with_no_latch_func</a>(</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">bool</span> from_left, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, ulint level,</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#af306be6e6a1db69ff0214948dd92b7af">  228</a></span>&#160;<span class="preprocessor">#define btr_cur_open_at_index_side_with_no_latch(f, i, c, lv, m)       \</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">  btr_cur_open_at_index_side_with_no_latch_func(f, i, c, lv, __FILE__, \</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">                                                __LINE__, m)</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/** Positions a cursor at a randomly chosen position within a B-tree.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"> @return true if the index is available and we have put the cursor, false</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"> if the index is unavailable */</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="btr0cur_8h.html#ae97879c31eba0c93fdb888685580771a">btr_cur_open_at_rnd_pos_func</a>(</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    ulint latch_mode,    <span class="comment">/*!&lt; in: BTR_SEARCH_LEAF, ... */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,   <span class="comment">/*!&lt; in/out: B-tree cursor */</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>,    <span class="comment">/*!&lt; in: file name */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    ulint line,          <span class="comment">/*!&lt; in: line where called */</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);         <span class="comment">/*!&lt; in: mtr */</span></div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#a945c2e96d9be4a7c908eab83dbbfea40">  242</a></span>&#160;<span class="preprocessor">#define btr_cur_open_at_rnd_pos(i, l, c, m) \</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">  btr_cur_open_at_rnd_pos_func(i, l, c, __FILE__, __LINE__, m)</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/** Tries to perform an insert to a page in an index tree, next to cursor.</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"> It is assumed that mtr holds an x-latch on the page. The operation does</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"> not succeed if there is too little space on the page. If there is just</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"> one record on the page, the insert will always succeed; this is to</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"> prevent trying to split a page with just one record.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"> @return DB_SUCCESS, DB_WAIT_LOCK, DB_FAIL, or error number */</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="btr0cur_8h.html#a755a5ffe53e178cb8e15738a9a57944c">btr_cur_optimistic_insert</a>(</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    ulint <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>,         <span class="comment">/*!&lt; in: undo logging and locking flags: if not</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">                         zero, the parameters index and thr should be</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">                         specified */</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,   <span class="comment">/*!&lt; in: cursor on page after which to insert;</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">                         cursor stays valid */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    ulint **offsets,     <span class="comment">/*!&lt; out: offsets on *rec */</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> **heap,   <span class="comment">/*!&lt; in/out: pointer to memory heap, or NULL */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>,     <span class="comment">/*!&lt; in/out: entry to insert */</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> **rec,         <span class="comment">/*!&lt; out: pointer to inserted record if</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">                         succeed */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="structbig__rec__t.html">big_rec_t</a> **big_rec, <span class="comment">/*!&lt; out: big rec vector whose fields have to</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">                         be stored externally by the caller, or</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">                         NULL */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr,      <span class="comment">/*!&lt; in: query thread or NULL */</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)          <span class="comment">/*!&lt; in/out: mini-transaction;</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">                         if this function returns DB_SUCCESS on</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">                         a leaf page of a secondary index in a</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">                         compressed tablespace, the caller must</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">                         mtr_commit(mtr) before latching</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">                         any further pages */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">/** Performs an insert on a page of an index tree. It is assumed that mtr</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"> holds an x-latch on the tree and on the cursor page. If the insert is</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"> made on the leaf level, to avoid deadlocks, mtr must also own x-latches</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"> to brothers of page, if those brothers exist.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"> @return DB_SUCCESS or error number */</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="btr0cur_8h.html#aca2f4cf3c619c6630d174de684f44f80">btr_cur_pessimistic_insert</a>(</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    uint32_t <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>,      <span class="comment">/*!&lt; in: undo logging and locking flags: if not</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">                         zero, the parameter thr should be</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">                         specified; if no undo logging is specified,</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">                         then the caller must have reserved enough</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">                         free extents in the file space so that the</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">                         insertion will certainly succeed */</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,   <span class="comment">/*!&lt; in: cursor after which to insert;</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">                         cursor stays valid */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    ulint **offsets,     <span class="comment">/*!&lt; out: offsets on *rec */</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> **heap,   <span class="comment">/*!&lt; in/out: pointer to memory heap</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">                         that can be emptied, or NULL */</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>,     <span class="comment">/*!&lt; in/out: entry to insert */</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> **rec,         <span class="comment">/*!&lt; out: pointer to inserted record if</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">                         succeed */</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="structbig__rec__t.html">big_rec_t</a> **big_rec, <span class="comment">/*!&lt; out: big rec vector whose fields have to</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">                         be stored externally by the caller, or</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">                         NULL */</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr,      <span class="comment">/*!&lt; in: query thread or NULL */</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)          <span class="comment">/*!&lt; in/out: mini-transaction */</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">/** See if there is enough place in the page modification log to log</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"> an update-in-place.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> @retval false if out of space; IBUF_BITMAP_FREE will be reset</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"> outside mtr if the page was recompressed</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"> @retval true if enough place;</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"> IMPORTANT: The caller will have to update IBUF_BITMAP_FREE if this is</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"> a secondary index leaf page. This has to be done either within the</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"> same mini-transaction, or by invoking ibuf_reset_free_bits() before</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"> mtr_commit(mtr). */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="btr0cur_8h.html#abfdc46d486a27aa882f0c8f80cbf09c4">btr_cur_update_alloc_zip_func</a>(</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip, <span class="comment">/*!&lt; in/out: compressed page */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="structpage__cur__t.html">page_cur_t</a> *cursor,       <span class="comment">/*!&lt; in/out: B-tree page cursor */</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,      <span class="comment">/*!&lt; in: the index corresponding to cursor */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;#ifdef UNIV_DEBUG</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    ulint *offsets, <span class="comment">/*!&lt; in/out: offsets of the cursor record */</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;#endif              <span class="comment">/* UNIV_DEBUG */</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    ulint <a class="code" href="namespacegis.html#a1e3bf735dbe640151561b282f0f4dba5">length</a>,   <span class="comment">/*!&lt; in: size needed */</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacedblwr_1_1v1.html#a2213362152a12bb25be6185d420285b6">create</a>,    <span class="comment">/*!&lt; in: true=delete-and-insert,</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">                    false=update-in-place */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)     <span class="comment">/*!&lt; in/out: mini-transaction */</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#a5762abb71e85466cd85e563461bacc18">  322</a></span>&#160;<span class="preprocessor">#define btr_cur_update_alloc_zip(page_zip, cursor, index, offsets, len, cr, \</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor">                                 mtr)                                       \</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">  btr_cur_update_alloc_zip_func(page_zip, cursor, index, offsets, len, cr, mtr)</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#define btr_cur_update_alloc_zip(page_zip, cursor, index, offsets, len, cr, \</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">                                 mtr)                                       \</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">  btr_cur_update_alloc_zip_func(page_zip, cursor, index, len, cr, mtr)</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">/** Updates a record when the update causes no size changes in its fields.</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">@param[in] flags Undo logging and locking flags</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">@param[in] cursor Cursor on the record to update; cursor stays valid and</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">positioned on the same record</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">@param[in,out] offsets Offsets on cursor-&gt;page_cur.rec</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">@param[in] update Update vector</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">@param[in] cmpl_info Compiler info on secondary index updates</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">@param[in] thr Query thread, or null if flags &amp; (btr_no_locking_flag |</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">btr_no_undo_log_flag | btr_create_flag | btr_keep_sys_flag)</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">@param[in] trx_id Transaction id</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">@param[in,out] mtr Mini-transaction; if this is a secondary index, the caller</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">must mtr_commit(mtr) before latching any further pages</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">@return locking or undo log related error code, or</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">@retval DB_SUCCESS on success</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">@retval DB_ZIP_OVERFLOW if there is not enough space left</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">on the compressed page (IBUF_BITMAP_FREE was reset outside mtr) */</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="btr0cur_8h.html#a8f42051e928b6c3f72b7fc3bb59293a0">btr_cur_update_in_place</a>(ulint <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, ulint *offsets,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, ulint cmpl_info,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">/** Writes a redo log record of updating a record in-place.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">@param[in] flags Undo logging and locking flags</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">@param[in] rec Record</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">@param[in] index Index of the record</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">@param[in] update Update vector</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">@param[in] trx_id Transaction id</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">@param[in] roll_ptr Roll ptr</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">@param[in] mtr Mini-transaction */</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#afbe0bb94cee5310f935edc06c06ece60">btr_cur_update_in_place_log</a>(ulint <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                 <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>,</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                 <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="code" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                                 <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">/** Tries to update a record on a page in an index tree. It is assumed that mtr</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">holds an x-latch on the page. The operation does not succeed if there is too</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">little space on the page or if the update would result in too empty a page,</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">so that tree compression is recommended. We assume here that the ordering</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">fields of the record do not change.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">@return error code, including</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">@retval DB_SUCCESS on success</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">@retval DB_OVERFLOW if the updated record does not fit</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">@retval DB_UNDERFLOW if the page would become too empty</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">@retval DB_ZIP_OVERFLOW if there is not enough space left</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">on the compressed page (IBUF_BITMAP_FREE was reset outside mtr) */</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="btr0cur_8h.html#a4daa7a19fdc8383127085073ea67bea9">btr_cur_optimistic_update</a>(</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    ulint <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>,         <span class="comment">/*!&lt; in: undo logging and locking flags */</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,   <span class="comment">/*!&lt; in: cursor on the record to update;</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">                         cursor stays valid and positioned on the</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">                         same record */</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    ulint **offsets,     <span class="comment">/*!&lt; out: offsets on cursor-&gt;page_cur.rec */</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> **heap,   <span class="comment">/*!&lt; in/out: pointer to NULL or memory heap */</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, <span class="comment">/*!&lt; in: update vector; this must also</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">                         contain trx id and roll ptr fields */</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    ulint cmpl_info,     <span class="comment">/*!&lt; in: compiler info on secondary index</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">                       updates */</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr,      <span class="comment">/*!&lt; in: query thread, or NULL if</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">                         flags &amp; (BTR_NO_UNDO_LOG_FLAG</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">                         | BTR_NO_LOCKING_FLAG</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">                         | BTR_CREATE_FLAG</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">                         | BTR_KEEP_SYS_FLAG) */</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id,     <span class="comment">/*!&lt; in: transaction id */</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)          <span class="comment">/*!&lt; in/out: mini-transaction; if this</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">                         is a secondary index, the caller must</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">                         mtr_commit(mtr) before latching any</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">                         further pages */</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">/** Performs an update of a record on a page of a tree. It is assumed</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">that mtr holds an x-latch on the tree and on the cursor page. If the</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">update is made on the leaf level, to avoid deadlocks, mtr must also</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">own x-latches to brothers of page, if those brothers exist.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">@param[in]     flags         Undo logging, locking, and rollback flags</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">@param[in,out] cursor        cursor on the record to update;</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">                             cursor may become invalid if *big_rec == NULL</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">                             || !(flags &amp; BTR_KEEP_POS_FLAG)</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">@param[out]    offsets       Offsets on cursor-&gt;page_cur.rec</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">@param[in,out] offsets_heap  Pointer to memory heap that can be emptied,</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">                             or NULL</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">@param[in,out] entry_heap    Memory heap for allocating big_rec and the</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">                             index tuple.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">@param[out]    big_rec       Big rec vector whose fields have to be stored</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">                             externally by the caller, or NULL</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">@param[in,out] update        Update vector; this is allowed to also contain</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">                             trx id and roll ptr fields. Non-updated columns</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">                             that are moved offpage will be appended to</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">this.</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">@param[in]     cmpl_info     Compiler info on secondary index updates</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">@param[in]     thr           Query thread, or NULL if flags &amp;</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">                             (BTR_NO_UNDO_LOG_FLAG | BTR_NO_LOCKING_FLAG |</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">                              BTR_CREATE_FLAG | BTR_KEEP_SYS_FLAG)</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">@param[in]     trx_id        Transaction id</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">@param[in]     undo_no       Undo number of the transaction. This is needed</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">                             for rollback to savepoint of partially updated</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">LOB.</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">@param[in,out] mtr           Mini-transaction; must be committed before</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">latching any further pages</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">@param[in]     pcur          The persistent cursor on the record to update.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="btr0cur_8h.html#ae622ab66e6135fea46f0a590f1f46879">btr_cur_pessimistic_update</a>(</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    ulint <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, ulint **offsets, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> **offsets_heap,</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *entry_heap, <a class="code" href="structbig__rec__t.html">big_rec_t</a> **big_rec, <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, ulint cmpl_info,</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="code" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr,</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="structbtr__pcur__t.html">btr_pcur_t</a> *pcur = <span class="keyword">nullptr</span>) MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">/** Marks a clustered index record deleted. Writes an undo log record to</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment"> undo log on this delete marking. Writes in the trx id field the id</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"> of the deleting transaction, and in the roll ptr field pointer to the</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"> undo log record created.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"> @return DB_SUCCESS, DB_LOCK_WAIT, or error number */</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="btr0cur_8h.html#a769cec83638735de3b95862c5d3ee139">btr_cur_del_mark_set_clust_rec</a>(</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    ulint flags,           <span class="comment">/*!&lt; in: undo logging and locking flags */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block,    <span class="comment">/*!&lt; in/out: buffer block of the record */</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,            <span class="comment">/*!&lt; in/out: record */</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,   <span class="comment">/*!&lt; in: clustered index of the record */</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    const ulint *offsets,  <span class="comment">/*!&lt; in: rec_get_offsets(rec) */</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr,        <span class="comment">/*!&lt; in: query thread */</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    const <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>, <span class="comment">/*!&lt; in: dtuple for the deleting record */</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)            <span class="comment">/*!&lt; in/out: mini-transaction */</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">/** Sets a secondary index record delete mark to TRUE or FALSE.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"> @return DB_SUCCESS, DB_LOCK_WAIT, or error number */</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="btr0cur_8h.html#a427aa7747fe4f0f2f0f75b14fb303906">btr_cur_del_mark_set_sec_rec</a>(</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    ulint flags,       <span class="comment">/*!&lt; in: locking flag */</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, <span class="comment">/*!&lt; in: cursor */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    ibool val,         <span class="comment">/*!&lt; in: value to set */</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr,    <span class="comment">/*!&lt; in: query thread */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)        <span class="comment">/*!&lt; in/out: mini-transaction */</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">/** Tries to compress a page of the tree if it seems useful. It is assumed</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"> that mtr holds an x-latch on the tree and on the cursor page. To avoid</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"> deadlocks, mtr must also own x-latches to brothers of page, if those</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"> brothers exist. NOTE: it is assumed that the caller has reserved enough</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"> free extents so that the compression will always succeed if done!</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"> @return true if compression occurred */</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;ibool <a class="code" href="btr0cur_8h.html#a64fd277719862187604bf48005ec191c">btr_cur_compress_if_useful</a>(</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, <span class="comment">/*!&lt; in/out: cursor on the page to compress;</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">                       cursor does not stay valid if compression</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">                       occurs */</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    ibool adjust,      <span class="comment">/*!&lt; in: TRUE if should adjust the</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">                       cursor position even if compression occurs */</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);       <span class="comment">/*!&lt; in/out: mini-transaction */</span><span class="comment"></span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">/** Removes the record on which the tree cursor is positioned. It is assumed</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"> that the mtr has an x-latch on the page where the cursor is positioned,</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"> but no latch on the whole tree.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"> @return true if success, i.e., the page did not become too empty */</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;ibool <a class="code" href="btr0cur_8h.html#a8d02deb9d204909dbee067cb7e84c2a7">btr_cur_optimistic_delete_func</a>(</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, <span class="comment">/*!&lt; in: cursor on the record to delete;</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">                       cursor stays valid: if deletion succeeds,</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">                       on function exit it points to the successor</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">                       of the deleted record */</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    ulint <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, <span class="comment">/*!&lt; in: BTR_CREATE_FLAG or 0 */</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">#endif           </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)  <span class="comment">/*!&lt; in: mtr; if this function returns</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">                 TRUE on a leaf page of a secondary</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">                 index, the mtr must be committed</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">                 before latching any further pages */</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#abee4744ed5f9d94ff1ad4026226475c5">  491</a></span>&#160;<span class="preprocessor">#define btr_cur_optimistic_delete(cursor, flags, mtr) \</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">  btr_cur_optimistic_delete_func(cursor, flags, mtr)</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="preprocessor">#define btr_cur_optimistic_delete(cursor, flags, mtr) \</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="preprocessor">  btr_cur_optimistic_delete_func(cursor, mtr)</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">/** Removes the record on which the tree cursor is positioned. Tries</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment"> to compress the page if its fillfactor drops below a threshold</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"> or if it is the only page on the level. It is assumed that mtr holds</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"> an x-latch on the tree and on the cursor page. To avoid deadlocks,</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment"> mtr must also own x-latches to brothers of page, if those brothers</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"> exist.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">@param[out] err DB_SUCCESS or DB_OUT_OF_FILE_SPACE; the latter may occur</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">                because we may have to update node pointers on upper</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">                levels, and in the case of variable length keys these may</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">                actually grow in size</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">@param[in] has_reserved_extents TRUE if the caller has already reserved</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">                                enough free extents so that he knows</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">                                that the operation will succeed</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">@param[in] cursor Cursor on the record to delete; if compression does not</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">                  occur, the cursor stays valid: it points to successor of</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">                  deleted record on function exit</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">@param[in] flags  BTR_CREATE_FLAG or 0</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">@param[in] rollback True if performing rollback, false otherwise.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">@param[in] trx_id The current transaction id.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">@param[in] undo_no Undo number of the transaction. This is needed for</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">rollback to savepoint of partially updated LOB.</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">@param[in] rec_type Undo record type.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">@param[in] mtr Mini-transaction</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">@param[in] pcur   Persistent cursor on the record to delete.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">@return true if compression occurred */</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;ibool <a class="code" href="btr0cur_8h.html#a021620bced223499dba9da23c327f2c1">btr_cur_pessimistic_delete</a>(<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *<a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>, ibool has_reserved_extents,</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                 <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, uint32_t flags,</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                 <span class="keywordtype">bool</span> <a class="code" href="sql__cmd__srs_8cc.html#ae1f3a7aed6d381dcd98b265913716fd4">rollback</a>, <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id,</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                                 <a class="code" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no, ulint rec_type, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr,</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                                 <a class="code" href="structbtr__pcur__t.html">btr_pcur_t</a> *pcur = <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">/** Parses a redo log record of updating a record in-place.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"> @return end of log record or NULL */</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="btr0cur_8h.html#a2779e13e725b69e10b92eba034a1a143">btr_cur_parse_update_in_place</a>(</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr,                <span class="comment">/*!&lt; in: buffer */</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr,            <span class="comment">/*!&lt; in: buffer end */</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>,             <span class="comment">/*!&lt; in/out: page or NULL */</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip, <span class="comment">/*!&lt; in/out: compressed page, or NULL */</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *index);     <span class="comment">/*!&lt; in: index corresponding to page */</span><span class="comment"></span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/** Parses the redo log record for delete marking or unmarking of a</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"> clustered index record.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"> @return end of log record or NULL */</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="btr0cur_8h.html#a63c486e1078df1872ee87c377006674a">btr_cur_parse_del_mark_set_clust_rec</a>(</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr,                <span class="comment">/*!&lt; in: buffer */</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr,            <span class="comment">/*!&lt; in: buffer end */</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>,             <span class="comment">/*!&lt; in/out: page or NULL */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip, <span class="comment">/*!&lt; in/out: compressed page, or NULL */</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *index);     <span class="comment">/*!&lt; in: index corresponding to page */</span><span class="comment"></span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">/** Parses the redo log record for delete marking or unmarking of a</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"> secondary index record.</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"> @return end of log record or NULL */</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="btr0cur_8h.html#a9c0c1be287e095e69d5f46809e583700">btr_cur_parse_del_mark_set_sec_rec</a>(</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr,                 <span class="comment">/*!&lt; in: buffer */</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr,             <span class="comment">/*!&lt; in: buffer end */</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>,              <span class="comment">/*!&lt; in/out: page or NULL */</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip); <span class="comment">/*!&lt; in/out: compressed page, or NULL */</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/** Estimates the number of rows in a given index range.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">@param[in]      index   index</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">@param[in]      tuple1  range start, may also be empty tuple</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">@param[in]      mode1   search mode for range start</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">@param[in]      tuple2  range end, may also be empty tuple</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">@param[in]      mode2   search mode for range end</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">@return estimated number of rows */</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;int64_t <a class="code" href="btr0cur_8h.html#ab2103e405e81402bc71b951afb1e583c">btr_estimate_n_rows_in_range</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *index,</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *tuple1,</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                                     <a class="code" href="page0types_8h.html#a09a7c28cbc96005a4ad8497a1a195dba">page_cur_mode_t</a> mode1,</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *tuple2,</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                     <a class="code" href="page0types_8h.html#a09a7c28cbc96005a4ad8497a1a195dba">page_cur_mode_t</a> mode2);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">/** Estimates the number of different key values in a given index, for</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"> each n-column prefix of the index where 1 &lt;= n &lt;=</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"> dict_index_get_n_unique(index). The estimates are stored in the array</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"> index-&gt;stat_n_diff_key_vals[] (indexed 0..n_uniq-1) and the number of pages</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"> that were sampled is saved in index-&gt;stat_n_sample_sizes[]. If</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"> innodb_stats_method is nulls_ignored, we also record the number of non-null</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"> values for each prefix and stored the estimates in array</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"> index-&gt;stat_n_non_null_key_vals.</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment"> @return true if the index is available and we get the estimated numbers,</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment"> false if the index is unavailable. */</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="btr0cur_8h.html#a0f4bd3b42e8c550c943089ebef00fe54">btr_estimate_number_of_different_key_vals</a>(</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *index); <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">/** Copies an externally stored field of a record to mem heap.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">@param[in]      trx             the trx doing the operation.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">@param[in]      index           index containing the LOB.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">@param[in]      rec             record in a clustered index; must be</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">                                protected by a lock or a page latch</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">@param[in]      offsets         array returned by rec_get_offsets()</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">@param[in]      page_size       BLOB page size</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">@param[in]      no              field number</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">@param[out]     len             length of the field</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">@param[out]     lob_version     version of lob */</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">@param[in]      is_sdi          true for SDI Indexes */</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">@param[in,out]  heap            mem heap</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">@return the field copied to heap, or NULL if the field is incomplete */</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="btr0cur_8h.html#a826f0a22e993bf66a9aaaec481c11631">btr_rec_copy_externally_stored_field_func</a>(</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__index__t.html">dict_index_t</a> *index, <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <span class="keyword">const</span> ulint *offsets,</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size, ulint no, ulint *len, <span class="keywordtype">size_t</span> *lob_version,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;#ifdef UNIV_DEBUG</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordtype">bool</span> is_sdi,</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;#endif <span class="comment">/* UNIV_DEBUG */</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">/** Sets a secondary index record&#39;s delete mark to the given value. This</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment"> function is only used by the insert buffer merge mechanism. */</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#af010a9efa9efe7a02c590a268e7d810d">btr_cur_set_deleted_flag_for_ibuf</a>(</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,               <span class="comment">/*!&lt; in/out: record */</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip, <span class="comment">/*!&lt; in/out: compressed page</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">                              corresponding to rec, or NULL</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">                              when the tablespace is uncompressed */</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    ibool val,                <span class="comment">/*!&lt; in: value to set */</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);              <span class="comment">/*!&lt; in/out: mini-transaction */</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">/** The following function is used to set the deleted bit of a record.</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">@param[in,out]  rec             physical record</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">@param[in,out]  page_zip        compressed page (or NULL)</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">@param[in]      flag            nonzero if delete marked */</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#a649dfaf6f1de1688d814e6e95ac1caf5">btr_rec_set_deleted_flag</a>(<a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip, ulint <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">/** Latches the leaf page or pages requested.</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">@param[in]      block           Leaf page where the search converged</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">@param[in]      page_id         Page id of the leaf</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">@param[in]      page_size       Page size</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">@param[in]      latch_mode      BTR_SEARCH_LEAF, ...</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">@param[in]      cursor          Cursor</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">@param[in]      mtr             Mini-transaction</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">@return blocks and savepoints which actually latched. */</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<a class="code" href="structbtr__latch__leaves__t.html">btr_latch_leaves_t</a> <a class="code" href="btr0cur_8h.html#a6270343de26ab24466bb5980d91848e9">btr_cur_latch_leaves</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block,</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size,</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                        ulint latch_mode, <a class="code" href="structbtr__cur__t.html">btr_cur_t</a> *cursor,</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                        <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/*######################################################################*/</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">/** In the pessimistic delete, if the page data size drops below this</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">limit, merging it to a neighbor is tried */</span></div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#a60cd2602e89746b77aa7333bf5d49b48">  643</a></span>&#160;<span class="preprocessor">#define BTR_CUR_PAGE_COMPRESS_LIMIT(index) \</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="preprocessor">  ((UNIV_PAGE_SIZE * (ulint)((index)-&gt;merge_threshold)) / 100)</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">/** A slot in the path array. We store here info on a search path down the</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">tree. Each slot contains data on a single level of the tree. */</span></div><div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="structbtr__path__t.html">  648</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbtr__path__t.html">btr_path_t</a> {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">/* Assume a page like:</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">  records:              (inf, a, b, c, d, sup)</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">  index of the record:  0, 1, 2, 3, 4, 5</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">  /** Index of the record where the page cursor stopped on this level</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">  (index in alphabetical order). Value ULINT_UNDEFINED denotes array</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">  end. In the above example, if the search stopped on record &#39;c&#39;, then</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">  nth_rec will be 3. */</span></div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="structbtr__path__t.html#a354beadc832f4dd77c87592dfab035e1">  658</a></span>&#160;  ulint nth_rec{ULINT_UNDEFINED};</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">  /** Number of the records on the page, not counting inf and sup.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">  In the above example n_recs will be 4. */</span></div><div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="structbtr__path__t.html#a846f459ded7c181c91bece2e35be341a">  662</a></span>&#160;  ulint n_recs{ULINT_UNDEFINED};</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">  /** Number of the page containing the record. */</span></div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="structbtr__path__t.html#ac092c620d59e988f75c356009d3ab4c4">  665</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no{<a class="code" href="fil0fil_8h.html#a578077ea17f5093fc8fa7381ae89f7c8">FIL_NULL</a>};</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">  /** Level of the page. If later we fetch the page under page_no</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">  and it is on a different level then we know that the tree has been</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">  reorganized. */</span></div><div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="structbtr__path__t.html#aaa8259507f0c7d74c6a46d26e47ca62d">  670</a></span>&#160;  ulint page_level{ULINT_UNDEFINED};</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;};</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#a4d03f55936b83f0125d0d45116459421">  673</a></span>&#160;<span class="preprocessor">#define BTR_PATH_ARRAY_N_SLOTS 250 </span><span class="comment">/*!&lt; size of path array (in slots) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">/** Values for the flag documenting the used search method */</span></div><div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96">  676</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96">btr_cur_method</a> {</div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96ae0937e0fc6102b4cc54bb049119f35ac">  677</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96ae0937e0fc6102b4cc54bb049119f35ac">BTR_CUR_UNSET</a> = 0,      <span class="comment">/*!&lt; Flag for initialization only,</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">                          not in real use. */</span></div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96aa5e657955c98714ac4df0abd6c2856c0">  679</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96aa5e657955c98714ac4df0abd6c2856c0">BTR_CUR_HASH</a> = 1,       <span class="comment">/*!&lt; successful shortcut using</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">                          the hash index */</span></div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a0c0b480a0e2ff01e08a968319e27135d">  681</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a0c0b480a0e2ff01e08a968319e27135d">BTR_CUR_HASH_FAIL</a>,      <span class="comment">/*!&lt; failure using hash, success using</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">                          binary search: the misleading hash</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">                          reference is stored in the field</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">                          hash_node, and might be necessary to</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">                          update */</span></div><div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a9e995eb02ca7ee7e67da00cbe8bf2eda">  686</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a9e995eb02ca7ee7e67da00cbe8bf2eda">BTR_CUR_BINARY</a>,         <span class="comment">/*!&lt; success using the binary search */</span></div><div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a6c64e9fa37d7185525aa24d3dcffd915">  687</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a6c64e9fa37d7185525aa24d3dcffd915">BTR_CUR_INSERT_TO_IBUF</a>, <span class="comment">/*!&lt; performed the intended insert to</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">                          the insert buffer */</span></div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96aee5660b8b720720ebbf507080a04739f">  689</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96aee5660b8b720720ebbf507080a04739f">BTR_CUR_DEL_MARK_IBUF</a>,  <span class="comment">/*!&lt; performed the intended delete</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">                          mark in the insert/delete buffer */</span></div><div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96acf08a9d1477925822b67557699699f67">  691</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96acf08a9d1477925822b67557699699f67">BTR_CUR_DELETE_IBUF</a>,    <span class="comment">/*!&lt; performed the intended delete in</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">                          the insert/delete buffer */</span></div><div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a3761d0d9cf510bcb30c8a63336f4d4c7">  693</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a3761d0d9cf510bcb30c8a63336f4d4c7">BTR_CUR_DELETE_REF</a>      <span class="comment">/*!&lt; row_purge_poss_sec() failed */</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;};</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">/** The tree cursor: the definition appears here only for the compiler</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">to know struct size! */</span></div><div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html">  698</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbtr__cur__t.html">btr_cur_t</a> {</div><div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a1d268419dab170f2cb96f2548ad99833">  699</a></span>&#160;  <a class="code" href="structdict__index__t.html">dict_index_t</a> *index{<span class="keyword">nullptr</span>};      <span class="comment">/*!&lt; index where positioned */</span></div><div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a9253723254187180d0faac6181b67eb2">  700</a></span>&#160;  <a class="code" href="structpage__cur__t.html">page_cur_t</a> <a class="code" href="structbtr__cur__t.html#a9253723254187180d0faac6181b67eb2">page_cur</a>;               <span class="comment">/*!&lt; page cursor */</span></div><div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#af7ccc3136c5d05dfde0adb99999f8abd">  701</a></span>&#160;  <a class="code" href="structpurge__node__t.html">purge_node_t</a> *purge_node{<span class="keyword">nullptr</span>}; <span class="comment">/*!&lt; purge node, for BTR_DELETE */</span></div><div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a25182b696360c3c2642afbe02632e94a">  702</a></span>&#160;  <a class="code" href="structbuf__block__t.html">buf_block_t</a> *left_block{<span class="keyword">nullptr</span>};  <span class="comment">/*!&lt; this field is used to store</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">                             a pointer to the left neighbor</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">                             page, in the cases</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">                             BTR_SEARCH_PREV and</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">                             BTR_MODIFY_PREV */</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">/*------------------------------*/</span></div><div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a2d282d51b5b5a01eaa73156b6b15c989">  708</a></span>&#160;  <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr{<span class="keyword">nullptr</span>}; <span class="comment">/*!&lt; this field is only used</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">                           when btr_cur_search_to_nth_level</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">                           is called for an index entry</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">                           insertion: the calling query</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">                           thread is passed here to be</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">                           used in the insert buffer */</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">/*------------------------------*/</span><span class="comment"></span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">  /** The following fields are used in</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">  btr_cur_search_to_nth_level to pass information: */</span><span class="comment"></span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#ad187ccf138e2774d5808ab7025bfcb34">  718</a></span>&#160;  <a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96">btr_cur_method</a> <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>{<a class="code" href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96ae0937e0fc6102b4cc54bb049119f35ac">BTR_CUR_UNSET</a>}; <span class="comment">/*!&lt; Search method used */</span></div><div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#ae0965355e46e748a0c0e1443815a7b45">  719</a></span>&#160;  ulint tree_height{0};               <span class="comment">/*!&lt; Tree height if the search is done</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">                                      for a pessimistic insert or update</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">                                      operation */</span></div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#ab6e61395124bb678669bc4c9fa8aa530">  722</a></span>&#160;  ulint up_match{0};                  <span class="comment">/*!&lt; If the search mode was PAGE_CUR_LE,</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">                                      the number of matched fields to the</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">                                      the first user record to the right of</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">                                      the cursor record after</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">                                      btr_cur_search_to_nth_level;</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">                                      for the mode PAGE_CUR_GE, the matched</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">                                      fields to the first user record AT THE</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">                                      CURSOR or to the right of it;</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">                                      NOTE that the up_match and low_match</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">                                      values may exceed the correct values</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">                                      for comparison to the adjacent user</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">                                      record if that record is on a</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">                                      different leaf page! (See the note in</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">                                      row_ins_duplicate_error_in_clust.) */</span></div><div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a56f16ba4b9de3974d1ae448e63b26b26">  736</a></span>&#160;  ulint up_bytes{0};                  <span class="comment">/*!&lt; number of matched bytes to the</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">                                      right at the time cursor positioned;</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">                                      only used internally in searches: not</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">                                      defined after the search */</span></div><div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a4e88fa74cc4375d18977441e640f6d78">  740</a></span>&#160;  ulint low_match{0};                 <span class="comment">/*!&lt; if search mode was PAGE_CUR_LE,</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">                                      the number of matched fields to the</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">                                      first user record AT THE CURSOR or</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">                                      to the left of it after</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">                                      btr_cur_search_to_nth_level;</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">                                      NOT defined for PAGE_CUR_GE or any</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">                                      other search modes; see also the NOTE</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">                                      in up_match! */</span></div><div class="line"><a name="l00748"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#af6293fe0bebad67b4818cf58a1c2d8a9">  748</a></span>&#160;  ulint low_bytes{0};                 <span class="comment">/*!&lt; number of matched bytes to the</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">                                      left at the time cursor positioned;</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">                                      only used internally in searches: not</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">                                      defined after the search */</span></div><div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#ac425feeccc7f817c272bcb4e1546992d">  752</a></span>&#160;  ulint n_fields{0};                  <span class="comment">/*!&lt; prefix length used in a hash</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">                                      search if hash_node != NULL */</span></div><div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a96579475a033417c5e329433e1561dbc">  754</a></span>&#160;  ulint n_bytes{0};                   <span class="comment">/*!&lt; hash prefix bytes if hash_node !=</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">                                      NULL */</span></div><div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#aaa76412298b4a5ed0e30f03871dedad0">  756</a></span>&#160;  ulint fold{0};                      <span class="comment">/*!&lt; fold value used in the search if</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">                                      flag is BTR_CUR_HASH */</span><span class="comment"></span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">  /** @} */</span></div><div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a97469530288b42f4b264911b918ea4cd">  759</a></span>&#160;  <a class="code" href="structbtr__path__t.html">btr_path_t</a> *path_arr{<span class="keyword">nullptr</span>}; <span class="comment">/*!&lt; in estimating the number of</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">                         rows in range, we store in this array</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">                         information of the path through</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">                         the tree */</span></div><div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a929a2bceb23d7516d086cf8e675812e2">  763</a></span>&#160;  <a class="code" href="structrtr__info.html">rtr_info_t</a> *<a class="code" href="structrtr__info.html">rtr_info</a>{<span class="keyword">nullptr</span>}; <span class="comment">/*!&lt; rtree search info */</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">  /** Ownership of the above rtr_info member. */</span></div><div class="line"><a name="l00766"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#a3442b0e6c45f1f524497104f67920024">  766</a></span>&#160;  <span class="keywordtype">bool</span> m_own_rtr_info = <span class="keyword">true</span>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">  /** If cursor is used in a scan or simple page fetch. */</span></div><div class="line"><a name="l00769"></a><span class="lineno"><a class="line" href="structbtr__cur__t.html#af9c63c3edb762eadc1340291fffd477d">  769</a></span>&#160;  <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7">Page_fetch</a> m_fetch_mode{<a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a1e23852820b9154316c7c06e2b7ba051">Page_fetch::NORMAL</a>};</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;};</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">/** The following function is used to set the deleted bit of a record.</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">@param[in,out]  rec             physical record</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">@param[in,out]  page_zip        compressed page (or NULL)</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">@param[in]      flag            nonzero if delete marked */</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="keywordtype">void</span> <a class="code" href="btr0cur_8h.html#a649dfaf6f1de1688d814e6e95ac1caf5">btr_rec_set_deleted_flag</a>(<a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip, ulint <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">/** If pessimistic delete fails because of lack of file space, there</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">is still a good change of success a little later.  Try this many</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">times. */</span></div><div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#a5bff9b3a120d816b69c28745df3a1c74">  782</a></span>&#160;<span class="preprocessor">#define BTR_CUR_RETRY_DELETE_N_TIMES 100</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">/** If pessimistic delete fails because of lack of file space, there</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">is still a good change of success a little later.  Sleep this many</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">microseconds between retries. */</span></div><div class="line"><a name="l00786"></a><span class="lineno"><a class="line" href="btr0cur_8h.html#a275ba443abeacaaaf592c871624ce84b">  786</a></span>&#160;<span class="preprocessor">#define BTR_CUR_RETRY_SLEEP_TIME 50000</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">/** Number of searches down the B-tree in btr_cur_search_to_nth_level(). */</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="btr0cur_8h.html#a7b7a92b1123d6493729904f846f05a03">btr_cur_n_non_sea</a>;<span class="comment"></span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">/** Number of successful adaptive hash index lookups in</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">btr_cur_search_to_nth_level(). */</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="btr0cur_8h.html#ae0b3d4f868488aa0addf8d9fa32df663">btr_cur_n_sea</a>;<span class="comment"></span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">/** Old value of btr_cur_n_non_sea.  Copied by</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">srv_refresh_innodb_monitor_stats().  Referenced by</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">srv_printf_innodb_monitor(). */</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="btr0cur_8h.html#aefef1d2e4bf03540d18ff799bf9c0a74">btr_cur_n_non_sea_old</a>;<span class="comment"></span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">/** Old value of btr_cur_n_sea.  Copied by</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">srv_refresh_innodb_monitor_stats().  Referenced by</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">srv_printf_innodb_monitor(). */</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="btr0cur_8h.html#a8df6a65d39b12848a998a57d2cc328d0">btr_cur_n_sea_old</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">/* Flag to limit optimistic insert records */</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="keyword">extern</span> <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="btr0cur_8h.html#a2f6f6e317169b84969361e99eb711b3b">btr_cur_limit_optimistic_insert_debug</a>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="preprocessor">#include &quot;btr0cur.ic&quot;</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="btr0cur_8h_html_ac791b66a82093c303b1b2aaf4f185edea1fb016f118032fcb677c3b2a4f107e2b"><div class="ttname"><a href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1fb016f118032fcb677c3b2a4f107e2b">BTR_NO_UNDO_LOG_FLAG</a></div><div class="ttdoc">do no undo logging </div><div class="ttdef"><b>Definition:</b> btr0cur.h:48</div></div>
<div class="ttc" id="structpage__zip__des__t_html"><div class="ttname"><a href="structpage__zip__des__t.html">page_zip_des_t</a></div><div class="ttdoc">Compressed page descriptor. </div><div class="ttdef"><b>Definition:</b> page0types.h:197</div></div>
<div class="ttc" id="structbtr__latch__leaves__t_html_a3c758c5eef1e02412dc32e6f45f120f3"><div class="ttname"><a href="structbtr__latch__leaves__t.html#a3c758c5eef1e02412dc32e6f45f120f3">btr_latch_leaves_t::savepoints</a></div><div class="ttdeci">ulint savepoints[3]</div><div class="ttdef"><b>Definition:</b> btr0cur.h:70</div></div>
<div class="ttc" id="btr0cur_8h_html_aefef1d2e4bf03540d18ff799bf9c0a74"><div class="ttname"><a href="btr0cur_8h.html#aefef1d2e4bf03540d18ff799bf9c0a74">btr_cur_n_non_sea_old</a></div><div class="ttdeci">ulint btr_cur_n_non_sea_old</div><div class="ttdoc">Old value of btr_cur_n_non_sea. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:133</div></div>
<div class="ttc" id="btr0cur_8h_html_a9c0c1be287e095e69d5f46809e583700"><div class="ttname"><a href="btr0cur_8h.html#a9c0c1be287e095e69d5f46809e583700">btr_cur_parse_del_mark_set_sec_rec</a></div><div class="ttdeci">byte * btr_cur_parse_del_mark_set_sec_rec(byte *ptr, byte *end_ptr, page_t *page, page_zip_des_t *page_zip)</div><div class="ttdoc">Parses the redo log record for delete marking or unmarking of a secondary index record. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:4378</div></div>
<div class="ttc" id="api0api_8h_html_a3a920291a017c14a72331c818adf2265"><div class="ttname"><a href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a></div><div class="ttdeci">uint32 page_no_t</div><div class="ttdoc">Page number. </div><div class="ttdef"><b>Definition:</b> api0api.h:57</div></div>
<div class="ttc" id="trx0types_8h_html_ad3ccac613ce33a8680d147c4a4f12e94"><div class="ttname"><a href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a></div><div class="ttdeci">ib_id_t roll_ptr_t</div><div class="ttdoc">Rollback pointer (DB_ROLL_PTR, DATA_ROLL_PTR) </div><div class="ttdef"><b>Definition:</b> trx0types.h:146</div></div>
<div class="ttc" id="gis0type_8h_html"><div class="ttname"><a href="gis0type_8h.html">gis0type.h</a></div><div class="ttdoc">R-tree header file. </div></div>
<div class="ttc" id="btr0cur_8h_html_ae0b3d4f868488aa0addf8d9fa32df663"><div class="ttname"><a href="btr0cur_8h.html#ae0b3d4f868488aa0addf8d9fa32df663">btr_cur_n_sea</a></div><div class="ttdeci">ulint btr_cur_n_sea</div><div class="ttdoc">Number of successful adaptive hash index lookups in btr_cur_search_to_nth_level(). </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:129</div></div>
<div class="ttc" id="btr0cur_8h_html_ae97879c31eba0c93fdb888685580771a"><div class="ttname"><a href="btr0cur_8h.html#ae97879c31eba0c93fdb888685580771a">btr_cur_open_at_rnd_pos_func</a></div><div class="ttdeci">bool btr_cur_open_at_rnd_pos_func(dict_index_t *index, ulint latch_mode, btr_cur_t *cursor, const char *file, ulint line, mtr_t *mtr)</div><div class="ttdoc">Positions a cursor at a randomly chosen position within a B-tree. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:2247</div></div>
<div class="ttc" id="structtrx__t_html"><div class="ttname"><a href="structtrx__t.html">trx_t</a></div><div class="ttdef"><b>Definition:</b> trx0trx.h:833</div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96aee5660b8b720720ebbf507080a04739f"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96aee5660b8b720720ebbf507080a04739f">BTR_CUR_DEL_MARK_IBUF</a></div><div class="ttdoc">performed the intended delete mark in the insert/delete buffer </div><div class="ttdef"><b>Definition:</b> btr0cur.h:689</div></div>
<div class="ttc" id="structbuf__block__t_html"><div class="ttname"><a href="structbuf__block__t.html">buf_block_t</a></div><div class="ttdoc">The buffer control block structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1324</div></div>
<div class="ttc" id="classpage__id__t_html"><div class="ttname"><a href="classpage__id__t.html">page_id_t</a></div><div class="ttdoc">Page identifier. </div><div class="ttdef"><b>Definition:</b> buf0types.h:158</div></div>
<div class="ttc" id="btr0cur_8h_html_ac791b66a82093c303b1b2aaf4f185edea1891f77b4a41b153e3445a43c806efcf"><div class="ttname"><a href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1891f77b4a41b153e3445a43c806efcf">BTR_KEEP_IBUF_BITMAP</a></div><div class="ttdoc">the caller of btr_cur_optimistic_update() or btr_cur_update_in_place() will take care of updating IBU...</div><div class="ttdef"><b>Definition:</b> btr0cur.h:63</div></div>
<div class="ttc" id="structpurge__node__t_html"><div class="ttname"><a href="structpurge__node__t.html">purge_node_t</a></div><div class="ttdef"><b>Definition:</b> row0purge.h:81</div></div>
<div class="ttc" id="sql__cmd__srs_8cc_html_ae1f3a7aed6d381dcd98b265913716fd4"><div class="ttname"><a href="sql__cmd__srs_8cc.html#ae1f3a7aed6d381dcd98b265913716fd4">rollback</a></div><div class="ttdeci">static bool rollback(THD *thd)</div><div class="ttdoc">Abort the current statement and transaction. </div><div class="ttdef"><b>Definition:</b> sql_cmd_srs.cc:139</div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96aa5e657955c98714ac4df0abd6c2856c0"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96aa5e657955c98714ac4df0abd6c2856c0">BTR_CUR_HASH</a></div><div class="ttdoc">successful shortcut using the hash index </div><div class="ttdef"><b>Definition:</b> btr0cur.h:679</div></div>
<div class="ttc" id="namespacestdx_1_1io_html_a2c9b563b772005f7960909d0d12186f5"><div class="ttname"><a href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">stdx::io::mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> file_handle.h:59</div></div>
<div class="ttc" id="structbtr__cur__t_html"><div class="ttname"><a href="structbtr__cur__t.html">btr_cur_t</a></div><div class="ttdoc">The tree cursor: the definition appears here only for the compiler to know struct size! ...</div><div class="ttdef"><b>Definition:</b> btr0cur.h:698</div></div>
<div class="ttc" id="btr0cur_8h_html_af010a9efa9efe7a02c590a268e7d810d"><div class="ttname"><a href="btr0cur_8h.html#af010a9efa9efe7a02c590a268e7d810d">btr_cur_set_deleted_flag_for_ibuf</a></div><div class="ttdeci">void btr_cur_set_deleted_flag_for_ibuf(rec_t *rec, page_zip_des_t *page_zip, ibool val, mtr_t *mtr)</div><div class="ttdoc">Sets a secondary index record&amp;#39;s delete mark to the given value. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:4457</div></div>
<div class="ttc" id="btr0cur_8h_html_a0ed1c2c1c1cd96ec7b4a61206e74e0f9"><div class="ttname"><a href="btr0cur_8h.html#a0ed1c2c1c1cd96ec7b4a61206e74e0f9">btr_cur_get_block</a></div><div class="ttdeci">UNIV_INLINE buf_block_t * btr_cur_get_block(const btr_cur_t *cursor)</div><div class="ttdoc">Returns the buffer block on which the tree cursor is positioned. </div></div>
<div class="ttc" id="ha0ha_8h_html"><div class="ttname"><a href="ha0ha_8h.html">ha0ha.h</a></div><div class="ttdoc">The hash table with external chains. </div></div>
<div class="ttc" id="structbtr__path__t_html"><div class="ttname"><a href="structbtr__path__t.html">btr_path_t</a></div><div class="ttdoc">A slot in the path array. </div><div class="ttdef"><b>Definition:</b> btr0cur.h:648</div></div>
<div class="ttc" id="btr0cur_8h_html_a6270343de26ab24466bb5980d91848e9"><div class="ttname"><a href="btr0cur_8h.html#a6270343de26ab24466bb5980d91848e9">btr_cur_latch_leaves</a></div><div class="ttdeci">btr_latch_leaves_t btr_cur_latch_leaves(buf_block_t *block, const page_id_t &amp;page_id, const page_size_t &amp;page_size, ulint latch_mode, btr_cur_t *cursor, mtr_t *mtr)</div><div class="ttdoc">Latches the leaf page or pages requested. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:179</div></div>
<div class="ttc" id="structmem__block__info__t_html"><div class="ttname"><a href="structmem__block__info__t.html">mem_block_info_t</a></div><div class="ttdoc">The info structure stored at the beginning of a heap block. </div><div class="ttdef"><b>Definition:</b> mem0mem.h:349</div></div>
<div class="ttc" id="btr0cur_8h_html_ae37c362a21cd664ca4fe74169890e1db"><div class="ttname"><a href="btr0cur_8h.html#ae37c362a21cd664ca4fe74169890e1db">btr_cur_open_at_index_side_with_no_latch_func</a></div><div class="ttdeci">void btr_cur_open_at_index_side_with_no_latch_func(bool from_left, dict_index_t *index, btr_cur_t *cursor, ulint level, const char *file, ulint line, mtr_t *mtr)</div><div class="ttdoc">Opens a cursor at either end of an index. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:2163</div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96a9e995eb02ca7ee7e67da00cbe8bf2eda"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a9e995eb02ca7ee7e67da00cbe8bf2eda">BTR_CUR_BINARY</a></div><div class="ttdoc">success using the binary search </div><div class="ttdef"><b>Definition:</b> btr0cur.h:686</div></div>
<div class="ttc" id="structbtr__pcur__t_html"><div class="ttname"><a href="structbtr__pcur__t.html">btr_pcur_t</a></div><div class="ttdef"><b>Definition:</b> btr0pcur.h:178</div></div>
<div class="ttc" id="btr0cur_8h_html_aca2f4cf3c619c6630d174de684f44f80"><div class="ttname"><a href="btr0cur_8h.html#aca2f4cf3c619c6630d174de684f44f80">btr_cur_pessimistic_insert</a></div><div class="ttdeci">dberr_t btr_cur_pessimistic_insert(uint32_t flags, btr_cur_t *cursor, ulint **offsets, mem_heap_t **heap, dtuple_t *entry, rec_t **rec, big_rec_t **big_rec, que_thr_t *thr, mtr_t *mtr)</div><div class="ttdoc">Performs an insert on a page of an index tree. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:2926</div></div>
<div class="ttc" id="btr0cur_8h_html_aed5024b078b665885c29921798da75dc"><div class="ttname"><a href="btr0cur_8h.html#aed5024b078b665885c29921798da75dc">btr_cur_get_page</a></div><div class="ttdeci">UNIV_INLINE page_t * btr_cur_get_page(btr_cur_t *cursor)</div><div class="ttdoc">Returns the page of a tree cursor. </div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96">btr_cur_method</a></div><div class="ttdeci">btr_cur_method</div><div class="ttdoc">Values for the flag documenting the used search method. </div><div class="ttdef"><b>Definition:</b> btr0cur.h:676</div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96acf08a9d1477925822b67557699699f67"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96acf08a9d1477925822b67557699699f67">BTR_CUR_DELETE_IBUF</a></div><div class="ttdoc">performed the intended delete in the insert/delete buffer </div><div class="ttdef"><b>Definition:</b> btr0cur.h:691</div></div>
<div class="ttc" id="que0types_8h_html"><div class="ttname"><a href="que0types_8h.html">que0types.h</a></div><div class="ttdoc">Query graph global types. </div></div>
<div class="ttc" id="btr0cur_8h_html_ac791b66a82093c303b1b2aaf4f185edea1a9e17a40a357b5194b5b12eccdf9eee"><div class="ttname"><a href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea1a9e17a40a357b5194b5b12eccdf9eee">BTR_KEEP_POS_FLAG</a></div><div class="ttdoc">btr_cur_pessimistic_update() must keep cursor position when moving columns to big_rec ...</div><div class="ttdef"><b>Definition:</b> btr0cur.h:56</div></div>
<div class="ttc" id="btr0cur_8h_html_a2f6f6e317169b84969361e99eb711b3b"><div class="ttname"><a href="btr0cur_8h.html#a2f6f6e317169b84969361e99eb711b3b">btr_cur_limit_optimistic_insert_debug</a></div><div class="ttdeci">uint btr_cur_limit_optimistic_insert_debug</div><div class="ttdef"><b>Definition:</b> btr0cur.cc:141</div></div>
<div class="ttc" id="btr0cur_8h_html_ab2103e405e81402bc71b951afb1e583c"><div class="ttname"><a href="btr0cur_8h.html#ab2103e405e81402bc71b951afb1e583c">btr_estimate_n_rows_in_range</a></div><div class="ttdeci">int64_t btr_estimate_n_rows_in_range(dict_index_t *index, const dtuple_t *tuple1, page_cur_mode_t mode1, const dtuple_t *tuple2, page_cur_mode_t mode2)</div><div class="ttdoc">Estimates the number of rows in a given index range. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:5350</div></div>
<div class="ttc" id="btr0cur_8h_html_a52da3d18db03ccf442a23ac877cc8336"><div class="ttname"><a href="btr0cur_8h.html#a52da3d18db03ccf442a23ac877cc8336">btr_cur_search_to_nth_level_with_no_latch</a></div><div class="ttdeci">void btr_cur_search_to_nth_level_with_no_latch(dict_index_t *index, ulint level, const dtuple_t *tuple, page_cur_mode_t mode, btr_cur_t *cursor, const char *file, ulint line, mtr_t *mtr, bool mark_dirty=true)</div><div class="ttdoc">Searches an index tree and positions a tree cursor on a given level. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:1709</div></div>
<div class="ttc" id="structbtr__latch__leaves__t_html"><div class="ttname"><a href="structbtr__latch__leaves__t.html">btr_latch_leaves_t</a></div><div class="ttdef"><b>Definition:</b> btr0cur.h:67</div></div>
<div class="ttc" id="btr0types_8h_html"><div class="ttname"><a href="btr0types_8h.html">btr0types.h</a></div><div class="ttdoc">The index tree general types. </div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7">Page_fetch</a></div><div class="ttdeci">Page_fetch</div><div class="ttdef"><b>Definition:</b> buf0buf.h:57</div></div>
<div class="ttc" id="ctype-mb_8cc_html_adf406aa6822ceac22d62ef63cc2879c0"><div class="ttname"><a href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a></div><div class="ttdeci">int page</div><div class="ttdef"><b>Definition:</b> ctype-mb.cc:1234</div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="dict0dict_8h_html"><div class="ttname"><a href="dict0dict_8h.html">dict0dict.h</a></div><div class="ttdoc">Data dictionary system. </div></div>
<div class="ttc" id="btr0cur_8h_html_a755a5ffe53e178cb8e15738a9a57944c"><div class="ttname"><a href="btr0cur_8h.html#a755a5ffe53e178cb8e15738a9a57944c">btr_cur_optimistic_insert</a></div><div class="ttdeci">dberr_t btr_cur_optimistic_insert(ulint flags, btr_cur_t *cursor, ulint **offsets, mem_heap_t **heap, dtuple_t *entry, rec_t **rec, big_rec_t **big_rec, que_thr_t *thr, mtr_t *mtr)</div><div class="ttdoc">Tries to perform an insert to a page in an index tree, next to cursor. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:2656</div></div>
<div class="ttc" id="btr0cur_8h_html_a9fbd32cfc53ed0bdd7cc7f50ad7c8e24"><div class="ttname"><a href="btr0cur_8h.html#a9fbd32cfc53ed0bdd7cc7f50ad7c8e24">btr_cur_get_page_cur</a></div><div class="ttdeci">UNIV_INLINE page_cur_t * btr_cur_get_page_cur(const btr_cur_t *cursor)</div><div class="ttdoc">Returns the page cursor component of a tree cursor. </div></div>
<div class="ttc" id="page0cur_8h_html"><div class="ttname"><a href="page0cur_8h.html">page0cur.h</a></div><div class="ttdoc">The page cursor. </div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96ae0937e0fc6102b4cc54bb049119f35ac"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96ae0937e0fc6102b4cc54bb049119f35ac">BTR_CUR_UNSET</a></div><div class="ttdoc">Flag for initialization only, not in real use. </div><div class="ttdef"><b>Definition:</b> btr0cur.h:677</div></div>
<div class="ttc" id="structbtr__latch__leaves__t_html_a1c0e4b869fa0d485f0ae57646906252f"><div class="ttname"><a href="structbtr__latch__leaves__t.html#a1c0e4b869fa0d485f0ae57646906252f">btr_latch_leaves_t::blocks</a></div><div class="ttdeci">buf_block_t * blocks[3]</div><div class="ttdef"><b>Definition:</b> btr0cur.h:69</div></div>
<div class="ttc" id="rem0types_8h_html_a92caeffe2dc2fbe825a54aef9a163435"><div class="ttname"><a href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a></div><div class="ttdeci">byte rec_t</div><div class="ttdef"><b>Definition:</b> rem0types.h:39</div></div>
<div class="ttc" id="structdtuple__t_html"><div class="ttname"><a href="structdtuple__t.html">dtuple_t</a></div><div class="ttdoc">Structure for an SQL data tuple of fields (logical record) </div><div class="ttdef"><b>Definition:</b> data0data.h:711</div></div>
<div class="ttc" id="btr0cur_8h_html_ac2f6fdb5778c30d2f44cddb90e21c70e"><div class="ttname"><a href="btr0cur_8h.html#ac2f6fdb5778c30d2f44cddb90e21c70e">btr_cur_get_rec</a></div><div class="ttdeci">UNIV_INLINE rec_t * btr_cur_get_rec(const btr_cur_t *cursor)</div><div class="ttdoc">Returns the record pointer of a tree cursor. </div></div>
<div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:38</div></div>
<div class="ttc" id="page0types_8h_html_a09a7c28cbc96005a4ad8497a1a195dba"><div class="ttname"><a href="page0types_8h.html#a09a7c28cbc96005a4ad8497a1a195dba">page_cur_mode_t</a></div><div class="ttdeci">page_cur_mode_t</div><div class="ttdef"><b>Definition:</b> page0types.h:173</div></div>
<div class="ttc" id="btr0cur_8h_html_a021620bced223499dba9da23c327f2c1"><div class="ttname"><a href="btr0cur_8h.html#a021620bced223499dba9da23c327f2c1">btr_cur_pessimistic_delete</a></div><div class="ttdeci">ibool btr_cur_pessimistic_delete(dberr_t *err, ibool has_reserved_extents, btr_cur_t *cursor, uint32_t flags, bool rollback, trx_id_t trx_id, undo_no_t undo_no, ulint rec_type, mtr_t *mtr, btr_pcur_t *pcur=nullptr)</div><div class="ttdoc">Removes the record on which the tree cursor is positioned. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:4621</div></div>
<div class="ttc" id="namespacedblwr_1_1v1_html_a2213362152a12bb25be6185d420285b6"><div class="ttname"><a href="namespacedblwr_1_1v1.html#a2213362152a12bb25be6185d420285b6">dblwr::v1::create</a></div><div class="ttdeci">dberr_t create() noexcept</div><div class="ttdoc">Create the dblwr data structures in the system tablespace. </div><div class="ttdef"><b>Definition:</b> buf0dblwr.cc:1834</div></div>
<div class="ttc" id="row0types_8h_html"><div class="ttname"><a href="row0types_8h.html">row0types.h</a></div><div class="ttdoc">Row operation global types. </div></div>
<div class="ttc" id="structque__thr__t_html"><div class="ttname"><a href="structque__thr__t.html">que_thr_t</a></div><div class="ttdef"><b>Definition:</b> que0que.h:251</div></div>
<div class="ttc" id="uca-dump_8cc_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> uca-dump.cc:29</div></div>
<div class="ttc" id="namespacejson__binary_html_a091356787f1fe6633bc180fc2009c606"><div class="ttname"><a href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">json_binary::err</a></div><div class="ttdeci">static Value err()</div><div class="ttdoc">Create a Value object that represents an error condition. </div><div class="ttdef"><b>Definition:</b> json_binary.cc:908</div></div>
<div class="ttc" id="btr0cur_8h_html_a427aa7747fe4f0f2f0f75b14fb303906"><div class="ttname"><a href="btr0cur_8h.html#a427aa7747fe4f0f2f0f75b14fb303906">btr_cur_del_mark_set_sec_rec</a></div><div class="ttdeci">dberr_t btr_cur_del_mark_set_sec_rec(ulint flags, btr_cur_t *cursor, ibool val, que_thr_t *thr, mtr_t *mtr)</div><div class="ttdoc">Sets a secondary index record delete mark to TRUE or FALSE. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:4417</div></div>
<div class="ttc" id="myisamlog_8cc_html_a63c3b620cc1cd0b4a2850c8d9804fde2"><div class="ttname"><a href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a></div><div class="ttdeci">static uint update</div><div class="ttdef"><b>Definition:</b> myisamlog.cc:90</div></div>
<div class="ttc" id="structbtr__cur__t_html_a9253723254187180d0faac6181b67eb2"><div class="ttname"><a href="structbtr__cur__t.html#a9253723254187180d0faac6181b67eb2">btr_cur_t::page_cur</a></div><div class="ttdeci">page_cur_t page_cur</div><div class="ttdoc">page cursor </div><div class="ttdef"><b>Definition:</b> btr0cur.h:700</div></div>
<div class="ttc" id="btr0cur_8h_html_a542936a2ff210fb6502b04fd367a1ae0"><div class="ttname"><a href="btr0cur_8h.html#a542936a2ff210fb6502b04fd367a1ae0">btr_cur_search_to_nth_level</a></div><div class="ttdeci">void btr_cur_search_to_nth_level(dict_index_t *index, ulint level, const dtuple_t *tuple, page_cur_mode_t mode, ulint latch_mode, btr_cur_t *cursor, ulint has_search_latch, const char *file, ulint line, mtr_t *mtr)</div><div class="ttdoc">Searches an index tree and positions a tree cursor on a given level. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:611</div></div>
<div class="ttc" id="btr0cur_8h_html_a649dfaf6f1de1688d814e6e95ac1caf5"><div class="ttname"><a href="btr0cur_8h.html#a649dfaf6f1de1688d814e6e95ac1caf5">btr_rec_set_deleted_flag</a></div><div class="ttdeci">UNIV_INLINE void btr_rec_set_deleted_flag(rec_t *rec, page_zip_des_t *page_zip, ulint flag)</div><div class="ttdoc">The following function is used to set the deleted bit of a record. </div></div>
<div class="ttc" id="btr0cur_8h_html_afbe0bb94cee5310f935edc06c06ece60"><div class="ttname"><a href="btr0cur_8h.html#afbe0bb94cee5310f935edc06c06ece60">btr_cur_update_in_place_log</a></div><div class="ttdeci">void btr_cur_update_in_place_log(ulint flags, const rec_t *rec, dict_index_t *index, const upd_t *update, trx_id_t trx_id, roll_ptr_t roll_ptr, mtr_t *mtr)</div><div class="ttdoc">Writes a redo log record of updating a record in-place. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:3128</div></div>
<div class="ttc" id="structbig__rec__t_html"><div class="ttname"><a href="structbig__rec__t.html">big_rec_t</a></div><div class="ttdoc">Storage format for overflow data in a big record, that is, a clustered index record which needs exter...</div><div class="ttdef"><b>Definition:</b> data0data.h:859</div></div>
<div class="ttc" id="btr0cur_8h_html_ac791b66a82093c303b1b2aaf4f185edeaa2e940baf537747a3cda3db0a2cbb865"><div class="ttname"><a href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edeaa2e940baf537747a3cda3db0a2cbb865">BTR_CREATE_FLAG</a></div><div class="ttdoc">the caller is creating the index or wants to bypass the index-&gt;info.online creation log ...</div><div class="ttdef"><b>Definition:</b> btr0cur.h:59</div></div>
<div class="ttc" id="btr0cur_8h_html_a5e2ef1b901ec66346efc1096bb1aeece"><div class="ttname"><a href="btr0cur_8h.html#a5e2ef1b901ec66346efc1096bb1aeece">btr_cur_open_at_index_side_func</a></div><div class="ttdeci">void btr_cur_open_at_index_side_func(bool from_left, dict_index_t *index, ulint latch_mode, btr_cur_t *cursor, ulint level, const char *file, ulint line, mtr_t *mtr)</div><div class="ttdoc">Opens a cursor at either end of an index. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:1845</div></div>
<div class="ttc" id="btr0cur_8h_html_a8f42051e928b6c3f72b7fc3bb59293a0"><div class="ttname"><a href="btr0cur_8h.html#a8f42051e928b6c3f72b7fc3bb59293a0">btr_cur_update_in_place</a></div><div class="ttdeci">dberr_t btr_cur_update_in_place(ulint flags, btr_cur_t *cursor, ulint *offsets, const upd_t *update, ulint cmpl_info, que_thr_t *thr, trx_id_t trx_id, mtr_t *mtr)</div><div class="ttdoc">Updates a record when the update causes no size changes in its fields. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:3343</div></div>
<div class="ttc" id="btr0cur_8h_html_ac791b66a82093c303b1b2aaf4f185edea046932973ff414437088666363342436"><div class="ttname"><a href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea046932973ff414437088666363342436">BTR_NO_LOCKING_FLAG</a></div><div class="ttdoc">do no record lock checking </div><div class="ttdef"><b>Definition:</b> btr0cur.h:50</div></div>
<div class="ttc" id="classpage__size__t_html"><div class="ttname"><a href="classpage__size__t.html">page_size_t</a></div><div class="ttdoc">Page size descriptor. </div><div class="ttdef"><b>Definition:</b> page0size.h:49</div></div>
<div class="ttc" id="trx0types_8h_html_a91afca43a639c098efe14a9069a1d4ec"><div class="ttname"><a href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a></div><div class="ttdeci">ib_id_t trx_id_t</div><div class="ttdoc">Transaction identifier (DB_TRX_ID, DATA_TRX_ID) </div><div class="ttdef"><b>Definition:</b> trx0types.h:144</div></div>
<div class="ttc" id="hp__test1_8cc_html_adf916204820072417ed73a32de1cefcf"><div class="ttname"><a href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a></div><div class="ttdeci">static int flag</div><div class="ttdef"><b>Definition:</b> hp_test1.cc:39</div></div>
<div class="ttc" id="structrtr__info_html"><div class="ttname"><a href="structrtr__info.html">rtr_info</a></div><div class="ttdoc">Vectors holding the matching internal pages/nodes and leaf records. </div><div class="ttdef"><b>Definition:</b> gis0type.h:108</div></div>
<div class="ttc" id="btr0cur_8h_html_abfdc46d486a27aa882f0c8f80cbf09c4"><div class="ttname"><a href="btr0cur_8h.html#abfdc46d486a27aa882f0c8f80cbf09c4">btr_cur_update_alloc_zip_func</a></div><div class="ttdeci">bool btr_cur_update_alloc_zip_func(page_zip_des_t *page_zip, page_cur_t *cursor, dict_index_t *index, ulint *offsets, ulint length, bool create, mtr_t *mtr)</div><div class="ttdoc">See if there is enough place in the page modification log to log an update-in-place. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:3260</div></div>
<div class="ttc" id="btr0cur_8h_html_a8df6a65d39b12848a998a57d2cc328d0"><div class="ttname"><a href="btr0cur_8h.html#a8df6a65d39b12848a998a57d2cc328d0">btr_cur_n_sea_old</a></div><div class="ttdeci">ulint btr_cur_n_sea_old</div><div class="ttdoc">Old value of btr_cur_n_sea. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:137</div></div>
<div class="ttc" id="btr0cur_8h_html_a769cec83638735de3b95862c5d3ee139"><div class="ttname"><a href="btr0cur_8h.html#a769cec83638735de3b95862c5d3ee139">btr_cur_del_mark_set_clust_rec</a></div><div class="ttdeci">dberr_t btr_cur_del_mark_set_clust_rec(ulint flags, buf_block_t *block, rec_t *rec, dict_index_t *index, const ulint *offsets, que_thr_t *thr, const dtuple_t *entry, mtr_t *mtr)</div><div class="ttdoc">Marks a clustered index record deleted. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:4269</div></div>
<div class="ttc" id="btr0cur_8h_html_ae622ab66e6135fea46f0a590f1f46879"><div class="ttname"><a href="btr0cur_8h.html#ae622ab66e6135fea46f0a590f1f46879">btr_cur_pessimistic_update</a></div><div class="ttdeci">dberr_t btr_cur_pessimistic_update(ulint flags, btr_cur_t *cursor, ulint **offsets, mem_heap_t **offsets_heap, mem_heap_t *entry_heap, big_rec_t **big_rec, upd_t *update, ulint cmpl_info, que_thr_t *thr, trx_id_t trx_id, undo_no_t undo_no, mtr_t *mtr, btr_pcur_t *pcur=nullptr)</div><div class="ttdoc">Performs an update of a record on a page of a tree. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:3760</div></div>
<div class="ttc" id="btr0cur_8h_html_a0f4bd3b42e8c550c943089ebef00fe54"><div class="ttname"><a href="btr0cur_8h.html#a0f4bd3b42e8c550c943089ebef00fe54">btr_estimate_number_of_different_key_vals</a></div><div class="ttdeci">bool btr_estimate_number_of_different_key_vals(dict_index_t *index)</div><div class="ttdoc">Estimates the number of different key values in a given index, for each n-column prefix of the index ...</div><div class="ttdef"><b>Definition:</b> btr0cur.cc:5402</div></div>
<div class="ttc" id="btr0cur_8h_html_a63c486e1078df1872ee87c377006674a"><div class="ttname"><a href="btr0cur_8h.html#a63c486e1078df1872ee87c377006674a">btr_cur_parse_del_mark_set_clust_rec</a></div><div class="ttdeci">byte * btr_cur_parse_del_mark_set_clust_rec(byte *ptr, byte *end_ptr, page_t *page, page_zip_des_t *page_zip, dict_index_t *index)</div><div class="ttdoc">Parses the redo log record for delete marking or unmarking of a clustered index record. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:4194</div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96a0c0b480a0e2ff01e08a968319e27135d"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a0c0b480a0e2ff01e08a968319e27135d">BTR_CUR_HASH_FAIL</a></div><div class="ttdoc">failure using hash, success using binary search: the misleading hash reference is stored in the field...</div><div class="ttdef"><b>Definition:</b> btr0cur.h:681</div></div>
<div class="ttc" id="btr0cur_8h_html_aefd6e4cb05606cefb5d21f1e73825d41"><div class="ttname"><a href="btr0cur_8h.html#aefd6e4cb05606cefb5d21f1e73825d41">btr_cur_position</a></div><div class="ttdeci">UNIV_INLINE void btr_cur_position(dict_index_t *index, rec_t *rec, buf_block_t *block, btr_cur_t *cursor)</div><div class="ttdoc">Positions a tree cursor at a given record. </div></div>
<div class="ttc" id="btr0cur_8h_html_a8d02deb9d204909dbee067cb7e84c2a7"><div class="ttname"><a href="btr0cur_8h.html#a8d02deb9d204909dbee067cb7e84c2a7">btr_cur_optimistic_delete_func</a></div><div class="ttdeci">ibool btr_cur_optimistic_delete_func(btr_cur_t *cursor, ulint flags, mtr_t *mtr)</div><div class="ttdoc">Removes the record on which the tree cursor is positioned. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:4528</div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96a6c64e9fa37d7185525aa24d3dcffd915"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a6c64e9fa37d7185525aa24d3dcffd915">BTR_CUR_INSERT_TO_IBUF</a></div><div class="ttdoc">performed the intended insert to the insert buffer </div><div class="ttdef"><b>Definition:</b> btr0cur.h:687</div></div>
<div class="ttc" id="btr0cur_8h_html_a16857b9aaf748152f3d8729a81adc742"><div class="ttname"><a href="btr0cur_8h.html#a16857b9aaf748152f3d8729a81adc742">btr_cur_get_page_zip</a></div><div class="ttdeci">UNIV_INLINE page_zip_des_t * btr_cur_get_page_zip(btr_cur_t *cursor)</div><div class="ttdoc">Returns the compressed page on which the tree cursor is positioned. </div></div>
<div class="ttc" id="page0types_8h_html_ac84908ddc97c37107986280aa8f37897"><div class="ttname"><a href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a></div><div class="ttdeci">byte page_t</div><div class="ttdoc">Type of the index page. </div><div class="ttdef"><b>Definition:</b> page0types.h:148</div></div>
<div class="ttc" id="btr0cur_8h_html_a367d84590d5ae4ceb873a30c7d2a7b4d"><div class="ttname"><a href="btr0cur_8h.html#a367d84590d5ae4ceb873a30c7d2a7b4d">btr_cur_optimistic_latch_leaves</a></div><div class="ttdeci">bool btr_cur_optimistic_latch_leaves(buf_block_t *block, ib_uint64_t modify_clock, ulint *latch_mode, btr_cur_t *cursor, const char *file, ulint line, mtr_t *mtr)</div><div class="ttdoc">Optimistically latches the leaf page or pages requested. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:333</div></div>
<div class="ttc" id="namespacefile_html"><div class="ttname"><a href="namespacefile.html">file</a></div><div class="ttdef"><b>Definition:</b> os0file.h:85</div></div>
<div class="ttc" id="fil0fil_8h_html_a578077ea17f5093fc8fa7381ae89f7c8"><div class="ttname"><a href="fil0fil_8h.html#a578077ea17f5093fc8fa7381ae89f7c8">FIL_NULL</a></div><div class="ttdeci">constexpr page_no_t FIL_NULL</div><div class="ttdoc">&amp;#39;null&amp;#39; (undefined) page offset in the context of file spaces </div><div class="ttdef"><b>Definition:</b> fil0fil.h:928</div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7a1e23852820b9154316c7c06e2b7ba051"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a1e23852820b9154316c7c06e2b7ba051">Page_fetch::NORMAL</a></div><div class="ttdoc">Get always. </div></div>
<div class="ttc" id="hp__test1_8cc_html_a6eec09a91807e20d7b3d6ef3da594067"><div class="ttname"><a href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a></div><div class="ttdeci">static int flags[50]</div><div class="ttdef"><b>Definition:</b> hp_test1.cc:39</div></div>
<div class="ttc" id="btr0cur_8h_html_ac791b66a82093c303b1b2aaf4f185edea159501d7bc944849faa8082ce7b55466"><div class="ttname"><a href="btr0cur_8h.html#ac791b66a82093c303b1b2aaf4f185edea159501d7bc944849faa8082ce7b55466">BTR_KEEP_SYS_FLAG</a></div><div class="ttdoc">sys fields will be found in the update vector or inserted entry </div><div class="ttdef"><b>Definition:</b> btr0cur.h:53</div></div>
<div class="ttc" id="structpage__cur__t_html"><div class="ttname"><a href="structpage__cur__t.html">page_cur_t</a></div><div class="ttdoc">Index page cursor. </div><div class="ttdef"><b>Definition:</b> page0cur.h:314</div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="btr0cur_8h_html_a7b7a92b1123d6493729904f846f05a03"><div class="ttname"><a href="btr0cur_8h.html#a7b7a92b1123d6493729904f846f05a03">btr_cur_n_non_sea</a></div><div class="ttdeci">ulint btr_cur_n_non_sea</div><div class="ttdoc">Number of searches down the B-tree in btr_cur_search_to_nth_level(). </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:126</div></div>
<div class="ttc" id="structmtr__t_html"><div class="ttname"><a href="structmtr__t.html">mtr_t</a></div><div class="ttdoc">Mini-transaction handle and buffer. </div><div class="ttdef"><b>Definition:</b> mtr0mtr.h:169</div></div>
<div class="ttc" id="btr0cur_8h_html_a4daa7a19fdc8383127085073ea67bea9"><div class="ttname"><a href="btr0cur_8h.html#a4daa7a19fdc8383127085073ea67bea9">btr_cur_optimistic_update</a></div><div class="ttdeci">dberr_t btr_cur_optimistic_update(ulint flags, btr_cur_t *cursor, ulint **offsets, mem_heap_t **heap, const upd_t *update, ulint cmpl_info, que_thr_t *thr, trx_id_t trx_id, mtr_t *mtr)</div><div class="ttdoc">Tries to update a record on a page in an index tree. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:3473</div></div>
<div class="ttc" id="btr0cur_8h_html_acafc257d9789b9b946149978d1934a96a3761d0d9cf510bcb30c8a63336f4d4c7"><div class="ttname"><a href="btr0cur_8h.html#acafc257d9789b9b946149978d1934a96a3761d0d9cf510bcb30c8a63336f4d4c7">BTR_CUR_DELETE_REF</a></div><div class="ttdoc">row_purge_poss_sec() failed </div><div class="ttdef"><b>Definition:</b> btr0cur.h:693</div></div>
<div class="ttc" id="struct__entry_html"><div class="ttname"><a href="struct__entry.html">_entry</a></div><div class="ttdef"><b>Definition:</b> completion_hash.h:34</div></div>
<div class="ttc" id="trx0types_8h_html_a4661d2883c1cd5d8f1cfbd63b553f1bc"><div class="ttname"><a href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a></div><div class="ttdeci">ib_id_t undo_no_t</div><div class="ttdoc">Undo number. </div><div class="ttdef"><b>Definition:</b> trx0types.h:148</div></div>
<div class="ttc" id="namespacegis_html_a1e3bf735dbe640151561b282f0f4dba5"><div class="ttname"><a href="namespacegis.html#a1e3bf735dbe640151561b282f0f4dba5">gis::length</a></div><div class="ttdeci">bool length(const dd::Spatial_reference_system *srs, const Geometry *g1, double *length, bool *null) noexcept</div><div class="ttdoc">Computes the length of linestrings and multilinestrings. </div><div class="ttdef"><b>Definition:</b> length.cc:75</div></div>
<div class="ttc" id="btr0cur_8h_html_a64fd277719862187604bf48005ec191c"><div class="ttname"><a href="btr0cur_8h.html#a64fd277719862187604bf48005ec191c">btr_cur_compress_if_useful</a></div><div class="ttdeci">ibool btr_cur_compress_if_useful(btr_cur_t *cursor, ibool adjust, mtr_t *mtr)</div><div class="ttdoc">Tries to compress a page of the tree if it seems useful. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:4485</div></div>
<div class="ttc" id="btr0cur_8h_html_a826f0a22e993bf66a9aaaec481c11631"><div class="ttname"><a href="btr0cur_8h.html#a826f0a22e993bf66a9aaaec481c11631">btr_rec_copy_externally_stored_field_func</a></div><div class="ttdeci">byte * btr_rec_copy_externally_stored_field_func(trx_t *trx, dict_index_t *index, const rec_t *rec, const ulint *offsets, const page_size_t &amp;page_size, ulint no, ulint *len, size_t *lob_version, bool is_sdi, mem_heap_t *heap)</div><div class="ttdoc">Copies an externally stored field of a record to mem heap. </div></div>
<div class="ttc" id="btr0cur_8h_html_a2779e13e725b69e10b92eba034a1a143"><div class="ttname"><a href="btr0cur_8h.html#a2779e13e725b69e10b92eba034a1a143">btr_cur_parse_update_in_place</a></div><div class="ttdeci">byte * btr_cur_parse_update_in_place(byte *ptr, byte *end_ptr, page_t *page, page_zip_des_t *page_zip, dict_index_t *index)</div><div class="ttdoc">Parses a redo log record of updating a record in-place. </div><div class="ttdef"><b>Definition:</b> btr0cur.cc:3180</div></div>
<div class="ttc" id="structupd__t_html"><div class="ttname"><a href="structupd__t.html">upd_t</a></div><div class="ttdef"><b>Definition:</b> row0upd.h:580</div></div>
<div class="ttc" id="structdict__index__t_html"><div class="ttname"><a href="structdict__index__t.html">dict_index_t</a></div><div class="ttdoc">Data structure for an index. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:886</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="btr0cur_8h.html">btr0cur.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
