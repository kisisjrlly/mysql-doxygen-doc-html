<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: sql/sql_db.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sql__db_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sql_db.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="lex__string_8h_source.html">lex_string.h</a>&quot;</code><br />
</div>
<p><a href="sql__db_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacedd"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedd.html">dd</a></td></tr>
<tr class="memdesc:namespacedd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The version of the current data dictionary table definitions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed995df00259df8e2f7e308658c82670"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__db_8h.html#aed995df00259df8e2f7e308658c82670">mysql_create_db</a> (<a class="el" href="classTHD.html">THD</a> *thd, const char *db, <a class="el" href="structHA__CREATE__INFO.html">HA_CREATE_INFO</a> *create)</td></tr>
<tr class="memdesc:aed995df00259df8e2f7e308658c82670"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a database.  <a href="#aed995df00259df8e2f7e308658c82670">More...</a><br /></td></tr>
<tr class="separator:aed995df00259df8e2f7e308658c82670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb4191994cef55a5b861fedff0a5a4c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__db_8h.html#acb4191994cef55a5b861fedff0a5a4c0">mysql_alter_db</a> (<a class="el" href="classTHD.html">THD</a> *thd, const char *db, <a class="el" href="structHA__CREATE__INFO.html">HA_CREATE_INFO</a> *create)</td></tr>
<tr class="separator:acb4191994cef55a5b861fedff0a5a4c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79bcf6faf8dc1d82729f011965dff8bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__db_8h.html#a79bcf6faf8dc1d82729f011965dff8bb">mysql_rm_db</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> &amp;db, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> if_exists)</td></tr>
<tr class="memdesc:a79bcf6faf8dc1d82729f011965dff8bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop all tables, routines and events in a database and the database itself.  <a href="#a79bcf6faf8dc1d82729f011965dff8bb">More...</a><br /></td></tr>
<tr class="separator:a79bcf6faf8dc1d82729f011965dff8bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dc64a1aaffc0db6e0ebf02729c89a2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__db_8h.html#a9dc64a1aaffc0db6e0ebf02729c89a2e">mysql_change_db</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> &amp;new_db_name, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> force_switch)</td></tr>
<tr class="memdesc:a9dc64a1aaffc0db6e0ebf02729c89a2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the current database and its attributes unconditionally.  <a href="#a9dc64a1aaffc0db6e0ebf02729c89a2e">More...</a><br /></td></tr>
<tr class="separator:a9dc64a1aaffc0db6e0ebf02729c89a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa15e10fb5945998c442daac30d876fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__db_8h.html#aaa15e10fb5945998c442daac30d876fb">mysql_opt_change_db</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> &amp;new_db_name, <a class="el" href="lex__string_8h.html#a1fb89d4ad1109660fb2b796efdb3933e">LEX_STRING</a> *saved_db_name, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> force_switch, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *cur_db_changed)</td></tr>
<tr class="memdesc:aaa15e10fb5945998c442daac30d876fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the current database and its attributes if needed.  <a href="#aaa15e10fb5945998c442daac30d876fb">More...</a><br /></td></tr>
<tr class="separator:aaa15e10fb5945998c442daac30d876fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff08fa325c5657a1b2fc250ddc00078c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__db_8h.html#aff08fa325c5657a1b2fc250ddc00078c">get_default_db_collation</a> (const <a class="el" href="classdd_1_1Schema.html">dd::Schema</a> &amp;schema, const <a class="el" href="structCHARSET__INFO.html">CHARSET_INFO</a> **collation)</td></tr>
<tr class="separator:aff08fa325c5657a1b2fc250ddc00078c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53cb4d709eb19ece30b3d9a1ec9b442e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__db_8h.html#a53cb4d709eb19ece30b3d9a1ec9b442e">get_default_db_collation</a> (<a class="el" href="classTHD.html">THD</a> *thd, const char *db_name, const <a class="el" href="structCHARSET__INFO.html">CHARSET_INFO</a> **collation)</td></tr>
<tr class="memdesc:a53cb4d709eb19ece30b3d9a1ec9b442e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return default database collation.  <a href="#a53cb4d709eb19ece30b3d9a1ec9b442e">More...</a><br /></td></tr>
<tr class="separator:a53cb4d709eb19ece30b3d9a1ec9b442e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c882a1e03512a01aaf8e4dfad397ee1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__db_8h.html#a4c882a1e03512a01aaf8e4dfad397ee1">check_schema_readonly</a> (<a class="el" href="classTHD.html">THD</a> *thd, const char *schema_name, <a class="el" href="structTABLE__SHARE.html">TABLE_SHARE</a> *share=<a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>)</td></tr>
<tr class="memdesc:a4c882a1e03512a01aaf8e4dfad397ee1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the read_only option for the given schema, and report error if the schema is not writable.  <a href="#a4c882a1e03512a01aaf8e4dfad397ee1">More...</a><br /></td></tr>
<tr class="separator:a4c882a1e03512a01aaf8e4dfad397ee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4c882a1e03512a01aaf8e4dfad397ee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c882a1e03512a01aaf8e4dfad397ee1">&#9670;&nbsp;</a></span>check_schema_readonly()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> check_schema_readonly </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>schema_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__SHARE.html">TABLE_SHARE</a> *&#160;</td>
          <td class="paramname"><em>share</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the read_only option for the given schema, and report error if the schema is not writable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread context. </td></tr>
    <tr><td class="paramname">schema_name</td><td>Name of schema to check. </td></tr>
    <tr><td class="paramname">share</td><td>For tables, we cache the read only option in the table share, and can therefore get the read only option from the share.</td></tr>
  </table>
  </dd>
</dl>
<p>Caching the read only state in the table share is done for performance reasons. If a share is submitted, we get the read only state from the share. Otherwise, we get the schema object from the DD cache in order to see the read only state.</p>
<dl class="section return"><dt>Returns</dt><dd>false if the schema is writable, true if not. If returning true, then error is already reported. </dd></dl>

</div>
</div>
<a id="aff08fa325c5657a1b2fc250ddc00078c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff08fa325c5657a1b2fc250ddc00078c">&#9670;&nbsp;</a></span>get_default_db_collation() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> get_default_db_collation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdd_1_1Schema.html">dd::Schema</a> &amp;&#160;</td>
          <td class="paramname"><em>schema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structCHARSET__INFO.html">CHARSET_INFO</a> **&#160;</td>
          <td class="paramname"><em>collation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a53cb4d709eb19ece30b3d9a1ec9b442e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53cb4d709eb19ece30b3d9a1ec9b442e">&#9670;&nbsp;</a></span>get_default_db_collation() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> get_default_db_collation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structCHARSET__INFO.html">CHARSET_INFO</a> **&#160;</td>
          <td class="paramname"><em>collation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return default database collation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">thd</td><td>Thread context. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">db_name</td><td>Database name. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">collation</td><td>Charset object pointer if object exists else NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false No error. true Error (thd-&gt;is_error is assumed to be set.) </dd></dl>

</div>
</div>
<a id="acb4191994cef55a5b861fedff0a5a4c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb4191994cef55a5b861fedff0a5a4c0">&#9670;&nbsp;</a></span>mysql_alter_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_alter_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structHA__CREATE__INFO.html">HA_CREATE_INFO</a> *&#160;</td>
          <td class="paramname"><em>create</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9dc64a1aaffc0db6e0ebf02729c89a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dc64a1aaffc0db6e0ebf02729c89a2e">&#9670;&nbsp;</a></span>mysql_change_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_change_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> &amp;&#160;</td>
          <td class="paramname"><em>new_db_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>force_switch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the current database and its attributes unconditionally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle </td></tr>
    <tr><td class="paramname">new_db_name</td><td>database name </td></tr>
    <tr><td class="paramname">force_switch</td><td>if force_switch is false, then the operation will fail if <pre class="fragment">                  - new_db_name is NULL or empty;

                  - OR new database name is invalid
                    (check_db_name() failed);

                  - OR user has no privilege on the new database;

                  - OR new database does not exist;

                if force_switch is true, then

                  - if new_db_name is NULL or empty, the current
                    database will be NULL, @@collation_database will
                    be set to @@collation_server, the operation will
                    succeed.

                  - if new database name is invalid
                    (check_db_name() failed), the current database
                    will be NULL, @@collation_database will be set to
                    @@collation_server, but the operation will fail;

                  - user privileges will not be checked
                    (THD::db_access however is updated);

                    TODO: is this really the intention?
                          (see sp-security.test).

                  - if new database does not exist,the current database
                    will be NULL, @@collation_database will be set to
                    @@collation_server, a warning will be thrown, the
                    operation will succeed.
</pre></td></tr>
  </table>
  </dd>
</dl>
<p>The function checks that the database name corresponds to a valid and existent database, checks access rights and changes the current database with database attributes (@collation_database session variable, THD::db_access).</p>
<p>This function is not the only way to switch the database that is currently employed. When the replication slave thread switches the database before executing a query, it calls thd-&gt;set_db directly. However, if the query, in turn, uses a stored routine, the stored routine will use this function, even if it's run on the slave.</p>
<p>This function allocates the name of the database on the system heap: this is necessary to be able to uniformly change the database from any module of the server. Up to 5.0 different modules were using different memory to store the name of the database, and this led to memory corruption: a stack pointer set by Stored Procedures was used by replication after the stack address was long gone.</p>
<dl class="section return"><dt>Returns</dt><dd>Operation status </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aed995df00259df8e2f7e308658c82670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed995df00259df8e2f7e308658c82670">&#9670;&nbsp;</a></span>mysql_create_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_create_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structHA__CREATE__INFO.html">HA_CREATE_INFO</a> *&#160;</td>
          <td class="paramname"><em>create_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handler </td></tr>
    <tr><td class="paramname">db</td><td>Name of database to create Function assumes that this is already validated. </td></tr>
    <tr><td class="paramname">create_info</td><td>Database create options (like character set)</td></tr>
  </table>
  </dd>
</dl>
<p>SIDE-EFFECTS</p><ol type="1">
<li>Report back to client that command succeeded (my_ok)</li>
<li>Report errors to client</li>
<li>Log event to binary log</li>
</ol>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>ok </td></tr>
    <tr><td class="paramname">true</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaa15e10fb5945998c442daac30d876fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa15e10fb5945998c442daac30d876fb">&#9670;&nbsp;</a></span>mysql_opt_change_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_opt_change_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> &amp;&#160;</td>
          <td class="paramname"><em>new_db_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lex__string_8h.html#a1fb89d4ad1109660fb2b796efdb3933e">LEX_STRING</a> *&#160;</td>
          <td class="paramname"><em>saved_db_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>force_switch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>cur_db_changed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the current database and its attributes if needed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">thd</td><td>thread handle </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">new_db_name</td><td>database name </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">saved_db_name</td><td>IN: "str" points to a buffer where to store the old database name, "length" contains the buffer size OUT: if the current (default) database is not NULL, its name is copied to the buffer pointed at by "str" and "length" is updated accordingly. Otherwise "str" is set to NULL and "length" is set to 0. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">force_switch</td><td>if the change of the current database shall be forced </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>mysql_change_db() </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">cur_db_changed</td><td>out-flag to indicate whether the current database has been changed (valid only if the function suceeded) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a79bcf6faf8dc1d82729f011965dff8bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79bcf6faf8dc1d82729f011965dff8bb">&#9670;&nbsp;</a></span>mysql_rm_db()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_rm_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> &amp;&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>if_exists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop all tables, routines and events in a database and the database itself. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle </td></tr>
    <tr><td class="paramname">db</td><td>Database name in the case given by user It's already validated and set to lower case (if needed) when we come here </td></tr>
    <tr><td class="paramname">if_exists</td><td>Don't give error if database doesn't exists</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>We do a "best effort" - try to drop as much as possible. If dropping the database itself fails, we try to binlog the drop of the tables we managed to do.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>OK (Database dropped) </td></tr>
    <tr><td class="paramname">true</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li><li class="navelem"><a class="el" href="sql__db_8h.html">sql_db.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
