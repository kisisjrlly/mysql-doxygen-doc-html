<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: LatchDebug Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structLatchDebug.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="structLatchDebug-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LatchDebug Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The deadlock detector.  
 <a href="structLatchDebug.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug_1_1latch__level__less.html">latch_level_less</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Comparator for the Levels .  <a href="structLatchDebug_1_1latch__level__less.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug_1_1os__thread__id__less.html">os_thread_id_less</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Comparator for the ThreadMap.  <a href="structLatchDebug_1_1os__thread__id__less.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a134bf6e4d78708de375a56f7dc58c977"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structOSMutex.html">OSMutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a134bf6e4d78708de375a56f7dc58c977">Mutex</a></td></tr>
<tr class="memdesc:a134bf6e4d78708de375a56f7dc58c977"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug mutex for control structures, should not be tracked by this module.  <a href="#a134bf6e4d78708de375a56f7dc58c977">More...</a><br /></td></tr>
<tr class="separator:a134bf6e4d78708de375a56f7dc58c977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4e7cb42d4316feee55ac4a3394df9ce"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="os0thread_8h.html#ab8ad022ed5dafb1f9defb66ac1b6a62a">os_thread_id_t</a>, <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *, <a class="el" href="structLatchDebug_1_1os__thread__id__less.html">os_thread_id_less</a>, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt; std::pair&lt; const <a class="el" href="os0thread_8h.html#ab8ad022ed5dafb1f9defb66ac1b6a62a">os_thread_id_t</a>, <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> * &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#ad4e7cb42d4316feee55ac4a3394df9ce">ThreadMap</a></td></tr>
<tr class="memdesc:ad4e7cb42d4316feee55ac4a3394df9ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">For tracking a thread's latches.  <a href="#ad4e7cb42d4316feee55ac4a3394df9ce">More...</a><br /></td></tr>
<tr class="separator:ad4e7cb42d4316feee55ac4a3394df9ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aba9f45ba75f2df09c45b69eab089cb56"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#aba9f45ba75f2df09c45b69eab089cb56">LatchDebug</a> () 1</td></tr>
<tr class="memdesc:aba9f45ba75f2df09c45b69eab089cb56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#aba9f45ba75f2df09c45b69eab089cb56">More...</a><br /></td></tr>
<tr class="separator:aba9f45ba75f2df09c45b69eab089cb56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62acad7dae1d93bb067b57910418db1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a62acad7dae1d93bb067b57910418db1b">~LatchDebug</a> () 1</td></tr>
<tr class="memdesc:a62acad7dae1d93bb067b57910418db1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a62acad7dae1d93bb067b57910418db1b">More...</a><br /></td></tr>
<tr class="separator:a62acad7dae1d93bb067b57910418db1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af97a85c8c7d7a30bef45a43a198ab867"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#af97a85c8c7d7a30bef45a43a198ab867">thread_latches</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="suite__stubs_8h.html#af37957fd15ebadd906ca63676049d89c">add</a>=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>) 1</td></tr>
<tr class="memdesc:af97a85c8c7d7a30bef45a43a198ab867"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new instance if one doesn't exist else return the existing one.  <a href="#af97a85c8c7d7a30bef45a43a198ab867">More...</a><br /></td></tr>
<tr class="separator:af97a85c8c7d7a30bef45a43a198ab867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a654021e19bd0f622125564e466a1235f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structLatched.html">Latched</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a654021e19bd0f622125564e466a1235f">less</a> (const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *latches, <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> limit) const 1</td></tr>
<tr class="memdesc:a654021e19bd0f622125564e466a1235f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check that all the latches already owned by a thread have a higher level than limit.  <a href="#a654021e19bd0f622125564e466a1235f">More...</a><br /></td></tr>
<tr class="separator:a654021e19bd0f622125564e466a1235f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4ac863f5a1638fa98fb132190a4ee7e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structlatch__t.html">latch_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#ab4ac863f5a1638fa98fb132190a4ee7e">find</a> (const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *latches, <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> level) const 1</td></tr>
<tr class="memdesc:ab4ac863f5a1638fa98fb132190a4ee7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the level value exists in the thread's acquired latches.  <a href="#ab4ac863f5a1638fa98fb132190a4ee7e">More...</a><br /></td></tr>
<tr class="separator:ab4ac863f5a1638fa98fb132190a4ee7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ba93ba00f6b75f1cfffae028a53e45"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structlatch__t.html">latch_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#af9ba93ba00f6b75f1cfffae028a53e45">find</a> (<a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> level) 1</td></tr>
<tr class="memdesc:af9ba93ba00f6b75f1cfffae028a53e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the level value exists in the thread's acquired latches.  <a href="#af9ba93ba00f6b75f1cfffae028a53e45">More...</a><br /></td></tr>
<tr class="separator:af9ba93ba00f6b75f1cfffae028a53e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a138dbd965b6c2964fff87453519a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a86a138dbd965b6c2964fff87453519a6">crash</a> (const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *latches, const <a class="el" href="structLatched.html">Latched</a> *latched, <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> level) const 1</td></tr>
<tr class="memdesc:a86a138dbd965b6c2964fff87453519a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report error and abort.  <a href="#a86a138dbd965b6c2964fff87453519a6">More...</a><br /></td></tr>
<tr class="separator:a86a138dbd965b6c2964fff87453519a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e9536d73142a66631616df8b07418a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a9e9536d73142a66631616df8b07418a3">basic_check</a> (const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *latches, <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> requested_level, ulint in_level) const 1</td></tr>
<tr class="memdesc:a9e9536d73142a66631616df8b07418a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a basic ordering check.  <a href="#a9e9536d73142a66631616df8b07418a3">More...</a><br /></td></tr>
<tr class="separator:a9e9536d73142a66631616df8b07418a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63a290ad33f52573d3e5623201d74157"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a63a290ad33f52573d3e5623201d74157">lock_validate</a> (const <a class="el" href="structlatch__t.html">latch_t</a> *latch, <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> level) 1</td></tr>
<tr class="memdesc:a63a290ad33f52573d3e5623201d74157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a latch and its level in the thread level array.  <a href="#a63a290ad33f52573d3e5623201d74157">More...</a><br /></td></tr>
<tr class="separator:a63a290ad33f52573d3e5623201d74157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4c1974bdfe0026f77a662a1841c945c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#aa4c1974bdfe0026f77a662a1841c945c">lock_granted</a> (const <a class="el" href="structlatch__t.html">latch_t</a> *latch, <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> level) 1</td></tr>
<tr class="memdesc:aa4c1974bdfe0026f77a662a1841c945c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a latch and its level in the thread level array.  <a href="#aa4c1974bdfe0026f77a662a1841c945c">More...</a><br /></td></tr>
<tr class="separator:aa4c1974bdfe0026f77a662a1841c945c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8de5e3eff40b5cd74967c94a01ff7350"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a8de5e3eff40b5cd74967c94a01ff7350">relock</a> (const <a class="el" href="structlatch__t.html">latch_t</a> *latch) 1</td></tr>
<tr class="memdesc:a8de5e3eff40b5cd74967c94a01ff7350"><td class="mdescLeft">&#160;</td><td class="mdescRight">For recursive X rw-locks.  <a href="#a8de5e3eff40b5cd74967c94a01ff7350">More...</a><br /></td></tr>
<tr class="separator:a8de5e3eff40b5cd74967c94a01ff7350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2fd633b1ca0d9dadd6142f366222aeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#ab2fd633b1ca0d9dadd6142f366222aeb">for_each</a> (<a class="el" href="structsync__check__functor__t.html">sync_check_functor_t</a> &amp;functor) 1</td></tr>
<tr class="memdesc:ab2fd633b1ca0d9dadd6142f366222aeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate over a thread's latches.  <a href="#ab2fd633b1ca0d9dadd6142f366222aeb">More...</a><br /></td></tr>
<tr class="separator:ab2fd633b1ca0d9dadd6142f366222aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cde481311db4d592f47ac637a267d05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a8cde481311db4d592f47ac637a267d05">unlock</a> (const <a class="el" href="structlatch__t.html">latch_t</a> *latch) 1</td></tr>
<tr class="memdesc:a8cde481311db4d592f47ac637a267d05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a latch from the thread level array if it is found there.  <a href="#a8cde481311db4d592f47ac637a267d05">More...</a><br /></td></tr>
<tr class="separator:a8cde481311db4d592f47ac637a267d05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5477d692c78f236f1c578c8f27915bad"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a5477d692c78f236f1c578c8f27915bad">get_level_name</a> (<a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> level) const 1</td></tr>
<tr class="memdesc:a5477d692c78f236f1c578c8f27915bad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the level name.  <a href="#a5477d692c78f236f1c578c8f27915bad">More...</a><br /></td></tr>
<tr class="separator:a5477d692c78f236f1c578c8f27915bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac9a4657d3a9dafd2e8f50280be71d0ae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#ac9a4657d3a9dafd2e8f50280be71d0ae">init</a> () 1</td></tr>
<tr class="memdesc:ac9a4657d3a9dafd2e8f50280be71d0ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the debug data structures.  <a href="#ac9a4657d3a9dafd2e8f50280be71d0ae">More...</a><br /></td></tr>
<tr class="separator:ac9a4657d3a9dafd2e8f50280be71d0ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a75e9dac5eb66c3b69f1ce30eebfce7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a3a75e9dac5eb66c3b69f1ce30eebfce7">shutdown</a> () 1</td></tr>
<tr class="memdesc:a3a75e9dac5eb66c3b69f1ce30eebfce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown the latch debug checking.  <a href="#a3a75e9dac5eb66c3b69f1ce30eebfce7">More...</a><br /></td></tr>
<tr class="separator:a3a75e9dac5eb66c3b69f1ce30eebfce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779571e3cdf15a87a83ff45fb5f6eb33"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structLatchDebug.html">LatchDebug</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a779571e3cdf15a87a83ff45fb5f6eb33">instance</a> () 1</td></tr>
<tr class="separator:a779571e3cdf15a87a83ff45fb5f6eb33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05d6e9316e33c3c2c96818fe6a553c3e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a05d6e9316e33c3c2c96818fe6a553c3e">create_instance</a> () 1</td></tr>
<tr class="memdesc:a05d6e9316e33c3c2c96818fe6a553c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the singleton instance.  <a href="#a05d6e9316e33c3c2c96818fe6a553c3e">More...</a><br /></td></tr>
<tr class="separator:a05d6e9316e33c3c2c96818fe6a553c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:adcd892b992d5d569d1f56716ecf04991"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#adcd892b992d5d569d1f56716ecf04991">s_initialized</a> = <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></td></tr>
<tr class="memdesc:adcd892b992d5d569d1f56716ecf04991"><td class="mdescLeft">&#160;</td><td class="mdescRight">For checking whether this module has been initialised or not.  <a href="#adcd892b992d5d569d1f56716ecf04991">More...</a><br /></td></tr>
<tr class="separator:adcd892b992d5d569d1f56716ecf04991"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a8e748aeedf33bca3267a071cfdae33a1"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>, std::string, <a class="el" href="structLatchDebug_1_1latch__level__less.html">latch_level_less</a>, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt; std::pair&lt; const <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>, std::string &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a8e748aeedf33bca3267a071cfdae33a1">Levels</a></td></tr>
<tr class="separator:a8e748aeedf33bca3267a071cfdae33a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9fc8e4b7ea79147644f87f0a0c31da5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a9fc8e4b7ea79147644f87f0a0c31da5e">LatchDebug</a> (const <a class="el" href="structLatchDebug.html">LatchDebug</a> &amp;)</td></tr>
<tr class="memdesc:a9fc8e4b7ea79147644f87f0a0c31da5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable copying.  <a href="#a9fc8e4b7ea79147644f87f0a0c31da5e">More...</a><br /></td></tr>
<tr class="separator:a9fc8e4b7ea79147644f87f0a0c31da5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84aebf64367fe45dc3fd302630008bd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLatchDebug.html">LatchDebug</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a84aebf64367fe45dc3fd302630008bd0">operator=</a> (const <a class="el" href="structLatchDebug.html">LatchDebug</a> &amp;)</td></tr>
<tr class="separator:a84aebf64367fe45dc3fd302630008bd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a014f3e084ab96e25bdeeb0ed4d5496b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a014f3e084ab96e25bdeeb0ed4d5496b2">check_order</a> (const <a class="el" href="structlatch__t.html">latch_t</a> *latch, <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> level) 1</td></tr>
<tr class="memdesc:a014f3e084ab96e25bdeeb0ed4d5496b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a latch and its level in the thread level array.  <a href="#a014f3e084ab96e25bdeeb0ed4d5496b2">More...</a><br /></td></tr>
<tr class="separator:a014f3e084ab96e25bdeeb0ed4d5496b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c642bd69907a2d31e93ca8f59ca131"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a59c642bd69907a2d31e93ca8f59ca131">print_latches</a> (const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *latches) const 1</td></tr>
<tr class="memdesc:a59c642bd69907a2d31e93ca8f59ca131"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the latches acquired by a thread.  <a href="#a59c642bd69907a2d31e93ca8f59ca131">More...</a><br /></td></tr>
<tr class="separator:a59c642bd69907a2d31e93ca8f59ca131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79636a2c2fc2f1235934d6329b0495dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a79636a2c2fc2f1235934d6329b0495dd">is_rtr_mutex</a> (const <a class="el" href="structlatch__t.html">latch_t</a> *latch) const 1</td></tr>
<tr class="memdesc:a79636a2c2fc2f1235934d6329b0495dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special handling for the RTR mutexes.  <a href="#a79636a2c2fc2f1235934d6329b0495dd">More...</a><br /></td></tr>
<tr class="separator:a79636a2c2fc2f1235934d6329b0495dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a974165e97b030910b66fc2bbcba29d68"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLatchDebug.html#a134bf6e4d78708de375a56f7dc58c977">Mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a974165e97b030910b66fc2bbcba29d68">m_mutex</a></td></tr>
<tr class="memdesc:a974165e97b030910b66fc2bbcba29d68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex protecting the deadlock detector data structures.  <a href="#a974165e97b030910b66fc2bbcba29d68">More...</a><br /></td></tr>
<tr class="separator:a974165e97b030910b66fc2bbcba29d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4069b6c6075d31c79e00e9f1be41aca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLatchDebug.html#ad4e7cb42d4316feee55ac4a3394df9ce">ThreadMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#aa4069b6c6075d31c79e00e9f1be41aca">m_threads</a></td></tr>
<tr class="memdesc:aa4069b6c6075d31c79e00e9f1be41aca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread specific data.  <a href="#aa4069b6c6075d31c79e00e9f1be41aca">More...</a><br /></td></tr>
<tr class="separator:aa4069b6c6075d31c79e00e9f1be41aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a20fa43a77dcde5997bc3ec25c4612"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLatchDebug.html#a8e748aeedf33bca3267a071cfdae33a1">Levels</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#af7a20fa43a77dcde5997bc3ec25c4612">m_levels</a></td></tr>
<tr class="memdesc:af7a20fa43a77dcde5997bc3ec25c4612"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mapping from latche level to its string representation.  <a href="#af7a20fa43a77dcde5997bc3ec25c4612">More...</a><br /></td></tr>
<tr class="separator:af7a20fa43a77dcde5997bc3ec25c4612"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a89639fa009e3f4d31f7a209075735646"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structLatchDebug.html">LatchDebug</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLatchDebug.html#a89639fa009e3f4d31f7a209075735646">s_instance</a> = <a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></td></tr>
<tr class="memdesc:a89639fa009e3f4d31f7a209075735646"><td class="mdescLeft">&#160;</td><td class="mdescRight">The singleton instance.  <a href="#a89639fa009e3f4d31f7a209075735646">More...</a><br /></td></tr>
<tr class="separator:a89639fa009e3f4d31f7a209075735646"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The deadlock detector. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a8e748aeedf33bca3267a071cfdae33a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e748aeedf33bca3267a071cfdae33a1">&#9670;&nbsp;</a></span>Levels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>, std::string, <a class="el" href="structLatchDebug_1_1latch__level__less.html">latch_level_less</a>, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt;std::pair&lt;const <a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>, std::string&gt; &gt; &gt; <a class="el" href="structLatchDebug.html#a8e748aeedf33bca3267a071cfdae33a1">LatchDebug::Levels</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a134bf6e4d78708de375a56f7dc58c977"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a134bf6e4d78708de375a56f7dc58c977">&#9670;&nbsp;</a></span>Mutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structOSMutex.html">OSMutex</a> <a class="el" href="structLatchDebug.html#a134bf6e4d78708de375a56f7dc58c977">LatchDebug::Mutex</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debug mutex for control structures, should not be tracked by this module. </p>

</div>
</div>
<a id="ad4e7cb42d4316feee55ac4a3394df9ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4e7cb42d4316feee55ac4a3394df9ce">&#9670;&nbsp;</a></span>ThreadMap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="os0thread_8h.html#ab8ad022ed5dafb1f9defb66ac1b6a62a">os_thread_id_t</a>, <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *, <a class="el" href="structLatchDebug_1_1os__thread__id__less.html">os_thread_id_less</a>, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt;std::pair&lt;const <a class="el" href="os0thread_8h.html#ab8ad022ed5dafb1f9defb66ac1b6a62a">os_thread_id_t</a>, <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *&gt; &gt; &gt; <a class="el" href="structLatchDebug.html#ad4e7cb42d4316feee55ac4a3394df9ce">LatchDebug::ThreadMap</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For tracking a thread's latches. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aba9f45ba75f2df09c45b69eab089cb56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba9f45ba75f2df09c45b69eab089cb56">&#9670;&nbsp;</a></span>LatchDebug() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LatchDebug::LatchDebug </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>Setup the mapping from level ID to level name mapping. </p>

</div>
</div>
<a id="a62acad7dae1d93bb067b57910418db1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62acad7dae1d93bb067b57910418db1b">&#9670;&nbsp;</a></span>~LatchDebug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LatchDebug::~LatchDebug </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<a id="a9fc8e4b7ea79147644f87f0a0c31da5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fc8e4b7ea79147644f87f0a0c31da5e">&#9670;&nbsp;</a></span>LatchDebug() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LatchDebug::LatchDebug </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structLatchDebug.html">LatchDebug</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disable copying. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9e9536d73142a66631616df8b07418a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e9536d73142a66631616df8b07418a3">&#9670;&nbsp;</a></span>basic_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> LatchDebug::basic_check </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *&#160;</td>
          <td class="paramname"><em>latches</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>requested_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>in_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a basic ordering check. </p>
<p>Asserts that all the existing latches have a level higher than the in_level. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latches</td><td>thread's existing latches </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">requested_level</td><td>Level requested by latch </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in_level</td><td>The level of the latch that the thread is trying to acquire. Declared ulint so that we can do level - 1. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if passes, else crash with error message. </dd></dl>

</div>
</div>
<a id="a014f3e084ab96e25bdeeb0ed4d5496b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a014f3e084ab96e25bdeeb0ed4d5496b2">&#9670;&nbsp;</a></span>check_order()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> * LatchDebug::check_order </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlatch__t.html">latch_t</a> *&#160;</td>
          <td class="paramname"><em>latch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a latch and its level in the thread level array. </p>
<p>Allocates the memory for the array if called first time for this OS thread. Makes the checks against other latch levels stored in the array for this thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latch</td><td>pointer to a mutex or an rw-lock </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>level in the latching order </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the thread's latches </dd></dl>

</div>
</div>
<a id="a86a138dbd965b6c2964fff87453519a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86a138dbd965b6c2964fff87453519a6">&#9670;&nbsp;</a></span>crash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LatchDebug::crash </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *&#160;</td>
          <td class="paramname"><em>latches</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structLatched.html">Latched</a> *&#160;</td>
          <td class="paramname"><em>latched</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report error and abort. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latches</td><td>thread's existing latches </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">latched</td><td>The existing latch causing the invariant to fail </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>The new level request that breaks the order </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a05d6e9316e33c3c2c96818fe6a553c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05d6e9316e33c3c2c96818fe6a553c3e">&#9670;&nbsp;</a></span>create_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void LatchDebug::create_instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the singleton instance. </p>

</div>
</div>
<a id="ab4ac863f5a1638fa98fb132190a4ee7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4ac863f5a1638fa98fb132190a4ee7e">&#9670;&nbsp;</a></span>find() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structlatch__t.html">latch_t</a> * LatchDebug::find </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *&#160;</td>
          <td class="paramname"><em>latches</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the level value exists in the thread's acquired latches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latches</td><td>the thread's existing (acquired) latches </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>latch if found or 0 </dd></dl>

</div>
</div>
<a id="af9ba93ba00f6b75f1cfffae028a53e45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9ba93ba00f6b75f1cfffae028a53e45">&#9670;&nbsp;</a></span>find() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structlatch__t.html">latch_t</a> * LatchDebug::find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the level value exists in the thread's acquired latches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>The level to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>latch if found or NULL </dd></dl>

</div>
</div>
<a id="ab2fd633b1ca0d9dadd6142f366222aeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2fd633b1ca0d9dadd6142f366222aeb">&#9670;&nbsp;</a></span>for_each()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> LatchDebug::for_each </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsync__check__functor__t.html">sync_check_functor_t</a> &amp;&#160;</td>
          <td class="paramname"><em>functor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterate over a thread's latches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">functor</td><td>The callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the functor returns true. </dd></dl>

</div>
</div>
<a id="a5477d692c78f236f1c578c8f27915bad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5477d692c78f236f1c578c8f27915bad">&#9670;&nbsp;</a></span>get_level_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; LatchDebug::get_level_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the level name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>The level ID to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>level name </dd></dl>

</div>
</div>
<a id="ac9a4657d3a9dafd2e8f50280be71d0ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9a4657d3a9dafd2e8f50280be71d0ae">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LatchDebug::init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise the debug data structures. </p>

</div>
</div>
<a id="a779571e3cdf15a87a83ff45fb5f6eb33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779571e3cdf15a87a83ff45fb5f6eb33">&#9670;&nbsp;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structLatchDebug.html">LatchDebug</a>* LatchDebug::instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the singleton instance </dd></dl>

</div>
</div>
<a id="a79636a2c2fc2f1235934d6329b0495dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79636a2c2fc2f1235934d6329b0495dd">&#9670;&nbsp;</a></span>is_rtr_mutex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> LatchDebug::is_rtr_mutex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlatch__t.html">latch_t</a> *&#160;</td>
          <td class="paramname"><em>latch</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Special handling for the RTR mutexes. </p>
<p>We need to add proper levels for them if possible. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latch</td><td>Latch to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if it is a an <em>RTR</em> mutex </dd></dl>

</div>
</div>
<a id="a654021e19bd0f622125564e466a1235f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a654021e19bd0f622125564e466a1235f">&#9670;&nbsp;</a></span>less()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structLatched.html">Latched</a> * LatchDebug::less </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *&#160;</td>
          <td class="paramname"><em>latches</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check that all the latches already owned by a thread have a higher level than limit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latches</td><td>the thread's existing (acquired) latches </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">limit</td><td>to check against </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>latched if there is one with a level &lt;= limit . </dd></dl>

</div>
</div>
<a id="aa4c1974bdfe0026f77a662a1841c945c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4c1974bdfe0026f77a662a1841c945c">&#9670;&nbsp;</a></span>lock_granted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LatchDebug::lock_granted </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlatch__t.html">latch_t</a> *&#160;</td>
          <td class="paramname"><em>latch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a latch and its level in the thread level array. </p>
<p>Allocates the memory for the array if called for the first time for this OS thread. Makes the checks against other latch levels stored in the array for this thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latch</td><td>latch that the thread wants to acqire. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>latch level to check against </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a63a290ad33f52573d3e5623201d74157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63a290ad33f52573d3e5623201d74157">&#9670;&nbsp;</a></span>lock_validate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LatchDebug::lock_validate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlatch__t.html">latch_t</a> *&#160;</td>
          <td class="paramname"><em>latch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a latch and its level in the thread level array. </p>
<p>Allocates the memory for the array if called for the first time for this OS thread. Makes the checks against other latch levels stored in the array for this thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latch</td><td>latch that the thread wants to acqire. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>latch level to check against </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a84aebf64367fe45dc3fd302630008bd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84aebf64367fe45dc3fd302630008bd0">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLatchDebug.html">LatchDebug</a>&amp; LatchDebug::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structLatchDebug.html">LatchDebug</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a59c642bd69907a2d31e93ca8f59ca131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59c642bd69907a2d31e93ca8f59ca131">&#9670;&nbsp;</a></span>print_latches()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LatchDebug::print_latches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> *&#160;</td>
          <td class="paramname"><em>latches</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print the latches acquired by a thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latches</td><td>Latches acquired by a thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8de5e3eff40b5cd74967c94a01ff7350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8de5e3eff40b5cd74967c94a01ff7350">&#9670;&nbsp;</a></span>relock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LatchDebug::relock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlatch__t.html">latch_t</a> *&#160;</td>
          <td class="paramname"><em>latch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For recursive X rw-locks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latch</td><td>The RW-Lock to relock </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3a75e9dac5eb66c3b69f1ce30eebfce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a75e9dac5eb66c3b69f1ce30eebfce7">&#9670;&nbsp;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LatchDebug::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shutdown the latch debug checking. </p>
<p>Note: We don't enforce any synchronisation checks. The caller must ensure that no races can occur </p>

</div>
</div>
<a id="af97a85c8c7d7a30bef45a43a198ab867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af97a85c8c7d7a30bef45a43a198ab867">&#9670;&nbsp;</a></span>thread_latches()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sync0debug_8cc.html#a7a38bdb8df96eefe2f7dda4f7eac70d5">Latches</a> * LatchDebug::thread_latches </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>add</em> = <code><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new instance if one doesn't exist else return the existing one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">add</td><td>add an empty entry if one is not found (default no) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to a thread's acquired latches. </dd></dl>

</div>
</div>
<a id="a8cde481311db4d592f47ac637a267d05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cde481311db4d592f47ac637a267d05">&#9670;&nbsp;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LatchDebug::unlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlatch__t.html">latch_t</a> *&#160;</td>
          <td class="paramname"><em>latch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a latch from the thread level array if it is found there. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">latch</td><td>The latch that was released </td></tr>
  </table>
  </dd>
</dl>
<p>Must find the latch. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af7a20fa43a77dcde5997bc3ec25c4612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7a20fa43a77dcde5997bc3ec25c4612">&#9670;&nbsp;</a></span>m_levels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLatchDebug.html#a8e748aeedf33bca3267a071cfdae33a1">Levels</a> LatchDebug::m_levels</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mapping from latche level to its string representation. </p>

</div>
</div>
<a id="a974165e97b030910b66fc2bbcba29d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a974165e97b030910b66fc2bbcba29d68">&#9670;&nbsp;</a></span>m_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLatchDebug.html#a134bf6e4d78708de375a56f7dc58c977">Mutex</a> LatchDebug::m_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex protecting the deadlock detector data structures. </p>

</div>
</div>
<a id="aa4069b6c6075d31c79e00e9f1be41aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4069b6c6075d31c79e00e9f1be41aca">&#9670;&nbsp;</a></span>m_threads</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLatchDebug.html#ad4e7cb42d4316feee55ac4a3394df9ce">ThreadMap</a> LatchDebug::m_threads</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread specific data. </p>
<p>Protected by m_mutex. </p>

</div>
</div>
<a id="adcd892b992d5d569d1f56716ecf04991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcd892b992d5d569d1f56716ecf04991">&#9670;&nbsp;</a></span>s_initialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> LatchDebug::s_initialized = <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For checking whether this module has been initialised or not. </p>

</div>
</div>
<a id="a89639fa009e3f4d31f7a209075735646"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89639fa009e3f4d31f7a209075735646">&#9670;&nbsp;</a></span>s_instance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLatchDebug.html">LatchDebug</a> * LatchDebug::s_instance = <a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The singleton instance. </p>
<p>The latch order checking infra-structure.</p>
<p>Must be created in single threaded mode. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>storage/innobase/sync/<a class="el" href="sync0debug_8cc.html">sync0debug.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structLatchDebug.html">LatchDebug</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
