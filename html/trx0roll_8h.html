<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/trx0roll.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('trx0roll_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">trx0roll.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transaction rollback.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="mtr0mtr_8h_source.html">mtr0mtr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0sys_8h_source.html">trx0sys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0types_8h_source.html">trx0types.h</a>&quot;</code><br />
<code>#include &quot;univ.i&quot;</code><br />
<code>#include &quot;trx0roll.ic&quot;</code><br />
</div>
<p><a href="trx0roll_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structroll__node__t.html">roll_node_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback command node in a query graph.  <a href="structroll__node__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A savepoint set with SQL's "SAVEPOINT savepoint_id" command.  <a href="structtrx__named__savept__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2f6fd6c2dbd79bf99ff5055fc68041df"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041df">roll_node_state</a> { <a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041dfae9f5352ceb83373d37d0d23e49c3dc86">ROLL_NODE_NONE</a> = 0, 
<a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041dfafd2a73d5ceb88f87a4c8a71e85a125db">ROLL_NODE_SEND</a>, 
<a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041dfaa7c18f3ec5eb4365811e1ea03b731ea6">ROLL_NODE_WAIT</a>
 }<tr class="memdesc:a2f6fd6c2dbd79bf99ff5055fc68041df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback node states.  <a href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041df">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a2f6fd6c2dbd79bf99ff5055fc68041df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1b516040097a487c7f1643fc60b08f18"><td class="memItemLeft" align="right" valign="top">ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a1b516040097a487c7f1643fc60b08f18">trx_is_recv</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a1b516040097a487c7f1643fc60b08f18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if this transaction is rolling back an incomplete transaction in crash recovery.  <a href="#a1b516040097a487c7f1643fc60b08f18">More...</a><br /></td></tr>
<tr class="separator:a1b516040097a487c7f1643fc60b08f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19478989dfd7b00d09a75ee804425748"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a19478989dfd7b00d09a75ee804425748">trx_savept_take</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a19478989dfd7b00d09a75ee804425748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a transaction savepoint taken at this point in time.  <a href="#a19478989dfd7b00d09a75ee804425748">More...</a><br /></td></tr>
<tr class="separator:a19478989dfd7b00d09a75ee804425748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa4e7abe110cd0c9357769f8938bc597"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#afa4e7abe110cd0c9357769f8938bc597">trx_roll_pop_top_rec_of_trx</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:afa4e7abe110cd0c9357769f8938bc597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get next undo log record from redo and noredo rollback segments.  <a href="#afa4e7abe110cd0c9357769f8938bc597">More...</a><br /></td></tr>
<tr class="separator:afa4e7abe110cd0c9357769f8938bc597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0b5427c7351d582c059013d443b5b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#afe0b5427c7351d582c059013d443b5b7">trx_rollback_or_clean_recovered</a> (ibool <a class="el" href="xcom__transport_8cc.html#a2ca19ac59047f1b932b7737dac46b7b8">all</a>)</td></tr>
<tr class="memdesc:afe0b5427c7351d582c059013d443b5b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback or clean up any incomplete transactions which were encountered in crash recovery.  <a href="#afe0b5427c7351d582c059013d443b5b7">More...</a><br /></td></tr>
<tr class="separator:afe0b5427c7351d582c059013d443b5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad410cc8aff73a74245b592604f8ce611"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#ad410cc8aff73a74245b592604f8ce611">trx_recovery_rollback_thread</a> ()</td></tr>
<tr class="memdesc:ad410cc8aff73a74245b592604f8ce611"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback or clean up any incomplete transactions which were encountered in crash recovery.  <a href="#ad410cc8aff73a74245b592604f8ce611">More...</a><br /></td></tr>
<tr class="separator:ad410cc8aff73a74245b592604f8ce611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f036b82bdacb63a2e325dcf292aadfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structroll__node__t.html">roll_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a6f036b82bdacb63a2e325dcf292aadfc">roll_node_create</a> (<a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a6f036b82bdacb63a2e325dcf292aadfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a rollback command node struct.  <a href="#a6f036b82bdacb63a2e325dcf292aadfc">More...</a><br /></td></tr>
<tr class="separator:a6f036b82bdacb63a2e325dcf292aadfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3fb6f9e7fcd9f8c3e3b782c45c8345c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#ae3fb6f9e7fcd9f8c3e3b782c45c8345c">trx_rollback_step</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memdesc:ae3fb6f9e7fcd9f8c3e3b782c45c8345c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs an execution step for a rollback command node in a query graph.  <a href="#ae3fb6f9e7fcd9f8c3e3b782c45c8345c">More...</a><br /></td></tr>
<tr class="separator:ae3fb6f9e7fcd9f8c3e3b782c45c8345c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7a8a393062494d8253a097b3ef8690"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a9d7a8a393062494d8253a097b3ef8690">trx_rollback_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a9d7a8a393062494d8253a097b3ef8690"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback a transaction used in MySQL.  <a href="#a9d7a8a393062494d8253a097b3ef8690">More...</a><br /></td></tr>
<tr class="separator:a9d7a8a393062494d8253a097b3ef8690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6feb420759c8cc2d33462ac862b28aab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a6feb420759c8cc2d33462ac862b28aab">trx_rollback_last_sql_stat_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a6feb420759c8cc2d33462ac862b28aab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback the latest SQL statement for MySQL.  <a href="#a6feb420759c8cc2d33462ac862b28aab">More...</a><br /></td></tr>
<tr class="separator:a6feb420759c8cc2d33462ac862b28aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358f61bd18a4d65e1eb7d3470693356c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a358f61bd18a4d65e1eb7d3470693356c">trx_rollback_to_savepoint</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *savept)</td></tr>
<tr class="memdesc:a358f61bd18a4d65e1eb7d3470693356c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback a transaction to a given savepoint or do a complete rollback.  <a href="#a358f61bd18a4d65e1eb7d3470693356c">More...</a><br /></td></tr>
<tr class="separator:a358f61bd18a4d65e1eb7d3470693356c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546741d07aef098ddc869fd964e7edaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a546741d07aef098ddc869fd964e7edaf">trx_rollback_to_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name, int64_t *mysql_binlog_cache_pos)</td></tr>
<tr class="memdesc:a546741d07aef098ddc869fd964e7edaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rolls back a transaction back to a named savepoint.  <a href="#a546741d07aef098ddc869fd964e7edaf">More...</a><br /></td></tr>
<tr class="separator:a546741d07aef098ddc869fd964e7edaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4099b34a1b3da5fe6d979618e382f649"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a4099b34a1b3da5fe6d979618e382f649">trx_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name, int64_t binlog_cache_pos)</td></tr>
<tr class="memdesc:a4099b34a1b3da5fe6d979618e382f649"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a named savepoint.  <a href="#a4099b34a1b3da5fe6d979618e382f649">More...</a><br /></td></tr>
<tr class="separator:a4099b34a1b3da5fe6d979618e382f649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4853f416b4ac491e7ea5dab7f932de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a1d4853f416b4ac491e7ea5dab7f932de">trx_release_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name)</td></tr>
<tr class="memdesc:a1d4853f416b4ac491e7ea5dab7f932de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases a named savepoint.  <a href="#a1d4853f416b4ac491e7ea5dab7f932de">More...</a><br /></td></tr>
<tr class="separator:a1d4853f416b4ac491e7ea5dab7f932de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392c0a42c03d77d661040b64a76569f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8h.html#a392c0a42c03d77d661040b64a76569f9">trx_roll_savepoints_free</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *savep)</td></tr>
<tr class="memdesc:a392c0a42c03d77d661040b64a76569f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees savepoint structs starting from savep.  <a href="#a392c0a42c03d77d661040b64a76569f9">More...</a><br /></td></tr>
<tr class="separator:a392c0a42c03d77d661040b64a76569f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transaction rollback. </p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a2f6fd6c2dbd79bf99ff5055fc68041df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f6fd6c2dbd79bf99ff5055fc68041df">&#9670;&nbsp;</a></span>roll_node_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="trx0roll_8h.html#a2f6fd6c2dbd79bf99ff5055fc68041df">roll_node_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback node states. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2f6fd6c2dbd79bf99ff5055fc68041dfae9f5352ceb83373d37d0d23e49c3dc86"></a>ROLL_NODE_NONE&#160;</td><td class="fielddoc"><p>Unknown state. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f6fd6c2dbd79bf99ff5055fc68041dfafd2a73d5ceb88f87a4c8a71e85a125db"></a>ROLL_NODE_SEND&#160;</td><td class="fielddoc"><p>about to send a rollback signal to the transaction </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f6fd6c2dbd79bf99ff5055fc68041dfaa7c18f3ec5eb4365811e1ea03b731ea6"></a>ROLL_NODE_WAIT&#160;</td><td class="fielddoc"><p>rollback signal sent to the transaction, waiting for completion </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a6f036b82bdacb63a2e325dcf292aadfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f036b82bdacb63a2e325dcf292aadfc">&#9670;&nbsp;</a></span>roll_node_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structroll__node__t.html">roll_node_t</a>* roll_node_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a rollback command node struct. </p>
<dl class="section return"><dt>Returns</dt><dd>own: rollback node struct in: mem heap where created</dd>
<dd>
own: rollback node struct </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">heap</td><td>in: mem heap where created </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b516040097a487c7f1643fc60b08f18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b516040097a487c7f1643fc60b08f18">&#9670;&nbsp;</a></span>trx_is_recv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibool trx_is_recv </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines if this transaction is rolling back an incomplete transaction in crash recovery. </p>
<dl class="section return"><dt>Returns</dt><dd>true if trx is an incomplete transaction that is being rolled back in crash recovery in: transaction</dd>
<dd>
true if trx is an incomplete transaction that is being rolled back in crash recovery </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad410cc8aff73a74245b592604f8ce611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad410cc8aff73a74245b592604f8ce611">&#9670;&nbsp;</a></span>trx_recovery_rollback_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_recovery_rollback_thread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback or clean up any incomplete transactions which were encountered in crash recovery. </p>
<p>If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. Note: this is done in a background thread. </p>

</div>
</div>
<a id="a1d4853f416b4ac491e7ea5dab7f932de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d4853f416b4ac491e7ea5dab7f932de">&#9670;&nbsp;</a></span>trx_release_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_release_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases a named savepoint. </p>
<p>Savepoints which were set after this savepoint are deleted. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS</dd></dl>
<p>Releases a named savepoint.</p>
<p>Savepoints which were set after this savepoint are left as is. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afa4e7abe110cd0c9357769f8938bc597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa4e7abe110cd0c9357769f8938bc597">&#9670;&nbsp;</a></span>trx_roll_pop_top_rec_of_trx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_roll_pop_top_rec_of_trx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get next undo log record from redo and noredo rollback segments. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record copied to heap, NULL if none left, or if the undo number of the top record would be less than the limit in: memory heap where copied</dd>
<dd>
undo log record copied to heap, NULL if none left, or if the undo number of the top record would be less than the limit </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">limit</td><td>in: least undo number we need </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: roll pointer to undo record </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap where copied </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a392c0a42c03d77d661040b64a76569f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a392c0a42c03d77d661040b64a76569f9">&#9670;&nbsp;</a></span>trx_roll_savepoints_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_roll_savepoints_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees savepoint structs starting from savep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>Transaction handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">savep</td><td>Free all savepoints starting with this savepoint i, if savep is nullptr free all save points </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d7a8a393062494d8253a097b3ef8690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7a8a393062494d8253a097b3ef8690">&#9670;&nbsp;</a></span>trx_rollback_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback a transaction used in MySQL. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS in/out: transaction</dd>
<dd>
error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6feb420759c8cc2d33462ac862b28aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6feb420759c8cc2d33462ac862b28aab">&#9670;&nbsp;</a></span>trx_rollback_last_sql_stat_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_last_sql_stat_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback the latest SQL statement for MySQL. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS in/out: transaction</dd>
<dd>
error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe0b5427c7351d582c059013d443b5b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0b5427c7351d582c059013d443b5b7">&#9670;&nbsp;</a></span>trx_rollback_or_clean_recovered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_rollback_or_clean_recovered </td>
          <td>(</td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>all</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback or clean up any incomplete transactions which were encountered in crash recovery. </p>
<p>If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. in: FALSE=roll back dictionary transactions; TRUE=roll back all non-PREPARED transactions</p>
<p>If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">all</td><td>in: FALSE=roll back dictionary transactions; TRUE=roll back all non-PREPARED transactions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae3fb6f9e7fcd9f8c3e3b782c45c8345c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3fb6f9e7fcd9f8c3e3b782c45c8345c">&#9670;&nbsp;</a></span>trx_rollback_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structque__thr__t.html">que_thr_t</a>* trx_rollback_step </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs an execution step for a rollback command node in a query graph. </p>
<dl class="section return"><dt>Returns</dt><dd>query thread to run next, or NULL in: query thread</dd>
<dd>
query thread to run next, or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a358f61bd18a4d65e1eb7d3470693356c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358f61bd18a4d65e1eb7d3470693356c">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savept</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback a transaction to a given savepoint or do a complete rollback. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS in: pointer to savepoint undo number, if partial rollback requested, or NULL for complete rollback</dd>
<dd>
error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savept</td><td>in: pointer to savepoint undo number, if partial rollback requested, or NULL for complete rollback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a546741d07aef098ddc869fd964e7edaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a546741d07aef098ddc869fd964e7edaf">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>mysql_binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rolls back a transaction back to a named savepoint. </p>
<p>Modifications after the savepoint are undone but InnoDB does NOT release the corresponding locks which are stored in memory. If a lock is 'implicit', that is, a new inserted row holds a lock where the lock information is carried by the trx id stored in the row, these locks are naturally released in the rollback. Savepoints which were set after this savepoint are deleted. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
    <tr><td class="paramname">mysql_binlog_cache_pos</td><td>out: the MySQL binlog cache position corresponding to this savepoint; MySQL needs this information to remove the binlog entries of the queries executed after the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4099b34a1b3da5fe6d979618e382f649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4099b34a1b3da5fe6d979618e382f649">&#9670;&nbsp;</a></span>trx_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a named savepoint. </p>
<p>If the transaction is not yet started, starts it. If there is already a savepoint of the same name, this call erases that old savepoint and replaces it with a new. Savepoints are deleted in a transaction commit or rollback. </p><dl class="section return"><dt>Returns</dt><dd>always DB_SUCCESS in: MySQL binlog cache position corresponding to this connection at the time of the savepoint</dd></dl>
<p>If the transaction is not yet started, starts it. If there is already a savepoint of the same name, this call erases that old savepoint and replaces it with a new. Savepoints are deleted in a transaction commit or rollback. </p><dl class="section return"><dt>Returns</dt><dd>always DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
    <tr><td class="paramname">binlog_cache_pos</td><td>in: MySQL binlog cache position corresponding to this connection at the time of the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a19478989dfd7b00d09a75ee804425748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19478989dfd7b00d09a75ee804425748">&#9670;&nbsp;</a></span>trx_savept_take()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a> trx_savept_take </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a transaction savepoint taken at this point in time. </p>
<dl class="section return"><dt>Returns</dt><dd>savepoint in: transaction</dd>
<dd>
savepoint </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="trx0roll_8h.html">trx0roll.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
