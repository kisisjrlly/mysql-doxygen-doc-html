<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Binlog_encryption_ostream Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classBinlog__encryption__ostream.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classBinlog__encryption__ostream-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Binlog_encryption_ostream Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>It is an Truncatable_ostream which provides encryption feature.  
 <a href="classBinlog__encryption__ostream.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="binlog__ostream_8h_source.html">binlog_ostream.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Binlog_encryption_ostream:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBinlog__encryption__ostream.png" usemap="#Binlog_5Fencryption_5Fostream_map" alt=""/>
  <map id="Binlog_5Fencryption_5Fostream_map" name="Binlog_5Fencryption_5Fostream_map">
<area href="classTruncatable__ostream.html" title="Truncatable_ostream abstract class provides seek() and truncate() interfaces to all truncatable outpu..." alt="Truncatable_ostream" shape="rect" coords="0,56,165,80"/>
<area href="classBasic__ostream.html" title="The abstract class for basic output streams which provides write operation. " alt="Basic_ostream" shape="rect" coords="0,0,165,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac1a5ac86a063ff6528f01727eef395ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#ac1a5ac86a063ff6528f01727eef395ac">~Binlog_encryption_ostream</a> () override</td></tr>
<tr class="separator:ac1a5ac86a063ff6528f01727eef395ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e44ac2c63b32c2d3bc7d6254ca5de77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#a2e44ac2c63b32c2d3bc7d6254ca5de77">open</a> (std::unique_ptr&lt; <a class="el" href="classTruncatable__ostream.html">Truncatable_ostream</a> &gt; down_ostream)</td></tr>
<tr class="memdesc:a2e44ac2c63b32c2d3bc7d6254ca5de77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the context used in the encryption stream and write encryption header into down stream.  <a href="#a2e44ac2c63b32c2d3bc7d6254ca5de77">More...</a><br /></td></tr>
<tr class="separator:a2e44ac2c63b32c2d3bc7d6254ca5de77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bde63cec6a3fa83ef847f0637613646"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#a7bde63cec6a3fa83ef847f0637613646">open</a> (std::unique_ptr&lt; <a class="el" href="classTruncatable__ostream.html">Truncatable_ostream</a> &gt; down_ostream, std::unique_ptr&lt; <a class="el" href="classRpl__encryption__header.html">Rpl_encryption_header</a> &gt; header)</td></tr>
<tr class="memdesc:a7bde63cec6a3fa83ef847f0637613646"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the context used in the encryption stream based on the header passed as parameter.  <a href="#a7bde63cec6a3fa83ef847f0637613646">More...</a><br /></td></tr>
<tr class="separator:a7bde63cec6a3fa83ef847f0637613646"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f1434381336699da543a9c49cfb17d"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#ab0f1434381336699da543a9c49cfb17d">reencrypt</a> ()</td></tr>
<tr class="memdesc:ab0f1434381336699da543a9c49cfb17d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-encrypt the encrypted binary/relay log file header by replacing its binlog encryption key id with the current one and its encrypted file password with the new one, which is got by encrypting its file password with the current binlog encryption key.  <a href="#ab0f1434381336699da543a9c49cfb17d">More...</a><br /></td></tr>
<tr class="separator:ab0f1434381336699da543a9c49cfb17d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc41d4f2afa4c4c64aa28b33ac431ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#aabc41d4f2afa4c4c64aa28b33ac431ed">close</a> ()</td></tr>
<tr class="separator:aabc41d4f2afa4c4c64aa28b33ac431ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab694381d51ce7fad9698469ec5a5f544"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#ab694381d51ce7fad9698469ec5a5f544">write</a> (const unsigned char *<a class="el" href="test__sql__9__sessions_8cc.html#ac242a6dca06b33213957c913bd72414c">buffer</a>, <a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> length) override</td></tr>
<tr class="memdesc:ab694381d51ce7fad9698469ec5a5f544"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write some bytes into the output stream.  <a href="#ab694381d51ce7fad9698469ec5a5f544">More...</a><br /></td></tr>
<tr class="separator:ab694381d51ce7fad9698469ec5a5f544"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab7270126e6164c023b39ea358e36aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#aeab7270126e6164c023b39ea358e36aa">truncate</a> (<a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> offset) override</td></tr>
<tr class="memdesc:aeab7270126e6164c023b39ea358e36aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate some data at the end of the output stream.  <a href="#aeab7270126e6164c023b39ea358e36aa">More...</a><br /></td></tr>
<tr class="separator:aeab7270126e6164c023b39ea358e36aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5d28bb366251a45134f38eca08f94d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#aef5d28bb366251a45134f38eca08f94d">seek</a> (<a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> offset) override</td></tr>
<tr class="memdesc:aef5d28bb366251a45134f38eca08f94d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put the write position to a given offset.  <a href="#aef5d28bb366251a45134f38eca08f94d">More...</a><br /></td></tr>
<tr class="separator:aef5d28bb366251a45134f38eca08f94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae383762ae67ef9987d4a5d1b0bf536d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#ae383762ae67ef9987d4a5d1b0bf536d8">flush</a> () override</td></tr>
<tr class="memdesc:ae383762ae67ef9987d4a5d1b0bf536d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush data.  <a href="#ae383762ae67ef9987d4a5d1b0bf536d8">More...</a><br /></td></tr>
<tr class="separator:ae383762ae67ef9987d4a5d1b0bf536d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf67126c3095578656fa0dd269475078"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#abf67126c3095578656fa0dd269475078">sync</a> () override</td></tr>
<tr class="memdesc:abf67126c3095578656fa0dd269475078"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync.  <a href="#abf67126c3095578656fa0dd269475078">More...</a><br /></td></tr>
<tr class="separator:abf67126c3095578656fa0dd269475078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a75ab49b2302d8a50749274a9177e87"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#a0a75ab49b2302d8a50749274a9177e87">get_header_size</a> ()</td></tr>
<tr class="memdesc:a0a75ab49b2302d8a50749274a9177e87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the encrypted file header size.  <a href="#a0a75ab49b2302d8a50749274a9177e87">More...</a><br /></td></tr>
<tr class="separator:a0a75ab49b2302d8a50749274a9177e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classTruncatable__ostream"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classTruncatable__ostream')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classTruncatable__ostream.html">Truncatable_ostream</a></td></tr>
<tr class="memitem:aa8ca5f6e15a1e989dae1102efa014563 inherit pub_methods_classTruncatable__ostream"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTruncatable__ostream.html#aa8ca5f6e15a1e989dae1102efa014563">~Truncatable_ostream</a> () override</td></tr>
<tr class="separator:aa8ca5f6e15a1e989dae1102efa014563 inherit pub_methods_classTruncatable__ostream"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classBasic__ostream"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classBasic__ostream')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classBasic__ostream.html">Basic_ostream</a></td></tr>
<tr class="memitem:a9b0f92452740a54bcdfbe91913763fe3 inherit pub_methods_classBasic__ostream"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBasic__ostream.html#a9b0f92452740a54bcdfbe91913763fe3">~Basic_ostream</a> ()</td></tr>
<tr class="separator:a9b0f92452740a54bcdfbe91913763fe3 inherit pub_methods_classBasic__ostream"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a732581015bac1ccabd0a1fd6f271368a"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classTruncatable__ostream.html">Truncatable_ostream</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#a732581015bac1ccabd0a1fd6f271368a">m_down_ostream</a></td></tr>
<tr class="separator:a732581015bac1ccabd0a1fd6f271368a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4196aa1690e7d7dd0d3a763d0c58ace0"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classRpl__encryption__header.html">Rpl_encryption_header</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#a4196aa1690e7d7dd0d3a763d0c58ace0">m_header</a></td></tr>
<tr class="separator:a4196aa1690e7d7dd0d3a763d0c58ace0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9531090819d98cfe7525fce416501720"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classStream__cipher.html">Stream_cipher</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__encryption__ostream.html#a9531090819d98cfe7525fce416501720">m_encryptor</a></td></tr>
<tr class="separator:a9531090819d98cfe7525fce416501720"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>It is an Truncatable_ostream which provides encryption feature. </p>
<p>It can be setup into an stream pipeline. In the pipeline, it encrypts the data from up stream and then feeds the encrypted data into down stream. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac1a5ac86a063ff6528f01727eef395ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1a5ac86a063ff6528f01727eef395ac">&#9670;&nbsp;</a></span>~Binlog_encryption_ostream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Binlog_encryption_ostream::~Binlog_encryption_ostream </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aabc41d4f2afa4c4c64aa28b33ac431ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabc41d4f2afa4c4c64aa28b33ac431ed">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Binlog_encryption_ostream::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae383762ae67ef9987d4a5d1b0bf536d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae383762ae67ef9987d4a5d1b0bf536d8">&#9670;&nbsp;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Binlog_encryption_ostream::flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flush data. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success. </td></tr>
    <tr><td class="paramname">true</td><td>Error. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classTruncatable__ostream.html#a845dadb70d9acfb6123cdaaf6e049852">Truncatable_ostream</a>.</p>

</div>
</div>
<a id="a0a75ab49b2302d8a50749274a9177e87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a75ab49b2302d8a50749274a9177e87">&#9670;&nbsp;</a></span>get_header_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Binlog_encryption_ostream::get_header_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the encrypted file header size. </p>
<dl class="section return"><dt>Returns</dt><dd>the encrypted file header size. </dd></dl>

</div>
</div>
<a id="a2e44ac2c63b32c2d3bc7d6254ca5de77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e44ac2c63b32c2d3bc7d6254ca5de77">&#9670;&nbsp;</a></span>open() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Binlog_encryption_ostream::open </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classTruncatable__ostream.html">Truncatable_ostream</a> &gt;&#160;</td>
          <td class="paramname"><em>down_ostream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the context used in the encryption stream and write encryption header into down stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">down_ostream</td><td>The stream for storing encrypted data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7bde63cec6a3fa83ef847f0637613646"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bde63cec6a3fa83ef847f0637613646">&#9670;&nbsp;</a></span>open() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Binlog_encryption_ostream::open </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classTruncatable__ostream.html">Truncatable_ostream</a> &gt;&#160;</td>
          <td class="paramname"><em>down_ostream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classRpl__encryption__header.html">Rpl_encryption_header</a> &gt;&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the context used in the encryption stream based on the header passed as parameter. </p>
<p>It shall be used when opening an ostream for a stream that was already encrypted (the cypher password already exists).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">down_ostream</td><td>the stream for storing encrypted data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">header</td><td>the encryption header to setup the cypher.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success. </td></tr>
    <tr><td class="paramname">true</td><td>Error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab0f1434381336699da543a9c49cfb17d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0f1434381336699da543a9c49cfb17d">&#9670;&nbsp;</a></span>reencrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>, std::string &gt; Binlog_encryption_ostream::reencrypt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-encrypt the encrypted binary/relay log file header by replacing its binlog encryption key id with the current one and its encrypted file password with the new one, which is got by encrypting its file password with the current binlog encryption key. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success with an empty error message. </td></tr>
    <tr><td class="paramname">true</td><td>Error with an error message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aef5d28bb366251a45134f38eca08f94d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef5d28bb366251a45134f38eca08f94d">&#9670;&nbsp;</a></span>seek()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Binlog_encryption_ostream::seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a>&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Put the write position to a given offset. </p>
<p>The offset counts from the beginning of the file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Where the write position will be </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classTruncatable__ostream.html#a86c46a2a08b1ebfa60b04021f77b475b">Truncatable_ostream</a>.</p>

</div>
</div>
<a id="abf67126c3095578656fa0dd269475078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf67126c3095578656fa0dd269475078">&#9670;&nbsp;</a></span>sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Binlog_encryption_ostream::sync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sync. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classTruncatable__ostream.html#acd4b866553715e00a18264880e3e68d7">Truncatable_ostream</a>.</p>

</div>
</div>
<a id="aeab7270126e6164c023b39ea358e36aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeab7270126e6164c023b39ea358e36aa">&#9670;&nbsp;</a></span>truncate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Binlog_encryption_ostream::truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a>&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Truncate some data at the end of the output stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Where the output stream will be truncated to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classTruncatable__ostream.html#ad4d97c41a6fb71b204003b34237fbb57">Truncatable_ostream</a>.</p>

</div>
</div>
<a id="ab694381d51ce7fad9698469ec5a5f544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab694381d51ce7fad9698469ec5a5f544">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Binlog_encryption_ostream::write </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a>&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write some bytes into the output stream. </p>
<p>When all data is written into the stream successfully, then it return false. Otherwise, true is returned. It will never returns false when partial data is written into the stream.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>Data to be written </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of the data </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success. </td></tr>
    <tr><td class="paramname">true</td><td>Error. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classBasic__ostream.html#ae94e65ce033f97f4182bc77382fbca70">Basic_ostream</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a732581015bac1ccabd0a1fd6f271368a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a732581015bac1ccabd0a1fd6f271368a">&#9670;&nbsp;</a></span>m_down_ostream</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classTruncatable__ostream.html">Truncatable_ostream</a>&gt; Binlog_encryption_ostream::m_down_ostream</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9531090819d98cfe7525fce416501720"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9531090819d98cfe7525fce416501720">&#9670;&nbsp;</a></span>m_encryptor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classStream__cipher.html">Stream_cipher</a>&gt; Binlog_encryption_ostream::m_encryptor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4196aa1690e7d7dd0d3a763d0c58ace0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4196aa1690e7d7dd0d3a763d0c58ace0">&#9670;&nbsp;</a></span>m_header</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classRpl__encryption__header.html">Rpl_encryption_header</a>&gt; Binlog_encryption_ostream::m_header</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="binlog__ostream_8h_source.html">binlog_ostream.h</a></li>
<li>sql/<a class="el" href="binlog__ostream_8cc.html">binlog_ostream.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classBinlog__encryption__ostream.html">Binlog_encryption_ostream</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
