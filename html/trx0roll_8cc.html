<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/trx/trx0roll.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('trx0roll_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">trx0roll.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transaction rollback.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &quot;<a class="el" href="clone0clone_8h_source.html">clone0clone.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0dd_8h_source.html">dict0dd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsp0fsp_8h_source.html">fsp0fsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ha__prototypes_8h_source.html">ha_prototypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lock0lock_8h_source.html">lock0lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mach0data_8h_source.html">mach0data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="os0thread-create_8h_source.html">os0thread-create.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pars0pars_8h_source.html">pars0pars.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0que_8h_source.html">que0que.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="read0read_8h_source.html">read0read.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0mysql_8h_source.html">row0mysql.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0undo_8h_source.html">row0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__thd__internal__api_8h_source.html">sql_thd_internal_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0mon_8h_source.html">srv0mon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0start_8h_source.html">srv0start.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rec_8h_source.html">trx0rec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0roll_8h_source.html">trx0roll.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rseg_8h_source.html">trx0rseg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0sys_8h_source.html">trx0sys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0undo_8h_source.html">trx0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="usr0sess_8h_source.html">usr0sess.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="current__thd_8h_source.html">current_thd.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad2e1a5e5d202b00e407fed95641386fc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ad2e1a5e5d202b00e407fed95641386fc">trx_rollback_finish</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:ad2e1a5e5d202b00e407fed95641386fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finishes a transaction rollback.  <a href="#ad2e1a5e5d202b00e407fed95641386fc">More...</a><br /></td></tr>
<tr class="separator:ad2e1a5e5d202b00e407fed95641386fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b5e8cee53125996fd329e60b8d8b53"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ab7b5e8cee53125996fd329e60b8d8b53">trx_rollback_to_savepoint_low</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *savept)</td></tr>
<tr class="memdesc:ab7b5e8cee53125996fd329e60b8d8b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback a transaction used in MySQL.  <a href="#ab7b5e8cee53125996fd329e60b8d8b53">More...</a><br /></td></tr>
<tr class="separator:ab7b5e8cee53125996fd329e60b8d8b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358f61bd18a4d65e1eb7d3470693356c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a358f61bd18a4d65e1eb7d3470693356c">trx_rollback_to_savepoint</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *savept)</td></tr>
<tr class="memdesc:a358f61bd18a4d65e1eb7d3470693356c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback a transaction to a given savepoint or do a complete rollback.  <a href="#a358f61bd18a4d65e1eb7d3470693356c">More...</a><br /></td></tr>
<tr class="separator:a358f61bd18a4d65e1eb7d3470693356c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a265e70bdcbb3f320d82b35183caa3604"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a265e70bdcbb3f320d82b35183caa3604">trx_rollback_for_mysql_low</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a265e70bdcbb3f320d82b35183caa3604"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback a transaction used in MySQL.  <a href="#a265e70bdcbb3f320d82b35183caa3604">More...</a><br /></td></tr>
<tr class="separator:a265e70bdcbb3f320d82b35183caa3604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad089844a5fd1e21226caf8533c904bcf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ad089844a5fd1e21226caf8533c904bcf">trx_rollback_low</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:ad089844a5fd1e21226caf8533c904bcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback a transaction used in MySQL.  <a href="#ad089844a5fd1e21226caf8533c904bcf">More...</a><br /></td></tr>
<tr class="separator:ad089844a5fd1e21226caf8533c904bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7a8a393062494d8253a097b3ef8690"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a9d7a8a393062494d8253a097b3ef8690">trx_rollback_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a9d7a8a393062494d8253a097b3ef8690"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback a transaction used in MySQL.  <a href="#a9d7a8a393062494d8253a097b3ef8690">More...</a><br /></td></tr>
<tr class="separator:a9d7a8a393062494d8253a097b3ef8690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6feb420759c8cc2d33462ac862b28aab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a6feb420759c8cc2d33462ac862b28aab">trx_rollback_last_sql_stat_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a6feb420759c8cc2d33462ac862b28aab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback the latest SQL statement for MySQL.  <a href="#a6feb420759c8cc2d33462ac862b28aab">More...</a><br /></td></tr>
<tr class="separator:a6feb420759c8cc2d33462ac862b28aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee470c82dfb3744b37e700763b3a9a8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#abee470c82dfb3744b37e700763b3a9a8">trx_savepoint_find</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="memdesc:abee470c82dfb3744b37e700763b3a9a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for a savepoint using name.  <a href="#abee470c82dfb3744b37e700763b3a9a8">More...</a><br /></td></tr>
<tr class="separator:abee470c82dfb3744b37e700763b3a9a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad65f3dd677b26922f503c5928e679629"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ad65f3dd677b26922f503c5928e679629">trx_roll_savepoint_free</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *savep)</td></tr>
<tr class="memdesc:ad65f3dd677b26922f503c5928e679629"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a single savepoint struct.  <a href="#ad65f3dd677b26922f503c5928e679629">More...</a><br /></td></tr>
<tr class="separator:ad65f3dd677b26922f503c5928e679629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392c0a42c03d77d661040b64a76569f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a392c0a42c03d77d661040b64a76569f9">trx_roll_savepoints_free</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *savep)</td></tr>
<tr class="memdesc:a392c0a42c03d77d661040b64a76569f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees savepoint structs starting from savep.  <a href="#a392c0a42c03d77d661040b64a76569f9">More...</a><br /></td></tr>
<tr class="separator:a392c0a42c03d77d661040b64a76569f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7ce0947be0ec29df3c8eaf7d2b331c6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#aa7ce0947be0ec29df3c8eaf7d2b331c6">trx_rollback_to_savepoint_for_mysql_low</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *savep, int64_t *mysql_binlog_cache_pos)</td></tr>
<tr class="memdesc:aa7ce0947be0ec29df3c8eaf7d2b331c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rolls back a transaction back to a named savepoint.  <a href="#aa7ce0947be0ec29df3c8eaf7d2b331c6">More...</a><br /></td></tr>
<tr class="separator:aa7ce0947be0ec29df3c8eaf7d2b331c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546741d07aef098ddc869fd964e7edaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a546741d07aef098ddc869fd964e7edaf">trx_rollback_to_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name, int64_t *mysql_binlog_cache_pos)</td></tr>
<tr class="memdesc:a546741d07aef098ddc869fd964e7edaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rolls back a transaction back to a named savepoint.  <a href="#a546741d07aef098ddc869fd964e7edaf">More...</a><br /></td></tr>
<tr class="separator:a546741d07aef098ddc869fd964e7edaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4099b34a1b3da5fe6d979618e382f649"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a4099b34a1b3da5fe6d979618e382f649">trx_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name, int64_t binlog_cache_pos)</td></tr>
<tr class="memdesc:a4099b34a1b3da5fe6d979618e382f649"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a named savepoint.  <a href="#a4099b34a1b3da5fe6d979618e382f649">More...</a><br /></td></tr>
<tr class="separator:a4099b34a1b3da5fe6d979618e382f649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4853f416b4ac491e7ea5dab7f932de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a1d4853f416b4ac491e7ea5dab7f932de">trx_release_savepoint_for_mysql</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const char *savepoint_name)</td></tr>
<tr class="memdesc:a1d4853f416b4ac491e7ea5dab7f932de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases only the named savepoint.  <a href="#a1d4853f416b4ac491e7ea5dab7f932de">More...</a><br /></td></tr>
<tr class="separator:a1d4853f416b4ac491e7ea5dab7f932de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b516040097a487c7f1643fc60b08f18"><td class="memItemLeft" align="right" valign="top">ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a1b516040097a487c7f1643fc60b08f18">trx_is_recv</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a1b516040097a487c7f1643fc60b08f18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if this transaction is rolling back an incomplete transaction in crash recovery.  <a href="#a1b516040097a487c7f1643fc60b08f18">More...</a><br /></td></tr>
<tr class="separator:a1b516040097a487c7f1643fc60b08f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19478989dfd7b00d09a75ee804425748"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a19478989dfd7b00d09a75ee804425748">trx_savept_take</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a19478989dfd7b00d09a75ee804425748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a transaction savepoint taken at this point in time.  <a href="#a19478989dfd7b00d09a75ee804425748">More...</a><br /></td></tr>
<tr class="separator:a19478989dfd7b00d09a75ee804425748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88b4d0f76bd2eb463c33c7973f11036"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#af88b4d0f76bd2eb463c33c7973f11036">trx_rollback_active</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:af88b4d0f76bd2eb463c33c7973f11036"><td class="mdescLeft">&#160;</td><td class="mdescRight">Roll back an active transaction.  <a href="#af88b4d0f76bd2eb463c33c7973f11036">More...</a><br /></td></tr>
<tr class="separator:af88b4d0f76bd2eb463c33c7973f11036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07f335099e0c7501d782ec6363269d2a"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a07f335099e0c7501d782ec6363269d2a">trx_rollback_or_clean_resurrected</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, ibool <a class="el" href="xcom__transport_8cc.html#a2ca19ac59047f1b932b7737dac46b7b8">all</a>)</td></tr>
<tr class="memdesc:a07f335099e0c7501d782ec6363269d2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback or clean up any resurrected incomplete transactions.  <a href="#a07f335099e0c7501d782ec6363269d2a">More...</a><br /></td></tr>
<tr class="separator:a07f335099e0c7501d782ec6363269d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe0b5427c7351d582c059013d443b5b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#afe0b5427c7351d582c059013d443b5b7">trx_rollback_or_clean_recovered</a> (ibool <a class="el" href="xcom__transport_8cc.html#a2ca19ac59047f1b932b7737dac46b7b8">all</a>)</td></tr>
<tr class="memdesc:afe0b5427c7351d582c059013d443b5b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback or clean up any incomplete transactions which were encountered in crash recovery.  <a href="#afe0b5427c7351d582c059013d443b5b7">More...</a><br /></td></tr>
<tr class="separator:afe0b5427c7351d582c059013d443b5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad410cc8aff73a74245b592604f8ce611"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ad410cc8aff73a74245b592604f8ce611">trx_recovery_rollback_thread</a> ()</td></tr>
<tr class="memdesc:ad410cc8aff73a74245b592604f8ce611"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback or clean up any incomplete transactions which were encountered in crash recovery.  <a href="#ad410cc8aff73a74245b592604f8ce611">More...</a><br /></td></tr>
<tr class="separator:ad410cc8aff73a74245b592604f8ce611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade10d734092b1cce046febd1a5174530"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ade10d734092b1cce046febd1a5174530">trx_roll_try_truncate</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *undo_ptr)</td></tr>
<tr class="memdesc:ade10d734092b1cce046febd1a5174530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries truncate the undo logs.  <a href="#ade10d734092b1cce046febd1a5174530">More...</a><br /></td></tr>
<tr class="separator:ade10d734092b1cce046febd1a5174530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecf6e9d27569b184e1eed6a576ec9368"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#aecf6e9d27569b184e1eed6a576ec9368">trx_roll_pop_top_rec</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr, uint32_t *undo_offset)</td></tr>
<tr class="memdesc:aecf6e9d27569b184e1eed6a576ec9368"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pops the topmost undo log record in a single undo log and updates the info about the topmost record in the undo log memory struct.  <a href="#aecf6e9d27569b184e1eed6a576ec9368">More...</a><br /></td></tr>
<tr class="separator:aecf6e9d27569b184e1eed6a576ec9368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf35858f03cc7b6882cbf387d957def0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#acf35858f03cc7b6882cbf387d957def0">trx_roll_pop_top_rec_of_trx_low</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *undo_ptr, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:acf35858f03cc7b6882cbf387d957def0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pops the topmost record when the two undo logs of a transaction are seen as a single stack of records ordered by their undo numbers.  <a href="#acf35858f03cc7b6882cbf387d957def0">More...</a><br /></td></tr>
<tr class="separator:acf35858f03cc7b6882cbf387d957def0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa4e7abe110cd0c9357769f8938bc597"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#afa4e7abe110cd0c9357769f8938bc597">trx_roll_pop_top_rec_of_trx</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:afa4e7abe110cd0c9357769f8938bc597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get next undo log record from redo and noredo rollback segments.  <a href="#afa4e7abe110cd0c9357769f8938bc597">More...</a><br /></td></tr>
<tr class="separator:afa4e7abe110cd0c9357769f8938bc597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a852dc9d8446c2ecf0b981587e2e5ada3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="que0types_8h.html#a3052106eec0aaf80a6028b16f70372b1">que_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a852dc9d8446c2ecf0b981587e2e5ada3">trx_roll_graph_build</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> partial_rollback)</td></tr>
<tr class="memdesc:a852dc9d8446c2ecf0b981587e2e5ada3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds an undo 'query' graph for a transaction.  <a href="#a852dc9d8446c2ecf0b981587e2e5ada3">More...</a><br /></td></tr>
<tr class="separator:a852dc9d8446c2ecf0b981587e2e5ada3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26597748a9d9fe10818e7a763e62b580"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a26597748a9d9fe10818e7a763e62b580">trx_rollback_start</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, ib_id_t roll_limit, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> partial_rollback)</td></tr>
<tr class="memdesc:a26597748a9d9fe10818e7a763e62b580"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a rollback operation, creates the UNDO graph that will do the actual undo operation.  <a href="#a26597748a9d9fe10818e7a763e62b580">More...</a><br /></td></tr>
<tr class="separator:a26597748a9d9fe10818e7a763e62b580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f036b82bdacb63a2e325dcf292aadfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structroll__node__t.html">roll_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a6f036b82bdacb63a2e325dcf292aadfc">roll_node_create</a> (<a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a6f036b82bdacb63a2e325dcf292aadfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a rollback command node struct.  <a href="#a6f036b82bdacb63a2e325dcf292aadfc">More...</a><br /></td></tr>
<tr class="separator:a6f036b82bdacb63a2e325dcf292aadfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3fb6f9e7fcd9f8c3e3b782c45c8345c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ae3fb6f9e7fcd9f8c3e3b782c45c8345c">trx_rollback_step</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memdesc:ae3fb6f9e7fcd9f8c3e3b782c45c8345c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs an execution step for a rollback command node in a query graph.  <a href="#ae3fb6f9e7fcd9f8c3e3b782c45c8345c">More...</a><br /></td></tr>
<tr class="separator:ae3fb6f9e7fcd9f8c3e3b782c45c8345c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae53fd3846302198212604789126c0b10"><td class="memItemLeft" align="right" valign="top">static const ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ae53fd3846302198212604789126c0b10">TRX_ROLL_TRUNC_THRESHOLD</a> = 1</td></tr>
<tr class="memdesc:ae53fd3846302198212604789126c0b10"><td class="mdescLeft">&#160;</td><td class="mdescRight">This many pages must be undone before a truncate is tried within rollback.  <a href="#ae53fd3846302198212604789126c0b10">More...</a><br /></td></tr>
<tr class="separator:ae53fd3846302198212604789126c0b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9da4a2de8f19d092d328a5147adbc43"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#ac9da4a2de8f19d092d328a5147adbc43">trx_roll_crash_recv_trx</a> = <a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></td></tr>
<tr class="memdesc:ac9da4a2de8f19d092d328a5147adbc43"><td class="mdescLeft">&#160;</td><td class="mdescRight">In crash recovery, the current trx to be rolled back; NULL otherwise.  <a href="#ac9da4a2de8f19d092d328a5147adbc43">More...</a><br /></td></tr>
<tr class="separator:ac9da4a2de8f19d092d328a5147adbc43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0537f6be87635c0d58a82c35b96cf2c4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a0537f6be87635c0d58a82c35b96cf2c4">trx_roll_max_undo_no</a></td></tr>
<tr class="memdesc:a0537f6be87635c0d58a82c35b96cf2c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">In crash recovery we set this to the undo n:o of the current trx to be rolled back.  <a href="#a0537f6be87635c0d58a82c35b96cf2c4">More...</a><br /></td></tr>
<tr class="separator:a0537f6be87635c0d58a82c35b96cf2c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6602423933207992600930ceaa258936"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0roll_8cc.html#a6602423933207992600930ceaa258936">trx_roll_progress_printed_pct</a></td></tr>
<tr class="memdesc:a6602423933207992600930ceaa258936"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary variable which tells the previous progress % we printed.  <a href="#a6602423933207992600930ceaa258936">More...</a><br /></td></tr>
<tr class="separator:a6602423933207992600930ceaa258936"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transaction rollback. </p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6f036b82bdacb63a2e325dcf292aadfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f036b82bdacb63a2e325dcf292aadfc">&#9670;&nbsp;</a></span>roll_node_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structroll__node__t.html">roll_node_t</a>* roll_node_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a rollback command node struct. </p>
<dl class="section return"><dt>Returns</dt><dd>own: rollback node struct </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">heap</td><td>in: mem heap where created </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b516040097a487c7f1643fc60b08f18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b516040097a487c7f1643fc60b08f18">&#9670;&nbsp;</a></span>trx_is_recv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibool trx_is_recv </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines if this transaction is rolling back an incomplete transaction in crash recovery. </p>
<dl class="section return"><dt>Returns</dt><dd>true if trx is an incomplete transaction that is being rolled back in crash recovery </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad410cc8aff73a74245b592604f8ce611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad410cc8aff73a74245b592604f8ce611">&#9670;&nbsp;</a></span>trx_recovery_rollback_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_recovery_rollback_thread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback or clean up any incomplete transactions which were encountered in crash recovery. </p>
<p>If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. Note: this is done in a background thread. </p>

</div>
</div>
<a id="a1d4853f416b4ac491e7ea5dab7f932de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d4853f416b4ac491e7ea5dab7f932de">&#9670;&nbsp;</a></span>trx_release_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_release_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases only the named savepoint. </p>
<p>Releases a named savepoint.</p>
<p>Savepoints which were set after this savepoint are left as is. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a852dc9d8446c2ecf0b981587e2e5ada3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a852dc9d8446c2ecf0b981587e2e5ada3">&#9670;&nbsp;</a></span>trx_roll_graph_build()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="que0types_8h.html#a3052106eec0aaf80a6028b16f70372b1">que_t</a>* trx_roll_graph_build </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>partial_rollback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds an undo 'query' graph for a transaction. </p>
<p>The actual rollback is performed by executing this query graph like a query subprocedure call. The reply about the completion of the rollback will be sent by this graph. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">partial_rollback</td><td>true if partial rollback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the query graph </dd></dl>

</div>
</div>
<a id="aecf6e9d27569b184e1eed6a576ec9368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecf6e9d27569b184e1eed6a576ec9368">&#9670;&nbsp;</a></span>trx_roll_pop_top_rec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a>* trx_roll_pop_top_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>undo_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pops the topmost undo log record in a single undo log and updates the info about the topmost record in the undo log memory struct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">undo</td><td>undo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mtr</td><td>mtr </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">undo_offset</td><td>offset of undo record in the page </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Undo page where undo log record resides, the page s-latched </dd></dl>

</div>
</div>
<a id="afa4e7abe110cd0c9357769f8938bc597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa4e7abe110cd0c9357769f8938bc597">&#9670;&nbsp;</a></span>trx_roll_pop_top_rec_of_trx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_roll_pop_top_rec_of_trx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get next undo log record from redo and noredo rollback segments. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record copied to heap, NULL if none left, or if the undo number of the top record would be less than the limit </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">limit</td><td>in: least undo number we need </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: roll pointer to undo record </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap where copied </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acf35858f03cc7b6882cbf387d957def0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf35858f03cc7b6882cbf387d957def0">&#9670;&nbsp;</a></span>trx_roll_pop_top_rec_of_trx_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_roll_pop_top_rec_of_trx_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>undo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pops the topmost record when the two undo logs of a transaction are seen as a single stack of records ordered by their undo numbers. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record copied to heap, NULL if none left, or if the undo number of the top record would be less than the limit </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
    <tr><td class="paramname">undo_ptr</td><td>in: rollback segment to look for next undo log record. </td></tr>
    <tr><td class="paramname">limit</td><td>in: least undo number we need </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: roll pointer to undo record </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap where copied </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad65f3dd677b26922f503c5928e679629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad65f3dd677b26922f503c5928e679629">&#9670;&nbsp;</a></span>trx_roll_savepoint_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_roll_savepoint_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees a single savepoint struct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savep</td><td>in: savepoint to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a392c0a42c03d77d661040b64a76569f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a392c0a42c03d77d661040b64a76569f9">&#9670;&nbsp;</a></span>trx_roll_savepoints_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_roll_savepoints_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees savepoint structs starting from savep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>Transaction handle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">savep</td><td>Free all savepoints starting with this savepoint i, if savep is nullptr free all save points </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ade10d734092b1cce046febd1a5174530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade10d734092b1cce046febd1a5174530">&#9670;&nbsp;</a></span>trx_roll_try_truncate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_roll_try_truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>undo_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries truncate the undo logs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
    <tr><td class="paramname">undo_ptr</td><td>in: rollback segment to look for next undo log record. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af88b4d0f76bd2eb463c33c7973f11036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af88b4d0f76bd2eb463c33c7973f11036">&#9670;&nbsp;</a></span>trx_rollback_active()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_rollback_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Roll back an active transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2e1a5e5d202b00e407fed95641386fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2e1a5e5d202b00e407fed95641386fc">&#9670;&nbsp;</a></span>trx_rollback_finish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_rollback_finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finishes a transaction rollback. </p>
<p>in: transaction</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d7a8a393062494d8253a097b3ef8690"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7a8a393062494d8253a097b3ef8690">&#9670;&nbsp;</a></span>trx_rollback_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback a transaction used in MySQL. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a265e70bdcbb3f320d82b35183caa3604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a265e70bdcbb3f320d82b35183caa3604">&#9670;&nbsp;</a></span>trx_rollback_for_mysql_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_for_mysql_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rollback a transaction used in MySQL. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6feb420759c8cc2d33462ac862b28aab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6feb420759c8cc2d33462ac862b28aab">&#9670;&nbsp;</a></span>trx_rollback_last_sql_stat_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_last_sql_stat_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback the latest SQL statement for MySQL. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad089844a5fd1e21226caf8533c904bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad089844a5fd1e21226caf8533c904bcf">&#9670;&nbsp;</a></span>trx_rollback_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rollback a transaction used in MySQL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>

</div>
</div>
<a id="afe0b5427c7351d582c059013d443b5b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe0b5427c7351d582c059013d443b5b7">&#9670;&nbsp;</a></span>trx_rollback_or_clean_recovered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_rollback_or_clean_recovered </td>
          <td>(</td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>all</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback or clean up any incomplete transactions which were encountered in crash recovery. </p>
<p>If the transaction already was committed, then we clean up a possible insert undo log. If the transaction was not yet committed, then we roll it back. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">all</td><td>in: FALSE=roll back dictionary transactions; TRUE=roll back all non-PREPARED transactions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07f335099e0c7501d782ec6363269d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07f335099e0c7501d782ec6363269d2a">&#9670;&nbsp;</a></span>trx_rollback_or_clean_resurrected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool trx_rollback_or_clean_resurrected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>all</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rollback or clean up any resurrected incomplete transactions. </p>
<p>It assumes that the caller holds the trx_sys_t::mutex and it will release the lock if it does a clean up or rollback. </p><dl class="section return"><dt>Returns</dt><dd>true if the transaction was cleaned up or rolled back and trx_sys-&gt;mutex was released. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction to rollback or clean </td></tr>
    <tr><td class="paramname">all</td><td>in: FALSE=roll back dictionary transactions; TRUE=roll back all non-PREPARED transactions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26597748a9d9fe10818e7a763e62b580"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26597748a9d9fe10818e7a763e62b580">&#9670;&nbsp;</a></span>trx_rollback_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structque__thr__t.html">que_thr_t</a>* trx_rollback_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_id_t&#160;</td>
          <td class="paramname"><em>roll_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>partial_rollback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts a rollback operation, creates the UNDO graph that will do the actual undo operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">roll_limit</td><td>rollback to undo no (for partial undo), 0 if we are rolling back the entire transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">partial_rollback</td><td>true if partial rollback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>query graph thread that will perform the UNDO operations. </dd></dl>

</div>
</div>
<a id="ae3fb6f9e7fcd9f8c3e3b782c45c8345c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3fb6f9e7fcd9f8c3e3b782c45c8345c">&#9670;&nbsp;</a></span>trx_rollback_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structque__thr__t.html">que_thr_t</a>* trx_rollback_step </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs an execution step for a rollback command node in a query graph. </p>
<dl class="section return"><dt>Returns</dt><dd>query thread to run next, or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a358f61bd18a4d65e1eb7d3470693356c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358f61bd18a4d65e1eb7d3470693356c">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savept</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rollback a transaction to a given savepoint or do a complete rollback. </p>
<dl class="section return"><dt>Returns</dt><dd>error code or DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savept</td><td>in: pointer to savepoint undo number, if partial rollback requested, or NULL for complete rollback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a546741d07aef098ddc869fd964e7edaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a546741d07aef098ddc869fd964e7edaf">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>mysql_binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rolls back a transaction back to a named savepoint. </p>
<p>Modifications after the savepoint are undone but InnoDB does NOT release the corresponding locks which are stored in memory. If a lock is 'implicit', that is, a new inserted row holds a lock where the lock information is carried by the trx id stored in the row, these locks are naturally released in the rollback. Savepoints which were set after this savepoint are deleted. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
    <tr><td class="paramname">mysql_binlog_cache_pos</td><td>out: the MySQL binlog cache position corresponding to this savepoint; MySQL needs this information to remove the binlog entries of the queries executed after the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa7ce0947be0ec29df3c8eaf7d2b331c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7ce0947be0ec29df3c8eaf7d2b331c6">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint_for_mysql_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_rollback_to_savepoint_for_mysql_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>mysql_binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rolls back a transaction back to a named savepoint. </p>
<p>Modifications after the savepoint are undone but InnoDB does NOT release the corresponding locks which are stored in memory. If a lock is 'implicit', that is, a new inserted row holds a lock where the lock information is carried by the trx id stored in the row, these locks are naturally released in the rollback. Savepoints which were set after this savepoint are deleted. </p><dl class="section return"><dt>Returns</dt><dd>if no savepoint of the name found then DB_NO_SAVEPOINT, otherwise DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
    <tr><td class="paramname">savep</td><td>in/out: savepoint </td></tr>
    <tr><td class="paramname">mysql_binlog_cache_pos</td><td>out: the MySQL binlog cache position corresponding to this savepoint; MySQL needs this information to remove the binlog entries of the queries executed after the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab7b5e8cee53125996fd329e60b8d8b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b5e8cee53125996fd329e60b8d8b53">&#9670;&nbsp;</a></span>trx_rollback_to_savepoint_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_rollback_to_savepoint_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a> *&#160;</td>
          <td class="paramname"><em>savept</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rollback a transaction used in MySQL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savept</td><td>in: pointer to savepoint undo number, if partial rollback requested, or NULL for complete rollback </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abee470c82dfb3744b37e700763b3a9a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee470c82dfb3744b37e700763b3a9a8">&#9670;&nbsp;</a></span>trx_savepoint_find()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structtrx__named__savept__t.html">trx_named_savept_t</a>* trx_savepoint_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search for a savepoint using name. </p>
<dl class="section return"><dt>Returns</dt><dd>savepoint if found else NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">name</td><td>in: savepoint name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4099b34a1b3da5fe6d979618e382f649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4099b34a1b3da5fe6d979618e382f649">&#9670;&nbsp;</a></span>trx_savepoint_for_mysql()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_savepoint_for_mysql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>savepoint_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>binlog_cache_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a named savepoint. </p>
<p>If the transaction is not yet started, starts it. If there is already a savepoint of the same name, this call erases that old savepoint and replaces it with a new. Savepoints are deleted in a transaction commit or rollback. </p><dl class="section return"><dt>Returns</dt><dd>always DB_SUCCESS </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction handle </td></tr>
    <tr><td class="paramname">savepoint_name</td><td>in: savepoint name </td></tr>
    <tr><td class="paramname">binlog_cache_pos</td><td>in: MySQL binlog cache position corresponding to this connection at the time of the savepoint </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a19478989dfd7b00d09a75ee804425748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19478989dfd7b00d09a75ee804425748">&#9670;&nbsp;</a></span>trx_savept_take()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrx__savept__t.html">trx_savept_t</a> trx_savept_take </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a transaction savepoint taken at this point in time. </p>
<dl class="section return"><dt>Returns</dt><dd>savepoint </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac9da4a2de8f19d092d328a5147adbc43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9da4a2de8f19d092d328a5147adbc43">&#9670;&nbsp;</a></span>trx_roll_crash_recv_trx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structtrx__t.html">trx_t</a>* trx_roll_crash_recv_trx = <a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>In crash recovery, the current trx to be rolled back; NULL otherwise. </p>

</div>
</div>
<a id="a0537f6be87635c0d58a82c35b96cf2c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0537f6be87635c0d58a82c35b96cf2c4">&#9670;&nbsp;</a></span>trx_roll_max_undo_no</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> trx_roll_max_undo_no</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>In crash recovery we set this to the undo n:o of the current trx to be rolled back. </p>
<p>Then we can print how many % the rollback has progressed. </p>

</div>
</div>
<a id="a6602423933207992600930ceaa258936"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6602423933207992600930ceaa258936">&#9670;&nbsp;</a></span>trx_roll_progress_printed_pct</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint trx_roll_progress_printed_pct</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Auxiliary variable which tells the previous progress % we printed. </p>

</div>
</div>
<a id="ae53fd3846302198212604789126c0b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae53fd3846302198212604789126c0b10">&#9670;&nbsp;</a></span>TRX_ROLL_TRUNC_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const ulint TRX_ROLL_TRUNC_THRESHOLD = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This many pages must be undone before a truncate is tried within rollback. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_7d6b8692e14baa729600e27a3e4f8b7c.html">trx</a></li><li class="navelem"><a class="el" href="trx0roll_8cc.html">trx0roll.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
