<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: System_table_access Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classSystem__table__access.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classSystem__table__access-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">System_table_access Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>A base class for accessing a system table.  
 <a href="classSystem__table__access.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rpl__table__access_8h_source.html">rpl_table_access.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for System_table_access:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classSystem__table__access.png" usemap="#System_5Ftable_5Faccess_map" alt=""/>
  <map id="System_5Ftable_5Faccess_map" name="System_5Ftable_5Faccess_map">
<area href="classGtid__table__access__context.html" alt="Gtid_table_access_context" shape="rect" coords="0,56,162,80"/>
<area href="classRpl__info__table__access.html" alt="Rpl_info_table_access" shape="rect" coords="172,56,334,80"/>
<area href="classRpl__sys__table__access.html" title="The class are wrappers for handler index and random scan functions to simplify their usage..." alt="Rpl_sys_table_access" shape="rect" coords="344,56,506,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a575a2b8a734f799e98835789544b0da1"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystem__table__access.html#a575a2b8a734f799e98835789544b0da1">~System_table_access</a> ()</td></tr>
<tr class="separator:a575a2b8a734f799e98835789544b0da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20b2ae717f4c7d2c085c17af42d1e6bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystem__table__access.html#a20b2ae717f4c7d2c085c17af42d1e6bf">open_table</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> dbstr, const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a> tbstr, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> max_num_field, enum <a class="el" href="thr__lock_8h.html#a43801b0a0281484bf8f90c80d701ccb3">thr_lock_type</a> lock_type, <a class="el" href="structTABLE.html">TABLE</a> **table, <a class="el" href="classOpen__tables__backup.html">Open_tables_backup</a> *<a class="el" href="myisampack_8cc.html#ac9a4b7317723254f2c79bffcd3265666">backup</a>)</td></tr>
<tr class="memdesc:a20b2ae717f4c7d2c085c17af42d1e6bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens and locks a system table.  <a href="#a20b2ae717f4c7d2c085c17af42d1e6bf">More...</a><br /></td></tr>
<tr class="separator:a20b2ae717f4c7d2c085c17af42d1e6bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91b9987ab24750702a45a814f6242711"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystem__table__access.html#a91b9987ab24750702a45a814f6242711">open_table</a> (<a class="el" href="classTHD.html">THD</a> *thd, std::string dbstr, std::string tbstr, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> max_num_field, enum <a class="el" href="thr__lock_8h.html#a43801b0a0281484bf8f90c80d701ccb3">thr_lock_type</a> lock_type, <a class="el" href="structTABLE.html">TABLE</a> **table, <a class="el" href="classOpen__tables__backup.html">Open_tables_backup</a> *<a class="el" href="myisampack_8cc.html#ac9a4b7317723254f2c79bffcd3265666">backup</a>)</td></tr>
<tr class="memdesc:a91b9987ab24750702a45a814f6242711"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens and locks a system table.  <a href="#a91b9987ab24750702a45a814f6242711">More...</a><br /></td></tr>
<tr class="separator:a91b9987ab24750702a45a814f6242711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7357c29323649f270cf35b08cd8fe826"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystem__table__access.html#a7357c29323649f270cf35b08cd8fe826">before_open</a> (<a class="el" href="classTHD.html">THD</a> *thd)=0</td></tr>
<tr class="memdesc:a7357c29323649f270cf35b08cd8fe826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares before opening table.  <a href="#a7357c29323649f270cf35b08cd8fe826">More...</a><br /></td></tr>
<tr class="separator:a7357c29323649f270cf35b08cd8fe826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0fc8878c168fcac8a7671c3e536fdc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystem__table__access.html#a4c0fc8878c168fcac8a7671c3e536fdc">close_table</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="structTABLE.html">TABLE</a> *table, <a class="el" href="classOpen__tables__backup.html">Open_tables_backup</a> *<a class="el" href="myisampack_8cc.html#ac9a4b7317723254f2c79bffcd3265666">backup</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="udf__utils_8h.html#a94574db9da98006dc95d6c2fb37c3978acb5e100e5a9a3e7f6d1fd97512215282">error</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> need_commit)</td></tr>
<tr class="memdesc:a4c0fc8878c168fcac8a7671c3e536fdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commits the changes, unlocks the table and closes it.  <a href="#a4c0fc8878c168fcac8a7671c3e536fdc">More...</a><br /></td></tr>
<tr class="separator:a4c0fc8878c168fcac8a7671c3e536fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acefc48e24e7e4f522bafae15493d3a30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTHD.html">THD</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystem__table__access.html#acefc48e24e7e4f522bafae15493d3a30">create_thd</a> ()</td></tr>
<tr class="memdesc:acefc48e24e7e4f522bafae15493d3a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new thread in the bootstrap process or in the mysqld startup, a thread is created in order to be able to access a table.  <a href="#acefc48e24e7e4f522bafae15493d3a30">More...</a><br /></td></tr>
<tr class="separator:acefc48e24e7e4f522bafae15493d3a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392fdc79727da6841d45a6c1f415ae53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystem__table__access.html#a392fdc79727da6841d45a6c1f415ae53">drop_thd</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a392fdc79727da6841d45a6c1f415ae53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the created thread and restores the system_thread information.  <a href="#a392fdc79727da6841d45a6c1f415ae53">More...</a><br /></td></tr>
<tr class="separator:a392fdc79727da6841d45a6c1f415ae53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ad974ef5ecf6cfdd230afef9d02414070"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSystem__table__access.html#ad974ef5ecf6cfdd230afef9d02414070">m_flags</a></td></tr>
<tr class="separator:ad974ef5ecf6cfdd230afef9d02414070"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A base class for accessing a system table. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a575a2b8a734f799e98835789544b0da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a575a2b8a734f799e98835789544b0da1">&#9670;&nbsp;</a></span>~System_table_access()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual System_table_access::~System_table_access </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7357c29323649f270cf35b08cd8fe826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7357c29323649f270cf35b08cd8fe826">&#9670;&nbsp;</a></span>before_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void System_table_access::before_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares before opening table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Thread requesting to open the table </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classRpl__sys__table__access.html#a88b6015a5edafeab0b0ace2ab2e8352d">Rpl_sys_table_access</a>, <a class="el" href="classGtid__table__access__context.html#a054b9cd093964e3978e8a718939f2ded">Gtid_table_access_context</a>, and <a class="el" href="classRpl__info__table__access.html#abb78cd804f65ecdd73f6f2cb98ff699f">Rpl_info_table_access</a>.</p>

</div>
</div>
<a id="a4c0fc8878c168fcac8a7671c3e536fdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0fc8878c168fcac8a7671c3e536fdc">&#9670;&nbsp;</a></span>close_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> System_table_access::close_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOpen__tables__backup.html">Open_tables_backup</a> *&#160;</td>
          <td class="paramname"><em>backup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>need_commit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commits the changes, unlocks the table and closes it. </p>
<p>This method needs to be called even if the open_table fails, in order to ensure the lock info is properly restored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Thread requesting to close the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>Table to be closed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backup</td><td>Restore the lock info from here </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">error</td><td>If there was an error while updating the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">need_commit</td><td>Need to commit current transaction if it is true.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>failed </td></tr>
    <tr><td class="paramname">false</td><td>success</td></tr>
  </table>
  </dd>
</dl>
<p>If there is an error, rolls back the current statement. Otherwise, commits it. However, if a new thread was created and there is an error, the transaction must be rolled back. Otherwise, it must be committed. In this case, the changes were not done on behalf of any user transaction and if not finished, there would be pending changes. </p>

</div>
</div>
<a id="acefc48e24e7e4f522bafae15493d3a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acefc48e24e7e4f522bafae15493d3a30">&#9670;&nbsp;</a></span>create_thd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTHD.html">THD</a> * System_table_access::create_thd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new thread in the bootstrap process or in the mysqld startup, a thread is created in order to be able to access a table. </p>
<dl class="section return"><dt>Returns</dt><dd>THD* Pointer to thread structure </dd></dl>

</div>
</div>
<a id="a392fdc79727da6841d45a6c1f415ae53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a392fdc79727da6841d45a6c1f415ae53">&#9670;&nbsp;</a></span>drop_thd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void System_table_access::drop_thd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys the created thread and restores the system_thread information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread requesting to be destroyed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20b2ae717f4c7d2c085c17af42d1e6bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20b2ae717f4c7d2c085c17af42d1e6bf">&#9670;&nbsp;</a></span>open_table() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> System_table_access::open_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a>&#160;</td>
          <td class="paramname"><em>dbstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="lex__string_8h.html#a01c5da2ec635d24c374ba1a995dbe2aa">LEX_CSTRING</a>&#160;</td>
          <td class="paramname"><em>tbstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>max_num_field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="thr__lock_8h.html#a43801b0a0281484bf8f90c80d701ccb3">thr_lock_type</a>&#160;</td>
          <td class="paramname"><em>lock_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> **&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOpen__tables__backup.html">Open_tables_backup</a> *&#160;</td>
          <td class="paramname"><em>backup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens and locks a system table. </p>
<p>It's assumed that the caller knows what they are doing:</p><ul>
<li>whether it was necessary to reset-and-backup the open tables state</li>
<li>whether the requested lock does not lead to a deadlock</li>
<li>whether this open mode would work under LOCK TABLES, or inside a stored function or trigger.</li>
</ul>
<p>Note that if the table can't be locked successfully this operation will close it. Therefore it provides guarantee that it either opens and locks table or fails without leaving any tables open.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Thread requesting to open the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dbstr</td><td>Database where the table resides </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tbstr</td><td>Table to be openned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_num_field</td><td>Maximum number of fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lock_type</td><td>How to lock the table </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">table</td><td>We will store the open table here </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">backup</td><td>Save the lock info. here</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>open and lock failed - an error message is pushed into the stack </td></tr>
    <tr><td class="paramname">false</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a91b9987ab24750702a45a814f6242711"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91b9987ab24750702a45a814f6242711">&#9670;&nbsp;</a></span>open_table() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> System_table_access::open_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>dbstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>tbstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>max_num_field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="thr__lock_8h.html#a43801b0a0281484bf8f90c80d701ccb3">thr_lock_type</a>&#160;</td>
          <td class="paramname"><em>lock_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> **&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOpen__tables__backup.html">Open_tables_backup</a> *&#160;</td>
          <td class="paramname"><em>backup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens and locks a system table. </p>
<p>It's assumed that the caller knows what they are doing:</p><ul>
<li>whether it was necessary to reset-and-backup the open tables state</li>
<li>whether the requested lock does not lead to a deadlock</li>
<li>whether this open mode would work under LOCK TABLES, or inside a stored function or trigger.</li>
</ul>
<p>Note that if the table can't be locked successfully this operation will close it. Therefore it provides guarantee that it either opens and locks table or fails without leaving any tables open.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Thread requesting to open the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dbstr</td><td>Database where the table resides </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tbstr</td><td>Table to be openned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_num_field</td><td>Maximum number of fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lock_type</td><td>How to lock the table </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">table</td><td>We will store the open table here </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">backup</td><td>Save the lock info. here</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>open and lock failed - an error message is pushed into the stack </td></tr>
    <tr><td class="paramname">false</td><td>success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad974ef5ecf6cfdd230afef9d02414070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad974ef5ecf6cfdd230afef9d02414070">&#9670;&nbsp;</a></span>m_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> System_table_access::m_flags</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="rpl__table__access_8h_source.html">rpl_table_access.h</a></li>
<li>sql/<a class="el" href="rpl__table__access_8cc.html">rpl_table_access.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classSystem__table__access.html">System_table_access</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
