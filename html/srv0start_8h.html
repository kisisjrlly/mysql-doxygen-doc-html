<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/srv0start.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('srv0start_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">srv0start.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Starts the Innobase database server.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="log0types_8h_source.html">log0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="os0thread-create_8h_source.html">os0thread-create.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sync0rw_8h_source.html">sync0rw.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0purge_8h_source.html">trx0purge.h</a>&quot;</code><br />
<code>#include &quot;univ.i&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0byte_8h_source.html">ut0byte.h</a>&quot;</code><br />
</div>
<p><a href="srv0start_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4aa67b3a34a65ddfea3b88436320d4aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a4aa67b3a34a65ddfea3b88436320d4aa">RECOVERY_CRASH</a>(x)</td></tr>
<tr class="separator:a4aa67b3a34a65ddfea3b88436320d4aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d3aba09919fc48a15fb44dc1454634d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a2d3aba09919fc48a15fb44dc1454634d">BUF_POOL_SIZE_THRESHOLD</a>&#160;&#160;&#160;(1024 * 1024 * 1024)</td></tr>
<tr class="memdesc:a2d3aba09919fc48a15fb44dc1454634d"><td class="mdescLeft">&#160;</td><td class="mdescRight">If buffer pool is less than the size, only one buffer pool instance is used.  <a href="#a2d3aba09919fc48a15fb44dc1454634d">More...</a><br /></td></tr>
<tr class="separator:a2d3aba09919fc48a15fb44dc1454634d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ae46970a9cd65ae1a824ae3ec17848ca8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8">srv_shutdown_t</a> { <br />
&#160;&#160;<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8a098f81bef6335aeda3cd8cfd5cb3be60">SRV_SHUTDOWN_NONE</a> = 0, 
<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8a2a0b9f431b4afb6a88d2aa8ad6497703">SRV_SHUTDOWN_RECOVERY_ROLLBACK</a>, 
<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8aaed42a2e331655107964a37bcda0c042">SRV_SHUTDOWN_PRE_DD_AND_SYSTEM_TRANSACTIONS</a>, 
<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8aa56021b5a187dfed3e41a525965af636">SRV_SHUTDOWN_PURGE</a>, 
<br />
&#160;&#160;<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8ab39544ec7803953cde38ee3eda3bfe51">SRV_SHUTDOWN_DD</a>, 
<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8a0923073fc4387a4983caf509584c1122">SRV_SHUTDOWN_CLEANUP</a>, 
<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8ae6be104cc423d4fb3185902f0dde11f3">SRV_SHUTDOWN_MASTER_STOP</a>, 
<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8aa59998b2321a1e2001c00d7de25b69e7">SRV_SHUTDOWN_FLUSH_PHASE</a>, 
<br />
&#160;&#160;<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8a65d81d80839adad59f1e6388a73c1948">SRV_SHUTDOWN_LAST_PHASE</a>, 
<a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8ac99f88b0e13af150ffd71d89cd5af56a">SRV_SHUTDOWN_EXIT_THREADS</a>
<br />
 }<tr class="memdesc:ae46970a9cd65ae1a824ae3ec17848ca8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown state.  <a href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ae46970a9cd65ae1a824ae3ec17848ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a37fd121f7ff04e1b78840729aeaf9207"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a37fd121f7ff04e1b78840729aeaf9207">srv_free_paths_and_sizes</a> (void)</td></tr>
<tr class="memdesc:a37fd121f7ff04e1b78840729aeaf9207"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory allocated by srv_parse_data_file_paths_and_sizes() and srv_parse_log_group_home_dirs().  <a href="#a37fd121f7ff04e1b78840729aeaf9207">More...</a><br /></td></tr>
<tr class="separator:a37fd121f7ff04e1b78840729aeaf9207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc22d3bd4d1aaba7d727878bf0fa9d7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a4dc22d3bd4d1aaba7d727878bf0fa9d7">srv_add_path_separator_if_needed</a> (char *str)</td></tr>
<tr class="memdesc:a4dc22d3bd4d1aaba7d727878bf0fa9d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a slash or a backslash to the end of a string if it is missing and the string is not empty.  <a href="#a4dc22d3bd4d1aaba7d727878bf0fa9d7">More...</a><br /></td></tr>
<tr class="separator:a4dc22d3bd4d1aaba7d727878bf0fa9d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a393859f9ab32d37cdc7e4223d6d0d40d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a393859f9ab32d37cdc7e4223d6d0d40d">srv_undo_tablespace_open</a> (<a class="el" href="structundo_1_1Tablespace.html">undo::Tablespace</a> &amp;undo_space)</td></tr>
<tr class="memdesc:a393859f9ab32d37cdc7e4223d6d0d40d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an undo tablespace.  <a href="#a393859f9ab32d37cdc7e4223d6d0d40d">More...</a><br /></td></tr>
<tr class="separator:a393859f9ab32d37cdc7e4223d6d0d40d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c4a808bb3b77f3af31bd13cb84df565"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a2c4a808bb3b77f3af31bd13cb84df565">srv_undo_tablespaces_upgrade</a> ()</td></tr>
<tr class="memdesc:a2c4a808bb3b77f3af31bd13cb84df565"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upgrade undo tablespaces by deleting the old undo tablespaces referenced by the TRX_SYS page.  <a href="#a2c4a808bb3b77f3af31bd13cb84df565">More...</a><br /></td></tr>
<tr class="separator:a2c4a808bb3b77f3af31bd13cb84df565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24e029a70c5fdf1f69e35835b7710f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#ac24e029a70c5fdf1f69e35835b7710f0">srv_start</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> create_new_db)</td></tr>
<tr class="memdesc:ac24e029a70c5fdf1f69e35835b7710f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start InnoDB.  <a href="#ac24e029a70c5fdf1f69e35835b7710f0">More...</a><br /></td></tr>
<tr class="separator:ac24e029a70c5fdf1f69e35835b7710f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a436789cc68c4b7d5e2c4ecca5196034a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a436789cc68c4b7d5e2c4ecca5196034a">srv_undo_tablespace_fixup</a> (const char *space_name, const char *file_name, <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a436789cc68c4b7d5e2c4ecca5196034a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix up an undo tablespace if it was in the process of being truncated when the server crashed.  <a href="#a436789cc68c4b7d5e2c4ecca5196034a">More...</a><br /></td></tr>
<tr class="separator:a436789cc68c4b7d5e2c4ecca5196034a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31f9fe0b880018c599413c42ef3a2166"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a31f9fe0b880018c599413c42ef3a2166">srv_dict_recover_on_restart</a> ()</td></tr>
<tr class="memdesc:a31f9fe0b880018c599413c42ef3a2166"><td class="mdescLeft">&#160;</td><td class="mdescRight">On a restart, initialize the remaining InnoDB subsystems so that any tables (including data dictionary tables) can be accessed.  <a href="#a31f9fe0b880018c599413c42ef3a2166">More...</a><br /></td></tr>
<tr class="separator:a31f9fe0b880018c599413c42ef3a2166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af29292779d10f892386feb7cceac8050"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#af29292779d10f892386feb7cceac8050">srv_start_threads</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> bootstrap)</td></tr>
<tr class="memdesc:af29292779d10f892386feb7cceac8050"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start up the InnoDB service threads which are independent of DDL recovery.  <a href="#af29292779d10f892386feb7cceac8050">More...</a><br /></td></tr>
<tr class="separator:af29292779d10f892386feb7cceac8050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5160ac284544d186fd4955c353214fe2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a5160ac284544d186fd4955c353214fe2">srv_start_threads_after_ddl_recovery</a> ()</td></tr>
<tr class="memdesc:a5160ac284544d186fd4955c353214fe2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the remaining InnoDB service threads which must wait for complete DD recovery(post the DDL recovery)  <a href="#a5160ac284544d186fd4955c353214fe2">More...</a><br /></td></tr>
<tr class="separator:a5160ac284544d186fd4955c353214fe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a875389626ef516c30920d81915f234"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a9a875389626ef516c30920d81915f234">srv_pre_dd_shutdown</a> ()</td></tr>
<tr class="memdesc:a9a875389626ef516c30920d81915f234"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shut down all InnoDB background tasks that may look up objects in the data dictionary.  <a href="#a9a875389626ef516c30920d81915f234">More...</a><br /></td></tr>
<tr class="separator:a9a875389626ef516c30920d81915f234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add4bf74eed933fc4ee32343e759b4305"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#add4bf74eed933fc4ee32343e759b4305">srv_shutdown</a> ()</td></tr>
<tr class="memdesc:add4bf74eed933fc4ee32343e759b4305"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shut down the InnoDB database.  <a href="#add4bf74eed933fc4ee32343e759b4305">More...</a><br /></td></tr>
<tr class="separator:add4bf74eed933fc4ee32343e759b4305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73ae8ebd2f0ccab4667aa2da5903dc19"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a73ae8ebd2f0ccab4667aa2da5903dc19">srv_start_purge_threads</a> ()</td></tr>
<tr class="memdesc:a73ae8ebd2f0ccab4667aa2da5903dc19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start purge threads.  <a href="#a73ae8ebd2f0ccab4667aa2da5903dc19">More...</a><br /></td></tr>
<tr class="separator:a73ae8ebd2f0ccab4667aa2da5903dc19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5664c1a60e4640a454b0707d09074d81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a5664c1a60e4640a454b0707d09074d81">is_early_redo_undo_encryption_done</a> ()</td></tr>
<tr class="memdesc:a5664c1a60e4640a454b0707d09074d81"><td class="mdescLeft">&#160;</td><td class="mdescRight">If early redo/undo log encryption processing is done.  <a href="#a5664c1a60e4640a454b0707d09074d81">More...</a><br /></td></tr>
<tr class="separator:a5664c1a60e4640a454b0707d09074d81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad587a85ef4b36f2e7c41cb7456dfea0b"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#ad587a85ef4b36f2e7c41cb7456dfea0b">srv_path_copy</a> (char *dest, ulint dest_len, const char *basedir, const char *table_name)</td></tr>
<tr class="memdesc:ad587a85ef4b36f2e7c41cb7456dfea0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the file path component of the physical file to parameter.  <a href="#ad587a85ef4b36f2e7c41cb7456dfea0b">More...</a><br /></td></tr>
<tr class="separator:ad587a85ef4b36f2e7c41cb7456dfea0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13fa97bcad2d9635285c7a513b0645e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a13fa97bcad2d9635285c7a513b0645e2">srv_get_encryption_data_filename</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table, char *<a class="el" href="mi__test3_8cc.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, ulint max_len)</td></tr>
<tr class="memdesc:a13fa97bcad2d9635285c7a513b0645e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the encryption-data filename from the table name for a single-table tablespace.  <a href="#a13fa97bcad2d9635285c7a513b0645e2">More...</a><br /></td></tr>
<tr class="separator:a13fa97bcad2d9635285c7a513b0645e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2969c0f0b2c6d669f36ae2345133ad9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#ad2969c0f0b2c6d669f36ae2345133ad9">srv_fatal_error</a> ()</td></tr>
<tr class="memdesc:ad2969c0f0b2c6d669f36ae2345133ad9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call std::quick_exit(3)  <a href="#ad2969c0f0b2c6d669f36ae2345133ad9">More...</a><br /></td></tr>
<tr class="separator:ad2969c0f0b2c6d669f36ae2345133ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58a669b4aee6d5785225c41b272a5278"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a58a669b4aee6d5785225c41b272a5278">srv_shutdown_exit_threads</a> ()</td></tr>
<tr class="memdesc:a58a669b4aee6d5785225c41b272a5278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to shutdown all background threads created by InnoDB.  <a href="#a58a669b4aee6d5785225c41b272a5278">More...</a><br /></td></tr>
<tr class="separator:a58a669b4aee6d5785225c41b272a5278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff022a9fa9fa0996b7f1040f0af3dc4b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#aff022a9fa9fa0996b7f1040f0af3dc4b">srv_shutdown_waits_for_rollback_of_recovered_transactions</a> ()</td></tr>
<tr class="memdesc:aff022a9fa9fa0996b7f1040f0af3dc4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if all recovered transactions are supposed to be rolled back before shutdown is ended.  <a href="#aff022a9fa9fa0996b7f1040f0af3dc4b">More...</a><br /></td></tr>
<tr class="separator:aff022a9fa9fa0996b7f1040f0af3dc4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f905168cec18ae52f02e1fea08865e5"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a9f905168cec18ae52f02e1fea08865e5"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a9f905168cec18ae52f02e1fea08865e5">srv_shutdown_state_matches</a> (F &amp;&amp;f)</td></tr>
<tr class="memdesc:a9f905168cec18ae52f02e1fea08865e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows to safely check value of the current shutdown state.  <a href="#a9f905168cec18ae52f02e1fea08865e5">More...</a><br /></td></tr>
<tr class="separator:a9f905168cec18ae52f02e1fea08865e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac74e6bc8616b06abaa25f9ef3c3da347"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#ac74e6bc8616b06abaa25f9ef3c3da347">srv_is_being_started</a></td></tr>
<tr class="memdesc:ac74e6bc8616b06abaa25f9ef3c3da347"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if the server is being started  <a href="#ac74e6bc8616b06abaa25f9ef3c3da347">More...</a><br /></td></tr>
<tr class="separator:ac74e6bc8616b06abaa25f9ef3c3da347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a980ecb4efdc45459c7024e7765ce6d41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a980ecb4efdc45459c7024e7765ce6d41">srv_sys_tablespaces_open</a></td></tr>
<tr class="memdesc:a980ecb4efdc45459c7024e7765ce6d41"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if SYS_TABLESPACES is available for lookups  <a href="#a980ecb4efdc45459c7024e7765ce6d41">More...</a><br /></td></tr>
<tr class="separator:a980ecb4efdc45459c7024e7765ce6d41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f8052b23856f4944c8472188f6eb4e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a4f8052b23856f4944c8472188f6eb4e8">srv_startup_is_before_trx_rollback_phase</a></td></tr>
<tr class="memdesc:a4f8052b23856f4944c8472188f6eb4e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if the server is being started, before rolling back any incomplete transactions  <a href="#a4f8052b23856f4944c8472188f6eb4e8">More...</a><br /></td></tr>
<tr class="separator:a4f8052b23856f4944c8472188f6eb4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d90e7d07cf25062df88e9820fca7c6"><td class="memItemLeft" align="right" valign="top">ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#ab3d90e7d07cf25062df88e9820fca7c6">srv_start_raw_disk_in_use</a></td></tr>
<tr class="memdesc:ab3d90e7d07cf25062df88e9820fca7c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">TRUE if a raw partition is in use.  <a href="#ab3d90e7d07cf25062df88e9820fca7c6">More...</a><br /></td></tr>
<tr class="separator:ab3d90e7d07cf25062df88e9820fca7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970fd477dbaa2cf12bc8e6fa158327a1"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; enum <a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8">srv_shutdown_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0start_8h.html#a970fd477dbaa2cf12bc8e6fa158327a1">srv_shutdown_state</a></td></tr>
<tr class="memdesc:a970fd477dbaa2cf12bc8e6fa158327a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">At a shutdown this value climbs from SRV_SHUTDOWN_NONE to SRV_SHUTDOWN_EXIT_THREADS.  <a href="#a970fd477dbaa2cf12bc8e6fa158327a1">More...</a><br /></td></tr>
<tr class="separator:a970fd477dbaa2cf12bc8e6fa158327a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Starts the Innobase database server. </p>
<p>Created 10/10/1995 Heikki Tuuri </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a2d3aba09919fc48a15fb44dc1454634d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d3aba09919fc48a15fb44dc1454634d">&#9670;&nbsp;</a></span>BUF_POOL_SIZE_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUF_POOL_SIZE_THRESHOLD&#160;&#160;&#160;(1024 * 1024 * 1024)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If buffer pool is less than the size, only one buffer pool instance is used. </p>

</div>
</div>
<a id="a4aa67b3a34a65ddfea3b88436320d4aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aa67b3a34a65ddfea3b88436320d4aa">&#9670;&nbsp;</a></span>RECOVERY_CRASH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RECOVERY_CRASH</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                     \</div><div class="line">    if (<a class="code" href="srv0srv_8h.html#a3025d93d95331f45123911fdd1a2c2de">srv_force_recovery_crash</a> == x) {                   \</div><div class="line">      flush_error_log_messages();                          \</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;innodb_force_recovery_crash=%lu\n&quot;</span>, \</div><div class="line">              <a class="code" href="srv0srv_8h.html#a3025d93d95331f45123911fdd1a2c2de">srv_force_recovery_crash</a>);                   \</div><div class="line">      fflush(stderr);                                      \</div><div class="line">      _exit(3);                                            \</div><div class="line">    }                                                      \</div><div class="line">  } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="srv0srv_8h_html_a3025d93d95331f45123911fdd1a2c2de"><div class="ttname"><a href="srv0srv_8h.html#a3025d93d95331f45123911fdd1a2c2de">srv_force_recovery_crash</a></div><div class="ttdeci">ulong srv_force_recovery_crash</div><div class="ttdoc">Inject a crash at different steps of the recovery process. </div><div class="ttdef"><b>Definition:</b> srv0srv.cc:504</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ae46970a9cd65ae1a824ae3ec17848ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae46970a9cd65ae1a824ae3ec17848ca8">&#9670;&nbsp;</a></span>srv_shutdown_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8">srv_shutdown_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown state. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8a098f81bef6335aeda3cd8cfd5cb3be60"></a>SRV_SHUTDOWN_NONE&#160;</td><td class="fielddoc"><p>Database running normally. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8a2a0b9f431b4afb6a88d2aa8ad6497703"></a>SRV_SHUTDOWN_RECOVERY_ROLLBACK&#160;</td><td class="fielddoc"><p>Shutdown has started. </p>
<p>Stopping the thread responsible for rollback of recovered transactions. In case of slow shutdown, this implies waiting for completed rollback of all recovered transactions. </p><dl class="section remark"><dt>Remarks</dt><dd>Note that user transactions are stopped earlier, when the shutdown state is still equal to SRV_SHUTDOWN_NONE (user transactions are closed when related connections are closed in close_connections()). </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8aaed42a2e331655107964a37bcda0c042"></a>SRV_SHUTDOWN_PRE_DD_AND_SYSTEM_TRANSACTIONS&#160;</td><td class="fielddoc"><p>Stopping threads that might use system transactions or DD objects. </p>
<p>This is important because we need to ensure that in the next phase no undo records could be produced (we will be stopping purge threads). After next phase DD is shut down, so also no accesses to DD objects are allowed then. List of threads being stopped within this phase:</p><ul>
<li>dict_stats thread,</li>
<li>fts_optimize thread,</li>
<li>ts_alter_encrypt thread. The master thread exits its main loop and finishes its first phase of shutdown (in which it was allowed to touch DD objects). </li>
</ul>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8aa56021b5a187dfed3e41a525965af636"></a>SRV_SHUTDOWN_PURGE&#160;</td><td class="fielddoc"><p>Stopping the purge threads. </p>
<p>Before we enter this phase, we have the guarantee that no new undo records could be produced. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8ab39544ec7803953cde38ee3eda3bfe51"></a>SRV_SHUTDOWN_DD&#160;</td><td class="fielddoc"><p>Shutting down the DD. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8a0923073fc4387a4983caf509584c1122"></a>SRV_SHUTDOWN_CLEANUP&#160;</td><td class="fielddoc"><p>Stopping remaining InnoDB background threads except: </p>
<ul>
<li>the master thread,</li>
<li>redo log threads,</li>
<li>page cleaner threads,</li>
<li>archiver threads. List of threads being stopped within this phase:</li>
<li>lock_wait_timeout thread,</li>
<li>error_monitor thread,</li>
<li>monitor thread,</li>
<li>buf_dump thread,</li>
<li>buf_resize thread. <dl class="section remark"><dt>Remarks</dt><dd>If your thread might touch DD objects or use system transactions it must be stopped within SRV_SHUTDOWN_PRE_DD_AND_SYSTEM_TRANSACTIONS phase. </dd></dl>
</li>
</ul>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8ae6be104cc423d4fb3185902f0dde11f3"></a>SRV_SHUTDOWN_MASTER_STOP&#160;</td><td class="fielddoc"><p>Stopping the master thread. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8aa59998b2321a1e2001c00d7de25b69e7"></a>SRV_SHUTDOWN_FLUSH_PHASE&#160;</td><td class="fielddoc"><p>Once we enter this phase, the page cleaners can clean up the buffer pool and exit. </p>
<p>The redo log threads write and flush the log buffer and exit after the page cleaners (and within this phase). </p>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8a65d81d80839adad59f1e6388a73c1948"></a>SRV_SHUTDOWN_LAST_PHASE&#160;</td><td class="fielddoc"><p>Last phase after ensuring that all data have been flushed to disk and the flushed_lsn has been updated in the header of system tablespace. </p>
<p>During this phase we close all files and ensure archiver has archived all. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae46970a9cd65ae1a824ae3ec17848ca8ac99f88b0e13af150ffd71d89cd5af56a"></a>SRV_SHUTDOWN_EXIT_THREADS&#160;</td><td class="fielddoc"><p>Exit all threads and free resources. </p>
<p>We might reach this phase in one of two different ways:</p><ul>
<li>after visiting all previous states (usual shutdown),</li>
<li>or during startup when we failed and we abort the startup. </li>
</ul>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5664c1a60e4640a454b0707d09074d81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5664c1a60e4640a454b0707d09074d81">&#9670;&nbsp;</a></span>is_early_redo_undo_encryption_done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_early_redo_undo_encryption_done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If early redo/undo log encryption processing is done. </p>
<dl class="section return"><dt>Returns</dt><dd>true if it's done. </dd></dl>

</div>
</div>
<a id="a4dc22d3bd4d1aaba7d727878bf0fa9d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dc22d3bd4d1aaba7d727878bf0fa9d7">&#9670;&nbsp;</a></span>srv_add_path_separator_if_needed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* srv_add_path_separator_if_needed </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a slash or a backslash to the end of a string if it is missing and the string is not empty. </p>
<dl class="section return"><dt>Returns</dt><dd>string which has the separator if the string is not empty in: null-terminated character string </dd></dl>

</div>
</div>
<a id="a31f9fe0b880018c599413c42ef3a2166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31f9fe0b880018c599413c42ef3a2166">&#9670;&nbsp;</a></span>srv_dict_recover_on_restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_dict_recover_on_restart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>On a restart, initialize the remaining InnoDB subsystems so that any tables (including data dictionary tables) can be accessed. </p>

</div>
</div>
<a id="ad2969c0f0b2c6d669f36ae2345133ad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2969c0f0b2c6d669f36ae2345133ad9">&#9670;&nbsp;</a></span>srv_fatal_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_fatal_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call std::quick_exit(3) </p>
<p>Call std::quick_exit(3) </p>

</div>
</div>
<a id="a37fd121f7ff04e1b78840729aeaf9207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37fd121f7ff04e1b78840729aeaf9207">&#9670;&nbsp;</a></span>srv_free_paths_and_sizes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_free_paths_and_sizes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the memory allocated by srv_parse_data_file_paths_and_sizes() and srv_parse_log_group_home_dirs(). </p>

</div>
</div>
<a id="a13fa97bcad2d9635285c7a513b0645e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13fa97bcad2d9635285c7a513b0645e2">&#9670;&nbsp;</a></span>srv_get_encryption_data_filename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_get_encryption_data_filename </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>max_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the encryption-data filename from the table name for a single-table tablespace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>table object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">filename</td><td>filename </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_len</td><td>filename max length </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad587a85ef4b36f2e7c41cb7456dfea0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad587a85ef4b36f2e7c41cb7456dfea0b">&#9670;&nbsp;</a></span>srv_path_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint srv_path_copy </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>dest_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>basedir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy the file path component of the physical file to parameter. </p>
<p>It will copy up to and including the terminating path separator. </p><dl class="section return"><dt>Returns</dt><dd>number of bytes copied or ULINT_UNDEFINED if destination buffer is smaller than the path to be copied. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>out: destination buffer </td></tr>
    <tr><td class="paramname">dest_len</td><td>in: max bytes to copy </td></tr>
    <tr><td class="paramname">basedir</td><td>in: base directory </td></tr>
    <tr><td class="paramname">table_name</td><td>in: source table name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9a875389626ef516c30920d81915f234"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a875389626ef516c30920d81915f234">&#9670;&nbsp;</a></span>srv_pre_dd_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_pre_dd_shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shut down all InnoDB background tasks that may look up objects in the data dictionary. </p>

</div>
</div>
<a id="add4bf74eed933fc4ee32343e759b4305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add4bf74eed933fc4ee32343e759b4305">&#9670;&nbsp;</a></span>srv_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shut down the InnoDB database. </p>

</div>
</div>
<a id="a58a669b4aee6d5785225c41b272a5278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58a669b4aee6d5785225c41b272a5278">&#9670;&nbsp;</a></span>srv_shutdown_exit_threads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_shutdown_exit_threads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to shutdown all background threads created by InnoDB. </p>
<p>NOTE: Does not guarantee they are actually shut down, only does the best effort. Changes state of shutdown to SHUTDOWN_EXIT_THREADS, wakes up the background threads and waits a little bit. It might be used within startup phase or when fatal error is discovered during some IO operation. Therefore you must not assume anything related to the state in which it might be used. </p>

</div>
</div>
<a id="a9f905168cec18ae52f02e1fea08865e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f905168cec18ae52f02e1fea08865e5">&#9670;&nbsp;</a></span>srv_shutdown_state_matches()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> srv_shutdown_state_matches </td>
          <td>(</td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allows to safely check value of the current shutdown state. </p>
<p>Note that the current shutdown state might be changed while the check is being executed, but the check is based on a single load of the srv_shutdown_state (atomic global variable). </p>

</div>
</div>
<a id="aff022a9fa9fa0996b7f1040f0af3dc4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff022a9fa9fa0996b7f1040f0af3dc4b">&#9670;&nbsp;</a></span>srv_shutdown_waits_for_rollback_of_recovered_transactions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> srv_shutdown_waits_for_rollback_of_recovered_transactions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if all recovered transactions are supposed to be rolled back before shutdown is ended. </p>
<dl class="section return"><dt>Returns</dt><dd>value of the check </dd></dl>

</div>
</div>
<a id="ac24e029a70c5fdf1f69e35835b7710f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac24e029a70c5fdf1f69e35835b7710f0">&#9670;&nbsp;</a></span>srv_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> srv_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>create_new_db</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start InnoDB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">create_new_db</td><td>Whether to create a new database </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>

</div>
</div>
<a id="a73ae8ebd2f0ccab4667aa2da5903dc19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73ae8ebd2f0ccab4667aa2da5903dc19">&#9670;&nbsp;</a></span>srv_start_purge_threads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_start_purge_threads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start purge threads. </p>
<p>During upgrade we start purge threads early to apply purge. </p>

</div>
</div>
<a id="af29292779d10f892386feb7cceac8050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af29292779d10f892386feb7cceac8050">&#9670;&nbsp;</a></span>srv_start_threads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_start_threads </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>bootstrap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start up the InnoDB service threads which are independent of DDL recovery. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bootstrap</td><td>True if this is in bootstrap </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5160ac284544d186fd4955c353214fe2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5160ac284544d186fd4955c353214fe2">&#9670;&nbsp;</a></span>srv_start_threads_after_ddl_recovery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_start_threads_after_ddl_recovery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the remaining InnoDB service threads which must wait for complete DD recovery(post the DDL recovery) </p>

</div>
</div>
<a id="a436789cc68c4b7d5e2c4ecca5196034a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a436789cc68c4b7d5e2c4ecca5196034a">&#9670;&nbsp;</a></span>srv_undo_tablespace_fixup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> srv_undo_tablespace_fixup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>space_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fix up an undo tablespace if it was in the process of being truncated when the server crashed. </p>
<p>This is the second call and is done after the DD is available so now we know the space_name, file_name and previous space_id. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_name</td><td>undo tablespace name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">file_name</td><td>undo tablespace file name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>undo tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code </dd></dl>

</div>
</div>
<a id="a393859f9ab32d37cdc7e4223d6d0d40d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a393859f9ab32d37cdc7e4223d6d0d40d">&#9670;&nbsp;</a></span>srv_undo_tablespace_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> srv_undo_tablespace_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo_1_1Tablespace.html">undo::Tablespace</a> &amp;&#160;</td>
          <td class="paramname"><em>undo_space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an undo tablespace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_space</td><td>Undo tablespace </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>

</div>
</div>
<a id="a2c4a808bb3b77f3af31bd13cb84df565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c4a808bb3b77f3af31bd13cb84df565">&#9670;&nbsp;</a></span>srv_undo_tablespaces_upgrade()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> srv_undo_tablespaces_upgrade </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Upgrade undo tablespaces by deleting the old undo tablespaces referenced by the TRX_SYS page. </p>
<dl class="section return"><dt>Returns</dt><dd>error code </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac74e6bc8616b06abaa25f9ef3c3da347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac74e6bc8616b06abaa25f9ef3c3da347">&#9670;&nbsp;</a></span>srv_is_being_started</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> srv_is_being_started</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>true if the server is being started </p>

</div>
</div>
<a id="a970fd477dbaa2cf12bc8e6fa158327a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a970fd477dbaa2cf12bc8e6fa158327a1">&#9670;&nbsp;</a></span>srv_shutdown_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;enum <a class="el" href="srv0start_8h.html#ae46970a9cd65ae1a824ae3ec17848ca8">srv_shutdown_t</a>&gt; srv_shutdown_state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>At a shutdown this value climbs from SRV_SHUTDOWN_NONE to SRV_SHUTDOWN_EXIT_THREADS. </p>

</div>
</div>
<a id="ab3d90e7d07cf25062df88e9820fca7c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3d90e7d07cf25062df88e9820fca7c6">&#9670;&nbsp;</a></span>srv_start_raw_disk_in_use</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibool srv_start_raw_disk_in_use</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>TRUE if a raw partition is in use. </p>

</div>
</div>
<a id="a4f8052b23856f4944c8472188f6eb4e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f8052b23856f4944c8472188f6eb4e8">&#9670;&nbsp;</a></span>srv_startup_is_before_trx_rollback_phase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> srv_startup_is_before_trx_rollback_phase</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>true if the server is being started, before rolling back any incomplete transactions </p>

</div>
</div>
<a id="a980ecb4efdc45459c7024e7765ce6d41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a980ecb4efdc45459c7024e7765ce6d41">&#9670;&nbsp;</a></span>srv_sys_tablespaces_open</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> srv_sys_tablespaces_open</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>true if SYS_TABLESPACES is available for lookups </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="srv0start_8h.html">srv0start.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
