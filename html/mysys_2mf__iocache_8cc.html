<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: mysys/mf_iocache.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mysys_2mf__iocache_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mf_iocache.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Cashing of files with only does (sequential) read or writes of fixed- length records.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &quot;<a class="el" href="m__string_8h_source.html">m_string.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__byteorder_8h_source.html">my_byteorder.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__compiler_8h_source.html">my_compiler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__inttypes_8h_source.html">my_inttypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__io_8h_source.html">my_io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__macros_8h_source.html">my_macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__sys_8h_source.html">my_sys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__systime_8h_source.html">my_systime.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__thread__local_8h_source.html">my_thread_local.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psi_2mysql__cond_8h_source.html">mysql/psi/mysql_cond.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysql__file_8h_source.html">mysql/psi/mysql_file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psi_2mysql__mutex_8h_source.html">mysql/psi/mysql_mutex.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psi__base_8h_source.html">mysql/psi/psi_base.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="service__mysql__alloc_8h_source.html">mysql/service_mysql_alloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysys__priv_8h_source.html">mysys/mysys_priv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thr__mutex_8h_source.html">thr_mutex.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af8cf76f02c02901ffa95f16e0eec4608"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#af8cf76f02c02901ffa95f16e0eec4608">lock_append_buffer</a>(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)&#160;&#160;&#160;<a class="el" href="group__psi__api__mutex.html#ga340bf8f49d0cbaa994eaf5fb1fc7a22f">mysql_mutex_lock</a>(&amp;(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)-&gt;append_buffer_lock)</td></tr>
<tr class="separator:af8cf76f02c02901ffa95f16e0eec4608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a528b701b7a214136eea73e5851a3ba70"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#a528b701b7a214136eea73e5851a3ba70">unlock_append_buffer</a>(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)&#160;&#160;&#160;<a class="el" href="group__psi__api__mutex.html#ga5c748d3c7862702885acb90576754a2c">mysql_mutex_unlock</a>(&amp;(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)-&gt;append_buffer_lock)</td></tr>
<tr class="separator:a528b701b7a214136eea73e5851a3ba70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f27e0c1fe5decdddbe0e2a8546dad9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#a06f27e0c1fe5decdddbe0e2a8546dad9">IO_ROUND_UP</a>(<a class="el" href="ctype-tis620_8cc.html#a207fd5507206d307cd63f95374fcd00d">X</a>)&#160;&#160;&#160;(((<a class="el" href="ctype-tis620_8cc.html#a207fd5507206d307cd63f95374fcd00d">X</a>) + <a class="el" href="my__io_8h.html#ad2a9cf487b471119a07cba3db4bdf7d2">IO_SIZE</a> - 1) &amp; ~(<a class="el" href="my__io_8h.html#ad2a9cf487b471119a07cba3db4bdf7d2">IO_SIZE</a> - 1))</td></tr>
<tr class="separator:a06f27e0c1fe5decdddbe0e2a8546dad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a368e3614d14dd08e2652a828769eb80d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#a368e3614d14dd08e2652a828769eb80d">IO_ROUND_DN</a>(<a class="el" href="ctype-tis620_8cc.html#a207fd5507206d307cd63f95374fcd00d">X</a>)&#160;&#160;&#160;((<a class="el" href="ctype-tis620_8cc.html#a207fd5507206d307cd63f95374fcd00d">X</a>) &amp; ~(<a class="el" href="my__io_8h.html#ad2a9cf487b471119a07cba3db4bdf7d2">IO_SIZE</a> - 1))</td></tr>
<tr class="separator:a368e3614d14dd08e2652a828769eb80d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52b30e95061ab13609cce15f2e79bf1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#ad52b30e95061ab13609cce15f2e79bf1">LOCK_APPEND_BUFFER</a>&#160;&#160;&#160;<a class="el" href="lexyy_8cc.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (need_append_buffer_lock) <a class="el" href="mysys_2mf__iocache_8cc.html#af8cf76f02c02901ffa95f16e0eec4608">lock_append_buffer</a>(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>);</td></tr>
<tr class="separator:ad52b30e95061ab13609cce15f2e79bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab94f41e29cb66f78ab3ec9cbbb0c1a4e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#ab94f41e29cb66f78ab3ec9cbbb0c1a4e">UNLOCK_APPEND_BUFFER</a>&#160;&#160;&#160;<a class="el" href="lexyy_8cc.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (need_append_buffer_lock) <a class="el" href="mysys_2mf__iocache_8cc.html#a528b701b7a214136eea73e5851a3ba70">unlock_append_buffer</a>(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>);</td></tr>
<tr class="separator:ab94f41e29cb66f78ab3ec9cbbb0c1a4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9bed095e1f6c0e69f8ed70d9a22ec071"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga9bed095e1f6c0e69f8ed70d9a22ec071">setup_io_cache</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)</td></tr>
<tr class="separator:ga9bed095e1f6c0e69f8ed70d9a22ec071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b8f932abba28f979dd1fce4fe1f29f3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#a6b8f932abba28f979dd1fce4fe1f29f3">init_functions</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)</td></tr>
<tr class="separator:a6b8f932abba28f979dd1fce4fe1f29f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5de6929b184a323cc58b59e6da860908"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga5de6929b184a323cc58b59e6da860908">init_io_cache_ext</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="my__io__bits_8h.html#ad34d82818831a94a892fcc41a95aa286">File</a> file, size_t cachesize, enum <a class="el" href="group__MYSYS.html#ga133be589b3d6c576450c0b6b75a355e7">cache_type</a> type, <a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> seek_offset, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> use_async_io, <a class="el" href="my__inttypes_8h.html#a0db1f888c3bc329e7b0b340dbd41eb2b">myf</a> cache_myflags, <a class="el" href="group__psi__abi__file.html#gaa121a71b4b7479edd32d04250f90c026">PSI_file_key</a> file_key)</td></tr>
<tr class="separator:ga5de6929b184a323cc58b59e6da860908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf4b1aa7e244d9618809ebb7ac1dfade"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#gacf4b1aa7e244d9618809ebb7ac1dfade">init_io_cache</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="my__io__bits_8h.html#ad34d82818831a94a892fcc41a95aa286">File</a> file, size_t cachesize, enum <a class="el" href="group__MYSYS.html#ga133be589b3d6c576450c0b6b75a355e7">cache_type</a> type, <a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> seek_offset, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> use_async_io, <a class="el" href="my__inttypes_8h.html#a0db1f888c3bc329e7b0b340dbd41eb2b">myf</a> cache_myflags)</td></tr>
<tr class="separator:gacf4b1aa7e244d9618809ebb7ac1dfade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae784caa58d7c1673f7b8d95e55742a6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#gae784caa58d7c1673f7b8d95e55742a6e">reinit_io_cache</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, enum <a class="el" href="group__MYSYS.html#ga133be589b3d6c576450c0b6b75a355e7">cache_type</a> type, <a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> seek_offset, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> use_async_io, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> clear_cache)</td></tr>
<tr class="separator:gae784caa58d7c1673f7b8d95e55742a6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaed6eae1b9cbd1ff8f5398438614d977"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#gaaed6eae1b9cbd1ff8f5398438614d977">_my_b_read</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *Buffer, size_t Count)</td></tr>
<tr class="separator:gaaed6eae1b9cbd1ff8f5398438614d977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f4e27f1fbad474ad5c4862c4ec61b9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga3f4e27f1fbad474ad5c4862c4ec61b9b">init_io_cache_share</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *read_cache, <a class="el" href="structIO__CACHE__SHARE.html">IO_CACHE_SHARE</a> *cshare, <a class="el" href="structIO__CACHE.html">IO_CACHE</a> *write_cache, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> num_threads)</td></tr>
<tr class="separator:ga3f4e27f1fbad474ad5c4862c4ec61b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18a39f9f71eb6d8c7209ecc98c5b94ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga18a39f9f71eb6d8c7209ecc98c5b94ac">remove_io_thread</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *cache)</td></tr>
<tr class="separator:ga18a39f9f71eb6d8c7209ecc98c5b94ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d5b5ff79b9a3fcae44f7a49633c58b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#a83d5b5ff79b9a3fcae44f7a49633c58b">lock_io_cache</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *cache, <a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="el" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>)</td></tr>
<tr class="separator:a83d5b5ff79b9a3fcae44f7a49633c58b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0218cdf9a2b0b76fd4c685fc0f72c30f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#a0218cdf9a2b0b76fd4c685fc0f72c30f">unlock_io_cache</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *cache)</td></tr>
<tr class="separator:a0218cdf9a2b0b76fd4c685fc0f72c30f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07f2ceb69468648bb4b3e80e5a495f53"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga07f2ceb69468648bb4b3e80e5a495f53">_my_b_read_r</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *cache, <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *Buffer, size_t Count)</td></tr>
<tr class="separator:ga07f2ceb69468648bb4b3e80e5a495f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb550ff9db17de82fbd571a2784b387"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#abbb550ff9db17de82fbd571a2784b387">copy_to_read_buffer</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *write_cache, const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *write_buffer, size_t write_length)</td></tr>
<tr class="separator:abbb550ff9db17de82fbd571a2784b387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6515928c79268ce168bc6024bed33b99"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga6515928c79268ce168bc6024bed33b99">_my_b_seq_read</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *Buffer, size_t Count)</td></tr>
<tr class="separator:ga6515928c79268ce168bc6024bed33b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac688ae8cc2d58ad070c71648fa6ed62d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#gac688ae8cc2d58ad070c71648fa6ed62d">_my_b_get</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)</td></tr>
<tr class="separator:gac688ae8cc2d58ad070c71648fa6ed62d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad69dd62eb83b18e6281f705caa5b2ca0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#gad69dd62eb83b18e6281f705caa5b2ca0">_my_b_write</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *Buffer, size_t Count)</td></tr>
<tr class="separator:gad69dd62eb83b18e6281f705caa5b2ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4620b2cb18c31747aff7d8eb3f84bcce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga4620b2cb18c31747aff7d8eb3f84bcce">my_b_append</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *Buffer, size_t Count)</td></tr>
<tr class="separator:ga4620b2cb18c31747aff7d8eb3f84bcce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8513a056588f246d733a8c4a72037871"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga8513a056588f246d733a8c4a72037871">my_b_safe_write</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *Buffer, size_t Count)</td></tr>
<tr class="separator:ga8513a056588f246d733a8c4a72037871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga41d13e11c17f5c5d5fa994dcfb0b1e47"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga41d13e11c17f5c5d5fa994dcfb0b1e47">my_block_write</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *Buffer, size_t Count, <a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="el" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>)</td></tr>
<tr class="separator:ga41d13e11c17f5c5d5fa994dcfb0b1e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad594f50690d92ddcf61137a90263d8b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#gad594f50690d92ddcf61137a90263d8b7">my_b_flush_io_cache</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, int need_append_buffer_lock)</td></tr>
<tr class="separator:gad594f50690d92ddcf61137a90263d8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc0465694d6836986029ba08aafa54e5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#gabc0465694d6836986029ba08aafa54e5">end_io_cache</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)</td></tr>
<tr class="separator:gabc0465694d6836986029ba08aafa54e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa470d7161a902551575dd11f08245140"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#aa470d7161a902551575dd11f08245140">mysql_encryption_file_seek</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *cache, <a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="el" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>, int <a class="el" href="item_8cc.html#a8e8487cdb22d42b3c35de35a32678551">whence</a>, <a class="el" href="my__inttypes_8h.html#a0db1f888c3bc329e7b0b340dbd41eb2b">myf</a> <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>)</td></tr>
<tr class="memdesc:aa470d7161a902551575dd11f08245140"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a wrapper around mysql_file_seek.  <a href="#aa470d7161a902551575dd11f08245140">More...</a><br /></td></tr>
<tr class="separator:aa470d7161a902551575dd11f08245140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7de2925fa14a5e119613883d208be09"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#af7de2925fa14a5e119613883d208be09">mysql_encryption_file_read</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *cache, <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="el" href="test__sql__9__sessions_8cc.html#ac242a6dca06b33213957c913bd72414c">buffer</a>, size_t <a class="el" href="myisam__ftdump_8cc.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>, <a class="el" href="my__inttypes_8h.html#a0db1f888c3bc329e7b0b340dbd41eb2b">myf</a> <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>)</td></tr>
<tr class="memdesc:af7de2925fa14a5e119613883d208be09"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a wrapper around mysql_file_read.  <a href="#af7de2925fa14a5e119613883d208be09">More...</a><br /></td></tr>
<tr class="separator:af7de2925fa14a5e119613883d208be09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00ab23eb13e290fc7c3070eba0cb1961"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#a00ab23eb13e290fc7c3070eba0cb1961">mysql_encryption_file_write</a> (<a class="el" href="structIO__CACHE.html">IO_CACHE</a> *cache, const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="el" href="test__sql__9__sessions_8cc.html#ac242a6dca06b33213957c913bd72414c">buffer</a>, size_t <a class="el" href="myisam__ftdump_8cc.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>, <a class="el" href="my__inttypes_8h.html#a0db1f888c3bc329e7b0b340dbd41eb2b">myf</a> <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>)</td></tr>
<tr class="memdesc:a00ab23eb13e290fc7c3070eba0cb1961"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a wrapper around mysql_file_write.  <a href="#a00ab23eb13e290fc7c3070eba0cb1961">More...</a><br /></td></tr>
<tr class="separator:a00ab23eb13e290fc7c3070eba0cb1961"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga029aeaf245c2ee1bb8975a626e1da673"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__psi__abi__file.html#gaa121a71b4b7479edd32d04250f90c026">PSI_file_key</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MYSYS.html#ga029aeaf245c2ee1bb8975a626e1da673">key_file_io_cache</a></td></tr>
<tr class="separator:ga029aeaf245c2ee1bb8975a626e1da673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2b4c354d3346e0f3b71da8e9269c4de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mysys_2mf__iocache_8cc.html#ab2b4c354d3346e0f3b71da8e9269c4de">binlog_cache_temporary_file_is_encrypted</a> = <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></td></tr>
<tr class="memdesc:ab2b4c354d3346e0f3b71da8e9269c4de"><td class="mdescLeft">&#160;</td><td class="mdescRight">(end of group MYSYS)  <a href="#ab2b4c354d3346e0f3b71da8e9269c4de">More...</a><br /></td></tr>
<tr class="separator:ab2b4c354d3346e0f3b71da8e9269c4de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Cashing of files with only does (sequential) read or writes of fixed- length records. </p>
<p>A read isn't allowed to go over file-length. A read is ok if it ends at file-length and next read can try to read after file-length (and get a EOF-error). Possibly use of asyncronic io. macros for read and writes for faster io. Used instead of FILE when reading or writing whole files. This code makes mf_rec_cache obsolete (currently only used by ISAM) One can change info-&gt;pos_in_file to a higher value to skip bytes in file if also info-&gt;read_pos is set to info-&gt;read_end. If called through open_cached_file(), then the temporary file will only be created if a write exeeds the file buffer or if one calls my_b_flush_io_cache().</p>
<p>If one uses SEQ_READ_APPEND, then two buffers are allocated, one for reading and another for writing. Reads are first done from disk and then done from the write buffer. This is an efficient way to read from a log file when one is writing to it at the same time. For this to work, the file has to be opened in append mode! Note that when one uses SEQ_READ_APPEND, one MUST write using my_b_append ! This is needed because we need to lock the mutex every time we access the write buffer.</p>
<p>TODO: When one SEQ_READ_APPEND and we are reading and writing at the same time, each time the write buffer gets full and it's written to disk, we will always do a disk read to read a part of the buffer from disk to the read buffer. This should be fixed so that when we do a my_b_flush_io_cache() and we have been reading the write buffer, we should transfer the rest of the write buffer to the read buffer before we start to reuse it. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a368e3614d14dd08e2652a828769eb80d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a368e3614d14dd08e2652a828769eb80d">&#9670;&nbsp;</a></span>IO_ROUND_DN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IO_ROUND_DN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="ctype-tis620_8cc.html#a207fd5507206d307cd63f95374fcd00d">X</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="ctype-tis620_8cc.html#a207fd5507206d307cd63f95374fcd00d">X</a>) &amp; ~(<a class="el" href="my__io_8h.html#ad2a9cf487b471119a07cba3db4bdf7d2">IO_SIZE</a> - 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a06f27e0c1fe5decdddbe0e2a8546dad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06f27e0c1fe5decdddbe0e2a8546dad9">&#9670;&nbsp;</a></span>IO_ROUND_UP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IO_ROUND_UP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="ctype-tis620_8cc.html#a207fd5507206d307cd63f95374fcd00d">X</a></td><td>)</td>
          <td>&#160;&#160;&#160;(((<a class="el" href="ctype-tis620_8cc.html#a207fd5507206d307cd63f95374fcd00d">X</a>) + <a class="el" href="my__io_8h.html#ad2a9cf487b471119a07cba3db4bdf7d2">IO_SIZE</a> - 1) &amp; ~(<a class="el" href="my__io_8h.html#ad2a9cf487b471119a07cba3db4bdf7d2">IO_SIZE</a> - 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af8cf76f02c02901ffa95f16e0eec4608"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8cf76f02c02901ffa95f16e0eec4608">&#9670;&nbsp;</a></span>lock_append_buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define lock_append_buffer</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__psi__api__mutex.html#ga340bf8f49d0cbaa994eaf5fb1fc7a22f">mysql_mutex_lock</a>(&amp;(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)-&gt;append_buffer_lock)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad52b30e95061ab13609cce15f2e79bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52b30e95061ab13609cce15f2e79bf1">&#9670;&nbsp;</a></span>LOCK_APPEND_BUFFER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOCK_APPEND_BUFFER&#160;&#160;&#160;<a class="el" href="lexyy_8cc.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (need_append_buffer_lock) <a class="el" href="mysys_2mf__iocache_8cc.html#af8cf76f02c02901ffa95f16e0eec4608">lock_append_buffer</a>(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>);</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a528b701b7a214136eea73e5851a3ba70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a528b701b7a214136eea73e5851a3ba70">&#9670;&nbsp;</a></span>unlock_append_buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define unlock_append_buffer</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="group__psi__api__mutex.html#ga5c748d3c7862702885acb90576754a2c">mysql_mutex_unlock</a>(&amp;(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>)-&gt;append_buffer_lock)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab94f41e29cb66f78ab3ec9cbbb0c1a4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab94f41e29cb66f78ab3ec9cbbb0c1a4e">&#9670;&nbsp;</a></span>UNLOCK_APPEND_BUFFER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNLOCK_APPEND_BUFFER&#160;&#160;&#160;<a class="el" href="lexyy_8cc.html#ad4a65b873df5c05570846b5413b41dfd">if</a> (need_append_buffer_lock) <a class="el" href="mysys_2mf__iocache_8cc.html#a528b701b7a214136eea73e5851a3ba70">unlock_append_buffer</a>(<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>);</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abbb550ff9db17de82fbd571a2784b387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbb550ff9db17de82fbd571a2784b387">&#9670;&nbsp;</a></span>copy_to_read_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void copy_to_read_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIO__CACHE.html">IO_CACHE</a> *&#160;</td>
          <td class="paramname"><em>write_cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>write_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>write_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6b8f932abba28f979dd1fce4fe1f29f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b8f932abba28f979dd1fce4fe1f29f3">&#9670;&nbsp;</a></span>init_functions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_functions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIO__CACHE.html">IO_CACHE</a> *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a83d5b5ff79b9a3fcae44f7a49633c58b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d5b5ff79b9a3fcae44f7a49633c58b">&#9670;&nbsp;</a></span>lock_io_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lock_io_cache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIO__CACHE.html">IO_CACHE</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a>&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af7de2925fa14a5e119613883d208be09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7de2925fa14a5e119613883d208be09">&#9670;&nbsp;</a></span>mysql_encryption_file_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mysql_encryption_file_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIO__CACHE.html">IO_CACHE</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a0db1f888c3bc329e7b0b340dbd41eb2b">myf</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a wrapper around mysql_file_read. </p>
<p>Read data from the temporary file of a binlog cache, and take care of decrypting the data if binlog_encryption is on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">cache</td><td>The handler of a binlog cache to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>The memory buffer to write to. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">count</td><td>The length of data in the temporary file to be read in bytes. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flags</td><td>The bitmap of different flags MY_WME | MY_FAE | MY_NABP | MY_FNABP | MY_DONT_CHECK_FILESIZE and so on.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>length of bytes to be read, or MY_FILE_ERROR on error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa470d7161a902551575dd11f08245140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa470d7161a902551575dd11f08245140">&#9670;&nbsp;</a></span>mysql_encryption_file_seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> mysql_encryption_file_seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIO__CACHE.html">IO_CACHE</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>whence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a0db1f888c3bc329e7b0b340dbd41eb2b">myf</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a wrapper around mysql_file_seek. </p>
<p>Seek to a position in the temporary file of a binlog cache, and set the encryption/decryption stream offset if binlog_encryption is on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The handler of a binlog cache to seek. </td></tr>
    <tr><td class="paramname">pos</td><td>The expected position (absolute or relative) </td></tr>
    <tr><td class="paramname">whence</td><td>A direction parameter and one of {SEEK_SET, SEEK_CUR, SEEK_END} </td></tr>
    <tr><td class="paramname">flags</td><td>The bitmap of different flags MY_WME | MY_FAE | MY_NABP | MY_FNABP | MY_DONT_CHECK_FILESIZE and so on.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>new position in the file, or MY_FILEPOS_ERROR on error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a00ab23eb13e290fc7c3070eba0cb1961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00ab23eb13e290fc7c3070eba0cb1961">&#9670;&nbsp;</a></span>mysql_encryption_file_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mysql_encryption_file_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIO__CACHE.html">IO_CACHE</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a0db1f888c3bc329e7b0b340dbd41eb2b">myf</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a wrapper around mysql_file_write. </p>
<p>Write data in buffer to the temporary file of a binlog cache, and take care of encrypting the data if binlog_encryption is on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cache</td><td>The handler of a binlog cache to write. </td></tr>
    <tr><td class="paramname">buffer</td><td>The memory buffer to write from. </td></tr>
    <tr><td class="paramname">count</td><td>The length of data in buffer to be written in bytes. </td></tr>
    <tr><td class="paramname">flags</td><td>The bitmap of different flags MY_WME | MY_FAE | MY_NABP | MY_FNABP | MY_DONT_CHECK_FILESIZE and so on</td></tr>
  </table>
  </dd>
</dl>
<p>if (flags &amp; (MY_NABP | MY_FNABP)) { </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if count == 0 </td></tr>
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">MY_FILE_ERROR</td><td>error } else { </td></tr>
    <tr><td class="paramname">0</td><td>if count == 0 </td></tr>
    <tr><td class="paramname">The</td><td>number of bytes written on success. </td></tr>
    <tr><td class="paramname">MY_FILE_ERROR</td><td>error </td></tr>
    <tr><td class="paramname">The</td><td>actual number of bytes written on partial success (if less than count bytes were written). } </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0218cdf9a2b0b76fd4c685fc0f72c30f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0218cdf9a2b0b76fd4c685fc0f72c30f">&#9670;&nbsp;</a></span>unlock_io_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unlock_io_cache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIO__CACHE.html">IO_CACHE</a> *&#160;</td>
          <td class="paramname"><em>cache</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab2b4c354d3346e0f3b71da8e9269c4de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2b4c354d3346e0f3b71da8e9269c4de">&#9670;&nbsp;</a></span>binlog_cache_temporary_file_is_encrypted</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> binlog_cache_temporary_file_is_encrypted = <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(end of group MYSYS) </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_7507adac5764e4f818c81969b3802964.html">mysys</a></li><li class="navelem"><a class="el" href="mysys_2mf__iocache_8cc.html">mf_iocache.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
