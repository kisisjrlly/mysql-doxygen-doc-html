<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: undo::Truncate Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classundo_1_1Truncate.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classundo_1_1Truncate-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">undo::Truncate Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Track an UNDO tablespace marked for truncate.  
 <a href="classundo_1_1Truncate.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="trx0purge_8h_source.html">trx0purge.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a09ecfd0a4744aedc3882f7a8f30b3b2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a09ecfd0a4744aedc3882f7a8f30b3b2c">Truncate</a> ()</td></tr>
<tr class="separator:a09ecfd0a4744aedc3882f7a8f30b3b2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c1e3e26b858c8880a69cdaf6bd090bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a9c1e3e26b858c8880a69cdaf6bd090bb">is_marked</a> () const</td></tr>
<tr class="memdesc:a9c1e3e26b858c8880a69cdaf6bd090bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is tablespace selected for truncate.  <a href="#a9c1e3e26b858c8880a69cdaf6bd090bb">More...</a><br /></td></tr>
<tr class="separator:a9c1e3e26b858c8880a69cdaf6bd090bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a9fc5fd45f69506ddb217577865b16"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a33a9fc5fd45f69506ddb217577865b16">set_marked_space_empty</a> ()</td></tr>
<tr class="memdesc:a33a9fc5fd45f69506ddb217577865b16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the undo tablespace selected for truncate as empty so that it will be truncated next.  <a href="#a33a9fc5fd45f69506ddb217577865b16">More...</a><br /></td></tr>
<tr class="separator:a33a9fc5fd45f69506ddb217577865b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84ff2a82aa9a67795061fdb5c6602756"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a84ff2a82aa9a67795061fdb5c6602756">is_marked_space_empty</a> () const</td></tr>
<tr class="memdesc:a84ff2a82aa9a67795061fdb5c6602756"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the tablespace selected for truncate empty of undo logs yet?  <a href="#a84ff2a82aa9a67795061fdb5c6602756">More...</a><br /></td></tr>
<tr class="separator:a84ff2a82aa9a67795061fdb5c6602756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad62236cbf4919302cd71b5d904d8ecc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#ad62236cbf4919302cd71b5d904d8ecc9">mark</a> (<a class="el" href="structundo_1_1Tablespace.html">Tablespace</a> *undo_space)</td></tr>
<tr class="memdesc:ad62236cbf4919302cd71b5d904d8ecc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the tablespace for truncate.  <a href="#ad62236cbf4919302cd71b5d904d8ecc9">More...</a><br /></td></tr>
<tr class="separator:ad62236cbf4919302cd71b5d904d8ecc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf196032cc3ecfe64bd4e67e1a9cd317"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#abf196032cc3ecfe64bd4e67e1a9cd317">get_marked_space_num</a> () const</td></tr>
<tr class="memdesc:abf196032cc3ecfe64bd4e67e1a9cd317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the ID of the tablespace marked for truncate.  <a href="#abf196032cc3ecfe64bd4e67e1a9cd317">More...</a><br /></td></tr>
<tr class="separator:abf196032cc3ecfe64bd4e67e1a9cd317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1106cb0d0a5a520906df41fea99c5579"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a1106cb0d0a5a520906df41fea99c5579">reset</a> ()</td></tr>
<tr class="memdesc:a1106cb0d0a5a520906df41fea99c5579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset for next rseg truncate.  <a href="#a1106cb0d0a5a520906df41fea99c5579">More...</a><br /></td></tr>
<tr class="separator:a1106cb0d0a5a520906df41fea99c5579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72add4d059067d837cb79e80dc0c948a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a72add4d059067d837cb79e80dc0c948a">get_scan_space_num</a> () const</td></tr>
<tr class="memdesc:a72add4d059067d837cb79e80dc0c948a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the undo tablespace number to start a scan.  <a href="#a72add4d059067d837cb79e80dc0c948a">More...</a><br /></td></tr>
<tr class="separator:a72add4d059067d837cb79e80dc0c948a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6842e6df2da9b1b49de4f608c5ae3f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#af6842e6df2da9b1b49de4f608c5ae3f0">increment_scan</a> () const</td></tr>
<tr class="memdesc:af6842e6df2da9b1b49de4f608c5ae3f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment the scanning position in a round-robin fashion.  <a href="#af6842e6df2da9b1b49de4f608c5ae3f0">More...</a><br /></td></tr>
<tr class="separator:af6842e6df2da9b1b49de4f608c5ae3f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438c18b9e8107db1bd9f0dc5467f5d4d"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a438c18b9e8107db1bd9f0dc5467f5d4d">get_rseg_truncate_frequency</a> () const</td></tr>
<tr class="memdesc:a438c18b9e8107db1bd9f0dc5467f5d4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get local rseg purge truncate frequency.  <a href="#a438c18b9e8107db1bd9f0dc5467f5d4d">More...</a><br /></td></tr>
<tr class="separator:a438c18b9e8107db1bd9f0dc5467f5d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae51af34ed329e3ba1a63cec797ab1fe1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#ae51af34ed329e3ba1a63cec797ab1fe1">set_rseg_truncate_frequency</a> (ulint frequency)</td></tr>
<tr class="memdesc:ae51af34ed329e3ba1a63cec797ab1fe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set local rseg purge truncate frequency.  <a href="#ae51af34ed329e3ba1a63cec797ab1fe1">More...</a><br /></td></tr>
<tr class="separator:ae51af34ed329e3ba1a63cec797ab1fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512c2ecdf0bb5c2daa25bf54ce797467"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a512c2ecdf0bb5c2daa25bf54ce797467">is_equal</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id) const</td></tr>
<tr class="memdesc:a512c2ecdf0bb5c2daa25bf54ce797467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the given space id is equal to the space ID that is marked for truncation.  <a href="#a512c2ecdf0bb5c2daa25bf54ce797467">More...</a><br /></td></tr>
<tr class="separator:a512c2ecdf0bb5c2daa25bf54ce797467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f9ca2a5b651bbcbf09da501b345757"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a81f9ca2a5b651bbcbf09da501b345757">check_timer</a> () const</td></tr>
<tr class="separator:a81f9ca2a5b651bbcbf09da501b345757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c7ad847aa7ddf3a92859e02ac29eac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a64c7ad847aa7ddf3a92859e02ac29eac">reset_timer</a> ()</td></tr>
<tr class="memdesc:a64c7ad847aa7ddf3a92859e02ac29eac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the timer.  <a href="#a64c7ad847aa7ddf3a92859e02ac29eac">More...</a><br /></td></tr>
<tr class="separator:a64c7ad847aa7ddf3a92859e02ac29eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab43ec6bae12b7cc362993d5e180fe2fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#ab43ec6bae12b7cc362993d5e180fe2fd">m_space_id_marked</a></td></tr>
<tr class="memdesc:ab43ec6bae12b7cc362993d5e180fe2fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">UNDO space ID that is marked for truncate.  <a href="#ab43ec6bae12b7cc362993d5e180fe2fd">More...</a><br /></td></tr>
<tr class="separator:ab43ec6bae12b7cc362993d5e180fe2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d8a9feab9429286b674a9964ecbbe07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a7d8a9feab9429286b674a9964ecbbe07">m_marked_space_is_empty</a></td></tr>
<tr class="memdesc:a7d8a9feab9429286b674a9964ecbbe07"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is true if the marked space is empty of undo logs and ready to truncate.  <a href="#a7d8a9feab9429286b674a9964ecbbe07">More...</a><br /></td></tr>
<tr class="separator:a7d8a9feab9429286b674a9964ecbbe07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67544ccb9b7862ea0fa867a593b663d9"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a67544ccb9b7862ea0fa867a593b663d9">m_purge_rseg_truncate_frequency</a></td></tr>
<tr class="memdesc:a67544ccb9b7862ea0fa867a593b663d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback segment(s) purge frequency.  <a href="#a67544ccb9b7862ea0fa867a593b663d9">More...</a><br /></td></tr>
<tr class="separator:a67544ccb9b7862ea0fa867a593b663d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5928ac514c514e2e222c61b154958f0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classib_1_1Timer.html">ib::Timer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#a5928ac514c514e2e222c61b154958f0e">m_timer</a></td></tr>
<tr class="memdesc:a5928ac514c514e2e222c61b154958f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elapsed time since last truncate check.  <a href="#a5928ac514c514e2e222c61b154958f0e">More...</a><br /></td></tr>
<tr class="separator:a5928ac514c514e2e222c61b154958f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:aced12bc0fe0cd0ee8b4fd3ad4c7e4822"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html#aced12bc0fe0cd0ee8b4fd3ad4c7e4822">s_scan_pos</a></td></tr>
<tr class="memdesc:aced12bc0fe0cd0ee8b4fd3ad4c7e4822"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start scanning for UNDO tablespace from this vector position.  <a href="#aced12bc0fe0cd0ee8b4fd3ad4c7e4822">More...</a><br /></td></tr>
<tr class="separator:aced12bc0fe0cd0ee8b4fd3ad4c7e4822"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Track an UNDO tablespace marked for truncate. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a09ecfd0a4744aedc3882f7a8f30b3b2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09ecfd0a4744aedc3882f7a8f30b3b2c">&#9670;&nbsp;</a></span>Truncate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">undo::Truncate::Truncate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a81f9ca2a5b651bbcbf09da501b345757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81f9ca2a5b651bbcbf09da501b345757">&#9670;&nbsp;</a></span>check_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t undo::Truncate::check_timer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the number of milliseconds since last reset. </dd></dl>

</div>
</div>
<a id="abf196032cc3ecfe64bd4e67e1a9cd317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf196032cc3ecfe64bd4e67e1a9cd317">&#9670;&nbsp;</a></span>get_marked_space_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::Truncate::get_marked_space_num </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the ID of the tablespace marked for truncate. </p>
<dl class="section return"><dt>Returns</dt><dd>tablespace ID marked for truncate. </dd></dl>

</div>
</div>
<a id="a438c18b9e8107db1bd9f0dc5467f5d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a438c18b9e8107db1bd9f0dc5467f5d4d">&#9670;&nbsp;</a></span>get_rseg_truncate_frequency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint undo::Truncate::get_rseg_truncate_frequency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get local rseg purge truncate frequency. </p>
<dl class="section return"><dt>Returns</dt><dd>rseg purge truncate frequency. </dd></dl>

</div>
</div>
<a id="a72add4d059067d837cb79e80dc0c948a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72add4d059067d837cb79e80dc0c948a">&#9670;&nbsp;</a></span>get_scan_space_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::Truncate::get_scan_space_num </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the undo tablespace number to start a scan. </p>
<p>Re-adjust in case the spaces::size() went down. </p><dl class="section return"><dt>Returns</dt><dd>undo space_num to start scanning. </dd></dl>

</div>
</div>
<a id="af6842e6df2da9b1b49de4f608c5ae3f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6842e6df2da9b1b49de4f608c5ae3f0">&#9670;&nbsp;</a></span>increment_scan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::Truncate::increment_scan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increment the scanning position in a round-robin fashion. </p>
<dl class="section return"><dt>Returns</dt><dd>undo space_num at incremented scanning position. </dd></dl>
<p>Round-robin way of selecting an undo tablespace for the truncate operation. Once we reach the end of the list of known undo tablespace IDs, move back to the first undo tablespace ID. This will scan active as well as inactive undo tablespaces. </p>

</div>
</div>
<a id="a512c2ecdf0bb5c2daa25bf54ce797467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a512c2ecdf0bb5c2daa25bf54ce797467">&#9670;&nbsp;</a></span>is_equal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> undo::Truncate::is_equal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the given space id is equal to the space ID that is marked for truncation. </p>
<dl class="section return"><dt>Returns</dt><dd>true if they are equal, false otherwise. </dd></dl>

</div>
</div>
<a id="a9c1e3e26b858c8880a69cdaf6bd090bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c1e3e26b858c8880a69cdaf6bd090bb">&#9670;&nbsp;</a></span>is_marked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> undo::Truncate::is_marked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is tablespace selected for truncate. </p>
<dl class="section return"><dt>Returns</dt><dd>true if undo tablespace is marked for truncate </dd></dl>

</div>
</div>
<a id="a84ff2a82aa9a67795061fdb5c6602756"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84ff2a82aa9a67795061fdb5c6602756">&#9670;&nbsp;</a></span>is_marked_space_empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> undo::Truncate::is_marked_space_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is the tablespace selected for truncate empty of undo logs yet? </p>
<dl class="section return"><dt>Returns</dt><dd>true if the marked undo tablespace has no more undo logs </dd></dl>

</div>
</div>
<a id="ad62236cbf4919302cd71b5d904d8ecc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad62236cbf4919302cd71b5d904d8ecc9">&#9670;&nbsp;</a></span>mark()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::Truncate::mark </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo_1_1Tablespace.html">Tablespace</a> *&#160;</td>
          <td class="paramname"><em>undo_space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark the tablespace for truncate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_space</td><td>undo tablespace to truncate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1106cb0d0a5a520906df41fea99c5579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1106cb0d0a5a520906df41fea99c5579">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void undo::Truncate::reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset for next rseg truncate. </p>

</div>
</div>
<a id="a64c7ad847aa7ddf3a92859e02ac29eac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c7ad847aa7ddf3a92859e02ac29eac">&#9670;&nbsp;</a></span>reset_timer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void undo::Truncate::reset_timer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the timer. </p>

</div>
</div>
<a id="a33a9fc5fd45f69506ddb217577865b16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33a9fc5fd45f69506ddb217577865b16">&#9670;&nbsp;</a></span>set_marked_space_empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void undo::Truncate::set_marked_space_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mark the undo tablespace selected for truncate as empty so that it will be truncated next. </p>

</div>
</div>
<a id="ae51af34ed329e3ba1a63cec797ab1fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae51af34ed329e3ba1a63cec797ab1fe1">&#9670;&nbsp;</a></span>set_rseg_truncate_frequency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void undo::Truncate::set_rseg_truncate_frequency </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>frequency</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set local rseg purge truncate frequency. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7d8a9feab9429286b674a9964ecbbe07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d8a9feab9429286b674a9964ecbbe07">&#9670;&nbsp;</a></span>m_marked_space_is_empty</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> undo::Truncate::m_marked_space_is_empty</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is true if the marked space is empty of undo logs and ready to truncate. </p>
<p>We leave the rsegs object 'inactive' until after it is truncated and rebuilt. This allow the code to do the check for undo logs only once. </p>

</div>
</div>
<a id="a67544ccb9b7862ea0fa867a593b663d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67544ccb9b7862ea0fa867a593b663d9">&#9670;&nbsp;</a></span>m_purge_rseg_truncate_frequency</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint undo::Truncate::m_purge_rseg_truncate_frequency</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rollback segment(s) purge frequency. </p>
<p>This is a local value maintained along with the global value. It is set to the global value before each truncate. But when a tablespace is marked for truncate it is updated to 1 and then minimum value among 2 is used by the purge action. </p>

</div>
</div>
<a id="ab43ec6bae12b7cc362993d5e180fe2fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab43ec6bae12b7cc362993d5e180fe2fd">&#9670;&nbsp;</a></span>m_space_id_marked</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::Truncate::m_space_id_marked</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>UNDO space ID that is marked for truncate. </p>

</div>
</div>
<a id="a5928ac514c514e2e222c61b154958f0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5928ac514c514e2e222c61b154958f0e">&#9670;&nbsp;</a></span>m_timer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classib_1_1Timer.html">ib::Timer</a> undo::Truncate::m_timer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Elapsed time since last truncate check. </p>

</div>
</div>
<a id="aced12bc0fe0cd0ee8b4fd3ad4c7e4822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aced12bc0fe0cd0ee8b4fd3ad4c7e4822">&#9670;&nbsp;</a></span>s_scan_pos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t undo::Truncate::s_scan_pos</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start scanning for UNDO tablespace from this vector position. </p>
<p>This is to avoid bias selection of one tablespace always. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>storage/innobase/include/<a class="el" href="trx0purge_8h_source.html">trx0purge.h</a></li>
<li>storage/innobase/trx/<a class="el" href="trx0purge_8cc.html">trx0purge.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceundo.html">undo</a></li><li class="navelem"><a class="el" href="classundo_1_1Truncate.html">Truncate</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
