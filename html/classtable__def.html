<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: table_def Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classtable__def.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtable__def-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">table_def Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A table definition from the master.  
 <a href="classtable__def.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rpl__utility_8h_source.html">rpl_utility.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6b41715588970b4fb4d921cab44a83a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a6b41715588970b4fb4d921cab44a83a7">table_def</a> ()</td></tr>
<tr class="memdesc:a6b41715588970b4fb4d921cab44a83a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">No-op constructor.  <a href="#a6b41715588970b4fb4d921cab44a83a7">More...</a><br /></td></tr>
<tr class="separator:a6b41715588970b4fb4d921cab44a83a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659c3d889db3ab3c2cc3f3cb591587e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a659c3d889db3ab3c2cc3f3cb591587e5">table_def</a> (unsigned char *types, <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="el" href="classtable__def.html#a793dcd937355e094a90d55e2e1bca1c4">size</a>, <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="el" href="classtable__def.html#af82e11d4e5a374237e76b928d9daa015">field_metadata</a>, int metadata_size, <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *null_bitmap, <a class="el" href="my__inttypes_8h.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>)</td></tr>
<tr class="memdesc:a659c3d889db3ab3c2cc3f3cb591587e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a659c3d889db3ab3c2cc3f3cb591587e5">More...</a><br /></td></tr>
<tr class="separator:a659c3d889db3ab3c2cc3f3cb591587e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae04b19aadd64f7a033f2625b25a14dd2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#ae04b19aadd64f7a033f2625b25a14dd2">~table_def</a> ()</td></tr>
<tr class="separator:ae04b19aadd64f7a033f2625b25a14dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a793dcd937355e094a90d55e2e1bca1c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a793dcd937355e094a90d55e2e1bca1c4">size</a> () const</td></tr>
<tr class="memdesc:a793dcd937355e094a90d55e2e1bca1c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of fields there is type data for.  <a href="#a793dcd937355e094a90d55e2e1bca1c4">More...</a><br /></td></tr>
<tr class="separator:a793dcd937355e094a90d55e2e1bca1c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c2710f4c4bc50ef6307226eb276cb4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="field__types_8h.html#a69e798807026a0f7e12b1d6c72374854">enum_field_types</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#aa9c2710f4c4bc50ef6307226eb276cb4">binlog_type</a> (<a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) const</td></tr>
<tr class="separator:aa9c2710f4c4bc50ef6307226eb276cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a750e8808acc3de1332fe5139cbaf1a24"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a750e8808acc3de1332fe5139cbaf1a24">json_column_count</a> () const</td></tr>
<tr class="memdesc:a750e8808acc3de1332fe5139cbaf1a24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of JSON columns in this table.  <a href="#a750e8808acc3de1332fe5139cbaf1a24">More...</a><br /></td></tr>
<tr class="separator:a750e8808acc3de1332fe5139cbaf1a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea2417ae94fbad9428f7fe96a385953"><td class="memItemLeft" align="right" valign="top"><a class="el" href="field__types_8h.html#a69e798807026a0f7e12b1d6c72374854">enum_field_types</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a3ea2417ae94fbad9428f7fe96a385953">type</a> (<a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) const</td></tr>
<tr class="separator:a3ea2417ae94fbad9428f7fe96a385953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af82e11d4e5a374237e76b928d9daa015"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#af82e11d4e5a374237e76b928d9daa015">field_metadata</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) const</td></tr>
<tr class="separator:af82e11d4e5a374237e76b928d9daa015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfbcfea1021e8cbfc6aa1708a3a36cc5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#abfbcfea1021e8cbfc6aa1708a3a36cc5">is_array</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) const</td></tr>
<tr class="memdesc:abfbcfea1021e8cbfc6aa1708a3a36cc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether or not the field at <code>index</code> is a typed array.  <a href="#abfbcfea1021e8cbfc6aa1708a3a36cc5">More...</a><br /></td></tr>
<tr class="separator:abfbcfea1021e8cbfc6aa1708a3a36cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb9473f51b13e84200c9b16bb22754dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#aeb9473f51b13e84200c9b16bb22754dd">maybe_null</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) const</td></tr>
<tr class="separator:aeb9473f51b13e84200c9b16bb22754dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3101b1c0c67140b3513d464214654d05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a3101b1c0c67140b3513d464214654d05">calc_field_size</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> col, const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *master_data) const</td></tr>
<tr class="separator:a3101b1c0c67140b3513d464214654d05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedd263d15199083d64b5ba5beaf1eb5a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#aedd263d15199083d64b5ba5beaf1eb5a">compatible_with</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="structTABLE.html">TABLE</a> *table, <a class="el" href="structTABLE.html">TABLE</a> **conv_table_var) const</td></tr>
<tr class="memdesc:aedd263d15199083d64b5ba5beaf1eb5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide if the table definition is compatible with a table.  <a href="#aedd263d15199083d64b5ba5beaf1eb5a">More...</a><br /></td></tr>
<tr class="separator:aedd263d15199083d64b5ba5beaf1eb5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07dbe69aabbf2c897317a2c96648a4a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a07dbe69aabbf2c897317a2c96648a4a8">create_conversion_table</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classRelay__log__info.html">Relay_log_info</a> *rli, <a class="el" href="structTABLE.html">TABLE</a> *target_table) const</td></tr>
<tr class="memdesc:a07dbe69aabbf2c897317a2c96648a4a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a virtual in-memory temporary table structure.  <a href="#a07dbe69aabbf2c897317a2c96648a4a8">More...</a><br /></td></tr>
<tr class="separator:a07dbe69aabbf2c897317a2c96648a4a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1a23d5be5e853c29c849cd9580aa3f7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a1a23d5be5e853c29c849cd9580aa3f7e">m_size</a></td></tr>
<tr class="separator:a1a23d5be5e853c29c849cd9580aa3f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79acc038cbea32233f3c9d43f3e16c29"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a79acc038cbea32233f3c9d43f3e16c29">m_type</a></td></tr>
<tr class="separator:a79acc038cbea32233f3c9d43f3e16c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81ce072a027cc5dd0996023230045dfd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a81ce072a027cc5dd0996023230045dfd">m_field_metadata_size</a></td></tr>
<tr class="separator:a81ce072a027cc5dd0996023230045dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bf6096730455eaed383c91805598eef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a9bf6096730455eaed383c91805598eef">m_field_metadata</a></td></tr>
<tr class="separator:a9bf6096730455eaed383c91805598eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af15d119b17614e2c56cd142b258a0bd2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#af15d119b17614e2c56cd142b258a0bd2">m_null_bits</a></td></tr>
<tr class="separator:af15d119b17614e2c56cd142b258a0bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac24bd985337c33048748d794709c092"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#aac24bd985337c33048748d794709c092">m_flags</a></td></tr>
<tr class="separator:aac24bd985337c33048748d794709c092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60684fb65fc75e37bf788075c0e77d4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a60684fb65fc75e37bf788075c0e77d4d">m_memory</a></td></tr>
<tr class="separator:a60684fb65fc75e37bf788075c0e77d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1141b0736a8c3102e6bfa9588744e9e3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a1141b0736a8c3102e6bfa9588744e9e3">m_json_column_count</a></td></tr>
<tr class="separator:a1141b0736a8c3102e6bfa9588744e9e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a347d1ed7dc7ebbfa44324b647e173f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtable__def.html#a5a347d1ed7dc7ebbfa44324b647e173f">m_is_array</a></td></tr>
<tr class="separator:a5a347d1ed7dc7ebbfa44324b647e173f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A table definition from the master. </p>
<p>The responsibilities of this class is:</p><ul>
<li>Extract and decode table definition data from the table map event</li>
<li>Check if table definition in table map is compatible with table definition on slave</li>
<li>expose the type information so that it can be used when encoding or decoding row event data. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6b41715588970b4fb4d921cab44a83a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b41715588970b4fb4d921cab44a83a7">&#9670;&nbsp;</a></span>table_def() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">table_def::table_def </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>No-op constructor. </p>
<p>Instances of RPL_TABLE_LIST are created by first allocating memory, then placement-new-ing an RPL_TABLE_LIST object containing an uninitialized table_def object which is only conditionally initialized. See Table_map_log_event::do_apply_event(). </p>

</div>
</div>
<a id="a659c3d889db3ab3c2cc3f3cb591587e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a659c3d889db3ab3c2cc3f3cb591587e5">&#9670;&nbsp;</a></span>table_def() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">table_def::table_def </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>field_metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>metadata_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>null_bitmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">types</td><td>Array of types, each stored as a byte </td></tr>
    <tr><td class="paramname">size</td><td>Number of elements in array 'types' </td></tr>
    <tr><td class="paramname">field_metadata</td><td>Array of extra information about fields </td></tr>
    <tr><td class="paramname">metadata_size</td><td>Size of the field_metadata array </td></tr>
    <tr><td class="paramname">null_bitmap</td><td>The bitmap of fields that can be null </td></tr>
    <tr><td class="paramname">flags</td><td>Table flags </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae04b19aadd64f7a033f2625b25a14dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae04b19aadd64f7a033f2625b25a14dd2">&#9670;&nbsp;</a></span>~table_def()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">table_def::~table_def </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa9c2710f4c4bc50ef6307226eb276cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c2710f4c4bc50ef6307226eb276cb4">&#9670;&nbsp;</a></span>binlog_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="field__types_8h.html#a69e798807026a0f7e12b1d6c72374854">enum_field_types</a> table_def::binlog_type </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3101b1c0c67140b3513d464214654d05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3101b1c0c67140b3513d464214654d05">&#9670;&nbsp;</a></span>calc_field_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a> table_def::calc_field_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>master_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aedd263d15199083d64b5ba5beaf1eb5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedd263d15199083d64b5ba5beaf1eb5a">&#9670;&nbsp;</a></span>compatible_with()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> table_def::compatible_with </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> **&#160;</td>
          <td class="paramname"><em>conv_table_var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decide if the table definition is compatible with a table. </p>
<p>Is the definition compatible with a table when it does not belong to the data dictionary?</p>
<p>Compare the definition with a table to see if it is compatible with it.</p>
<p>A table definition is compatible with a table if:</p><ul>
<li>The columns types of the table definition is a (not necessarily proper) prefix of the column type of the table.</li>
<li>The other way around.</li>
<li>Each column on the master that also exists on the slave can be converted according to the current settings of <code>SLAVE_TYPE_CONVERSIONS</code>.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">thd</td><td>Current thread </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">rli</td><td>Pointer to relay log info </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">table</td><td>Pointer to table to compare with.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">conv_table_var</td><td>Pointer to temporary table for holding conversion table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if the table definition is not compatible with <code>table</code> </td></tr>
    <tr><td class="paramname">0</td><td>if the table definition is compatible with <code>table</code> </td></tr>
  </table>
  </dd>
</dl>
<p>This function first finds out whether the table belongs to the data dictionary. When not, it will compare the master table with an existing table on the slave and see if they are compatible with respect to the current settings of <code>SLAVE_TYPE_CONVERSIONS</code>.</p>
<p>If the tables are compatible and conversions are required, <code>tmp_table_var</code> will be set to a virtual temporary table with field pointers for the fields that require conversions. This allow simple checking of whether a conversion are to be applied or not.</p>
<p>If tables are compatible, but no conversions are necessary, <code>tmp_table_var</code> will be set to NULL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rli</td><td>Relay log info, for error reporting.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>Table to compare with</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">conv_table_var</td><td>Virtual temporary table for performing conversions, if necessary.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Master table is compatible with slave table. </td></tr>
    <tr><td class="paramname">false</td><td>When the table belongs to the data dictionary or master table is not compatible with slave table. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a07dbe69aabbf2c897317a2c96648a4a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07dbe69aabbf2c897317a2c96648a4a8">&#9670;&nbsp;</a></span>create_conversion_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTABLE.html">TABLE</a> * table_def::create_conversion_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRelay__log__info.html">Relay_log_info</a> *&#160;</td>
          <td class="paramname"><em>rli</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>target_table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a virtual in-memory temporary table structure. </p>
<p>Create a conversion table.</p>
<p>The table structure has records and field array so that a row can be unpacked into the record for further processing.</p>
<p>In the virtual table, each field that requires conversion will have a non-NULL value, while fields that do not require conversion will have a NULL value.</p>
<p>Some information that is missing in the events, such as the character set for string types, are taken from the table that the field is going to be pushed into, so the target table that the data eventually need to be pushed into need to be supplied.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread to allocate memory from. </td></tr>
    <tr><td class="paramname">rli</td><td>Relay log info structure, for error reporting. </td></tr>
    <tr><td class="paramname">target_table</td><td>Target table for fields.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a temporary table with memory allocated in the thread's memroot, NULL if the table could not be created</dd></dl>
<p>If the function is unable to create the conversion table, an error will be printed and NULL will be returned.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to conversion table, or NULL if unable to create conversion table. </dd></dl>

</div>
</div>
<a id="af82e11d4e5a374237e76b928d9daa015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af82e11d4e5a374237e76b928d9daa015">&#9670;&nbsp;</a></span>field_metadata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> table_def::field_metadata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abfbcfea1021e8cbfc6aa1708a3a36cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfbcfea1021e8cbfc6aa1708a3a36cc5">&#9670;&nbsp;</a></span>is_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> table_def::is_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether or not the field at <code>index</code> is a typed array. </p>

</div>
</div>
<a id="a750e8808acc3de1332fe5139cbaf1a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a750e8808acc3de1332fe5139cbaf1a24">&#9670;&nbsp;</a></span>json_column_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int table_def::json_column_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the number of JSON columns in this table. </p>

</div>
</div>
<a id="aeb9473f51b13e84200c9b16bb22754dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb9473f51b13e84200c9b16bb22754dd">&#9670;&nbsp;</a></span>maybe_null()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> table_def::maybe_null </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a793dcd937355e094a90d55e2e1bca1c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a793dcd937355e094a90d55e2e1bca1c4">&#9670;&nbsp;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> table_def::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the number of fields there is type data for. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of fields that there is type data for. </dd></dl>

</div>
</div>
<a id="a3ea2417ae94fbad9428f7fe96a385953"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ea2417ae94fbad9428f7fe96a385953">&#9670;&nbsp;</a></span>type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="field__types_8h.html#a69e798807026a0f7e12b1d6c72374854">enum_field_types</a> table_def::type </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a9bf6096730455eaed383c91805598eef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bf6096730455eaed383c91805598eef">&#9670;&nbsp;</a></span>m_field_metadata</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>* table_def::m_field_metadata</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a81ce072a027cc5dd0996023230045dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81ce072a027cc5dd0996023230045dfd">&#9670;&nbsp;</a></span>m_field_metadata_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> table_def::m_field_metadata_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aac24bd985337c33048748d794709c092"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac24bd985337c33048748d794709c092">&#9670;&nbsp;</a></span>m_flags</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#ac2a9e79eb120216f855626495b7bd18a">uint16</a> table_def::m_flags</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5a347d1ed7dc7ebbfa44324b647e173f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a347d1ed7dc7ebbfa44324b647e173f">&#9670;&nbsp;</a></span>m_is_array</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>* table_def::m_is_array</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1141b0736a8c3102e6bfa9588744e9e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1141b0736a8c3102e6bfa9588744e9e3">&#9670;&nbsp;</a></span>m_json_column_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int table_def::m_json_column_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a60684fb65fc75e37bf788075c0e77d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60684fb65fc75e37bf788075c0e77d4d">&#9670;&nbsp;</a></span>m_memory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* table_def::m_memory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af15d119b17614e2c56cd142b258a0bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af15d119b17614e2c56cd142b258a0bd2">&#9670;&nbsp;</a></span>m_null_bits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>* table_def::m_null_bits</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1a23d5be5e853c29c849cd9580aa3f7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a23d5be5e853c29c849cd9580aa3f7e">&#9670;&nbsp;</a></span>m_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> table_def::m_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a79acc038cbea32233f3c9d43f3e16c29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79acc038cbea32233f3c9d43f3e16c29">&#9670;&nbsp;</a></span>m_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* table_def::m_type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="rpl__utility_8h_source.html">rpl_utility.h</a></li>
<li>sql/<a class="el" href="rpl__utility_8cc.html">rpl_utility.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classtable__def.html">table_def</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
