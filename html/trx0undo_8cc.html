<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/trx/trx0undo.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('trx0undo_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">trx0undo.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transaction undo log.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;<a class="el" href="sql__thd__internal__api_8h_source.html">sql_thd_internal_api.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="fsp0fsp_8h_source.html">fsp0fsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ha__prototypes_8h_source.html">ha_prototypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0undo_8h_source.html">trx0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="clone0clone_8h_source.html">clone0clone.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="current__thd_8h_source.html">current_thd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0dd_8h_source.html">dict0dd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mach0data_8h_source.html">mach0data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mtr0log_8h_source.html">mtr0log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0mon_8h_source.html">srv0mon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0srv_8h_source.html">srv0srv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0start_8h_source.html">srv0start.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0purge_8h_source.html">trx0purge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rec_8h_source.html">trx0rec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rseg_8h_source.html">trx0rseg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4aae2819a4ffcdcb6c3a088f61b24260"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a4aae2819a4ffcdcb6c3a088f61b24260">trx_undo_page_init</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, ulint type, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a4aae2819a4ffcdcb6c3a088f61b24260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the fields in an undo log segment page.  <a href="#a4aae2819a4ffcdcb6c3a088f61b24260">More...</a><br /></td></tr>
<tr class="separator:a4aae2819a4ffcdcb6c3a088f61b24260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefad99186cce3365dd9b886f13df85b6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#aefad99186cce3365dd9b886f13df85b6">trx_undo_mem_create</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg, ulint <a class="el" href="xcom__base_8cc.html#a7307f729d2752bdbe1d32d9fda65f30a">id</a>, ulint type, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *xid, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no, ulint offset)</td></tr>
<tr class="memdesc:aefad99186cce3365dd9b886f13df85b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and initializes an undo log memory object.  <a href="#aefad99186cce3365dd9b886f13df85b6">More...</a><br /></td></tr>
<tr class="separator:aefad99186cce3365dd9b886f13df85b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca8f72b00bd0e6adfa7c0c05e8a379c7"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#aca8f72b00bd0e6adfa7c0c05e8a379c7">trx_undo_insert_header_reuse</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:aca8f72b00bd0e6adfa7c0c05e8a379c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a cached insert undo log header page for new use.  <a href="#aca8f72b00bd0e6adfa7c0c05e8a379c7">More...</a><br /></td></tr>
<tr class="separator:aca8f72b00bd0e6adfa7c0c05e8a379c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a99fc18290cdd634ab57e981afc3c93"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a5a99fc18290cdd634ab57e981afc3c93">trx_undo_get_prev_rec_from_prev_page</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *rec, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no, ulint offset, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> shared, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a5a99fc18290cdd634ab57e981afc3c93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the previous record in an undo log from the previous page.  <a href="#a5a99fc18290cdd634ab57e981afc3c93">More...</a><br /></td></tr>
<tr class="separator:a5a99fc18290cdd634ab57e981afc3c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07f8de1ab8faf28c0b1e676ca6686c8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a07f8de1ab8faf28c0b1e676ca6686c8b">trx_undo_get_prev_rec</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *rec, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no, ulint offset, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> shared, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a07f8de1ab8faf28c0b1e676ca6686c8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the previous record in an undo log.  <a href="#a07f8de1ab8faf28c0b1e676ca6686c8b">More...</a><br /></td></tr>
<tr class="separator:a07f8de1ab8faf28c0b1e676ca6686c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af56d18a42e135668f980a8648a7fc1c3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#af56d18a42e135668f980a8648a7fc1c3">trx_undo_get_next_rec_from_next_page</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no, ulint offset, ulint mode, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:af56d18a42e135668f980a8648a7fc1c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the next record in an undo log from the next page.  <a href="#af56d18a42e135668f980a8648a7fc1c3">More...</a><br /></td></tr>
<tr class="separator:af56d18a42e135668f980a8648a7fc1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6b0cc6da71acecc913dc8619c2bf1ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#aa6b0cc6da71acecc913dc8619c2bf1ff">trx_undo_get_next_rec</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *rec, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no, ulint offset, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:aa6b0cc6da71acecc913dc8619c2bf1ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the next record in an undo log.  <a href="#aa6b0cc6da71acecc913dc8619c2bf1ff">More...</a><br /></td></tr>
<tr class="separator:aa6b0cc6da71acecc913dc8619c2bf1ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0efdc7034cfaf28df8ad2b826ab68ca5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a0efdc7034cfaf28df8ad2b826ab68ca5">trx_undo_get_first_rec</a> (<a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *modifier_trx_id, <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no, ulint offset, ulint mode, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a0efdc7034cfaf28df8ad2b826ab68ca5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the first record in an undo log.  <a href="#a0efdc7034cfaf28df8ad2b826ab68ca5">More...</a><br /></td></tr>
<tr class="separator:a0efdc7034cfaf28df8ad2b826ab68ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a521acd9b10ee576aab76dcd9d361ae"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a4a521acd9b10ee576aab76dcd9d361ae">trx_undo_page_init_log</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, ulint type, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a4a521acd9b10ee576aab76dcd9d361ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the mtr log entry of an undo log page initialization.  <a href="#a4a521acd9b10ee576aab76dcd9d361ae">More...</a><br /></td></tr>
<tr class="separator:a4a521acd9b10ee576aab76dcd9d361ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c8f3e16e21731ea56e0497aaf5d2302"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a5c8f3e16e21731ea56e0497aaf5d2302">trx_undo_parse_page_init</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a5c8f3e16e21731ea56e0497aaf5d2302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the redo log entry of an undo log page initialization.  <a href="#a5c8f3e16e21731ea56e0497aaf5d2302">More...</a><br /></td></tr>
<tr class="separator:a5c8f3e16e21731ea56e0497aaf5d2302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a407b9b7038f87edda802671bac48dce1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a407b9b7038f87edda802671bac48dce1">trx_undo_seg_create</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg, <a class="el" href="trx0types_8h.html#a8bdb9d55e50652fb2ff0952e136d5aba">trx_rsegf_t</a> *rseg_hdr, ulint type, ulint *<a class="el" href="xcom__base_8cc.html#a7307f729d2752bdbe1d32d9fda65f30a">id</a>, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> **undo_page, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a407b9b7038f87edda802671bac48dce1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new undo log segment in file.  <a href="#a407b9b7038f87edda802671bac48dce1">More...</a><br /></td></tr>
<tr class="separator:a407b9b7038f87edda802671bac48dce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77aa0539d6218b711b36299ed0b20ba5"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a77aa0539d6218b711b36299ed0b20ba5">trx_undo_header_create_log</a> (const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a77aa0539d6218b711b36299ed0b20ba5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the mtr log entry of an undo log header initialization.  <a href="#a77aa0539d6218b711b36299ed0b20ba5">More...</a><br /></td></tr>
<tr class="separator:a77aa0539d6218b711b36299ed0b20ba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21398dc1c499c77f45298d4c4a29ff6"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#ab21398dc1c499c77f45298d4c4a29ff6">trx_undo_header_create</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ab21398dc1c499c77f45298d4c4a29ff6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new undo log header in file.  <a href="#ab21398dc1c499c77f45298d4c4a29ff6">More...</a><br /></td></tr>
<tr class="separator:ab21398dc1c499c77f45298d4c4a29ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ad661441731b0587c80be4f9382676"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#ae6ad661441731b0587c80be4f9382676">trx_undo_write_xid</a> (<a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *log_hdr, const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *xid, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ae6ad661441731b0587c80be4f9382676"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write X/Open XA Transaction Identification (XID) to undo log header.  <a href="#ae6ad661441731b0587c80be4f9382676">More...</a><br /></td></tr>
<tr class="separator:ae6ad661441731b0587c80be4f9382676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4904164174f613fd3742fca7b8491266"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a4904164174f613fd3742fca7b8491266">trx_undo_gtid_flush_prepare</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a4904164174f613fd3742fca7b8491266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write any previous GTIDs to disk.  <a href="#a4904164174f613fd3742fca7b8491266">More...</a><br /></td></tr>
<tr class="separator:a4904164174f613fd3742fca7b8491266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709ead64d1a58f7cbb8564eba985a0e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a709ead64d1a58f7cbb8564eba985a0e5">trx_undo_gtid_add_update_undo</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="xcom__base_8cc.html#ae59cfd3ffb63867637cd9aca530ec6fb">prepare</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="sql__cmd__srs_8cc.html#ae1f3a7aed6d381dcd98b265913716fd4">rollback</a>)</td></tr>
<tr class="memdesc:a709ead64d1a58f7cbb8564eba985a0e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">For saving GTID add update undo slot, if required.  <a href="#a709ead64d1a58f7cbb8564eba985a0e5">More...</a><br /></td></tr>
<tr class="separator:a709ead64d1a58f7cbb8564eba985a0e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4478cc9b951f1a1542d423815cfb6b26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a4478cc9b951f1a1542d423815cfb6b26">trx_undo_gtid_set</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo)</td></tr>
<tr class="memdesc:a4478cc9b951f1a1542d423815cfb6b26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set GTID flag in undo if transaction has GTID/.  <a href="#a4478cc9b951f1a1542d423815cfb6b26">More...</a><br /></td></tr>
<tr class="separator:a4478cc9b951f1a1542d423815cfb6b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aa1402ec4149407deceef0fceb90ced"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a7aa1402ec4149407deceef0fceb90ced">trx_undo_gtid_read_and_persist</a> (<a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *undo_header)</td></tr>
<tr class="memdesc:a7aa1402ec4149407deceef0fceb90ced"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and persist GTID from undo header during recovery.  <a href="#a7aa1402ec4149407deceef0fceb90ced">More...</a><br /></td></tr>
<tr class="separator:a7aa1402ec4149407deceef0fceb90ced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44765cc7f3e1ef14e3215d902ca5b181"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a44765cc7f3e1ef14e3215d902ca5b181">trx_undo_gtid_write</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *undo_header, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a44765cc7f3e1ef14e3215d902ca5b181"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write GTID information to undo log header.  <a href="#a44765cc7f3e1ef14e3215d902ca5b181">More...</a><br /></td></tr>
<tr class="separator:a44765cc7f3e1ef14e3215d902ca5b181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7569fd2fabd2f3a13f11ba4e4b27f3bb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a7569fd2fabd2f3a13f11ba4e4b27f3bb">trx_undo_read_xid</a> (<a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *log_hdr, <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *xid)</td></tr>
<tr class="memdesc:a7569fd2fabd2f3a13f11ba4e4b27f3bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read X/Open XA Transaction Identification (XID) from undo log header.  <a href="#a7569fd2fabd2f3a13f11ba4e4b27f3bb">More...</a><br /></td></tr>
<tr class="separator:a7569fd2fabd2f3a13f11ba4e4b27f3bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e5a5d516ab8efaadd4fd74603cf18a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a15e5a5d516ab8efaadd4fd74603cf18a">trx_undo_header_add_space_for_xid</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *log_hdr, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> add_gtid)</td></tr>
<tr class="memdesc:a15e5a5d516ab8efaadd4fd74603cf18a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds space for the XA XID after an undo log old-style header.  <a href="#a15e5a5d516ab8efaadd4fd74603cf18a">More...</a><br /></td></tr>
<tr class="separator:a15e5a5d516ab8efaadd4fd74603cf18a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac76ea0ce06e4a3a6327d7a1dadc9c50f"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#ac76ea0ce06e4a3a6327d7a1dadc9c50f">trx_undo_insert_header_reuse_log</a> (const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ac76ea0ce06e4a3a6327d7a1dadc9c50f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the mtr log entry of an undo log header reuse.  <a href="#ac76ea0ce06e4a3a6327d7a1dadc9c50f">More...</a><br /></td></tr>
<tr class="separator:ac76ea0ce06e4a3a6327d7a1dadc9c50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a676b69b6eb4edc717e170df954a7249f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a676b69b6eb4edc717e170df954a7249f">trx_undo_parse_page_header</a> (<a class="el" href="mtr0types_8h.html#a11a0f116bed9e1c33900d379901595d1">mlog_id_t</a> type, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a676b69b6eb4edc717e170df954a7249f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the redo log entry of an undo log page header create or reuse.  <a href="#a676b69b6eb4edc717e170df954a7249f">More...</a><br /></td></tr>
<tr class="separator:a676b69b6eb4edc717e170df954a7249f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa48dbdbc99a6e2448e999d63a3474b86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#aa48dbdbc99a6e2448e999d63a3474b86">trx_undo_add_page</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *undo_ptr, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:aa48dbdbc99a6e2448e999d63a3474b86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to add a page to the undo log segment where the undo log is placed.  <a href="#aa48dbdbc99a6e2448e999d63a3474b86">More...</a><br /></td></tr>
<tr class="separator:aa48dbdbc99a6e2448e999d63a3474b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c9299447f49af72462bed814000d20"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#ae3c9299447f49af72462bed814000d20">trx_undo_free_page</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg, ibool in_history, <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> hdr_page_no, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ae3c9299447f49af72462bed814000d20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees an undo log page that is not the header page.  <a href="#ae3c9299447f49af72462bed814000d20">More...</a><br /></td></tr>
<tr class="separator:ae3c9299447f49af72462bed814000d20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6fca708c095122afd8e0f7b2edf3b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#aed6fca708c095122afd8e0f7b2edf3b9">trx_undo_free_last_page_func</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:aed6fca708c095122afd8e0f7b2edf3b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the last undo log page.  <a href="#aed6fca708c095122afd8e0f7b2edf3b9">More...</a><br /></td></tr>
<tr class="separator:aed6fca708c095122afd8e0f7b2edf3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f8d5f5450a070e745df52af908010d0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a5f8d5f5450a070e745df52af908010d0">trx_undo_empty_header_page</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> hdr_page_no, ulint hdr_offset, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a5f8d5f5450a070e745df52af908010d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empties an undo log header page of undo records for that undo log.  <a href="#a5f8d5f5450a070e745df52af908010d0">More...</a><br /></td></tr>
<tr class="separator:a5f8d5f5450a070e745df52af908010d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aa8d31291025b089eafb4fa13e3a8bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a9aa8d31291025b089eafb4fa13e3a8bc">trx_undo_page_truncate_offset</a> (<a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit)</td></tr>
<tr class="memdesc:a9aa8d31291025b089eafb4fa13e3a8bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get page offset up to which undo logs can be truncated.  <a href="#a9aa8d31291025b089eafb4fa13e3a8bc">More...</a><br /></td></tr>
<tr class="separator:a9aa8d31291025b089eafb4fa13e3a8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac98cb19c93a1716dd808f1a4b5ac0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#adac98cb19c93a1716dd808f1a4b5ac0b">trx_undo_truncate_end_func</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit)</td></tr>
<tr class="memdesc:adac98cb19c93a1716dd808f1a4b5ac0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncates an undo log from the end.  <a href="#adac98cb19c93a1716dd808f1a4b5ac0b">More...</a><br /></td></tr>
<tr class="separator:adac98cb19c93a1716dd808f1a4b5ac0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc4d8f8dc577f8289b89ba6f9e9bd0bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#abc4d8f8dc577f8289b89ba6f9e9bd0bf">trx_undo_truncate_start</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> hdr_page_no, ulint hdr_offset, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> limit)</td></tr>
<tr class="memdesc:abc4d8f8dc577f8289b89ba6f9e9bd0bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate the head of an undo log.  <a href="#abc4d8f8dc577f8289b89ba6f9e9bd0bf">More...</a><br /></td></tr>
<tr class="separator:abc4d8f8dc577f8289b89ba6f9e9bd0bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9db7c3da541db993e256391d59d9f977"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a9db7c3da541db993e256391d59d9f977">trx_undo_seg_free</a> (const <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> noredo)</td></tr>
<tr class="memdesc:a9db7c3da541db993e256391d59d9f977"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees an undo log segment which is not in the history list.  <a href="#a9db7c3da541db993e256391d59d9f977">More...</a><br /></td></tr>
<tr class="separator:a9db7c3da541db993e256391d59d9f977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae93e2185293da26e03c93a24b810124b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#ae93e2185293da26e03c93a24b810124b">trx_undo_mem_init</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg, ulint <a class="el" href="xcom__base_8cc.html#a7307f729d2752bdbe1d32d9fda65f30a">id</a>, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ae93e2185293da26e03c93a24b810124b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and initializes an undo log memory object for a newly created rseg.  <a href="#ae93e2185293da26e03c93a24b810124b">More...</a><br /></td></tr>
<tr class="separator:ae93e2185293da26e03c93a24b810124b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc016181eb351d124de9ae2e48690ed"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a7dc016181eb351d124de9ae2e48690ed">trx_undo_lists_init</a> (<a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg)</td></tr>
<tr class="memdesc:a7dc016181eb351d124de9ae2e48690ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the undo log lists for a rollback segment memory copy.  <a href="#a7dc016181eb351d124de9ae2e48690ed">More...</a><br /></td></tr>
<tr class="separator:a7dc016181eb351d124de9ae2e48690ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77bacf3f2550986d341c6c63ae08b85d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a77bacf3f2550986d341c6c63ae08b85d">trx_undo_mem_init_for_reuse</a> (<a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *xid, ulint offset)</td></tr>
<tr class="memdesc:a77bacf3f2550986d341c6c63ae08b85d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a cached undo log object for new use.  <a href="#a77bacf3f2550986d341c6c63ae08b85d">More...</a><br /></td></tr>
<tr class="separator:a77bacf3f2550986d341c6c63ae08b85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d814de5175af1f4c7db624fe3b6f14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#af0d814de5175af1f4c7db624fe3b6f14">trx_undo_mem_free</a> (<a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo)</td></tr>
<tr class="memdesc:af0d814de5175af1f4c7db624fe3b6f14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees an undo log memory copy.  <a href="#af0d814de5175af1f4c7db624fe3b6f14">More...</a><br /></td></tr>
<tr class="separator:af0d814de5175af1f4c7db624fe3b6f14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd7657b6e2331f021ecc69327a0f465b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#abd7657b6e2331f021ecc69327a0f465b">trx_undo_create</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg, ulint type, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *xid, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_gtid, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> **undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:abd7657b6e2331f021ecc69327a0f465b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new undo log in the given rollback segment.  <a href="#abd7657b6e2331f021ecc69327a0f465b">More...</a><br /></td></tr>
<tr class="separator:abd7657b6e2331f021ecc69327a0f465b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46fdffbd03ee775eaec89e9a130221bc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a46fdffbd03ee775eaec89e9a130221bc">trx_undo_reuse_cached</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *rseg, ulint type, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *xid, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_gtid, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a46fdffbd03ee775eaec89e9a130221bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reuses a cached undo log.  <a href="#a46fdffbd03ee775eaec89e9a130221bc">More...</a><br /></td></tr>
<tr class="separator:a46fdffbd03ee775eaec89e9a130221bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac45b9f31d784634aa16dd920f76ceb1c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#ac45b9f31d784634aa16dd920f76ceb1c">trx_undo_mark_as_dict_operation</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ac45b9f31d784634aa16dd920f76ceb1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks an undo log header as a header of a data dictionary operation transaction.  <a href="#ac45b9f31d784634aa16dd920f76ceb1c">More...</a><br /></td></tr>
<tr class="separator:ac45b9f31d784634aa16dd920f76ceb1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf6122e2f1a1b66d8f4098566c0cea5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#aaf6122e2f1a1b66d8f4098566c0cea5d">trx_undo_assign_undo</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *undo_ptr, ulint type)</td></tr>
<tr class="memdesc:aaf6122e2f1a1b66d8f4098566c0cea5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns an undo log for a transaction.  <a href="#aaf6122e2f1a1b66d8f4098566c0cea5d">More...</a><br /></td></tr>
<tr class="separator:aaf6122e2f1a1b66d8f4098566c0cea5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff740afe5e5ab8f920dc5d4ecd0d06a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#aff740afe5e5ab8f920dc5d4ecd0d06a4">trx_undo_set_state_at_finish</a> (<a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:aff740afe5e5ab8f920dc5d4ecd0d06a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the state of the undo log segment at a transaction finish.  <a href="#aff740afe5e5ab8f920dc5d4ecd0d06a4">More...</a><br /></td></tr>
<tr class="separator:aff740afe5e5ab8f920dc5d4ecd0d06a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae998dd3eefe1c2b7b411324b7677eaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#aae998dd3eefe1c2b7b411324b7677eaf">trx_undo_set_state_at_prepare</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *undo, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="sql__cmd__srs_8cc.html#ae1f3a7aed6d381dcd98b265913716fd4">rollback</a>, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:aae998dd3eefe1c2b7b411324b7677eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the state of the undo log segment at a XA PREPARE or XA ROLLBACK.  <a href="#aae998dd3eefe1c2b7b411324b7677eaf">More...</a><br /></td></tr>
<tr class="separator:aae998dd3eefe1c2b7b411324b7677eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a13e9d79998ebeb63174e5efab7cf9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a3a13e9d79998ebeb63174e5efab7cf9e">trx_undo_update_cleanup</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *undo_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> update_rseg_history_len, ulint n_added_logs, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a3a13e9d79998ebeb63174e5efab7cf9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the update undo log header as the first in the history list, and frees the memory object, or puts it to the list of cached update undo log segments.  <a href="#a3a13e9d79998ebeb63174e5efab7cf9e">More...</a><br /></td></tr>
<tr class="separator:a3a13e9d79998ebeb63174e5efab7cf9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f07d8a94d3c532561ad788123d3b54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a91f07d8a94d3c532561ad788123d3b54">trx_undo_insert_cleanup</a> (<a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *undo_ptr, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> noredo)</td></tr>
<tr class="memdesc:a91f07d8a94d3c532561ad788123d3b54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees an insert undo log after a transaction commit or rollback.  <a href="#a91f07d8a94d3c532561ad788123d3b54">More...</a><br /></td></tr>
<tr class="separator:a91f07d8a94d3c532561ad788123d3b54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af79d922ad3c92e02578a0ef22002a505"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#af79d922ad3c92e02578a0ef22002a505">trx_undo_free_trx_with_prepared_or_active_logs</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, ulint expected_undo_state)</td></tr>
<tr class="memdesc:af79d922ad3c92e02578a0ef22002a505"><td class="mdescLeft">&#160;</td><td class="mdescRight">At shutdown, frees the undo logs of a transaction which was either PREPARED or (ACTIVE and recovered).  <a href="#af79d922ad3c92e02578a0ef22002a505">More...</a><br /></td></tr>
<tr class="separator:af79d922ad3c92e02578a0ef22002a505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779c2b358e8d65f9ec13f5939f537e78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0undo_8cc.html#a779c2b358e8d65f9ec13f5939f537e78">trx_undo_truncate_tablespace</a> (<a class="el" href="structundo_1_1Tablespace.html">undo::Tablespace</a> *marked_space)</td></tr>
<tr class="memdesc:a779c2b358e8d65f9ec13f5939f537e78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate UNDO tablespace, reinitialize header and rseg.  <a href="#a779c2b358e8d65f9ec13f5939f537e78">More...</a><br /></td></tr>
<tr class="separator:a779c2b358e8d65f9ec13f5939f537e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transaction undo log. </p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa48dbdbc99a6e2448e999d63a3474b86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa48dbdbc99a6e2448e999d63a3474b86">&#9670;&nbsp;</a></span>trx_undo_add_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbuf__block__t.html">buf_block_t</a>* trx_undo_add_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>undo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to add a page to the undo log segment where the undo log is placed. </p>
<dl class="section return"><dt>Returns</dt><dd>X-latched block if success, else NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo</td><td>in: undo log memory object </td></tr>
    <tr><td class="paramname">undo_ptr</td><td>in: assign undo log from referred rollback segment. </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr which does not have a latch to any undo log page; the caller must have reserved the rollback segment mutex </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf6122e2f1a1b66d8f4098566c0cea5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf6122e2f1a1b66d8f4098566c0cea5d">&#9670;&nbsp;</a></span>trx_undo_assign_undo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_undo_assign_undo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>undo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assigns an undo log for a transaction. </p>
<p>A new undo log is created or a cached undo log reused. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if undo log assign successful, possible error codes are: DB_TOO_MANY_CONCURRENT_TRXS DB_OUT_OF_FILE_SPACE DB_READ_ONLY DB_OUT_OF_MEMORY </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo_ptr</td><td>in: assign undo log from referred rollback segment. </td></tr>
    <tr><td class="paramname">type</td><td>in: TRX_UNDO_INSERT or TRX_UNDO_UPDATE </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abd7657b6e2331f021ecc69327a0f465b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd7657b6e2331f021ecc69327a0f465b">&#9670;&nbsp;</a></span>trx_undo_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_undo_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_gtid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> **&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new undo log in the given rollback segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rseg</td><td>rollback segment memory copy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>type of the log: TRX_UNDO_INSERT or TRX_UNDO_UPDATE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trx_id</td><td>id of the trx for which the undo log is created </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xid</td><td>X/Open transaction identification </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_gtid</td><td>if transaction has GTID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">undo</td><td>the new undo log object, undefined if did not succeed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mtr</td><td>mini-transation </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DB_SUCCESS</td><td>if successful in creating the new undo lob object, </td></tr>
    <tr><td class="paramname">DB_TOO_MANY_CONCURRENT_TRXS</td><td></td></tr>
    <tr><td class="paramname">DB_OUT_OF_FILE_SPACE</td><td></td></tr>
    <tr><td class="paramname">DB_OUT_OF_MEMORY</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5f8d5f5450a070e745df52af908010d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f8d5f5450a070e745df52af908010d0">&#9670;&nbsp;</a></span>trx_undo_empty_header_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_empty_header_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>hdr_page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>hdr_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Empties an undo log header page of undo records for that undo log. </p>
<p>Other undo logs may still have records on that page, if it is an update undo log. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>Page size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hdr_page_no</td><td>Header page number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hdr_offset</td><td>Header offset </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aed6fca708c095122afd8e0f7b2edf3b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed6fca708c095122afd8e0f7b2edf3b9">&#9670;&nbsp;</a></span>trx_undo_free_last_page_func()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_free_last_page_func </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the last undo log page. </p>
<p>The caller must hold the rollback segment mutex. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">undo</td><td>in/out: undo log memory copy </td></tr>
    <tr><td class="paramname">mtr</td><td>in/out: mini-transaction which does not have a latch to any undo log page or which has allocated the undo log page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae3c9299447f49af72462bed814000d20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3c9299447f49af72462bed814000d20">&#9670;&nbsp;</a></span>trx_undo_free_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> trx_undo_free_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>in_history</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>hdr_page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees an undo log page that is not the header page. </p>
<dl class="section return"><dt>Returns</dt><dd>last page number in remaining log </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rseg</td><td>in: rollback segment </td></tr>
    <tr><td class="paramname">in_history</td><td>in: TRUE if the undo log is in the history list </td></tr>
    <tr><td class="paramname">space</td><td>in: space </td></tr>
    <tr><td class="paramname">hdr_page_no</td><td>in: header page number </td></tr>
    <tr><td class="paramname">page_no</td><td>in: page number to free: must not be the header page </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr which does not have a latch to any undo log page; the caller must have reserved the rollback segment mutex </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af79d922ad3c92e02578a0ef22002a505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af79d922ad3c92e02578a0ef22002a505">&#9670;&nbsp;</a></span>trx_undo_free_trx_with_prepared_or_active_logs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_free_trx_with_prepared_or_active_logs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>expected_undo_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>At shutdown, frees the undo logs of a transaction which was either PREPARED or (ACTIVE and recovered). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transation which undo logs are freed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">expected_undo_state</td><td>expected state of undo logs </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0efdc7034cfaf28df8ad2b826ab68ca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0efdc7034cfaf28df8ad2b826ab68ca5">&#9670;&nbsp;</a></span>trx_undo_get_first_rec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_first_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *&#160;</td>
          <td class="paramname"><em>modifier_trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the first record in an undo log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">modifier_trx_id</td><td>The modifier trx identifier. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Undo log header space </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>Page size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_no</td><td>Undo log header page number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Undo log header offset on page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Latching mode: RW_S_LATCH or RW_X_LATCH </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>undo log record, the page latched, NULL if none </dd></dl>

</div>
</div>
<a id="aa6b0cc6da71acecc913dc8619c2bf1ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6b0cc6da71acecc913dc8619c2bf1ff">&#9670;&nbsp;</a></span>trx_undo_get_next_rec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_next_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the next record in an undo log. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record, the page s-latched, NULL if none </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: undo record </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af56d18a42e135668f980a8648a7fc1c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af56d18a42e135668f980a8648a7fc1c3">&#9670;&nbsp;</a></span>trx_undo_get_next_rec_from_next_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_next_rec_from_next_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the next record in an undo log from the next page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Undo log header space </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>Page size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_page</td><td>Undo log page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_no</td><td>Undo log header page number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Undo log header offset on page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Latch mode: RW_S_LATCH or RW_X_LATCH </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>undo log record, the page latched, NULL if none </dd></dl>

</div>
</div>
<a id="a07f8de1ab8faf28c0b1e676ca6686c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07f8de1ab8faf28c0b1e676ca6686c8b">&#9670;&nbsp;</a></span>trx_undo_get_prev_rec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_prev_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>shared</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the previous record in an undo log. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record, the page s-latched, NULL if none </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: undo record </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
    <tr><td class="paramname">shared</td><td>in: true=S-latch, false=X-latch </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5a99fc18290cdd634ab57e981afc3c93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a99fc18290cdd634ab57e981afc3c93">&#9670;&nbsp;</a></span>trx_undo_get_prev_rec_from_prev_page()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_prev_rec_from_prev_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>shared</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the previous record in an undo log from the previous page. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log record, the page s-latched, NULL if none </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: undo record </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log header page number </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header offset on page </td></tr>
    <tr><td class="paramname">shared</td><td>in: true=S-latch, false=X-latch </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a709ead64d1a58f7cbb8564eba985a0e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a709ead64d1a58f7cbb8564eba985a0e5">&#9670;&nbsp;</a></span>trx_undo_gtid_add_update_undo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_undo_gtid_add_update_undo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>prepare</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>rollback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For saving GTID add update undo slot, if required. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prepare</td><td>operation is prepare </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rollback</td><td>operation is rollback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>innodb error code. </dd></dl>

</div>
</div>
<a id="a4904164174f613fd3742fca7b8491266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4904164174f613fd3742fca7b8491266">&#9670;&nbsp;</a></span>trx_undo_gtid_flush_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_gtid_flush_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write any previous GTIDs to disk. </p>
<p>Used for external XA Commit and Rollback to write XA prepare GTID to disk table before updating undo log GTID with commit/rollback GTID. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7aa1402ec4149407deceef0fceb90ced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aa1402ec4149407deceef0fceb90ced">&#9670;&nbsp;</a></span>trx_undo_gtid_read_and_persist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_gtid_read_and_persist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *&#160;</td>
          <td class="paramname"><em>undo_log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and persist GTID from undo header during recovery. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_log</td><td>undo log header </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4478cc9b951f1a1542d423815cfb6b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4478cc9b951f1a1542d423815cfb6b26">&#9670;&nbsp;</a></span>trx_undo_gtid_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_gtid_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set GTID flag in undo if transaction has GTID/. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>transaction </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">undo</td><td>undo log memory object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a44765cc7f3e1ef14e3215d902ca5b181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44765cc7f3e1ef14e3215d902ca5b181">&#9670;&nbsp;</a></span>trx_undo_gtid_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_gtid_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *&#160;</td>
          <td class="paramname"><em>undo_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write GTID information to undo log header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>transaction </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">undo_header</td><td>undo log header </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">undo</td><td>undo log memory object </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>minit transaction for write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a15e5a5d516ab8efaadd4fd74603cf18a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e5a5d516ab8efaadd4fd74603cf18a">&#9670;&nbsp;</a></span>trx_undo_header_add_space_for_xid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_header_add_space_for_xid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *&#160;</td>
          <td class="paramname"><em>log_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>add_gtid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds space for the XA XID after an undo log old-style header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">undo_page</td><td>Undo log segment header page </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log_hdr</td><td>Undo log header </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">add_gtid</td><td>Add space for GTID </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab21398dc1c499c77f45298d4c4a29ff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab21398dc1c499c77f45298d4c4a29ff6">&#9670;&nbsp;</a></span>trx_undo_header_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint trx_undo_header_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new undo log header in file. </p>
<p>NOTE that this function has its own log record type MLOG_UNDO_HDR_CREATE. You must NOT change the operation of this function! </p><dl class="section return"><dt>Returns</dt><dd>header byte offset on page </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in/out: undo log segment header page, x-latched; it is assumed that there is TRX_UNDO_LOG_HDR_SIZE bytes free space on it </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction id </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a77aa0539d6218b711b36299ed0b20ba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77aa0539d6218b711b36299ed0b20ba5">&#9670;&nbsp;</a></span>trx_undo_header_create_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void trx_undo_header_create_log </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the mtr log entry of an undo log header initialization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log header page </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction id </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a91f07d8a94d3c532561ad788123d3b54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f07d8a94d3c532561ad788123d3b54">&#9670;&nbsp;</a></span>trx_undo_insert_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_insert_cleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>undo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>noredo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees an insert undo log after a transaction commit or rollback. </p>
<p>Knowledge of inserts is not needed after a commit or rollback, therefore the data can be discarded. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">undo_ptr</td><td>undo log to clean up </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">noredo</td><td>whether the undo tablespace is redo logged </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aca8f72b00bd0e6adfa7c0c05e8a379c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca8f72b00bd0e6adfa7c0c05e8a379c7">&#9670;&nbsp;</a></span>trx_undo_insert_header_reuse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint trx_undo_insert_header_reuse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a cached insert undo log header page for new use. </p>
<p>NOTE that this function has its own log record type MLOG_UNDO_HDR_REUSE. You must NOT change the operation of this function! </p><dl class="section return"><dt>Returns</dt><dd>undo log header byte offset on page in: mtr</dd></dl>
<p>NOTE that this function has its own log record type MLOG_UNDO_HDR_REUSE. You must NOT change the operation of this function! </p><dl class="section return"><dt>Returns</dt><dd>undo log header byte offset on page </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in/out: insert undo log segment header page, x-latched </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction id </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac76ea0ce06e4a3a6327d7a1dadc9c50f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac76ea0ce06e4a3a6327d7a1dadc9c50f">&#9670;&nbsp;</a></span>trx_undo_insert_header_reuse_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void trx_undo_insert_header_reuse_log </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the mtr log entry of an undo log header reuse. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log header page </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction id </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7dc016181eb351d124de9ae2e48690ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dc016181eb351d124de9ae2e48690ed">&#9670;&nbsp;</a></span>trx_undo_lists_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint trx_undo_lists_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the undo log lists for a rollback segment memory copy. </p>
<p>This function is only called when the database is started or a new rollback segment is created. </p><dl class="section return"><dt>Returns</dt><dd>the combined size of undo log segments in pages </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rseg</td><td>in: rollback segment memory object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac45b9f31d784634aa16dd920f76ceb1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac45b9f31d784634aa16dd920f76ceb1c">&#9670;&nbsp;</a></span>trx_undo_mark_as_dict_operation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_mark_as_dict_operation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks an undo log header as a header of a data dictionary operation transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: dict op transaction </td></tr>
    <tr><td class="paramname">undo</td><td>in: assigned undo log </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aefad99186cce3365dd9b886f13df85b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefad99186cce3365dd9b886f13df85b6">&#9670;&nbsp;</a></span>trx_undo_mem_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> * trx_undo_mem_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates and initializes an undo log memory object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rseg</td><td>rollback segment memory object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>slot index within rseg </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>type of the log: TRX_UNDO_INSERT or TRX_UNDO_UPDATE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trx_id</td><td>id of the trx for which the undo log is created </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xid</td><td>X/Open XA transaction identification </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_no</td><td>undo log header page number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>undo log header byte offset on page </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>own: the undo log memory object </dd></dl>

</div>
</div>
<a id="af0d814de5175af1f4c7db624fe3b6f14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d814de5175af1f4c7db624fe3b6f14">&#9670;&nbsp;</a></span>trx_undo_mem_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_mem_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees an undo log memory copy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo</td><td>in: the undo object to be freed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae93e2185293da26e03c93a24b810124b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae93e2185293da26e03c93a24b810124b">&#9670;&nbsp;</a></span>trx_undo_mem_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structtrx__undo__t.html">trx_undo_t</a>* trx_undo_mem_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates and initializes an undo log memory object for a newly created rseg. </p>
<p>The memory object is inserted in the appropriate list in the rseg. </p><dl class="section return"><dt>Returns</dt><dd>own: the undo log memory object </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rseg</td><td>in: rollback segment memory object </td></tr>
    <tr><td class="paramname">id</td><td>in: slot index within rseg </td></tr>
    <tr><td class="paramname">page_no</td><td>in: undo log segment page number </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a77bacf3f2550986d341c6c63ae08b85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77bacf3f2550986d341c6c63ae08b85d">&#9670;&nbsp;</a></span>trx_undo_mem_init_for_reuse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_mem_init_for_reuse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a cached undo log object for new use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo</td><td>in: undo log to init </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: id of the trx for which the undo log is created </td></tr>
    <tr><td class="paramname">xid</td><td>in: X/Open XA transaction identification </td></tr>
    <tr><td class="paramname">offset</td><td>in: undo log header byte offset on page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4aae2819a4ffcdcb6c3a088f61b24260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aae2819a4ffcdcb6c3a088f61b24260">&#9670;&nbsp;</a></span>trx_undo_page_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_page_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the fields in an undo log segment page. </p>
<p>in: mtr</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log segment page </td></tr>
    <tr><td class="paramname">type</td><td>in: undo log segment type </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4a521acd9b10ee576aab76dcd9d361ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a521acd9b10ee576aab76dcd9d361ae">&#9670;&nbsp;</a></span>trx_undo_page_init_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void trx_undo_page_init_log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the mtr log entry of an undo log page initialization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log page </td></tr>
    <tr><td class="paramname">type</td><td>in: undo log type </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9aa8d31291025b089eafb4fa13e3a8bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aa8d31291025b089eafb4fa13e3a8bc">&#9670;&nbsp;</a></span>trx_undo_page_truncate_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trx_undo_page_truncate_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get page offset up to which undo logs can be truncated. </p>
<p>There are three possibilities.</p><ol type="1">
<li>Truncate nothing on this page. Return -1</li>
<li>Truncate part of the page. Return the offset</li>
<li>Truncate the whole page. Return 0 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo</td><td>undo log to truncate </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_page</td><td>undo log page to check </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">limit</td><td>limit up to which undo logs to be truncated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>page offset to truncate to, 0 for whole page, -1 for nothing. </dd></dl>
</li>
</ol>

</div>
</div>
<a id="a676b69b6eb4edc717e170df954a7249f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a676b69b6eb4edc717e170df954a7249f">&#9670;&nbsp;</a></span>trx_undo_parse_page_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_parse_page_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mtr0types_8h.html#a11a0f116bed9e1c33900d379901595d1">mlog_id_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the redo log entry of an undo log page header create or reuse. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>MLOG_UNDO_HDR_CREATE or MLOG_UNDO_HDR_REUSE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>Redo log record </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">end_ptr</td><td>End of log buffer </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">page</td><td>Page frame or NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>Mini-transaction or NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL </dd></dl>

</div>
</div>
<a id="a5c8f3e16e21731ea56e0497aaf5d2302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c8f3e16e21731ea56e0497aaf5d2302">&#9670;&nbsp;</a></span>trx_undo_parse_page_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_parse_page_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses the redo log entry of an undo log page initialization. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7569fd2fabd2f3a13f11ba4e4b27f3bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7569fd2fabd2f3a13f11ba4e4b27f3bb">&#9670;&nbsp;</a></span>trx_undo_read_xid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_read_xid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *&#160;</td>
          <td class="paramname"><em>log_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *&#160;</td>
          <td class="paramname"><em>xid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read X/Open XA Transaction Identification (XID) from undo log header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log_hdr</td><td>in: undo log header </td></tr>
    <tr><td class="paramname">xid</td><td>out: X/Open XA Transaction Identification </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a46fdffbd03ee775eaec89e9a130221bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46fdffbd03ee775eaec89e9a130221bc">&#9670;&nbsp;</a></span>trx_undo_reuse_cached()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structtrx__undo__t.html">trx_undo_t</a>* trx_undo_reuse_cached </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_gtid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reuses a cached undo log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>Transaction </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">rseg</td><td>Rollback segment memory object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>Type of the log: TRX_UNDO_INSERT or TRX_UNDO_UPDATE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trx_id</td><td>Id of the trx for which the undo log is used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xid</td><td>X/Open XA transaction identification </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_gtid</td><td>If transaction has GTID </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the undo log memory object, NULL if none cached </dd></dl>

</div>
</div>
<a id="a407b9b7038f87edda802671bac48dce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a407b9b7038f87edda802671bac48dce1">&#9670;&nbsp;</a></span>trx_undo_seg_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_undo_seg_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a8bdb9d55e50652fb2ff0952e136d5aba">trx_rsegf_t</a> *&#160;</td>
          <td class="paramname"><em>rseg_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> **&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new undo log segment in file. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if page creation OK possible error codes are: DB_TOO_MANY_CONCURRENT_TRXS DB_OUT_OF_FILE_SPACE </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rseg</td><td>in: rollback segment </td></tr>
    <tr><td class="paramname">rseg_hdr</td><td>in: rollback segment header, page x-latched </td></tr>
    <tr><td class="paramname">type</td><td>in: type of the segment: TRX_UNDO_INSERT or TRX_UNDO_UPDATE </td></tr>
    <tr><td class="paramname">id</td><td>out: slot index within rseg header </td></tr>
    <tr><td class="paramname">undo_page</td><td>out: segment header page x-latched, NULL if there was an error </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9db7c3da541db993e256391d59d9f977"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9db7c3da541db993e256391d59d9f977">&#9670;&nbsp;</a></span>trx_undo_seg_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_seg_free </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>noredo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees an undo log segment which is not in the history list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo</td><td>undo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">noredo</td><td>whether the undo tablespace is redo logged </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff740afe5e5ab8f920dc5d4ecd0d06a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff740afe5e5ab8f920dc5d4ecd0d06a4">&#9670;&nbsp;</a></span>trx_undo_set_state_at_finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a>* trx_undo_set_state_at_finish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the state of the undo log segment at a transaction finish. </p>
<dl class="section return"><dt>Returns</dt><dd>undo log segment header page, x-latched </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo</td><td>in: undo log memory copy </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aae998dd3eefe1c2b7b411324b7677eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae998dd3eefe1c2b7b411324b7677eaf">&#9670;&nbsp;</a></span>trx_undo_set_state_at_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a>* trx_undo_set_state_at_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>rollback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the state of the undo log segment at a XA PREPARE or XA ROLLBACK. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>Transaction </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">undo</td><td>Insert_undo or update_undo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rollback</td><td>false=XA PREPARE, true=XA ROLLBACK </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>undo log segment header page, x-latched </dd></dl>

</div>
</div>
<a id="adac98cb19c93a1716dd808f1a4b5ac0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adac98cb19c93a1716dd808f1a4b5ac0b">&#9670;&nbsp;</a></span>trx_undo_truncate_end_func()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_truncate_end_func </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__t.html">trx_undo_t</a> *&#160;</td>
          <td class="paramname"><em>undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncates an undo log from the end. </p>
<p>This function is used during a rollback to free space from an undo log. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction for this undo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">undo</td><td>undo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">limit</td><td>all undo records with undo number; This value should be truncated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abc4d8f8dc577f8289b89ba6f9e9bd0bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc4d8f8dc577f8289b89ba6f9e9bd0bf">&#9670;&nbsp;</a></span>trx_undo_truncate_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_truncate_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__rseg__t.html">trx_rseg_t</a> *&#160;</td>
          <td class="paramname"><em>rseg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>hdr_page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>hdr_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncate the head of an undo log. </p>
<p>NOTE that only whole pages are freed; the header page is not freed, but emptied, if all the records there are below the limit. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">rseg</td><td>rollback segment </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hdr_page_no</td><td>header page number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hdr_offset</td><td>header offset on the page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">limit</td><td>first undo number to preserve (everything below the limit will be truncated) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a779c2b358e8d65f9ec13f5939f537e78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779c2b358e8d65f9ec13f5939f537e78">&#9670;&nbsp;</a></span>trx_undo_truncate_tablespace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trx_undo_truncate_tablespace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo_1_1Tablespace.html">undo::Tablespace</a> *&#160;</td>
          <td class="paramname"><em>marked_space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncate UNDO tablespace, reinitialize header and rseg. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">marked_space</td><td>UNDO tablespace to truncate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if success else false. </dd></dl>

</div>
</div>
<a id="a3a13e9d79998ebeb63174e5efab7cf9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a13e9d79998ebeb63174e5efab7cf9e">&#9670;&nbsp;</a></span>trx_undo_update_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_update_cleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__undo__ptr__t.html">trx_undo_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>undo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>update_rseg_history_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_added_logs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the update undo log header as the first in the history list, and frees the memory object, or puts it to the list of cached update undo log segments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>Trx owning the update undo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_ptr</td><td>Update undo log. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_page</td><td>Update undo log header page, x-latched </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">update_rseg_history_len</td><td>If true: update rseg history len else skip updating it. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_added_logs</td><td>Number of logs added </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6ad661441731b0587c80be4f9382676"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ad661441731b0587c80be4f9382676">&#9670;&nbsp;</a></span>trx_undo_write_xid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_write_xid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a64150d81cbf5eba60e4a902c2c8d7a1a">trx_ulogf_t</a> *&#160;</td>
          <td class="paramname"><em>log_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="sql_2handler_8h.html#a84daadfc567e8184153aac6eb9e0b822">XID</a> *&#160;</td>
          <td class="paramname"><em>xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write X/Open XA Transaction Identification (XID) to undo log header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log_hdr</td><td>in: undo log header </td></tr>
    <tr><td class="paramname">xid</td><td>in: X/Open XA Transaction Identification </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_7d6b8692e14baa729600e27a3e4f8b7c.html">trx</a></li><li class="navelem"><a class="el" href="trx0undo_8cc.html">trx0undo.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
