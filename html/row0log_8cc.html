<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/row/row0log.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('row0log_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">row0log.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Modification log for online index creation and online table rebuild.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="row0log_8h_source.html">row0log.h</a>&quot;</code><br />
<code>#include &quot;my_config.h&quot;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &quot;<a class="el" href="data0data_8h_source.html">data0data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="handler0alter_8h_source.html">handler0alter.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lob0lob_8h_source.html">lob0lob.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0que_8h_source.html">que0que.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0ext_8h_source.html">row0ext.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0ins_8h_source.html">row0ins.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0merge_8h_source.html">row0merge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0row_8h_source.html">row0row.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0upd_8h_source.html">row0upd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0mon_8h_source.html">srv0mon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rec_8h_source.html">trx0rec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0new_8h_source.html">ut0new.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0stage_8h_source.html">ut0stage.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrow__log__buf__t.html">row_log_buf_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log block for modifications during online ALTER TABLE.  <a href="structrow__log__buf__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrow__log__table__blob__t.html">row_log_table_blob_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tracks BLOB allocation during online ALTER TABLE.  <a href="classrow__log__table__blob__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrow__log__t.html">row_log_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer for logging modifications during online index creation.  <a href="structrow__log__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afd6f1557fde01b3cb3f86976454e8101"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#afd6f1557fde01b3cb3f86976454e8101">ROW_LOG_HEADER_SIZE</a>&#160;&#160;&#160;2 /*op, extra_size*/</td></tr>
<tr class="memdesc:afd6f1557fde01b3cb3f86976454e8101"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the modification log entry header, in bytes.  <a href="#afd6f1557fde01b3cb3f86976454e8101">More...</a><br /></td></tr>
<tr class="separator:afd6f1557fde01b3cb3f86976454e8101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464b2c9a9514a5e8f2e19c4abd7307f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a464b2c9a9514a5e8f2e19c4abd7307f7">row_log_table_close</a>(log,  b,  size,  avail)&#160;&#160;&#160;<a class="el" href="row0log_8cc.html#aa443e5f447b160024b631077b3d1006f">row_log_table_close_func</a>(log, b, size, avail)</td></tr>
<tr class="separator:a464b2c9a9514a5e8f2e19c4abd7307f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ad503bec33fefe15275afe2b631a652c5"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>, <a class="el" href="classrow__log__table__blob__t.html">row_log_table_blob_t</a>, std::less&lt; <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> &gt;, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt; std::pair&lt; const <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>, <a class="el" href="classrow__log__table__blob__t.html">row_log_table_blob_t</a> &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ad503bec33fefe15275afe2b631a652c5">page_no_map</a></td></tr>
<tr class="memdesc:ad503bec33fefe15275afe2b631a652c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of off-page column page numbers to 0 or log byte offsets.  <a href="#ad503bec33fefe15275afe2b631a652c5">More...</a><br /></td></tr>
<tr class="separator:ad503bec33fefe15275afe2b631a652c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ab86593aa77c3e8a48ae3e29639c81e8a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ab86593aa77c3e8a48ae3e29639c81e8a">row_tab_op</a> { <a class="el" href="row0log_8cc.html#ab86593aa77c3e8a48ae3e29639c81e8aac420f569df73ac16c0b7182317f3c5d2">ROW_T_INSERT</a> = 0x41, 
<a class="el" href="row0log_8cc.html#ab86593aa77c3e8a48ae3e29639c81e8aa4df993ff1e283ca37aa624a932ce3d7b">ROW_T_UPDATE</a>, 
<a class="el" href="row0log_8cc.html#ab86593aa77c3e8a48ae3e29639c81e8aaf0e97b05dab49614ddd88d1ee6bce11e">ROW_T_DELETE</a>
 }<tr class="memdesc:ab86593aa77c3e8a48ae3e29639c81e8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Table row modification operations during online table rebuild.  <a href="row0log_8cc.html#ab86593aa77c3e8a48ae3e29639c81e8a">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ab86593aa77c3e8a48ae3e29639c81e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10708fa66d6dac0de8bf010c1eafa4c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ad10708fa66d6dac0de8bf010c1eafa4c">row_op</a> { <a class="el" href="row0log_8cc.html#ad10708fa66d6dac0de8bf010c1eafa4ca77824c8da9fe3ec42d63db23f40d06e6">ROW_OP_INSERT</a> = 0x61, 
<a class="el" href="row0log_8cc.html#ad10708fa66d6dac0de8bf010c1eafa4ca24a40a74f927752aab5e23a3d2e0dcf1">ROW_OP_DELETE</a>
 }<tr class="memdesc:ad10708fa66d6dac0de8bf010c1eafa4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index record modification operations during online index creation.  <a href="row0log_8cc.html#ad10708fa66d6dac0de8bf010c1eafa4c">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ad10708fa66d6dac0de8bf010c1eafa4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac079c8072ad98bf1610950b9451b2dc3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ac079c8072ad98bf1610950b9451b2dc3">row_log_tmpfile</a> (<a class="el" href="structrow__log__t.html">row_log_t</a> *log)</td></tr>
<tr class="memdesc:ac079c8072ad98bf1610950b9451b2dc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the file or online log if it does not exist.  <a href="#ac079c8072ad98bf1610950b9451b2dc3">More...</a><br /></td></tr>
<tr class="separator:ac079c8072ad98bf1610950b9451b2dc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abefe81979c7f200d91348cbc44082f37"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#abefe81979c7f200d91348cbc44082f37">row_log_block_allocate</a> (<a class="el" href="structrow__log__buf__t.html">row_log_buf_t</a> &amp;log_buf)</td></tr>
<tr class="memdesc:abefe81979c7f200d91348cbc44082f37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the memory for the log buffer.  <a href="#abefe81979c7f200d91348cbc44082f37">More...</a><br /></td></tr>
<tr class="separator:abefe81979c7f200d91348cbc44082f37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3482dfc72f17f3ea1994e11f44a6a324"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a3482dfc72f17f3ea1994e11f44a6a324">row_log_block_free</a> (<a class="el" href="structrow__log__buf__t.html">row_log_buf_t</a> &amp;log_buf)</td></tr>
<tr class="memdesc:a3482dfc72f17f3ea1994e11f44a6a324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the log buffer.  <a href="#a3482dfc72f17f3ea1994e11f44a6a324">More...</a><br /></td></tr>
<tr class="separator:a3482dfc72f17f3ea1994e11f44a6a324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c406ca6fc871a0901475e207bd20619"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a8c406ca6fc871a0901475e207bd20619">row_log_online_op</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *tuple, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id)</td></tr>
<tr class="memdesc:a8c406ca6fc871a0901475e207bd20619"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an operation to a secondary index that is (or was) being created.  <a href="#a8c406ca6fc871a0901475e207bd20619">More...</a><br /></td></tr>
<tr class="separator:a8c406ca6fc871a0901475e207bd20619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea190d63dea39c8e2810b70bfb158579"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#aea190d63dea39c8e2810b70bfb158579">row_log_table_get_error</a> (const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:aea190d63dea39c8e2810b70bfb158579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the error status of the online index rebuild log.  <a href="#aea190d63dea39c8e2810b70bfb158579">More...</a><br /></td></tr>
<tr class="separator:aea190d63dea39c8e2810b70bfb158579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e65a531f678187333f8402c839dcf66"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a6e65a531f678187333f8402c839dcf66">row_log_table_open</a> (<a class="el" href="structrow__log__t.html">row_log_t</a> *log, ulint size, ulint *avail)</td></tr>
<tr class="memdesc:a6e65a531f678187333f8402c839dcf66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts logging an operation to a table that is being rebuilt.  <a href="#a6e65a531f678187333f8402c839dcf66">More...</a><br /></td></tr>
<tr class="separator:a6e65a531f678187333f8402c839dcf66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa443e5f447b160024b631077b3d1006f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#aa443e5f447b160024b631077b3d1006f">row_log_table_close_func</a> (<a class="el" href="structrow__log__t.html">row_log_t</a> *log, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *b, ulint size, ulint avail)</td></tr>
<tr class="memdesc:aa443e5f447b160024b631077b3d1006f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops logging an operation to a table that is being rebuilt.  <a href="#aa443e5f447b160024b631077b3d1006f">More...</a><br /></td></tr>
<tr class="separator:aa443e5f447b160024b631077b3d1006f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ad8187dc3885e246650df2ea1c3555"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a89ad8187dc3885e246650df2ea1c3555">row_log_col_is_indexed</a> (const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint v_no)</td></tr>
<tr class="memdesc:a89ad8187dc3885e246650df2ea1c3555"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a virtual column is indexed in the new table being created during alter table.  <a href="#a89ad8187dc3885e246650df2ea1c3555">More...</a><br /></td></tr>
<tr class="separator:a89ad8187dc3885e246650df2ea1c3555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97f6df347ac3db15a45ffbf489c0b979"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a97f6df347ac3db15a45ffbf489c0b979">row_log_table_delete</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *ventry, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *sys)</td></tr>
<tr class="memdesc:a97f6df347ac3db15a45ffbf489c0b979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs a delete operation to a table that is being rebuilt.  <a href="#a97f6df347ac3db15a45ffbf489c0b979">More...</a><br /></td></tr>
<tr class="separator:a97f6df347ac3db15a45ffbf489c0b979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab695f30be9c14482426014bb0ffbc68d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ab695f30be9c14482426014bb0ffbc68d">row_log_table_low_redundant</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *ventry, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *o_ventry, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> insert, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *old_pk, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *new_index)</td></tr>
<tr class="memdesc:ab695f30be9c14482426014bb0ffbc68d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an insert or update to a table that is being rebuilt.  <a href="#ab695f30be9c14482426014bb0ffbc68d">More...</a><br /></td></tr>
<tr class="separator:ab695f30be9c14482426014bb0ffbc68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af737f0f5bac10017a0f2cb503fd1c770"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#af737f0f5bac10017a0f2cb503fd1c770">row_log_table_low</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *ventry, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *o_ventry, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> insert, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *old_pk)</td></tr>
<tr class="memdesc:af737f0f5bac10017a0f2cb503fd1c770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an insert or update to a table that is being rebuilt.  <a href="#af737f0f5bac10017a0f2cb503fd1c770">More...</a><br /></td></tr>
<tr class="separator:af737f0f5bac10017a0f2cb503fd1c770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af656dc2482c0b68cb780a9aa78e48c7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#af656dc2482c0b68cb780a9aa78e48c7f">row_log_table_update</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *old_pk, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *new_v_row, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *old_v_row)</td></tr>
<tr class="memdesc:af656dc2482c0b68cb780a9aa78e48c7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an update to a table that is being rebuilt.  <a href="#af656dc2482c0b68cb780a9aa78e48c7f">More...</a><br /></td></tr>
<tr class="separator:af656dc2482c0b68cb780a9aa78e48c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0c60ed4b438429ca77fc53e35df456"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="structdict__col__t.html">dict_col_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ace0c60ed4b438429ca77fc53e35df456">row_log_table_get_pk_old_col</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const ulint *col_map, ulint col_no)</td></tr>
<tr class="memdesc:ace0c60ed4b438429ca77fc53e35df456"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the old table column of a PRIMARY KEY column.  <a href="#ace0c60ed4b438429ca77fc53e35df456">More...</a><br /></td></tr>
<tr class="separator:ace0c60ed4b438429ca77fc53e35df456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc67c13db89a22923eb04b73f6f1915"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#adcc67c13db89a22923eb04b73f6f1915">row_log_table_get_pk_col</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="structdict__col__t.html">dict_col_t</a> *col, const <a class="el" href="structdict__field__t.html">dict_field_t</a> *ifield, <a class="el" href="structdfield__t.html">dfield_t</a> *dfield, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const ulint *offsets, ulint i, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, ulint max_len)</td></tr>
<tr class="memdesc:adcc67c13db89a22923eb04b73f6f1915"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps an old table column of a PRIMARY KEY column.  <a href="#adcc67c13db89a22923eb04b73f6f1915">More...</a><br /></td></tr>
<tr class="separator:adcc67c13db89a22923eb04b73f6f1915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2efe4d51893d0ca35668f4ae211596b"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ac2efe4d51893d0ca35668f4ae211596b">row_log_table_get_pk</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *sys, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> **heap)</td></tr>
<tr class="memdesc:ac2efe4d51893d0ca35668f4ae211596b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs the old PRIMARY KEY and DB_TRX_ID,DB_ROLL_PTR of a table that is being rebuilt.  <a href="#ac2efe4d51893d0ca35668f4ae211596b">More...</a><br /></td></tr>
<tr class="separator:ac2efe4d51893d0ca35668f4ae211596b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b89a1274570bf5842779cd8885f5c4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a6b89a1274570bf5842779cd8885f5c4e">row_log_table_insert</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *ventry, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets)</td></tr>
<tr class="memdesc:a6b89a1274570bf5842779cd8885f5c4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an insert to a table that is being rebuilt.  <a href="#a6b89a1274570bf5842779cd8885f5c4e">More...</a><br /></td></tr>
<tr class="separator:a6b89a1274570bf5842779cd8885f5c4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ae9e063a408e31ffc17a48ad25343b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ae6ae9e063a408e31ffc17a48ad25343b">row_log_table_blob_free</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no)</td></tr>
<tr class="memdesc:ae6ae9e063a408e31ffc17a48ad25343b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notes that a BLOB is being freed during online ALTER TABLE.  <a href="#ae6ae9e063a408e31ffc17a48ad25343b">More...</a><br /></td></tr>
<tr class="separator:ae6ae9e063a408e31ffc17a48ad25343b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ec93ea8645196e58f7fce1d29b6112c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a7ec93ea8645196e58f7fce1d29b6112c">row_log_table_blob_alloc</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no)</td></tr>
<tr class="memdesc:a7ec93ea8645196e58f7fce1d29b6112c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notes that a BLOB is being allocated during online ALTER TABLE.  <a href="#a7ec93ea8645196e58f7fce1d29b6112c">More...</a><br /></td></tr>
<tr class="separator:a7ec93ea8645196e58f7fce1d29b6112c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37fa082879cc59a5f2284004c9742efc"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a37fa082879cc59a5f2284004c9742efc">row_log_table_apply_convert_mrec</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *mrec, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets, const <a class="el" href="structrow__log__t.html">row_log_t</a> *log, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *error)</td></tr>
<tr class="memdesc:a37fa082879cc59a5f2284004c9742efc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a log record to a table row.  <a href="#a37fa082879cc59a5f2284004c9742efc">More...</a><br /></td></tr>
<tr class="separator:a37fa082879cc59a5f2284004c9742efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e176815dbcdac71c17dff933cd75d0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#af2e176815dbcdac71c17dff933cd75d0">apply_insert_multi_value</a> (uint32_t <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="structdtuple__t.html">dtuple_t</a> *<a class="el" href="completion__hash_8h.html#aea3abbd5a90d07f8abee93d6c28bce9a">entry</a>, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memdesc:af2e176815dbcdac71c17dff933cd75d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to insert an entry into a secondary index, which is created for multi-value field.  <a href="#af2e176815dbcdac71c17dff933cd75d0">More...</a><br /></td></tr>
<tr class="separator:af2e176815dbcdac71c17dff933cd75d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6b07cecee5bac0a4d0c8bcc7f93fe56"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ae6b07cecee5bac0a4d0c8bcc7f93fe56">row_log_table_apply_insert_low</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *row, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *dup)</td></tr>
<tr class="memdesc:ae6b07cecee5bac0a4d0c8bcc7f93fe56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replays an insert operation on a table that was rebuilt.  <a href="#ae6b07cecee5bac0a4d0c8bcc7f93fe56">More...</a><br /></td></tr>
<tr class="separator:ae6b07cecee5bac0a4d0c8bcc7f93fe56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf85cb23b780102cadd0efa81d4334eb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#aaf85cb23b780102cadd0efa81d4334eb">row_log_table_apply_insert</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *mrec, const ulint *offsets, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *dup, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id)</td></tr>
<tr class="memdesc:aaf85cb23b780102cadd0efa81d4334eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replays an insert operation on a table that was rebuilt.  <a href="#aaf85cb23b780102cadd0efa81d4334eb">More...</a><br /></td></tr>
<tr class="separator:aaf85cb23b780102cadd0efa81d4334eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71dceabfd2ed5f0def2faa3f33c970db"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a71dceabfd2ed5f0def2faa3f33c970db">row_log_table_delete_sec</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *<a class="el" href="completion__hash_8h.html#aea3abbd5a90d07f8abee93d6c28bce9a">entry</a>, <a class="el" href="structbtr__pcur__t.html">btr_pcur_t</a> *pcur)</td></tr>
<tr class="memdesc:a71dceabfd2ed5f0def2faa3f33c970db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a record from a secondary index.  <a href="#a71dceabfd2ed5f0def2faa3f33c970db">More...</a><br /></td></tr>
<tr class="separator:a71dceabfd2ed5f0def2faa3f33c970db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b3b843247bd2aaa3a3c762c75bc45fb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a8b3b843247bd2aaa3a3c762c75bc45fb">apply_delete_multi_value</a> (const <a class="el" href="structdtuple__t.html">dtuple_t</a> *row, <a class="el" href="structrow__ext__t.html">row_ext_t</a> *ext, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structbtr__pcur__t.html">btr_pcur_t</a> *pcur, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a8b3b843247bd2aaa3a3c762c75bc45fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a record from a multi-value index.  <a href="#a8b3b843247bd2aaa3a3c762c75bc45fb">More...</a><br /></td></tr>
<tr class="separator:a8b3b843247bd2aaa3a3c762c75bc45fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b55fa2ab5b3841e4f84d700981c60b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a52b55fa2ab5b3841e4f84d700981c60b">row_log_table_apply_delete_low</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structbtr__pcur__t.html">btr_pcur_t</a> *pcur, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *ventry, const ulint *offsets, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a52b55fa2ab5b3841e4f84d700981c60b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a record from a table that is being rebuilt.  <a href="#a52b55fa2ab5b3841e4f84d700981c60b">More...</a><br /></td></tr>
<tr class="separator:a52b55fa2ab5b3841e4f84d700981c60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c6e0718a7117ab6fd3be0b9a15337c2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a2c6e0718a7117ab6fd3be0b9a15337c2">row_log_table_apply_delete</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, ulint trx_id_col, const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *mrec, const ulint *moffsets, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, const <a class="el" href="structrow__log__t.html">row_log_t</a> *log)</td></tr>
<tr class="memdesc:a2c6e0718a7117ab6fd3be0b9a15337c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replays a delete operation on a table that was rebuilt.  <a href="#a2c6e0718a7117ab6fd3be0b9a15337c2">More...</a><br /></td></tr>
<tr class="separator:a2c6e0718a7117ab6fd3be0b9a15337c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9f84f692326bd2bf6a60ee393362673"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ad9f84f692326bd2bf6a60ee393362673">apply_update_multi_value</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, uint32_t n_index, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *old_row, <a class="el" href="structrow__ext__t.html">row_ext_t</a> *old_ext, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *new_row, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> non_mv_upd, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:ad9f84f692326bd2bf6a60ee393362673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replays an update operation on the multi-value index.  <a href="#ad9f84f692326bd2bf6a60ee393362673">More...</a><br /></td></tr>
<tr class="separator:ad9f84f692326bd2bf6a60ee393362673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8699c00df9f58ca1e8ab6acbec04cd67"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a8699c00df9f58ca1e8ab6acbec04cd67">row_log_table_apply_update</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, ulint new_trx_id_col, const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *mrec, const ulint *offsets, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *dup, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *old_pk)</td></tr>
<tr class="memdesc:a8699c00df9f58ca1e8ab6acbec04cd67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replays an update operation on a table that was rebuilt.  <a href="#a8699c00df9f58ca1e8ab6acbec04cd67">More...</a><br /></td></tr>
<tr class="separator:a8699c00df9f58ca1e8ab6acbec04cd67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a369ae0bd85848b0b76ea855b896afc4d"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a369ae0bd85848b0b76ea855b896afc4d">row_log_table_apply_op</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, ulint trx_id_col, ulint new_trx_id_col, <a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *dup, <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *error, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *mrec, const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *mrec_end, ulint *offsets)</td></tr>
<tr class="memdesc:a369ae0bd85848b0b76ea855b896afc4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies an operation to a table that was rebuilt.  <a href="#a369ae0bd85848b0b76ea855b896afc4d">More...</a><br /></td></tr>
<tr class="separator:a369ae0bd85848b0b76ea855b896afc4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf82a0747325aeb22782f124c611a31"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#aabf82a0747325aeb22782f124c611a31">row_log_progress_inc_per_block</a> ()</td></tr>
<tr class="memdesc:aabf82a0747325aeb22782f124c611a31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate how much an ALTER TABLE progress should be incremented per one block of log applied.  <a href="#aabf82a0747325aeb22782f124c611a31">More...</a><br /></td></tr>
<tr class="separator:aabf82a0747325aeb22782f124c611a31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add17d64291bce70ca0fceaee83c1c321"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#add17d64291bce70ca0fceaee83c1c321">row_log_estimate_work</a> (const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:add17d64291bce70ca0fceaee83c1c321"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate how much work is to be done by the log apply phase of an ALTER TABLE for this index.  <a href="#add17d64291bce70ca0fceaee83c1c321">More...</a><br /></td></tr>
<tr class="separator:add17d64291bce70ca0fceaee83c1c321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b07dfafd6c3cfd8d6f2724ea6c33e4c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a3b07dfafd6c3cfd8d6f2724ea6c33e4c">row_log_table_apply_ops</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *dup, <a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *stage)</td></tr>
<tr class="memdesc:a3b07dfafd6c3cfd8d6f2724ea6c33e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies operations to a table was rebuilt.  <a href="#a3b07dfafd6c3cfd8d6f2724ea6c33e4c">More...</a><br /></td></tr>
<tr class="separator:a3b07dfafd6c3cfd8d6f2724ea6c33e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b57238888b207ec11e0acf7cd33c9b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a16b57238888b207ec11e0acf7cd33c9b">row_log_table_apply</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__table__t.html">dict_table_t</a> *old_table, struct <a class="el" href="structTABLE.html">TABLE</a> *table, <a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *stage)</td></tr>
<tr class="memdesc:a16b57238888b207ec11e0acf7cd33c9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the row_log_table log to a table upon completing rebuild.  <a href="#a16b57238888b207ec11e0acf7cd33c9b">More...</a><br /></td></tr>
<tr class="separator:a16b57238888b207ec11e0acf7cd33c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8bf777f7ec7258ca8ad818c07b8b507"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#ab8bf777f7ec7258ca8ad818c07b8b507">row_log_allocate</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> same_pk, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *add_cols, const ulint *col_map, const char *<a class="el" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>)</td></tr>
<tr class="memdesc:ab8bf777f7ec7258ca8ad818c07b8b507"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the row log for an index and flag the index for online creation.  <a href="#ab8bf777f7ec7258ca8ad818c07b8b507">More...</a><br /></td></tr>
<tr class="separator:ab8bf777f7ec7258ca8ad818c07b8b507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfbfbdb0b35bb7009854f6262d1f9e20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#acfbfbdb0b35bb7009854f6262d1f9e20">row_log_free</a> (<a class="el" href="structrow__log__t.html">row_log_t</a> *&amp;log)</td></tr>
<tr class="memdesc:acfbfbdb0b35bb7009854f6262d1f9e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the row log for an index that was being created online.  <a href="#acfbfbdb0b35bb7009854f6262d1f9e20">More...</a><br /></td></tr>
<tr class="separator:acfbfbdb0b35bb7009854f6262d1f9e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33639b4cd00f60dec3dfd9659ec1f601"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a33639b4cd00f60dec3dfd9659ec1f601">row_log_get_max_trx</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a33639b4cd00f60dec3dfd9659ec1f601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the latest transaction ID that has invoked row_log_online_op() during online creation.  <a href="#a33639b4cd00f60dec3dfd9659ec1f601">More...</a><br /></td></tr>
<tr class="separator:a33639b4cd00f60dec3dfd9659ec1f601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c9c67a8e4ad4445d7ec4ab2fad7096"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a20c9c67a8e4ad4445d7ec4ab2fad7096">row_log_apply_op_low</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *dup, <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *error, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> has_index_lock, enum <a class="el" href="row0log_8cc.html#ad10708fa66d6dac0de8bf010c1eafa4c">row_op</a> op, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *<a class="el" href="completion__hash_8h.html#aea3abbd5a90d07f8abee93d6c28bce9a">entry</a>)</td></tr>
<tr class="memdesc:a20c9c67a8e4ad4445d7ec4ab2fad7096"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies an operation to a secondary index that was being created.  <a href="#a20c9c67a8e4ad4445d7ec4ab2fad7096">More...</a><br /></td></tr>
<tr class="separator:a20c9c67a8e4ad4445d7ec4ab2fad7096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e6609686f44b3537bd1da8626c304e"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a33e6609686f44b3537bd1da8626c304e">row_log_apply_op</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *dup, <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *error, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> has_index_lock, const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *mrec, const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *mrec_end, ulint *offsets)</td></tr>
<tr class="memdesc:a33e6609686f44b3537bd1da8626c304e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies an operation to a secondary index that was being created.  <a href="#a33e6609686f44b3537bd1da8626c304e">More...</a><br /></td></tr>
<tr class="separator:a33e6609686f44b3537bd1da8626c304e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b254a17bc122773078d7bfa9f0c9a0b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a5b254a17bc122773078d7bfa9f0c9a0b">row_log_apply_ops</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *dup, <a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *stage)</td></tr>
<tr class="memdesc:a5b254a17bc122773078d7bfa9f0c9a0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies operations to a secondary index that was being created.  <a href="#a5b254a17bc122773078d7bfa9f0c9a0b">More...</a><br /></td></tr>
<tr class="separator:a5b254a17bc122773078d7bfa9f0c9a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7757cbe09a71a3ae798140d20d1464e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8cc.html#a7757cbe09a71a3ae798140d20d1464e9">row_log_apply</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, struct <a class="el" href="structTABLE.html">TABLE</a> *table, <a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *stage)</td></tr>
<tr class="memdesc:a7757cbe09a71a3ae798140d20d1464e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the row log to the index upon completing index creation.  <a href="#a7757cbe09a71a3ae798140d20d1464e9">More...</a><br /></td></tr>
<tr class="separator:a7757cbe09a71a3ae798140d20d1464e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Modification log for online index creation and online table rebuild. </p>
<p>Created 2011-05-26 Marko Makela </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afd6f1557fde01b3cb3f86976454e8101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd6f1557fde01b3cb3f86976454e8101">&#9670;&nbsp;</a></span>ROW_LOG_HEADER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROW_LOG_HEADER_SIZE&#160;&#160;&#160;2 /*op, extra_size*/</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the modification log entry header, in bytes. </p>

</div>
</div>
<a id="a464b2c9a9514a5e8f2e19c4abd7307f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a464b2c9a9514a5e8f2e19c4abd7307f7">&#9670;&nbsp;</a></span>row_log_table_close</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define row_log_table_close</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">log, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">avail&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="row0log_8cc.html#aa443e5f447b160024b631077b3d1006f">row_log_table_close_func</a>(log, b, size, avail)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ad503bec33fefe15275afe2b631a652c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad503bec33fefe15275afe2b631a652c5">&#9670;&nbsp;</a></span>page_no_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>, <a class="el" href="classrow__log__table__blob__t.html">row_log_table_blob_t</a>, std::less&lt;<a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&gt;, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt;std::pair&lt;const <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>, <a class="el" href="classrow__log__table__blob__t.html">row_log_table_blob_t</a>&gt; &gt; &gt; <a class="el" href="row0log_8cc.html#ad503bec33fefe15275afe2b631a652c5">page_no_map</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map of off-page column page numbers to 0 or log byte offsets. </p>
<p>If there is no mapping for a page number, it is safe to access. If a page number maps to 0, it is an off-page column that has been freed. If a page number maps to a nonzero number, the number is a byte offset into the index-&gt;online_log, indicating that the page is safe to access when applying log records starting from that offset. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ad10708fa66d6dac0de8bf010c1eafa4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad10708fa66d6dac0de8bf010c1eafa4c">&#9670;&nbsp;</a></span>row_op</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="row0log_8cc.html#ad10708fa66d6dac0de8bf010c1eafa4c">row_op</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Index record modification operations during online index creation. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad10708fa66d6dac0de8bf010c1eafa4ca77824c8da9fe3ec42d63db23f40d06e6"></a>ROW_OP_INSERT&#160;</td><td class="fielddoc"><p>Insert a record. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad10708fa66d6dac0de8bf010c1eafa4ca24a40a74f927752aab5e23a3d2e0dcf1"></a>ROW_OP_DELETE&#160;</td><td class="fielddoc"><p>Delete a record. </p>
</td></tr>
</table>

</div>
</div>
<a id="ab86593aa77c3e8a48ae3e29639c81e8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab86593aa77c3e8a48ae3e29639c81e8a">&#9670;&nbsp;</a></span>row_tab_op</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="row0log_8cc.html#ab86593aa77c3e8a48ae3e29639c81e8a">row_tab_op</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Table row modification operations during online table rebuild. </p>
<p>Delete-marked records are not copied to the rebuilt table. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab86593aa77c3e8a48ae3e29639c81e8aac420f569df73ac16c0b7182317f3c5d2"></a>ROW_T_INSERT&#160;</td><td class="fielddoc"><p>Insert a record. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab86593aa77c3e8a48ae3e29639c81e8aa4df993ff1e283ca37aa624a932ce3d7b"></a>ROW_T_UPDATE&#160;</td><td class="fielddoc"><p>Update a record in place. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab86593aa77c3e8a48ae3e29639c81e8aaf0e97b05dab49614ddd88d1ee6bce11e"></a>ROW_T_DELETE&#160;</td><td class="fielddoc"><p>Delete (purge) a record. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8b3b843247bd2aaa3a3c762c75bc45fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b3b843247bd2aaa3a3c762c75bc45fb">&#9670;&nbsp;</a></span>apply_delete_multi_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> apply_delete_multi_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__ext__t.html">row_ext_t</a> *&#160;</td>
          <td class="paramname"><em>ext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__pcur__t.html">btr_pcur_t</a> *&#160;</td>
          <td class="paramname"><em>pcur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deletes a record from a multi-value index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">row</td><td>row to delete </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ext</td><td>external data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>multi-value index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcur</td><td>B-tree cursor </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>

</div>
</div>
<a id="af2e176815dbcdac71c17dff933cd75d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e176815dbcdac71c17dff933cd75d0">&#9670;&nbsp;</a></span>apply_insert_multi_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> apply_insert_multi_value </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to insert an entry into a secondary index, which is created for multi-value field. </p>
<p>For each value to be inserted, if a record with exactly the same fields is found, the other record is necessarily marked deleted. It is then unmarked. Otherwise, the entry is just inserted to the index. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>undo logging and locking flags </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>secondary index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">offsets_heap</td><td>memory heap that can be emptied </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">entry</td><td>index entry to insert </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trx_id</td><td>PAGE_MAX_TRX_ID during row_log_table_apply(), or trx_id when undo log is disabled during alter copy operation or 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thr</td><td>query thread </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DB_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">DB_LOCK_WAIT</td><td>on lock wait when !(flags &amp; BTR_NO_LOCKING_FLAG) </td></tr>
    <tr><td class="paramname">DB_FAIL</td><td>if retry with BTR_MODIFY_TREE is needed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code </dd></dl>

</div>
</div>
<a id="ad9f84f692326bd2bf6a60ee393362673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9f84f692326bd2bf6a60ee393362673">&#9670;&nbsp;</a></span>apply_update_multi_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> apply_update_multi_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>old_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__ext__t.html">row_ext_t</a> *&#160;</td>
          <td class="paramname"><em>old_ext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>new_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>non_mv_upd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replays an update operation on the multi-value index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>multi-value index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_index</td><td>the sequence of the index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_row</td><td>old row of the update </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_ext</td><td>old external data of the update </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_row</td><td>new row of the update </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">non_mv_upd</td><td>true if any non-multi-value field on the index gets updated too </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trx_id</td><td>transaction id of the update </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thr</td><td>query graph </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">offsets_heap</td><td>memory heap that can be emptied </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>

</div>
</div>
<a id="ab8bf777f7ec7258ca8ad818c07b8b507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8bf777f7ec7258ca8ad818c07b8b507">&#9670;&nbsp;</a></span>row_log_allocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> row_log_allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>same_pk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>add_cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>col_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate the row log for an index and flag the index for online creation. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if success, false if not </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index </td></tr>
    <tr><td class="paramname">table</td><td>in/out: new table being rebuilt, or NULL when creating a secondary index </td></tr>
    <tr><td class="paramname">same_pk</td><td>in: whether the definition of the PRIMARY KEY has remained the same </td></tr>
    <tr><td class="paramname">add_cols</td><td>in: default values of added columns, or NULL </td></tr>
    <tr><td class="paramname">col_map</td><td>in: mapping of old column numbers to new ones, or NULL if !table </td></tr>
    <tr><td class="paramname">path</td><td>in: where to create temporary file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7757cbe09a71a3ae798140d20d1464e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7757cbe09a71a3ae798140d20d1464e9">&#9670;&nbsp;</a></span>row_log_apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_apply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply the row log to the index upon completing index creation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction (for checking if the operation was interrupted) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>secondary index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>MySQL table (for reporting duplicates) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">stage</td><td>performance schema accounting object, used by ALTER TABLE. stage-&gt;begin_phase_log_index() will be called initially and then stage-&gt;inc() will be called for each block of log that is applied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, or error code on failure </dd></dl>

</div>
</div>
<a id="a33e6609686f44b3537bd1da8626c304e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e6609686f44b3537bd1da8626c304e">&#9670;&nbsp;</a></span>row_log_apply_op()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a>* row_log_apply_op </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>has_index_lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td>
          <td class="paramname"><em>mrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td>
          <td class="paramname"><em>mrec_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies an operation to a secondary index that was being created. </p>
<dl class="section return"><dt>Returns</dt><dd>NULL on failure (mrec corruption) or when out of data; pointer to next record on success </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index </td></tr>
    <tr><td class="paramname">dup</td><td>in/out: for reporting duplicate key errors </td></tr>
    <tr><td class="paramname">error</td><td>out: DB_SUCCESS or error code </td></tr>
    <tr><td class="paramname">offsets_heap</td><td>in/out: memory heap for allocating offsets; can be emptied </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap for allocating data tuples </td></tr>
    <tr><td class="paramname">has_index_lock</td><td>in: true if holding index-&gt;lock in exclusive mode </td></tr>
    <tr><td class="paramname">mrec</td><td>in: merge record </td></tr>
    <tr><td class="paramname">mrec_end</td><td>in: end of buffer </td></tr>
    <tr><td class="paramname">offsets</td><td>in/out: work area for rec_init_offsets_temp() </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20c9c67a8e4ad4445d7ec4ab2fad7096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20c9c67a8e4ad4445d7ec4ab2fad7096">&#9670;&nbsp;</a></span>row_log_apply_op_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void row_log_apply_op_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>has_index_lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="row0log_8cc.html#ad10708fa66d6dac0de8bf010c1eafa4c">row_op</a>&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies an operation to a secondary index that was being created. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index </td></tr>
    <tr><td class="paramname">dup</td><td>in/out: for reporting duplicate key errors </td></tr>
    <tr><td class="paramname">error</td><td>out: DB_SUCCESS or error code </td></tr>
    <tr><td class="paramname">offsets_heap</td><td>in/out: memory heap for allocating offsets; can be emptied </td></tr>
    <tr><td class="paramname">has_index_lock</td><td>in: true if holding index-&gt;lock in exclusive mode </td></tr>
    <tr><td class="paramname">op</td><td>in: operation being applied </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction identifier </td></tr>
    <tr><td class="paramname">entry</td><td>in: row </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5b254a17bc122773078d7bfa9f0c9a0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b254a17bc122773078d7bfa9f0c9a0b">&#9670;&nbsp;</a></span>row_log_apply_ops()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_apply_ops </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies operations to a secondary index that was being created. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction (for checking if the operation was interrupted) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">dup</td><td>for reporting duplicate key errors </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">stage</td><td>performance schema accounting object, used by ALTER TABLE. If not NULL, then stage-&gt;inc() will be called for each block of log that is applied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, or error code on failure </dd></dl>

</div>
</div>
<a id="abefe81979c7f200d91348cbc44082f37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abefe81979c7f200d91348cbc44082f37">&#9670;&nbsp;</a></span>row_log_block_allocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> row_log_block_allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrow__log__buf__t.html">row_log_buf_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate the memory for the log buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log_buf</td><td>Buffer used for log operation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if success, false if not </dd></dl>

</div>
</div>
<a id="a3482dfc72f17f3ea1994e11f44a6a324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3482dfc72f17f3ea1994e11f44a6a324">&#9670;&nbsp;</a></span>row_log_block_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void row_log_block_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrow__log__buf__t.html">row_log_buf_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log_buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free the log buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log_buf</td><td>Buffer used for log operation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a89ad8187dc3885e246650df2ea1c3555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89ad8187dc3885e246650df2ea1c3555">&#9670;&nbsp;</a></span>row_log_col_is_indexed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> row_log_col_is_indexed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>v_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether a virtual column is indexed in the new table being created during alter table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>cluster index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_no</td><td>virtual column number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if it is indexed, else false </dd></dl>

</div>
</div>
<a id="add17d64291bce70ca0fceaee83c1c321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add17d64291bce70ca0fceaee83c1c321">&#9670;&nbsp;</a></span>row_log_estimate_work()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint row_log_estimate_work </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Estimate how much work is to be done by the log apply phase of an ALTER TABLE for this index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index whose log to assess </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>work to be done by log-apply in abstract units </dd></dl>

</div>
</div>
<a id="acfbfbdb0b35bb7009854f6262d1f9e20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfbfbdb0b35bb7009854f6262d1f9e20">&#9670;&nbsp;</a></span>row_log_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrow__log__t.html">row_log_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free the row log for an index that was being created online. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log</td><td>in,own: row log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a33639b4cd00f60dec3dfd9659ec1f601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33639b4cd00f60dec3dfd9659ec1f601">&#9670;&nbsp;</a></span>row_log_get_max_trx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> row_log_get_max_trx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the latest transaction ID that has invoked row_log_online_op() during online creation. </p>
<dl class="section return"><dt>Returns</dt><dd>latest transaction ID, or 0 if nothing was logged </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index, must be locked </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8c406ca6fc871a0901475e207bd20619"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c406ca6fc871a0901475e207bd20619">&#9670;&nbsp;</a></span>row_log_online_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_online_op </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>tuple</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs an operation to a secondary index that is (or was) being created. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index, S or X latched </td></tr>
    <tr><td class="paramname">tuple</td><td>in: index tuple </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction ID for insert, or 0 for delete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aabf82a0747325aeb22782f124c611a31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabf82a0747325aeb22782f124c611a31">&#9670;&nbsp;</a></span>row_log_progress_inc_per_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint row_log_progress_inc_per_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Estimate how much an ALTER TABLE progress should be incremented per one block of log applied. </p>
<p>For the other phases of ALTER TABLE we increment the progress with 1 per page processed. </p><dl class="section return"><dt>Returns</dt><dd>amount of abstract units to add to work_completed when one block of log is applied. </dd></dl>

</div>
</div>
<a id="a16b57238888b207ec11e0acf7cd33c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b57238888b207ec11e0acf7cd33c9b">&#9670;&nbsp;</a></span>row_log_table_apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>old_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply the row_log_table log to a table upon completing rebuild. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thr</td><td>query graph </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_table</td><td>old table </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>MySQL table (for reporting duplicates) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">stage</td><td>performance schema accounting object, used by ALTER TABLE. stage-&gt;begin_phase_log_table() will be called initially and then stage-&gt;inc() will be called for each block of log that is applied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, or error code on failure </dd></dl>

</div>
</div>
<a id="a37fa082879cc59a5f2284004c9742efc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37fa082879cc59a5f2284004c9742efc">&#9670;&nbsp;</a></span>row_log_table_apply_convert_mrec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="structdtuple__t.html">dtuple_t</a>* row_log_table_apply_convert_mrec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td>
          <td class="paramname"><em>mrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrow__log__t.html">row_log_t</a> *&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a log record to a table row. </p>
<dl class="section return"><dt>Returns</dt><dd>converted row, or NULL if the conversion fails </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: current transaction </td></tr>
    <tr><td class="paramname">mrec</td><td>in: merge record </td></tr>
    <tr><td class="paramname">index</td><td>in: index of mrec </td></tr>
    <tr><td class="paramname">offsets</td><td>in: offsets of mrec </td></tr>
    <tr><td class="paramname">log</td><td>in: rebuild context </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: DB_TRX_ID of mrec </td></tr>
    <tr><td class="paramname">error</td><td>out: DB_SUCCESS or DB_MISSING_HISTORY or reason of failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2c6e0718a7117ab6fd3be0b9a15337c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c6e0718a7117ab6fd3be0b9a15337c2">&#9670;&nbsp;</a></span>row_log_table_apply_delete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_apply_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>trx_id_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td>
          <td class="paramname"><em>mrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>moffsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structrow__log__t.html">row_log_t</a> *&#160;</td>
          <td class="paramname"><em>log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replays a delete operation on a table that was rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thr</td><td>in: query graph </td></tr>
    <tr><td class="paramname">trx_id_col</td><td>in: position of DB_TRX_ID in the new clustered index </td></tr>
    <tr><td class="paramname">mrec</td><td>in: merge record </td></tr>
    <tr><td class="paramname">moffsets</td><td>in: offsets of mrec </td></tr>
    <tr><td class="paramname">offsets_heap</td><td>in/out: memory heap that can be emptied </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
    <tr><td class="paramname">log</td><td>in: online log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a52b55fa2ab5b3841e4f84d700981c60b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52b55fa2ab5b3841e4f84d700981c60b">&#9670;&nbsp;</a></span>row_log_table_apply_delete_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_apply_delete_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__pcur__t.html">btr_pcur_t</a> *&#160;</td>
          <td class="paramname"><em>pcur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deletes a record from a table that is being rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: current transaction </td></tr>
    <tr><td class="paramname">pcur</td><td>in/out: B-tree cursor, will be trashed </td></tr>
    <tr><td class="paramname">ventry</td><td>in: dtuple holding virtual column info </td></tr>
    <tr><td class="paramname">offsets</td><td>in: offsets on pcur </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
    <tr><td class="paramname">mtr</td><td>in/out: mini-transaction, will be committed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf85cb23b780102cadd0efa81d4334eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf85cb23b780102cadd0efa81d4334eb">&#9670;&nbsp;</a></span>row_log_table_apply_insert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_apply_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td>
          <td class="paramname"><em>mrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replays an insert operation on a table that was rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thr</td><td>in: query graph </td></tr>
    <tr><td class="paramname">mrec</td><td>in: record to insert </td></tr>
    <tr><td class="paramname">offsets</td><td>in: offsets of mrec </td></tr>
    <tr><td class="paramname">offsets_heap</td><td>in/out: memory heap that can be emptied </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
    <tr><td class="paramname">dup</td><td>in/out: for reporting duplicate key errors </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: DB_TRX_ID of mrec </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6b07cecee5bac0a4d0c8bcc7f93fe56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6b07cecee5bac0a4d0c8bcc7f93fe56">&#9670;&nbsp;</a></span>row_log_table_apply_insert_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_apply_insert_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *&#160;</td>
          <td class="paramname"><em>dup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replays an insert operation on a table that was rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thr</td><td>in: query graph </td></tr>
    <tr><td class="paramname">row</td><td>in: table row in the old table definition </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: trx_id of the row </td></tr>
    <tr><td class="paramname">offsets_heap</td><td>in/out: memory heap that can be emptied </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
    <tr><td class="paramname">dup</td><td>in/out: for reporting duplicate key errors </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a369ae0bd85848b0b76ea855b896afc4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a369ae0bd85848b0b76ea855b896afc4d">&#9670;&nbsp;</a></span>row_log_table_apply_op()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a>* row_log_table_apply_op </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>trx_id_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>new_trx_id_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td>
          <td class="paramname"><em>mrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td>
          <td class="paramname"><em>mrec_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies an operation to a table that was rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>NULL on failure (mrec corruption) or when out of data; pointer to next record on success </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thr</td><td>in: query graph </td></tr>
    <tr><td class="paramname">trx_id_col</td><td>in: position of DB_TRX_ID in old index </td></tr>
    <tr><td class="paramname">new_trx_id_col</td><td>in: position of DB_TRX_ID in new index </td></tr>
    <tr><td class="paramname">dup</td><td>in/out: for reporting duplicate key errors </td></tr>
    <tr><td class="paramname">error</td><td>out: DB_SUCCESS or error code </td></tr>
    <tr><td class="paramname">offsets_heap</td><td>in/out: memory heap that can be emptied </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
    <tr><td class="paramname">mrec</td><td>in: merge record </td></tr>
    <tr><td class="paramname">mrec_end</td><td>in: end of buffer </td></tr>
    <tr><td class="paramname">offsets</td><td>in/out: work area for parsing mrec </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3b07dfafd6c3cfd8d6f2724ea6c33e4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b07dfafd6c3cfd8d6f2724ea6c33e4c">&#9670;&nbsp;</a></span>row_log_table_apply_ops()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_apply_ops </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies operations to a table was rebuilt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thr</td><td>query graph </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">dup</td><td>for reporting duplicate key errors </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">stage</td><td>performance schema accounting object, used by ALTER TABLE. If not NULL, then stage-&gt;inc() will be called for each block of log that is applied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, or error code on failure </dd></dl>

</div>
</div>
<a id="a8699c00df9f58ca1e8ab6acbec04cd67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8699c00df9f58ca1e8ab6acbec04cd67">&#9670;&nbsp;</a></span>row_log_table_apply_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_apply_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>new_trx_id_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="row0merge_8h.html#a5f9b7db3a414825d6388022a3aa772da">mrec_t</a> *&#160;</td>
          <td class="paramname"><em>mrec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrow__merge__dup__t.html">row_merge_dup_t</a> *&#160;</td>
          <td class="paramname"><em>dup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>old_pk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replays an update operation on a table that was rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<p>It allows to create tuple with virtual column information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thr</td><td>in: query graph </td></tr>
    <tr><td class="paramname">new_trx_id_col</td><td>in: position of DB_TRX_ID in the new clustered index </td></tr>
    <tr><td class="paramname">mrec</td><td>in: new value </td></tr>
    <tr><td class="paramname">offsets</td><td>in: offsets of mrec </td></tr>
    <tr><td class="paramname">offsets_heap</td><td>in/out: memory heap that can be emptied </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
    <tr><td class="paramname">dup</td><td>in/out: for reporting duplicate key errors </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: DB_TRX_ID of mrec </td></tr>
    <tr><td class="paramname">old_pk</td><td>in: PRIMARY KEY and DB_TRX_ID,DB_ROLL_PTR of the old value, or PRIMARY KEY if same_pk </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ec93ea8645196e58f7fce1d29b6112c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ec93ea8645196e58f7fce1d29b6112c">&#9670;&nbsp;</a></span>row_log_table_blob_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_blob_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notes that a BLOB is being allocated during online ALTER TABLE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: clustered index, X-latched </td></tr>
    <tr><td class="paramname">page_no</td><td>in: starting page number of the BLOB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6ae9e063a408e31ffc17a48ad25343b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ae9e063a408e31ffc17a48ad25343b">&#9670;&nbsp;</a></span>row_log_table_blob_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_blob_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notes that a BLOB is being freed during online ALTER TABLE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: clustered index, X-latched </td></tr>
    <tr><td class="paramname">page_no</td><td>in: starting page number of the BLOB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa443e5f447b160024b631077b3d1006f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa443e5f447b160024b631077b3d1006f">&#9670;&nbsp;</a></span>row_log_table_close_func()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void row_log_table_close_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrow__log__t.html">row_log_t</a> *&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>avail</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops logging an operation to a table that is being rebuilt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log</td><td>in/out: online rebuild log </td></tr>
    <tr><td class="paramname">b</td><td>in: end of log record </td></tr>
    <tr><td class="paramname">size</td><td>in: size of log record </td></tr>
    <tr><td class="paramname">avail</td><td>in: available size for log record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a97f6df347ac3db15a45ffbf489c0b979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97f6df347ac3db15a45ffbf489c0b979">&#9670;&nbsp;</a></span>row_log_table_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>sys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs a delete operation to a table that is being rebuilt. </p>
<p>This will be merged in row_log_table_apply_delete(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: current transaction </td></tr>
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">ventry</td><td>in: dtuple holding virtual column info </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
    <tr><td class="paramname">sys</td><td>in: DB_TRX_ID,DB_ROLL_PTR that should be logged, or NULL to use those in rec </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a71dceabfd2ed5f0def2faa3f33c970db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71dceabfd2ed5f0def2faa3f33c970db">&#9670;&nbsp;</a></span>row_log_table_delete_sec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_delete_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__pcur__t.html">btr_pcur_t</a> *&#160;</td>
          <td class="paramname"><em>pcur</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete a record from a secondary index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>secondary index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entry</td><td>entry to delete </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcur</td><td>B-tree cursor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>

</div>
</div>
<a id="aea190d63dea39c8e2810b70bfb158579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea190d63dea39c8e2810b70bfb158579">&#9670;&nbsp;</a></span>row_log_table_get_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_get_error </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the error status of the online index rebuild log. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: clustered index of a table that is being rebuilt online </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac2efe4d51893d0ca35668f4ae211596b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2efe4d51893d0ca35668f4ae211596b">&#9670;&nbsp;</a></span>row_log_table_get_pk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structdtuple__t.html">dtuple_t</a>* row_log_table_get_pk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>sys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> **&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs the old PRIMARY KEY and DB_TRX_ID,DB_ROLL_PTR of a table that is being rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>tuple of PRIMARY KEY,DB_TRX_ID,DB_ROLL_PTR in the rebuilt table, or NULL if the PRIMARY KEY definition does not change </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: current transaction </td></tr>
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
    <tr><td class="paramname">sys</td><td>out: DB_TRX_ID,DB_ROLL_PTR for row_log_table_delete(), or NULL </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap where allocated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adcc67c13db89a22923eb04b73f6f1915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc67c13db89a22923eb04b73f6f1915">&#9670;&nbsp;</a></span>row_log_table_get_pk_col()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_get_pk_col </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__col__t.html">dict_col_t</a> *&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__field__t.html">dict_field_t</a> *&#160;</td>
          <td class="paramname"><em>ifield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdfield__t.html">dfield_t</a> *&#160;</td>
          <td class="paramname"><em>dfield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>max_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maps an old table column of a PRIMARY KEY column. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>current transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index being operated on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">col</td><td>old table column (before ALTER TABLE) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ifield</td><td>clustered index field in the new table (after ALTER TABLE) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">dfield</td><td>clustered index tuple field in the new table </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap for allocating dfield contents </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rec</td><td>clustered index leaf page record in the old table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offsets</td><td>rec_get_offsets(rec) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">i</td><td>rec field corresponding to col </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>page size of the old table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_len</td><td>maximum length of dfield </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DB_INVALID_NULL</td><td>if a NULL value is encountered </td></tr>
    <tr><td class="paramname">DB_TOO_BIG_INDEX_COL</td><td>if the maximum prefix length is exceeded </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ace0c60ed4b438429ca77fc53e35df456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0c60ed4b438429ca77fc53e35df456">&#9670;&nbsp;</a></span>row_log_table_get_pk_old_col()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="structdict__col__t.html">dict_col_t</a>* row_log_table_get_pk_old_col </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>col_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>col_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the old table column of a PRIMARY KEY column. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>old table (before ALTER TABLE) </td></tr>
    <tr><td class="paramname">col_map</td><td>mapping of old column numbers to new ones </td></tr>
    <tr><td class="paramname">col_no</td><td>column position in the new table </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>old table column, or NULL if this is an added column </dd></dl>

</div>
</div>
<a id="a6b89a1274570bf5842779cd8885f5c4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b89a1274570bf5842779cd8885f5c4e">&#9670;&nbsp;</a></span>row_log_table_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_insert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs an insert to a table that is being rebuilt. </p>
<p>This will be merged in row_log_table_apply_insert(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">ventry</td><td>in: dtuple holding virtual column info </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af737f0f5bac10017a0f2cb503fd1c770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af737f0f5bac10017a0f2cb503fd1c770">&#9670;&nbsp;</a></span>row_log_table_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void row_log_table_low </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>o_ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>insert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>old_pk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logs an insert or update to a table that is being rebuilt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">ventry</td><td>in: dtuple holding virtual column info </td></tr>
    <tr><td class="paramname">o_ventry</td><td>in: dtuple holding old virtual column info </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
    <tr><td class="paramname">insert</td><td>in: true if insert, false if update </td></tr>
    <tr><td class="paramname">old_pk</td><td>in: old PRIMARY KEY value (if !insert and a PRIMARY KEY is being created) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab695f30be9c14482426014bb0ffbc68d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab695f30be9c14482426014bb0ffbc68d">&#9670;&nbsp;</a></span>row_log_table_low_redundant()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void row_log_table_low_redundant </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>o_ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>insert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>old_pk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>new_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Logs an insert or update to a table that is being rebuilt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record in ROW_FORMAT=REDUNDANT, page X-latched </td></tr>
    <tr><td class="paramname">ventry</td><td>in: dtuple holding virtual column info or NULL </td></tr>
    <tr><td class="paramname">o_ventry</td><td>in: old dtuple holding virtual column info or NULL </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">insert</td><td>in: true if insert, false if update </td></tr>
    <tr><td class="paramname">old_pk</td><td>in: old PRIMARY KEY value (if !insert and a PRIMARY KEY is being created) </td></tr>
    <tr><td class="paramname">new_index</td><td>in: clustered index of the new table, not latched </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6e65a531f678187333f8402c839dcf66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e65a531f678187333f8402c839dcf66">&#9670;&nbsp;</a></span>row_log_table_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* row_log_table_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrow__log__t.html">row_log_t</a> *&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>avail</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts logging an operation to a table that is being rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to log, or NULL if no logging is necessary </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log</td><td>in/out: online rebuild log </td></tr>
    <tr><td class="paramname">size</td><td>in: size of log record </td></tr>
    <tr><td class="paramname">avail</td><td>out: available size for log record </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af656dc2482c0b68cb780a9aa78e48c7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af656dc2482c0b68cb780a9aa78e48c7f">&#9670;&nbsp;</a></span>row_log_table_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>old_pk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>new_v_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>old_v_row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs an update to a table that is being rebuilt. </p>
<p>Logs an update operation to a table that is being rebuilt.</p>
<p>This will be merged in row_log_table_apply_update(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
    <tr><td class="paramname">old_pk</td><td>in: row_log_table_get_pk() before the update </td></tr>
    <tr><td class="paramname">new_v_row</td><td>in: dtuple contains the new virtual columns </td></tr>
    <tr><td class="paramname">old_v_row</td><td>in: dtuple contains the old virtual columns </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac079c8072ad98bf1610950b9451b2dc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac079c8072ad98bf1610950b9451b2dc3">&#9670;&nbsp;</a></span>row_log_tmpfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int row_log_tmpfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrow__log__t.html">row_log_t</a> *&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the file or online log if it does not exist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>online rebuild log </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if success, false if not </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_4dd6d22ab21a818a66544a670705c483.html">row</a></li><li class="navelem"><a class="el" href="row0log_8cc.html">row0log.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
