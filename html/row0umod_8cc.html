<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/row/row0umod.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('row0umod_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">row0umod.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Undo modify of a row.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &quot;<a class="el" href="btr0btr_8h_source.html">btr0btr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0boot_8h_source.html">dict0boot.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0dd_8h_source.html">dict0dd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0dict_8h_source.html">dict0dict.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ha__prototypes_8h_source.html">ha_prototypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log0log_8h_source.html">log0log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mach0data_8h_source.html">mach0data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0que_8h_source.html">que0que.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0log_8h_source.html">row0log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0row_8h_source.html">row0row.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0umod_8h_source.html">row0umod.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0undo_8h_source.html">row0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0upd_8h_source.html">row0upd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0vers_8h_source.html">row0vers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rec_8h_source.html">trx0rec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0roll_8h_source.html">trx0roll.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0undo_8h_source.html">trx0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="current__thd_8h_source.html">current_thd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug__sync_8h_source.html">debug_sync.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae710f0483d4217c2119e5bde49deff5c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#ae710f0483d4217c2119e5bde49deff5c">row_undo_mod_clust_low</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, ulint **offsets, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> **offsets_heap, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, const <a class="el" href="structdtuple__t.html">dtuple_t</a> **rebuilt_old_pk, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *sys, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr, ulint mode)</td></tr>
<tr class="memdesc:ae710f0483d4217c2119e5bde49deff5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify in a clustered index record.  <a href="#ae710f0483d4217c2119e5bde49deff5c">More...</a><br /></td></tr>
<tr class="separator:ae710f0483d4217c2119e5bde49deff5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2c86d2433134e355c7d86487debd9b2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#ad2c86d2433134e355c7d86487debd9b2">row_undo_mod_remove_clust_low</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr, ulint mode)</td></tr>
<tr class="memdesc:ad2c86d2433134e355c7d86487debd9b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purges a clustered index record after undo if possible.  <a href="#ad2c86d2433134e355c7d86487debd9b2">More...</a><br /></td></tr>
<tr class="separator:ad2c86d2433134e355c7d86487debd9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b5d9eee7dc34e560f0e35312117a47"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#a16b5d9eee7dc34e560f0e35312117a47">row_undo_mod_clust</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memdesc:a16b5d9eee7dc34e560f0e35312117a47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify in a clustered index record.  <a href="#a16b5d9eee7dc34e560f0e35312117a47">More...</a><br /></td></tr>
<tr class="separator:a16b5d9eee7dc34e560f0e35312117a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae04e5fa36c01b2f845a4449195b9d96e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#ae04e5fa36c01b2f845a4449195b9d96e">row_undo_mod_del_mark_or_remove_sec_low</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdtuple__t.html">dtuple_t</a> *<a class="el" href="completion__hash_8h.html#aea3abbd5a90d07f8abee93d6c28bce9a">entry</a>, ulint mode)</td></tr>
<tr class="memdesc:ae04e5fa36c01b2f845a4449195b9d96e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete marks or removes a secondary index entry if found.  <a href="#ae04e5fa36c01b2f845a4449195b9d96e">More...</a><br /></td></tr>
<tr class="separator:ae04e5fa36c01b2f845a4449195b9d96e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32b0accf745483c6959bf1ee53c5b4a2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#a32b0accf745483c6959bf1ee53c5b4a2">row_undo_mod_del_mark_or_remove_sec</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdtuple__t.html">dtuple_t</a> *<a class="el" href="completion__hash_8h.html#aea3abbd5a90d07f8abee93d6c28bce9a">entry</a>)</td></tr>
<tr class="memdesc:a32b0accf745483c6959bf1ee53c5b4a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete marks or removes a secondary index entry if found.  <a href="#a32b0accf745483c6959bf1ee53c5b4a2">More...</a><br /></td></tr>
<tr class="separator:a32b0accf745483c6959bf1ee53c5b4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58b5104021c0649e6cc778fc717a081"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#ad58b5104021c0649e6cc778fc717a081">row_undo_mod_del_unmark_sec_and_undo_update</a> (ulint mode, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdtuple__t.html">dtuple_t</a> *<a class="el" href="completion__hash_8h.html#aea3abbd5a90d07f8abee93d6c28bce9a">entry</a>, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> undo_no)</td></tr>
<tr class="memdesc:ad58b5104021c0649e6cc778fc717a081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete unmarks a secondary index entry which must be found.  <a href="#ad58b5104021c0649e6cc778fc717a081">More...</a><br /></td></tr>
<tr class="separator:ad58b5104021c0649e6cc778fc717a081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1c2ff1c0daa58e618d36047bd2c0ea"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#a9f1c2ff1c0daa58e618d36047bd2c0ea">row_undo_mod_sec_flag_corrupted</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a9f1c2ff1c0daa58e618d36047bd2c0ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags a secondary index corrupted.  <a href="#a9f1c2ff1c0daa58e618d36047bd2c0ea">More...</a><br /></td></tr>
<tr class="separator:a9f1c2ff1c0daa58e618d36047bd2c0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0dc50200d71392897e05d8199851e0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#a4c0dc50200d71392897e05d8199851e0">row_undo_mod_upd_del_multi_sec</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a4c0dc50200d71392897e05d8199851e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify in secondary indexes when undo record type is UPD_DEL.  <a href="#a4c0dc50200d71392897e05d8199851e0">More...</a><br /></td></tr>
<tr class="separator:a4c0dc50200d71392897e05d8199851e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf958e516697abc927fa70968c31e2f7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#acf958e516697abc927fa70968c31e2f7">row_undo_mod_upd_del_sec</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memdesc:acf958e516697abc927fa70968c31e2f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify in secondary indexes when undo record type is UPD_DEL.  <a href="#acf958e516697abc927fa70968c31e2f7">More...</a><br /></td></tr>
<tr class="separator:acf958e516697abc927fa70968c31e2f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10098214f6c80b857e9d1a9c7b229722"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#a10098214f6c80b857e9d1a9c7b229722">row_undo_mod_del_mark_multi_sec</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a10098214f6c80b857e9d1a9c7b229722"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify in secondary indexes when undo record type is DEL_MARK.  <a href="#a10098214f6c80b857e9d1a9c7b229722">More...</a><br /></td></tr>
<tr class="separator:a10098214f6c80b857e9d1a9c7b229722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a025af06f6c0cebe0341d0df99b581b48"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#a025af06f6c0cebe0341d0df99b581b48">row_undo_mod_del_mark_sec</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memdesc:a025af06f6c0cebe0341d0df99b581b48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify in secondary indexes when undo record type is DEL_MARK.  <a href="#a025af06f6c0cebe0341d0df99b581b48">More...</a><br /></td></tr>
<tr class="separator:a025af06f6c0cebe0341d0df99b581b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af372a67a68c20091cd9dd8ecbcad7916"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#af372a67a68c20091cd9dd8ecbcad7916">row_undo_mod_upd_exist_multi_sec</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> non_mv_upd, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:af372a67a68c20091cd9dd8ecbcad7916"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify in secondary indexes when undo record type is UPD_EXIST.  <a href="#af372a67a68c20091cd9dd8ecbcad7916">More...</a><br /></td></tr>
<tr class="separator:af372a67a68c20091cd9dd8ecbcad7916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bfa001a2d7faacac8d527164f6f1fc1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#a0bfa001a2d7faacac8d527164f6f1fc1">row_undo_mod_upd_exist_sec</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memdesc:a0bfa001a2d7faacac8d527164f6f1fc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify in secondary indexes when undo record type is UPD_EXIST.  <a href="#a0bfa001a2d7faacac8d527164f6f1fc1">More...</a><br /></td></tr>
<tr class="separator:a0bfa001a2d7faacac8d527164f6f1fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1e06998a55506653d35f813650f13c6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#aa1e06998a55506653d35f813650f13c6">row_undo_mod_parse_undo_rec</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classMDL__ticket.html">MDL_ticket</a> **mdl)</td></tr>
<tr class="memdesc:aa1e06998a55506653d35f813650f13c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the row reference and other info in a modify undo log record.  <a href="#aa1e06998a55506653d35f813650f13c6">More...</a><br /></td></tr>
<tr class="separator:aa1e06998a55506653d35f813650f13c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af96e454b8512b100d0f7e81f2e45be18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0umod_8cc.html#af96e454b8512b100d0f7e81f2e45be18">row_undo_mod</a> (<a class="el" href="structundo__node__t.html">undo_node_t</a> *node, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr)</td></tr>
<tr class="memdesc:af96e454b8512b100d0f7e81f2e45be18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undoes a modify operation on a row of a table.  <a href="#af96e454b8512b100d0f7e81f2e45be18">More...</a><br /></td></tr>
<tr class="separator:af96e454b8512b100d0f7e81f2e45be18"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Undo modify of a row. </p>
<p>Created 2/27/1997 Heikki Tuuri </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="af96e454b8512b100d0f7e81f2e45be18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af96e454b8512b100d0f7e81f2e45be18">&#9670;&nbsp;</a></span>row_undo_mod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Undoes a modify operation on a row of a table. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a16b5d9eee7dc34e560f0e35312117a47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b5d9eee7dc34e560f0e35312117a47">&#9670;&nbsp;</a></span>row_undo_mod_clust()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_clust </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undoes a modify in a clustered index record. </p>
<p>Sets also the node state for the next round of undo. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code: we may run out of file space </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae710f0483d4217c2119e5bde49deff5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae710f0483d4217c2119e5bde49deff5c">&#9670;&nbsp;</a></span>row_undo_mod_clust_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_clust_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint **&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> **&#160;</td>
          <td class="paramname"><em>offsets_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>rebuilt_old_pk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>sys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undoes a modify in a clustered index record. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, DB_FAIL, or error code: we may run out of file space </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">offsets</td><td>out: rec_get_offsets() on the record </td></tr>
    <tr><td class="paramname">offsets_heap</td><td>in/out: memory heap that can be emptied </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
    <tr><td class="paramname">rebuilt_old_pk</td><td>out: row_log_table_get_pk() before the update, or NULL if the table is not being rebuilt online or the PRIMARY KEY definition does not change </td></tr>
    <tr><td class="paramname">sys</td><td>out: DB_TRX_ID, DB_ROLL_PTR for row_log_table_delete() </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr; must be committed before latching any further pages </td></tr>
    <tr><td class="paramname">mode</td><td>in: BTR_MODIFY_LEAF or BTR_MODIFY_TREE </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a10098214f6c80b857e9d1a9c7b229722"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10098214f6c80b857e9d1a9c7b229722">&#9670;&nbsp;</a></span>row_undo_mod_del_mark_multi_sec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_del_mark_multi_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undoes a modify in secondary indexes when undo record type is DEL_MARK. </p>
<p>This is the specific function to handle the modify on multi-value indexes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">node</td><td>row undo node </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">thr</td><td>query thread </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the multi-value index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or DB_OUT_OF_FILE_SPACE </dd></dl>

</div>
</div>
<a id="a32b0accf745483c6959bf1ee53c5b4a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32b0accf745483c6959bf1ee53c5b4a2">&#9670;&nbsp;</a></span>row_undo_mod_del_mark_or_remove_sec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_del_mark_or_remove_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete marks or removes a secondary index entry if found. </p>
<p>NOTE that if we updated the fields of a delete-marked secondary index record so that alphabetically they stayed the same, e.g., 'abc' -&gt; 'aBc', we cannot return to the original values because we do not know them. But this should not cause problems because in row0sel.cc, in queries we always retrieve the clustered index record or an earlier version of it, if the secondary index record through which we do the search is delete-marked. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or DB_OUT_OF_FILE_SPACE </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
    <tr><td class="paramname">index</td><td>in: index </td></tr>
    <tr><td class="paramname">entry</td><td>in: index entry </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae04e5fa36c01b2f845a4449195b9d96e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae04e5fa36c01b2f845a4449195b9d96e">&#9670;&nbsp;</a></span>row_undo_mod_del_mark_or_remove_sec_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_del_mark_or_remove_sec_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete marks or removes a secondary index entry if found. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, DB_FAIL, or DB_OUT_OF_FILE_SPACE </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
    <tr><td class="paramname">index</td><td>in: index </td></tr>
    <tr><td class="paramname">entry</td><td>in: index entry </td></tr>
    <tr><td class="paramname">mode</td><td>in: latch mode BTR_MODIFY_LEAF or BTR_MODIFY_TREE </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a025af06f6c0cebe0341d0df99b581b48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a025af06f6c0cebe0341d0df99b581b48">&#9670;&nbsp;</a></span>row_undo_mod_del_mark_sec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_del_mark_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undoes a modify in secondary indexes when undo record type is DEL_MARK. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or DB_OUT_OF_FILE_SPACE </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad58b5104021c0649e6cc778fc717a081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad58b5104021c0649e6cc778fc717a081">&#9670;&nbsp;</a></span>row_undo_mod_del_unmark_sec_and_undo_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_del_unmark_sec_and_undo_update </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td>
          <td class="paramname"><em>undo_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete unmarks a secondary index entry which must be found. </p>
<p>It might not be delete-marked at the moment, but it does not harm to unmark it anyway. We also need to update the fields of the secondary index record if we updated its fields but alphabetically they stayed the same, e.g., 'abc' -&gt; 'aBc'. </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DB_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">DB_FAIL</td><td>if BTR_MODIFY_TREE should be tried </td></tr>
    <tr><td class="paramname">DB_OUT_OF_FILE_SPACE</td><td>when running out of tablespace </td></tr>
    <tr><td class="paramname">DB_DUPLICATE_KEY</td><td>if the value was missing and an insert would lead to a duplicate exists </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>in: search mode: BTR_MODIFY_LEAF or BTR_MODIFY_TREE </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
    <tr><td class="paramname">index</td><td>in: index </td></tr>
    <tr><td class="paramname">entry</td><td>in: index entry </td></tr>
    <tr><td class="paramname">undo_no</td><td>in: undo number upto which to rollback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1e06998a55506653d35f813650f13c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1e06998a55506653d35f813650f13c6">&#9670;&nbsp;</a></span>row_undo_mod_parse_undo_rec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void row_undo_mod_parse_undo_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> **&#160;</td>
          <td class="paramname"><em>mdl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parses the row reference and other info in a modify undo log record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">node</td><td>row undo node </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>THD associated with the node </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mdl</td><td>MDL ticket or nullptr if unnecessary </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2c86d2433134e355c7d86487debd9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2c86d2433134e355c7d86487debd9b2">&#9670;&nbsp;</a></span>row_undo_mod_remove_clust_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_remove_clust_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Purges a clustered index record after undo if possible. </p>
<p>This is attempted when the record was inserted by updating a delete-marked record and there no longer exist transactions that would see the delete-marked record. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, DB_FAIL, or error code: we may run out of file space </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">mtr</td><td>in/out: mini-transaction </td></tr>
    <tr><td class="paramname">mode</td><td>in: BTR_MODIFY_LEAF or BTR_MODIFY_TREE </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f1c2ff1c0daa58e618d36047bd2c0ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f1c2ff1c0daa58e618d36047bd2c0ea">&#9670;&nbsp;</a></span>row_undo_mod_sec_flag_corrupted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void row_undo_mod_sec_flag_corrupted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flags a secondary index corrupted. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
    <tr><td class="paramname">index</td><td>in: secondary index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4c0dc50200d71392897e05d8199851e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0dc50200d71392897e05d8199851e0">&#9670;&nbsp;</a></span>row_undo_mod_upd_del_multi_sec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_upd_del_multi_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undoes a modify in secondary indexes when undo record type is UPD_DEL. </p>
<p>This is the specific function to handle the modify on multi-value indexes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">node</td><td>row undo node </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">thr</td><td>query thread </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the multi-value index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or DB_OUT_OF_FILE_SPACE </dd></dl>

</div>
</div>
<a id="acf958e516697abc927fa70968c31e2f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf958e516697abc927fa70968c31e2f7">&#9670;&nbsp;</a></span>row_undo_mod_upd_del_sec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_upd_del_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undoes a modify in secondary indexes when undo record type is UPD_DEL. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or DB_OUT_OF_FILE_SPACE </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af372a67a68c20091cd9dd8ecbcad7916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af372a67a68c20091cd9dd8ecbcad7916">&#9670;&nbsp;</a></span>row_undo_mod_upd_exist_multi_sec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_upd_exist_multi_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>non_mv_upd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undoes a modify in secondary indexes when undo record type is UPD_EXIST. </p>
<p>This is the specific function to handle the modify on multi-value indexes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">node</td><td>row undo node </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">thr</td><td>query thread </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the multi-value index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">non_mv_upd</td><td>true if any non-multi-value field on the index gets updated too </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or DB_OUT_OF_FILE_SPACE </dd></dl>

</div>
</div>
<a id="a0bfa001a2d7faacac8d527164f6f1fc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bfa001a2d7faacac8d527164f6f1fc1">&#9670;&nbsp;</a></span>row_undo_mod_upd_exist_sec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_undo_mod_upd_exist_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo__node__t.html">undo_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undoes a modify in secondary indexes when undo record type is UPD_EXIST. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or DB_OUT_OF_FILE_SPACE </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: row undo node </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_4dd6d22ab21a818a66544a670705c483.html">row</a></li><li class="navelem"><a class="el" href="row0umod_8cc.html">row0umod.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
