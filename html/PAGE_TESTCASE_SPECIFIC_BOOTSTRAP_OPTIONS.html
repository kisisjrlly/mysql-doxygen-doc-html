<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Specifying Test Case-Specific Bootstrap Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('PAGE_TESTCASE_SPECIFIC_BOOTSTRAP_OPTIONS.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Specifying Test Case-Specific Bootstrap Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>If a test has to run with a particular value of a bootstrap variable such as <b><code>--innodb-page-size</code></b> or <b><code>--innodb-data-file-path</code></b>, the option can be passed on the command line while running <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a>.</p>
<p>For example, consider a test that can only run with <b><code>--innodb-page-size</code>=8k</b>. The test can be run like this:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl test_name_8k --initialize=--innodb-page-size=8k
</pre><p>This will initialize the data directory with 8k page size, and start the server with that value.</p>
<p>It is also possible to pass bootstrap options in the <b>master.opt</b> file of the test, so that the test can run with the specified value of the bootstrap options without using any command line arguments. The usage is:</p>
<pre class="fragment">--initialize --innodb-page-size=8k
</pre><p>or</p>
<pre class="fragment">--initialize=--innodb-page-size=8k
</pre><p>Specifying bootstrap variables in the opt file is the preferred method.</p>
<p>Each bootstrap variable must be specified as the value of a <b><code>--initialize</code></b> option in the opt file to ensure <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> recognizes that the variable must be used during server initialization. If there are bootstrap options in the file, the current data directory is deleted, and initialized again with the options set in the file. The server is also started with the bootstrap options passed along with the other options in the opt file.</p>
<p>Similarly, bootstrap options passed in the <b>slave.opt</b> will be used to reinitialize the slave server in replication scenarios.</p>
<p>Bootstrap options set in the opt file are passed to the server first, followed by the server options. So, server start up options have precedence over bootstrap options, regardless of the order in which they are set in the opt file.</p>
<p>Note that since the bootstrap options are passed in the opt files, they have precedence over the command line bootstrap options. So, if a test has a master.opt file containing <b><code>--innodb-page-size</code>=8k</b>, and while it is being run, <b><code>--innodb-page-size</code>=4k</b> is passed on the command line, the test will run with <b>8k</b> page size.</p>
<p>Some tests require the server to be restarted multiple times with different server options, as well different bootstrap options. In such cases, the existing data directory is deleted inside the test and a new data directory is initialized with the bootstrap options. When the server is started with the bootstrap options after this, the SQL queries will run with the specified options.</p>
<pre class="fragment">--exec $MYSQLD --no-defaults --initialize-insecure
--lc_messages_dir=$MYSQL_SHAREDIR --innodb_page_size=8K
--basedir=$MYSQLD_BASEDIR --datadir=$MYSQL_TMP_DIR/datadir1/data
--init-file=$BOOTSTRAP_SQL --secure-file-priv=""
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="PAGE_TESTING_TOOLS.html">Testing Tools</a></li><li class="navelem"><a class="el" href="PAGE_MYSQL_TEST_RUN.html">The MySQL Test Framework</a></li><li class="navelem"><a class="el" href="PAGE_WRITING_TESTCASES.html">Writing Test Cases</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
