<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: MDL_context Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classMDL__context.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classMDL__context-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MDL_context Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Context of the owner of metadata locks.  
 <a href="classMDL__context.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mdl_8h_source.html">mdl.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ab0e1989a324f4a2918656245963f23fa"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classI__P__List.html">I_P_List</a>&lt; <a class="el" href="classMDL__ticket.html">MDL_ticket</a>, <a class="el" href="structI__P__List__adapter.html">I_P_List_adapter</a>&lt; <a class="el" href="classMDL__ticket.html">MDL_ticket</a>, &amp;<a class="el" href="classMDL__ticket.html#a74155707577dfd12cc7f47229e4f0d17">MDL_ticket::next_in_context</a>, &amp;<a class="el" href="classMDL__ticket.html#a88281cdb21f74551799ae0940b89aed1">MDL_ticket::prev_in_context</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ab0e1989a324f4a2918656245963f23fa">Ticket_list</a></td></tr>
<tr class="separator:ab0e1989a324f4a2918656245963f23fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c46960d79806f52abbf0ba43af6ad04"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classI__P__List.html#ae93e3648df7beb86049f429074a451cf">Ticket_list::Iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a0c46960d79806f52abbf0ba43af6ad04">Ticket_iterator</a></td></tr>
<tr class="separator:a0c46960d79806f52abbf0ba43af6ad04"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a21b35ef90597dcd411bf091acd1f4a38"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a21b35ef90597dcd411bf091acd1f4a38">MDL_context</a> ()</td></tr>
<tr class="memdesc:a21b35ef90597dcd411bf091acd1f4a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a metadata locking context.  <a href="#a21b35ef90597dcd411bf091acd1f4a38">More...</a><br /></td></tr>
<tr class="separator:a21b35ef90597dcd411bf091acd1f4a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af01a1f42bd9ed050556c434fb6d007ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#af01a1f42bd9ed050556c434fb6d007ac">destroy</a> ()</td></tr>
<tr class="memdesc:af01a1f42bd9ed050556c434fb6d007ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy metadata locking context.  <a href="#af01a1f42bd9ed050556c434fb6d007ac">More...</a><br /></td></tr>
<tr class="separator:af01a1f42bd9ed050556c434fb6d007ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6d07a861aaf9db6fda46da196a8b0d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ab6d07a861aaf9db6fda46da196a8b0d0">try_acquire_lock</a> (<a class="el" href="classMDL__request.html">MDL_request</a> *mdl_request)</td></tr>
<tr class="memdesc:ab6d07a861aaf9db6fda46da196a8b0d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to acquire one lock.  <a href="#ab6d07a861aaf9db6fda46da196a8b0d0">More...</a><br /></td></tr>
<tr class="separator:ab6d07a861aaf9db6fda46da196a8b0d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3265f31ae9a90cc8da5b170651b46490"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a3265f31ae9a90cc8da5b170651b46490">acquire_lock</a> (<a class="el" href="classMDL__request.html">MDL_request</a> *mdl_request, <a class="el" href="my__systime_8h.html#aefa3851a2bb36f7eaa5a3164f7e881c4">Timeout_type</a> lock_wait_timeout)</td></tr>
<tr class="memdesc:a3265f31ae9a90cc8da5b170651b46490"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire one lock with waiting for conflicting locks to go away if needed.  <a href="#a3265f31ae9a90cc8da5b170651b46490">More...</a><br /></td></tr>
<tr class="separator:a3265f31ae9a90cc8da5b170651b46490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa5e00a320cf0faba45130a5be74349"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a0fa5e00a320cf0faba45130a5be74349">acquire_locks</a> (<a class="el" href="mdl_8h.html#a1e6fbbe4110a5b3e32f1a8c13dd1a329">MDL_request_list</a> *requests, <a class="el" href="my__systime_8h.html#aefa3851a2bb36f7eaa5a3164f7e881c4">Timeout_type</a> lock_wait_timeout)</td></tr>
<tr class="memdesc:a0fa5e00a320cf0faba45130a5be74349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire exclusive locks.  <a href="#a0fa5e00a320cf0faba45130a5be74349">More...</a><br /></td></tr>
<tr class="separator:a0fa5e00a320cf0faba45130a5be74349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac66b8449ef9dfb1658d2dd9fc0427dbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ac66b8449ef9dfb1658d2dd9fc0427dbc">upgrade_shared_lock</a> (<a class="el" href="classMDL__ticket.html">MDL_ticket</a> *mdl_ticket, <a class="el" href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a> new_type, <a class="el" href="my__systime_8h.html#aefa3851a2bb36f7eaa5a3164f7e881c4">Timeout_type</a> lock_wait_timeout)</td></tr>
<tr class="memdesc:ac66b8449ef9dfb1658d2dd9fc0427dbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upgrade a shared metadata lock.  <a href="#ac66b8449ef9dfb1658d2dd9fc0427dbc">More...</a><br /></td></tr>
<tr class="separator:ac66b8449ef9dfb1658d2dd9fc0427dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ed5299b1da65397a7e6972425b5f2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a74ed5299b1da65397a7e6972425b5f2d">clone_ticket</a> (<a class="el" href="classMDL__request.html">MDL_request</a> *mdl_request)</td></tr>
<tr class="memdesc:a74ed5299b1da65397a7e6972425b5f2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a copy of a granted ticket.  <a href="#a74ed5299b1da65397a7e6972425b5f2d">More...</a><br /></td></tr>
<tr class="separator:a74ed5299b1da65397a7e6972425b5f2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2023a0378cf0559f66c34219e184404e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a2023a0378cf0559f66c34219e184404e">clone_tickets</a> (const <a class="el" href="classMDL__context.html">MDL_context</a> *ticket_owner, <a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a> duration)</td></tr>
<tr class="memdesc:a2023a0378cf0559f66c34219e184404e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create copy of all granted tickets of particular duration from given context to current context.  <a href="#a2023a0378cf0559f66c34219e184404e">More...</a><br /></td></tr>
<tr class="separator:a2023a0378cf0559f66c34219e184404e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73bd65389a74778433291eb2d426c71f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a73bd65389a74778433291eb2d426c71f">release_all_locks_for_name</a> (<a class="el" href="classMDL__ticket.html">MDL_ticket</a> *ticket)</td></tr>
<tr class="memdesc:a73bd65389a74778433291eb2d426c71f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release all explicit locks in the context which correspond to the same name/object as this lock request.  <a href="#a73bd65389a74778433291eb2d426c71f">More...</a><br /></td></tr>
<tr class="separator:a73bd65389a74778433291eb2d426c71f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71874a5e485217650429849ab29ed43b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a71874a5e485217650429849ab29ed43b">release_locks</a> (<a class="el" href="classMDL__release__locks__visitor.html">MDL_release_locks_visitor</a> *visitor)</td></tr>
<tr class="memdesc:a71874a5e485217650429849ab29ed43b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release all explicit locks in the context for which the release() method of the provided visitor evalates to true.  <a href="#a71874a5e485217650429849ab29ed43b">More...</a><br /></td></tr>
<tr class="separator:a71874a5e485217650429849ab29ed43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d0df5eb422cbfa9a4225218c76141f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a58d0df5eb422cbfa9a4225218c76141f">release_lock</a> (<a class="el" href="classMDL__ticket.html">MDL_ticket</a> *ticket)</td></tr>
<tr class="memdesc:a58d0df5eb422cbfa9a4225218c76141f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release lock with explicit duration.  <a href="#a58d0df5eb422cbfa9a4225218c76141f">More...</a><br /></td></tr>
<tr class="separator:a58d0df5eb422cbfa9a4225218c76141f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14bf2ba9d0ec737e9db734fc5a198183"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a14bf2ba9d0ec737e9db734fc5a198183">owns_equal_or_stronger_lock</a> (const <a class="el" href="structMDL__key.html">MDL_key</a> *mdl_key, <a class="el" href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a> mdl_type)</td></tr>
<tr class="memdesc:a14bf2ba9d0ec737e9db734fc5a198183"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary function which allows to check if we have some kind of lock on a object.  <a href="#a14bf2ba9d0ec737e9db734fc5a198183">More...</a><br /></td></tr>
<tr class="separator:a14bf2ba9d0ec737e9db734fc5a198183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adffac048f9ce71eb3a5e3b1a38178fdc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#adffac048f9ce71eb3a5e3b1a38178fdc">owns_equal_or_stronger_lock</a> (<a class="el" href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a> mdl_namespace, const char *db, const char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>, <a class="el" href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a> mdl_type)</td></tr>
<tr class="memdesc:adffac048f9ce71eb3a5e3b1a38178fdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary function which allows to check if we have some kind of lock on a object.  <a href="#adffac048f9ce71eb3a5e3b1a38178fdc">More...</a><br /></td></tr>
<tr class="separator:adffac048f9ce71eb3a5e3b1a38178fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf6eddf26617c84f0c2c21af8ec4a94"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a7cf6eddf26617c84f0c2c21af8ec4a94">find_lock_owner</a> (const <a class="el" href="structMDL__key.html">MDL_key</a> *mdl_key, <a class="el" href="classMDL__context__visitor.html">MDL_context_visitor</a> *visitor)</td></tr>
<tr class="memdesc:a7cf6eddf26617c84f0c2c21af8ec4a94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the first context which owns the lock and inspect it by calling MDL_context_visitor::visit_context() method.  <a href="#a7cf6eddf26617c84f0c2c21af8ec4a94">More...</a><br /></td></tr>
<tr class="separator:a7cf6eddf26617c84f0c2c21af8ec4a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc9db02d0a60b144fd35770424ba1ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#adfc9db02d0a60b144fd35770424ba1ae">has_lock</a> (const <a class="el" href="classMDL__savepoint.html">MDL_savepoint</a> &amp;<a class="el" href="classMDL__context.html#a213edf20be43313e0346a489c2f47dd6">mdl_savepoint</a>, <a class="el" href="classMDL__ticket.html">MDL_ticket</a> *mdl_ticket)</td></tr>
<tr class="memdesc:adfc9db02d0a60b144fd35770424ba1ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does this savepoint have this lock?  <a href="#adfc9db02d0a60b144fd35770424ba1ae">More...</a><br /></td></tr>
<tr class="separator:adfc9db02d0a60b144fd35770424ba1ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae36680261ff26d6eb9ea19e2a290294d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ae36680261ff26d6eb9ea19e2a290294d">has_locks</a> () const</td></tr>
<tr class="separator:ae36680261ff26d6eb9ea19e2a290294d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ff2d2559c4ef5075b63978ae516df6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a3ff2d2559c4ef5075b63978ae516df6e">has_locks</a> (<a class="el" href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a> mdl_namespace) const</td></tr>
<tr class="memdesc:a3ff2d2559c4ef5075b63978ae516df6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does this context have an lock of the given namespace?  <a href="#a3ff2d2559c4ef5075b63978ae516df6e">More...</a><br /></td></tr>
<tr class="separator:a3ff2d2559c4ef5075b63978ae516df6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77b38a67ffb56d071a98efc8879bac6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ab77b38a67ffb56d071a98efc8879bac6">has_locks_waited_for</a> () const</td></tr>
<tr class="memdesc:ab77b38a67ffb56d071a98efc8879bac6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do we hold any locks which are possibly being waited for by another MDL_context?  <a href="#ab77b38a67ffb56d071a98efc8879bac6">More...</a><br /></td></tr>
<tr class="separator:ab77b38a67ffb56d071a98efc8879bac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31cf8bad7c905c8ae85921b4ace5ac4a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a31cf8bad7c905c8ae85921b4ace5ac4a">has_locks</a> (<a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a> duration)</td></tr>
<tr class="separator:a31cf8bad7c905c8ae85921b4ace5ac4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a213edf20be43313e0346a489c2f47dd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__savepoint.html">MDL_savepoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a213edf20be43313e0346a489c2f47dd6">mdl_savepoint</a> ()</td></tr>
<tr class="separator:a213edf20be43313e0346a489c2f47dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a357599f5af7c6ec7587ecb7b349f0313"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a357599f5af7c6ec7587ecb7b349f0313">set_explicit_duration_for_all_locks</a> ()</td></tr>
<tr class="memdesc:a357599f5af7c6ec7587ecb7b349f0313"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set explicit duration for all locks in the context.  <a href="#a357599f5af7c6ec7587ecb7b349f0313">More...</a><br /></td></tr>
<tr class="separator:a357599f5af7c6ec7587ecb7b349f0313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b07243d69f1354e3bb5936dd6ded15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ad1b07243d69f1354e3bb5936dd6ded15">set_transaction_duration_for_all_locks</a> ()</td></tr>
<tr class="memdesc:ad1b07243d69f1354e3bb5936dd6ded15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set transactional duration for all locks in the context.  <a href="#ad1b07243d69f1354e3bb5936dd6ded15">More...</a><br /></td></tr>
<tr class="separator:ad1b07243d69f1354e3bb5936dd6ded15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5836b7c79f957c575c90ad4f1d8296de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a5836b7c79f957c575c90ad4f1d8296de">set_lock_duration</a> (<a class="el" href="classMDL__ticket.html">MDL_ticket</a> *mdl_ticket, <a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a> duration)</td></tr>
<tr class="memdesc:a5836b7c79f957c575c90ad4f1d8296de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change lock duration for transactional lock.  <a href="#a5836b7c79f957c575c90ad4f1d8296de">More...</a><br /></td></tr>
<tr class="separator:a5836b7c79f957c575c90ad4f1d8296de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55150d0bbe77cf0cd38e7005a4330e44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a55150d0bbe77cf0cd38e7005a4330e44">release_statement_locks</a> ()</td></tr>
<tr class="separator:a55150d0bbe77cf0cd38e7005a4330e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce65a72bedc0c4384b2b4c231c070ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#afce65a72bedc0c4384b2b4c231c070ed">release_transactional_locks</a> ()</td></tr>
<tr class="memdesc:afce65a72bedc0c4384b2b4c231c070ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release locks acquired by normal statements (SELECT, UPDATE, DELETE, etc) in the course of a transaction.  <a href="#afce65a72bedc0c4384b2b4c231c070ed">More...</a><br /></td></tr>
<tr class="separator:afce65a72bedc0c4384b2b4c231c070ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863ff94d0928e9720df30643835e4ef0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a863ff94d0928e9720df30643835e4ef0">rollback_to_savepoint</a> (const <a class="el" href="classMDL__savepoint.html">MDL_savepoint</a> &amp;<a class="el" href="classMDL__context.html#a213edf20be43313e0346a489c2f47dd6">mdl_savepoint</a>)</td></tr>
<tr class="memdesc:a863ff94d0928e9720df30643835e4ef0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases metadata locks that were acquired after a specific savepoint.  <a href="#a863ff94d0928e9720df30643835e4ef0">More...</a><br /></td></tr>
<tr class="separator:a863ff94d0928e9720df30643835e4ef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa476fbd9d7d0352352d551279e853314"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__context__owner.html">MDL_context_owner</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#aa476fbd9d7d0352352d551279e853314">get_owner</a> () const</td></tr>
<tr class="separator:aa476fbd9d7d0352352d551279e853314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3563d6d05aeb758f495f44c123c5306b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a3563d6d05aeb758f495f44c123c5306b">get_deadlock_weight</a> () const</td></tr>
<tr class="separator:a3563d6d05aeb758f495f44c123c5306b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c29aa7919001edcdfaa82bc360c65df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a4c29aa7919001edcdfaa82bc360c65df">init</a> (<a class="el" href="classMDL__context__owner.html">MDL_context_owner</a> *arg)</td></tr>
<tr class="separator:a4c29aa7919001edcdfaa82bc360c65df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74608d443dfc4754ce1b14c672a914f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a74608d443dfc4754ce1b14c672a914f1">set_needs_thr_lock_abort</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> needs_thr_lock_abort)</td></tr>
<tr class="separator:a74608d443dfc4754ce1b14c672a914f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc1ba94d5bbd550b7e1d0ab88882060"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#adbc1ba94d5bbd550b7e1d0ab88882060">get_needs_thr_lock_abort</a> () const</td></tr>
<tr class="separator:adbc1ba94d5bbd550b7e1d0ab88882060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39728ceab1f092a3bf1e8a4ec168f9bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a39728ceab1f092a3bf1e8a4ec168f9bb">set_force_dml_deadlock_weight</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> force_dml_deadlock_weight)</td></tr>
<tr class="separator:a39728ceab1f092a3bf1e8a4ec168f9bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6023ebdf937cfcbf9991b10945ad952f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a6023ebdf937cfcbf9991b10945ad952f">get_random</a> ()</td></tr>
<tr class="memdesc:a6023ebdf937cfcbf9991b10945ad952f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get pseudo random value in [0 .  <a href="#a6023ebdf937cfcbf9991b10945ad952f">More...</a><br /></td></tr>
<tr class="separator:a6023ebdf937cfcbf9991b10945ad952f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2260019c16977e8ed6aba3081f16348f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTHD.html">THD</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a2260019c16977e8ed6aba3081f16348f">get_thd</a> () const</td></tr>
<tr class="memdesc:a2260019c16977e8ed6aba3081f16348f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Within MDL subsystem this one is only used for DEBUG_SYNC.  <a href="#a2260019c16977e8ed6aba3081f16348f">More...</a><br /></td></tr>
<tr class="separator:a2260019c16977e8ed6aba3081f16348f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e75a7f44e5bc687620aff289a00f52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#aa0e75a7f44e5bc687620aff289a00f52">find_deadlock</a> ()</td></tr>
<tr class="memdesc:aa0e75a7f44e5bc687620aff289a00f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to find a deadlock.  <a href="#aa0e75a7f44e5bc687620aff289a00f52">More...</a><br /></td></tr>
<tr class="separator:aa0e75a7f44e5bc687620aff289a00f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab778763f11b187ab171213c9fa08846e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ab778763f11b187ab171213c9fa08846e">visit_subgraph</a> (<a class="el" href="classMDL__wait__for__graph__visitor.html">MDL_wait_for_graph_visitor</a> *dvisitor)</td></tr>
<tr class="memdesc:ab778763f11b187ab171213c9fa08846e"><td class="mdescLeft">&#160;</td><td class="mdescRight">A fragment of recursive traversal of the wait-for graph of MDL contexts in the server in search for deadlocks.  <a href="#ab778763f11b187ab171213c9fa08846e">More...</a><br /></td></tr>
<tr class="separator:ab778763f11b187ab171213c9fa08846e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd74a4227cf8ddea993d96ee3be25331"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#afd74a4227cf8ddea993d96ee3be25331">will_wait_for</a> (<a class="el" href="classMDL__wait__for__subgraph.html">MDL_wait_for_subgraph</a> *waiting_for_arg)</td></tr>
<tr class="memdesc:afd74a4227cf8ddea993d96ee3be25331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inform the deadlock detector there is an edge in the wait-for graph.  <a href="#afd74a4227cf8ddea993d96ee3be25331">More...</a><br /></td></tr>
<tr class="separator:afd74a4227cf8ddea993d96ee3be25331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5d3fb033110d449d894c95f33f6d9b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ad5d3fb033110d449d894c95f33f6d9b1">done_waiting_for</a> ()</td></tr>
<tr class="memdesc:ad5d3fb033110d449d894c95f33f6d9b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the wait-for edge from the graph after we're done waiting.  <a href="#ad5d3fb033110d449d894c95f33f6d9b1">More...</a><br /></td></tr>
<tr class="separator:ad5d3fb033110d449d894c95f33f6d9b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca0ec235888a94af4dd25107a8af389"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#aaca0ec235888a94af4dd25107a8af389">lock_deadlock_victim</a> ()</td></tr>
<tr class="separator:aaca0ec235888a94af4dd25107a8af389"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a0ef8ba360e3d48885f711723aa3ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#af3a0ef8ba360e3d48885f711723aa3ea">unlock_deadlock_victim</a> ()</td></tr>
<tr class="separator:af3a0ef8ba360e3d48885f711723aa3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aeaf51be6c5480bb1e718aea933f55d9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__wait.html">MDL_wait</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#aeaf51be6c5480bb1e718aea933f55d9d">m_wait</a></td></tr>
<tr class="memdesc:aeaf51be6c5480bb1e718aea933f55d9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">If our request for a lock is scheduled, or aborted by the deadlock detector, the result is recorded in this class.  <a href="#aeaf51be6c5480bb1e718aea933f55d9d">More...</a><br /></td></tr>
<tr class="separator:aeaf51be6c5480bb1e718aea933f55d9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ad38694ab0fa2d63ac1c1d56c80966a21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ad38694ab0fa2d63ac1c1d56c80966a21">find_ticket</a> (<a class="el" href="classMDL__request.html">MDL_request</a> *mdl_req, <a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a> *duration)</td></tr>
<tr class="memdesc:ad38694ab0fa2d63ac1c1d56c80966a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the context already holds a compatible lock ticket on an object.  <a href="#ad38694ab0fa2d63ac1c1d56c80966a21">More...</a><br /></td></tr>
<tr class="separator:ad38694ab0fa2d63ac1c1d56c80966a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77dc15bcb6b0b1558e7b2e96d124d0de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a77dc15bcb6b0b1558e7b2e96d124d0de">release_locks_stored_before</a> (<a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a> duration, <a class="el" href="classMDL__ticket.html">MDL_ticket</a> *sentinel)</td></tr>
<tr class="memdesc:a77dc15bcb6b0b1558e7b2e96d124d0de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release all locks associated with the context.  <a href="#a77dc15bcb6b0b1558e7b2e96d124d0de">More...</a><br /></td></tr>
<tr class="separator:a77dc15bcb6b0b1558e7b2e96d124d0de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc52eee785b05fea372191de9af37df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#aedc52eee785b05fea372191de9af37df">release_lock</a> (<a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a> duration, <a class="el" href="classMDL__ticket.html">MDL_ticket</a> *ticket)</td></tr>
<tr class="memdesc:aedc52eee785b05fea372191de9af37df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release lock.  <a href="#aedc52eee785b05fea372191de9af37df">More...</a><br /></td></tr>
<tr class="separator:aedc52eee785b05fea372191de9af37df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9701e30aedce451d2311a6b4200b7935"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a9701e30aedce451d2311a6b4200b7935">try_acquire_lock_impl</a> (<a class="el" href="classMDL__request.html">MDL_request</a> *mdl_request, <a class="el" href="classMDL__ticket.html">MDL_ticket</a> **out_ticket)</td></tr>
<tr class="memdesc:a9701e30aedce451d2311a6b4200b7935"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary method for acquiring lock without waiting.  <a href="#a9701e30aedce451d2311a6b4200b7935">More...</a><br /></td></tr>
<tr class="separator:a9701e30aedce451d2311a6b4200b7935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab57e91fc966a754bcca13d7c5ed34b27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ab57e91fc966a754bcca13d7c5ed34b27">materialize_fast_path_locks</a> ()</td></tr>
<tr class="memdesc:ab57e91fc966a754bcca13d7c5ed34b27"><td class="mdescLeft">&#160;</td><td class="mdescRight">"Materialize" requests for locks which were satisfied using "fast path" by properly including them into corresponding MDL_lock::m_granted bitmaps/lists and removing it from packed counter in MDL_lock::m_fast_path_state.  <a href="#ab57e91fc966a754bcca13d7c5ed34b27">More...</a><br /></td></tr>
<tr class="separator:ab57e91fc966a754bcca13d7c5ed34b27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af18bb9238b130ab5fed0252818fb9dd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#af18bb9238b130ab5fed0252818fb9dd0">fix_pins</a> ()</td></tr>
<tr class="memdesc:af18bb9238b130ab5fed0252818fb9dd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate pins which are necessary to work with MDL_map container if they are not allocated already.  <a href="#af18bb9238b130ab5fed0252818fb9dd0">More...</a><br /></td></tr>
<tr class="separator:af18bb9238b130ab5fed0252818fb9dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c39039b67527dbf53c8f40b3ba1c971"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a9c39039b67527dbf53c8f40b3ba1c971">MDL_context</a> (const <a class="el" href="classMDL__context.html">MDL_context</a> &amp;rhs)</td></tr>
<tr class="separator:a9c39039b67527dbf53c8f40b3ba1c971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33fe77708ce2d770e0b0145e1a6d9f24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__context.html">MDL_context</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a33fe77708ce2d770e0b0145e1a6d9f24">operator=</a> (<a class="el" href="classMDL__context.html">MDL_context</a> &amp;rhs)</td></tr>
<tr class="separator:a33fe77708ce2d770e0b0145e1a6d9f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae3d37a4facb1fb33b41ddda7df064976"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__ticket__store.html">MDL_ticket_store</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ae3d37a4facb1fb33b41ddda7df064976">m_ticket_store</a></td></tr>
<tr class="memdesc:ae3d37a4facb1fb33b41ddda7df064976"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists of all MDL tickets acquired by this connection.  <a href="#ae3d37a4facb1fb33b41ddda7df064976">More...</a><br /></td></tr>
<tr class="separator:ae3d37a4facb1fb33b41ddda7df064976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f6586c3bee7136984083f6dc74952c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__context__owner.html">MDL_context_owner</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a4f6586c3bee7136984083f6dc74952c7">m_owner</a></td></tr>
<tr class="separator:a4f6586c3bee7136984083f6dc74952c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2dce4e93fbbc1eaeef6a819fb8e3945"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ac2dce4e93fbbc1eaeef6a819fb8e3945">m_needs_thr_lock_abort</a></td></tr>
<tr class="memdesc:ac2dce4e93fbbc1eaeef6a819fb8e3945"><td class="mdescLeft">&#160;</td><td class="mdescRight">true - if for this context we will break protocol and try to acquire table-level locks while having only S lock on some table.  <a href="#ac2dce4e93fbbc1eaeef6a819fb8e3945">More...</a><br /></td></tr>
<tr class="separator:ac2dce4e93fbbc1eaeef6a819fb8e3945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5664bc101a22b6af0490fc6b1b8f98b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#aa5664bc101a22b6af0490fc6b1b8f98b">m_force_dml_deadlock_weight</a></td></tr>
<tr class="memdesc:aa5664bc101a22b6af0490fc6b1b8f98b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that we need to use DEADLOCK_WEIGHT_DML deadlock weight for this context and ignore the deadlock weight provided by the MDL_wait_for_subgraph object which we are waiting for.  <a href="#aa5664bc101a22b6af0490fc6b1b8f98b">More...</a><br /></td></tr>
<tr class="separator:aa5664bc101a22b6af0490fc6b1b8f98b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7071f0afcce4718309d55797bdc165c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmysql__prlock__t.html">mysql_prlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a7071f0afcce4718309d55797bdc165c0">m_LOCK_waiting_for</a></td></tr>
<tr class="memdesc:a7071f0afcce4718309d55797bdc165c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read-write lock protecting m_waiting_for member.  <a href="#a7071f0afcce4718309d55797bdc165c0">More...</a><br /></td></tr>
<tr class="separator:a7071f0afcce4718309d55797bdc165c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acccb108b2dcf787b7f942b58382aafbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__wait__for__subgraph.html">MDL_wait_for_subgraph</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#acccb108b2dcf787b7f942b58382aafbf">m_waiting_for</a></td></tr>
<tr class="memdesc:acccb108b2dcf787b7f942b58382aafbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell the deadlock detector what metadata lock or table definition cache entry this session is waiting for.  <a href="#acccb108b2dcf787b7f942b58382aafbf">More...</a><br /></td></tr>
<tr class="separator:acccb108b2dcf787b7f942b58382aafbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4e7fe8ce114384c37ce158f3527c26f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structLF__PINS.html">LF_PINS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#ab4e7fe8ce114384c37ce158f3527c26f">m_pins</a></td></tr>
<tr class="memdesc:ab4e7fe8ce114384c37ce158f3527c26f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread's pins (a.k.a.  <a href="#ab4e7fe8ce114384c37ce158f3527c26f">More...</a><br /></td></tr>
<tr class="separator:ab4e7fe8ce114384c37ce158f3527c26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6858d2b6a0b853b9bdc28263079efe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a8a6858d2b6a0b853b9bdc28263079efe">m_rand_state</a></td></tr>
<tr class="memdesc:a8a6858d2b6a0b853b9bdc28263079efe"><td class="mdescLeft">&#160;</td><td class="mdescRight">State for pseudo random numbers generator (PRNG) which output is used to perform random dives into MDL_lock objects hash when searching for unused objects to free.  <a href="#a8a6858d2b6a0b853b9bdc28263079efe">More...</a><br /></td></tr>
<tr class="separator:a8a6858d2b6a0b853b9bdc28263079efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a6dc7a3caf912fb5855fdf753fef06b62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__context.html#a6dc7a3caf912fb5855fdf753fef06b62">mdl_unittest::test_drive_fix_pins</a> (<a class="el" href="classMDL__context.html">MDL_context</a> *)</td></tr>
<tr class="separator:a6dc7a3caf912fb5855fdf753fef06b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Context of the owner of metadata locks. </p>
<p>I.e. each server connection has such a context. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a0c46960d79806f52abbf0ba43af6ad04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c46960d79806f52abbf0ba43af6ad04">&#9670;&nbsp;</a></span>Ticket_iterator</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classI__P__List.html#ae93e3648df7beb86049f429074a451cf">Ticket_list::Iterator</a> <a class="el" href="classMDL__context.html#a0c46960d79806f52abbf0ba43af6ad04">MDL_context::Ticket_iterator</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab0e1989a324f4a2918656245963f23fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0e1989a324f4a2918656245963f23fa">&#9670;&nbsp;</a></span>Ticket_list</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classI__P__List.html">I_P_List</a>&lt;<a class="el" href="classMDL__ticket.html">MDL_ticket</a>, <a class="el" href="structI__P__List__adapter.html">I_P_List_adapter</a>&lt;<a class="el" href="classMDL__ticket.html">MDL_ticket</a>, &amp;<a class="el" href="classMDL__ticket.html#a74155707577dfd12cc7f47229e4f0d17">MDL_ticket::next_in_context</a>, &amp;<a class="el" href="classMDL__ticket.html#a88281cdb21f74551799ae0940b89aed1">MDL_ticket::prev_in_context</a>&gt; &gt; <a class="el" href="classMDL__context.html#ab0e1989a324f4a2918656245963f23fa">MDL_context::Ticket_list</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a21b35ef90597dcd411bf091acd1f4a38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21b35ef90597dcd411bf091acd1f4a38">&#9670;&nbsp;</a></span>MDL_context() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MDL_context::MDL_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a metadata locking context. </p>
<p>This is to be called when a new server connection is created. </p>

</div>
</div>
<a id="a9c39039b67527dbf53c8f40b3ba1c971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c39039b67527dbf53c8f40b3ba1c971">&#9670;&nbsp;</a></span>MDL_context() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MDL_context::MDL_context </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMDL__context.html">MDL_context</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3265f31ae9a90cc8da5b170651b46490"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3265f31ae9a90cc8da5b170651b46490">&#9670;&nbsp;</a></span>acquire_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::acquire_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__request.html">MDL_request</a> *&#160;</td>
          <td class="paramname"><em>mdl_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__systime_8h.html#aefa3851a2bb36f7eaa5a3164f7e881c4">Timeout_type</a>&#160;</td>
          <td class="paramname"><em>lock_wait_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquire one lock with waiting for conflicting locks to go away if needed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mdl_request</td><td>Lock request object for lock to be acquired</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">lock_wait_timeout</td><td>Seconds to wait before timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success. MDL_request::ticket points to the ticket for the lock. </td></tr>
    <tr><td class="paramname">true</td><td>Failure (Out of resources or waiting is aborted), </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0fa5e00a320cf0faba45130a5be74349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fa5e00a320cf0faba45130a5be74349">&#9670;&nbsp;</a></span>acquire_locks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::acquire_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a1e6fbbe4110a5b3e32f1a8c13dd1a329">MDL_request_list</a> *&#160;</td>
          <td class="paramname"><em>mdl_requests</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__systime_8h.html#aefa3851a2bb36f7eaa5a3164f7e881c4">Timeout_type</a>&#160;</td>
          <td class="paramname"><em>lock_wait_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquire exclusive locks. </p>
<p>There must be no granted locks in the context.</p>
<p>This is a replacement of lock_table_names(). It is used in RENAME, DROP and other DDL SQL statements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdl_requests</td><td>List of requests for locks to be acquired.</td></tr>
    <tr><td class="paramname">lock_wait_timeout</td><td>Seconds to wait before timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The list of requests should not contain non-exclusive lock requests. There should not be any acquired locks in the context.</dd>
<dd>
Assumes that one already owns scoped intention exclusive lock.</dd>
<dd>
If acquisition fails any locks with MDL_EXPLICIT duration that had already been taken, are released. Not just locks with MDL_STATEMENT and MDL_TRANSACTION duration. This makes acquition of MDL_EXPLICIT locks atomic (all or nothing). This is needed for the locking service plugin API.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74ed5299b1da65397a7e6972425b5f2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74ed5299b1da65397a7e6972425b5f2d">&#9670;&nbsp;</a></span>clone_ticket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::clone_ticket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__request.html">MDL_request</a> *&#160;</td>
          <td class="paramname"><em>mdl_request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a copy of a granted ticket. </p>
<p>This is used to make sure that HANDLER ticket is never shared with a ticket that belongs to a transaction, so that when we HANDLER CLOSE, we don't release a transactional ticket, and vice versa &ndash; when we COMMIT, we don't mistakenly release a ticket for an open HANDLER.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>An error occured. </td></tr>
    <tr><td class="paramname">false</td><td>Success. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2023a0378cf0559f66c34219e184404e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2023a0378cf0559f66c34219e184404e">&#9670;&nbsp;</a></span>clone_tickets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::clone_tickets </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMDL__context.html">MDL_context</a> *&#160;</td>
          <td class="paramname"><em>ticket_owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a>&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create copy of all granted tickets of particular duration from given context to current context. </p>
<p>Used by XA for preserving locks during client disconnect.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ticket_owner</td><td>Owner of tickets to be cloned </td></tr>
    <tr><td class="paramname">duration</td><td>MDL lock duration for that tickets are to be cloned</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Out of memory or deadlock happened or lock request was refused by storage engine. </td></tr>
    <tr><td class="paramname">false</td><td>Success. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af01a1f42bd9ed050556c434fb6d007ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af01a1f42bd9ed050556c434fb6d007ac">&#9670;&nbsp;</a></span>destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy metadata locking context. </p>
<p>Assumes and asserts that there are no active or pending locks associated with this context at the time of the destruction.</p>
<p>Currently does nothing. Asserts that there are no pending or satisfied lock requests. The pending locks must be released prior to destruction. This is a new way to express the assertion that all tables are closed before a connection is destroyed. </p>

</div>
</div>
<a id="ad5d3fb033110d449d894c95f33f6d9b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5d3fb033110d449d894c95f33f6d9b1">&#9670;&nbsp;</a></span>done_waiting_for()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::done_waiting_for </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove the wait-for edge from the graph after we're done waiting. </p>

</div>
</div>
<a id="aa0e75a7f44e5bc687620aff289a00f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0e75a7f44e5bc687620aff289a00f52">&#9670;&nbsp;</a></span>find_deadlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::find_deadlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to find a deadlock. </p>
<p>This function produces no errors.</p>
<dl class="section note"><dt>Note</dt><dd>If during deadlock resolution context which performs deadlock detection is chosen as a victim it will be informed about the fact by setting VICTIM status to its wait slot. </dd></dl>

</div>
</div>
<a id="a7cf6eddf26617c84f0c2c21af8ec4a94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cf6eddf26617c84f0c2c21af8ec4a94">&#9670;&nbsp;</a></span>find_lock_owner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::find_lock_owner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structMDL__key.html">MDL_key</a> *&#160;</td>
          <td class="paramname"><em>mdl_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMDL__context__visitor.html">MDL_context_visitor</a> *&#160;</td>
          <td class="paramname"><em>visitor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the first context which owns the lock and inspect it by calling MDL_context_visitor::visit_context() method. </p>
<dl class="section return"><dt>Returns</dt><dd>True in case error. False otherwise. There is no guarantee that owner was found in either case. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This method only works properly for locks which were acquired using "slow" path. </dd></dl>

</div>
</div>
<a id="ad38694ab0fa2d63ac1c1d56c80966a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad38694ab0fa2d63ac1c1d56c80966a21">&#9670;&nbsp;</a></span>find_ticket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> * MDL_context::find_ticket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__request.html">MDL_request</a> *&#160;</td>
          <td class="paramname"><em>mdl_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a> *&#160;</td>
          <td class="paramname"><em>result_duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether the context already holds a compatible lock ticket on an object. </p>
<p>Start searching from list of locks for the same duration as lock being requested. If not look at lists for other durations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">mdl_request</td><td>Lock request object for lock to be acquired </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result_duration</td><td>Duration of lock which was found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Tickets which correspond to lock types "stronger" than one being requested are also considered compatible.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the lock ticket for the object or NULL otherwise. </dd></dl>

</div>
</div>
<a id="af18bb9238b130ab5fed0252818fb9dd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af18bb9238b130ab5fed0252818fb9dd0">&#9670;&nbsp;</a></span>fix_pins()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::fix_pins </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate pins which are necessary to work with MDL_map container if they are not allocated already. </p>
<dl class="section return"><dt>Returns</dt><dd>true with error in DA if pinbox is exhausted, false otherwise. </dd></dl>

</div>
</div>
<a id="a3563d6d05aeb758f495f44c123c5306b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3563d6d05aeb758f495f44c123c5306b">&#9670;&nbsp;</a></span>get_deadlock_weight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> MDL_context::get_deadlock_weight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section pre"><dt>Precondition</dt><dd>Only valid if we started waiting for lock. </dd></dl>

</div>
</div>
<a id="adbc1ba94d5bbd550b7e1d0ab88882060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbc1ba94d5bbd550b7e1d0ab88882060">&#9670;&nbsp;</a></span>get_needs_thr_lock_abort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::get_needs_thr_lock_abort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa476fbd9d7d0352352d551279e853314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa476fbd9d7d0352352d551279e853314">&#9670;&nbsp;</a></span>get_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__context__owner.html">MDL_context_owner</a>* MDL_context::get_owner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6023ebdf937cfcbf9991b10945ad952f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6023ebdf937cfcbf9991b10945ad952f">&#9670;&nbsp;</a></span>get_random()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> MDL_context::get_random </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get pseudo random value in [0 . </p>
<p>. 2^31-1] range.</p>
<dl class="section note"><dt>Note</dt><dd>We use Linear Congruential Generator with venerable constant parameters for this. It is known to have problems with its lower bits are not being very random so probably is not good enough for generic use. However, we only use it to do random dives into MDL_lock objects hash when searching for unused objects to be freed, and for this purposes it is sufficient. We rely on values of "get_random() % 2^k" expression having "2^k" as a period to ensure that random dives eventually cover all hash (the former can be proven to be true). This also means that there is no bias towards any specific objects to be expelled (as hash values don't repeat), which is nice for performance. </dd></dl>

</div>
</div>
<a id="a2260019c16977e8ed6aba3081f16348f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2260019c16977e8ed6aba3081f16348f">&#9670;&nbsp;</a></span>get_thd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTHD.html">THD</a>* MDL_context::get_thd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Within MDL subsystem this one is only used for DEBUG_SYNC. </p>
<p>Do not use it to peek/poke into other parts of THD from MDL. </p><dl class="section see"><dt>See also</dt><dd>MDL_context_owner::get_thd(). </dd></dl>

</div>
</div>
<a id="adfc9db02d0a60b144fd35770424ba1ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfc9db02d0a60b144fd35770424ba1ae">&#9670;&nbsp;</a></span>has_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::has_lock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMDL__savepoint.html">MDL_savepoint</a> &amp;&#160;</td>
          <td class="paramname"><em>mdl_savepoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td>
          <td class="paramname"><em>mdl_ticket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does this savepoint have this lock? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The ticket is older than the savepoint or is an LT, HA or GLR ticket. Thus it belongs to the savepoint or has explicit duration. </td></tr>
    <tr><td class="paramname">false</td><td>The ticket is newer than the savepoint. and is not an LT, HA or GLR ticket. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae36680261ff26d6eb9ea19e2a290294d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae36680261ff26d6eb9ea19e2a290294d">&#9670;&nbsp;</a></span>has_locks() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::has_locks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ff2d2559c4ef5075b63978ae516df6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ff2d2559c4ef5075b63978ae516df6e">&#9670;&nbsp;</a></span>has_locks() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::has_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a>&#160;</td>
          <td class="paramname"><em>mdl_namespace</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does this context have an lock of the given namespace? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>At least one lock of given namespace held </td></tr>
    <tr><td class="paramname">false</td><td>No locks of the given namespace held </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a31cf8bad7c905c8ae85921b4ace5ac4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31cf8bad7c905c8ae85921b4ace5ac4a">&#9670;&nbsp;</a></span>has_locks() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::has_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a>&#160;</td>
          <td class="paramname"><em>duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab77b38a67ffb56d071a98efc8879bac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab77b38a67ffb56d071a98efc8879bac6">&#9670;&nbsp;</a></span>has_locks_waited_for()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::has_locks_waited_for </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do we hold any locks which are possibly being waited for by another MDL_context? </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>A lock being 'waited_for' was found. </td></tr>
    <tr><td class="paramname">false</td><td>No one waits for the lock(s) we hold.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Should only be called from the thread which owns the MDL_context </dd></dl>

</div>
</div>
<a id="a4c29aa7919001edcdfaa82bc360c65df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c29aa7919001edcdfaa82bc360c65df">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__context__owner.html">MDL_context_owner</a> *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaca0ec235888a94af4dd25107a8af389"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaca0ec235888a94af4dd25107a8af389">&#9670;&nbsp;</a></span>lock_deadlock_victim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::lock_deadlock_victim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab57e91fc966a754bcca13d7c5ed34b27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab57e91fc966a754bcca13d7c5ed34b27">&#9670;&nbsp;</a></span>materialize_fast_path_locks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::materialize_fast_path_locks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>"Materialize" requests for locks which were satisfied using "fast path" by properly including them into corresponding MDL_lock::m_granted bitmaps/lists and removing it from packed counter in MDL_lock::m_fast_path_state. </p>
<dl class="section note"><dt>Note</dt><dd>In future we might optimize this method if necessary, for example, by keeping pointer to first "fast path" ticket. </dd></dl>

</div>
</div>
<a id="a213edf20be43313e0346a489c2f47dd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a213edf20be43313e0346a489c2f47dd6">&#9670;&nbsp;</a></span>mdl_savepoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__savepoint.html">MDL_savepoint</a> MDL_context::mdl_savepoint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a33fe77708ce2d770e0b0145e1a6d9f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33fe77708ce2d770e0b0145e1a6d9f24">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__context.html">MDL_context</a>&amp; MDL_context::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__context.html">MDL_context</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a14bf2ba9d0ec737e9db734fc5a198183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14bf2ba9d0ec737e9db734fc5a198183">&#9670;&nbsp;</a></span>owns_equal_or_stronger_lock() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::owns_equal_or_stronger_lock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structMDL__key.html">MDL_key</a> *&#160;</td>
          <td class="paramname"><em>mdl_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a>&#160;</td>
          <td class="paramname"><em>mdl_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auxiliary function which allows to check if we have some kind of lock on a object. </p>
<p>Returns true if we have a lock of an equal to given or stronger type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdl_key</td><td>Key to check for ownership </td></tr>
    <tr><td class="paramname">mdl_type</td><td>Lock type. Pass in the weakest type to find out if there is at least some lock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if current context contains satisfied lock for the object, FALSE otherwise. </dd></dl>

</div>
</div>
<a id="adffac048f9ce71eb3a5e3b1a38178fdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adffac048f9ce71eb3a5e3b1a38178fdc">&#9670;&nbsp;</a></span>owns_equal_or_stronger_lock() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::owns_equal_or_stronger_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a>&#160;</td>
          <td class="paramname"><em>mdl_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a>&#160;</td>
          <td class="paramname"><em>mdl_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auxiliary function which allows to check if we have some kind of lock on a object. </p>
<p>Returns TRUE if we have a lock of an equal to given or stronger type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdl_namespace</td><td>Id of object namespace </td></tr>
    <tr><td class="paramname">db</td><td>Name of the database </td></tr>
    <tr><td class="paramname">name</td><td>Name of the object </td></tr>
    <tr><td class="paramname">mdl_type</td><td>Lock type. Pass in the weakest type to find out if there is at least some lock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if current context contains satisfied lock for the object, false otherwise. </dd></dl>

</div>
</div>
<a id="a73bd65389a74778433291eb2d426c71f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73bd65389a74778433291eb2d426c71f">&#9670;&nbsp;</a></span>release_all_locks_for_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::release_all_locks_for_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release all explicit locks in the context which correspond to the same name/object as this lock request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>One of the locks for the name/object for which all locks should be released. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a58d0df5eb422cbfa9a4225218c76141f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58d0df5eb422cbfa9a4225218c76141f">&#9670;&nbsp;</a></span>release_lock() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::release_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td>
          <td class="paramname"><em>ticket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release lock with explicit duration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ticket</td><td>Ticket for lock to be released. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aedc52eee785b05fea372191de9af37df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc52eee785b05fea372191de9af37df">&#9670;&nbsp;</a></span>release_lock() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::release_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a>&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td>
          <td class="paramname"><em>ticket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release lock. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duration</td><td>Lock duration. </td></tr>
    <tr><td class="paramname">ticket</td><td>Ticket for lock to be released. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a71874a5e485217650429849ab29ed43b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71874a5e485217650429849ab29ed43b">&#9670;&nbsp;</a></span>release_locks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::release_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__release__locks__visitor.html">MDL_release_locks_visitor</a> *&#160;</td>
          <td class="paramname"><em>visitor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release all explicit locks in the context for which the release() method of the provided visitor evalates to true. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">visitor</td><td>Object to ask if the lock should be released. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a77dc15bcb6b0b1558e7b2e96d124d0de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77dc15bcb6b0b1558e7b2e96d124d0de">&#9670;&nbsp;</a></span>release_locks_stored_before()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::release_locks_stored_before </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a>&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td>
          <td class="paramname"><em>sentinel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release all locks associated with the context. </p>
<p>If the sentinel is not NULL, do not release locks stored in the list after and including the sentinel.</p>
<p>Statement and transactional locks are added to the beginning of the corresponding lists, i.e. stored in reverse temporal order. This allows to employ this function to:</p><ul>
<li>back off in case of a lock conflict.</li>
<li>release all locks in the end of a statement or transaction</li>
<li>rollback to a savepoint. </li>
</ul>

</div>
</div>
<a id="a55150d0bbe77cf0cd38e7005a4330e44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55150d0bbe77cf0cd38e7005a4330e44">&#9670;&nbsp;</a></span>release_statement_locks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::release_statement_locks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afce65a72bedc0c4384b2b4c231c070ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afce65a72bedc0c4384b2b4c231c070ed">&#9670;&nbsp;</a></span>release_transactional_locks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::release_transactional_locks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release locks acquired by normal statements (SELECT, UPDATE, DELETE, etc) in the course of a transaction. </p>
<p>Do not release HANDLER locks, if there are any.</p>
<p>This method is used at the end of a transaction, in implementation of COMMIT (implicit or explicit) and ROLLBACK. </p>

</div>
</div>
<a id="a863ff94d0928e9720df30643835e4ef0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a863ff94d0928e9720df30643835e4ef0">&#9670;&nbsp;</a></span>rollback_to_savepoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::rollback_to_savepoint </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMDL__savepoint.html">MDL_savepoint</a> &amp;&#160;</td>
          <td class="paramname"><em>mdl_savepoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases metadata locks that were acquired after a specific savepoint. </p>
<dl class="section note"><dt>Note</dt><dd>Used to release tickets acquired during a savepoint unit. </dd>
<dd>
It's safe to iterate and unlock any locks after taken after this savepoint because other statements that take other special locks cause a implicit commit (ie LOCK TABLES). </dd></dl>

</div>
</div>
<a id="a357599f5af7c6ec7587ecb7b349f0313"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a357599f5af7c6ec7587ecb7b349f0313">&#9670;&nbsp;</a></span>set_explicit_duration_for_all_locks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::set_explicit_duration_for_all_locks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set explicit duration for all locks in the context. </p>

</div>
</div>
<a id="a39728ceab1f092a3bf1e8a4ec168f9bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39728ceab1f092a3bf1e8a4ec168f9bb">&#9670;&nbsp;</a></span>set_force_dml_deadlock_weight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::set_force_dml_deadlock_weight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>force_dml_deadlock_weight</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5836b7c79f957c575c90ad4f1d8296de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5836b7c79f957c575c90ad4f1d8296de">&#9670;&nbsp;</a></span>set_lock_duration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::set_lock_duration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td>
          <td class="paramname"><em>mdl_ticket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7006da9c94c9b6cfb347cfc58b87c30d">enum_mdl_duration</a>&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change lock duration for transactional lock. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdl_ticket</td><td>Ticket representing lock. </td></tr>
    <tr><td class="paramname">duration</td><td>Lock duration to be set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This method only supports changing duration of transactional lock to some other duration. </dd></dl>

</div>
</div>
<a id="a74608d443dfc4754ce1b14c672a914f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74608d443dfc4754ce1b14c672a914f1">&#9670;&nbsp;</a></span>set_needs_thr_lock_abort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::set_needs_thr_lock_abort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>needs_thr_lock_abort</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad1b07243d69f1354e3bb5936dd6ded15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1b07243d69f1354e3bb5936dd6ded15">&#9670;&nbsp;</a></span>set_transaction_duration_for_all_locks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::set_transaction_duration_for_all_locks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set transactional duration for all locks in the context. </p>

</div>
</div>
<a id="ab6d07a861aaf9db6fda46da196a8b0d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6d07a861aaf9db6fda46da196a8b0d0">&#9670;&nbsp;</a></span>try_acquire_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::try_acquire_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__request.html">MDL_request</a> *&#160;</td>
          <td class="paramname"><em>mdl_request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to acquire one lock. </p>
<p>Unlike exclusive locks, shared locks are acquired one by one. This is interface is chosen to simplify introduction of the new locking API to the system. MDL_context::try_acquire_lock() is currently used from open_table(), and there we have only one table to work with.</p>
<p>This function may also be used to try to acquire an exclusive lock on a destination table, by ALTER TABLE ... RENAME.</p>
<p>Returns immediately without any side effect if encounters a lock conflict. Otherwise takes the lock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mdl_request</td><td>Lock request object for lock to be acquired</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success. The lock may have not been acquired. Check the ticket, if it's NULL, a conflicting lock exists. </td></tr>
    <tr><td class="paramname">true</td><td>Out of resources, an error has been reported. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9701e30aedce451d2311a6b4200b7935"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9701e30aedce451d2311a6b4200b7935">&#9670;&nbsp;</a></span>try_acquire_lock_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::try_acquire_lock_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__request.html">MDL_request</a> *&#160;</td>
          <td class="paramname"><em>mdl_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> **&#160;</td>
          <td class="paramname"><em>out_ticket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Auxiliary method for acquiring lock without waiting. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mdl_request</td><td>Lock request object for lock to be acquired </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_ticket</td><td>Ticket for the request in case when lock has not been acquired.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success. The lock may have not been acquired. Check MDL_request::ticket, if it's NULL, a conflicting lock exists. In this case "out_ticket" out parameter points to ticket which was constructed for the request. MDL_ticket::m_lock points to the corresponding MDL_lock object and MDL_lock::m_rwlock write-locked. </td></tr>
    <tr><td class="paramname">true</td><td>Out of resources, an error has been reported. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af3a0ef8ba360e3d48885f711723aa3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a0ef8ba360e3d48885f711723aa3ea">&#9670;&nbsp;</a></span>unlock_deadlock_victim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::unlock_deadlock_victim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac66b8449ef9dfb1658d2dd9fc0427dbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac66b8449ef9dfb1658d2dd9fc0427dbc">&#9670;&nbsp;</a></span>upgrade_shared_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::upgrade_shared_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td>
          <td class="paramname"><em>mdl_ticket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a>&#160;</td>
          <td class="paramname"><em>new_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__systime_8h.html#aefa3851a2bb36f7eaa5a3164f7e881c4">Timeout_type</a>&#160;</td>
          <td class="paramname"><em>lock_wait_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Upgrade a shared metadata lock. </p>
<p>Used in ALTER TABLE and CREATE TABLE.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdl_ticket</td><td>Lock to upgrade. </td></tr>
    <tr><td class="paramname">new_type</td><td>Lock type to upgrade to. </td></tr>
    <tr><td class="paramname">lock_wait_timeout</td><td>Seconds to wait before timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>In case of failure to upgrade lock (e.g. because upgrader was killed) leaves lock in its original state (locked in shared mode).</dd>
<dd>
There can be only one upgrader for a lock or we will have deadlock. This invariant is ensured by the fact that upgradeable locks SU, SNW and SNRW are not compatible with each other and themselves in case of ALTER TABLE operation. In case of CREATE TABLE operation there is chance of deadlock as 'S' is compatible with 'S'. But the deadlock is recovered by backoff and retry mechanism.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Success </td></tr>
    <tr><td class="paramname">true</td><td>Failure (thread was killed) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab778763f11b187ab171213c9fa08846e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab778763f11b187ab171213c9fa08846e">&#9670;&nbsp;</a></span>visit_subgraph()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::visit_subgraph </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__wait__for__graph__visitor.html">MDL_wait_for_graph_visitor</a> *&#160;</td>
          <td class="paramname"><em>gvisitor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A fragment of recursive traversal of the wait-for graph of MDL contexts in the server in search for deadlocks. </p>
<p>Assume this MDL context is a node in the wait-for graph, and direct the visitor to all adjacent nodes. As long as the starting node is remembered in the visitor, a deadlock is found when the same node is visited twice. One MDL context is connected to another in the wait-for graph if it waits on a resource that is held by the other context.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>A deadlock is found. A pointer to deadlock victim is saved in the visitor. </td></tr>
    <tr><td class="paramname">false</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afd74a4227cf8ddea993d96ee3be25331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd74a4227cf8ddea993d96ee3be25331">&#9670;&nbsp;</a></span>will_wait_for()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_context::will_wait_for </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__wait__for__subgraph.html">MDL_wait_for_subgraph</a> *&#160;</td>
          <td class="paramname"><em>waiting_for_arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inform the deadlock detector there is an edge in the wait-for graph. </p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a6dc7a3caf912fb5855fdf753fef06b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dc7a3caf912fb5855fdf753fef06b62">&#9670;&nbsp;</a></span>mdl_unittest::test_drive_fix_pins</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="namespacemdl__unittest.html#aea02b0b10192df462ad24a7058f16ae1">mdl_unittest::test_drive_fix_pins</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classMDL__context.html">MDL_context</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa5664bc101a22b6af0490fc6b1b8f98b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5664bc101a22b6af0490fc6b1b8f98b">&#9670;&nbsp;</a></span>m_force_dml_deadlock_weight</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::m_force_dml_deadlock_weight</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicates that we need to use DEADLOCK_WEIGHT_DML deadlock weight for this context and ignore the deadlock weight provided by the MDL_wait_for_subgraph object which we are waiting for. </p>
<dl class="section note"><dt>Note</dt><dd>Can be changed only when there is a guarantee that this MDL_context is not waiting for a metadata lock or table definition entry. </dd></dl>

</div>
</div>
<a id="a7071f0afcce4718309d55797bdc165c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7071f0afcce4718309d55797bdc165c0">&#9670;&nbsp;</a></span>m_LOCK_waiting_for</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmysql__prlock__t.html">mysql_prlock_t</a> MDL_context::m_LOCK_waiting_for</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read-write lock protecting m_waiting_for member. </p>
<dl class="section note"><dt>Note</dt><dd>The fact that this read-write lock prefers readers is important as deadlock detector won't work correctly otherwise. </dd></dl>
<dl class="section see"><dt>See also</dt><dd>Comment for MDL_lock::m_rwlock. </dd></dl>

</div>
</div>
<a id="ac2dce4e93fbbc1eaeef6a819fb8e3945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2dce4e93fbbc1eaeef6a819fb8e3945">&#9670;&nbsp;</a></span>m_needs_thr_lock_abort</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> MDL_context::m_needs_thr_lock_abort</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>true - if for this context we will break protocol and try to acquire table-level locks while having only S lock on some table. </p>
<p>To avoid deadlocks which might occur during concurrent upgrade of SNRW lock on such object to X lock we have to abort waits for table-level locks for such connections. false - Otherwise. </p>

</div>
</div>
<a id="a4f6586c3bee7136984083f6dc74952c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f6586c3bee7136984083f6dc74952c7">&#9670;&nbsp;</a></span>m_owner</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__context__owner.html">MDL_context_owner</a>* MDL_context::m_owner</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab4e7fe8ce114384c37ce158f3527c26f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4e7fe8ce114384c37ce158f3527c26f">&#9670;&nbsp;</a></span>m_pins</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structLF__PINS.html">LF_PINS</a>* MDL_context::m_pins</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread's pins (a.k.a. </p>
<p>hazard pointers) to be used by lock-free implementation of MDL_map::m_locks container. NULL if pins are not yet allocated from container's pinbox. </p>

</div>
</div>
<a id="a8a6858d2b6a0b853b9bdc28263079efe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a6858d2b6a0b853b9bdc28263079efe">&#9670;&nbsp;</a></span>m_rand_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> MDL_context::m_rand_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State for pseudo random numbers generator (PRNG) which output is used to perform random dives into MDL_lock objects hash when searching for unused objects to free. </p>

</div>
</div>
<a id="ae3d37a4facb1fb33b41ddda7df064976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3d37a4facb1fb33b41ddda7df064976">&#9670;&nbsp;</a></span>m_ticket_store</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__ticket__store.html">MDL_ticket_store</a> MDL_context::m_ticket_store</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lists of all MDL tickets acquired by this connection. </p>
<h2>Lists of MDL tickets: </h2>
<p>The entire set of locks acquired by a connection can be separated in three subsets according to their duration: locks released at the end of statement, at the end of transaction and locks are released explicitly.</p>
<p>Statement and transactional locks are locks with automatic scope. They are accumulated in the course of a transaction, and released either at the end of uppermost statement (for statement locks) or on COMMIT, ROLLBACK or ROLLBACK TO SAVEPOINT (for transactional locks). They must not be (and never are) released manually, i.e. with release_lock() call.</p>
<p>Tickets with explicit duration are taken for locks that span multiple transactions or savepoints. These are: HANDLER SQL locks (HANDLER SQL is transaction-agnostic), LOCK TABLES locks (you can COMMIT/etc under LOCK TABLES, and the locked tables stay locked), user level locks (GET_LOCK()/RELEASE_LOCK() functions) and locks implementing "global read lock".</p>
<p>Statement/transactional locks are always prepended to the beginning of the appropriate list. In other words, they are stored in reverse temporal order. Thus, when we rollback to a savepoint, we start popping and releasing tickets from the front until we reach the last ticket acquired after the savepoint.</p>
<p>Locks with explicit duration are not stored in any particular order, and among each other can be split into four sets:</p><ul>
<li>LOCK TABLES locks</li>
<li>User-level locks</li>
<li>HANDLER locks</li>
<li>GLOBAL READ LOCK locks </li>
</ul>

</div>
</div>
<a id="aeaf51be6c5480bb1e718aea933f55d9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaf51be6c5480bb1e718aea933f55d9d">&#9670;&nbsp;</a></span>m_wait</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__wait.html">MDL_wait</a> MDL_context::m_wait</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If our request for a lock is scheduled, or aborted by the deadlock detector, the result is recorded in this class. </p>

</div>
</div>
<a id="acccb108b2dcf787b7f942b58382aafbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acccb108b2dcf787b7f942b58382aafbf">&#9670;&nbsp;</a></span>m_waiting_for</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__wait__for__subgraph.html">MDL_wait_for_subgraph</a>* MDL_context::m_waiting_for</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tell the deadlock detector what metadata lock or table definition cache entry this session is waiting for. </p>
<p>In principle, this is redundant, as information can be found by inspecting waiting queues, but we'd very much like it to be readily available to the wait-for graph iterator. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="mdl_8h_source.html">mdl.h</a></li>
<li>sql/<a class="el" href="mdl_8cc.html">mdl.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classMDL__context.html">MDL_context</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
