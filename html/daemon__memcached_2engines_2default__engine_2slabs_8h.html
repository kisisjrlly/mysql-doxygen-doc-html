<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: plugin/innodb_memcached/daemon_memcached/engines/default_engine/slabs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('daemon__memcached_2engines_2default__engine_2slabs_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">slabs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="daemon__memcached_2engines_2default__engine_2default__engine_8h_source.html">default_engine.h</a>&quot;</code><br />
</div>
<p><a href="daemon__memcached_2engines_2default__engine_2slabs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structslabclass__t.html">slabclass_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structslabs.html">slabs</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a755d5635c6884b45bc4b7c3b911b220c"><td class="memItemLeft" align="right" valign="top">ENGINE_ERROR_CODE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon__memcached_2engines_2default__engine_2slabs_8h.html#a755d5635c6884b45bc4b7c3b911b220c">slabs_init</a> (struct <a class="el" href="structdefault__engine.html">default_engine</a> *<a class="el" href="mock__server_8c.html#a42a17f2737e762bd87fd43910a14794f">engine</a>, const size_t limit, const double factor, const <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> prealloc)</td></tr>
<tr class="memdesc:a755d5635c6884b45bc4b7c3b911b220c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init the subsystem.  <a href="#a755d5635c6884b45bc4b7c3b911b220c">More...</a><br /></td></tr>
<tr class="separator:a755d5635c6884b45bc4b7c3b911b220c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec1db32cee8acdfb886a16a91ae9304b"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon__memcached_2engines_2default__engine_2slabs_8h.html#aec1db32cee8acdfb886a16a91ae9304b">slabs_clsid</a> (struct <a class="el" href="structdefault__engine.html">default_engine</a> *<a class="el" href="mock__server_8c.html#a42a17f2737e762bd87fd43910a14794f">engine</a>, const size_t size)</td></tr>
<tr class="memdesc:aec1db32cee8acdfb886a16a91ae9304b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given object size, return id to use when allocating/freeing memory for object 0 means error: can't store such a large object.  <a href="#aec1db32cee8acdfb886a16a91ae9304b">More...</a><br /></td></tr>
<tr class="separator:aec1db32cee8acdfb886a16a91ae9304b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9821e4c120bcaccaa36d04276eeed201"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon__memcached_2engines_2default__engine_2slabs_8h.html#a9821e4c120bcaccaa36d04276eeed201">slabs_alloc</a> (struct <a class="el" href="structdefault__engine.html">default_engine</a> *<a class="el" href="mock__server_8c.html#a42a17f2737e762bd87fd43910a14794f">engine</a>, const size_t size, unsigned int <a class="el" href="xcom__base_8cc.html#a7307f729d2752bdbe1d32d9fda65f30a">id</a>)</td></tr>
<tr class="memdesc:a9821e4c120bcaccaa36d04276eeed201"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate object of given length.  <a href="#a9821e4c120bcaccaa36d04276eeed201">More...</a><br /></td></tr>
<tr class="separator:a9821e4c120bcaccaa36d04276eeed201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a820ca9e4ed908a7beacd8edc37596510"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon__memcached_2engines_2default__engine_2slabs_8h.html#a820ca9e4ed908a7beacd8edc37596510">slabs_free</a> (struct <a class="el" href="structdefault__engine.html">default_engine</a> *<a class="el" href="mock__server_8c.html#a42a17f2737e762bd87fd43910a14794f">engine</a>, void *ptr, size_t size, unsigned int <a class="el" href="xcom__base_8cc.html#a7307f729d2752bdbe1d32d9fda65f30a">id</a>)</td></tr>
<tr class="memdesc:a820ca9e4ed908a7beacd8edc37596510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free previously allocated object.  <a href="#a820ca9e4ed908a7beacd8edc37596510">More...</a><br /></td></tr>
<tr class="separator:a820ca9e4ed908a7beacd8edc37596510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a838f57ea159d800d6bbbd3ebfd69e1f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon__memcached_2engines_2default__engine_2slabs_8h.html#a838f57ea159d800d6bbbd3ebfd69e1f4">slabs_adjust_mem_requested</a> (struct <a class="el" href="structdefault__engine.html">default_engine</a> *<a class="el" href="mock__server_8c.html#a42a17f2737e762bd87fd43910a14794f">engine</a>, unsigned int <a class="el" href="xcom__base_8cc.html#a7307f729d2752bdbe1d32d9fda65f30a">id</a>, size_t old, size_t ntotal)</td></tr>
<tr class="memdesc:a838f57ea159d800d6bbbd3ebfd69e1f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the stats for memory requested.  <a href="#a838f57ea159d800d6bbbd3ebfd69e1f4">More...</a><br /></td></tr>
<tr class="separator:a838f57ea159d800d6bbbd3ebfd69e1f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3005ec29416866787977d5642dbceb8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon__memcached_2engines_2default__engine_2slabs_8h.html#a3005ec29416866787977d5642dbceb8b">slabs_stats</a> (struct <a class="el" href="structdefault__engine.html">default_engine</a> *<a class="el" href="mock__server_8c.html#a42a17f2737e762bd87fd43910a14794f">engine</a>, ADD_STAT add_stats, const void *c)</td></tr>
<tr class="memdesc:a3005ec29416866787977d5642dbceb8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill buffer with stats.  <a href="#a3005ec29416866787977d5642dbceb8b">More...</a><br /></td></tr>
<tr class="separator:a3005ec29416866787977d5642dbceb8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11032275fd479c45a94a54fa7cb56023"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon__memcached_2engines_2default__engine_2slabs_8h.html#a11032275fd479c45a94a54fa7cb56023">add_statistics</a> (const void *cookie, ADD_STAT add_stats, const char *prefix, int num, const char *<a class="el" href="mi__test2_8cc.html#a30b3e7be7739a55bdf3f9c82becb1903">key</a>, const char *fmt,...)</td></tr>
<tr class="separator:a11032275fd479c45a94a54fa7cb56023"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a11032275fd479c45a94a54fa7cb56023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11032275fd479c45a94a54fa7cb56023">&#9670;&nbsp;</a></span>add_statistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_statistics </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ADD_STAT&#160;</td>
          <td class="paramname"><em>add_stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a838f57ea159d800d6bbbd3ebfd69e1f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a838f57ea159d800d6bbbd3ebfd69e1f4">&#9670;&nbsp;</a></span>slabs_adjust_mem_requested()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void slabs_adjust_mem_requested </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdefault__engine.html">default_engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ntotal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the stats for memory requested. </p>

</div>
</div>
<a id="a9821e4c120bcaccaa36d04276eeed201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9821e4c120bcaccaa36d04276eeed201">&#9670;&nbsp;</a></span>slabs_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* slabs_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdefault__engine.html">default_engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate object of given length. </p>
<p>0 on error </p>

</div>
</div>
<a id="aec1db32cee8acdfb886a16a91ae9304b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec1db32cee8acdfb886a16a91ae9304b">&#9670;&nbsp;</a></span>slabs_clsid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int slabs_clsid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdefault__engine.html">default_engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given object size, return id to use when allocating/freeing memory for object 0 means error: can't store such a large object. </p>

</div>
</div>
<a id="a820ca9e4ed908a7beacd8edc37596510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a820ca9e4ed908a7beacd8edc37596510">&#9670;&nbsp;</a></span>slabs_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void slabs_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdefault__engine.html">default_engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free previously allocated object. </p>

</div>
</div>
<a id="a755d5635c6884b45bc4b7c3b911b220c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a755d5635c6884b45bc4b7c3b911b220c">&#9670;&nbsp;</a></span>slabs_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENGINE_ERROR_CODE slabs_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdefault__engine.html">default_engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>prealloc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init the subsystem. </p>
<p>1st argument is the limit on no. of bytes to allocate, 0 if no limit. 2nd argument is the growth factor; each slab will use a chunk size equal to the previous slab's chunk size times this factor. 3rd argument specifies if the slab allocator should allocate all memory up front (if true), or allocate memory in chunks as it is needed (if false)</p>
<p>Init the subsystem. </p>

</div>
</div>
<a id="a3005ec29416866787977d5642dbceb8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3005ec29416866787977d5642dbceb8b">&#9670;&nbsp;</a></span>slabs_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void slabs_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdefault__engine.html">default_engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ADD_STAT&#160;</td>
          <td class="paramname"><em>add_stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill buffer with stats. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b4c3aec6cd8f28418150dce663061cfa.html">plugin</a></li><li class="navelem"><a class="el" href="dir_75f487b2efaae217b3d011b02f98b420.html">innodb_memcached</a></li><li class="navelem"><a class="el" href="dir_693350f0d84512f42310cf9ce90f7aa8.html">daemon_memcached</a></li><li class="navelem"><a class="el" href="dir_54e81dccfcdc3b4754b1053853761500.html">engines</a></li><li class="navelem"><a class="el" href="dir_6be180db74968b29fcb877690ce79dc0.html">default_engine</a></li><li class="navelem"><a class="el" href="daemon__memcached_2engines_2default__engine_2slabs_8h.html">slabs.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
