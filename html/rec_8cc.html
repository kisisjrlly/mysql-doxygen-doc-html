<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/rem/rec.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rec_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rec.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Record manager.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &quot;<a class="el" href="dict0dict_8h_source.html">dict0dict.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem0mem_8h_source.html">mem0mem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rec_8h_source.html">rem/rec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rem0rec_8h_source.html">rem0rec.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4119271bc1e2cfef048890245569a98e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rec_8cc.html#a4119271bc1e2cfef048890245569a98e">rec_init_offsets</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint *offsets)</td></tr>
<tr class="memdesc:a4119271bc1e2cfef048890245569a98e"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: The functions in this file should only use functions from other files in library.  <a href="#a4119271bc1e2cfef048890245569a98e">More...</a><br /></td></tr>
<tr class="separator:a4119271bc1e2cfef048890245569a98e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e742386031240b0fead795771da58f0"><td class="memItemLeft" align="right" valign="top">ulint *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rec_8cc.html#a3e742386031240b0fead795771da58f0">rec_get_offsets_func</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint *offsets, ulint n_fields, const char *file, ulint line, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> **heap)</td></tr>
<tr class="memdesc:a3e742386031240b0fead795771da58f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following function determines the offsets to each field in the record.  <a href="#a3e742386031240b0fead795771da58f0">More...</a><br /></td></tr>
<tr class="separator:a3e742386031240b0fead795771da58f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada928f049ee647a4d929eda4804961f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rec_8cc.html#ada928f049ee647a4d929eda4804961f5">rec_get_offsets_reverse</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="el" href="opt__explain_8cc.html#ac04cb3465ff77cc667a54186a8d889d9">extra</a>, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint node_ptr, ulint *offsets)</td></tr>
<tr class="memdesc:ada928f049ee647a4d929eda4804961f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following function determines the offsets to each field in the record.  <a href="#ada928f049ee647a4d929eda4804961f5">More...</a><br /></td></tr>
<tr class="separator:ada928f049ee647a4d929eda4804961f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af884a206d395833894fbd4abcb942aba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rec_8cc.html#af884a206d395833894fbd4abcb942aba">rec_offs_cmp</a> (ulint *offsets1, ulint *offsets2)</td></tr>
<tr class="memdesc:af884a206d395833894fbd4abcb942aba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the given two record offsets are identical.  <a href="#af884a206d395833894fbd4abcb942aba">More...</a><br /></td></tr>
<tr class="separator:af884a206d395833894fbd4abcb942aba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa44f390e69dbe63dcc15f6572c1589"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rec_8cc.html#a9fa44f390e69dbe63dcc15f6572c1589">rec_offs_print</a> (std::ostream &amp;out, const ulint *offsets)</td></tr>
<tr class="memdesc:a9fa44f390e69dbe63dcc15f6572c1589"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the record offsets.  <a href="#a9fa44f390e69dbe63dcc15f6572c1589">More...</a><br /></td></tr>
<tr class="separator:a9fa44f390e69dbe63dcc15f6572c1589"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Record manager. </p>
<p>Created 5/30/1994 Heikki Tuuri </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3e742386031240b0fead795771da58f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e742386031240b0fead795771da58f0">&#9670;&nbsp;</a></span>rec_get_offsets_func()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint* rec_get_offsets_func </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> **&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The following function determines the offsets to each field in the record. </p>
<p>It can reuse a previously returned array. Note that after instant ADD COLUMN, if this is a record from clustered index, fields in the record may be less than the fields defined in the clustered index. So the offsets size is allocated according to the clustered index fields. </p><dl class="section return"><dt>Returns</dt><dd>the new offsets </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: physical record </td></tr>
    <tr><td class="paramname">index</td><td>in: record descriptor </td></tr>
    <tr><td class="paramname">offsets</td><td>in/out: array consisting of offsets[0] allocated elements, or an array from rec_get_offsets(), or NULL </td></tr>
    <tr><td class="paramname">n_fields</td><td>in: maximum number of initialized fields (ULINT_UNDEFINED if all fields) </td></tr>
    <tr><td class="paramname">file</td><td>in: file name where called </td></tr>
    <tr><td class="paramname">line</td><td>in: line number where called </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ada928f049ee647a4d929eda4804961f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada928f049ee647a4d929eda4804961f5">&#9670;&nbsp;</a></span>rec_get_offsets_reverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rec_get_offsets_reverse </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>extra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>node_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The following function determines the offsets to each field in the record. </p>
<p>It can reuse a previously allocated array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">extra</td><td>in: the extra bytes of a compact record in reverse order, excluding the fixed-size REC_N_NEW_EXTRA_BYTES </td></tr>
    <tr><td class="paramname">index</td><td>in: record descriptor </td></tr>
    <tr><td class="paramname">node_ptr</td><td>in: nonzero=node pointer, 0=leaf node </td></tr>
    <tr><td class="paramname">offsets</td><td>in/out: array consisting of offsets[0] allocated elements </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4119271bc1e2cfef048890245569a98e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4119271bc1e2cfef048890245569a98e">&#9670;&nbsp;</a></span>rec_init_offsets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rec_init_offsets </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: The functions in this file should only use functions from other files in library. </p>
<p>The following function determines the offsets to each field in the record.</p>
<p>The code in this file is used to make a library for external tools. The following function determines the offsets to each field in the record. The offsets are written to a previously allocated array of ulint, where rec_offs_n_fields(offsets) has been initialized to the number of fields in the record. The rest of the array will be initialized by this function. rec_offs_base(offsets)[0] will be set to the extra size (if REC_OFFS_COMPACT is set, the record is in the new format; if REC_OFFS_EXTERNAL is set, the record contains externally stored columns), and rec_offs_base(offsets)[1..n_fields] will be set to offsets past the end of fields 0..n_fields, or to the beginning of fields 1..n_fields+1. When the high-order bit of the offset at [i+1] is set (REC_OFFS_SQL_NULL), the field i is NULL. When the second high-order bit of the offset at [i+1] is set (REC_OFFS_EXTERNAL), the field i is being stored externally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: physical record </td></tr>
    <tr><td class="paramname">index</td><td>in: record descriptor </td></tr>
    <tr><td class="paramname">offsets</td><td>in/out: array of offsets; in: n=rec_offs_n_fields(offsets) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af884a206d395833894fbd4abcb942aba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af884a206d395833894fbd4abcb942aba">&#9670;&nbsp;</a></span>rec_offs_cmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> rec_offs_cmp </td>
          <td>(</td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the given two record offsets are identical. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">offsets1</td><td>field offsets of a record </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offsets2</td><td>field offsets of a record </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if they are identical, false otherwise. </dd></dl>

</div>
</div>
<a id="a9fa44f390e69dbe63dcc15f6572c1589"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fa44f390e69dbe63dcc15f6572c1589">&#9670;&nbsp;</a></span>rec_offs_print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; rec_offs_print </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the record offsets. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">out</td><td>the output stream to which offsets are printed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offsets</td><td>the field offsets of the record. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the output stream. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_14327b2b3dfe3c7977184a0f4c16a29d.html">rem</a></li><li class="navelem"><a class="el" href="rec_8cc.html">rec.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
