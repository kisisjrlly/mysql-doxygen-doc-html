<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/row0upd.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('row0upd_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">row0upd.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="row0upd_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 1996, 2020, Oracle and/or its affiliates.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/row0upd.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> Update of a row</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> Created 12/27/1996 Heikki Tuuri</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *******************************************************/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifndef row0upd_h</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define row0upd_h</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;stack&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="btr0types_8h.html">btr0types.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="data0data_8h.html">data0data.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict0types_8h.html">dict0types.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lob0lob_8h.html">lob0lob.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="row0types_8h.html">row0types.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sql_2table_8h.html">table.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="trx0types_8h.html">trx0types.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;univ.i&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="btr0pcur_8h.html">btr0pcur.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pars0types_8h.html">pars0types.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="que0types_8h.html">que0types.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/** Creates an update vector object.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">@param[in]      n       number of fields</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">@param[in]      heap    heap from which memory allocated</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">@return own: update vector object */</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="row0upd_8h.html#ae4662cf8a186586e3caad5a7a28cf9ec">upd_create</a>(ulint <a class="code" href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/** Returns the number of fields in the update vector == number of columns</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> to be updated by an update vector.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> @return number of fields */</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;ulint <a class="code" href="row0upd_8h.html#adc0bebe9c2bdc7ec292e9784374476f2">upd_get_n_fields</a>(<span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>); <span class="comment">/*!&lt; in: update vector */</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/** Returns the nth field of an update vector.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">@param[in]      update  update vector</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">@param[in]      n       field position in update vector</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">@return update vector field */</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<a class="code" href="structupd__field__t.html">upd_field_t</a> *<a class="code" href="row0upd_8h.html#a1cc9824c435b30f9957b9864ce39c8ad">upd_get_nth_field</a>(<span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, ulint <a class="code" href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#define upd_get_nth_field(update, n) ((update)-&gt;fields + (n))</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/** Sets an index field number to be updated by an update vector field.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">@param[in]      upd_field       update vector field</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">@param[in]      field_no        field number in a clustered index</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">@param[in]      index           index</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">@param[in]      trx             transaction */</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#ad6626ce48273c089093d1a95b5a32b20">upd_field_set_field_no</a>(<a class="code" href="structupd__field__t.html">upd_field_t</a> *upd_field, ulint field_no,</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                            <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structtrx__t.html">trx_t</a> *trx);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">/** set field number to a update vector field, marks this field is updated</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">@param[in,out]  upd_field       update vector field</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">@param[in]      field_no        virtual column sequence num</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">@param[in]      index           index */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#af3f6386e3414d3baee23fd9ba70cb8a1">upd_field_set_v_field_no</a>(<a class="code" href="structupd__field__t.html">upd_field_t</a> *upd_field, ulint field_no,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                              <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);<span class="comment"></span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/** Returns a field of an update vector by field_no.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> @return update vector field, or NULL */</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">const</span> <a class="code" href="structupd__field__t.html">upd_field_t</a> *<a class="code" href="row0upd_8h.html#a6ef1a621ff94f9f0dcd3e996c8c01eba">upd_get_field_by_field_no</a>(</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, <span class="comment">/*!&lt; in: update vector */</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    ulint no,            <span class="comment">/*!&lt; in: field_no */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">bool</span> is_virtual)     <span class="comment">/*!&lt; in: if it is a virtual column */</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/** Writes into the redo log the values of trx id and roll ptr and enough info</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> to determine their positions within a clustered index record.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> @return new pointer to mlog */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="row0upd_8h.html#a2720d792e43ac476db80779bba13544c">row_upd_write_sys_vals_to_log</a>(</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: clustered index */</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id,     <span class="comment">/*!&lt; in: transaction id */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr, <span class="comment">/*!&lt; in: roll ptr of the undo log record */</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *log_ptr,       <span class="comment">/*!&lt; pointer to a buffer of size &gt; 20 opened</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">                         in mlog */</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);         <span class="comment">/*!&lt; in: mtr */</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/** Updates the trx id and roll ptr field in a clustered index record when a</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">row is updated or marked deleted.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">@param[in,out]  rec             record</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">@param[in,out]  page_zip        compressed page whose uncompressed part will</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">                                be updated, or NULL</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">@param[in]      index           clustered index</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">@param[in]      offsets         rec_get_offsets(rec, index)</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">@param[in]      trx             transaction</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">@param[in]      roll_ptr        roll ptr of the undo log record, can be 0</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">                                during IMPORT */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#a01b7c860ec8f58d4fa4d79ad85c95f1b">row_upd_rec_sys_fields</a>(<a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                            <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="keyword">const</span> ulint *offsets,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                            <span class="keyword">const</span> <a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/** Sets the trx id or roll ptr field of a clustered index entry.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">@param[in,out] entry Index entry, where the memory buffers for sys fields are</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">already allocated: the function just copies the new values to them</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">@param[in] index Clustered index</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">@param[in] type Data_trx_id or data_roll_ptr</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">@param[in] val Value to write */</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#aa516d2dc3d1ddcdf1a73b31cd5cbce0b">row_upd_index_entry_sys_field</a>(<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                   ulint <a class="code" href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">type</a>, ib_uint64_t val);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/** Creates an update node for a query graph.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> @return own: update node */</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<a class="code" href="structupd__node__t.html">upd_node_t</a> *<a class="code" href="row0upd_8h.html#a655590bf847503b6297d9d8d246201ff">upd_node_create</a>(</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap); <span class="comment">/*!&lt; in: mem heap where created */</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">/** Writes to the redo log the new values of the fields occurring in the index.</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">@param[in]      index   index which to be updated</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">@param[in]      update  update vector</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">@param[in]      log_ptr pointer to mlog buffer: must contain at least</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">                        MLOG_BUF_MARGIN bytes of free space; the buffer</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">                        is closed within this function</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">@param[in]      mtr     mtr into whose log to write */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#a3b7fba00a40039307f4605056af9c54b">row_upd_index_write_log</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                             <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *log_ptr, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/** Returns TRUE if row update changes size of some field in index or if some</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> field to be updated is stored externally in rec or update.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"> @return true if the update changes the size of some field in index or</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> the field is external in rec or update */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;ibool <a class="code" href="row0upd_8h.html#a5c8da72b47b7afc4a67c12584cce14db">row_upd_changes_field_size_or_external</a>(</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">const</span> ulint *offsets,      <span class="comment">/*!&lt; in: rec_get_offsets(rec, index) */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>);      <span class="comment">/*!&lt; in: update vector */</span><span class="comment"></span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">/** Returns true if row update contains disowned external fields.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> @return true if the update contains disowned external fields. */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="row0upd_8h.html#a902192e6824406c3796068d2173b2aff">row_upd_changes_disowned_external</a>(</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>) <span class="comment">/*!&lt; in: update vector */</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">/** Replaces the new column values stored in the update vector to the</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"> record given. No field size changes are allowed. This function is</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"> usually invoked on a clustered index. The only use case for a</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"> secondary index is row_ins_sec_index_entry_by_modify() or its</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"> counterpart in ibuf_insert_to_index_page(). */</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#add4c4ef5c26a83086f51130897c89dd9">row_upd_rec_in_place</a>(</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,                <span class="comment">/*!&lt; in/out: record where replaced */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: the index the record belongs to */</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">const</span> ulint *offsets,      <span class="comment">/*!&lt; in: array returned by rec_get_offsets() */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>,       <span class="comment">/*!&lt; in: update vector */</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip); <span class="comment">/*!&lt; in: compressed page with enough space</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">                             available, or NULL */</span><span class="comment"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">/** Builds an update vector from those fields which in a secondary index entry</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> differ from a record that has the equal ordering fields. NOTE: we compare</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> the fields as binary strings!</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"> @return own: update vector of differing fields */</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="row0upd_8h.html#a00cf371b11d50c6ad635038a71306b73">row_upd_build_sec_rec_difference_binary</a>(</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,      <span class="comment">/*!&lt; in: secondary index record */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,   <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">const</span> ulint *offsets,  <span class="comment">/*!&lt; in: rec_get_offsets(rec, index) */</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>, <span class="comment">/*!&lt; in: entry to insert */</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap)      <span class="comment">/*!&lt; in: memory heap from which allocated */</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">/** Builds an update vector from those fields, excluding the roll ptr and</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">trx id fields, which in an index entry differ from a record that has</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">the equal ordering fields. NOTE: we compare the fields as binary strings!</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">@param[in]      index           clustered index</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">@param[in]      entry           clustered index entry to insert</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">@param[in]      rec             clustered index record</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">@param[in]      offsets         rec_get_offsets(rec,index), or NULL</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">@param[in]      no_sys          skip the system columns</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">                                DB_TRX_ID and DB_ROLL_PTR</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">@param[in]      trx             transaction (for diagnostics),</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">                                or NULL</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">@param[in]      heap            memory heap from which allocated</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">@param[in]      mysql_table     NULL, or mysql table object when</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">                                user thread invokes dml</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">@param[out]     error           error number in case of failure</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">@return own: update vector of differing fields, excluding roll ptr and</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">trx id */</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="row0upd_8h.html#a838bfedaa4543cf09a38da782a458217">row_upd_build_difference_binary</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>, <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                       <span class="keyword">const</span> ulint *offsets, <span class="keywordtype">bool</span> no_sys,</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                       <a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap,</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                       <a class="code" href="structTABLE.html">TABLE</a> *mysql_table, <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *<a class="code" href="mysql__ssl__rsa__setup_8cc.html#a024f1778ccb58afcfd4cd0bacbec4a8b">error</a>)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/** Replaces the new column values stored in the update vector to the index</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"> entry given.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">@param[in,out] entry Index entry where replaced; the clustered index record must</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">be covered by a lock or a page latch to prevent deletion [rollback or purge]</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">@param[in] index Index; note that this may also be a non-clustered index</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">@param[in] update An update vector built for the index so that the field number</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">in an upd_field is the index position</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">@param[in] order_only If true, limit the replacement to ordering fields of</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">index; note that this does not work for non-clustered indexes.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">@param[in] heap Memory heap for allocating and copying the new values */</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#afbdbead3f6bc4683c091c025761b28c7">row_upd_index_replace_new_col_vals_index_pos</a>(<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>,</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                                  <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                                  <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>,</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                                  ibool order_only,</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                                  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/** Replaces the new column values stored in the update vector to the index</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"> entry given.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">@param[in,out] entry Index entry where replaced; the clustered index record must</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">be covered by a lock or a page latch to prevent deletion (rollback or purge)</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">@param[in] index Index; note that this may also be a non-clustered index</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">@param[in] update An update vector built for the clustered index so that the</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">field number in an upd_field is the clustered index position</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">@param[in] heap Memory heap for allocating and copying the new values */</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#a9a9a7b3c3d7c1127f608f91ae11b41ef">row_upd_index_replace_new_col_vals</a>(<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>,</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/** Replaces the new column values stored in the update vector.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">@param[in] trx Current transaction.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">@param[in,out] row Row where replaced, indexed by col_no; the clustered index</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">record must be covered by a lock or a page latch to prevent deletion (rollback</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">or purge)</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">@param[in,out] ext Null, or externally stored column prefixes</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">@param[in] index Clustered index</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">@param[in] update An update vector built for the clustered index</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">@param[in] heap Memory heap */</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#acc29008c34ee2e8c776a6d73b76f61e4">row_upd_replace</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdtuple__t.html">dtuple_t</a> *row, <a class="code" href="structrow__ext__t.html">row_ext_t</a> **ext,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                     <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                     <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">/** Replaces the virtual column values stored in a dtuple with that of</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">a update vector.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">@param[in,out]  row     dtuple whose column to be updated</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">@param[in]      table   table</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">@param[in]      update  an update vector built for the clustered index</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">@param[in]      upd_new update to new or old value</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">@param[in,out]  undo_row undo row (if needs to be updated)</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">@param[in]      ptr     remaining part in update undo log */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#ae0039db94d3ed183135cfa8d4a49b42d">row_upd_replace_vcol</a>(<a class="code" href="structdtuple__t.html">dtuple_t</a> *row, <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table,</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                          <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, <span class="keywordtype">bool</span> upd_new, <a class="code" href="structdtuple__t.html">dtuple_t</a> *undo_row,</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                          <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">/** Checks if an update vector changes an ordering field of an index record.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">It will also help check if any non-multi-value field on the multi-value index</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">gets updated or not.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">This function is fast if the update vector is short or the number of ordering</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">fields in the index is small. Otherwise, this can be quadratic.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">NOTE: we compare the fields as binary strings!</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">@param[in]      index           index of the record</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">@param[in]      update          update vector for the row; NOTE: the</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">                                field numbers in this MUST be clustered index</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">                                positions! */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">@param[in]      thr             query thread, or NULL */</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">@param[in]      row             old value of row, or NULL if the</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">                                row and the data values in update are not</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">                                known when this function is called, e.g., at</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">                                compile time</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">@param[in]      ext             NULL, or prefixes of the externally</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">                                stored columns in the old row</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">@param[in,out]  non_mv_upd      NULL, or not NULL pointer to get the</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">                                information about whether any non-multi-value</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">                                field on the multi-value index gets updated</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">@param[in]      flag            ROW_BUILD_NORMAL, ROW_BUILD_FOR_PURGE or</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">                                ROW_BUILD_FOR_UNDO</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">@return true if update vector changes an ordering field in the index record */</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="row0upd_8h.html#af70a462bcc93bd912d846fb253463bf0">row_upd_changes_ord_field_binary_func</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;#ifdef UNIV_DEBUG</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="structque__thr__t.html">que_thr_t</a> *thr,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;#endif <span class="comment">/* UNIV_DEBUG */</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *row,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="structrow__ext__t.html">row_ext_t</a> *ext,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                           <span class="keywordtype">bool</span> *non_mv_upd, ulint <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a8970df395a8d7c0590e52270e9803037">  301</a></span>&#160;<span class="preprocessor">#define row_upd_changes_ord_field_binary(index, update, thr, row, ext, \</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">                                         non_mv_upd)                   \</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">  row_upd_changes_ord_field_binary_func(index, update, thr, row, ext,  \</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">                                        non_mv_upd, 0)</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#define row_upd_changes_ord_field_binary(index, update, thr, row, ext, \</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">                                         non_mv_upd)                   \</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">  row_upd_changes_ord_field_binary_func(index, update, row, ext, non_mv_upd, 0)</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">/** Checks if an FTS indexed column is affected by an UPDATE.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"> @return offset within fts_t::indexes if FTS indexed column updated else</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"> ULINT_UNDEFINED */</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;ulint <a class="code" href="row0upd_8h.html#ab34c7757393893c9ac19cd3dfaf1befe">row_upd_changes_fts_column</a>(</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="structdict__table__t.html">dict_table_t</a> *table,     <span class="comment">/*!&lt; in: table */</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="structupd__field__t.html">upd_field_t</a> *upd_field); <span class="comment">/*!&lt; in: field to check */</span><span class="comment"></span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">/** Checks if an FTS Doc ID column is affected by an UPDATE.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> @return whether Doc ID column is affected */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="row0upd_8h.html#aedafd388956767bd826a954029de13f4">row_upd_changes_doc_id</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table,    <span class="comment">/*!&lt; in: table */</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                            <a class="code" href="structupd__field__t.html">upd_field_t</a> *upd_field) <span class="comment">/*!&lt; in: field to check */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">/** Checks if an update vector changes an ordering field of an index record.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"> This function is fast if the update vector is short or the number of ordering</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> fields in the index is small. Otherwise, this can be quadratic.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> NOTE: we compare the fields as binary strings!</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> @return true if update vector may change an ordering field in an index</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> record */</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;ibool <a class="code" href="row0upd_8h.html#a0b3e7dba0ba7d65289f702a3d3f8ec00">row_upd_changes_some_index_ord_field_binary</a>(</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="comment">/*!&lt; in: table */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>);      <span class="comment">/*!&lt; in: update vector for the row */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">/** Stores to the heap the row on which the node-&gt;pcur is positioned.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">@param[in]      trx             the transaction object</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">@param[in]      node            row update node</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">@param[in]      thd             mysql thread handle</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">@param[in,out]  mysql_table     NULL, or mysql table object when</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">                                user thread invokes dml */</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#a8b88335c2bea8df94e814325e117c491">row_upd_store_row</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structupd__node__t.html">upd_node_t</a> *node, <a class="code" href="classTHD.html">THD</a> *thd,</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                       <a class="code" href="structTABLE.html">TABLE</a> *mysql_table);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">/** Updates a row in a table. This is a high-level function used</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"> in SQL execution graphs.</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"> @return query thread to run next or NULL */</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<a class="code" href="structque__thr__t.html">que_thr_t</a> *<a class="code" href="row0upd_8h.html#a33265d5ab656dba287eb974c407bcf18">row_upd_step</a>(<a class="code" href="structque__thr__t.html">que_thr_t</a> *thr); <span class="comment">/*!&lt; in: query thread */</span><span class="comment"></span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">/** Parses the log data of system field values.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"> @return log data end or NULL */</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="row0upd_8h.html#ae304da2bc13e35c67c164467960b27ac">row_upd_parse_sys_vals</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr,     <span class="comment">/*!&lt; in: buffer */</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                             <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr, <span class="comment">/*!&lt; in: buffer end */</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                             ulint *<a class="code" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>, <span class="comment">/*!&lt; out: TRX_ID position in record */</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                             <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *trx_id,      <span class="comment">/*!&lt; out: trx id */</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                             <a class="code" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr); <span class="comment">/*!&lt; out: roll ptr */</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">/** Updates the trx id and roll ptr field in a clustered index record in</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> database recovery.</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">@param[in,out] rec Record</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">@param[in,out] page_zip Compressed page, or null</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">@param[in] offsets Array returned by rec_get_offsets()</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">@param[in] pos Trx_id position in rec</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">@param[in] trx_id Transaction id</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">@param[in] roll_ptr Roll ptr of the undo log record */</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0upd_8h.html#abfb05f212ddac2808ee035ef4d22f917">row_upd_rec_sys_fields_in_recovery</a>(<a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> *page_zip,</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                        <span class="keyword">const</span> ulint *offsets, ulint <a class="code" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                                        <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="code" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">/** Parses the log data written by row_upd_index_write_log.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"> @return log data end or NULL */</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="row0upd_8h.html#a8bf0960639c762f39cce1d29241e8b1e">row_upd_index_parse</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr,     <span class="comment">/*!&lt; in: buffer */</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                          <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr, <span class="comment">/*!&lt; in: buffer end */</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                          <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap,    <span class="comment">/*!&lt; in: memory heap where update</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">                                               vector is    built */</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                          <a class="code" href="structupd__t.html">upd_t</a> **update_out); <span class="comment">/*!&lt; out: update vector */</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">/** Get the new autoinc counter from the update vector when there is</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">an autoinc field defined in this table.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">@param[in]      update                  update vector for the clustered index</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">@param[in]      autoinc_field_no        autoinc field&#39;s order in clustered index</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">@return the new counter if we find it in the update vector, otherwise 0.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">We don&#39;t mind that the new counter happens to be 0, we just care about</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">non-zero counters. */</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;ib_uint64_t <a class="code" href="row0upd_8h.html#a5cfdb6c921068d3859455412321acc28">row_upd_get_new_autoinc_counter</a>(<span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>,</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                            ulint autoinc_field_no);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">/** This structure is used for undo logging of LOB index changes. */</span></div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="structlob__index__diff__t.html">  384</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structlob__index__diff__t.html">lob_index_diff_t</a> {</div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="structlob__index__diff__t.html#a4b49d58081386ad65e45ed28f4dcc9d8">  385</a></span>&#160;  <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> <a class="code" href="structlob__index__diff__t.html#a4b49d58081386ad65e45ed28f4dcc9d8">m_modifier_trxid</a>;</div><div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="structlob__index__diff__t.html#a2aa7714f87a21522de70f598e069ca05">  386</a></span>&#160;  <a class="code" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> <a class="code" href="structlob__index__diff__t.html#a2aa7714f87a21522de70f598e069ca05">m_modifier_undo_no</a>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">  /** Print the current object into the given output stream.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">  @param[in,out]        out     the output stream.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">  @return the output stream. */</span></div><div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="structlob__index__diff__t.html#aa3a356e776c3b6a6be7f1338d1693800">  391</a></span>&#160;  std::ostream &amp;<a class="code" href="structlob__index__diff__t.html#aa3a356e776c3b6a6be7f1338d1693800">print</a>(std::ostream &amp;out)<span class="keyword"> const </span>{</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;[lob_index_diff_t: m_modifier_trxid=&quot;</span> &lt;&lt; m_modifier_trxid</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;, m_modifier_undo_no=&quot;</span> &lt;&lt; m_modifier_undo_no &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> (out);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;};</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="keyword">using</span> <a class="code" href="row0upd_8h.html#a457641854a34ad6c7872675ee93265f7">Lob_index_diff_vec</a> =</div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a457641854a34ad6c7872675ee93265f7">  399</a></span>&#160;    std::vector&lt;lob_index_diff_t, mem_heap_allocator&lt;lob_index_diff_t&gt;&gt;;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/** Overloading the global output operator to print lob_index_diff_t object.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">@param[in,out]  out     the output stream.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">@param[in]      obj     the object to be printed.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">@return the output stream.*/</span></div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="row0upd_8h.html#ae66c139b895a217591a0e987a6870d50">  405</a></span>&#160;<span class="keyword">inline</span> std::ostream &amp;<a class="code" href="row0upd_8h.html#ae66c139b895a217591a0e987a6870d50">operator&lt;&lt;</a>(std::ostream &amp;out,</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                <span class="keyword">const</span> <a class="code" href="structlob__index__diff__t.html">lob_index_diff_t</a> &amp;obj) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">return</span> (obj.<a class="code" href="structlob__index__diff__t.html#aa3a356e776c3b6a6be7f1338d1693800">print</a>(out));</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">/** The modification done to the LOB. */</span></div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="structLob__diff.html">  411</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structLob__diff.html">Lob_diff</a> {<span class="comment"></span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">  /** Constructor.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">  @param[in]  mem_heap  the memory heap in which this object</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">                        has been created. */</span></div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="structLob__diff.html#a4f1e0b45d15464533cac846e8cd78064">  415</a></span>&#160;  <a class="code" href="structLob__diff.html#a4f1e0b45d15464533cac846e8cd78064">Lob_diff</a>(<a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *mem_heap) : heap(mem_heap) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    m_idx_diffs = <span class="keyword">static_cast&lt;</span><a class="code" href="row0upd_8h.html#a457641854a34ad6c7872675ee93265f7">Lob_index_diff_vec</a> *<span class="keyword">&gt;</span>(</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="mem0mem_8h.html#a92f7ee9ca3354fdd5bc633f5ae7b9421">mem_heap_alloc</a>(heap, <span class="keyword">sizeof</span>(<a class="code" href="row0upd_8h.html#a457641854a34ad6c7872675ee93265f7">Lob_index_diff_vec</a>)));</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keyword">new</span> (m_idx_diffs)</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="row0upd_8h.html#a457641854a34ad6c7872675ee93265f7">Lob_index_diff_vec</a>(<a class="code" href="classmem__heap__allocator.html">mem_heap_allocator&lt;lob_index_diff_t&gt;</a>(heap));</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">  /** Read the offset from the undo record.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">  @param[in]   undo_ptr   pointer into the undo log record.</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">  @return pointer into the undo log record after offset. */</span></div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="structLob__diff.html#ae3a996ded9ab124a0e9207bce8cfa665">  425</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structLob__diff.html#ae3a996ded9ab124a0e9207bce8cfa665">read_offset</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *undo_ptr) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">/* Read the offset. */</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    m_offset = <a class="code" href="mach0data_8h.html#a0ea7e40767d86097b5e2ff1c45fec05c">mach_read_next_compressed</a>(&amp;undo_ptr);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">return</span> (undo_ptr);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">  /** Read the length from the undo record.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">  @param[in]   undo_ptr   pointer into the undo log record.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">  @return pointer into the undo log record after length information. */</span></div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="structLob__diff.html#a61157b45c5c3ba4c6a8ffcafe8e142f8">  434</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structLob__diff.html#a61157b45c5c3ba4c6a8ffcafe8e142f8">read_length</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *undo_ptr) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">/* Read the length. */</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    m_length = <a class="code" href="mach0data_8h.html#a0ea7e40767d86097b5e2ff1c45fec05c">mach_read_next_compressed</a>(&amp;undo_ptr);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(m_length &lt;= <a class="code" href="structlob_1_1ref__t.html#a43626f506fbdf8a3701266f6f4101c12">lob::ref_t::LOB_SMALL_CHANGE_THRESHOLD</a>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> (undo_ptr);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="structLob__diff.html#ab62e22753c0ad6bfb4265ea3155387d7">  442</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structLob__diff.html#ab62e22753c0ad6bfb4265ea3155387d7">set_old_data</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *undo_ptr) { m_old_data = undo_ptr; }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="structLob__diff.html#a1a7d4f16d4dc2fbf57cd7b6a38bc0dab">  444</a></span>&#160;  std::ostream &amp;<a class="code" href="structLob__diff.html#a1a7d4f16d4dc2fbf57cd7b6a38bc0dab">print</a>(std::ostream &amp;out)<span class="keyword"> const </span>{</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;[Lob_diff: offset=&quot;</span> &lt;&lt; m_offset &lt;&lt; <span class="stringliteral">&quot;, length=&quot;</span> &lt;&lt; m_length;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span> (m_old_data == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      out &lt;&lt; <span class="stringliteral">&quot;, m_old_data=nullptr&quot;</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      out &lt;&lt; <span class="stringliteral">&quot;, m_old_data=&quot;</span> &lt;&lt; <a class="code" href="structPrintBuffer.html">PrintBuffer</a>(m_old_data, m_length);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> (m_idx_diffs != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> iter = m_idx_diffs-&gt;begin(); iter != m_idx_diffs-&gt;end();</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;           ++iter) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        out &lt;&lt; *iter;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> (out);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">  /** The offset within LOB where partial update happened. */</span></div><div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="structLob__diff.html#afd743f5ff7312917f710f126156b5a16">  464</a></span>&#160;  ulint m_offset = 0;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  /** The length of the modification. */</span></div><div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="structLob__diff.html#ab19f914ecb48e122cc589b7b2576beff">  467</a></span>&#160;  ulint m_length = 0;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">  /** Changes to the LOB data. */</span></div><div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="structLob__diff.html#a4f5991c21878e4b030f406b7bec665f8">  470</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *m_old_data = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">  /** Changes to the LOB index. */</span></div><div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="structLob__diff.html#a7940fbcde65b46d944e8e7f2c39f3dd0">  473</a></span>&#160;  <a class="code" href="row0upd_8h.html#a457641854a34ad6c7872675ee93265f7">Lob_index_diff_vec</a> *<a class="code" href="structLob__diff.html#a7940fbcde65b46d944e8e7f2c39f3dd0">m_idx_diffs</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">  /** Memory heap in which this object is allocated. */</span></div><div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="structLob__diff.html#a633b44a1ad724464acd4e83b9f6a65a2">  476</a></span>&#160;  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structLob__diff.html#a633b44a1ad724464acd4e83b9f6a65a2">heap</a>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;};</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a49846971910ff699a3422b5fb5f41565">  479</a></span>&#160;<span class="keyword">using</span> <a class="code" href="row0upd_8h.html#a49846971910ff699a3422b5fb5f41565">Lob_diff_vector</a> = std::vector&lt;Lob_diff, mem_heap_allocator&lt;Lob_diff&gt;&gt;;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="row0upd_8h.html#ae7b9fd5c9abaed8e55aaa412b17a4a20">  481</a></span>&#160;<span class="keyword">inline</span> std::ostream &amp;<a class="code" href="row0upd_8h.html#ae66c139b895a217591a0e987a6870d50">operator&lt;&lt;</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="structLob__diff.html">Lob_diff</a> &amp;obj) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">return</span> (obj.<a class="code" href="structLob__diff.html#a1a7d4f16d4dc2fbf57cd7b6a38bc0dab">print</a>(out));</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">/* Update vector field */</span></div><div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="structupd__field__t.html">  486</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structupd__field__t.html">upd_field_t</a> {</div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a6498094981440d82e6688edb90f1c051">  487</a></span>&#160;  <a class="code" href="structupd__field__t.html#a6498094981440d82e6688edb90f1c051">upd_field_t</a>()</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      : field_no(0),</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        orig_len(0),</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        exp(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        old_v_val(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        mysql_field(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        ext_in_old(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        lob_diffs(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        lob_first_page_no(<a class="code" href="fil0fil_8h.html#a578077ea17f5093fc8fa7381ae89f7c8">FIL_NULL</a>),</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        lob_version(0),</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        last_trx_id(0),</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        last_undo_no(0),</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        heap(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>) {}</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="structupd__field__t.html#ad139887b4f8c9f87d5702ec22d5cf15c">  501</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structupd__field__t.html#ad139887b4f8c9f87d5702ec22d5cf15c">is_virtual</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (new_val.is_virtual()); }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a24991dc582c1bbfb02d64a568c5d3d5a">  503</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structupd__field__t.html#a24991dc582c1bbfb02d64a568c5d3d5a">field_no</a> : 16; <span class="comment">/*!&lt; field number in an index, usually</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">                          the clustered index, but in updating</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">                          a secondary index record in btr0cur.cc</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">                          this is the position in the secondary</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">                          index, also it could be the position</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">                          in virtual index for virtual column */</span></div><div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a11786e295eb51c0f3a7fd910ad20757a">  509</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structupd__field__t.html#a11786e295eb51c0f3a7fd910ad20757a">orig_len</a> : 16; <span class="comment">/*!&lt; original length of the locally</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">                          stored part of an externally stored</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">                          column, or 0 */</span></div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="structupd__field__t.html#aa7a5b5c2d701cb0ebb4e90a2209237b2">  512</a></span>&#160;  <a class="code" href="que0types_8h.html#a3509f9b5d79a0b309f8250593e46ed00">que_node_t</a> *<a class="code" href="structupd__field__t.html#aa7a5b5c2d701cb0ebb4e90a2209237b2">exp</a>;        <span class="comment">/*!&lt; expression for calculating a new</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">                          value: it refers to column values and</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">                          constants in the symbol table of the</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">                          query graph */</span></div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a6640d0972d234818aa6ba7bf9dadcf3b">  516</a></span>&#160;  <a class="code" href="structdfield__t.html">dfield_t</a> <a class="code" href="structupd__field__t.html#a6640d0972d234818aa6ba7bf9dadcf3b">old_val</a>;       <span class="comment">/*!&lt; old value for the column */</span></div><div class="line"><a name="l00517"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a1483dab030584cbfa06cceaafda3ee60">  517</a></span>&#160;  <a class="code" href="structdfield__t.html">dfield_t</a> <a class="code" href="structupd__field__t.html#a1483dab030584cbfa06cceaafda3ee60">new_val</a>;       <span class="comment">/*!&lt; new value for the column */</span></div><div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="structupd__field__t.html#aefb15559ec2aa1c62029a3da997f727d">  518</a></span>&#160;  <a class="code" href="structdfield__t.html">dfield_t</a> *<a class="code" href="structupd__field__t.html#aefb15559ec2aa1c62029a3da997f727d">old_v_val</a>;    <span class="comment">/*!&lt; old value for the virtual column */</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a88c60d615d41d9947c656829e5a49fa3">  520</a></span>&#160;  <a class="code" href="classField.html">Field</a> *<a class="code" href="structupd__field__t.html#a88c60d615d41d9947c656829e5a49fa3">mysql_field</a>; <span class="comment">/*!&lt; the mysql field object. */</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">  /** If true, the field was stored externally in the old row. */</span></div><div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a1c5e8c7e9d72a51f7649ab1d380df804">  523</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structupd__field__t.html#a1c5e8c7e9d72a51f7649ab1d380df804">ext_in_old</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a32ebaf2a9f2ce4fb479e63102d4dd63a">  525</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structupd__field__t.html#a32ebaf2a9f2ce4fb479e63102d4dd63a">push_lob_diff</a>(<span class="keyword">const</span> <a class="code" href="structLob__diff.html">Lob_diff</a> &amp;lob_diff) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">if</span> (lob_diffs == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      lob_diffs = <span class="keyword">static_cast&lt;</span><a class="code" href="row0upd_8h.html#a49846971910ff699a3422b5fb5f41565">Lob_diff_vector</a> *<span class="keyword">&gt;</span>(</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;          <a class="code" href="mem0mem_8h.html#a92f7ee9ca3354fdd5bc633f5ae7b9421">mem_heap_alloc</a>(heap, <span class="keyword">sizeof</span>(<a class="code" href="row0upd_8h.html#a49846971910ff699a3422b5fb5f41565">Lob_diff_vector</a>)));</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keyword">new</span> (lob_diffs) <a class="code" href="row0upd_8h.html#a49846971910ff699a3422b5fb5f41565">Lob_diff_vector</a>(<a class="code" href="classmem__heap__allocator.html">mem_heap_allocator&lt;Lob_diff&gt;</a>(heap));</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    lob_diffs-&gt;push_back(lob_diff);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">  /** List of changes done to this updated field.  This is usually</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">  populated from the undo log. */</span></div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="structupd__field__t.html#aa9ff7926b9473b24ba52368b1537149e">  536</a></span>&#160;  <a class="code" href="row0upd_8h.html#a49846971910ff699a3422b5fb5f41565">Lob_diff_vector</a> *<a class="code" href="structupd__field__t.html#aa9ff7926b9473b24ba52368b1537149e">lob_diffs</a>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">  /** The LOB first page number.  This information is read from</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">  the undo log. */</span></div><div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a35ac0507f5b58af88e7ff5b0d021d5fe">  540</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structupd__field__t.html#a35ac0507f5b58af88e7ff5b0d021d5fe">lob_first_page_no</a>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="structupd__field__t.html#adec4c4746d08ece07cfbb453b2e33e54">  542</a></span>&#160;  ulint <a class="code" href="structupd__field__t.html#adec4c4746d08ece07cfbb453b2e33e54">lob_version</a>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">  /** The last trx that modified the LOB. */</span></div><div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a2e163317a4778d6acddcb07a46f0ad41">  545</a></span>&#160;  <a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> <a class="code" href="structupd__field__t.html#a2e163317a4778d6acddcb07a46f0ad41">last_trx_id</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">  /** The last stmt within trx that modified the LOB. */</span></div><div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="structupd__field__t.html#a16ce5e066e256775adc87b257fbb885f">  548</a></span>&#160;  <a class="code" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> <a class="code" href="structupd__field__t.html#a16ce5e066e256775adc87b257fbb885f">last_undo_no</a>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  std::ostream &amp;<a class="code" href="structlob__index__diff__t.html#aa3a356e776c3b6a6be7f1338d1693800">print</a>(std::ostream &amp;out) <span class="keyword">const</span>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">  /** Empty the information collected on LOB diffs. */</span></div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="structupd__field__t.html#aff2f5bb0a734bbb339022d54efb422a1">  553</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structupd__field__t.html#aff2f5bb0a734bbb339022d54efb422a1">reset</a>() {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (lob_diffs != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      lob_diffs-&gt;clear();</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">  /** Memory heap in which this object is allocated. */</span></div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="structupd__field__t.html#aa17a9f1b72f77069d9eae5f5f6241fb0">  560</a></span>&#160;  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structupd__field__t.html#aa17a9f1b72f77069d9eae5f5f6241fb0">heap</a>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;};</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="row0upd_8h.html#ab109239003466d6abc85ad1cf081c596">  563</a></span>&#160;<span class="keyword">inline</span> std::ostream &amp;<a class="code" href="row0upd_8h.html#ae66c139b895a217591a0e987a6870d50">operator&lt;&lt;</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="structupd__field__t.html">upd_field_t</a> &amp;obj) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">return</span> (obj.<a class="code" href="structupd__field__t.html#a7dbc8da83bf71dc7800de69c1e5bfcb7">print</a>(out));</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">/* check whether an update field is on virtual column */</span></div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a0a9de46e091d1fa137b2d8d2c855665a">  568</a></span>&#160;<span class="preprocessor">#define upd_fld_is_virtual_col(upd_fld) \</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">  (((upd_fld)-&gt;new_val.type.prtype &amp; DATA_VIRTUAL) == DATA_VIRTUAL)</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">/* check whether an update field is on multi-value virtual column */</span></div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a64127ec7ade5c887ac2f9849d5533d61">  572</a></span>&#160;<span class="preprocessor">#define upd_fld_is_multi_value_col(upd_fld) \</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">  (dfield_is_multi_value(&amp;((upd_fld)-&gt;new_val)))</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">/* set DATA_VIRTUAL bit on update field to show it is a virtual column */</span></div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a5c93eed92cd93144eeaa7f264adabc45">  576</a></span>&#160;<span class="preprocessor">#define upd_fld_set_virtual_col(upd_fld) \</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">  ((upd_fld)-&gt;new_val.type.prtype |= DATA_VIRTUAL)</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">/* Update vector structure */</span></div><div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="structupd__t.html">  580</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structupd__t.html">upd_t</a> {</div><div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="structupd__t.html#a1e0c47f0a3f73259c4e3617a095fd5b2">  581</a></span>&#160;  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structupd__t.html#a1e0c47f0a3f73259c4e3617a095fd5b2">heap</a>;    <span class="comment">/*!&lt; heap from which memory allocated */</span></div><div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="structupd__t.html#a68b22ce8ab3d4c43cd46ce7b111986f5">  582</a></span>&#160;  ulint <a class="code" href="structupd__t.html#a68b22ce8ab3d4c43cd46ce7b111986f5">info_bits</a>;     <span class="comment">/*!&lt; new value of info bits to record;</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">                       default is 0 */</span></div><div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="structupd__t.html#a5300a73a3b93bcc8b72ee38d2e53b68d">  584</a></span>&#160;  <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="structupd__t.html#a5300a73a3b93bcc8b72ee38d2e53b68d">old_vrow</a>;  <span class="comment">/*!&lt; pointer to old row, used for</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">                       virtual column update now */</span></div><div class="line"><a name="l00586"></a><span class="lineno"><a class="line" href="structupd__t.html#ab2bfa446cc2f342109a141bf73b2b712">  586</a></span>&#160;  <a class="code" href="structdict__table__t.html">dict_table_t</a> *<a class="code" href="structupd__t.html#ab2bfa446cc2f342109a141bf73b2b712">table</a>; <span class="comment">/*!&lt; the table object */</span></div><div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="structupd__t.html#ac97ddc59e53fb9178ef06621185afc99">  587</a></span>&#160;  <a class="code" href="structTABLE.html">TABLE</a> *<a class="code" href="structupd__t.html#ac97ddc59e53fb9178ef06621185afc99">mysql_table</a>;  <span class="comment">/*!&lt; the mysql table object */</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="structupd__t.html#ad0b8da45ec3469cc2a5fb8355c3083e9">  589</a></span>&#160;  ulint <a class="code" href="structupd__t.html#ad0b8da45ec3469cc2a5fb8355c3083e9">n_fields</a>;      <span class="comment">/*!&lt; number of update fields */</span></div><div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="structupd__t.html#a5757d346df24c9f2135f5de54cf5f305">  590</a></span>&#160;  <a class="code" href="structupd__field__t.html">upd_field_t</a> *<a class="code" href="structupd__t.html#a5757d346df24c9f2135f5de54cf5f305">fields</a>; <span class="comment">/*!&lt; array of update fields */</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">  /** Append an update field to the end of array</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">  @param[in]    field   an update field */</span></div><div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="structupd__t.html#a0a69c9ef6f7b7c05375e5312e9e2063d">  594</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structupd__t.html#a0a69c9ef6f7b7c05375e5312e9e2063d">append</a>(<span class="keyword">const</span> <a class="code" href="structupd__field__t.html">upd_field_t</a> &amp;field) { fields[n_fields++] = field; }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">  /** Determine if the given field_no is modified.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">  @return true if modified, false otherwise.  */</span></div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="structupd__t.html#acdd8561974680ba04bd142f24c9d56c5">  598</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structupd__t.html#acdd8561974680ba04bd142f24c9d56c5">is_modified</a>(<span class="keyword">const</span> ulint field_no)<span class="keyword"> const </span>{</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">if</span> (table == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> (get_field_by_field_no(field_no, table-&gt;<a class="code" href="structdict__table__t.html#a83d1ea6c70cef5d079029d5873a02329">first_index</a>()) != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">  /** Reset the update fields. */</span></div><div class="line"><a name="l00608"></a><span class="lineno"><a class="line" href="structupd__t.html#ad3579e430df55059ab39bb177226cceb">  608</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structupd__t.html#ad3579e430df55059ab39bb177226cceb">reset</a>() {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">for</span> (ulint i = 0; i &lt; n_fields; ++i) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      fields[i].<a class="code" href="structupd__field__t.html#aff2f5bb0a734bbb339022d54efb422a1">reset</a>();</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="structupd__t.html#a3e7adc3e55b7a2834c6ad7487c0f7ec1">  615</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structupd__t.html#a3e7adc3e55b7a2834c6ad7487c0f7ec1">validate</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">for</span> (ulint i = 0; i &lt; n_fields; ++i) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="structdfield__t.html">dfield_t</a> *field = &amp;fields[i].<a class="code" href="structupd__field__t.html#a1483dab030584cbfa06cceaafda3ee60">new_val</a>;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="data0data_8h.html#aea1c85e508ac8ff58fcde24563747056">dfield_is_ext</a>(field)) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="data0data_8h.html#ad22cc2cae2eee0a747a42a1a874f49d6">dfield_get_len</a>(field) &gt;= <a class="code" href="btr0types_8h.html#a0ce016535d5de52a1e27362330676df0">BTR_EXTERN_FIELD_REF_SIZE</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="preprocessor">#endif  // UNIV_DEBUG</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">  /** Check if the given field number is partially updated.</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">  @param[in]    field_no        the field number.</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">  @return true if partially updated, false otherwise. */</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordtype">bool</span> is_partially_updated(ulint field_no) <span class="keyword">const</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <a class="code" href="structupd__field__t.html">upd_field_t</a> *get_field_by_field_no(ulint field_no, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keyword">const</span> <a class="code" href="classMem__root__array.html">Binary_diff_vector</a> *get_binary_diff_by_field_no(ulint field_no) <span class="keyword">const</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">  /** Calculate the total number of bytes modified in one BLOB.</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">  @param[in]    bdv     the binary diff vector containing all the</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">                          modifications to one BLOB.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">  @return the total modified bytes. */</span></div><div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="structupd__t.html#a0b291312f5c5faeacbc6055e780d9160">  639</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="structupd__t.html#a0b291312f5c5faeacbc6055e780d9160">get_total_modified_bytes</a>(<span class="keyword">const</span> <a class="code" href="classMem__root__array.html">Binary_diff_vector</a> &amp;bdv) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="namespaceCounter.html#a7ba056d7d4c2cd809eca09fc5fe2e075">total</a> = 0;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classBinary__diff.html">Binary_diff</a> &amp;bdiff : bdv) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      total += bdiff.length();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> (total);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  std::ostream &amp;<a class="code" href="structlob__index__diff__t.html#aa3a356e776c3b6a6be7f1338d1693800">print</a>(std::ostream &amp;out) <span class="keyword">const</span>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">  /** Print the partial update vector (puvect) of the given update</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">  field.</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">  @param[in,out]        out     the output stream</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">  @param[in]    uf      the updated field.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">  @return the output stream. */</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  std::ostream &amp;print_puvect(std::ostream &amp;out, <a class="code" href="structupd__field__t.html">upd_field_t</a> *uf) <span class="keyword">const</span>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;};</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">/** Print the given binary diff into the given output stream.</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">@param[in]      out     the output stream</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">@param[in]      bdiff   binary diff to be printed.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">@param[in]      table   the table dictionary object.</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">@param[in]      field   mysql field object.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">@return the output stream */</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;std::ostream &amp;<a class="code" href="row0upd_8h.html#a2522b883af6618c18e80d1427d467d38">print_binary_diff</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="classBinary__diff.html">Binary_diff</a> *bdiff,</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                                <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="keyword">const</span> <a class="code" href="classField.html">Field</a> *field);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;std::ostream &amp;<a class="code" href="row0upd_8h.html#a2522b883af6618c18e80d1427d467d38">print_binary_diff</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="classBinary__diff.html">Binary_diff</a> *bdiff);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="row0upd_8h.html#afff98575fe5088121ea9f66cb649e7df">  669</a></span>&#160;<span class="keyword">inline</span> std::ostream &amp;<a class="code" href="row0upd_8h.html#ae66c139b895a217591a0e987a6870d50">operator&lt;&lt;</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="structupd__t.html">upd_t</a> &amp;obj) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">return</span> (obj.<a class="code" href="structupd__t.html#ab27efa45f4490f680321e8dc9eb578ba">print</a>(out));</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="row0upd_8h.html#ae568f74fa2ed2cb5b3c9cbd99652696e">  673</a></span>&#160;<span class="keyword">inline</span> std::ostream &amp;<a class="code" href="row0upd_8h.html#ae66c139b895a217591a0e987a6870d50">operator&lt;&lt;</a>(std::ostream &amp;out,</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classMem__root__array.html">Binary_diff_vector</a> &amp;obj) {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">return</span> (out);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">/* Update node structure which also implements the delete operation</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">of a row */</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="structupd__node__t.html">  683</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structupd__node__t.html">upd_node_t</a> {</div><div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="structupd__node__t.html#ab9683ed65b6da140d40da6536234c335">  684</a></span>&#160;  <a class="code" href="structque__common__t.html">que_common_t</a> <a class="code" href="structupd__node__t.html#ab9683ed65b6da140d40da6536234c335">common</a>; <span class="comment">/*!&lt; node type: QUE_NODE_UPDATE */</span></div><div class="line"><a name="l00685"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a84842d3940c05aa0a88cf03cd1adead6">  685</a></span>&#160;  ibool <a class="code" href="structupd__node__t.html#a84842d3940c05aa0a88cf03cd1adead6">is_delete</a>;     <span class="comment">/* TRUE if delete, FALSE if update */</span></div><div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="structupd__node__t.html#ab7792b474eb8a1c69c844cacbe748778">  686</a></span>&#160;  ibool <a class="code" href="structupd__node__t.html#ab7792b474eb8a1c69c844cacbe748778">searched_update</a>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="comment">/* TRUE if searched update, FALSE if</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">  positioned */</span></div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a13b793a6b14a71b8a9e57db38aadfb0b">  689</a></span>&#160;  ibool <a class="code" href="structupd__node__t.html#a13b793a6b14a71b8a9e57db38aadfb0b">in_mysql_interface</a>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">/* TRUE if the update node was created</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">  for the MySQL interface */</span></div><div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a2f2ace2f2cab930745b4a2751e345d5e">  692</a></span>&#160;  <a class="code" href="structdict__foreign__t.html">dict_foreign_t</a> *<a class="code" href="structupd__node__t.html#a2f2ace2f2cab930745b4a2751e345d5e">foreign</a>;  <span class="comment">/* NULL or pointer to a foreign key</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">                            constraint if this update node is used in</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">                            doing an ON DELETE or ON UPDATE operation */</span></div><div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="structupd__node__t.html#aff0415d839cb409fa906765ee4e485f1">  695</a></span>&#160;  <a class="code" href="structupd__node__t.html">upd_node_t</a> *<a class="code" href="structupd__node__t.html#aff0415d839cb409fa906765ee4e485f1">cascade_node</a>; <span class="comment">/* NULL or an update node template which</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">                       is used to implement ON DELETE/UPDATE CASCADE</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">                       or ... SET NULL for foreign keys */</span></div><div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a4fbc26242a3ba3b0d22b906830e35425">  698</a></span>&#160;  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structupd__node__t.html#a4fbc26242a3ba3b0d22b906830e35425">cascade_heap</a>;<span class="comment"></span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">  /*!&lt; NULL or a mem heap where cascade_upd_nodes</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">  are created.*/</span></div><div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a9bea8b7565087b46d8ab04460ce51b6c">  701</a></span>&#160;  <a class="code" href="structsel__node__t.html">sel_node_t</a> *<a class="code" href="structupd__node__t.html#a9bea8b7565087b46d8ab04460ce51b6c">select</a>;  <span class="comment">/*!&lt; query graph subtree implementing a base</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">                       table cursor: the rows returned will be</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">                       updated */</span></div><div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a9f852fb4055375f9f92dccba929479af">  704</a></span>&#160;  <a class="code" href="structbtr__pcur__t.html">btr_pcur_t</a> *<a class="code" href="structupd__node__t.html#a9f852fb4055375f9f92dccba929479af">pcur</a>;    <span class="comment">/*!&lt; persistent cursor placed on the clustered</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">                       index record which should be updated or</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">                       deleted; the cursor is stored in the graph</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">                       of &#39;select&#39; field above, except in the case</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">                       of the MySQL interface */</span></div><div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a9074fb5724a3669767fd62e67e9dc75e">  709</a></span>&#160;  <a class="code" href="structdict__table__t.html">dict_table_t</a> *<a class="code" href="structupd__node__t.html#a9074fb5724a3669767fd62e67e9dc75e">table</a>; <span class="comment">/*!&lt; table where updated */</span></div><div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a8fe689087f490726a9d78c407a4286dd">  710</a></span>&#160;  <a class="code" href="structupd__t.html">upd_t</a> *<a class="code" href="structupd__node__t.html#a8fe689087f490726a9d78c407a4286dd">update</a>;       <span class="comment">/*!&lt; update vector for the row */</span></div><div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a1f2c10905ef5e736f0fc8a044b2f8435">  711</a></span>&#160;  ulint <a class="code" href="structupd__node__t.html#a1f2c10905ef5e736f0fc8a044b2f8435">update_n_fields</a>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">/* when this struct is used to implement</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">  a cascade operation for foreign keys, we store</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">  here the size of the buffer allocated for use</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">  as the update vector */</span></div><div class="line"><a name="l00716"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a085ca76d5231c216dd80a506eccdc505">  716</a></span>&#160;  sym_node_list_t <a class="code" href="structupd__node__t.html#a085ca76d5231c216dd80a506eccdc505">columns</a>; <span class="comment">/* symbol table nodes for the columns</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">                           to retrieve from the table */</span></div><div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a92176a91fbe4393d4e28dee9799036e1">  718</a></span>&#160;  ibool <a class="code" href="structupd__node__t.html#a92176a91fbe4393d4e28dee9799036e1">has_clust_rec_x_lock</a>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">/* TRUE if the select which retrieves the</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">  records to update already sets an x-lock on</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">  the clustered record; note that it must always</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">  set at least an s-lock */</span></div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="structupd__node__t.html#af26c05573577c821189387f04e2e7c7c">  723</a></span>&#160;  ulint <a class="code" href="structupd__node__t.html#af26c05573577c821189387f04e2e7c7c">cmpl_info</a>; <span class="comment">/* information extracted during query</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">                 compilation; speeds up execution:</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">                 UPD_NODE_NO_ORD_CHANGE and</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">                 UPD_NODE_NO_SIZE_CHANGE, ORed */</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">/*----------------------*/</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">/* Local storage for this graph node */</span></div><div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a8b2de81fbecc97d559c2da4fdd700235">  729</a></span>&#160;  ulint <a class="code" href="structupd__node__t.html#a8b2de81fbecc97d559c2da4fdd700235">state</a>;         <span class="comment">/*!&lt; node execution state */</span></div><div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a429b1ede5aed84793ed794dc4607f0d8">  730</a></span>&#160;  <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="structupd__node__t.html#a429b1ede5aed84793ed794dc4607f0d8">index</a>; <span class="comment">/*!&lt; NULL, or the next index whose record should</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">                       be updated */</span></div><div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="structupd__node__t.html#aa8463440dc3aa82d1329393c6ac164d8">  732</a></span>&#160;  <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="structupd__node__t.html#aa8463440dc3aa82d1329393c6ac164d8">row</a>;       <span class="comment">/*!&lt; NULL, or a copy (also fields copied to</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">                       heap) of the row to update; this must be reset</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">                       to NULL after a successful update */</span></div><div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a4d80a4d76584469fe60600f4bc4ff0b5">  735</a></span>&#160;  <a class="code" href="structrow__ext__t.html">row_ext_t</a> *<a class="code" href="structupd__node__t.html#a4d80a4d76584469fe60600f4bc4ff0b5">ext</a>;      <span class="comment">/*!&lt; NULL, or prefixes of the externally</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">                       stored columns in the old row */</span></div><div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a190c6381970ceba052e530f7237b3625">  737</a></span>&#160;  <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="structupd__node__t.html#a190c6381970ceba052e530f7237b3625">upd_row</a>;   <span class="comment">/* NULL, or a copy of the updated row */</span></div><div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="structupd__node__t.html#aa176279271118bf4dda9da1b04f6a69e">  738</a></span>&#160;  <a class="code" href="structrow__ext__t.html">row_ext_t</a> *<a class="code" href="structupd__node__t.html#aa176279271118bf4dda9da1b04f6a69e">upd_ext</a>;  <span class="comment">/* NULL, or prefixes of the externally</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">                       stored columns in upd_row */</span></div><div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="structupd__node__t.html#af4d8c417bfc35a47c20c344ff128f1e0">  740</a></span>&#160;  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structupd__node__t.html#af4d8c417bfc35a47c20c344ff128f1e0">heap</a>;    <span class="comment">/*!&lt; memory heap used as auxiliary storage;</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">                       this must be emptied after a successful</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">                       update */</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">/*----------------------*/</span></div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a0d3dfd5bfdd6a8c879d8c6acc516fec1">  744</a></span>&#160;  <a class="code" href="structsym__node__t.html">sym_node_t</a> *<a class="code" href="structupd__node__t.html#a0d3dfd5bfdd6a8c879d8c6acc516fec1">table_sym</a>; <span class="comment">/* table node in symbol table */</span></div><div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a59f71aca8295b3fff7c2cb1197bf12bd">  745</a></span>&#160;  <a class="code" href="que0types_8h.html#a3509f9b5d79a0b309f8250593e46ed00">que_node_t</a> *<a class="code" href="structupd__node__t.html#a59f71aca8295b3fff7c2cb1197bf12bd">col_assign_list</a>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">/* column assignment list */</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">  /** When there is a lock wait error, this remembers current position of</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">  the multi-value field, before which the values have been deleted.</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">  This will be used for both DELETE and the delete phase of UPDATE. */</span></div><div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="structupd__node__t.html#a57620f51ed6e5346793ea9046b05398d">  751</a></span>&#160;  uint32_t <a class="code" href="structupd__node__t.html#a57620f51ed6e5346793ea9046b05398d">del_multi_val_pos</a>;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">  /** When there is a lock wait error, this remembers current position of</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">  the multi-value field, before which the values have been updated. */</span></div><div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="structupd__node__t.html#ae9c108f20d95e84709c3decf383bd9e2">  755</a></span>&#160;  uint32_t <a class="code" href="structupd__node__t.html#ae9c108f20d95e84709c3decf383bd9e2">upd_multi_val_pos</a>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="structupd__node__t.html#ad3d965bd90f0b846b7eec107e0f73eb2">  757</a></span>&#160;  ulint <a class="code" href="structupd__node__t.html#ad3d965bd90f0b846b7eec107e0f73eb2">magic_n</a>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;};</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a96c347f996e51f6fb49ef6c067ba04bf">  760</a></span>&#160;<span class="preprocessor">#define UPD_NODE_MAGIC_N 1579975</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">/* Node execution states */</span></div><div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a44102f8533c40d47458f13aac650ef38">  763</a></span>&#160;<span class="preprocessor">#define UPD_NODE_SET_IX_LOCK           \</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">  1 </span><span class="comment">/* execution came to the node from \</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">    a node above and if the field      \</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">    has_clust_rec_x_lock is FALSE, we  \</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">    should set an intention x-lock on  \</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">    the table */</span><span class="preprocessor"></span></div><div class="line"><a name="l00769"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a78ed1fcdf27db3b4ada62729f09fd233">  769</a></span>&#160;<span class="preprocessor">#define UPD_NODE_UPDATE_CLUSTERED       \</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="preprocessor">  2 </span><span class="comment">/* clustered index record should be \</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">    updated */</span><span class="preprocessor"></span></div><div class="line"><a name="l00772"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a0446f02f1cc4570e730ed640bf311493">  772</a></span>&#160;<span class="preprocessor">#define UPD_NODE_INSERT_CLUSTERED          \</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">  3 </span><span class="comment">/* clustered index record should be    \</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">    inserted, old record is already delete \</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">    marked */</span><span class="preprocessor"></span></div><div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="row0upd_8h.html#acc1678d94ec05825c81d2a4748f19c4a">  776</a></span>&#160;<span class="preprocessor">#define UPD_NODE_UPDATE_ALL_SEC           \</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="preprocessor">  5 </span><span class="comment">/* an ordering field of the clustered \</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">    index record was changed, or this is  \</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">    a delete operation: should update     \</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">    all the secondary index records */</span><span class="preprocessor"></span></div><div class="line"><a name="l00781"></a><span class="lineno"><a class="line" href="row0upd_8h.html#abe5381bd0d873234a70f103df73b1b02">  781</a></span>&#160;<span class="preprocessor">#define UPD_NODE_UPDATE_SOME_SEC         \</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">  6 </span><span class="comment">/* secondary index entries should be \</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">    looked at and updated if an ordering \</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">    field changed */</span><span class="preprocessor"></span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">/* Compilation info flags: these must fit within 2 bits; see trx0rec.h */</span></div><div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="row0upd_8h.html#a521a1927c7f930bb014e8697bcc579cf">  787</a></span>&#160;<span class="preprocessor">#define UPD_NODE_NO_ORD_CHANGE            \</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="preprocessor">  1 </span><span class="comment">/* no secondary index record will be  \</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">    changed in the update and no ordering \</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">    field of the clustered index */</span><span class="preprocessor"></span></div><div class="line"><a name="l00791"></a><span class="lineno"><a class="line" href="row0upd_8h.html#ac1f48e6b565f0a43dce9888b2d23d16e">  791</a></span>&#160;<span class="preprocessor">#define UPD_NODE_NO_SIZE_CHANGE        \</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="preprocessor">  2    </span><span class="comment">/* no record field size will be \</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">       changed in the update */</span><span class="preprocessor"></span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="preprocessor">#include &quot;row0upd.ic&quot;</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="row0upd_8h_html_a0b3e7dba0ba7d65289f702a3d3f8ec00"><div class="ttname"><a href="row0upd_8h.html#a0b3e7dba0ba7d65289f702a3d3f8ec00">row_upd_changes_some_index_ord_field_binary</a></div><div class="ttdeci">ibool row_upd_changes_some_index_ord_field_binary(const dict_table_t *table, const upd_t *update)</div><div class="ttdoc">Checks if an update vector changes an ordering field of an index record. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1679</div></div>
<div class="ttc" id="row0upd_8h_html_a8b88335c2bea8df94e814325e117c491"><div class="ttname"><a href="row0upd_8h.html#a8b88335c2bea8df94e814325e117c491">row_upd_store_row</a></div><div class="ttdeci">void row_upd_store_row(trx_t *trx, upd_node_t *node, THD *thd, TABLE *mysql_table)</div><div class="ttdoc">Stores to the heap the row on which the node-&gt;pcur is positioned. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1922</div></div>
<div class="ttc" id="structupd__field__t_html_a24991dc582c1bbfb02d64a568c5d3d5a"><div class="ttname"><a href="structupd__field__t.html#a24991dc582c1bbfb02d64a568c5d3d5a">upd_field_t::field_no</a></div><div class="ttdeci">unsigned field_no</div><div class="ttdoc">field number in an index, usually the clustered index, but in updating a secondary index record in bt...</div><div class="ttdef"><b>Definition:</b> row0upd.h:503</div></div>
<div class="ttc" id="structupd__t_html_ab27efa45f4490f680321e8dc9eb578ba"><div class="ttname"><a href="structupd__t.html#ab27efa45f4490f680321e8dc9eb578ba">upd_t::print</a></div><div class="ttdeci">std::ostream &amp; print(std::ostream &amp;out) const</div><div class="ttdef"><b>Definition:</b> row0upd.cc:3347</div></div>
<div class="ttc" id="structpage__zip__des__t_html"><div class="ttname"><a href="structpage__zip__des__t.html">page_zip_des_t</a></div><div class="ttdoc">Compressed page descriptor. </div><div class="ttdef"><b>Definition:</b> page0types.h:197</div></div>
<div class="ttc" id="structlob__index__diff__t_html"><div class="ttname"><a href="structlob__index__diff__t.html">lob_index_diff_t</a></div><div class="ttdoc">This structure is used for undo logging of LOB index changes. </div><div class="ttdef"><b>Definition:</b> row0upd.h:384</div></div>
<div class="ttc" id="api0api_8h_html_a3a920291a017c14a72331c818adf2265"><div class="ttname"><a href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a></div><div class="ttdeci">uint32 page_no_t</div><div class="ttdoc">Page number. </div><div class="ttdef"><b>Definition:</b> api0api.h:57</div></div>
<div class="ttc" id="structupd__node__t_html_a57620f51ed6e5346793ea9046b05398d"><div class="ttname"><a href="structupd__node__t.html#a57620f51ed6e5346793ea9046b05398d">upd_node_t::del_multi_val_pos</a></div><div class="ttdeci">uint32_t del_multi_val_pos</div><div class="ttdoc">When there is a lock wait error, this remembers current position of the multi-value field...</div><div class="ttdef"><b>Definition:</b> row0upd.h:751</div></div>
<div class="ttc" id="structupd__field__t_html_a7dbc8da83bf71dc7800de69c1e5bfcb7"><div class="ttname"><a href="structupd__field__t.html#a7dbc8da83bf71dc7800de69c1e5bfcb7">upd_field_t::print</a></div><div class="ttdeci">std::ostream &amp; print(std::ostream &amp;out) const</div><div class="ttdef"><b>Definition:</b> row0upd.cc:3331</div></div>
<div class="ttc" id="trx0types_8h_html_ad3ccac613ce33a8680d147c4a4f12e94"><div class="ttname"><a href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a></div><div class="ttdeci">ib_id_t roll_ptr_t</div><div class="ttdoc">Rollback pointer (DB_ROLL_PTR, DATA_ROLL_PTR) </div><div class="ttdef"><b>Definition:</b> trx0types.h:146</div></div>
<div class="ttc" id="row0upd_8h_html_a5cfdb6c921068d3859455412321acc28"><div class="ttname"><a href="row0upd_8h.html#a5cfdb6c921068d3859455412321acc28">row_upd_get_new_autoinc_counter</a></div><div class="ttdeci">ib_uint64_t row_upd_get_new_autoinc_counter(const upd_t *update, ulint autoinc_field_no)</div><div class="ttdoc">Get the new autoinc counter from the update vector when there is an autoinc field defined in this tab...</div><div class="ttdef"><b>Definition:</b> row0upd.cc:2705</div></div>
<div class="ttc" id="row0upd_8h_html_a49846971910ff699a3422b5fb5f41565"><div class="ttname"><a href="row0upd_8h.html#a49846971910ff699a3422b5fb5f41565">Lob_diff_vector</a></div><div class="ttdeci">std::vector&lt; Lob_diff, mem_heap_allocator&lt; Lob_diff &gt; &gt; Lob_diff_vector</div><div class="ttdef"><b>Definition:</b> row0upd.h:479</div></div>
<div class="ttc" id="structupd__t_html_ad0b8da45ec3469cc2a5fb8355c3083e9"><div class="ttname"><a href="structupd__t.html#ad0b8da45ec3469cc2a5fb8355c3083e9">upd_t::n_fields</a></div><div class="ttdeci">ulint n_fields</div><div class="ttdoc">number of update fields </div><div class="ttdef"><b>Definition:</b> row0upd.h:589</div></div>
<div class="ttc" id="structupd__field__t_html_a1c5e8c7e9d72a51f7649ab1d380df804"><div class="ttname"><a href="structupd__field__t.html#a1c5e8c7e9d72a51f7649ab1d380df804">upd_field_t::ext_in_old</a></div><div class="ttdeci">bool ext_in_old</div><div class="ttdoc">If true, the field was stored externally in the old row. </div><div class="ttdef"><b>Definition:</b> row0upd.h:523</div></div>
<div class="ttc" id="structupd__node__t_html_aa8463440dc3aa82d1329393c6ac164d8"><div class="ttname"><a href="structupd__node__t.html#aa8463440dc3aa82d1329393c6ac164d8">upd_node_t::row</a></div><div class="ttdeci">dtuple_t * row</div><div class="ttdoc">NULL, or a copy (also fields copied to heap) of the row to update; this must be reset to NULL after a...</div><div class="ttdef"><b>Definition:</b> row0upd.h:732</div></div>
<div class="ttc" id="structupd__node__t_html_a190c6381970ceba052e530f7237b3625"><div class="ttname"><a href="structupd__node__t.html#a190c6381970ceba052e530f7237b3625">upd_node_t::upd_row</a></div><div class="ttdeci">dtuple_t * upd_row</div><div class="ttdef"><b>Definition:</b> row0upd.h:737</div></div>
<div class="ttc" id="structupd__field__t_html_a35ac0507f5b58af88e7ff5b0d021d5fe"><div class="ttname"><a href="structupd__field__t.html#a35ac0507f5b58af88e7ff5b0d021d5fe">upd_field_t::lob_first_page_no</a></div><div class="ttdeci">page_no_t lob_first_page_no</div><div class="ttdoc">The LOB first page number. </div><div class="ttdef"><b>Definition:</b> row0upd.h:540</div></div>
<div class="ttc" id="structlob__index__diff__t_html_a2aa7714f87a21522de70f598e069ca05"><div class="ttname"><a href="structlob__index__diff__t.html#a2aa7714f87a21522de70f598e069ca05">lob_index_diff_t::m_modifier_undo_no</a></div><div class="ttdeci">undo_no_t m_modifier_undo_no</div><div class="ttdef"><b>Definition:</b> row0upd.h:386</div></div>
<div class="ttc" id="structupd__node__t_html_a429b1ede5aed84793ed794dc4607f0d8"><div class="ttname"><a href="structupd__node__t.html#a429b1ede5aed84793ed794dc4607f0d8">upd_node_t::index</a></div><div class="ttdeci">dict_index_t * index</div><div class="ttdoc">NULL, or the next index whose record should be updated. </div><div class="ttdef"><b>Definition:</b> row0upd.h:730</div></div>
<div class="ttc" id="structtrx__t_html"><div class="ttname"><a href="structtrx__t.html">trx_t</a></div><div class="ttdef"><b>Definition:</b> trx0trx.h:833</div></div>
<div class="ttc" id="structsym__node__t_html"><div class="ttname"><a href="structsym__node__t.html">sym_node_t</a></div><div class="ttdoc">Symbol table node. </div><div class="ttdef"><b>Definition:</b> pars0sym.h:112</div></div>
<div class="ttc" id="structLob__diff_html_ae3a996ded9ab124a0e9207bce8cfa665"><div class="ttname"><a href="structLob__diff.html#ae3a996ded9ab124a0e9207bce8cfa665">Lob_diff::read_offset</a></div><div class="ttdeci">const byte * read_offset(const byte *undo_ptr)</div><div class="ttdoc">Read the offset from the undo record. </div><div class="ttdef"><b>Definition:</b> row0upd.h:425</div></div>
<div class="ttc" id="row0upd_8h_html_afbdbead3f6bc4683c091c025761b28c7"><div class="ttname"><a href="row0upd_8h.html#afbdbead3f6bc4683c091c025761b28c7">row_upd_index_replace_new_col_vals_index_pos</a></div><div class="ttdeci">void row_upd_index_replace_new_col_vals_index_pos(dtuple_t *entry, const dict_index_t *index, const upd_t *update, ibool order_only, mem_heap_t *heap)</div><div class="ttdoc">Replaces the new column values stored in the update vector to the index entry given. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1127</div></div>
<div class="ttc" id="structupd__node__t_html_a4fbc26242a3ba3b0d22b906830e35425"><div class="ttname"><a href="structupd__node__t.html#a4fbc26242a3ba3b0d22b906830e35425">upd_node_t::cascade_heap</a></div><div class="ttdeci">mem_heap_t * cascade_heap</div><div class="ttdoc">NULL or a mem heap where cascade_upd_nodes are created. </div><div class="ttdef"><b>Definition:</b> row0upd.h:698</div></div>
<div class="ttc" id="structrow__ext__t_html"><div class="ttname"><a href="structrow__ext__t.html">row_ext_t</a></div><div class="ttdoc">Prefixes of externally stored columns. </div><div class="ttdef"><b>Definition:</b> row0ext.h:100</div></div>
<div class="ttc" id="structupd__field__t_html_aa9ff7926b9473b24ba52368b1537149e"><div class="ttname"><a href="structupd__field__t.html#aa9ff7926b9473b24ba52368b1537149e">upd_field_t::lob_diffs</a></div><div class="ttdeci">Lob_diff_vector * lob_diffs</div><div class="ttdoc">List of changes done to this updated field. </div><div class="ttdef"><b>Definition:</b> row0upd.h:536</div></div>
<div class="ttc" id="structupd__node__t_html_a8b2de81fbecc97d559c2da4fdd700235"><div class="ttname"><a href="structupd__node__t.html#a8b2de81fbecc97d559c2da4fdd700235">upd_node_t::state</a></div><div class="ttdeci">ulint state</div><div class="ttdoc">node execution state </div><div class="ttdef"><b>Definition:</b> row0upd.h:729</div></div>
<div class="ttc" id="structupd__node__t_html_ad3d965bd90f0b846b7eec107e0f73eb2"><div class="ttname"><a href="structupd__node__t.html#ad3d965bd90f0b846b7eec107e0f73eb2">upd_node_t::magic_n</a></div><div class="ttdeci">ulint magic_n</div><div class="ttdef"><b>Definition:</b> row0upd.h:757</div></div>
<div class="ttc" id="data0data_8h_html_aea1c85e508ac8ff58fcde24563747056"><div class="ttname"><a href="data0data_8h.html#aea1c85e508ac8ff58fcde24563747056">dfield_is_ext</a></div><div class="ttdeci">UNIV_INLINE ulint dfield_is_ext(const dfield_t *field)</div><div class="ttdoc">Determines if a field is externally stored. </div></div>
<div class="ttc" id="classField_html"><div class="ttname"><a href="classField.html">Field</a></div><div class="ttdef"><b>Definition:</b> field.h:723</div></div>
<div class="ttc" id="structlob_1_1ref__t_html_a43626f506fbdf8a3701266f6f4101c12"><div class="ttname"><a href="structlob_1_1ref__t.html#a43626f506fbdf8a3701266f6f4101c12">lob::ref_t::LOB_SMALL_CHANGE_THRESHOLD</a></div><div class="ttdeci">static const ulint LOB_SMALL_CHANGE_THRESHOLD</div><div class="ttdoc">If the total number of bytes modified in an LOB, in an update operation, is less than or equal to thi...</div><div class="ttdef"><b>Definition:</b> lob0lob.h:209</div></div>
<div class="ttc" id="structdict__table__t_html_a83d1ea6c70cef5d079029d5873a02329"><div class="ttname"><a href="structdict__table__t.html#a83d1ea6c70cef5d079029d5873a02329">dict_table_t::first_index</a></div><div class="ttdeci">const dict_index_t * first_index() const</div><div class="ttdef"><b>Definition:</b> dict0mem.h:2062</div></div>
<div class="ttc" id="row0upd_8h_html_a01b7c860ec8f58d4fa4d79ad85c95f1b"><div class="ttname"><a href="row0upd_8h.html#a01b7c860ec8f58d4fa4d79ad85c95f1b">row_upd_rec_sys_fields</a></div><div class="ttdeci">UNIV_INLINE void row_upd_rec_sys_fields(rec_t *rec, page_zip_des_t *page_zip, const dict_index_t *index, const ulint *offsets, const trx_t *trx, roll_ptr_t roll_ptr)</div><div class="ttdoc">Updates the trx id and roll ptr field in a clustered index record when a row is updated or marked del...</div></div>
<div class="ttc" id="structupd__t_html_acdd8561974680ba04bd142f24c9d56c5"><div class="ttname"><a href="structupd__t.html#acdd8561974680ba04bd142f24c9d56c5">upd_t::is_modified</a></div><div class="ttdeci">bool is_modified(const ulint field_no) const</div><div class="ttdoc">Determine if the given field_no is modified. </div><div class="ttdef"><b>Definition:</b> row0upd.h:598</div></div>
<div class="ttc" id="structupd__t_html_ab2bfa446cc2f342109a141bf73b2b712"><div class="ttname"><a href="structupd__t.html#ab2bfa446cc2f342109a141bf73b2b712">upd_t::table</a></div><div class="ttdeci">dict_table_t * table</div><div class="ttdoc">the table object </div><div class="ttdef"><b>Definition:</b> row0upd.h:586</div></div>
<div class="ttc" id="structdict__table__t_html"><div class="ttname"><a href="structdict__table__t.html">dict_table_t</a></div><div class="ttdoc">Data structure for a database table. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:1532</div></div>
<div class="ttc" id="structLob__diff_html"><div class="ttname"><a href="structLob__diff.html">Lob_diff</a></div><div class="ttdoc">The modification done to the LOB. </div><div class="ttdef"><b>Definition:</b> row0upd.h:411</div></div>
<div class="ttc" id="structdict__foreign__t_html"><div class="ttname"><a href="structdict__foreign__t.html">dict_foreign_t</a></div><div class="ttdoc">Data structure for a foreign key constraint; an example: FOREIGN KEY (A, B) REFERENCES TABLE2 (C...</div><div class="ttdef"><b>Definition:</b> dict0mem.h:1299</div></div>
<div class="ttc" id="structupd__node__t_html_a9074fb5724a3669767fd62e67e9dc75e"><div class="ttname"><a href="structupd__node__t.html#a9074fb5724a3669767fd62e67e9dc75e">upd_node_t::table</a></div><div class="ttdeci">dict_table_t * table</div><div class="ttdoc">table where updated </div><div class="ttdef"><b>Definition:</b> row0upd.h:709</div></div>
<div class="ttc" id="structupd__node__t_html_a4d80a4d76584469fe60600f4bc4ff0b5"><div class="ttname"><a href="structupd__node__t.html#a4d80a4d76584469fe60600f4bc4ff0b5">upd_node_t::ext</a></div><div class="ttdeci">row_ext_t * ext</div><div class="ttdoc">NULL, or prefixes of the externally stored columns in the old row. </div><div class="ttdef"><b>Definition:</b> row0upd.h:735</div></div>
<div class="ttc" id="row0upd_8h_html_add4c4ef5c26a83086f51130897c89dd9"><div class="ttname"><a href="row0upd_8h.html#add4c4ef5c26a83086f51130897c89dd9">row_upd_rec_in_place</a></div><div class="ttdeci">void row_upd_rec_in_place(rec_t *rec, const dict_index_t *index, const ulint *offsets, const upd_t *update, page_zip_des_t *page_zip)</div><div class="ttdoc">Replaces the new column values stored in the update vector to the record given. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:474</div></div>
<div class="ttc" id="structupd__field__t_html_a88c60d615d41d9947c656829e5a49fa3"><div class="ttname"><a href="structupd__field__t.html#a88c60d615d41d9947c656829e5a49fa3">upd_field_t::mysql_field</a></div><div class="ttdeci">Field * mysql_field</div><div class="ttdoc">the mysql field object. </div><div class="ttdef"><b>Definition:</b> row0upd.h:520</div></div>
<div class="ttc" id="structupd__node__t_html_ae9c108f20d95e84709c3decf383bd9e2"><div class="ttname"><a href="structupd__node__t.html#ae9c108f20d95e84709c3decf383bd9e2">upd_node_t::upd_multi_val_pos</a></div><div class="ttdeci">uint32_t upd_multi_val_pos</div><div class="ttdoc">When there is a lock wait error, this remembers current position of the multi-value field...</div><div class="ttdef"><b>Definition:</b> row0upd.h:755</div></div>
<div class="ttc" id="structmem__block__info__t_html"><div class="ttname"><a href="structmem__block__info__t.html">mem_block_info_t</a></div><div class="ttdoc">The info structure stored at the beginning of a heap block. </div><div class="ttdef"><b>Definition:</b> mem0mem.h:349</div></div>
<div class="ttc" id="structupd__t_html_a0b291312f5c5faeacbc6055e780d9160"><div class="ttname"><a href="structupd__t.html#a0b291312f5c5faeacbc6055e780d9160">upd_t::get_total_modified_bytes</a></div><div class="ttdeci">static size_t get_total_modified_bytes(const Binary_diff_vector &amp;bdv)</div><div class="ttdoc">Calculate the total number of bytes modified in one BLOB. </div><div class="ttdef"><b>Definition:</b> row0upd.h:639</div></div>
<div class="ttc" id="structlob__index__diff__t_html_a4b49d58081386ad65e45ed28f4dcc9d8"><div class="ttname"><a href="structlob__index__diff__t.html#a4b49d58081386ad65e45ed28f4dcc9d8">lob_index_diff_t::m_modifier_trxid</a></div><div class="ttdeci">trx_id_t m_modifier_trxid</div><div class="ttdef"><b>Definition:</b> row0upd.h:385</div></div>
<div class="ttc" id="structbtr__pcur__t_html"><div class="ttname"><a href="structbtr__pcur__t.html">btr_pcur_t</a></div><div class="ttdef"><b>Definition:</b> btr0pcur.h:178</div></div>
<div class="ttc" id="data0data_8h_html"><div class="ttname"><a href="data0data_8h.html">data0data.h</a></div><div class="ttdoc">SQL data field and tuple. </div></div>
<div class="ttc" id="structTABLE_html"><div class="ttname"><a href="structTABLE.html">TABLE</a></div><div class="ttdef"><b>Definition:</b> table.h:1363</div></div>
<div class="ttc" id="structLob__diff_html_a61157b45c5c3ba4c6a8ffcafe8e142f8"><div class="ttname"><a href="structLob__diff.html#a61157b45c5c3ba4c6a8ffcafe8e142f8">Lob_diff::read_length</a></div><div class="ttdeci">const byte * read_length(const byte *undo_ptr)</div><div class="ttdoc">Read the length from the undo record. </div><div class="ttdef"><b>Definition:</b> row0upd.h:434</div></div>
<div class="ttc" id="structupd__field__t_html_a1483dab030584cbfa06cceaafda3ee60"><div class="ttname"><a href="structupd__field__t.html#a1483dab030584cbfa06cceaafda3ee60">upd_field_t::new_val</a></div><div class="ttdeci">dfield_t new_val</div><div class="ttdoc">new value for the column </div><div class="ttdef"><b>Definition:</b> row0upd.h:517</div></div>
<div class="ttc" id="structupd__node__t_html_a9bea8b7565087b46d8ab04460ce51b6c"><div class="ttname"><a href="structupd__node__t.html#a9bea8b7565087b46d8ab04460ce51b6c">upd_node_t::select</a></div><div class="ttdeci">sel_node_t * select</div><div class="ttdoc">query graph subtree implementing a base table cursor: the rows returned will be updated ...</div><div class="ttdef"><b>Definition:</b> row0upd.h:701</div></div>
<div class="ttc" id="pars0types_8h_html"><div class="ttname"><a href="pars0types_8h.html">pars0types.h</a></div><div class="ttdoc">SQL parser global types. </div></div>
<div class="ttc" id="que0types_8h_html"><div class="ttname"><a href="que0types_8h.html">que0types.h</a></div><div class="ttdoc">Query graph global types. </div></div>
<div class="ttc" id="structupd__field__t_html"><div class="ttname"><a href="structupd__field__t.html">upd_field_t</a></div><div class="ttdef"><b>Definition:</b> row0upd.h:486</div></div>
<div class="ttc" id="structupd__t_html_ad3579e430df55059ab39bb177226cceb"><div class="ttname"><a href="structupd__t.html#ad3579e430df55059ab39bb177226cceb">upd_t::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset the update fields. </div><div class="ttdef"><b>Definition:</b> row0upd.h:608</div></div>
<div class="ttc" id="structupd__node__t_html_ab9683ed65b6da140d40da6536234c335"><div class="ttname"><a href="structupd__node__t.html#ab9683ed65b6da140d40da6536234c335">upd_node_t::common</a></div><div class="ttdeci">que_common_t common</div><div class="ttdoc">node type: QUE_NODE_UPDATE </div><div class="ttdef"><b>Definition:</b> row0upd.h:684</div></div>
<div class="ttc" id="structupd__node__t_html_a2f2ace2f2cab930745b4a2751e345d5e"><div class="ttname"><a href="structupd__node__t.html#a2f2ace2f2cab930745b4a2751e345d5e">upd_node_t::foreign</a></div><div class="ttdeci">dict_foreign_t * foreign</div><div class="ttdef"><b>Definition:</b> row0upd.h:692</div></div>
<div class="ttc" id="structLob__diff_html_a1a7d4f16d4dc2fbf57cd7b6a38bc0dab"><div class="ttname"><a href="structLob__diff.html#a1a7d4f16d4dc2fbf57cd7b6a38bc0dab">Lob_diff::print</a></div><div class="ttdeci">std::ostream &amp; print(std::ostream &amp;out) const</div><div class="ttdef"><b>Definition:</b> row0upd.h:444</div></div>
<div class="ttc" id="structupd__t_html_a68b22ce8ab3d4c43cd46ce7b111986f5"><div class="ttname"><a href="structupd__t.html#a68b22ce8ab3d4c43cd46ce7b111986f5">upd_t::info_bits</a></div><div class="ttdeci">ulint info_bits</div><div class="ttdoc">new value of info bits to record; default is 0 </div><div class="ttdef"><b>Definition:</b> row0upd.h:582</div></div>
<div class="ttc" id="structupd__node__t_html_af4d8c417bfc35a47c20c344ff128f1e0"><div class="ttname"><a href="structupd__node__t.html#af4d8c417bfc35a47c20c344ff128f1e0">upd_node_t::heap</a></div><div class="ttdeci">mem_heap_t * heap</div><div class="ttdoc">memory heap used as auxiliary storage; this must be emptied after a successful update ...</div><div class="ttdef"><b>Definition:</b> row0upd.h:740</div></div>
<div class="ttc" id="structupd__node__t_html_a59f71aca8295b3fff7c2cb1197bf12bd"><div class="ttname"><a href="structupd__node__t.html#a59f71aca8295b3fff7c2cb1197bf12bd">upd_node_t::col_assign_list</a></div><div class="ttdeci">que_node_t * col_assign_list</div><div class="ttdef"><b>Definition:</b> row0upd.h:745</div></div>
<div class="ttc" id="btr0types_8h_html"><div class="ttname"><a href="btr0types_8h.html">btr0types.h</a></div><div class="ttdoc">The index tree general types. </div></div>
<div class="ttc" id="row0upd_8h_html_ae304da2bc13e35c67c164467960b27ac"><div class="ttname"><a href="row0upd_8h.html#ae304da2bc13e35c67c164467960b27ac">row_upd_parse_sys_vals</a></div><div class="ttdeci">byte * row_upd_parse_sys_vals(const byte *ptr, const byte *end_ptr, ulint *pos, trx_id_t *trx_id, roll_ptr_t *roll_ptr)</div><div class="ttdoc">Parses the log data of system field values. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:558</div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="mach0data_8h_html_a0ea7e40767d86097b5e2ff1c45fec05c"><div class="ttname"><a href="mach0data_8h.html#a0ea7e40767d86097b5e2ff1c45fec05c">mach_read_next_compressed</a></div><div class="ttdeci">UNIV_INLINE ib_uint32_t mach_read_next_compressed(const byte **b)</div><div class="ttdoc">Read a 32-bit integer in a compressed form. </div></div>
<div class="ttc" id="dict0types_8h_html"><div class="ttname"><a href="dict0types_8h.html">dict0types.h</a></div><div class="ttdoc">Data dictionary global types. </div></div>
<div class="ttc" id="do__ctype_8cc_html_ab5ad9aa3d3e725ca44ebfa85e0b1020d"><div class="ttname"><a href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a></div><div class="ttdeci">char * pos</div><div class="ttdef"><b>Definition:</b> do_ctype.cc:76</div></div>
<div class="ttc" id="namespaceCounter_html_a7ba056d7d4c2cd809eca09fc5fe2e075"><div class="ttname"><a href="namespaceCounter.html#a7ba056d7d4c2cd809eca09fc5fe2e075">Counter::total</a></div><div class="ttdeci">Type total(const Shards&lt; COUNT &gt; &amp;shards) noexcept</div><div class="ttdoc">Get the total value of all shards. </div><div class="ttdef"><b>Definition:</b> ut0counter.h:332</div></div>
<div class="ttc" id="row0upd_8h_html_a902192e6824406c3796068d2173b2aff"><div class="ttname"><a href="row0upd_8h.html#a902192e6824406c3796068d2173b2aff">row_upd_changes_disowned_external</a></div><div class="ttdeci">bool row_upd_changes_disowned_external(const upd_t *update)</div><div class="ttdoc">Returns true if row update contains disowned external fields. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:438</div></div>
<div class="ttc" id="structLob__diff_html_ab62e22753c0ad6bfb4265ea3155387d7"><div class="ttname"><a href="structLob__diff.html#ab62e22753c0ad6bfb4265ea3155387d7">Lob_diff::set_old_data</a></div><div class="ttdeci">void set_old_data(const byte *undo_ptr)</div><div class="ttdef"><b>Definition:</b> row0upd.h:442</div></div>
<div class="ttc" id="structupd__node__t_html_ab7792b474eb8a1c69c844cacbe748778"><div class="ttname"><a href="structupd__node__t.html#ab7792b474eb8a1c69c844cacbe748778">upd_node_t::searched_update</a></div><div class="ttdeci">ibool searched_update</div><div class="ttdef"><b>Definition:</b> row0upd.h:686</div></div>
<div class="ttc" id="structupd__t_html_a5300a73a3b93bcc8b72ee38d2e53b68d"><div class="ttname"><a href="structupd__t.html#a5300a73a3b93bcc8b72ee38d2e53b68d">upd_t::old_vrow</a></div><div class="ttdeci">dtuple_t * old_vrow</div><div class="ttdoc">pointer to old row, used for virtual column update now </div><div class="ttdef"><b>Definition:</b> row0upd.h:584</div></div>
<div class="ttc" id="row0upd_8h_html_a8bf0960639c762f39cce1d29241e8b1e"><div class="ttname"><a href="row0upd_8h.html#a8bf0960639c762f39cce1d29241e8b1e">row_upd_index_parse</a></div><div class="ttdeci">byte * row_upd_index_parse(const byte *ptr, const byte *end_ptr, mem_heap_t *heap, upd_t **update_out)</div><div class="ttdoc">Parses the log data written by row_upd_index_write_log. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:670</div></div>
<div class="ttc" id="rem0types_8h_html_a92caeffe2dc2fbe825a54aef9a163435"><div class="ttname"><a href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a></div><div class="ttdeci">byte rec_t</div><div class="ttdef"><b>Definition:</b> rem0types.h:39</div></div>
<div class="ttc" id="structdtuple__t_html"><div class="ttname"><a href="structdtuple__t.html">dtuple_t</a></div><div class="ttdoc">Structure for an SQL data tuple of fields (logical record) </div><div class="ttdef"><b>Definition:</b> data0data.h:711</div></div>
<div class="ttc" id="structupd__node__t_html_a8fe689087f490726a9d78c407a4286dd"><div class="ttname"><a href="structupd__node__t.html#a8fe689087f490726a9d78c407a4286dd">upd_node_t::update</a></div><div class="ttdeci">upd_t * update</div><div class="ttdoc">update vector for the row </div><div class="ttdef"><b>Definition:</b> row0upd.h:710</div></div>
<div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:38</div></div>
<div class="ttc" id="structLob__diff_html_a4f1e0b45d15464533cac846e8cd78064"><div class="ttname"><a href="structLob__diff.html#a4f1e0b45d15464533cac846e8cd78064">Lob_diff::Lob_diff</a></div><div class="ttdeci">Lob_diff(mem_heap_t *mem_heap)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> row0upd.h:415</div></div>
<div class="ttc" id="row0types_8h_html"><div class="ttname"><a href="row0types_8h.html">row0types.h</a></div><div class="ttdoc">Row operation global types. </div></div>
<div class="ttc" id="structupd__field__t_html_a2e163317a4778d6acddcb07a46f0ad41"><div class="ttname"><a href="structupd__field__t.html#a2e163317a4778d6acddcb07a46f0ad41">upd_field_t::last_trx_id</a></div><div class="ttdeci">trx_id_t last_trx_id</div><div class="ttdoc">The last trx that modified the LOB. </div><div class="ttdef"><b>Definition:</b> row0upd.h:545</div></div>
<div class="ttc" id="row0upd_8h_html_a9a9a7b3c3d7c1127f608f91ae11b41ef"><div class="ttname"><a href="row0upd_8h.html#a9a9a7b3c3d7c1127f608f91ae11b41ef">row_upd_index_replace_new_col_vals</a></div><div class="ttdeci">void row_upd_index_replace_new_col_vals(dtuple_t *entry, const dict_index_t *index, const upd_t *update, mem_heap_t *heap)</div><div class="ttdoc">Replaces the new column values stored in the update vector to the index entry given. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1185</div></div>
<div class="ttc" id="structque__thr__t_html"><div class="ttname"><a href="structque__thr__t.html">que_thr_t</a></div><div class="ttdef"><b>Definition:</b> que0que.h:251</div></div>
<div class="ttc" id="row0upd_8h_html_a33265d5ab656dba287eb974c407bcf18"><div class="ttname"><a href="row0upd_8h.html#a33265d5ab656dba287eb974c407bcf18">row_upd_step</a></div><div class="ttdeci">que_thr_t * row_upd_step(que_thr_t *thr)</div><div class="ttdoc">Updates a row in a table. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:3230</div></div>
<div class="ttc" id="structupd__node__t_html_a1f2c10905ef5e736f0fc8a044b2f8435"><div class="ttname"><a href="structupd__node__t.html#a1f2c10905ef5e736f0fc8a044b2f8435">upd_node_t::update_n_fields</a></div><div class="ttdeci">ulint update_n_fields</div><div class="ttdef"><b>Definition:</b> row0upd.h:711</div></div>
<div class="ttc" id="row0upd_8h_html_ad6626ce48273c089093d1a95b5a32b20"><div class="ttname"><a href="row0upd_8h.html#ad6626ce48273c089093d1a95b5a32b20">upd_field_set_field_no</a></div><div class="ttdeci">UNIV_INLINE void upd_field_set_field_no(upd_field_t *upd_field, ulint field_no, const dict_index_t *index, trx_t *trx)</div><div class="ttdoc">Sets an index field number to be updated by an update vector field. </div></div>
<div class="ttc" id="structupd__node__t_html_a84842d3940c05aa0a88cf03cd1adead6"><div class="ttname"><a href="structupd__node__t.html#a84842d3940c05aa0a88cf03cd1adead6">upd_node_t::is_delete</a></div><div class="ttdeci">ibool is_delete</div><div class="ttdef"><b>Definition:</b> row0upd.h:685</div></div>
<div class="ttc" id="structdfield__t_html"><div class="ttname"><a href="structdfield__t.html">dfield_t</a></div><div class="ttdoc">Structure for an SQL data field. </div><div class="ttdef"><b>Definition:</b> data0data.h:639</div></div>
<div class="ttc" id="structupd__field__t_html_a16ce5e066e256775adc87b257fbb885f"><div class="ttname"><a href="structupd__field__t.html#a16ce5e066e256775adc87b257fbb885f">upd_field_t::last_undo_no</a></div><div class="ttdeci">undo_no_t last_undo_no</div><div class="ttdoc">The last stmt within trx that modified the LOB. </div><div class="ttdef"><b>Definition:</b> row0upd.h:548</div></div>
<div class="ttc" id="classBinary__diff_html"><div class="ttname"><a href="classBinary__diff.html">Binary_diff</a></div><div class="ttdoc">Class that represents a single change to a column value in partial update of a JSON column...</div><div class="ttdef"><b>Definition:</b> table.h:1280</div></div>
<div class="ttc" id="row0upd_8h_html_aedafd388956767bd826a954029de13f4"><div class="ttname"><a href="row0upd_8h.html#aedafd388956767bd826a954029de13f4">row_upd_changes_doc_id</a></div><div class="ttdeci">bool row_upd_changes_doc_id(dict_table_t *table, upd_field_t *upd_field)</div><div class="ttdoc">Checks if an FTS Doc ID column is affected by an UPDATE. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1709</div></div>
<div class="ttc" id="btr0pcur_8h_html"><div class="ttname"><a href="btr0pcur_8h.html">btr0pcur.h</a></div><div class="ttdoc">The index tree persistent cursor. </div></div>
<div class="ttc" id="data0data_8h_html_ad22cc2cae2eee0a747a42a1a874f49d6"><div class="ttname"><a href="data0data_8h.html#ad22cc2cae2eee0a747a42a1a874f49d6">dfield_get_len</a></div><div class="ttdeci">UNIV_INLINE uint32_t dfield_get_len(const dfield_t *field)</div><div class="ttdoc">Gets length of field data. </div></div>
<div class="ttc" id="mem0mem_8h_html_a92f7ee9ca3354fdd5bc633f5ae7b9421"><div class="ttname"><a href="mem0mem_8h.html#a92f7ee9ca3354fdd5bc633f5ae7b9421">mem_heap_alloc</a></div><div class="ttdeci">UNIV_INLINE void * mem_heap_alloc(mem_heap_t *heap, ulint n)</div><div class="ttdoc">Allocates n bytes of memory from a memory heap. </div></div>
<div class="ttc" id="namespacebinary__log_1_1transaction_1_1compression_html_a22a3b5d8096f4c73ced74c0b668df0be"><div class="ttname"><a href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">binary_log::transaction::compression::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> base.h:36</div></div>
<div class="ttc" id="myisamlog_8cc_html_a63c3b620cc1cd0b4a2850c8d9804fde2"><div class="ttname"><a href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a></div><div class="ttdeci">static uint update</div><div class="ttdef"><b>Definition:</b> myisamlog.cc:90</div></div>
<div class="ttc" id="structupd__node__t_html_a13b793a6b14a71b8a9e57db38aadfb0b"><div class="ttname"><a href="structupd__node__t.html#a13b793a6b14a71b8a9e57db38aadfb0b">upd_node_t::in_mysql_interface</a></div><div class="ttdeci">ibool in_mysql_interface</div><div class="ttdef"><b>Definition:</b> row0upd.h:689</div></div>
<div class="ttc" id="trx0types_8h_html"><div class="ttname"><a href="trx0types_8h.html">trx0types.h</a></div><div class="ttdoc">Transaction system global type definitions. </div></div>
<div class="ttc" id="structupd__t_html_a5757d346df24c9f2135f5de54cf5f305"><div class="ttname"><a href="structupd__t.html#a5757d346df24c9f2135f5de54cf5f305">upd_t::fields</a></div><div class="ttdeci">upd_field_t * fields</div><div class="ttdoc">array of update fields </div><div class="ttdef"><b>Definition:</b> row0upd.h:590</div></div>
<div class="ttc" id="row0upd_8h_html_a838bfedaa4543cf09a38da782a458217"><div class="ttname"><a href="row0upd_8h.html#a838bfedaa4543cf09a38da782a458217">row_upd_build_difference_binary</a></div><div class="ttdeci">upd_t * row_upd_build_difference_binary(dict_index_t *index, const dtuple_t *entry, const rec_t *rec, const ulint *offsets, bool no_sys, trx_t *trx, mem_heap_t *heap, TABLE *mysql_table, dberr_t *error)</div><div class="ttdoc">Builds an update vector from those fields, excluding the roll ptr and trx id fields, which in an index entry differ from a record that has the equal ordering fields. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:822</div></div>
<div class="ttc" id="structupd__t_html_ac97ddc59e53fb9178ef06621185afc99"><div class="ttname"><a href="structupd__t.html#ac97ddc59e53fb9178ef06621185afc99">upd_t::mysql_table</a></div><div class="ttdeci">TABLE * mysql_table</div><div class="ttdoc">the mysql table object </div><div class="ttdef"><b>Definition:</b> row0upd.h:587</div></div>
<div class="ttc" id="classMem__root__array_html"><div class="ttname"><a href="classMem__root__array.html">Mem_root_array</a></div><div class="ttdoc">A typesafe replacement for DYNAMIC_ARRAY. </div><div class="ttdef"><b>Definition:</b> mem_root_array.h:416</div></div>
<div class="ttc" id="structupd__field__t_html_ad139887b4f8c9f87d5702ec22d5cf15c"><div class="ttname"><a href="structupd__field__t.html#ad139887b4f8c9f87d5702ec22d5cf15c">upd_field_t::is_virtual</a></div><div class="ttdeci">bool is_virtual() const</div><div class="ttdef"><b>Definition:</b> row0upd.h:501</div></div>
<div class="ttc" id="structupd__field__t_html_a6498094981440d82e6688edb90f1c051"><div class="ttname"><a href="structupd__field__t.html#a6498094981440d82e6688edb90f1c051">upd_field_t::upd_field_t</a></div><div class="ttdeci">upd_field_t()</div><div class="ttdef"><b>Definition:</b> row0upd.h:487</div></div>
<div class="ttc" id="structupd__node__t_html_a0d3dfd5bfdd6a8c879d8c6acc516fec1"><div class="ttname"><a href="structupd__node__t.html#a0d3dfd5bfdd6a8c879d8c6acc516fec1">upd_node_t::table_sym</a></div><div class="ttdeci">sym_node_t * table_sym</div><div class="ttdef"><b>Definition:</b> row0upd.h:744</div></div>
<div class="ttc" id="row0upd_8h_html_ab34c7757393893c9ac19cd3dfaf1befe"><div class="ttname"><a href="row0upd_8h.html#ab34c7757393893c9ac19cd3dfaf1befe">row_upd_changes_fts_column</a></div><div class="ttdeci">ulint row_upd_changes_fts_column(dict_table_t *table, upd_field_t *upd_field)</div><div class="ttdoc">Checks if an FTS indexed column is affected by an UPDATE. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1729</div></div>
<div class="ttc" id="que0types_8h_html_a3509f9b5d79a0b309f8250593e46ed00"><div class="ttname"><a href="que0types_8h.html#a3509f9b5d79a0b309f8250593e46ed00">que_node_t</a></div><div class="ttdeci">void que_node_t</div><div class="ttdef"><b>Definition:</b> que0types.h:40</div></div>
<div class="ttc" id="structupd__t_html_a1e0c47f0a3f73259c4e3617a095fd5b2"><div class="ttname"><a href="structupd__t.html#a1e0c47f0a3f73259c4e3617a095fd5b2">upd_t::heap</a></div><div class="ttdeci">mem_heap_t * heap</div><div class="ttdoc">heap from which memory allocated </div><div class="ttdef"><b>Definition:</b> row0upd.h:581</div></div>
<div class="ttc" id="structque__common__t_html"><div class="ttname"><a href="structque__common__t.html">que_common_t</a></div><div class="ttdef"><b>Definition:</b> que0types.h:50</div></div>
<div class="ttc" id="row0upd_8h_html_a5c8da72b47b7afc4a67c12584cce14db"><div class="ttname"><a href="row0upd_8h.html#a5c8da72b47b7afc4a67c12584cce14db">row_upd_changes_field_size_or_external</a></div><div class="ttdeci">ibool row_upd_changes_field_size_or_external(const dict_index_t *index, const ulint *offsets, const upd_t *update)</div><div class="ttdoc">Returns TRUE if row update changes size of some field in index or if some field to be updated is stor...</div><div class="ttdef"><b>Definition:</b> row0upd.cc:360</div></div>
<div class="ttc" id="row0upd_8h_html_a6ef1a621ff94f9f0dcd3e996c8c01eba"><div class="ttname"><a href="row0upd_8h.html#a6ef1a621ff94f9f0dcd3e996c8c01eba">upd_get_field_by_field_no</a></div><div class="ttdeci">UNIV_INLINE const upd_field_t * upd_get_field_by_field_no(const upd_t *update, ulint no, bool is_virtual)</div><div class="ttdoc">Returns a field of an update vector by field_no. </div></div>
<div class="ttc" id="row0upd_8h_html_af70a462bcc93bd912d846fb253463bf0"><div class="ttname"><a href="row0upd_8h.html#af70a462bcc93bd912d846fb253463bf0">row_upd_changes_ord_field_binary_func</a></div><div class="ttdeci">bool row_upd_changes_ord_field_binary_func(dict_index_t *index, const upd_t *update, const que_thr_t *thr, const dtuple_t *row, const row_ext_t *ext, bool *non_mv_upd, ulint flag)</div><div class="ttdoc">Checks if an update vector changes an ordering field of an index record. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1450</div></div>
<div class="ttc" id="row0upd_8h_html_a3b7fba00a40039307f4605056af9c54b"><div class="ttname"><a href="row0upd_8h.html#a3b7fba00a40039307f4605056af9c54b">row_upd_index_write_log</a></div><div class="ttdeci">void row_upd_index_write_log(dict_index_t *index, const upd_t *update, byte *log_ptr, mtr_t *mtr)</div><div class="ttdoc">Writes to the redo log the new values of the fields occurring in the index. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:583</div></div>
<div class="ttc" id="row0upd_8h_html_af3f6386e3414d3baee23fd9ba70cb8a1"><div class="ttname"><a href="row0upd_8h.html#af3f6386e3414d3baee23fd9ba70cb8a1">upd_field_set_v_field_no</a></div><div class="ttdeci">UNIV_INLINE void upd_field_set_v_field_no(upd_field_t *upd_field, ulint field_no, const dict_index_t *index)</div><div class="ttdoc">set field number to a update vector field, marks this field is updated </div></div>
<div class="ttc" id="structsel__node__t_html"><div class="ttname"><a href="structsel__node__t.html">sel_node_t</a></div><div class="ttdoc">Select statement node. </div><div class="ttdef"><b>Definition:</b> row0sel.h:341</div></div>
<div class="ttc" id="lob0lob_8h_html"><div class="ttname"><a href="lob0lob_8h.html">lob0lob.h</a></div><div class="ttdoc">Implements the large objects (LOB) module. </div></div>
<div class="ttc" id="ut0dbg_8h_html_a17113dab7f37e298e889ac8818ab13d0"><div class="ttname"><a href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a></div><div class="ttdeci">#define ut_ad(EXPR)</div><div class="ttdoc">Debug assertion. </div><div class="ttdef"><b>Definition:</b> ut0dbg.h:66</div></div>
<div class="ttc" id="classmem__heap__allocator_html"><div class="ttname"><a href="classmem__heap__allocator.html">mem_heap_allocator</a></div><div class="ttdoc">A C++ wrapper class to the mem_heap_t routines, so that it can be used as an STL allocator. </div><div class="ttdef"><b>Definition:</b> mem0mem.h:398</div></div>
<div class="ttc" id="structLob__diff_html_a7940fbcde65b46d944e8e7f2c39f3dd0"><div class="ttname"><a href="structLob__diff.html#a7940fbcde65b46d944e8e7f2c39f3dd0">Lob_diff::m_idx_diffs</a></div><div class="ttdeci">Lob_index_diff_vec * m_idx_diffs</div><div class="ttdoc">Changes to the LOB index. </div><div class="ttdef"><b>Definition:</b> row0upd.h:473</div></div>
<div class="ttc" id="structlob__index__diff__t_html_aa3a356e776c3b6a6be7f1338d1693800"><div class="ttname"><a href="structlob__index__diff__t.html#aa3a356e776c3b6a6be7f1338d1693800">lob_index_diff_t::print</a></div><div class="ttdeci">std::ostream &amp; print(std::ostream &amp;out) const</div><div class="ttdoc">Print the current object into the given output stream. </div><div class="ttdef"><b>Definition:</b> row0upd.h:391</div></div>
<div class="ttc" id="trx0types_8h_html_a91afca43a639c098efe14a9069a1d4ec"><div class="ttname"><a href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a></div><div class="ttdeci">ib_id_t trx_id_t</div><div class="ttdoc">Transaction identifier (DB_TRX_ID, DATA_TRX_ID) </div><div class="ttdef"><b>Definition:</b> trx0types.h:144</div></div>
<div class="ttc" id="hp__test1_8cc_html_adf916204820072417ed73a32de1cefcf"><div class="ttname"><a href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a></div><div class="ttdeci">static int flag</div><div class="ttdef"><b>Definition:</b> hp_test1.cc:39</div></div>
<div class="ttc" id="structupd__node__t_html_a9f852fb4055375f9f92dccba929479af"><div class="ttname"><a href="structupd__node__t.html#a9f852fb4055375f9f92dccba929479af">upd_node_t::pcur</a></div><div class="ttdeci">btr_pcur_t * pcur</div><div class="ttdoc">persistent cursor placed on the clustered index record which should be updated or deleted; the cursor...</div><div class="ttdef"><b>Definition:</b> row0upd.h:704</div></div>
<div class="ttc" id="structupd__field__t_html_aa17a9f1b72f77069d9eae5f5f6241fb0"><div class="ttname"><a href="structupd__field__t.html#aa17a9f1b72f77069d9eae5f5f6241fb0">upd_field_t::heap</a></div><div class="ttdeci">mem_heap_t * heap</div><div class="ttdoc">Memory heap in which this object is allocated. </div><div class="ttdef"><b>Definition:</b> row0upd.h:560</div></div>
<div class="ttc" id="btr0types_8h_html_a0ce016535d5de52a1e27362330676df0"><div class="ttname"><a href="btr0types_8h.html#a0ce016535d5de52a1e27362330676df0">BTR_EXTERN_FIELD_REF_SIZE</a></div><div class="ttdeci">#define BTR_EXTERN_FIELD_REF_SIZE</div><div class="ttdoc">The size of a reference to data stored on a different page. </div><div class="ttdef"><b>Definition:</b> btr0types.h:60</div></div>
<div class="ttc" id="structPrintBuffer_html"><div class="ttname"><a href="structPrintBuffer.html">PrintBuffer</a></div><div class="ttdef"><b>Definition:</b> ut.h:71</div></div>
<div class="ttc" id="structupd__node__t_html"><div class="ttname"><a href="structupd__node__t.html">upd_node_t</a></div><div class="ttdef"><b>Definition:</b> row0upd.h:683</div></div>
<div class="ttc" id="row0upd_8h_html_abfb05f212ddac2808ee035ef4d22f917"><div class="ttname"><a href="row0upd_8h.html#abfb05f212ddac2808ee035ef4d22f917">row_upd_rec_sys_fields_in_recovery</a></div><div class="ttdeci">void row_upd_rec_sys_fields_in_recovery(rec_t *rec, page_zip_des_t *page_zip, const ulint *offsets, ulint pos, trx_id_t trx_id, roll_ptr_t roll_ptr)</div><div class="ttdoc">Updates the trx id and roll ptr field in a clustered index record in database recovery. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:308</div></div>
<div class="ttc" id="structupd__t_html_a3e7adc3e55b7a2834c6ad7487c0f7ec1"><div class="ttname"><a href="structupd__t.html#a3e7adc3e55b7a2834c6ad7487c0f7ec1">upd_t::validate</a></div><div class="ttdeci">bool validate() const</div><div class="ttdef"><b>Definition:</b> row0upd.h:615</div></div>
<div class="ttc" id="structupd__node__t_html_aff0415d839cb409fa906765ee4e485f1"><div class="ttname"><a href="structupd__node__t.html#aff0415d839cb409fa906765ee4e485f1">upd_node_t::cascade_node</a></div><div class="ttdeci">upd_node_t * cascade_node</div><div class="ttdef"><b>Definition:</b> row0upd.h:695</div></div>
<div class="ttc" id="structLob__diff_html_a633b44a1ad724464acd4e83b9f6a65a2"><div class="ttname"><a href="structLob__diff.html#a633b44a1ad724464acd4e83b9f6a65a2">Lob_diff::heap</a></div><div class="ttdeci">mem_heap_t * heap</div><div class="ttdoc">Memory heap in which this object is allocated. </div><div class="ttdef"><b>Definition:</b> row0upd.h:476</div></div>
<div class="ttc" id="xcom__base_8cc_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> xcom_base.cc:442</div></div>
<div class="ttc" id="row0upd_8h_html_a1cc9824c435b30f9957b9864ce39c8ad"><div class="ttname"><a href="row0upd_8h.html#a1cc9824c435b30f9957b9864ce39c8ad">upd_get_nth_field</a></div><div class="ttdeci">UNIV_INLINE upd_field_t * upd_get_nth_field(const upd_t *update, ulint n)</div><div class="ttdoc">Returns the nth field of an update vector. </div></div>
<div class="ttc" id="row0upd_8h_html_a2522b883af6618c18e80d1427d467d38"><div class="ttname"><a href="row0upd_8h.html#a2522b883af6618c18e80d1427d467d38">print_binary_diff</a></div><div class="ttdeci">std::ostream &amp; print_binary_diff(std::ostream &amp;out, const Binary_diff *bdiff, const dict_table_t *table, const Field *field)</div><div class="ttdoc">Print the given binary diff into the given output stream. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:3393</div></div>
<div class="ttc" id="structupd__node__t_html_aa176279271118bf4dda9da1b04f6a69e"><div class="ttname"><a href="structupd__node__t.html#aa176279271118bf4dda9da1b04f6a69e">upd_node_t::upd_ext</a></div><div class="ttdeci">row_ext_t * upd_ext</div><div class="ttdef"><b>Definition:</b> row0upd.h:738</div></div>
<div class="ttc" id="structupd__node__t_html_a92176a91fbe4393d4e28dee9799036e1"><div class="ttname"><a href="structupd__node__t.html#a92176a91fbe4393d4e28dee9799036e1">upd_node_t::has_clust_rec_x_lock</a></div><div class="ttdeci">ibool has_clust_rec_x_lock</div><div class="ttdef"><b>Definition:</b> row0upd.h:718</div></div>
<div class="ttc" id="structupd__field__t_html_aa7a5b5c2d701cb0ebb4e90a2209237b2"><div class="ttname"><a href="structupd__field__t.html#aa7a5b5c2d701cb0ebb4e90a2209237b2">upd_field_t::exp</a></div><div class="ttdeci">que_node_t * exp</div><div class="ttdoc">expression for calculating a new value: it refers to column values and constants in the symbol table ...</div><div class="ttdef"><b>Definition:</b> row0upd.h:512</div></div>
<div class="ttc" id="structupd__field__t_html_aefb15559ec2aa1c62029a3da997f727d"><div class="ttname"><a href="structupd__field__t.html#aefb15559ec2aa1c62029a3da997f727d">upd_field_t::old_v_val</a></div><div class="ttdeci">dfield_t * old_v_val</div><div class="ttdoc">old value for the virtual column </div><div class="ttdef"><b>Definition:</b> row0upd.h:518</div></div>
<div class="ttc" id="structupd__t_html_a0a69c9ef6f7b7c05375e5312e9e2063d"><div class="ttname"><a href="structupd__t.html#a0a69c9ef6f7b7c05375e5312e9e2063d">upd_t::append</a></div><div class="ttdeci">void append(const upd_field_t &amp;field)</div><div class="ttdoc">Append an update field to the end of array. </div><div class="ttdef"><b>Definition:</b> row0upd.h:594</div></div>
<div class="ttc" id="fil0fil_8h_html_a578077ea17f5093fc8fa7381ae89f7c8"><div class="ttname"><a href="fil0fil_8h.html#a578077ea17f5093fc8fa7381ae89f7c8">FIL_NULL</a></div><div class="ttdeci">constexpr page_no_t FIL_NULL</div><div class="ttdoc">&amp;#39;null&amp;#39; (undefined) page offset in the context of file spaces </div><div class="ttdef"><b>Definition:</b> fil0fil.h:928</div></div>
<div class="ttc" id="structupd__field__t_html_a6640d0972d234818aa6ba7bf9dadcf3b"><div class="ttname"><a href="structupd__field__t.html#a6640d0972d234818aa6ba7bf9dadcf3b">upd_field_t::old_val</a></div><div class="ttdeci">dfield_t old_val</div><div class="ttdoc">old value for the column </div><div class="ttdef"><b>Definition:</b> row0upd.h:516</div></div>
<div class="ttc" id="row0upd_8h_html_ae66c139b895a217591a0e987a6870d50"><div class="ttname"><a href="row0upd_8h.html#ae66c139b895a217591a0e987a6870d50">operator&lt;&lt;</a></div><div class="ttdeci">std::ostream &amp; operator&lt;&lt;(std::ostream &amp;out, const lob_index_diff_t &amp;obj)</div><div class="ttdoc">Overloading the global output operator to print lob_index_diff_t object. </div><div class="ttdef"><b>Definition:</b> row0upd.h:405</div></div>
<div class="ttc" id="structupd__field__t_html_a11786e295eb51c0f3a7fd910ad20757a"><div class="ttname"><a href="structupd__field__t.html#a11786e295eb51c0f3a7fd910ad20757a">upd_field_t::orig_len</a></div><div class="ttdeci">unsigned orig_len</div><div class="ttdoc">original length of the locally stored part of an externally stored column, or 0 </div><div class="ttdef"><b>Definition:</b> row0upd.h:509</div></div>
<div class="ttc" id="row0upd_8h_html_ae0039db94d3ed183135cfa8d4a49b42d"><div class="ttname"><a href="row0upd_8h.html#ae0039db94d3ed183135cfa8d4a49b42d">row_upd_replace_vcol</a></div><div class="ttdeci">void row_upd_replace_vcol(dtuple_t *row, const dict_table_t *table, const upd_t *update, bool upd_new, dtuple_t *undo_row, const byte *ptr)</div><div class="ttdoc">Replaces the virtual column values stored in a dtuple with that of a update vector. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1244</div></div>
<div class="ttc" id="row0upd_8h_html_aa516d2dc3d1ddcdf1a73b31cd5cbce0b"><div class="ttname"><a href="row0upd_8h.html#aa516d2dc3d1ddcdf1a73b31cd5cbce0b">row_upd_index_entry_sys_field</a></div><div class="ttdeci">void row_upd_index_entry_sys_field(dtuple_t *entry, dict_index_t *index, ulint type, ib_uint64_t val)</div><div class="ttdoc">Sets the trx id or roll ptr field of a clustered index entry. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:334</div></div>
<div class="ttc" id="structupd__field__t_html_adec4c4746d08ece07cfbb453b2e33e54"><div class="ttname"><a href="structupd__field__t.html#adec4c4746d08ece07cfbb453b2e33e54">upd_field_t::lob_version</a></div><div class="ttdeci">ulint lob_version</div><div class="ttdef"><b>Definition:</b> row0upd.h:542</div></div>
<div class="ttc" id="row0upd_8h_html_adc0bebe9c2bdc7ec292e9784374476f2"><div class="ttname"><a href="row0upd_8h.html#adc0bebe9c2bdc7ec292e9784374476f2">upd_get_n_fields</a></div><div class="ttdeci">UNIV_INLINE ulint upd_get_n_fields(const upd_t *update)</div><div class="ttdoc">Returns the number of fields in the update vector == number of columns to be updated by an update vec...</div></div>
<div class="ttc" id="sql_2table_8h_html"><div class="ttname"><a href="sql_2table_8h.html">table.h</a></div></div>
<div class="ttc" id="row0upd_8h_html_a2720d792e43ac476db80779bba13544c"><div class="ttname"><a href="row0upd_8h.html#a2720d792e43ac476db80779bba13544c">row_upd_write_sys_vals_to_log</a></div><div class="ttdeci">byte * row_upd_write_sys_vals_to_log(dict_index_t *index, trx_id_t trx_id, roll_ptr_t roll_ptr, byte *log_ptr, mtr_t *mtr)</div><div class="ttdoc">Writes into the redo log the values of trx id and roll ptr and enough info to determine their positio...</div><div class="ttdef"><b>Definition:</b> row0upd.cc:533</div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="structupd__field__t_html_aff2f5bb0a734bbb339022d54efb422a1"><div class="ttname"><a href="structupd__field__t.html#aff2f5bb0a734bbb339022d54efb422a1">upd_field_t::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Empty the information collected on LOB diffs. </div><div class="ttdef"><b>Definition:</b> row0upd.h:553</div></div>
<div class="ttc" id="structmtr__t_html"><div class="ttname"><a href="structmtr__t.html">mtr_t</a></div><div class="ttdoc">Mini-transaction handle and buffer. </div><div class="ttdef"><b>Definition:</b> mtr0mtr.h:169</div></div>
<div class="ttc" id="row0upd_8h_html_a457641854a34ad6c7872675ee93265f7"><div class="ttname"><a href="row0upd_8h.html#a457641854a34ad6c7872675ee93265f7">Lob_index_diff_vec</a></div><div class="ttdeci">std::vector&lt; lob_index_diff_t, mem_heap_allocator&lt; lob_index_diff_t &gt; &gt; Lob_index_diff_vec</div><div class="ttdef"><b>Definition:</b> row0upd.h:399</div></div>
<div class="ttc" id="row0upd_8h_html_a00cf371b11d50c6ad635038a71306b73"><div class="ttname"><a href="row0upd_8h.html#a00cf371b11d50c6ad635038a71306b73">row_upd_build_sec_rec_difference_binary</a></div><div class="ttdeci">upd_t * row_upd_build_sec_rec_difference_binary(const rec_t *rec, dict_index_t *index, const ulint *offsets, const dtuple_t *entry, mem_heap_t *heap)</div><div class="ttdoc">Builds an update vector from those fields which in a secondary index entry differ from a record that ...</div><div class="ttdef"><b>Definition:</b> row0upd.cc:747</div></div>
<div class="ttc" id="struct__entry_html"><div class="ttname"><a href="struct__entry.html">_entry</a></div><div class="ttdef"><b>Definition:</b> completion_hash.h:34</div></div>
<div class="ttc" id="structupd__node__t_html_af26c05573577c821189387f04e2e7c7c"><div class="ttname"><a href="structupd__node__t.html#af26c05573577c821189387f04e2e7c7c">upd_node_t::cmpl_info</a></div><div class="ttdeci">ulint cmpl_info</div><div class="ttdef"><b>Definition:</b> row0upd.h:723</div></div>
<div class="ttc" id="config__static_8h_html_a65e9886d74aaee76545e83dd09011727"><div class="ttname"><a href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></div><div class="ttdeci">#define false</div><div class="ttdef"><b>Definition:</b> config_static.h:43</div></div>
<div class="ttc" id="trx0types_8h_html_a4661d2883c1cd5d8f1cfbd63b553f1bc"><div class="ttname"><a href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a></div><div class="ttdeci">ib_id_t undo_no_t</div><div class="ttdoc">Undo number. </div><div class="ttdef"><b>Definition:</b> trx0types.h:148</div></div>
<div class="ttc" id="row0upd_8h_html_acc29008c34ee2e8c776a6d73b76f61e4"><div class="ttname"><a href="row0upd_8h.html#acc29008c34ee2e8c776a6d73b76f61e4">row_upd_replace</a></div><div class="ttdeci">void row_upd_replace(trx_t *trx, dtuple_t *row, row_ext_t **ext, const dict_index_t *index, const upd_t *update, mem_heap_t *heap)</div><div class="ttdoc">Replaces the new column values stored in the update vector. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:1382</div></div>
<div class="ttc" id="structupd__field__t_html_a32ebaf2a9f2ce4fb479e63102d4dd63a"><div class="ttname"><a href="structupd__field__t.html#a32ebaf2a9f2ce4fb479e63102d4dd63a">upd_field_t::push_lob_diff</a></div><div class="ttdeci">void push_lob_diff(const Lob_diff &amp;lob_diff)</div><div class="ttdef"><b>Definition:</b> row0upd.h:525</div></div>
<div class="ttc" id="row0upd_8h_html_a655590bf847503b6297d9d8d246201ff"><div class="ttname"><a href="row0upd_8h.html#a655590bf847503b6297d9d8d246201ff">upd_node_create</a></div><div class="ttdeci">upd_node_t * upd_node_create(mem_heap_t *heap)</div><div class="ttdoc">Creates an update node for a query graph. </div><div class="ttdef"><b>Definition:</b> row0upd.cc:285</div></div>
<div class="ttc" id="row0upd_8h_html_ae4662cf8a186586e3caad5a7a28cf9ec"><div class="ttname"><a href="row0upd_8h.html#ae4662cf8a186586e3caad5a7a28cf9ec">upd_create</a></div><div class="ttdeci">UNIV_INLINE upd_t * upd_create(ulint n, mem_heap_t *heap)</div><div class="ttdoc">Creates an update vector object. </div></div>
<div class="ttc" id="classTHD_html"><div class="ttname"><a href="classTHD.html">THD</a></div><div class="ttdoc">For each client connection we create a separate thread with THD serving as a thread/connection descri...</div><div class="ttdef"><b>Definition:</b> sql_class.h:803</div></div>
<div class="ttc" id="dialog_8cc_html_ae7bd12bd7c9e418a420087971d0a7e31"><div class="ttname"><a href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></div><div class="ttdeci">Dialog Client Authentication nullptr</div><div class="ttdef"><b>Definition:</b> dialog.cc:353</div></div>
<div class="ttc" id="structupd__t_html"><div class="ttname"><a href="structupd__t.html">upd_t</a></div><div class="ttdef"><b>Definition:</b> row0upd.h:580</div></div>
<div class="ttc" id="structupd__node__t_html_a085ca76d5231c216dd80a506eccdc505"><div class="ttname"><a href="structupd__node__t.html#a085ca76d5231c216dd80a506eccdc505">upd_node_t::columns</a></div><div class="ttdeci">sym_node_list_t columns</div><div class="ttdef"><b>Definition:</b> row0upd.h:716</div></div>
<div class="ttc" id="structdict__index__t_html"><div class="ttname"><a href="structdict__index__t.html">dict_index_t</a></div><div class="ttdoc">Data structure for an index. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:886</div></div>
<div class="ttc" id="mysql__ssl__rsa__setup_8cc_html_a024f1778ccb58afcfd4cd0bacbec4a8b"><div class="ttname"><a href="mysql__ssl__rsa__setup_8cc.html#a024f1778ccb58afcfd4cd0bacbec4a8b">error</a></div><div class="ttdeci">Log error(cerr, &quot;ERROR&quot;)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="row0upd_8h.html">row0upd.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
