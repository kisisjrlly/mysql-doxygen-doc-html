<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/mtr/mtr0mtr.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mtr0mtr_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mtr0mtr.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Mini-transaction buffer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="mtr0mtr_8h_source.html">mtr0mtr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0buf_8h_source.html">buf0buf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0flu_8h_source.html">buf0flu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="clone0api_8h_source.html">clone0api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsp0sysspace_8h_source.html">fsp0sysspace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log0meb_8h_source.html">log0meb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="clone0clone_8h_source.html">clone0clone.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log0log_8h_source.html">log0log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log0recv_8h_source.html">log0recv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mtr0log_8h_source.html">mtr0log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="page0types_8h_source.html">page0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0purge_8h_source.html">trx0purge.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structIterate.html">Iterate&lt; Functor &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate over a memo block in reverse.  <a href="structIterate.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFind.html">Find</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find specific object.  <a href="structFind.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFind__page.html">Find_page</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a page frame.  <a href="structFind__page.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMtr__memo__contains.html">Mtr_memo_contains</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRelease__all.html">Release_all</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the latches and blocks acquired by the mini-transaction.  <a href="structRelease__all.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDebug__check.html">Debug_check</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check that all slots have been handled.  <a href="structDebug__check.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structAdd__dirty__blocks__to__flush__list.html">Add_dirty_blocks_to_flush_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add blocks modified by the mini-transaction to the flush list.  <a href="structAdd__dirty__blocks__to__flush__list.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmtr__t_1_1Command.html">mtr_t::Command</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmtr__write__log__t.html">mtr_write_log_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the block contents to the REDO log.  <a href="structmtr__write__log__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structFlaggedCheck.html">FlaggedCheck</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug check for flags.  <a href="structFlaggedCheck.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af8227c6c9a0208dd2e0f2bffca244ac7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtr0mtr_8cc.html#af8227c6c9a0208dd2e0f2bffca244ac7">memo_slot_release</a> (<a class="el" href="structmtr__memo__slot__t.html">mtr_memo_slot_t</a> *slot)</td></tr>
<tr class="memdesc:af8227c6c9a0208dd2e0f2bffca244ac7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release latches and decrement the buffer fix count.  <a href="#af8227c6c9a0208dd2e0f2bffca244ac7">More...</a><br /></td></tr>
<tr class="separator:af8227c6c9a0208dd2e0f2bffca244ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d5e312fbf41ffa753a469ec2e495028"><td class="memItemLeft" align="right" valign="top"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtr0mtr_8cc.html#a3d5e312fbf41ffa753a469ec2e495028">mtr_commit_mlog_test</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, size_t payload)</td></tr>
<tr class="memdesc:a3d5e312fbf41ffa753a469ec2e495028"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserves space in the log buffer and writes a single MLOG_TEST.  <a href="#a3d5e312fbf41ffa753a469ec2e495028">More...</a><br /></td></tr>
<tr class="separator:a3d5e312fbf41ffa753a469ec2e495028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b6868c9d14543e7d086fd65df7a6952"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtr0mtr_8cc.html#a5b6868c9d14543e7d086fd65df7a6952">mtr_commit_mlog_test_filling_block_low</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, size_t req_space_left, size_t recursive_level)</td></tr>
<tr class="separator:a5b6868c9d14543e7d086fd65df7a6952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae57b8293d0fd06734ac057de2aceeba1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mtr0mtr_8cc.html#ae57b8293d0fd06734ac057de2aceeba1">mtr_commit_mlog_test_filling_block</a> (<a class="el" href="structlog__t.html">log_t</a> &amp;log, size_t req_space_left)</td></tr>
<tr class="memdesc:ae57b8293d0fd06734ac057de2aceeba1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserves space in the log buffer and writes a single MLOG_TEST.  <a href="#ae57b8293d0fd06734ac057de2aceeba1">More...</a><br /></td></tr>
<tr class="separator:ae57b8293d0fd06734ac057de2aceeba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Mini-transaction buffer. </p>
<p>Created 11/26/1995 Heikki Tuuri </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="af8227c6c9a0208dd2e0f2bffca244ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8227c6c9a0208dd2e0f2bffca244ac7">&#9670;&nbsp;</a></span>memo_slot_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void memo_slot_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmtr__memo__slot__t.html">mtr_memo_slot_t</a> *&#160;</td>
          <td class="paramname"><em>slot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release latches and decrement the buffer fix count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">slot</td><td>memo slot </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3d5e312fbf41ffa753a469ec2e495028"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d5e312fbf41ffa753a469ec2e495028">&#9670;&nbsp;</a></span>mtr_commit_mlog_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> mtr_commit_mlog_test </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserves space in the log buffer and writes a single MLOG_TEST. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>number of extra bytes within the record, not greater than 1024 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>end_lsn pointing to the first byte after the written record </dd></dl>

</div>
</div>
<a id="ae57b8293d0fd06734ac057de2aceeba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae57b8293d0fd06734ac057de2aceeba1">&#9670;&nbsp;</a></span>mtr_commit_mlog_test_filling_block()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtr_commit_mlog_test_filling_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>space_left</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserves space in the log buffer and writes a single MLOG_TEST. </p>
<p>Adjusts size of the payload in the record, in order to fill the current block up to its boundary. If nothing else is happening in parallel, we could expect to see afterwards: (cur_lsn + space_left) % OS_FILE_LOG_BLOCK_SIZE == LOG_BLOCK_HDR_SIZE, where cur_lsn = log_get_lsn(log). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">log</td><td>redo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">space_left</td><td>extra bytes left to the boundary of block, must be not greater than 496 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5b6868c9d14543e7d086fd65df7a6952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b6868c9d14543e7d086fd65df7a6952">&#9670;&nbsp;</a></span>mtr_commit_mlog_test_filling_block_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mtr_commit_mlog_test_filling_block_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlog__t.html">log_t</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>req_space_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>recursive_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_677ce86dc7c713c387c06a7468f4e449.html">mtr</a></li><li class="navelem"><a class="el" href="mtr0mtr_8cc.html">mtr0mtr.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
