<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: sql/rpl_rli.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rpl__rli_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">rpl_rli.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="rpl__rli_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Copyright (c) 2005, 2020, Oracle and/or its affiliates.</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   it under the terms of the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   as published by the Free Software Foundation.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">   This program is also distributed with certain software (including</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   but not limited to OpenSSL) that is licensed under separate terms,</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">   as designated in a particular file or component or in included license</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   documentation.  The authors of MySQL hereby grant you an additional</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">   permission to link the program and your derivative works with the</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   separately licensed software that they have included with MySQL.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">   GNU General Public License, version 2.0, for more details.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">   along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA */</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#ifndef RPL_RLI_H</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#define RPL_RLI_H</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#if defined(__SUNPRO_CC)</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">  Solaris Studio 12.5 has a bug where, if you use dynamic_cast</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">  and then later #include this file (which Boost does), you will</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">  get a compile error. Work around it by just including it right now.</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;cxxabi.h&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="time_8h.html">time.h</a>&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;atomic&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lex__string_8h.html">lex_string.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="binlog__event_8h.html">libbinlogevents/include/binlog_event.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="m__string_8h.html">m_string.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="map__helpers_8h.html">map_helpers.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__bitmap_8h.html">my_bitmap.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__dbug_8h.html">my_dbug.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__inttypes_8h.html">my_inttypes.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__io_8h.html">my_io.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__loglevel_8h.html">my_loglevel.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__psi__config_8h.html">my_psi_config.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__sys_8h.html">my_sys.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mysql__cond__bits_8h.html">mysql/components/services/mysql_cond_bits.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mysql__mutex__bits_8h.html">mysql/components/services/mysql_mutex_bits.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="psi__mutex__bits_8h.html">mysql/components/services/psi_mutex_bits.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="psi_2mysql__mutex_8h.html">mysql/psi/mysql_mutex.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="thread__type_8h.html">mysql/thread_type.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="prealloced__array_8h.html">prealloced_array.h</a>&quot;</span>  <span class="comment">// Prealloced_array</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="binlog_8h.html">sql/binlog.h</a>&quot;</span>        <span class="comment">// MYSQL_BIN_LOG</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log__event_8h.html">sql/log_event.h</a>&quot;</span>     <span class="comment">//Gtid_log_event</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="psi__memory__key_8h.html">sql/psi_memory_key.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="query__options_8h.html">sql/query_options.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rpl__gtid_8h.html">sql/rpl_gtid.h</a>&quot;</span>         <span class="comment">// Gtid_set</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rpl__info_8h.html">sql/rpl_info.h</a>&quot;</span>         <span class="comment">// Rpl_info</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rpl__mts__submode_8h.html">sql/rpl_mts_submode.h</a>&quot;</span>  <span class="comment">// enum_mts_parallel_type</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rpl__slave__until__options_8h.html">sql/rpl_slave_until_options.h</a>&quot;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rpl__tblmap_8h.html">sql/rpl_tblmap.h</a>&quot;</span>  <span class="comment">// table_mapping</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rpl__trx__boundary__parser_8h.html">sql/rpl_trx_boundary_parser.h</a>&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rpl__utility_8h.html">sql/rpl_utility.h</a>&quot;</span>  <span class="comment">// Deferred_log_events</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sql__class_8h.html">sql/sql_class.h</a>&quot;</span>    <span class="comment">// THD</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="system__variables_8h.html">sql/system_variables.h</a>&quot;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sql_2table_8h.html">sql/table.h</a>&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keyword">class </span><a class="code" href="classCommit__order__manager.html">Commit_order_manager</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">class </span><a class="code" href="classMaster__info.html">Master_info</a>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">class </span><a class="code" href="classRpl__filter.html">Rpl_filter</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">class </span><a class="code" href="classRpl__info__handler.html">Rpl_info_handler</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">class </span><a class="code" href="classSlave__committed__queue.html">Slave_committed_queue</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">class </span><a class="code" href="classSlave__worker.html">Slave_worker</a>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">class </span><a class="code" href="classString.html">String</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">struct </span><a class="code" href="structLEX__MASTER__INFO.html">LEX_MASTER_INFO</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">struct </span><a class="code" href="structdb__worker__hash__entry.html">db_worker_hash_entry</a>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">extern</span> <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="group__Replication.html#ga13c6cf13ed6f5f55cc60eb1597b6b379">sql_slave_skip_counter</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="rpl__rli_8h.html#a1d19304bdce3da4512a26949c51d603c">   86</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="classPrealloced__array.html">Prealloced_array&lt;Slave_worker *, 4&gt;</a> <a class="code" href="rpl__rli_8h.html#a1d19304bdce3da4512a26949c51d603c">Slave_worker_array</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structslave__job__item.html">   88</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structslave__job__item.html">slave_job_item</a> {</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="structslave__job__item.html#a222fbd4be26f4e4d8a53615f934c73a5">   89</a></span>&#160;  <a class="code" href="classLog__event.html">Log_event</a> *<a class="code" href="structslave__job__item.html#a222fbd4be26f4e4d8a53615f934c73a5">data</a>;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="structslave__job__item.html#a71cffbb571380b58b35d3b56ee7297ed">   90</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structslave__job__item.html#a71cffbb571380b58b35d3b56ee7297ed">relay_number</a>;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="structslave__job__item.html#a566808f6c83d97e52c6ad49bed042324">   91</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="code" href="structslave__job__item.html#a566808f6c83d97e52c6ad49bed042324">relay_pos</a>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;} <a class="code" href="rpl__rli_8h.html#adf09c680a12be12db26232ba584b27c7">Slave_job_item</a>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">/*******************************************************************************</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">Replication SQL Thread</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">Relay_log_info contains:</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">  - the current relay log</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">  - the current relay log offset</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">  - master log name</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">  - master log sequence corresponding to the last update</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">  - misc information specific to the SQL thread</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">Relay_log_info is initialized from a repository, i.e. table or file, if there is</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">one. Otherwise, data members are intialized with defaults by calling</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">init_relay_log_info().</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">The relay.info table/file shall be updated whenever: (i) the relay log file</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">is rotated, (ii) SQL Thread is stopped, (iii) while processing a Xid_log_event,</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">(iv) after a Query_log_event (i.e. commit or rollback) and (v) after processing</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">any statement written to the binary log without a transaction context.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">The Xid_log_event is a commit for transactional engines and must be handled</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">differently to provide reliability/data integrity. In this case, positions</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">are updated within the context of the current transaction. So</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">  . If the relay.info is stored in a transactional repository and the server</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">  crashes before successfully committing the transaction the changes to the</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">  position table will be rolled back along with the data.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">  . If the relay.info is stored in a non-transactional repository, for instance,</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">  a file or a system table created using MyIsam, and the server crashes before</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">  successfully committing the transaction the changes to the position table</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">  will not be rolled back but data will.</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">In particular, when there are mixed transactions, i.e a transaction that updates</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">both transaction and non-transactional engines, the Xid_log_event is still used</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">but reliability/data integrity cannot be achieved as we shall explain in what</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">follows.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">Changes to non-transactional engines, such as MyIsam, cannot be rolled back if a</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">failure happens. For that reason, there is no point in updating the positions</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">within the boundaries of any on-going transaction. This is true for both commit</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">and rollback. If a failure happens after processing the pseudo-transaction but</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">before updating the positions, the transaction will be re-executed when the</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">slave is up most likely causing an error that needs to be manually circumvented.</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">This is a well-known issue when non-transactional statements are executed.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">Specifically, if rolling back any transaction, positions are updated outside the</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">transaction boundaries. However, there may be a problem in this scenario even</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">when only transactional engines are updated. This happens because if there is a</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">rollback and such transaction is written to the binary log, a non-transactional</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">engine was updated or a temporary table was created or dropped within its</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">boundaries.</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">In particular, in both STATEMENT and MIXED logging formats, this happens because</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">any temporary table is automatically dropped after a shutdown/startup.</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">See BUG#26945 for further details.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">Statements written to the binary log outside the boundaries of a transaction are</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">DDLs or maintenance commands which are not transactional. These means that they</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">cannot be rolled back if a failure happens. In such cases, the positions are</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">updated after processing the events. If a failure happens after processing the</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">statement but before updating the positions, the statement will be</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">re-executed when the slave is up most likely causing an error that needs to be</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">manually circumvented. This is a well-known issue when non-transactional</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">statements are executed.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">The --sync-relay-log-info does not have effect when a system table, either</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">transactional or non-transactional is used.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">To correctly recovery from failures, one should combine transactional system</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">tables along with the --relay-log-recovery.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">*******************************************************************************/</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="classRelay__log__info.html">  165</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRelay__log__info.html">Relay_log_info</a> : <span class="keyword">public</span> <a class="code" href="classRpl__info.html">Rpl_info</a> {</div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a78a99f8bbca705e7958bb3ffaac85abd">  166</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRpl__info__factory.html">Rpl_info_factory</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">    Set of possible return values for the member methods related to</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">    `PRIVILEGE_CHECKS_USER` management.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">  173</a></span>&#160;  <span class="keyword">enum class</span> <a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">enum_priv_checks_status</a> : int {<span class="comment"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">    /** Function ended successfully */</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="json__diff_8h.html#a33855265d1be9a5e07049fbe2614e351ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a> = 0,<span class="comment"></span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">    /** Value for user is anonymous (&#39;&#39;@&#39;...&#39;) */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    USER_ANONYMOUS,<span class="comment"></span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">    /** Value for the username part of the user is larger than 32 characters */</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    USERNAME_TOO_LONG,<span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">    /** Value for the hostname part of the user is larger than 255 characters */</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    HOSTNAME_TOO_LONG,<span class="comment"></span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">    /** Value for the hostname part of the user has illegal characters */</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    HOSTNAME_SYNTAX_ERROR,<span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">      Value for the username part of the user is NULL but the value for the</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">      hostname is not NULL.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    USERNAME_NULL_HOSTNAME_NOT_NULL,<span class="comment"></span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">      Provided user doesn&#39;t exists.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    USER_DOES_NOT_EXIST,<span class="comment"></span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">      Provided user doesn&#39;t have the necesary privileges to execute the needed</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">      operations.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    USER_DOES_NOT_HAVE_PRIVILEGES,<span class="comment"></span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">    /** Values provided for the internal variables are corrupted. */</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    USER_DATA_CORRUPTED,<span class="comment"></span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">      Provided user doesn&#39;t have `FILE` privileges during the execution of a</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">      `LOAD DATA`event.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    LOAD_DATA_EVENT_NOT_ALLOWED</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  };</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8b94fd9487826588d8961e6b2a367909">  207</a></span>&#160;  <span class="keyword">enum class</span> <a class="code" href="classRelay__log__info.html#a8b94fd9487826588d8961e6b2a367909">enum_require_row_status</a> : int {<span class="comment"></span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">    /** Function ended successfully */</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="json__diff_8h.html#a33855265d1be9a5e07049fbe2614e351ad0749aaba8b833466dfcbb0428e4f89c">SUCCESS</a> = 0,<span class="comment"></span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">    /** Value for `privilege_checks_user` is not empty */</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    PRIV_CHECKS_USER_NOT_NULL</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  };</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">    The per-channel filter associated with this RLI</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a66a2678532544c25f850b83f19bdf205">  217</a></span>&#160;  <a class="code" href="classRpl__filter.html">Rpl_filter</a> *<a class="code" href="classRelay__log__info.html#a66a2678532544c25f850b83f19bdf205">rpl_filter</a>;<span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">     Flags for the state of the replication.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2">  221</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2">enum_state_flag</a> {<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">    /** The replication thread is inside a statement */</span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2a6e9fdb2f902d88e174ae5a30e50156dc">  223</a></span>&#160;    <a class="code" href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2a6e9fdb2f902d88e174ae5a30e50156dc">IN_STMT</a>,</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">    /** Flag counter.  Should always be last */</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2aadc21306da0de395bfdc26d20e3c59b7">  226</a></span>&#160;    STATE_FLAGS_COUNT</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  };</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">    Identifies what is the slave policy on primary keys in tables.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8">  232</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8">enum_require_table_primary_key</a> {<span class="comment"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">    /**No policy, used on PFS*/</span></div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8aab908a01dee660e61677ed5cf267b12b">  234</a></span>&#160;    PK_CHECK_NONE = 0,<span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">      The slave sets the value of sql_require_primary_key according to</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">      the source replicated value.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8a1b9ef871ff6fcbd549b90327de2b7941">  239</a></span>&#160;    PK_CHECK_STREAM = 1,<span class="comment"></span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">    /** The slave enforces tables to have primary keys for a given channel*/</span></div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8a08296c9135726498ff41605d8b8e5616">  241</a></span>&#160;    PK_CHECK_ON = 2,<span class="comment"></span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">    /** The slave does not enforce any policy around primary keys*/</span></div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8a6cc387e7733a98cbcdfb7a0958d67a09">  243</a></span>&#160;    PK_CHECK_OFF = 3</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  };</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">    The SQL thread owns one Relay_log_info, and each client that has</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">    executed a BINLOG statement owns one Relay_log_info. This function</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">    returns zero for the Relay_log_info object that belongs to the SQL</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">    thread and nonzero for Relay_log_info objects that belong to</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">    clients.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a80ee7108bc7cbdf1df4025c266147514">  253</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a80ee7108bc7cbdf1df4025c266147514">belongs_to_client</a>() {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(info_thd);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">return</span> !info_thd-&gt;slave_thread;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">/* Instrumentation key for performance schema for mts_temp_table_LOCK */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">#ifdef HAVE_PSI_INTERFACE</span></div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abae2b82da325962f69b7cc4b25d9fb4f">  259</a></span>&#160;  <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> <a class="code" href="classRelay__log__info.html#abae2b82da325962f69b7cc4b25d9fb4f">m_key_mts_temp_table_LOCK</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">     Lock to protect race condition while transferring temporary table from</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">     worker thread to coordinator thread and vice-versa</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad81ee3feef070c6b950a204bc3abd6c3">  265</a></span>&#160;  <a class="code" href="structmysql__mutex__t.html">mysql_mutex_t</a> <a class="code" href="classRelay__log__info.html#ad81ee3feef070c6b950a204bc3abd6c3">mts_temp_table_LOCK</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">     Lock to acquire by methods that concurrently update lwm of committed</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">     transactions and the min waited timestamp and its index.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#affa9fc41666186c0dd3e2d1eaf51b9e4">  270</a></span>&#160;  <a class="code" href="structmysql__mutex__t.html">mysql_mutex_t</a> <a class="code" href="classRelay__log__info.html#affa9fc41666186c0dd3e2d1eaf51b9e4">mts_gaq_LOCK</a>;</div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a24b2857beecd824f03bfed7352f8ac31">  271</a></span>&#160;  <a class="code" href="structmysql__cond__t.html">mysql_cond_t</a> <a class="code" href="classRelay__log__info.html#a24b2857beecd824f03bfed7352f8ac31">logical_clock_cond</a>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">    If true, events with the same server id should be replicated. This</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">    field is set on creation of a relay log info structure by copying</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">    the value of ::replicate_same_server_id and can be overridden if</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">    necessary. For example of when this is done, check sql_binlog.cc,</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    where the BINLOG statement can be used to execute &quot;raw&quot; events.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a51d97a5d58159e94c6f49732939a3045">  279</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a51d97a5d58159e94c6f49732939a3045">replicate_same_server_id</a>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">    Protected with internal locks.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    Must get data_lock when resetting the logs.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9bbad242863fab978884b5c60b4a1b28">  285</a></span>&#160;  <a class="code" href="classMYSQL__BIN__LOG.html">MYSQL_BIN_LOG</a> <a class="code" href="classRelay__log__info.html#a9bbad242863fab978884b5c60b4a1b28">relay_log</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">    Identifies when the recovery process is going on.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">    See sql/rpl_slave.h:init_recovery for further details.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a71010a7a3ecb75a25dce1f9880bbcf64">  291</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a71010a7a3ecb75a25dce1f9880bbcf64">is_relay_log_recovery</a>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">/* The following variables are safe to read any time */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">    When we restart slave thread we need to have access to the previously</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">    created temporary tables. Modified only on init/end and by the SQL</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">    thread, read only by SQL thread.</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a0d1f80d296311d8b2dfa5f9b6a9e5f42">  300</a></span>&#160;  <a class="code" href="structTABLE.html">TABLE</a> *<a class="code" href="classRelay__log__info.html#a0d1f80d296311d8b2dfa5f9b6a9e5f42">save_temporary_tables</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">/* parent Master_info structure */</span></div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae1435014c6f1b00509cc0533d300a119">  303</a></span>&#160;  <a class="code" href="classMaster__info.html">Master_info</a> *<a class="code" href="classRelay__log__info.html#ae1435014c6f1b00509cc0533d300a119">mi</a>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">/* number of temporary tables open in this channel */</span></div><div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a0bbe8137fc57599ea9f7f688dec4fd56">  306</a></span>&#160;  std::atomic&lt;int32&gt; atomic_channel_open_temp_tables{0};</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">  /** the status of the commit timestamps for the relay log */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keyword">enum</span> {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">      no GTID log event has been processed, so it is not known if this log</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">      has commit timestamps</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#acd5795ba0a4d0a453f9c945facedfea0ab60c6236dc855510b66ab9c432f0b2d5">  314</a></span>&#160;    <a class="code" href="classRelay__log__info.html#acd5795ba0a4d0a453f9c945facedfea0ab60c6236dc855510b66ab9c432f0b2d5">COMMIT_TS_UNKNOWN</a>,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// the immediate master does not support commit timestamps</span></div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#acd5795ba0a4d0a453f9c945facedfea0a8f3f10b43bafa45077c18313d6d46755">  316</a></span>&#160;    <a class="code" href="classRelay__log__info.html#acd5795ba0a4d0a453f9c945facedfea0a8f3f10b43bafa45077c18313d6d46755">COMMIT_TS_NOT_FOUND</a>,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// the immediate master supports commit timestamps</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#acd5795ba0a4d0a453f9c945facedfea0a72f8fafee765439b826ced3510d29121">  318</a></span>&#160;    COMMIT_TS_FOUND</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  } commit_timestamps_status;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">    @return the pointer to the Gtid_monitoring_info.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ac5e0c91d6bd60cd1e72f01edbd8f8ab7">  324</a></span>&#160;  <a class="code" href="classGtid__monitoring__info.html">Gtid_monitoring_info</a> *<a class="code" href="classRelay__log__info.html#ac5e0c91d6bd60cd1e72f01edbd8f8ab7">get_gtid_monitoring_info</a>() {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">return</span> gtid_monitoring_info;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">    Stores the details of the transaction which has just started processing.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">    This function is called by the STS applier or MTS worker when applying a</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">    Gtid.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">    @param  gtid_arg         the gtid of the trx</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">    @param  original_ts_arg  the original commit timestamp of the transaction</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">    @param  immediate_ts_arg the immediate commit timestamp of the transaction</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">    @param  skipped          true if the transaction was gtid skipped</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abd5b8a0a6f4568445b556aa4291815e3">  339</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#abd5b8a0a6f4568445b556aa4291815e3">started_processing</a>(<a class="code" href="structGtid.html">Gtid</a> gtid_arg, <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> original_ts_arg,</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                          <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> immediate_ts_arg, <span class="keywordtype">bool</span> skipped = <span class="keyword">false</span>) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    gtid_monitoring_info-&gt;start(gtid_arg, original_ts_arg, immediate_ts_arg,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                skipped);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">    Stores the details of the transaction which has just started processing.</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">    This function is called by the MTS coordinator when queuing a Gtid to</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">    a worker.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">    @param  gtid_log_ev_arg the gtid log event of the trx</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aca811fe3172d8423b2bcf80578f67d52">  353</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#aca811fe3172d8423b2bcf80578f67d52">started_processing</a>(<a class="code" href="classGtid__log__event.html">Gtid_log_event</a> *gtid_log_ev_arg) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="structGtid.html">Gtid</a> gtid = {0, 0};</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (gtid_log_ev_arg-&gt;<a class="code" href="classGtid__log__event.html#a3beca6d36cc8b492cdb7831fe9fa2fe7">get_type</a>() == <a class="code" href="rpl__gtid_8h.html#ad5623b8a2ac0c6cdeb5b57bfcfa1c811a995827d351344bbf1bb42d4bcfb58d1f">ASSIGNED_GTID</a>) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      gtid = {gtid_log_ev_arg-&gt;<a class="code" href="classGtid__log__event.html#a0dfb533b61b71021ccf787b5be301a94">get_sidno</a>(<span class="keyword">true</span>), gtid_log_ev_arg-&gt;<a class="code" href="classGtid__log__event.html#a7f8e45f12601f4874a37af94fe9ae05a">get_gno</a>()};</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    started_processing(gtid, gtid_log_ev_arg-&gt;<a class="code" href="classbinary__log_1_1Gtid__event.html#a447f427d2bee1c75009ab96da2e869b3">original_commit_timestamp</a>,</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                       gtid_log_ev_arg-&gt;<a class="code" href="classbinary__log_1_1Gtid__event.html#a4a31e7742051b35b196eb62c29a1d1a1">immediate_commit_timestamp</a>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">    When the processing of a transaction is completed, that timestamp is</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">    recorded, the information is copied to last_processed_trx and the</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">    information in processing_trx is cleared.</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">    If the transaction was &quot;applied&quot; but GTID-skipped, the copy will not</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">    happen and the last_processed_trx will keep its current value.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa91dff754390dc28e8d0be359215ff22">  370</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#aa91dff754390dc28e8d0be359215ff22">finished_processing</a>() { gtid_monitoring_info-&gt;finish(); }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">    @return True if there is a transaction being currently processed</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae3f77566131029b5edc404c7277122b1">  375</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#ae3f77566131029b5edc404c7277122b1">is_processing_trx</a>() {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> gtid_monitoring_info-&gt;is_processing_trx_set();</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">   Clears the processing_trx structure fields. Normally called when there is an</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">   error while processing the transaction.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a5e96bc5850a1b773e98dbbf9bb53002e">  383</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a5e96bc5850a1b773e98dbbf9bb53002e">clear_processing_trx</a>() { gtid_monitoring_info-&gt;clear_processing_trx(); }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">    Clears the Gtid_monitoring_info fields.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a387eb2ee580b81081ea7c6ac15fe3bb0">  388</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a387eb2ee580b81081ea7c6ac15fe3bb0">clear_gtid_monitoring_info</a>() { gtid_monitoring_info-&gt;clear(); }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">   When a transaction is retried, the error number and message, and total number</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">   of retries are stored. The timestamp for this error is also set here.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">   @param transient_errno_arg        Transient error number.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">   @param transient_err_message_arg  Transient error message.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">   @param trans_retries_arg          Number of times this transaction has been</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">                                     retried so far.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abd7a05f1f9c3c2097a6013028fdb8c73">  399</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#abd7a05f1f9c3c2097a6013028fdb8c73">retried_processing</a>(<a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> transient_errno_arg,</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">char</span> *transient_err_message_arg,</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                          <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> trans_retries_arg) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    gtid_monitoring_info-&gt;store_transient_error(</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        transient_errno_arg, transient_err_message_arg, trans_retries_arg);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">    If on init_info() call error_on_rli_init_info is true that means</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">    that previous call to init_info() terminated with an error, RESET</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">    SLAVE must be executed and the problem fixed manually.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#adf7b8e0b547257f58d2603709ecea80b">  411</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#adf7b8e0b547257f58d2603709ecea80b">error_on_rli_init_info</a>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">    Variable is set to true as long as</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">    original_commit_timestamp &gt; immediate_commit_timestamp so that the</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">    corresponding warning is only logged once.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a160cc1ba17193286dcaf32b25354b1f4">  418</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a160cc1ba17193286dcaf32b25354b1f4">gtid_timestamps_warning_logged</a>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">    Retrieves the username part of the `PRIVILEGE_CHECKS_USER` option of `CHANGE</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">    MASTER TO` statement.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">    @return a string holding the username part of the user or an empty string.</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  std::string get_privilege_checks_username() <span class="keyword">const</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">    Retrieves the host part of the `PRIVILEGE_CHECKS_USER` option of `CHANGE</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">    MASTER TO` statement.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">    @return a string holding the host part of the user or an empty string.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  std::string get_privilege_checks_hostname() <span class="keyword">const</span>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">    Returns whether or not there is no user configured for</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">    `PRIVILEGE_CHECKS_USER`.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">    @return true if there is no user configured for `PRIVILEGE_CHECKS_USER` and</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">            false otherwise.</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordtype">bool</span> is_privilege_checks_user_null() <span class="keyword">const</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">    Returns whether or not the internal data regarding `PRIVILEGE_CHECKS_USER`</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">    is corrupted. This may happen, for instance, if the user tries to change the</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">    Relay_log_info repository manually or after a server crash.</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">    @return true if the data is corrupted, false otherwise.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordtype">bool</span> is_privilege_checks_user_corrupted() <span class="keyword">const</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">    Clears the info related to the data initialized from</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">    `PRIVILEGE_CHECKS_USER`.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordtype">void</span> clear_privilege_checks_user();</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">    Sets the flag that tells whether or not the data regarding the</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">    `PRIVILEGE_CHECKS_USER` is corrupted.</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">    @param is_corrupted the flag value.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordtype">void</span> set_privilege_checks_user_corrupted(<span class="keywordtype">bool</span> is_corrupted);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">    Initializes data related to `PRIVILEGE_CHECKS_USER`, specifically the user</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">    name and the user hostname.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">    @param param_privilege_checks_username the username part of the user.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">    @param param_privilege_checks_hostname the hostname part of the user.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">    @return a status code describing the state of the data initialization.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">enum_priv_checks_status</a> set_privilege_checks_user(</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordtype">char</span> <span class="keyword">const</span> *param_privilege_checks_username,</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordtype">char</span> <span class="keyword">const</span> *param_privilege_checks_hostname);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">    Checks the validity and integrity of the data related to</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">    `PRIVILEGE_CHECKS_USER`, specifically the user name and the user</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">    hostname. Also checks if the user exists.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">    This method takes no parameters as it checks the values stored in the</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">    internal member variables.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">    @return a status code describing the state of the data initialization.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">enum_priv_checks_status</a> check_privilege_checks_user();</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">    Checks the validity and integrity of the data related to</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">    `PRIVILEGE_CHECKS_USER`, specifically the user name and the user</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">    hostname. Also checks if the user exists.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">    @param param_privilege_checks_username the username part of the user.</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">    @param param_privilege_checks_hostname the hostname part of the user.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">    @return a status code describing the state of the data initialization.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">enum_priv_checks_status</a> check_privilege_checks_user(</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordtype">char</span> <span class="keyword">const</span> *param_privilege_checks_username,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordtype">char</span> <span class="keyword">const</span> *param_privilege_checks_hostname);<span class="comment"></span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">    Checks the existence of user provided as part of the `PRIVILEGE_CHECKS_USER`</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">    option.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">    @param param_privilege_checks_username the username part of the user.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">    @param param_privilege_checks_hostname the host part of the user.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">    @return a status code describing the state of the data initialization.</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">enum_priv_checks_status</a> check_applier_acl_user(</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordtype">char</span> <span class="keyword">const</span> *param_privilege_checks_username,</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordtype">char</span> <span class="keyword">const</span> *param_privilege_checks_hostname);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">    Returns a printable representation of the username and hostname currently</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">    being used in the applier security context or empty strings other wise.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">    @return an `std::pair` containing the username and the hostname printable</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">            representations.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  std::pair&lt;const char *, const char *&gt;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  print_applier_security_context_user_host() <span class="keyword">const</span>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">    Outputs the error message associated with applier thread user privilege</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">    checks error `error_code`.</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">    The output stream to which is outputted is decided based on `to_client`</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">    which, if set to `true` will output the message to the client session and if</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">    `false` will output to the server log.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">    @param level the message urgency level, e.g., `ERROR_LEVEL`,</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">                 `WARNING_LEVEL`, etc.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">    @param status_code the status code to output the associated error message</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">                       for.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">    @param to_client a flag indicating if the message should be sent to the</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">                     client session or to the server log.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">    @param channel_name name of the channel for which the error is being</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">                        reported.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">    @param user_name username for which the error is being reported.</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">    @param host_name hostname for which the error is being reported.</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordtype">void</span> report_privilege_check_error(<span class="keyword">enum</span> <a class="code" href="my__loglevel_8h.html#a246c20287aef048a7befd7c863325d82">loglevel</a> level,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                    <a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">enum_priv_checks_status</a> status_code,</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                    <span class="keywordtype">bool</span> to_client,</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                    <span class="keywordtype">char</span> <span class="keyword">const</span> *channel_name = <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                    <span class="keywordtype">char</span> <span class="keyword">const</span> *user_name = <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                    <span class="keywordtype">char</span> <span class="keyword">const</span> *host_name = <span class="keyword">nullptr</span>) <span class="keyword">const</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">    Initializes the security context associated with the `PRIVILEGE_CHECKS_USER`</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">    user that is to be used by the provided THD object.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">    @return a status code describing the state of the data initialization.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">enum_priv_checks_status</a> initialize_security_context(<a class="code" href="classTHD.html">THD</a> *thd);<span class="comment"></span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">    Initializes the security context associated with the `PRIVILEGE_CHECKS_USER`</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">    user that is to be used by the applier thread.</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">    @return a status code describing the state of the data initialization.</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">enum_priv_checks_status</a> initialize_applier_security_context();</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">    Returns whether the slave is running in row mode only.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">    @return true if row_format_required is active, false otherwise.</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordtype">bool</span> is_row_format_required() <span class="keyword">const</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">    Sets the flag that tells whether or not the slave is running in row mode</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">    only.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">    @param require_row the flag value.</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordtype">void</span> set_require_row_format(<span class="keywordtype">bool</span> require_row);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">     Returns what is the slave policy concerning primary keys on</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">     replicated tables.</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">     @return STREAM if it replicates the source values, ON if it enforces the</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">             need on primary keys, OFF if it does no enforce any restrictions.</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <a class="code" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8">enum_require_table_primary_key</a> get_require_table_primary_key_check() <span class="keyword">const</span>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">    Sets the field that tells what is the slave policy concerning primary keys</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">    on replicated tables.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">    @param require_pk the policy value.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordtype">void</span> set_require_table_primary_key_check(</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <a class="code" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8">enum_require_table_primary_key</a> require_pk);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">    This will be used to verify transactions boundaries of events being applied</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">    Its output is used to detect when events were not logged using row based</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">    logging.</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad52389b553bebc5a79b241d85febf1dd">  609</a></span>&#160;  <a class="code" href="classReplication__transaction__boundary__parser.html">Replication_transaction_boundary_parser</a> <a class="code" href="classRelay__log__info.html#ad52389b553bebc5a79b241d85febf1dd">transaction_parser</a>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">    Let&#39;s call a group (of events) :</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">      - a transaction</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">      or</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">      - an autocommiting query + its associated events (INSERT_ID,</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">    TIMESTAMP...)</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">    We need these rli coordinates :</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">    - relay log name and position of the beginning of the group we currently are</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">    executing. Needed to know where we have to restart when replication has</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">    stopped in the middle of a group (which has been rolled back by the slave).</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">    - relay log name and position just after the event we have just</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">    executed. This event is part of the current group.</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">    Formerly we only had the immediately above coordinates, plus a &#39;pending&#39;</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">    variable, but this dealt wrong with the case of a transaction starting on a</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">    relay log and finishing (commiting) on another relay log. Case which can</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">    happen when, for example, the relay log gets rotated because of</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">    max_binlog_size.</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; <span class="keyword">protected</span>:<span class="comment"></span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">     Event group means a group of events of a transaction. group_relay_log_name</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">     and group_relay_log_pos record the place before where all event groups</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">     are applied. When slave starts, it resume to apply events from</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">     group_relay_log_pos. They will be initialized to the begin of the first</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">     relay log file if it is a new slave(including SLAVE RESET). Then,</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">     group_relay_log_pos is advanced after each transaction is applied</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">     successfully in single thread slave. For MTS, group_relay_log_pos</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">     is updated by mts checkpoint mechanism. group_relay_log_pos and</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">     group_relay_log_name are stored into relay_log_info file/table</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">     periodically. When server startup, they are loaded from relay log info</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">     file/table.</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a83f520fd0ba300d87a0037743e6ffede">  643</a></span>&#160;  <span class="keywordtype">char</span> group_relay_log_name[<a class="code" href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a>];</div><div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2f1874fce058e237fafbea6b52273018">  644</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a2f1874fce058e237fafbea6b52273018">group_relay_log_pos</a>;</div><div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae63999471cc027d6a5d1bdb5c2a9ae20">  645</a></span>&#160;  <span class="keywordtype">char</span> event_relay_log_name[<a class="code" href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a>];</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="comment">/* The suffix number of relay log name */</span></div><div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a76b1b972ff731e70e10097b4c76af108">  647</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classRelay__log__info.html#a76b1b972ff731e70e10097b4c76af108">event_relay_log_number</a>;</div><div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a33ed136846ea7c3239d712486255ab19">  648</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a33ed136846ea7c3239d712486255ab19">event_relay_log_pos</a>;</div><div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae8cfd4bfc250442fde6e897a36afae3d">  649</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#ae8cfd4bfc250442fde6e897a36afae3d">future_event_relay_log_pos</a>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="comment">/* current event&#39;s start position in relay log */</span></div><div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a48028f0544fc8c0adfe9e2599b2c3488">  652</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="code" href="classRelay__log__info.html#a48028f0544fc8c0adfe9e2599b2c3488">event_start_pos</a>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">     Original log name and position of the group we&#39;re currently executing</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">     (whose coordinates are group_relay_log_name/pos in the relay log)</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">     in the master&#39;s binlog. These concern the *group*, because in the master&#39;s</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">     binlog the log_pos that comes with each event is the position of the</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">     beginning of the group.</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">    Note: group_master_log_name, group_master_log_pos must only be</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">    written from the thread owning the Relay_log_info (SQL thread if</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">    !belongs_to_client(); client thread executing BINLOG statement if</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">    belongs_to_client()).</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a388fe6642d90e6ed02903a08c5c0752b">  665</a></span>&#160;  <span class="keywordtype">char</span> group_master_log_name[<a class="code" href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a>];</div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9fb4b69ab88ea6c8055cc94cb67d0590">  666</a></span>&#160;  <span class="keyword">volatile</span> <a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="code" href="classRelay__log__info.html#a9fb4b69ab88ea6c8055cc94cb67d0590">group_master_log_pos</a>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a205a3d2eafb6dc53e5d8c9f5185883e2">  669</a></span>&#160;  <a class="code" href="classGtid__set.html">Gtid_set</a> *<a class="code" href="classRelay__log__info.html#a205a3d2eafb6dc53e5d8c9f5185883e2">gtid_set</a>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">    Identifies when this object belongs to the SQL thread and was not</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">    created for a client thread or some other purpose including</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">    Slave_worker instance initializations. Ends up serving the same</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">    purpose as the belongs_to_client method, but its value is set</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">    earlier on in the class constructor.</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a356972af8fbdefac5d409813171f93cb">  677</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a356972af8fbdefac5d409813171f93cb">rli_fake</a>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">/* Flag that ensures the retrieved GTID set is initialized only once. */</span></div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a59ee8e7a9d8e4adde7c85387aadb006e">  679</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a59ee8e7a9d8e4adde7c85387aadb006e">gtid_retrieved_initialized</a>;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">    Stores information on the last processed transaction or the transaction</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">    that is currently being processed.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">    STS:</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">    - timestamps of the currently applying/last applied transaction</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">    MTS:</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">    - coordinator thread: timestamps of the currently scheduling/last scheduled</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">      transaction in a worker&#39;s queue</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">    - worker thread: timestamps of the currently applying/last applied</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">      transaction</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ab719054675a57eb0ba67051005dbe344">  694</a></span>&#160;  <a class="code" href="classGtid__monitoring__info.html">Gtid_monitoring_info</a> *<a class="code" href="classRelay__log__info.html#ab719054675a57eb0ba67051005dbe344">gtid_monitoring_info</a>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">     It will be set to true when receiver truncated relay log for some reason.</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">     The truncated data may already be read by applier. So applier need to check</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">     it each time the binlog_end_pos is updated.</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad9a89f03da3135e2bdb76c9ec235fa94">  701</a></span>&#160;  <span class="keywordtype">bool</span> m_relay_log_truncated = <span class="keyword">false</span>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">    The user name part of the user passed on to `PRIVILEGE_CHECKS_USER`.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae2003e3412484948f8f85484e1eeff9b">  706</a></span>&#160;  std::string <a class="code" href="classRelay__log__info.html#ae2003e3412484948f8f85484e1eeff9b">m_privilege_checks_username</a>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">    The host name part of the user passed on to `PRIVILEGE_CHECKS_USER`.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a54c24d306bf43b2b0b25e58916572e7d">  711</a></span>&#160;  std::string <a class="code" href="classRelay__log__info.html#a54c24d306bf43b2b0b25e58916572e7d">m_privilege_checks_hostname</a>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">    Tells whether or not the internal data regarding `PRIVILEGE_CHECKS_USER` is</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">    corrupted. This may happen if the user tries to change the Relay_log_info</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">    repository by hand.</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a75e1a46783f044a607456e828709f0e9">  718</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a75e1a46783f044a607456e828709f0e9">m_privilege_checks_user_corrupted</a>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">   Tells if the slave is only accepting events logged with row based logging.</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">   It also blocks</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">     Operations with temporary table creation/deletion</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">     Operations with LOAD DATA</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">     Events: INTVAR_EVENT, RAND_EVENT, USER_VAR_EVENT</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9c3f5e764a38e5116ce36369b960aa47">  727</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a9c3f5e764a38e5116ce36369b960aa47">m_require_row_format</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">    Identifies what is the slave policy on primary keys in tables.</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">    If set to STREAM it just replicates the value of sql_require_primary_key.</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">    If set to ON it fails when the source tries to replicate a table creation</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">    or alter operation that does not have a primary key.</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">    If set to OFF it does not enforce any policies on the channel for primary</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">    keys.</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a043db62d05293c4fc010f10d24847ddb">  737</a></span>&#160;  <a class="code" href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8">enum_require_table_primary_key</a> <a class="code" href="classRelay__log__info.html#a043db62d05293c4fc010f10d24847ddb">m_require_table_primary_key_check</a>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a90c4e3bab022f6a27ec96851193532f2">  740</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a90c4e3bab022f6a27ec96851193532f2">is_relay_log_truncated</a>() { <span class="keywordflow">return</span> m_relay_log_truncated; }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa8c47d6601a0d8d260881740e8720d4d">  742</a></span>&#160;  <a class="code" href="classSid__map.html">Sid_map</a> *<a class="code" href="classRelay__log__info.html#aa8c47d6601a0d8d260881740e8720d4d">get_sid_map</a>() { <span class="keywordflow">return</span> gtid_set-&gt;<a class="code" href="classGtid__set.html#a1dcb30d3c0809db3baa3bce6a813332b">get_sid_map</a>(); }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a40fd6b8e94221fac2746afd5ebd544ce">  744</a></span>&#160;  <a class="code" href="classCheckable__rwlock.html">Checkable_rwlock</a> *<a class="code" href="classRelay__log__info.html#a40fd6b8e94221fac2746afd5ebd544ce">get_sid_lock</a>() { <span class="keywordflow">return</span> get_sid_map()-&gt;get_sid_lock(); }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a523b1810022f40f6c67605e6b35c89e3">  746</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a523b1810022f40f6c67605e6b35c89e3">add_logged_gtid</a>(<a class="code" href="rpl__gtid_8h.html#a4873b950f954adcfa36c1665428ce3ff">rpl_sidno</a> sidno, <a class="code" href="rpl__gtid_8h.html#a74378e47532331d3ac920082cf954668">rpl_gno</a> gno) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    get_sid_lock()-&gt;assert_some_lock();</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(sidno &lt;= get_sid_map()-&gt;get_max_sidno());</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    gtid_set-&gt;<a class="code" href="classGtid__set.html#a4f026631d33627a5c273bdc35dcc03ef">ensure_sidno</a>(sidno);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    gtid_set-&gt;<a class="code" href="classGtid__set.html#aba662ba6a9761b9b0c21473aecc27a1b">_add_gtid</a>(sidno, gno);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">    Adds a GTID set to received GTID set.</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">    @param gtid_set the gtid_set to add</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">    @return RETURN_STATUS_OK or RETURN_STATUS_REPORTED_ERROR.</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <a class="code" href="rpl__gtid_8h.html#a3cf0e1a495b2402d8e6aa88f870316d5">enum_return_status</a> add_gtid_set(<span class="keyword">const</span> <a class="code" href="classGtid__set.html">Gtid_set</a> *gtid_set);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa5ac490e962add1bd99e03cd92a0ccea">  762</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classGtid__set.html">Gtid_set</a> *<a class="code" href="classRelay__log__info.html#aa5ac490e962add1bd99e03cd92a0ccea">get_gtid_set</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> gtid_set; }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordtype">bool</span> reinit_sql_thread_io_cache(<span class="keyword">const</span> <span class="keywordtype">char</span> *log, <span class="keywordtype">bool</span> need_data_lock);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">     Check if group_relay_log_name is in index file.</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">     @param [out] errmsg An error message is returned if error happens.</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">     @retval    false    It is valid.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">     @retval    true     It is invalid. In this case, *errmsg is set to point to</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">                         the error message.</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="keywordtype">bool</span> is_group_relay_log_name_invalid(<span class="keyword">const</span> <span class="keywordtype">char</span> **errmsg);<span class="comment"></span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">     Reset group_relay_log_name and group_relay_log_pos to the start of the</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">     first relay log file. The caller must hold data_lock.</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">     @param[out]     errmsg    An error message is set into it if error happens.</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">     @retval    false    Success</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">     @retval    true     Error</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordtype">bool</span> reset_group_relay_log_pos(<span class="keyword">const</span> <span class="keywordtype">char</span> **errmsg);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">    Update the error number, message and timestamp fields. This function is</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">    different from va_report() as va_report() also logs the error message in the</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">    log apart from updating the error fields.</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordtype">void</span> fill_coord_err_buf(<a class="code" href="my__loglevel_8h.html#a246c20287aef048a7befd7c863325d82">loglevel</a> level, <span class="keywordtype">int</span> err_code,</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">char</span> *buff_coord) <span class="keyword">const</span>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">    Flag that the group_master_log_pos is invalid. This may occur</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">    (for example) after CHANGE MASTER TO RELAY_LOG_POS.  This will</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">    be unset after the first event has been executed and the</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">    group_master_log_pos is valid again.</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9a590ea77f4e17a4caf2750901f9ca37">  800</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a9a590ea77f4e17a4caf2750901f9ca37">is_group_master_log_pos_invalid</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">    Handling of the relay_log_space_limit optional constraint.</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">    ignore_log_space_limit is used to resolve a deadlock between I/O and SQL</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">    threads, the SQL thread sets it to unblock the I/O thread and make it</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">    temporarily forget about the constraint.</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa64c26af8f29f6ea0599d89bb877d719">  808</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> log_space_limit, <a class="code" href="classRelay__log__info.html#aa64c26af8f29f6ea0599d89bb877d719">log_space_total</a>;</div><div class="line"><a name="l00809"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a6572c115b7179bd44e79fa39da82255a">  809</a></span>&#160;  std::atomic&lt;bool&gt; <a class="code" href="classRelay__log__info.html#a6572c115b7179bd44e79fa39da82255a">ignore_log_space_limit</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">    Used by the SQL thread to instructs the IO thread to rotate</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">    the logs when the SQL thread needs to purge to release some</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">    disk space.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00816"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae193ed47f0122f0d45a37cbd48ccb921">  816</a></span>&#160;  std::atomic&lt;bool&gt; <a class="code" href="classRelay__log__info.html#ae193ed47f0122f0d45a37cbd48ccb921">sql_force_rotate_relay</a>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ada985f35bb25a49503b6796ebdd7e12f">  818</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#ada985f35bb25a49503b6796ebdd7e12f">last_master_timestamp</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">    Reset the delay.</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">    This is used by RESET SLAVE to clear the delay.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8c111e744f81a92f66b54efc06b48995">  824</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a8c111e744f81a92f66b54efc06b48995">clear_sql_delay</a>() { sql_delay = 0; }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">    Needed for problems when slave stops and we want to restart it</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">    skipping one or more events in the master log that have caused</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">    errors, and have been manually applied by DBA already.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a0b9794ad546a88d09c36cc3da37ad167">  831</a></span>&#160;  <span class="keyword">volatile</span> <a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a> <a class="code" href="classRelay__log__info.html#a0b9794ad546a88d09c36cc3da37ad167">slave_skip_counter</a>;</div><div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ac9508eb5e8371116f090e8dd8993e66a">  832</a></span>&#160;  <span class="keyword">volatile</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#ac9508eb5e8371116f090e8dd8993e66a">abort_pos_wait</a>; <span class="comment">/* Incremented on change master */</span></div><div class="line"><a name="l00833"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a879ad96cea28534fcbe1c6e61b1a492e">  833</a></span>&#160;  <a class="code" href="structmysql__mutex__t.html">mysql_mutex_t</a> <a class="code" href="classRelay__log__info.html#a879ad96cea28534fcbe1c6e61b1a492e">log_space_lock</a>;</div><div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a1071e0704aa31e9550c22259931a76e7">  834</a></span>&#160;  <a class="code" href="structmysql__cond__t.html">mysql_cond_t</a> <a class="code" href="classRelay__log__info.html#a1071e0704aa31e9550c22259931a76e7">log_space_cond</a>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">     Condition and its parameters from START SLAVE UNTIL clause.</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">     UNTIL condition is tested with is_until_satisfied() method that is</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">     called by exec_relay_log_event(). is_until_satisfied() caches the result</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">     of the comparison of log names because log names don&#39;t change very often;</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment">     this cache is invalidated by parts of code which change log names with</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">     notify_*_log_name_updated() methods. (They need to be called only if SQL</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">     thread is running).</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keyword">enum</span> {</div><div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa27fecf4fa950725651bbd9aae8deaebc">  847</a></span>&#160;    UNTIL_NONE = 0,</div><div class="line"><a name="l00848"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa22c1615fb1c73dd3ccaeede60f5c84ed">  848</a></span>&#160;    <a class="code" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa22c1615fb1c73dd3ccaeede60f5c84ed">UNTIL_MASTER_POS</a>,</div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aaec02ecb2b8d310e7777d61bc4dd9ad74">  849</a></span>&#160;    <a class="code" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aaec02ecb2b8d310e7777d61bc4dd9ad74">UNTIL_RELAY_POS</a>,</div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa7bdd8cac7b691b770a4596ac1dfa66c3">  850</a></span>&#160;    <a class="code" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa7bdd8cac7b691b770a4596ac1dfa66c3">UNTIL_SQL_BEFORE_GTIDS</a>,</div><div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa8c0e9a19c1b528688d96417fbd14cd26">  851</a></span>&#160;    <a class="code" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa8c0e9a19c1b528688d96417fbd14cd26">UNTIL_SQL_AFTER_GTIDS</a>,</div><div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa9900639c86aba35effe50342885799d2">  852</a></span>&#160;    <a class="code" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa9900639c86aba35effe50342885799d2">UNTIL_SQL_AFTER_MTS_GAPS</a>,</div><div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa011530204617f6ee11b00009567bf900">  853</a></span>&#160;    <a class="code" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa011530204617f6ee11b00009567bf900">UNTIL_SQL_VIEW_ID</a>,</div><div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aae620a77083640d73aa5460a0545a875c">  854</a></span>&#160;    UNTIL_DONE</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  } until_condition;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a09d882fa76f973f2f1fbbaa54591ba6a">  857</a></span>&#160;  <span class="keywordtype">char</span> cached_charset[6];</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">    trans_retries varies between 0 to slave_transaction_retries and counts how</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">    many times the slave has retried the present transaction; gets reset to 0</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">    when the transaction finally succeeds. retried_trans is a cumulative</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">    counter: how many times the slave has retried a transaction (any) since</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">    slave started.</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a40e9c968385774492b3be06a7e9ddf5e">  866</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#a40e9c968385774492b3be06a7e9ddf5e">trans_retries</a>, retried_trans;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">    If the end of the hot relay log is made of master&#39;s events ignored by the</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">    slave I/O thread, these two keep track of the coords (in the master&#39;s</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">    binlog) of the last of these events seen by the slave I/O thread. If not,</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">    ign_master_log_name_end[0] == 0.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">    As they are like a Rotate event read/written from/to the relay log, they</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">    are both protected by rli-&gt;relay_log.LOCK_binlog_end_pos.</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00876"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a33453c86931cbd5f409b89fdb8325be2">  876</a></span>&#160;  <span class="keywordtype">char</span> ign_master_log_name_end[<a class="code" href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a>];</div><div class="line"><a name="l00877"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a39e125483b40b8a6d8a3fbf49a431582">  877</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a39e125483b40b8a6d8a3fbf49a431582">ign_master_log_pos_end</a>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">    Indentifies where the SQL Thread should create temporary files for the</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">    LOAD DATA INFILE. This is used for security reasons.</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad59dffb0eae5b9eeb2e116a811eb696e">  883</a></span>&#160;  <span class="keywordtype">char</span> slave_patternload_file[<a class="code" href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a>];</div><div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a327da5ee7ada2691232c88b7d461a0e3">  884</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classRelay__log__info.html#a327da5ee7ada2691232c88b7d461a0e3">slave_patternload_file_size</a>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">    Identifies the last time a checkpoint routine has been executed.</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2a6610b50302ab38599e82bda93c53ce">  889</a></span>&#160;  <span class="keyword">struct </span>timespec last_clock;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">    Invalidates cached until_log_name and event_relay_log_name comparison</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">    result. Should be called after switch to next relay log if</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">    there chances that sql_thread is running.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00896"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a1a80eca19c927d940b8058b9010e49de">  896</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a1a80eca19c927d940b8058b9010e49de">notify_relay_log_change</a>() {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (until_condition == UNTIL_RELAY_POS)</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classUntil__position.html">Until_position</a> *<span class="keyword">&gt;</span>(until_option)-&gt;notify_log_name_change();</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">     Receiver thread notifies that it truncated some data from relay log.</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">     data_lock will be acquired, so the caller should not hold data_lock.</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordtype">void</span> notify_relay_log_truncated();<span class="comment"></span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">     Applier clears the flag after it handled the situation. The caller must</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">     hold data_lock.</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordtype">void</span> clear_relay_log_truncated();</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">    The same as @c notify_group_relay_log_name_update but for</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">    @c group_master_log_name.</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8b38e96443b2adc87210a39ac7b831a8">  916</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a8b38e96443b2adc87210a39ac7b831a8">notify_group_master_log_name_update</a>() {</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">if</span> (until_condition == UNTIL_MASTER_POS)</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classUntil__position.html">Until_position</a> *<span class="keyword">&gt;</span>(until_option)-&gt;notify_log_name_change();</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ac9022af7ebf7fd6cdcdf492a94683c7a">  921</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#ac9022af7ebf7fd6cdcdf492a94683c7a">inc_event_relay_log_pos</a>() {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    event_relay_log_pos = future_event_relay_log_pos;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">    Last executed event group coordinates are updated and optionally</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">    forcibly flushed to a repository.</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">    @param log_pos         a value of the executed position to update to</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">    @param need_data_lock  whether data_lock should be acquired</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">    @param force           the value is passed to eventual flush_info()</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordtype">int</span> inc_group_relay_log_pos(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> log_pos, <span class="keywordtype">bool</span> need_data_lock,</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                              <span class="keywordtype">bool</span> force = <span class="keyword">false</span>);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordtype">int</span> wait_for_pos(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classString.html">String</a> *log_name, <a class="code" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> log_pos,</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                   <span class="keywordtype">double</span> timeout);<span class="comment"></span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">    Wait for a GTID set to be executed.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">    @param thd                 The thread for status changes and kill status</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">    @param gtid                A char array with a GTID set</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">    @param timeout             Number of seconds to wait before timing out</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">    @param update_THD_status  Shall the method update the THD stage</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">    @retval 0  The set is already executed</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">    @retval -1 There was a timeout waiting for the set</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">    @retval -2 There was an issue while waiting.</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordtype">int</span> wait_for_gtid_set(<a class="code" href="classTHD.html">THD</a> *thd, <span class="keyword">const</span> <span class="keywordtype">char</span> *gtid, <span class="keywordtype">double</span> timeout,</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                        <span class="keywordtype">bool</span> update_THD_status = <span class="keyword">true</span>);<span class="comment"></span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">    Wait for a GTID set to be executed.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">    @param thd                 The thread for status changes and kill status</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">    @param gtid                A String with a GTID set</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">    @param timeout             Number of seconds to wait before timing out</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">    @param update_THD_status  Shall the method update the THD stage</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">    @retval 0  The set is already executed</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">    @retval -1 There was a timeout waiting for the set</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">    @retval -2 There was an issue while waiting.</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="keywordtype">int</span> wait_for_gtid_set(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classString.html">String</a> *gtid, <span class="keywordtype">double</span> timeout,</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                        <span class="keywordtype">bool</span> update_THD_status = <span class="keyword">true</span>);<span class="comment"></span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">    Wait for a GTID set to be executed.</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">    @param thd                 The thread for status changes and kill status</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">    @param wait_gtid_set       A GTID_set object</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment">    @param timeout             Number of seconds to wait before timing out</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">    @param update_THD_status   Shall the method update the THD stage</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">    @retval 0  The set is already executed</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">    @retval -1 There was a timeout waiting for the set</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">    @retval -2 There was an issue while waiting.</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordtype">int</span> wait_for_gtid_set(<a class="code" href="classTHD.html">THD</a> *thd, <span class="keyword">const</span> <a class="code" href="classGtid__set.html">Gtid_set</a> *wait_gtid_set, <span class="keywordtype">double</span> timeout,</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                        <span class="keywordtype">bool</span> update_THD_status = <span class="keyword">true</span>);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="group__Data__Dictionary.html#gaa4991367acddcb2b2a0edeb169029917">close_temporary_tables</a>();</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#adc2326e9be6c8e691e0ccc01a4f24a96">  982</a></span>&#160;  <a class="code" href="structRPL__TABLE__LIST.html">RPL_TABLE_LIST</a> *<a class="code" href="classRelay__log__info.html#adc2326e9be6c8e691e0ccc01a4f24a96">tables_to_lock</a>; <span class="comment">/* RBR: Tables to lock  */</span></div><div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a63bb6d3c259c2adc63e3886478951717">  983</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classRelay__log__info.html#a63bb6d3c259c2adc63e3886478951717">tables_to_lock_count</a>;      <span class="comment">/* RBR: Count of tables to lock */</span></div><div class="line"><a name="l00984"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a23dbc6aff700428d743d8413794bb93e">  984</a></span>&#160;  <a class="code" href="classtable__mapping.html">table_mapping</a> <a class="code" href="classRelay__log__info.html#a23dbc6aff700428d743d8413794bb93e">m_table_map</a>;      <span class="comment">/* RBR: Mapping table-id to table */</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">/* RBR: Record Rows_query log event */</span></div><div class="line"><a name="l00986"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a18cf6e5f7f2d3c1f2cf96fbcf850b9ab">  986</a></span>&#160;  <a class="code" href="classRows__query__log__event.html">Rows_query_log_event</a> *<a class="code" href="classRelay__log__info.html#a18cf6e5f7f2d3c1f2cf96fbcf850b9ab">rows_query_ev</a>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af8ef0f185cd38150141f293bcc9b4e70">  988</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#af8ef0f185cd38150141f293bcc9b4e70">get_table_data</a>(<a class="code" href="structTABLE.html">TABLE</a> *table_arg, <a class="code" href="classtable__def.html">table_def</a> **tabledef_var,</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                      <a class="code" href="structTABLE.html">TABLE</a> **conv_table_var)<span class="keyword"> const </span>{</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(tabledef_var &amp;&amp; conv_table_var);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structTABLE__LIST.html">TABLE_LIST</a> *ptr = tables_to_lock; ptr != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;         ptr = ptr-&gt;<a class="code" href="structTABLE__LIST.html#a8e3206715feef5e95f8d2c3c3f324fa6">next_global</a>)</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">if</span> (ptr-&gt;table == table_arg) {</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        *tabledef_var = &amp;<span class="keyword">static_cast&lt;</span><a class="code" href="structRPL__TABLE__LIST.html">RPL_TABLE_LIST</a> *<span class="keyword">&gt;</span>(ptr)-&gt;m_tabledef;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        *conv_table_var = <span class="keyword">static_cast&lt;</span><a class="code" href="structRPL__TABLE__LIST.html">RPL_TABLE_LIST</a> *<span class="keyword">&gt;</span>(ptr)-&gt;m_conv_table;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <a class="code" href="my__dbug_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;debug&quot;</span>, (<span class="stringliteral">&quot;Fetching table data for table %s.%s:&quot;</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                             <span class="stringliteral">&quot; tabledef: %p, conv_table: %p&quot;</span>,</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                             table_arg-&gt;<a class="code" href="structTABLE.html#aebc263efffc909babcfb7671ed0fbd1a">s</a>-&gt;<a class="code" href="structTABLE__SHARE.html#ae85eaeb39e37dc9d5c6d789fe84bc6f4">db</a>.<a class="code" href="structMYSQL__LEX__CSTRING.html#a8ec5bb16b4275a6809163e00592b105d">str</a>, table_arg-&gt;<a class="code" href="structTABLE.html#aebc263efffc909babcfb7671ed0fbd1a">s</a>-&gt;<a class="code" href="structTABLE__SHARE.html#a5dbe3202ca4426417b41aac3ac536529">table_name</a>.<a class="code" href="structMYSQL__LEX__CSTRING.html#a8ec5bb16b4275a6809163e00592b105d">str</a>,</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                             *tabledef_var, *conv_table_var));</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">    Last charset (6 bytes) seen by slave SQL thread is cached here; it helps</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">    the thread save 3 @c get_charset() per @c Query_log_event if the charset is</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">    not changing from event to event (common situation). When the 6 bytes are</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">    equal to 0 is used to mean &quot;cache is invalidated&quot;.</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordtype">void</span> cached_charset_invalidate();</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordtype">bool</span> cached_charset_compare(<span class="keywordtype">char</span> *<a class="code" href="namespaceudf__ext_1_1consts.html#a6ddd3738c569a0bf58c9fab6a56731df">charset</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordtype">void</span> cleanup_context(<a class="code" href="classTHD.html">THD</a> *, <span class="keywordtype">bool</span>);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordtype">void</span> slave_close_thread_tables(<a class="code" href="classTHD.html">THD</a> *);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordtype">void</span> clear_tables_to_lock();</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordtype">int</span> purge_relay_logs(<a class="code" href="classTHD.html">THD</a> *thd, <span class="keyword">const</span> <span class="keywordtype">char</span> **errmsg, <span class="keywordtype">bool</span> delete_only = <span class="keyword">false</span>);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">    Used to defer stopping the SQL thread to give it a chance</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">    to finish up the current group of events.</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">    The timestamp is set and reset in @c sql_slave_killed().</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01024"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad008be98e874b09908d1db5dd24afc12"> 1024</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#ad008be98e874b09908d1db5dd24afc12">last_event_start_time</a>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">/* The original master commit timestamp in microseconds since epoch */</span></div><div class="line"><a name="l01027"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a4e3253f3c9964e419e4047669806f12b"> 1027</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a> <a class="code" href="classRelay__log__info.html#a4e3253f3c9964e419e4047669806f12b">original_commit_timestamp</a>;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">    A container to hold on Intvar-, Rand-, Uservar- log-events in case</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">    the slave is configured with table filtering rules.</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">    The withhold events are executed when their parent Query destiny is</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">    determined for execution as well.</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01035"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a663b8408cbe5d4c4835a8d5056ecf0ab"> 1035</a></span>&#160;  <a class="code" href="classDeferred__log__events.html">Deferred_log_events</a> *<a class="code" href="classRelay__log__info.html#a663b8408cbe5d4c4835a8d5056ecf0ab">deferred_events</a>;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">    State of the container: true stands for IRU events gathering,</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">    false does for execution, either deferred or direct.</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01041"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad8996d82e9017c6c40237e7fa3744711"> 1041</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#ad8996d82e9017c6c40237e7fa3744711">deferred_events_collecting</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">    WL#5569 MTS</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">    legends:</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">    C  - Coordinator;</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">    W  - Worker;</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">    WQ - Worker Queue containing event assignments</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="comment">// number&#39;s is determined by global slave_parallel_workers</span></div><div class="line"><a name="l01052"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae7b85681986de5005ba80f84a92945cb"> 1052</a></span>&#160;  <a class="code" href="classPrealloced__array.html">Slave_worker_array</a> <a class="code" href="classRelay__log__info.html#ae7b85681986de5005ba80f84a92945cb">workers</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="comment">// To map a database to a worker</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <a class="code" href="classmalloc__unordered__map.html">malloc_unordered_map</a>&lt;std::string,</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                       <a class="code" href="map__helpers_8h.html#ac5c7588aa44624cedfdccdc91d806a73">unique_ptr_with_deleter&lt;db_worker_hash_entry&gt;</a>&gt;</div><div class="line"><a name="l01057"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#adbbebd1669e7e3a00253afa38548175a"> 1057</a></span>&#160;      mapping_db_to_worker{<a class="code" href="psi__memory__key_8cc.html#a1e5e918cac2cef2fecaf965b06b93fe8">key_memory_db_worker_hash_entry</a>};</div><div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2d1a2186486bb188c869ac2ee62bfc6b"> 1058</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a2d1a2186486bb188c869ac2ee62bfc6b">inited_hash_workers</a>;  <span class="comment">//  flag to check if mapping_db_to_worker is inited</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a54e97ea210c1eebda090b14ad21e76ef"> 1060</a></span>&#160;  <a class="code" href="structmysql__mutex__t.html">mysql_mutex_t</a> <a class="code" href="classRelay__log__info.html#a54e97ea210c1eebda090b14ad21e76ef">slave_worker_hash_lock</a>;  <span class="comment">// for mapping_db_to_worker</span></div><div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af5a9fc7cface91d34f721ad0a680646a"> 1061</a></span>&#160;  <a class="code" href="structmysql__cond__t.html">mysql_cond_t</a> <a class="code" href="classRelay__log__info.html#af5a9fc7cface91d34f721ad0a680646a">slave_worker_hash_cond</a>;   <span class="comment">// for mapping_db_to_worker</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">    For the purpose of reporting the worker status in performance schema table,</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">    we need to preserve the workers array after worker thread was killed. So, we</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">    copy this array into the below vector which is used for reporting</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">    until next init_workers(). Note that we only copy those attributes that</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">    would be useful in reporting worker status. We only use a few attributes in</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">    this object as of now but still save the whole object. The idea is</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">    to be future proof. We will extend performance schema tables in future</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">    and then we would use a good number of attributes from this object.</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a4f2e2cf31c3781ff66835a2dcda4d782"> 1074</a></span>&#160;  std::vector&lt;Slave_worker *&gt; <a class="code" href="classRelay__log__info.html#a4f2e2cf31c3781ff66835a2dcda4d782">workers_copy_pfs</a>;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">    This flag is turned ON when the workers array is initialized.</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">    Before destroying the workers array we check this flag to make sure</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">    we are not destroying an unitilized array. For the purpose of reporting the</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">    worker status in performance schema table, we need to preserve the workers</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">    array after worker thread was killed. So, we copy this array into</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">    workers_copy_pfs array which is used for reporting until next</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">    init_workers().</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a71b987189f94882b9c287f5df3329d43"> 1085</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a71b987189f94882b9c287f5df3329d43">workers_array_initialized</a>;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a1ba08799477aab79a09dec7e9d9f2f66"> 1087</a></span>&#160;  <span class="keyword">volatile</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#a1ba08799477aab79a09dec7e9d9f2f66">pending_jobs</a>;</div><div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2c39c01240d28e03760b9cc50ad3cf5f"> 1088</a></span>&#160;  <a class="code" href="structmysql__mutex__t.html">mysql_mutex_t</a> <a class="code" href="classRelay__log__info.html#a2c39c01240d28e03760b9cc50ad3cf5f">pending_jobs_lock</a>;</div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a4e67525d3c6c2f5fb369601e25e9c6ec"> 1089</a></span>&#160;  <a class="code" href="structmysql__cond__t.html">mysql_cond_t</a> <a class="code" href="classRelay__log__info.html#a4e67525d3c6c2f5fb369601e25e9c6ec">pending_jobs_cond</a>;</div><div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#acbf96584fe2d6bb130e76953041d24e3"> 1090</a></span>&#160;  <a class="code" href="structmysql__mutex__t.html">mysql_mutex_t</a> <a class="code" href="classRelay__log__info.html#acbf96584fe2d6bb130e76953041d24e3">exit_count_lock</a>;  <span class="comment">// mutex of worker exit count</span></div><div class="line"><a name="l01091"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a23ee3506dd58a3812d0601ff83680567"> 1091</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#a23ee3506dd58a3812d0601ff83680567">mts_slave_worker_queue_len_max</a>;</div><div class="line"><a name="l01092"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad1d0853d8f0b0e9bd036456c26816897"> 1092</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#ad1d0853d8f0b0e9bd036456c26816897">mts_pending_jobs_size</a>;      <span class="comment">// actual mem usage by WQ:s</span></div><div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af8d21621e68c8c66fb6851423a5befa2"> 1093</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#af8d21621e68c8c66fb6851423a5befa2">mts_pending_jobs_size_max</a>;  <span class="comment">// max of WQ:s size forcing C to wait</span></div><div class="line"><a name="l01094"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a75a9e8eeaf9a85ebe68b28bbfcc2cb1c"> 1094</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a75a9e8eeaf9a85ebe68b28bbfcc2cb1c">mts_wq_oversize</a>;  <span class="comment">// C raises flag to wait some memory&#39;s released</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <a class="code" href="classSlave__worker.html">Slave_worker</a></div><div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af66097d972b7e3696f87ce6dd28d24f9"> 1096</a></span>&#160;      *<a class="code" href="classRelay__log__info.html#af66097d972b7e3696f87ce6dd28d24f9">last_assigned_worker</a>;  <span class="comment">// is set to a Worker at assigning a group</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">    master-binlog ordered queue of Slave_job_group descriptors of groups</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">    that are under processing. The queue size is @c checkpoint_group.</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01101"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a90a2750ad4d1fd8fd8c1d0941c2693dc"> 1101</a></span>&#160;  <a class="code" href="classSlave__committed__queue.html">Slave_committed_queue</a> *<a class="code" href="classRelay__log__info.html#a90a2750ad4d1fd8fd8c1d0941c2693dc">gaq</a>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">    Container for references of involved partitions for the current event group</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="comment">// CGAP dynarray holds id:s of partitions of the Current being executed Group</span></div><div class="line"><a name="l01106"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a394a3645c5158da7821527730b3fa1dc"> 1106</a></span>&#160;  <a class="code" href="classPrealloced__array.html">Prealloced_array&lt;db_worker_hash_entry *, 4&gt;</a> <a class="code" href="classRelay__log__info.html#a394a3645c5158da7821527730b3fa1dc">curr_group_assigned_parts</a>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// deferred array to hold partition-info-free events</span></div><div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a05ea3944a957a7ed3f970442cfb4ebc6"> 1108</a></span>&#160;  <a class="code" href="classPrealloced__array.html">Prealloced_array&lt;Slave_job_item, 8&gt;</a> <a class="code" href="classRelay__log__info.html#a05ea3944a957a7ed3f970442cfb4ebc6">curr_group_da</a>;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2015f13a3db6c6a141e4bedf9acc6fb6"> 1110</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a2015f13a3db6c6a141e4bedf9acc6fb6">curr_group_seen_gtid</a>;   <span class="comment">// current group started with Gtid-event or not</span></div><div class="line"><a name="l01111"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a003fc0f1dd4d8c31ec8206e75be296fb"> 1111</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a003fc0f1dd4d8c31ec8206e75be296fb">curr_group_seen_begin</a>;  <span class="comment">// current group started with B-event or not</span></div><div class="line"><a name="l01112"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a81871a0c188dc19ab3b6a88389b7a561"> 1112</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a81871a0c188dc19ab3b6a88389b7a561">curr_group_isolated</a>;    <span class="comment">// current group requires execution in isolation</span></div><div class="line"><a name="l01113"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af3d64d528e0e39a8cbbc406590e60a72"> 1113</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#af3d64d528e0e39a8cbbc406590e60a72">mts_end_group_sets_max_dbs</a>;  <span class="comment">// flag indicates if partitioning info is</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                                    <span class="comment">// discovered</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="keyword">volatile</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a></div><div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a5b89dfc26a74c0fc0888948b38be5893"> 1116</a></span>&#160;      <a class="code" href="classRelay__log__info.html#a5b89dfc26a74c0fc0888948b38be5893">mts_wq_underrun_w_id</a>;  <span class="comment">// Id of a Worker whose queue is getting empty</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">     Ongoing excessive overrun counter to correspond to number of events that</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">     are being scheduled while a WQ is close to be filled up.</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">     `Close&#39; is defined as (100 - mts_worker_underrun_level) %.</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">     The counter is incremented each time a WQ get filled over that level</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">     and decremented when the level drops below.</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">     The counter therefore describes level of saturation that Workers</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">     are experiencing and is used as a parameter to compute a nap time for</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">     Coordinator in order to avoid reaching WQ limits.</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01127"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a1e42ba28e35b35f852129277ad2310a6"> 1127</a></span>&#160;  <span class="keyword">volatile</span> <span class="keywordtype">long</span> <a class="code" href="classRelay__log__info.html#a1e42ba28e35b35f852129277ad2310a6">mts_wq_excess_cnt</a>;</div><div class="line"><a name="l01128"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa1465e6e9f69406bd28330548d46b5e6"> 1128</a></span>&#160;  <span class="keywordtype">long</span> <a class="code" href="classRelay__log__info.html#aa1465e6e9f69406bd28330548d46b5e6">mts_worker_underrun_level</a>;    <span class="comment">// % of WQ size at which W is considered</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                                     <span class="comment">// hungry</span></div><div class="line"><a name="l01130"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a304cdfb16d97ae3148a4f0be59e55883"> 1130</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#a304cdfb16d97ae3148a4f0be59e55883">mts_coordinator_basic_nap</a>;   <span class="comment">// C sleeps to avoid WQs overrun</span></div><div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae67a40918ed5af5463e43fc3cbac3248"> 1131</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#ae67a40918ed5af5463e43fc3cbac3248">opt_slave_parallel_workers</a>;  <span class="comment">// cache for ::opt_slave_parallel_workers</span></div><div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aaebd1027e22891f20b73ee1553b641f6"> 1132</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#aaebd1027e22891f20b73ee1553b641f6">slave_parallel_workers</a>;  <span class="comment">// the one slave session time number of workers</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a></div><div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a5524feabb3d2102a396b4e308dbcc3eb"> 1134</a></span>&#160;      <a class="code" href="classRelay__log__info.html#a5524feabb3d2102a396b4e308dbcc3eb">exit_counter</a>;  <span class="comment">// Number of workers contributed to max updated group index</span></div><div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a18b91a34e702cace64bc95f30bf3a5f5"> 1135</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a18b91a34e702cace64bc95f30bf3a5f5">max_updated_index</a>;</div><div class="line"><a name="l01136"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af8172590d5f51906f8f5edee3f163f4a"> 1136</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#af8172590d5f51906f8f5edee3f163f4a">recovery_parallel_workers</a>;  <span class="comment">// number of workers while recovering</span></div><div class="line"><a name="l01137"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9c95b156684685e1c95c2f9f50657407"> 1137</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classRelay__log__info.html#a9c95b156684685e1c95c2f9f50657407">rli_checkpoint_seqno</a>;        <span class="comment">// counter of groups executed after the most</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                                    <span class="comment">// recent CP</span></div><div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a02bba2ccb2b53d74f5b66f8f9999f9c6"> 1139</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classRelay__log__info.html#a02bba2ccb2b53d74f5b66f8f9999f9c6">checkpoint_group</a>;            <span class="comment">// cache for ::opt_mts_checkpoint_group</span></div><div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a22bbe2a79ab591ad190b46f463999f8f"> 1140</a></span>&#160;  <a class="code" href="structMY__BITMAP.html">MY_BITMAP</a> <a class="code" href="classRelay__log__info.html#a22bbe2a79ab591ad190b46f463999f8f">recovery_groups</a>;        <span class="comment">// bitmap used during recovery</span></div><div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a33483057036d96ba0b3988b8bfa4b140"> 1141</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a33483057036d96ba0b3988b8bfa4b140">recovery_groups_inited</a>;</div><div class="line"><a name="l01142"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a7944b964e17da951bd50aa65963f282e"> 1142</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#a7944b964e17da951bd50aa65963f282e">mts_recovery_group_cnt</a>;  <span class="comment">// number of groups to execute at recovery</span></div><div class="line"><a name="l01143"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad73aa78214cc6b08f3edf7404b343378"> 1143</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#ad73aa78214cc6b08f3edf7404b343378">mts_recovery_index</a>;      <span class="comment">// running index of recoverable groups</span></div><div class="line"><a name="l01144"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a6610eb6c3f1e668cf82031f6d4a14e25"> 1144</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a6610eb6c3f1e668cf82031f6d4a14e25">mts_recovery_group_seen_begin</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">    While distibuting events basing on their properties MTS</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">    Coordinator changes its mts group status.</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">    Transition normally flowws to follow `=&gt;&#39; arrows on the diagram:</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">            +----------------------------+</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">            V                            |</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">    MTS_NOT_IN_GROUP =&gt;                  |</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">        {MTS_IN_GROUP =&gt; MTS_END_GROUP --+} while (!killed) =&gt; MTS_KILLED_GROUP</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">    MTS_END_GROUP has `-&gt;&#39; loop breaking link to MTS_NOT_IN_GROUP when</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">    Coordinator synchronizes with Workers by demanding them to</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">    complete their assignments.</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keyword">enum</span> {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">       no new events were scheduled after last synchronization,</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">       includes Single-Threaded-Slave case.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01165"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba0e10909319913fc4db783f22ef314321"> 1165</a></span>&#160;    <a class="code" href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba0e10909319913fc4db783f22ef314321">MTS_NOT_IN_GROUP</a>,</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba5b49c439efca9c3d8962c4dea71f6111"> 1167</a></span>&#160;    <a class="code" href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba5b49c439efca9c3d8962c4dea71f6111">MTS_IN_GROUP</a>,    <span class="comment">/* at least one not-terminal event scheduled to a Worker */</span></div><div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba9542e4aa79b0e44743acde0e70211a06"> 1168</a></span>&#160;    <a class="code" href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba9542e4aa79b0e44743acde0e70211a06">MTS_END_GROUP</a>,   <span class="comment">/* the last scheduled event is a terminal event */</span></div><div class="line"><a name="l01169"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba03fd3faab747c3c5581c7dead2531600"> 1169</a></span>&#160;    MTS_KILLED_GROUP <span class="comment">/* Coordinator gave up to reach MTS_END_GROUP */</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  } mts_group_status;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">    MTS statistics:</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01175"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a085cce31f46960cf03b458e908f55e1a"> 1175</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a085cce31f46960cf03b458e908f55e1a">mts_events_assigned</a>;  <span class="comment">// number of events (statements) scheduled</span></div><div class="line"><a name="l01176"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a25df544328cae076f070b8a133cf35e8"> 1176</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a25df544328cae076f070b8a133cf35e8">mts_groups_assigned</a>;  <span class="comment">// number of groups (transactions) scheduled</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keyword">volatile</span> <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a></div><div class="line"><a name="l01178"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a50adac4e8fcd877976d35b3f3fb805dd"> 1178</a></span>&#160;      <a class="code" href="classRelay__log__info.html#a50adac4e8fcd877976d35b3f3fb805dd">mts_wq_overrun_cnt</a>;   <span class="comment">// counter of all mts_wq_excess_cnt increments</span></div><div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a0f7b5f06f937ae5c40eff00d3167eb10"> 1179</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#a0f7b5f06f937ae5c40eff00d3167eb10">wq_size_waits_cnt</a>;  <span class="comment">// number of times C slept due to WQ:s oversize</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">    Counter of how many times Coordinator saw Workers are filled up</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">    &quot;enough&quot; with assignements. The enough definition depends on</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">    the scheduler type.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01185"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a21ece0de1d3523ea5d5624cafa21539d"> 1185</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#a21ece0de1d3523ea5d5624cafa21539d">mts_wq_no_underrun_cnt</a>;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  std::atomic&lt;longlong&gt;</div><div class="line"><a name="l01187"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a36f7927bcf2fc2dda820bad73e6e5856"> 1187</a></span>&#160;      <a class="code" href="classRelay__log__info.html#a36f7927bcf2fc2dda820bad73e6e5856">mts_total_wait_overlap</a>;  <span class="comment">// Waiting time corresponding to above</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">    Stats to compute Coordinator waiting time for any Worker available,</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">    applies solely to the Commit-clock scheduler.</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01192"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a706a05a7c2f15a1fb5e7c47732718d49"> 1192</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a706a05a7c2f15a1fb5e7c47732718d49">mts_total_wait_worker_avail</a>;</div><div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a802b06a9de3faf9576674f71feb7271f"> 1193</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="classRelay__log__info.html#a802b06a9de3faf9576674f71feb7271f">mts_wq_overfill_cnt</a>;  <span class="comment">// counter of C waited due to a WQ queue was full</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">    Statistics (todo: replace with WL5631) applies to either Coordinator and</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">    Worker. The exec time in the Coordinator case means scheduling. The read</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">    time in the Worker case means getting an event out of Worker queue</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01199"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a5abed3ac1587b04f6c276a37e10345c1"> 1199</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a5abed3ac1587b04f6c276a37e10345c1">stats_exec_time</a>;</div><div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a93c5e43899923697e566fe7249e7b082"> 1200</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a93c5e43899923697e566fe7249e7b082">stats_read_time</a>;</div><div class="line"><a name="l01201"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aea9166d4ac7a5afd4fd8403c22b87e42"> 1201</a></span>&#160;  <span class="keyword">struct </span>timespec ts_exec[2];   <span class="comment">// per event pre- and post- exec timestamp</span></div><div class="line"><a name="l01202"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#acbd1e546a4501429089ba85bc1b502c3"> 1202</a></span>&#160;  <span class="keyword">struct </span>timespec stats_begin;  <span class="comment">// applier&#39;s bootstrap time</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">     A sorted array of the Workers&#39; current assignement numbers to provide</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">     approximate view on Workers loading.</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">     The first row of the least occupied Worker is queried at assigning</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">     a new partition. Is updated at checkpoint commit to the main RLI.</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01210"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af1ce47018282180ce343dd487402446c"> 1210</a></span>&#160;  <a class="code" href="classPrealloced__array.html">Prealloced_array&lt;ulong, 16&gt;</a> <a class="code" href="classRelay__log__info.html#af1ce47018282180ce343dd487402446c">least_occupied_workers</a>;</div><div class="line"><a name="l01211"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8e6172455aa9667ddb5bc53ad8e737de"> 1211</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#a8e6172455aa9667ddb5bc53ad8e737de">mts_last_online_stat</a>;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">/* end of MTS statistics */</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">    Storage for holding newly computed values for the last executed</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">    event group coordinates while the current group of events is</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">    being committed, see @c pre_commit, post_commit.</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a86edf12a2006696f98063194f90bc6ca"> 1219</a></span>&#160;  <span class="keywordtype">char</span> new_group_master_log_name[<a class="code" href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a>];</div><div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a91a3634c215d02d908e589d00851e153"> 1220</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="code" href="classRelay__log__info.html#a91a3634c215d02d908e589d00851e153">new_group_master_log_pos</a>;</div><div class="line"><a name="l01221"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aefb42cd289f5196b4c0a73d6145c8ebd"> 1221</a></span>&#160;  <span class="keywordtype">char</span> new_group_relay_log_name[<a class="code" href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a>];</div><div class="line"><a name="l01222"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad432297d6c9834f9293ca824b3422eee"> 1222</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="code" href="classRelay__log__info.html#ad432297d6c9834f9293ca824b3422eee">new_group_relay_log_pos</a>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="comment">/* Returns the number of elements in workers array/vector. */</span></div><div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ab8af3ebafd8250455c908cf4a03920fa"> 1225</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="classRelay__log__info.html#ab8af3ebafd8250455c908cf4a03920fa">get_worker_count</a>() {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span> (workers_array_initialized)</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <span class="keywordflow">return</span> workers.<a class="code" href="classPrealloced__array.html#abe9bdf6bb8bca24028cbf148f2cd2bb2">size</a>();</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keywordflow">return</span> workers_copy_pfs.size();</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  }</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">    Returns a pointer to the worker instance at index n in workers</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment">    array/vector.</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01236"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9e7cbad5f7f6a45c21e26ac67403cf10"> 1236</a></span>&#160;  <a class="code" href="classSlave__worker.html">Slave_worker</a> *<a class="code" href="classRelay__log__info.html#a9e7cbad5f7f6a45c21e26ac67403cf10">get_worker</a>(<span class="keywordtype">size_t</span> <a class="code" href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">if</span> (workers_array_initialized) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="keywordflow">if</span> (n &gt;= workers.<a class="code" href="classPrealloced__array.html#abe9bdf6bb8bca24028cbf148f2cd2bb2">size</a>()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordflow">return</span> workers[<a class="code" href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>];</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (workers_copy_pfs.size()) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keywordflow">if</span> (n &gt;= workers_copy_pfs.size()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keywordflow">return</span> workers_copy_pfs[<a class="code" href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>];</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">    The method implements updating a slave info table. It&#39;s</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment">    specialized differently for STS and MTS.</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> commit_positions();</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="comment">/*Channel defined mts submode*/</span></div><div class="line"><a name="l01256"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af99718465f1f94df9c04b21183ea4324"> 1256</a></span>&#160;  <a class="code" href="rpl__mts__submode_8h.html#a959672287d6c22e4e95d1a1ad28bbe0b">enum_mts_parallel_type</a> <a class="code" href="classRelay__log__info.html#af99718465f1f94df9c04b21183ea4324">channel_mts_submode</a>;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="comment">/* MTS submode  */</span></div><div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8fd8c969c11e538879d1012aa2012b25"> 1258</a></span>&#160;  <a class="code" href="classMts__submode.html">Mts_submode</a> *<a class="code" href="classRelay__log__info.html#a8fd8c969c11e538879d1012aa2012b25">current_mts_submode</a>;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">/* most of allocation in the coordinator rli is there */</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordtype">void</span> init_workers(<a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="comment">/* counterpart of the init */</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordtype">void</span> deinit_workers();</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment">     returns true if there is any gap-group of events to execute</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">                  at slave starting phase.</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01270"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8a2b8efda6a02b8ba87c981f2e86bde1"> 1270</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a8a2b8efda6a02b8ba87c981f2e86bde1">is_mts_recovery</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mts_recovery_group_cnt != 0; }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a38b8fae8b4ea8d9f45d05382219ae3bb"> 1272</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a38b8fae8b4ea8d9f45d05382219ae3bb">clear_mts_recovery_groups</a>() {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">if</span> (recovery_groups_inited) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <a class="code" href="my__bitmap_8h.html#ae609821c8721ab0a983f16625af10a8b">bitmap_free</a>(&amp;recovery_groups);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      mts_recovery_group_cnt = 0;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      recovery_groups_inited = <span class="keyword">false</span>;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">     returns true if events are to be executed in parallel</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01283"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#adb9571ba13a628556e9d1cb86ebf9393"> 1283</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#adb9571ba13a628556e9d1cb86ebf9393">is_parallel_exec</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="keywordtype">bool</span> ret = (slave_parallel_workers &gt; 0) &amp;&amp; !is_mts_recovery();</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(!ret || !workers.<a class="code" href="classPrealloced__array.html#a36f6ec905889fc8fb57a946e23925f83">empty</a>());</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  }</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">     returns true if Coordinator is scheduling events belonging to</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment">     the same group and has not reached yet its terminal event.</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01295"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ada979f23838e56bf348c48b31fd23c1e"> 1295</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#ada979f23838e56bf348c48b31fd23c1e">is_mts_in_group</a>() {</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">return</span> is_parallel_exec() &amp;&amp; mts_group_status == MTS_IN_GROUP;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  }</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">     Check if it is time to compute MTS checkpoint.</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">     @retval true   It is time to compute MTS checkpoint.</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">     @retval false  It is not MTS or it is not time for computing checkpoint.</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="keywordtype">bool</span> is_time_for_mts_checkpoint();<span class="comment"></span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment">     While a group is executed by a Worker the relay log can change.</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment">     Coordinator notifies Workers about this event. Worker is supposed</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">     to commit to the recovery table with the new info.</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordtype">void</span> reset_notified_relay_log_change();</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment">     While a group is executed by a Worker the relay log can change.</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">     Coordinator notifies Workers about this event. Coordinator and Workers</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">     maintain a bitmap of executed group that is reset with a new checkpoint.</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="keywordtype">void</span> reset_notified_checkpoint(<a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> <a class="code" href="memcached_8c.html#a9e8f65e2f04446eb0a2f098411dacf9b">count</a>, time_t new_ts,</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                                 <span class="keywordtype">bool</span> <a class="code" href="sys__vars_8cc.html#ad68e20cca56e07a8bead6f9a10e2fc9f">update_timestamp</a> = <span class="keyword">false</span>);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">     Called when gaps execution is ended so it is crash-safe</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">     to reset the last session Workers info.</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="keywordtype">bool</span> mts_finalize_recovery();</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">   * End of MTS section ******************************************************/</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">/* The general cleanup that slave applier may need at the end of query. */</span></div><div class="line"><a name="l01330"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a3cc1aa64774cf98d03ec2495bb7cdb95"> 1330</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a3cc1aa64774cf98d03ec2495bb7cdb95">cleanup_after_query</a>() {</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">if</span> (deferred_events) deferred_events-&gt;<a class="code" href="classDeferred__log__events.html#a95030653e5a69ae402c20bd5e5c2c10c">rewind</a>();</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  }</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">/* The general cleanup that slave applier may need at the end of session. */</span></div><div class="line"><a name="l01334"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae54ea3c2cd3690bc0bc8b74eb2b75e48"> 1334</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#ae54ea3c2cd3690bc0bc8b74eb2b75e48">cleanup_after_session</a>() {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">if</span> (deferred_events) <span class="keyword">delete</span> deferred_events;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  }</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment">    Helper function to do after statement completion.</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">    This function is called from an event to complete the group by</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">    either stepping the group position, if the &quot;statement&quot; is not</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">    inside a transaction; or increase the event position, if the</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">    &quot;statement&quot; is inside a transaction.</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">    @param event_log_pos</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">    Master log position of the event. The position is recorded in the</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">    relay log info and used to produce information for &lt;code&gt;SHOW</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">    SLAVE STATUS&lt;/code&gt;.</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keywordtype">int</span> stmt_done(<a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> event_log_pos);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">     Set the value of a replication state flag.</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">     @param flag Flag to set</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01358"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a54a7597da74aeb539c944d54b16bf261"> 1358</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a54a7597da74aeb539c944d54b16bf261">set_flag</a>(<a class="code" href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2">enum_state_flag</a> <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>) { m_flags |= (1UL &lt;&lt; <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>); }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">     Get the value of a replication state flag.</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">     @param flag Flag to get value of</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">     @return @c true if the flag was set, @c false otherwise.</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01367"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ac43e0aa4092c8731d462502ca57e3a58"> 1367</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#ac43e0aa4092c8731d462502ca57e3a58">get_flag</a>(<a class="code" href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2">enum_state_flag</a> <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>) { <span class="keywordflow">return</span> m_flags &amp; (1UL &lt;&lt; <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>); }</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">     Clear the value of a replication state flag.</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">     @param flag Flag to clear</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01374"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a7fa497a605d2730224ade21a3344f15c"> 1374</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a7fa497a605d2730224ade21a3344f15c">clear_flag</a>(<a class="code" href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2">enum_state_flag</a> <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>) { m_flags &amp;= ~(1UL &lt;&lt; <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>); }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">    Auxiliary function used by is_in_group.</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">    The execute thread is in the middle of a statement in the</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">    following cases:</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">    - User_var/Intvar/Rand events have been processed, but the</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">      corresponding Query_log_event has not been processed.</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">    - Table_map or Row events have been processed, and the last Row</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">      event did not have the STMT_END_F set.</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment">    @retval true Replication thread is inside a statement.</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">    @retval false Replication thread is not inside a statement.</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01390"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a24b7931dde8fdf5aeda44407dfcb67d9"> 1390</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a24b7931dde8fdf5aeda44407dfcb67d9">is_in_stmt</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordtype">bool</span> ret = (m_flags &amp; (1UL &lt;&lt; IN_STMT));</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="my__dbug_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;info&quot;</span>, (<span class="stringliteral">&quot;is_in_stmt()=%d&quot;</span>, ret));</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  }<span class="comment"></span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">    Auxiliary function used by is_in_group.</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">    @retval true The execute thread is inside a statement or a</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">    transaction, i.e., either a BEGIN has been executed or we are in</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment">    the middle of a statement.</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment">    @retval false The execute thread thread is not inside a statement</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment">    or a transaction.</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01404"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a1b28b06ed566587ab0f01d5806854197"> 1404</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a1b28b06ed566587ab0f01d5806854197">is_in_trx_or_stmt</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordtype">bool</span> ret = is_in_stmt() || (info_thd-&gt;variables.option_bits &amp; <a class="code" href="query__options_8h.html#af3ef29bb91e9565fd2e313f2816b4355">OPTION_BEGIN</a>);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="my__dbug_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;info&quot;</span>, (<span class="stringliteral">&quot;is_in_trx_or_stmt()=%d&quot;</span>, ret));</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  }</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">    A group is defined as the entire range of events that constitute</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">    a transaction or auto-committed statement. It has one of the</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">    following forms:</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">    (Gtid)? Query(BEGIN) ... (Query(COMMIT) | Query(ROLLBACK) | Xid)</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">    (Gtid)? (Rand | User_var | Int_var)* Query(DDL)</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">    Thus, to check if the execute thread is in a group, there are</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">    two cases:</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">    - If the master generates Gtid events (5.7.5 or later, or 5.6 or</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">      later with GTID_MODE=ON), then is_in_group is the same as</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">      info_thd-&gt;owned_gtid.sidno != 0, since owned_gtid.sidno is set</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">      to non-zero by the Gtid_log_event and cleared to zero at commit</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">      or rollback.</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">    - If the master does not generate Gtid events (i.e., master is</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment">      pre-5.6, or pre-5.7.5 with GTID_MODE=OFF), then is_in_group is</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">      the same as is_in_trx_or_stmt().</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">    @retval true Replication thread is inside a group.</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">    @retval false Replication thread is not inside a group.</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01435"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a14b055b1320a2a7cd3f9c4a9df960092"> 1435</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a14b055b1320a2a7cd3f9c4a9df960092">is_in_group</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordtype">bool</span> ret = is_in_trx_or_stmt() || info_thd-&gt;owned_gtid.sidno != 0;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="my__dbug_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a>(<span class="stringliteral">&quot;info&quot;</span>, (<span class="stringliteral">&quot;is_in_group()=%d&quot;</span>, ret));</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  }</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="keywordtype">int</span> count_relay_log_space();</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment">    Initialize the relay log info. This function does a set of operations</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">    on the rli object like initializing variables, loading information from</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">    repository, setting up name for relay log files and index, MTS recovery</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">    (if necessary), calculating the received GTID set for the channel and</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">    storing the updated rli object configuration into the repository.</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">    When this function is called in a change master process and the change</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment">    master procedure will purge all the relay log files later, there is no</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">    reason to try to calculate the received GTID set of the channel based on</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">    existing relay log files (they will be purged). Allowing reads to existing</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment">    relay log files at this point may lead to put the server in a state where</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">    it will be no possible to configure it if it was reset when encryption of</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">    replication log files was ON and the keyring plugin is not available</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">    anymore.</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">    @param skip_received_gtid_set_recovery When true, skips the received GTID</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">                                           set recovery.</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">    @retval 0 Success.</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">    @retval 1 Error.</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="keywordtype">int</span> rli_init_info(<span class="keywordtype">bool</span> skip_received_gtid_set_recovery = <span class="keyword">false</span>);</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="group__Replication.html#ga411d10cab17cb44607461d77cc26f370">end_info</a>();</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="keywordtype">int</span> flush_info(<span class="keywordtype">bool</span> force = <span class="keyword">false</span>);<span class="comment"></span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment">   Clears from `this` Relay_log_info object all attribute values that are</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">   not to be kept.</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">   @returns true if there were a problem with clearing the data and false</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">            otherwise.</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="group__Replication.html#ga299ff83510191167c4a0b924658c5520">clear_info</a>();<span class="comment"></span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">   Checks if the underlying `Rpl_info` handler holds information for the fields</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">   to be kept between slave resets, while the other fields were cleared.</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">   @param previous_result the result return from invoking the `check_info`</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment">                          method on `this` object.</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="comment">   @returns function success state represented by the `enum_return_check`</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">            enumeration.</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <a class="code" href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a> check_if_info_was_cleared(</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keyword">const</span> <a class="code" href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a> &amp;previous_result) <span class="keyword">const</span>;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="keywordtype">int</span> flush_current_log();</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordtype">void</span> set_master_info(<a class="code" href="classMaster__info.html">Master_info</a> *<a class="code" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div><div class="line"><a name="l01491"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a848ec09d6b0b7f92467ba77a06f12e22"> 1491</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a848ec09d6b0b7f92467ba77a06f12e22">get_future_event_relay_log_pos</a>() {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">return</span> future_event_relay_log_pos;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  }</div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a810c03978cfab5184968a75cd2e98cf4"> 1494</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a810c03978cfab5184968a75cd2e98cf4">set_future_event_relay_log_pos</a>(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> log_pos) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    future_event_relay_log_pos = log_pos;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  }</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2bedd1496ce2b2f12bc9549612da39c1"> 1498</a></span>&#160;  <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classRelay__log__info.html#a2bedd1496ce2b2f12bc9549612da39c1">get_group_master_log_name</a>() {</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keywordflow">return</span> group_master_log_name;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  }</div><div class="line"><a name="l01501"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a29ea309de4fad4a3a8a7d32fbba04799"> 1501</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#a29ea309de4fad4a3a8a7d32fbba04799">get_group_master_log_pos</a>() { <span class="keywordflow">return</span> group_master_log_pos; }</div><div class="line"><a name="l01502"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a7f6eca9519fb6cf63ea08764f8f5ecb3"> 1502</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a7f6eca9519fb6cf63ea08764f8f5ecb3">set_group_master_log_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *log_file_name) {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <a class="code" href="m__string_8h.html#accb13dc1bbc754b77a9ecd9c3e832595">strmake</a>(group_master_log_name, log_file_name,</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            <span class="keyword">sizeof</span>(group_master_log_name) - 1);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  }</div><div class="line"><a name="l01506"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9efea5a95de42b86eccef1f403466f94"> 1506</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a9efea5a95de42b86eccef1f403466f94">set_group_master_log_pos</a>(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> log_pos) {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    group_master_log_pos = log_pos;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a558b6c2e5188bb6c8193ae58cf16b37b"> 1510</a></span>&#160;  <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classRelay__log__info.html#a558b6c2e5188bb6c8193ae58cf16b37b">get_group_relay_log_name</a>() { <span class="keywordflow">return</span> group_relay_log_name; }</div><div class="line"><a name="l01511"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa37efaa27105175aa1a8150ac99516ba"> 1511</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#aa37efaa27105175aa1a8150ac99516ba">get_group_relay_log_pos</a>() { <span class="keywordflow">return</span> group_relay_log_pos; }</div><div class="line"><a name="l01512"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad39832d845e98bda4155f53e46be43ce"> 1512</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#ad39832d845e98bda4155f53e46be43ce">set_group_relay_log_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *log_file_name) {</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <a class="code" href="m__string_8h.html#accb13dc1bbc754b77a9ecd9c3e832595">strmake</a>(group_relay_log_name, log_file_name,</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;            <span class="keyword">sizeof</span>(group_relay_log_name) - 1);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  }</div><div class="line"><a name="l01516"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa3cd0b41f9d6ebe001f1263e8a380256"> 1516</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#aa3cd0b41f9d6ebe001f1263e8a380256">set_group_relay_log_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *log_file_name, <span class="keywordtype">size_t</span> len) {</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <a class="code" href="m__string_8h.html#accb13dc1bbc754b77a9ecd9c3e832595">strmake</a>(group_relay_log_name, log_file_name, len);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  }</div><div class="line"><a name="l01519"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ab30d735a6743ed558d05951c652e3712"> 1519</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#ab30d735a6743ed558d05951c652e3712">set_group_relay_log_pos</a>(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> log_pos) {</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    group_relay_log_pos = log_pos;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  }</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af5c25a0d3d0e626411044867a4e66634"> 1523</a></span>&#160;  <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classRelay__log__info.html#af5c25a0d3d0e626411044867a4e66634">get_event_relay_log_name</a>() { <span class="keywordflow">return</span> event_relay_log_name; }</div><div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad013b8da0a5155399d46c0782a09bd2b"> 1524</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="classRelay__log__info.html#ad013b8da0a5155399d46c0782a09bd2b">get_event_relay_log_pos</a>() { <span class="keywordflow">return</span> event_relay_log_pos; }</div><div class="line"><a name="l01525"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af064a83db2cde40d72badef1bf24ac57"> 1525</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#af064a83db2cde40d72badef1bf24ac57">set_event_relay_log_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *log_file_name) {</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <a class="code" href="m__string_8h.html#accb13dc1bbc754b77a9ecd9c3e832595">strmake</a>(event_relay_log_name, log_file_name,</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            <span class="keyword">sizeof</span>(event_relay_log_name) - 1);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    set_event_relay_log_number(relay_log_name_to_number(log_file_name));</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    notify_relay_log_change();</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  }</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div><div class="line"><a name="l01532"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9d92d490a28f3eea58110f2bb29240b4"> 1532</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classRelay__log__info.html#a9d92d490a28f3eea58110f2bb29240b4">get_event_relay_log_number</a>() { <span class="keywordflow">return</span> event_relay_log_number; }</div><div class="line"><a name="l01533"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#afd826cfd193f05cae10230d6ddd5465a"> 1533</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#afd826cfd193f05cae10230d6ddd5465a">set_event_relay_log_number</a>(<a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> number) {</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    event_relay_log_number = number;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  }</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="comment">    Given the extension number of the relay log, gets the full</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<span class="comment">    relay log path. Currently used in Slave_worker::retry_transaction()</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="comment">    @param [in]   number      extension number of relay log</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="comment">    @param[in, out] name      The full path of the relay log (per-channel)</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="comment">                              to be read by the slave worker.</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordtype">void</span> relay_log_number_to_name(<a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> number, <span class="keywordtype">char</span> <a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>[<a class="code" href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a> + 1]);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> relay_log_name_to_number(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div><div class="line"><a name="l01548"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a130e6a5495f51e65e56c021e4d4d84b3"> 1548</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a130e6a5495f51e65e56c021e4d4d84b3">set_event_start_pos</a>(<a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="code" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>) { event_start_pos = <a class="code" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>; }</div><div class="line"><a name="l01549"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a5ff858faafd7ae5945b3ad537232ccee"> 1549</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> <a class="code" href="classRelay__log__info.html#a5ff858faafd7ae5945b3ad537232ccee">get_event_start_pos</a>() { <span class="keywordflow">return</span> event_start_pos; }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2e0827f3a4c6406bd8c7e7e354eb6509"> 1551</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a2e0827f3a4c6406bd8c7e7e354eb6509">set_event_relay_log_pos</a>(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> log_pos) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    event_relay_log_pos = log_pos;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  }</div><div class="line"><a name="l01554"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a5fc96f1bf742a918dd26500687509d04"> 1554</a></span>&#160;  <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classRelay__log__info.html#a5fc96f1bf742a918dd26500687509d04">get_rpl_log_name</a>() {</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">return</span> (group_master_log_name[0] ? group_master_log_name : <span class="stringliteral">&quot;FIRST&quot;</span>);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  }</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">size_t</span> get_number_info_rli_fields();</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment">     Sets bits for columns that are allowed to be `NULL`.</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="comment">     @param nullable_fields the bitmap to hold the nullable fields.</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> set_nullable_fields(<a class="code" href="structMY__BITMAP.html">MY_BITMAP</a> *nullable_fields);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">    Indicate that a delay starts.</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">    This does not actually sleep; it only sets the state of this</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">    Relay_log_info object to delaying so that the correct state can be</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment">    reported by SHOW SLAVE STATUS and SHOW PROCESSLIST.</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">    Requires rli-&gt;data_lock.</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">    @param delay_end The time when the delay shall end.</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="keywordtype">void</span> start_sql_delay(time_t delay_end);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="comment">/* Note that this is cast to uint32 in show_slave_status(). */</span></div><div class="line"><a name="l01581"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a37beeca009c8ec11415d6fdacc361077"> 1581</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#a37beeca009c8ec11415d6fdacc361077">get_sql_delay</a>() { <span class="keywordflow">return</span> sql_delay; }</div><div class="line"><a name="l01582"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a96d1c200de7032d415aed7945d6ac096"> 1582</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a96d1c200de7032d415aed7945d6ac096">set_sql_delay</a>(time_t _sql_delay) { sql_delay = _sql_delay; }</div><div class="line"><a name="l01583"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a852cdf695a4e254b55b845a10de0a137"> 1583</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#a852cdf695a4e254b55b845a10de0a137">get_sql_delay_end</a>() { <span class="keywordflow">return</span> sql_delay_end; }</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <a class="code" href="classRelay__log__info.html">Relay_log_info</a>(<span class="keywordtype">bool</span> is_slave_recovery,</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;#ifdef <a class="code" href="my__psi__config_8h.html#a4dc72985f1638094cd20040ad3a9539c">HAVE_PSI_INTERFACE</a></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                 <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> *param_key_info_run_lock,</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                 <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> *param_key_info_data_lock,</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                 <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> *param_key_info_sleep_lock,</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                 <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> *param_key_info_thd_lock,</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                 <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> *param_key_info_data_cond,</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                 <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> *param_key_info_start_cond,</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                 <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> *param_key_info_stop_cond,</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                 <a class="code" href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a> *param_key_info_sleep_cond,</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;#endif</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                 <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> param_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *param_channel, <span class="keywordtype">bool</span> is_rli_fake);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  ~<a class="code" href="classRelay__log__info.html">Relay_log_info</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment">    Determines if a warning message on unsafe execution was</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">    already printed out to avoid clutering the error log</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment">    with several warning messages.</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01604"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a4a7324db04d581524aabb99168198309"> 1604</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a4a7324db04d581524aabb99168198309">reported_unsafe_warning</a>;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">    &#39;sql_thread_kill_accepted is set to true when killed status is recognized.</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01609"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abfe3e935ab8e2acd38fb8fd9e6c93b55"> 1609</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#abfe3e935ab8e2acd38fb8fd9e6c93b55">sql_thread_kill_accepted</a>;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;</div><div class="line"><a name="l01611"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8488a40795fa34671aae5ff153c28c12"> 1611</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#a8488a40795fa34671aae5ff153c28c12">get_row_stmt_start_timestamp</a>() { <span class="keywordflow">return</span> row_stmt_start_timestamp; }</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div><div class="line"><a name="l01613"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9052e86c77e2e197a9faf2f732aa0c43"> 1613</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#a9052e86c77e2e197a9faf2f732aa0c43">set_row_stmt_start_timestamp</a>() {</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keywordflow">if</span> (row_stmt_start_timestamp == 0) row_stmt_start_timestamp = <a class="code" href="my__systime_8h.html#a459956a84f34f6767e5b67b4493bd48d">my_time</a>(0);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">return</span> row_stmt_start_timestamp;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9b3f88686af3d54e61784a527b0a90d8"> 1619</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a9b3f88686af3d54e61784a527b0a90d8">reset_row_stmt_start_timestamp</a>() { row_stmt_start_timestamp = 0; }</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8328fba71f5d688eac1c9e5f8348cdfe"> 1621</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a8328fba71f5d688eac1c9e5f8348cdfe">set_long_find_row_note_printed</a>() { long_find_row_note_printed = <span class="keyword">true</span>; }</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div><div class="line"><a name="l01623"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad75560075f69e976a2ac82b11eca5149"> 1623</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#ad75560075f69e976a2ac82b11eca5149">unset_long_find_row_note_printed</a>() {</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    long_find_row_note_printed = <span class="keyword">false</span>;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  }</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div><div class="line"><a name="l01627"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a1981ac0f3e9ad05937c6805e8fb34e78"> 1627</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a1981ac0f3e9ad05937c6805e8fb34e78">is_long_find_row_note_printed</a>() { <span class="keywordflow">return</span> long_find_row_note_printed; }</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">    Delete the existing event and set a new one.  This class is</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">    responsible for freeing the event, the caller should not do that.</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment">    @return 1 if an error was encountered, 0 otherwise.</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> set_rli_description_event(<a class="code" href="classFormat__description__log__event.html">Format_description_log_event</a> *fdle);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment">    Return the current Format_description_log_event.</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01641"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a613b8ded75247b3715590acee3169ef0"> 1641</a></span>&#160;  <a class="code" href="classFormat__description__log__event.html">Format_description_log_event</a> *<a class="code" href="classRelay__log__info.html#a613b8ded75247b3715590acee3169ef0">get_rli_description_event</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">return</span> rli_description_event;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  }</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment">    adaptation for the slave applier to specific master versions.</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> adapt_to_master_version(<a class="code" href="classFormat__description__log__event.html">Format_description_log_event</a> *fdle);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> adapt_to_master_version_updown(<a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> master_version,</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                                       <a class="code" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> current_version);</div><div class="line"><a name="l01651"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2fedc08f5818062672b5856cfef3503b"> 1651</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> slave_version_split[3];  <span class="comment">// bytes of the slave server version</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">    relay log info repository should be updated on relay log</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment">    rotate. But when the transaction is split across two relay logs,</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment">    update the repository will cause unexpected results and should</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">    be postponed till the &#39;commit&#39; of the transaction is executed.</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment">    A flag that set to &#39;true&#39; when this type of &#39;forced flush&#39;(at the</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment">    time of rotate relay log) is postponed due to transaction split</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">    across the relay logs.</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01662"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a5ac60dc20a9772ae2c3d448ece59895f"> 1662</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a5ac60dc20a9772ae2c3d448ece59895f">force_flush_postponed_due_to_split_trans</a>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa0ba06ba84cb9d43773d2632b10a1ded"> 1664</a></span>&#160;  <a class="code" href="classCommit__order__manager.html">Commit_order_manager</a> *<a class="code" href="classRelay__log__info.html#aa0ba06ba84cb9d43773d2632b10a1ded">get_commit_order_manager</a>() { <span class="keywordflow">return</span> commit_order_mngr; }</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a4ebb68b5f9bf497037eb38f4fbb4c746"> 1666</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a4ebb68b5f9bf497037eb38f4fbb4c746">set_commit_order_manager</a>(<a class="code" href="classCommit__order__manager.html">Commit_order_manager</a> *mngr) {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    commit_order_mngr = mngr;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  }</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment">    Following set function is required to initialize the &#39;until_option&#39; during</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment">    MTS relay log recovery process.</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment">    Ideally initialization of &#39;until_option&#39; is done through</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment">    rli::init_until_option. This init_until_option requires the main server</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment">    thread object and it makes use of the thd-&gt;lex-&gt;mi object to initialize the</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment">    &#39;until_option&#39;.</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="comment">    But MTS relay log recovery process happens before the main server comes</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment">    up at this time the THD object will not be available. Hence the following</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment">    set function does the initialization of &#39;until_option&#39;.</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01683"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa8fec2313c01c6d45e98b3e34adf2d6e"> 1683</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#aa8fec2313c01c6d45e98b3e34adf2d6e">set_until_option</a>(<a class="code" href="classUntil__option.html">Until_option</a> *<a class="code" href="structoption.html">option</a>) {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <a class="code" href="components_2services_2mysql__mutex_8h.html#a340bf8f49d0cbaa994eaf5fb1fc7a22f">mysql_mutex_lock</a>(&amp;data_lock);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    until_option = option;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <a class="code" href="components_2services_2mysql__mutex_8h.html#a5c748d3c7862702885acb90576754a2c">mysql_mutex_unlock</a>(&amp;data_lock);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a938c92ac33bdcc8077f037394b220092"> 1689</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a938c92ac33bdcc8077f037394b220092">clear_until_option</a>() {</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <a class="code" href="components_2services_2mysql__mutex_8h.html#a340bf8f49d0cbaa994eaf5fb1fc7a22f">mysql_mutex_lock</a>(&amp;data_lock);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">if</span> (until_option) {</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <span class="keyword">delete</span> until_option;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      until_option = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    }</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <a class="code" href="components_2services_2mysql__mutex_8h.html#a5c748d3c7862702885acb90576754a2c">mysql_mutex_unlock</a>(&amp;data_lock);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  }</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <span class="keywordtype">bool</span> set_info_search_keys(<a class="code" href="classRpl__info__handler.html">Rpl_info_handler</a> *to) <span class="keyword">override</span>;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment">    Get coordinator&#39;s RLI. Especially used get the rli from</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">    a slave thread, like this: thd-&gt;rli_slave-&gt;get_c_rli();</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">    thd could be a SQL thread or a worker thread</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01705"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a2c69ad8016761856f3bcf2851949e39b"> 1705</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classRelay__log__info.html">Relay_log_info</a> *<a class="code" href="classRelay__log__info.html#a2c69ad8016761856f3bcf2851949e39b">get_c_rli</a>() { <span class="keywordflow">return</span> <span class="keyword">this</span>; }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *get_for_channel_str(<span class="keywordtype">bool</span> upper_case = <span class="keyword">false</span>) <span class="keyword">const override</span>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment">    Set replication filter for the channel.</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01712"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a1b87485293445ca187a3e0dba5cb9c6d"> 1712</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a1b87485293445ca187a3e0dba5cb9c6d">set_filter</a>(<a class="code" href="classRpl__filter.html">Rpl_filter</a> *channel_filter) {</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    rpl_filter = channel_filter;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  }</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l01717"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad1fba5148f3e9f8b4e802dd7357c6ead"> 1717</a></span>&#160;  <a class="code" href="classFormat__description__log__event.html">Format_description_log_event</a> *<a class="code" href="classRelay__log__info.html#ad1fba5148f3e9f8b4e802dd7357c6ead">rli_description_event</a>;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment">    Commit order manager to order commits made by its workers. In context of</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">    Multi Source Replication each worker will be ordered by the coresponding</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment">    corrdinator&#39;s order manager.</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01725"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae9371ab87be9e996e6c49c225caa6a4f"> 1725</a></span>&#160;  <a class="code" href="classCommit__order__manager.html">Commit_order_manager</a> *<a class="code" href="classRelay__log__info.html#ae9371ab87be9e996e6c49c225caa6a4f">commit_order_mngr</a>;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment">    Delay slave SQL thread by this amount of seconds.</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment">    The delay is applied per transaction and based on the immediate master&#39;s</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment">    commit time. Exceptionally, if a server in the replication chain does not</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">    support the commit timestamps in Gtid_log_event, the delay is applied per</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment">    event and is based on the event timestamp.</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment">    This is set with CHANGE MASTER TO MASTER_DELAY=X.</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment">    Guarded by data_lock.  Initialized by the client thread executing</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment">    START SLAVE.  Written by client threads executing CHANGE MASTER TO</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment">    MASTER_DELAY=X.  Read by SQL thread and by client threads</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment">    executing SHOW SLAVE STATUS.  Note: must not be written while the</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">    slave SQL thread is running, since the SQL thread reads it without</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">    a lock when executing flush_info().</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01742"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#af43dbbb682ab79634c5270c56d0e8c1f"> 1742</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#af43dbbb682ab79634c5270c56d0e8c1f">sql_delay</a>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;<span class="comment">    During a delay, specifies the point in time when the delay ends.</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">    This is used for the SQL_Remaining_Delay column in SHOW SLAVE STATUS.</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">    Guarded by data_lock. Written by the sql thread.  Read by client</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">    threads executing SHOW SLAVE STATUS.</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01752"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a7560155737282a20bc0db816650e5b48"> 1752</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#a7560155737282a20bc0db816650e5b48">sql_delay_end</a>;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;</div><div class="line"><a name="l01754"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a43eb5fe024b53fecb42d1295742065d0"> 1754</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a> <a class="code" href="classRelay__log__info.html#a43eb5fe024b53fecb42d1295742065d0">m_flags</a>;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment">    Before the MASTER_DELAY parameter was added (WL#344), relay_log.info</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">    had 4 lines. Now it has 5 lines.</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01760"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ae135ea400a4c4afc678241716a214d4a"> 1760</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> LINES_IN_RELAY_LOG_INFO_WITH_DELAY = 5;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment">    Before the WL#5599, relay_log.info had 5 lines. Now it has 6 lines.</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01765"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a03665de334d08d6865040bfaaf6c7be9"> 1765</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> LINES_IN_RELAY_LOG_INFO_WITH_WORKERS = 6;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment">    Before the Id was added (BUG#2334346), relay_log.info</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">    had 6 lines. Now it has 7 lines.</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01771"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9c134bd31581d49d6ff99b911ea91be9"> 1771</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> LINES_IN_RELAY_LOG_INFO_WITH_ID = 7;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="comment">    Add a channel in the slave relay log info</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01776"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a24416765f5bda72a9cd327c5e257dbb1"> 1776</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> LINES_IN_RELAY_LOG_INFO_WITH_CHANNEL = 8;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">    Represents line number in relay_log.info to save PRIVILEGE_CHECKS_USERNAME.</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment">    It is username part of PRIVILEGES_CHECKS_USER column in</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="comment">    performance_schema.replication_applier_configuration.</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01783"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad190b20e69ef99abfca6f6cfd4392d79"> 1783</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> LINES_IN_RELAY_LOG_INFO_WITH_PRIV_CHECKS_USERNAME = 9;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment">    Maximum length of PRIVILEGE_CHECKS_USERNAME.</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01788"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abff42bb6c6ba79509ad6580f1ce8d59c"> 1788</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> PRIV_CHECKS_USERNAME_LENGTH = 32;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">    Represents line number in relay_log.info to save PRIVILEGE_CHECKS_HOSTNAME.</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">    It is hostname part of PRIVILEGES_CHECKS_USER column in</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment">    performance_schema.replication_applier_configuration.</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01795"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a482c85b4f36ae11bed8bde4248b03779"> 1795</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> LINES_IN_RELAY_LOG_INFO_WITH_PRIV_CHECKS_HOSTNAME = 10;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment">    Maximum length of PRIVILEGE_CHECKS_USERNAME.</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01800"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a97b3a95116d038d8f4a5c2ce7f050a1b"> 1800</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> PRIV_CHECKS_HOSTNAME_LENGTH = 255;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">    Represents line number in relay_log.info to save REQUIRE_ROW_FORMAT</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01805"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ac564bb45eb9e52b452e0b539f722aca1"> 1805</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> LINES_IN_RELAY_LOG_INFO_WITH_REQUIRE_ROW_FORMAT = 11;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">    Represents line number in relay_log.info to save</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment">    REQUIRE_TABLE_PRIMARY_KEY_CHECK</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01812"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a4f6538fa5a0a8b01c94e189665fbab01"> 1812</a></span>&#160;      LINES_IN_RELAY_LOG_INFO_WITH_REQUIRE_TABLE_PRIMARY_KEY_CHECK = 12;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">    Total lines in relay_log.info.</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">    This has to be updated every time a member is added or removed.</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01818"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9e75409267910cc51b2f8fc34aa7c48c"> 1818</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MAXIMUM_LINES_IN_RELAY_LOG_INFO_FILE =</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      LINES_IN_RELAY_LOG_INFO_WITH_REQUIRE_TABLE_PRIMARY_KEY_CHECK;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="keywordtype">bool</span> read_info(<a class="code" href="classRpl__info__handler.html">Rpl_info_handler</a> *from) <span class="keyword">override</span>;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="keywordtype">bool</span> write_info(<a class="code" href="classRpl__info__handler.html">Rpl_info_handler</a> *to) <span class="keyword">override</span>;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <a class="code" href="classRelay__log__info.html">Relay_log_info</a>(<span class="keyword">const</span> <a class="code" href="classRelay__log__info.html">Relay_log_info</a> &amp;info);</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <a class="code" href="classRelay__log__info.html">Relay_log_info</a> &amp;operator=(<span class="keyword">const</span> <a class="code" href="classRelay__log__info.html">Relay_log_info</a> &amp;info);</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">    Runtime state for printing a note when slave is taking</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">    too long while processing a row event.</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01831"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a79bac7fff3d72c9e7186eaea9ed1b618"> 1831</a></span>&#160;  time_t <a class="code" href="classRelay__log__info.html#a79bac7fff3d72c9e7186eaea9ed1b618">row_stmt_start_timestamp</a>;</div><div class="line"><a name="l01832"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a6614d4565621487b9ab85fb024139916"> 1832</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a6614d4565621487b9ab85fb024139916">long_find_row_note_printed</a>;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment">    sets the suffix required for relay log names in multisource</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="comment">    replication. When --relay-log option is not provided, the</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment">    names of the relay log files are relaylog.0000x or</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">    relaylog-CHANNEL.00000x in the case of MSR. However, if</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">    that option is provided, then the names of the relay log</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">    files are &lt;relay-log-option&gt;.0000x or</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment">    &lt;relay-log-option&gt;-CHANNEL.00000x in the case of MSR.</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="comment">    The function adds a channel suffix (according to the channel to</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="comment">    file name conventions and conversions) to the relay log file.</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment">    @todo: truncate the log file if length exceeds.</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="comment">    @param[in, out]  buff       buffer to store the complete relay log file name</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">    @param[in]       buff_size  size of buffer buff</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">    @param[in]       base_name  the base name of the relay log file</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *add_channel_to_relay_log_name(<span class="keywordtype">char</span> *buff, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> buff_size,</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                                            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__MYSYS.html#ga0d4478db305c8f478472c0df43861f80">base_name</a>);</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment">    Applier thread InnoDB priority.</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;<span class="comment">    When two transactions conflict inside InnoDB, the one with</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">    greater priority wins.</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">    Priority must be set before applier thread start so that all</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment">    executed transactions have the same priority.</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01862"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ad3a8292b885e7797e60d46c88a80c689"> 1862</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRelay__log__info.html#ad3a8292b885e7797e60d46c88a80c689">thd_tx_priority</a>;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="comment">/* The object stores and handles START SLAVE UNTIL option */</span></div><div class="line"><a name="l01865"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a6e3fd864e1438b30528fcca5fe31d491"> 1865</a></span>&#160;  <a class="code" href="classUntil__option.html">Until_option</a> *<a class="code" href="classRelay__log__info.html#a6e3fd864e1438b30528fcca5fe31d491">until_option</a>;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="comment">    The boolean is set to true when the binlog (rli_fake) or slave</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;<span class="comment">    (rli_slave) applier thread detaches any engine ha_data</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;<span class="comment">    it has dealt with at time of XA START processing.</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="comment">    The boolean is reset to false at the end of XA PREPARE,</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment">    XA COMMIT ONE PHASE for the binlog applier, and</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="comment">    at internal rollback of the slave applier at the same time with</span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="comment">    the engine ha_data re-attachment.</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01877"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a7aac59026b294e104954ce20641f0436"> 1877</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a7aac59026b294e104954ce20641f0436">is_engine_ha_data_detached</a>;<span class="comment"></span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment">    Reference to being applied event. The member is set at event reading</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment">    and gets reset at the end of the event lifetime.</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment">    See more in @c RLI_current_event_raii that provides the main</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment">    interface to the member.</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01884"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356"> 1884</a></span>&#160;  <a class="code" href="classLog__event.html">Log_event</a> *<a class="code" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">current_event</a>;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment">    Raised when slave applies and writes to its binary log statement</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">    which is not atomic DDL and has no XID assigned. Checked at commit</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">    time to decide whether it is safe to update slave info table</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment">    within the same transaction as the write to binary log or this</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="comment">    should be deffered. The deffered scenario applies for not XIDed events</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">    in which case such update might be lost on recovery.</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01894"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ac2434aadfaa4b15cac3ddb81d926779b"> 1894</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#ac2434aadfaa4b15cac3ddb81d926779b">ddl_not_atomic</a>;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a4faab8451d9e84b9b919bbc40df1c5e7"> 1896</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a4faab8451d9e84b9b919bbc40df1c5e7">set_thd_tx_priority</a>(<span class="keywordtype">int</span> priority) { thd_tx_priority = priority; }</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a65bfcf035b94919018f07fd25ddf9cfd"> 1898</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classRelay__log__info.html#a65bfcf035b94919018f07fd25ddf9cfd">get_thd_tx_priority</a>() { <span class="keywordflow">return</span> <a class="code" href="include_2mysql_2plugin_8h.html#a611d49c9771717379a8a296c87305746">thd_tx_priority</a>; }</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *get_until_log_name();</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a> get_until_log_pos();</div><div class="line"><a name="l01902"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a9e129a78644251c2f9034d2032b2ccc1"> 1902</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#a9e129a78644251c2f9034d2032b2ccc1">is_until_satisfied_at_start_slave</a>() {</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keywordflow">return</span> until_option != <span class="keyword">nullptr</span> &amp;&amp;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;           until_option-&gt;<a class="code" href="classUntil__option.html#a8bbc78d4fbf4b08455d0ef4b09106ab5">is_satisfied_at_start_slave</a>();</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  }</div><div class="line"><a name="l01906"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aa34fae20ade65e0cb755bbe701afd6dc"> 1906</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#aa34fae20ade65e0cb755bbe701afd6dc">is_until_satisfied_before_dispatching_event</a>(<span class="keyword">const</span> <a class="code" href="classLog__event.html">Log_event</a> *ev) {</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keywordflow">return</span> until_option != <span class="keyword">nullptr</span> &amp;&amp;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;           until_option-&gt;<a class="code" href="classUntil__option.html#a6ba3fc64114bfb69ac3874d3f5fe296c">is_satisfied_before_dispatching_event</a>(ev);</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  }</div><div class="line"><a name="l01910"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#ab0e8e0326e5e2baca11fbf7a36cc6f8b"> 1910</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#ab0e8e0326e5e2baca11fbf7a36cc6f8b">is_until_satisfied_after_dispatching_event</a>() {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">return</span> until_option != <span class="keyword">nullptr</span> &amp;&amp;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;           until_option-&gt;<a class="code" href="classUntil__option.html#a32e719eae569d4621c04b72325527634">is_satisfied_after_dispatching_event</a>();</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  }<span class="comment"></span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="comment">   Intialize until option object when starting slave.</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">   @param[in] thd The thread object of current session.</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment">   @param[in] master_param the parameters of START SLAVE.</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="comment">   @return int</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment">     @retval 0      Succeeds to initialize until option object.</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="comment">     @retval &lt;&gt; 0   A defined error number is return if any error happens.</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="keywordtype">int</span> init_until_option(<a class="code" href="classTHD.html">THD</a> *thd, <span class="keyword">const</span> <a class="code" href="structLEX__MASTER__INFO.html">LEX_MASTER_INFO</a> *master_param);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment">    Detaches the engine ha_data from THD. The fact</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="comment">    is memorized in @c is_engine_ha_detached flag.</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="comment">    @param  thd a reference to THD</span></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="keywordtype">void</span> detach_engine_ha_data(<a class="code" href="classTHD.html">THD</a> *thd);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment">    Reattaches the engine ha_data to THD. The fact</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment">    is memorized in @c is_engine_ha_detached flag.</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="comment">    @param  thd a reference to THD</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="keywordtype">void</span> reattach_engine_ha_data(<a class="code" href="classTHD.html">THD</a> *thd);<span class="comment"></span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">    Drops the engine ha_data flag when it is up.</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">    The method is run at execution points of the engine ha_data</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment">    re-attachment.</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment">    @return true   when THD has detached the engine ha_data,</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="comment">            false  otherwise</span></div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div><div class="line"><a name="l01952"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#aff59190d1b65e2e5c8aacac048351b3a"> 1952</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#aff59190d1b65e2e5c8aacac048351b3a">unflag_detached_engine_ha_data</a>() {</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="keywordtype">bool</span> rc = <span class="keyword">false</span>;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keywordflow">if</span> (is_engine_ha_data_detached)</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      rc = !(is_engine_ha_data_detached = <span class="keyword">false</span>);  <span class="comment">// return the old value</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  }</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="comment">    Execute actions at replicated atomic DLL post rollback time.</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="comment">    This include marking the current atomic DDL query-log-event</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment">    as having processed.</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="comment">    This measure is necessary to avoid slave info table update execution</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="comment">    when @c pre_commit() hook is called as part of DDL&#39;s eventual</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="comment">    implicit commit.</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01969"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#a476e3034acb3c38089a3f6a0942031af"> 1969</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRelay__log__info.html#a476e3034acb3c38089a3f6a0942031af">post_rollback</a>() {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <span class="keyword">static_cast&lt;</span><a class="code" href="classQuery__log__event.html">Query_log_event</a> *<span class="keyword">&gt;</span>(current_event)-&gt;has_ddl_committed = <span class="keyword">true</span>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  }</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment">    The method implements a pre-commit hook to add up a new statement</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment">    typically to a DDL transaction to update the slave info table.</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment">    Note, in the non-transactional repository case the slave info</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="comment">    is updated after successful commit of the main transaction.</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment">    @return false as success, otherwise true</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01981"></a><span class="lineno"><a class="line" href="classRelay__log__info.html#abd5bb6cca4f37241062a63dc7c123b09"> 1981</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classRelay__log__info.html#abd5bb6cca4f37241062a63dc7c123b09">pre_commit</a>() {</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="keywordtype">bool</span> rc = <span class="keyword">false</span>;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="keywordflow">if</span> (is_transactional()) {</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <span class="keyword">static_cast&lt;</span><a class="code" href="classQuery__log__event.html">Query_log_event</a> *<span class="keyword">&gt;</span>(current_event)-&gt;has_ddl_committed = <span class="keyword">true</span>;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      rc = commit_positions();</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    }</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  }<span class="comment"></span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;<span class="comment">    Cleanup of any side effect that pre_commit() inflicts, including</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="comment">    restore of the last executed group coordinates in case the current group</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="comment">    has been destined to rollback, and signaling to possible waiters</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="comment">    in the positive case.</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment">    @param on_rollback  when true the method carries out rollback action</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> post_commit(<span class="keywordtype">bool</span> on_rollback);</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;};</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment">  Negation operator for `enum_priv_checks_status`, to facilitate validation</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">  against `SUCCESS`. To test for error status, use the `!!` idiom.</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="comment">  @param status the status code to check against `SUCCESS`</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<span class="comment">  @return true if the status is `SUCCESS` and false otherwise.</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="rpl__rli_8h.html#a1579bccea2a3d80dadb65e68be3d898b">operator!</a>(<a class="code" href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">Relay_log_info::enum_priv_checks_status</a> <a class="code" href="mysql_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">status</a>);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="comment">  Negation operator for `enum_require_row_status`, to facilitate validation</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">  against `SUCCESS`. To test for error status, use the `!!` idiom.</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment">  @param status the status code to check against `SUCCESS`</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="comment">  @return true if the status is `SUCCESS` and false otherwise.</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="rpl__rli_8h.html#a1579bccea2a3d80dadb65e68be3d898b">operator!</a>(<a class="code" href="classRelay__log__info.html#a8b94fd9487826588d8961e6b2a367909">Relay_log_info::enum_require_row_status</a> <a class="code" href="mysql_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">status</a>);</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="rpl__rli_8h.html#ad5209062c63b43f631eef24a6f0e91fd">mysql_show_relaylog_events</a>(<a class="code" href="classTHD.html">THD</a> *thd);</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment">   @param  thd a reference to THD</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="comment">   @return true if thd belongs to a Worker thread and false otherwise.</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02027"></a><span class="lineno"><a class="line" href="rpl__rli_8h.html#aa619eec2ff0e4cc65cf9ccbd3519d199"> 2027</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="rpl__rli_8h.html#aa619eec2ff0e4cc65cf9ccbd3519d199">is_mts_worker</a>(<span class="keyword">const</span> <a class="code" href="classTHD.html">THD</a> *thd) {</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="keywordflow">return</span> thd-&gt;<a class="code" href="classTHD.html#a909c901657292c8a63001a183452d8ca">system_thread</a> == <a class="code" href="thread__type_8h.html#adade01b1d73317cd10a128e7843f240ba65fce7bbaee140f7979c86de907a4927">SYSTEM_THREAD_SLAVE_WORKER</a>;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;}</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="comment"> Auxiliary function to check if we have a db partitioned MTS</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="rpl__rli_8h.html#ade780523455b95642746c900e432ab4c">is_mts_db_partitioned</a>(<a class="code" href="classRelay__log__info.html">Relay_log_info</a> *rli);</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="comment">  Checks whether the supplied event encodes a (2pc-aware) DDL</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;<span class="comment">  that has been already committed.</span></div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="comment">  @param  ev    A reference to Query-log-event</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="comment">  @return true  when the event is already committed transactional DDL</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02043"></a><span class="lineno"><a class="line" href="rpl__rli_8h.html#aaf0fdf63a9071781ae1b3f8d4389f1c1"> 2043</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="rpl__rli_8h.html#aaf0fdf63a9071781ae1b3f8d4389f1c1">is_committed_ddl</a>(<a class="code" href="classLog__event.html">Log_event</a> *ev) {</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="keywordflow">return</span> ev-&gt;<a class="code" href="classLog__event.html#aa1a7f67c16196fec12bc562872c97efd">get_type_code</a>() == <a class="code" href="namespacebinary__log.html#ae2e9773ce2b58a3f7faad5390095c4dbae6781bd10cb94154d08ba2fd10f518fb">binary_log::QUERY_EVENT</a> &amp;&amp;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;         <span class="comment">/* has been already committed */</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;         <span class="keyword">static_cast&lt;</span><a class="code" href="classQuery__log__event.html">Query_log_event</a> *<span class="keyword">&gt;</span>(ev)-&gt;has_ddl_committed;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;}</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment">  Checks whether the transaction identified by the argument</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">  is executed by a slave applier thread is an atomic DDL</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="comment">  not yet committed (see @c Query_log_event::has_ddl_committed).</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="comment">  THD::is_operating_substatement_implicitly filters out intermediate</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="comment">  commits done by non-atomic DDLs.</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="comment">  The error-tagged atomic statements are regarded as non-atomic</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="comment">  therefore this predicate returns negative in such case.</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="comment">  Note that call to is_atomic_ddl() returns &quot;approximate&quot; outcome in</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="comment">  this case as it misses information about type of tables used by the DDL.</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="comment">  This can be a problem for binlogging slave, as updates to slave info</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="comment">  which happen in the same transaction as write of binary log event</span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="comment">  without XID might be lost on recovery. To avoid this problem</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment">  RLI::ddl_not_atomic flag is employed which is set to true when</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment">  non-atomic DDL without XID is written to the binary log.</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="comment">  &quot;Approximate&quot; outcome is always fine for non-binlogging slave as in</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="comment">  this case commit happens using one-phase routine for which recovery</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment">  is always correct.</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment">  @param  thd   a pointer to THD describing the transaction context</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment">  @return true  when a slave applier thread is set to commmit being processed</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="comment">                DDL query-log-event, otherwise returns false.</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02075"></a><span class="lineno"><a class="line" href="rpl__rli_8h.html#ab5d66481fbc8e98fe5aa8073a67b037f"> 2075</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="rpl__rli_8h.html#ab5d66481fbc8e98fe5aa8073a67b037f">is_atomic_ddl_commit_on_slave</a>(<a class="code" href="classTHD.html">THD</a> *thd) {</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(thd);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <a class="code" href="classRelay__log__info.html">Relay_log_info</a> *rli = thd-&gt;<a class="code" href="classTHD.html#a3fa3f267d7ce6e0af0504fc0b17345db">rli_slave</a>;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <span class="comment">/* Early return is about an error in the SQL thread initialization */</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="keywordflow">if</span> (!rli) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  <span class="keywordflow">return</span> ((thd-&gt;<a class="code" href="classTHD.html#a909c901657292c8a63001a183452d8ca">system_thread</a> == <a class="code" href="thread__type_8h.html#adade01b1d73317cd10a128e7843f240baadaddfd06f0dc6795a60005e7041f187">SYSTEM_THREAD_SLAVE_SQL</a> ||</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;           thd-&gt;<a class="code" href="classTHD.html#a909c901657292c8a63001a183452d8ca">system_thread</a> == <a class="code" href="thread__type_8h.html#adade01b1d73317cd10a128e7843f240ba65fce7bbaee140f7979c86de907a4927">SYSTEM_THREAD_SLAVE_WORKER</a>) &amp;&amp;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;          rli-&gt;<a class="code" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">current_event</a>)</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;             ? (rli-&gt;<a class="code" href="classRpl__info.html#accb9a160c04d4162b70d540df5c3ea6b">is_transactional</a>() &amp;&amp;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                <span class="comment">/* has not yet committed */</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                (rli-&gt;<a class="code" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">current_event</a>-&gt;<a class="code" href="classLog__event.html#aa1a7f67c16196fec12bc562872c97efd">get_type_code</a>() ==</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                     <a class="code" href="namespacebinary__log.html#ae2e9773ce2b58a3f7faad5390095c4dbae6781bd10cb94154d08ba2fd10f518fb">binary_log::QUERY_EVENT</a> &amp;&amp;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                 !<span class="keyword">static_cast&lt;</span><a class="code" href="classQuery__log__event.html">Query_log_event</a> *<span class="keyword">&gt;</span>(rli-&gt;<a class="code" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">current_event</a>)</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                      -&gt;has_ddl_committed) &amp;&amp;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                <span class="comment">/* unless slave binlogger identified non-atomic */</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                !rli-&gt;<a class="code" href="classRelay__log__info.html#ac2434aadfaa4b15cac3ddb81d926779b">ddl_not_atomic</a> &amp;&amp;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                <span class="comment">/* slave info is not updated when a part of multi-DROP-TABLE</span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment">                   commits */</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                !thd-&gt;<a class="code" href="classTHD.html#aeb4ab32a3c6fbacb94d4ef9372b445c6">is_commit_in_middle_of_statement</a> &amp;&amp;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                (<a class="code" href="group__Replication.html#ga5b0ba662ed95fe60c2a196f20675185b">is_atomic_ddl</a>(thd, <span class="keyword">true</span>) &amp;&amp;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                 !thd-&gt;<a class="code" href="classTHD.html#af3feadcfbb9a7835b7941945c6cd0828">is_operating_substatement_implicitly</a>) &amp;&amp;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                <span class="comment">/* error-tagged atomic DDL do not update yet slave info */</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                static_cast&lt;Query_log_event *&gt;(rli-&gt;<a class="code" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">current_event</a>)</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                        -&gt;error_code == 0)</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;             : <span class="keyword">false</span>;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;}</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="comment">  RAII class to control the slave applier execution context binding</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="comment">  with a being handled event. The main object of control is Query-log-event</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="comment">  containing DDL statement.</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="comment">  The member RLI::current_event is set to refer to an event once it is</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="comment">  read, e.g by next_event() and is reset to NULL at exiting a</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="comment">  read-exec loop. Once the event is destroyed RLI::current_event must be reset</span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="comment">  or guaranteed not be accessed anymore.</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="comment">  In the MTS execution the worker is reliably associated with an event</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="comment">  only with the latter is not deferred. This includes Query-log-event.</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02116"></a><span class="lineno"><a class="line" href="classRLI__current__event__raii.html"> 2116</a></span>&#160;<span class="keyword">class </span><a class="code" href="classRLI__current__event__raii.html">RLI_current_event_raii</a> {</div><div class="line"><a name="l02117"></a><span class="lineno"><a class="line" href="classRLI__current__event__raii.html#a1e8022cdcb26e98e34000ce4ffc97f96"> 2117</a></span>&#160;  <a class="code" href="classRelay__log__info.html">Relay_log_info</a> *<a class="code" href="classRLI__current__event__raii.html#a1e8022cdcb26e98e34000ce4ffc97f96">m_rli</a>;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l02120"></a><span class="lineno"><a class="line" href="classRLI__current__event__raii.html#ab4ae13c7499999ef58317510367a571f"> 2120</a></span>&#160;  <a class="code" href="classRLI__current__event__raii.html#ab4ae13c7499999ef58317510367a571f">RLI_current_event_raii</a>(<a class="code" href="classRelay__log__info.html">Relay_log_info</a> *rli_arg, <a class="code" href="classLog__event.html">Log_event</a> *ev)</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      : m_rli(rli_arg) {</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    m_rli-&gt;<a class="code" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">current_event</a> = ev;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  }</div><div class="line"><a name="l02124"></a><span class="lineno"><a class="line" href="classRLI__current__event__raii.html#a7e6f722ace8dbf2e6fec91465f65342b"> 2124</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classRLI__current__event__raii.html#a7e6f722ace8dbf2e6fec91465f65342b">set_current_event</a>(<a class="code" href="classLog__event.html">Log_event</a> *ev) { m_rli-&gt;<a class="code" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">current_event</a> = ev; }</div><div class="line"><a name="l02125"></a><span class="lineno"><a class="line" href="classRLI__current__event__raii.html#a93f1831c0f85d81a096b106730ca4894"> 2125</a></span>&#160;  <a class="code" href="classRLI__current__event__raii.html#a93f1831c0f85d81a096b106730ca4894">~RLI_current_event_raii</a>() { m_rli-&gt;<a class="code" href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">current_event</a> = <span class="keyword">nullptr</span>; }</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;};</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;<span class="comment"> @class MDL_lock_guard</span></div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;<span class="comment"> Utility class to allow RAII pattern with `MDL_request` and `MDL_context`</span></div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;<span class="comment"> classes.</span></div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02134"></a><span class="lineno"><a class="line" href="classMDL__lock__guard.html"> 2134</a></span>&#160;<span class="keyword">class </span><a class="code" href="classMDL__lock__guard.html">MDL_lock_guard</a> {</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="comment">   Constructor that initializes the object and the target `THD` object but</span></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">   doesn&#39;t try to acquire any lock.</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="comment">   @param target THD object, source for the `MDL_context` to use.</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <a class="code" href="classMDL__lock__guard.html">MDL_lock_guard</a>(<a class="code" href="classTHD.html">THD</a> *target);<span class="comment"></span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="comment">   Constructor that initializes the object and the target `THD` object and tries</span></div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="comment">   to acquire the lock identified by `namespace_arg` with MDL type identified by</span></div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="comment">   `mdl_type_arg`.</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="comment">   If the `blocking` parameter is true, it will instantly try to acquire the</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="comment">   lock and block. If the `blocking` parameter is false, it will first test if</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="comment">   the lock is already acquired and only try to lock if no conflicting lock is</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="comment">   already acquired.</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="comment">   @param target THD object, source for the `MDL_context` to use.</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="comment">   @param namespace_arg MDL key namespace to acquire the lock from.</span></div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="comment">   @param mdl_type_arg MDL acquisition type</span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment">   @param blocking whether or not the execution should block if the lock is</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">                   already acquired.</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <a class="code" href="classMDL__lock__guard.html">MDL_lock_guard</a>(<a class="code" href="classTHD.html">THD</a> *target, <a class="code" href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a> namespace_arg,</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                 <a class="code" href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a> mdl_type_arg, <span class="keywordtype">bool</span> blocking = <span class="keyword">false</span>);<span class="comment"></span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment">   Destructor that unlocks all acquired locks.</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="keyword">virtual</span> ~<a class="code" href="classMDL__lock__guard.html">MDL_lock_guard</a>();</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="comment">   Uses the target `THD` object MDL context to acquire the lock identified by</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="comment">   `namespace_arg` with MDL type identified by `mdl_type_arg`.</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">   If the `blocking` parameter is true, it will instantly try to acquire the</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment">   lock and block. If the `blocking` parameter is false, it will first test if</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="comment">   the lock is already acquired and only try to lock if no conflicting lock is</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="comment">   already acquired.</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="comment">   The lock is determined to have been acquired if the `THD` object MDL context</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="comment">   hasn&#39;t already a lock and the lock is acquired. In other words, if the MDL</span></div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment">   context already has acquired the lock, the method will return failure.</span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;<span class="comment">   @param namespace_arg MDL key namespace to acquire the lock from.</span></div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;<span class="comment">   @param mdl_type_arg MDL acquisition type</span></div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;<span class="comment">   @param blocking whether or not the execution should block if the lock is</span></div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;<span class="comment">                   already acquired.</span></div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;<span class="comment">   @return false if the lock has been acquired by this method invocation and</span></div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;<span class="comment">           true if not.</span></div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="keywordtype">bool</span> lock(<a class="code" href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a> namespace_arg,</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;            <a class="code" href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a> mdl_type_arg, <span class="keywordtype">bool</span> blocking = <span class="keyword">false</span>);<span class="comment"></span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment">   Returns whether or not the lock as been acquired within this object</span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment">   life-cycle.</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment">   @return true if the lock has been acquired within this object life-cycle.</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="task_8h.html#aeda1029f1c228afd7422f2ba5b90df21">is_locked</a>();</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;<span class="comment">  /** The `THD` object holding the MDL context used for acquiring/releasing. */</span></div><div class="line"><a name="l02199"></a><span class="lineno"><a class="line" href="classMDL__lock__guard.html#a442c6c2e9a73ba6a4ede8192a2be8b78"> 2199</a></span>&#160;  <a class="code" href="classTHD.html">THD</a> *<a class="code" href="classMDL__lock__guard.html#a442c6c2e9a73ba6a4ede8192a2be8b78">m_target</a>;<span class="comment"></span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="comment">  /** The MDL request holding the MDL ticket issued upon acquisition */</span></div><div class="line"><a name="l02201"></a><span class="lineno"><a class="line" href="classMDL__lock__guard.html#aa7b19e17b8ad711a31ead7f5576a09ad"> 2201</a></span>&#160;  <a class="code" href="classMDL__request.html">MDL_request</a> <a class="code" href="classMDL__lock__guard.html#aa7b19e17b8ad711a31ead7f5576a09ad">m_request</a>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;};</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">  @class Applier_security_context_guard</span></div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;<span class="comment">  Utility class to allow RAII pattern with `Security_context` class.</span></div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<span class="comment">  At initiliazation, if the `THD` main security context isn&#39;t already the</span></div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment">  appropriate one, it copies the `Relay_log_info::info_thd::security_context`</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment">  and replaces it with the one initialized with the `PRIVILEGE_CHECK_USER` user.</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">  At deinitialization, it copies the backed up security context.</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment">  It also deals with the case where no privilege checks are required, meaning,</span></div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="comment">  `PRIVILEGE_CHECKS_USER` is `NULL`.</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment">  Usage examples:</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="comment">  (1)</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="comment">  @code</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="comment">      Applier_security_context_guard security_context{rli, thd};</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment">      if (!security_context.has_access({SUPER_ACL})) {</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment">        return ER_NO_ACCESS;</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="comment">      }</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment">  @endcode</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment">  (4)</span></div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">  @code</span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">      Applier_security_context_guard security_context{rli, thd};</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">      if (!security_context.has_access(</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">              {{CREATE_ACL | INSERT_ACL | UPDATE_ACL, table},</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">               {SELECT_ACL, table}})) {</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">        return ER_NO_ACCESS;</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">      }</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment">  @endcode</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div><div class="line"><a name="l02238"></a><span class="lineno"><a class="line" href="classApplier__security__context__guard.html"> 2238</a></span>&#160;<span class="keyword">class </span><a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a> {</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;<span class="comment">    If needed, backs up the current `thd` security context and replaces it with</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="comment">    a security context for `PRIVILEGE_CHECKS_USER` user.</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="comment">    @param rli the `Relay_log_info` object that holds the</span></div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="comment">               `PRIVILEGE_CHECKS_USER` info.</span></div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment">    @param thd the `THD` for which initialize the security context.</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  <a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a>(<a class="code" href="classRelay__log__info.html">Relay_log_info</a> <span class="keyword">const</span> *rli, <a class="code" href="classTHD.html">THD</a> <span class="keyword">const</span> *thd);<span class="comment"></span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment">    Destructor that restores the backed up security context, if needed.</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="keyword">virtual</span> ~<a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a>();</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="comment">// --&gt; Deleted constructors and methods to remove default move/copy semantics</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  <a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a>(<span class="keyword">const</span> <a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a> &amp;) =</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="keyword">delete</span>;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  <a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a>(<a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a> &amp;&amp;) = <span class="keyword">delete</span>;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  <a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a> &amp;operator=(</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      <span class="keyword">const</span> <a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a> &amp;) = <span class="keyword">delete</span>;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a> &amp;operator=(<a class="code" href="classApplier__security__context__guard.html">Applier_security_context_guard</a> &amp;&amp;) =</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      <span class="keyword">delete</span>;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="comment">// &lt;--</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="comment">    Returns whether or not privilege checks may be skipped within the current</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment">    context.</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="comment">    @return true if privilege checks may be skipped and false otherwise.</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordtype">bool</span> skip_priv_checks() <span class="keyword">const</span>;<span class="comment"></span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="comment">    Checks if the `PRIVILEGE_CHECKS_USER` user has access to the privilieges</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="comment">    passed on by `extra_privileges` parameter as well as to the privileges</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="comment">    passed on at initilization time.</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="comment">    This particular method checks those privileges agains a given table and</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment">    against that table&#39;s columns - the ones that are used or changed in the</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment">    event.</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment">    @param extra_privileges set of privileges to check, additionally to those</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment">                            passed on at initialization. It&#39;s a list of</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<span class="comment">                            (privilege, TABLE*, Rows_log_event*) tuples.</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;<span class="comment">    @return true if the privileges are included in the security context and</span></div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="comment">            false, otherwise.</span></div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  <span class="keywordtype">bool</span> has_access(</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <a class="code" href="namespaceut.html#aa7abb0ab07329e68a6ec29d191da1e58">std::vector</a>&lt;std::tuple&lt;ulong, TABLE const *, Rows_log_event *&gt;&gt;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;          &amp;extra_privileges) <span class="keyword">const</span>;<span class="comment"></span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment">    Checks if the `PRIVILEGE_CHECKS_USER` user has access to the privilieges</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="comment">    passed on by `extra_privileges` parameter as well as to the privileges</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="comment">    passed on at initilization time.</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<span class="comment">    @param extra_privileges set of privileges to check, additionally to those</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<span class="comment">                            passed on at initialization. It&#39;s a list of</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="comment">                            privileges to be checked against any database.</span></div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;<span class="comment">    @return true if the privileges are included in the security context and</span></div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="comment">            false, otherwise.</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <span class="keywordtype">bool</span> has_access(std::initializer_list&lt;std::string&gt; extra_privileges) <span class="keyword">const</span>;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="comment">    Checks if the `PRIVILEGE_CHECKS_USER` user has access to the privilieges</span></div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="comment">    passed on by `extra_privileges` parameter as well as to the privileges</span></div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="comment">    passed on at initilization time.</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment">    @param extra_privileges set of privileges to check, additionally to those</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment">                            passed on at initialization. It&#39;s a list of</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment">                            privileges to be checked against any database.</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment">    @return true if the privileges are included in the security context and</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment">            false, otherwise.</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="keywordtype">bool</span> has_access(std::initializer_list&lt;ulong&gt; extra_privileges) <span class="keyword">const</span>;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;<span class="comment">    Returns the username for the user for which the security context was</span></div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="comment">    initialized.</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment">    If `PRIVILEGE_CHECKS_USER` was configured for the target `Relay_log_info`</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment">    object, that one is returned.</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="comment">    Otherwise, the username associated with the `Security_context` initialized</span></div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;<span class="comment">    for `Relay_log_info::info_thd` will be returned.</span></div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="comment">    @return an `std::string` holding the username for the active security</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="comment">            context.</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  std::string get_username() <span class="keyword">const</span>;<span class="comment"></span></div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="comment">    Returns the hostname for the user for which the security context was</span></div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="comment">    initialized.</span></div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="comment">    If `PRIVILEGE_CHECKS_USER` was configured for the target `Relay_log_info`</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="comment">    object, that one is returned.</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="comment">    Otherwise, the hostname associated with the `Security_context` initialized</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;<span class="comment">    for `Relay_log_info::info_thd` will be returned.</span></div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="comment">    @return an `std::string` holding the hostname for the active security</span></div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="comment">            context.</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  std::string get_hostname() <span class="keyword">const</span>;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="comment">    The `Relay_log_info` object holding the info required to initialize the</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="comment">    context.</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02352"></a><span class="lineno"><a class="line" href="classApplier__security__context__guard.html#af2cbede164ef7f28438c10c33bb96f66"> 2352</a></span>&#160;  <a class="code" href="classRelay__log__info.html">Relay_log_info</a> <span class="keyword">const</span> *<a class="code" href="classApplier__security__context__guard.html#af2cbede164ef7f28438c10c33bb96f66">m_target</a>;<span class="comment"></span></div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<span class="comment">    The `THD` object for which the security context will be initialized.</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02356"></a><span class="lineno"><a class="line" href="classApplier__security__context__guard.html#a996e5fbe2c884d4a2b073f1dd75cb6e2"> 2356</a></span>&#160;  <a class="code" href="classTHD.html">THD</a> <span class="keyword">const</span> *<a class="code" href="classApplier__security__context__guard.html#a996e5fbe2c884d4a2b073f1dd75cb6e2">m_thd</a>;<span class="comment"></span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="comment">  /** Applier security context based on `PRIVILEGE_CHECK_USER` user */</span></div><div class="line"><a name="l02358"></a><span class="lineno"><a class="line" href="classApplier__security__context__guard.html#a7e80e14a6840d60d9be012dadbf86a97"> 2358</a></span>&#160;  <a class="code" href="classSecurity__context.html">Security_context</a> <a class="code" href="classApplier__security__context__guard.html#a7e80e14a6840d60d9be012dadbf86a97">m_applier_security_ctx</a>;<span class="comment"></span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="comment">  /** Currently in use security context */</span></div><div class="line"><a name="l02360"></a><span class="lineno"><a class="line" href="classApplier__security__context__guard.html#aa6a86b4a7fa405117b907088a781050a"> 2360</a></span>&#160;  <a class="code" href="classSecurity__context.html">Security_context</a> *<a class="code" href="classApplier__security__context__guard.html#aa6a86b4a7fa405117b907088a781050a">m_current</a>;<span class="comment"></span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;<span class="comment">  /** Backed up security context */</span></div><div class="line"><a name="l02362"></a><span class="lineno"><a class="line" href="classApplier__security__context__guard.html#a9a46ed3919c66868f479bb660181e9ca"> 2362</a></span>&#160;  <a class="code" href="classSecurity__context.html">Security_context</a> *<a class="code" href="classApplier__security__context__guard.html#a9a46ed3919c66868f479bb660181e9ca">m_previous</a>;<span class="comment"></span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="comment">  /** Flag that states if privilege check should be skipped */</span></div><div class="line"><a name="l02364"></a><span class="lineno"><a class="line" href="classApplier__security__context__guard.html#a80e1173a5786a9c70ce221248ffeed20"> 2364</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classApplier__security__context__guard.html#a80e1173a5786a9c70ce221248ffeed20">m_privilege_checks_none</a>;<span class="comment"></span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="comment">  /** Flag that states if there is a logged user */</span></div><div class="line"><a name="l02366"></a><span class="lineno"><a class="line" href="classApplier__security__context__guard.html#aaf94fefe846515973001f21d27d295cd"> 2366</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classApplier__security__context__guard.html#aaf94fefe846515973001f21d27d295cd">m_logged_in_acl_user</a>;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  <span class="keywordtype">void</span> extract_columns_to_check(<a class="code" href="structTABLE.html">TABLE</a> <span class="keyword">const</span> *table, <a class="code" href="classRows__log__event.html">Rows_log_event</a> *event,</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;                                std::vector&lt;std::string&gt; &amp;columns) <span class="keyword">const</span>;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;};</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* RPL_RLI_H */</span><span class="preprocessor"></span></div><div class="ttc" id="classRelay__log__info_html_a613b8ded75247b3715590acee3169ef0"><div class="ttname"><a href="classRelay__log__info.html#a613b8ded75247b3715590acee3169ef0">Relay_log_info::get_rli_description_event</a></div><div class="ttdeci">Format_description_log_event * get_rli_description_event() const</div><div class="ttdoc">Return the current Format_description_log_event. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1641</div></div>
<div class="ttc" id="classRelay__log__info_html_ab30d735a6743ed558d05951c652e3712"><div class="ttname"><a href="classRelay__log__info.html#ab30d735a6743ed558d05951c652e3712">Relay_log_info::set_group_relay_log_pos</a></div><div class="ttdeci">void set_group_relay_log_pos(ulonglong log_pos)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1519</div></div>
<div class="ttc" id="classRelay__log__info_html_a54a7597da74aeb539c944d54b16bf261"><div class="ttname"><a href="classRelay__log__info.html#a54a7597da74aeb539c944d54b16bf261">Relay_log_info::set_flag</a></div><div class="ttdeci">void set_flag(enum_state_flag flag)</div><div class="ttdoc">Set the value of a replication state flag. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1358</div></div>
<div class="ttc" id="classRelay__log__info_html_a71010a7a3ecb75a25dce1f9880bbcf64"><div class="ttname"><a href="classRelay__log__info.html#a71010a7a3ecb75a25dce1f9880bbcf64">Relay_log_info::is_relay_log_recovery</a></div><div class="ttdeci">bool is_relay_log_recovery</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:291</div></div>
<div class="ttc" id="query__options_8h_html_af3ef29bb91e9565fd2e313f2816b4355"><div class="ttname"><a href="query__options_8h.html#af3ef29bb91e9565fd2e313f2816b4355">OPTION_BEGIN</a></div><div class="ttdeci">#define OPTION_BEGIN</div><div class="ttdef"><b>Definition:</b> query_options.h:74</div></div>
<div class="ttc" id="my__inttypes_8h_html_a22152088aba12c47e916b7f0ffee0f51"><div class="ttname"><a href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a></div><div class="ttdeci">unsigned long long int ulonglong</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:55</div></div>
<div class="ttc" id="classRelay__log__info_html_a9c3f5e764a38e5116ce36369b960aa47"><div class="ttname"><a href="classRelay__log__info.html#a9c3f5e764a38e5116ce36369b960aa47">Relay_log_info::m_require_row_format</a></div><div class="ttdeci">bool m_require_row_format</div><div class="ttdoc">Tells if the slave is only accepting events logged with row based logging. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:727</div></div>
<div class="ttc" id="map__helpers_8h_html_ac5c7588aa44624cedfdccdc91d806a73"><div class="ttname"><a href="map__helpers_8h.html#ac5c7588aa44624cedfdccdc91d806a73">unique_ptr_with_deleter</a></div><div class="ttdeci">std::unique_ptr&lt; T, void(*)(T *)&gt; unique_ptr_with_deleter</div><div class="ttdoc">std::unique_ptr, but with a custom delete function. </div><div class="ttdef"><b>Definition:</b> map_helpers.h:118</div></div>
<div class="ttc" id="classRelay__log__info_html_aa8c47d6601a0d8d260881740e8720d4d"><div class="ttname"><a href="classRelay__log__info.html#aa8c47d6601a0d8d260881740e8720d4d">Relay_log_info::get_sid_map</a></div><div class="ttdeci">Sid_map * get_sid_map()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:742</div></div>
<div class="ttc" id="classRelay__log__info_html_a5e96bc5850a1b773e98dbbf9bb53002e"><div class="ttname"><a href="classRelay__log__info.html#a5e96bc5850a1b773e98dbbf9bb53002e">Relay_log_info::clear_processing_trx</a></div><div class="ttdeci">void clear_processing_trx()</div><div class="ttdoc">Clears the processing_trx structure fields. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:383</div></div>
<div class="ttc" id="psi_2mysql__mutex_8h_html"><div class="ttname"><a href="psi_2mysql__mutex_8h.html">mysql_mutex.h</a></div><div class="ttdoc">Instrumentation helpers for mutexes. </div></div>
<div class="ttc" id="classRelay__log__info_html_a76b1b972ff731e70e10097b4c76af108"><div class="ttname"><a href="classRelay__log__info.html#a76b1b972ff731e70e10097b4c76af108">Relay_log_info::event_relay_log_number</a></div><div class="ttdeci">uint event_relay_log_number</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:647</div></div>
<div class="ttc" id="rpl__gtid_8h_html_a4873b950f954adcfa36c1665428ce3ff"><div class="ttname"><a href="rpl__gtid_8h.html#a4873b950f954adcfa36c1665428ce3ff">rpl_sidno</a></div><div class="ttdeci">int rpl_sidno</div><div class="ttdoc">Type of SIDNO (source ID number, first component of GTID) </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:93</div></div>
<div class="ttc" id="classUntil__option_html_a8bbc78d4fbf4b08455d0ef4b09106ab5"><div class="ttname"><a href="classUntil__option.html#a8bbc78d4fbf4b08455d0ef4b09106ab5">Until_option::is_satisfied_at_start_slave</a></div><div class="ttdeci">bool is_satisfied_at_start_slave()</div><div class="ttdoc">Check if the until option is already satisfied at coordinator starting. </div><div class="ttdef"><b>Definition:</b> rpl_slave_until_options.h:66</div></div>
<div class="ttc" id="classRelay__log__info_html_aa3cd0b41f9d6ebe001f1263e8a380256"><div class="ttname"><a href="classRelay__log__info.html#aa3cd0b41f9d6ebe001f1263e8a380256">Relay_log_info::set_group_relay_log_name</a></div><div class="ttdeci">void set_group_relay_log_name(const char *log_file_name, size_t len)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1516</div></div>
<div class="ttc" id="classRpl__filter_html"><div class="ttname"><a href="classRpl__filter.html">Rpl_filter</a></div><div class="ttdoc">Rpl_filter. </div><div class="ttdef"><b>Definition:</b> rpl_filter.h:213</div></div>
<div class="ttc" id="my__inttypes_8h_html_a65f85814a8290f9797005d3b28e7e5fc"><div class="ttname"><a href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a></div><div class="ttdeci">unsigned char uchar</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:51</div></div>
<div class="ttc" id="structLEX__MASTER__INFO_html"><div class="ttname"><a href="structLEX__MASTER__INFO.html">LEX_MASTER_INFO</a></div><div class="ttdoc">Structure to hold parameters for CHANGE MASTER, START SLAVE, and STOP SLAVE. </div><div class="ttdef"><b>Definition:</b> sql_lex.h:346</div></div>
<div class="ttc" id="group__Replication_html_ga411d10cab17cb44607461d77cc26f370"><div class="ttname"><a href="group__Replication.html#ga411d10cab17cb44607461d77cc26f370">end_info</a></div><div class="ttdeci">void end_info(Master_info *mi)</div><div class="ttdef"><b>Definition:</b> rpl_slave.cc:1298</div></div>
<div class="ttc" id="classRelay__log__info_html_a33ed136846ea7c3239d712486255ab19"><div class="ttname"><a href="classRelay__log__info.html#a33ed136846ea7c3239d712486255ab19">Relay_log_info::event_relay_log_pos</a></div><div class="ttdeci">ulonglong event_relay_log_pos</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:648</div></div>
<div class="ttc" id="classRelay__log__info_html_a90c4e3bab022f6a27ec96851193532f2"><div class="ttname"><a href="classRelay__log__info.html#a90c4e3bab022f6a27ec96851193532f2">Relay_log_info::is_relay_log_truncated</a></div><div class="ttdeci">bool is_relay_log_truncated()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:740</div></div>
<div class="ttc" id="classRelay__log__info_html_ad52389b553bebc5a79b241d85febf1dd"><div class="ttname"><a href="classRelay__log__info.html#ad52389b553bebc5a79b241d85febf1dd">Relay_log_info::transaction_parser</a></div><div class="ttdeci">Replication_transaction_boundary_parser transaction_parser</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:609</div></div>
<div class="ttc" id="classRelay__log__info_html_a8c111e744f81a92f66b54efc06b48995"><div class="ttname"><a href="classRelay__log__info.html#a8c111e744f81a92f66b54efc06b48995">Relay_log_info::clear_sql_delay</a></div><div class="ttdeci">void clear_sql_delay()</div><div class="ttdoc">Reset the delay. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:824</div></div>
<div class="ttc" id="classRelay__log__info_html_a40fd6b8e94221fac2746afd5ebd544ce"><div class="ttname"><a href="classRelay__log__info.html#a40fd6b8e94221fac2746afd5ebd544ce">Relay_log_info::get_sid_lock</a></div><div class="ttdeci">Checkable_rwlock * get_sid_lock()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:744</div></div>
<div class="ttc" id="classCommit__order__manager_html"><div class="ttname"><a href="classCommit__order__manager.html">Commit_order_manager</a></div><div class="ttdef"><b>Definition:</b> rpl_slave_commit_order_manager.h:37</div></div>
<div class="ttc" id="classApplier__security__context__guard_html_a9a46ed3919c66868f479bb660181e9ca"><div class="ttname"><a href="classApplier__security__context__guard.html#a9a46ed3919c66868f479bb660181e9ca">Applier_security_context_guard::m_previous</a></div><div class="ttdeci">Security_context * m_previous</div><div class="ttdoc">Backed up security context. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2362</div></div>
<div class="ttc" id="classRelay__log__info_html_a4e67525d3c6c2f5fb369601e25e9c6ec"><div class="ttname"><a href="classRelay__log__info.html#a4e67525d3c6c2f5fb369601e25e9c6ec">Relay_log_info::pending_jobs_cond</a></div><div class="ttdeci">mysql_cond_t pending_jobs_cond</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1089</div></div>
<div class="ttc" id="namespaceudf__ext_1_1consts_html_a6ddd3738c569a0bf58c9fab6a56731df"><div class="ttname"><a href="namespaceudf__ext_1_1consts.html#a6ddd3738c569a0bf58c9fab6a56731df">udf_ext::consts::charset</a></div><div class="ttdeci">const std::string charset(&quot;charset&quot;)</div></div>
<div class="ttc" id="rpl__mts__submode_8h_html_a959672287d6c22e4e95d1a1ad28bbe0b"><div class="ttname"><a href="rpl__mts__submode_8h.html#a959672287d6c22e4e95d1a1ad28bbe0b">enum_mts_parallel_type</a></div><div class="ttdeci">enum_mts_parallel_type</div><div class="ttdef"><b>Definition:</b> rpl_mts_submode.h:46</div></div>
<div class="ttc" id="classRelay__log__info_html_a205a3d2eafb6dc53e5d8c9f5185883e2"><div class="ttname"><a href="classRelay__log__info.html#a205a3d2eafb6dc53e5d8c9f5185883e2">Relay_log_info::gtid_set</a></div><div class="ttdeci">Gtid_set * gtid_set</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:669</div></div>
<div class="ttc" id="classRelay__log__info_html_aca811fe3172d8423b2bcf80578f67d52"><div class="ttname"><a href="classRelay__log__info.html#aca811fe3172d8423b2bcf80578f67d52">Relay_log_info::started_processing</a></div><div class="ttdeci">void started_processing(Gtid_log_event *gtid_log_ev_arg)</div><div class="ttdoc">Stores the details of the transaction which has just started processing. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:353</div></div>
<div class="ttc" id="structTABLE__LIST_html_a8e3206715feef5e95f8d2c3c3f324fa6"><div class="ttname"><a href="structTABLE__LIST.html#a8e3206715feef5e95f8d2c3c3f324fa6">TABLE_LIST::next_global</a></div><div class="ttdeci">TABLE_LIST * next_global</div><div class="ttdef"><b>Definition:</b> table.h:3231</div></div>
<div class="ttc" id="classRelay__log__info_html_a7fa497a605d2730224ade21a3344f15c"><div class="ttname"><a href="classRelay__log__info.html#a7fa497a605d2730224ade21a3344f15c">Relay_log_info::clear_flag</a></div><div class="ttdeci">void clear_flag(enum_state_flag flag)</div><div class="ttdoc">Clear the value of a replication state flag. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1374</div></div>
<div class="ttc" id="classRelay__log__info_html_a71b987189f94882b9c287f5df3329d43"><div class="ttname"><a href="classRelay__log__info.html#a71b987189f94882b9c287f5df3329d43">Relay_log_info::workers_array_initialized</a></div><div class="ttdeci">bool workers_array_initialized</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1085</div></div>
<div class="ttc" id="classRelay__log__info_html_a38b8fae8b4ea8d9f45d05382219ae3bb"><div class="ttname"><a href="classRelay__log__info.html#a38b8fae8b4ea8d9f45d05382219ae3bb">Relay_log_info::clear_mts_recovery_groups</a></div><div class="ttdeci">void clear_mts_recovery_groups()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1272</div></div>
<div class="ttc" id="memcached_8c_html_a9e8f65e2f04446eb0a2f098411dacf9b"><div class="ttname"><a href="memcached_8c.html#a9e8f65e2f04446eb0a2f098411dacf9b">count</a></div><div class="ttdeci">ssize_t count</div><div class="ttdef"><b>Definition:</b> memcached.c:386</div></div>
<div class="ttc" id="classRelay__log__info_html_a25df544328cae076f070b8a133cf35e8"><div class="ttname"><a href="classRelay__log__info.html#a25df544328cae076f070b8a133cf35e8">Relay_log_info::mts_groups_assigned</a></div><div class="ttdeci">ulonglong mts_groups_assigned</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1176</div></div>
<div class="ttc" id="classRelay__log__info_html_a6e3fd864e1438b30528fcca5fe31d491"><div class="ttname"><a href="classRelay__log__info.html#a6e3fd864e1438b30528fcca5fe31d491">Relay_log_info::until_option</a></div><div class="ttdeci">Until_option * until_option</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1865</div></div>
<div class="ttc" id="classMts__submode_html"><div class="ttname"><a href="classMts__submode.html">Mts_submode</a></div><div class="ttdef"><b>Definition:</b> rpl_mts_submode.h:54</div></div>
<div class="ttc" id="classRpl__info_html_accb9a160c04d4162b70d540df5c3ea6b"><div class="ttname"><a href="classRpl__info.html#accb9a160c04d4162b70d540df5c3ea6b">Rpl_info::is_transactional</a></div><div class="ttdeci">bool is_transactional() const</div><div class="ttdef"><b>Definition:</b> rpl_info.h:110</div></div>
<div class="ttc" id="group__MYSYS_html_ga0d4478db305c8f478472c0df43861f80"><div class="ttname"><a href="group__MYSYS.html#ga0d4478db305c8f478472c0df43861f80">base_name</a></div><div class="ttdeci">#define base_name(A)</div><div class="ttdef"><b>Definition:</b> my_sys.h:706</div></div>
<div class="ttc" id="classRelay__log__info_html_a4ebb68b5f9bf497037eb38f4fbb4c746"><div class="ttname"><a href="classRelay__log__info.html#a4ebb68b5f9bf497037eb38f4fbb4c746">Relay_log_info::set_commit_order_manager</a></div><div class="ttdeci">void set_commit_order_manager(Commit_order_manager *mngr)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1666</div></div>
<div class="ttc" id="classApplier__security__context__guard_html_af2cbede164ef7f28438c10c33bb96f66"><div class="ttname"><a href="classApplier__security__context__guard.html#af2cbede164ef7f28438c10c33bb96f66">Applier_security_context_guard::m_target</a></div><div class="ttdeci">Relay_log_info const  * m_target</div><div class="ttdoc">The Relay_log_info object holding the info required to initialize the context. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2352</div></div>
<div class="ttc" id="classRelay__log__info_html_ad432297d6c9834f9293ca824b3422eee"><div class="ttname"><a href="classRelay__log__info.html#ad432297d6c9834f9293ca824b3422eee">Relay_log_info::new_group_relay_log_pos</a></div><div class="ttdeci">my_off_t new_group_relay_log_pos</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1222</div></div>
<div class="ttc" id="namespaceut_html_aa7abb0ab07329e68a6ec29d191da1e58"><div class="ttname"><a href="namespaceut.html#aa7abb0ab07329e68a6ec29d191da1e58">ut::vector</a></div><div class="ttdeci">std::vector&lt; T, ut_allocator&lt; T &gt; &gt; vector</div><div class="ttdoc">Specialization of vector which uses ut_allocator. </div><div class="ttdef"><b>Definition:</b> ut0new.h:1306</div></div>
<div class="ttc" id="structmysql__cond__t_html"><div class="ttname"><a href="structmysql__cond__t.html">mysql_cond_t</a></div><div class="ttdoc">An instrumented cond structure. </div><div class="ttdef"><b>Definition:</b> mysql_cond_bits.h:49</div></div>
<div class="ttc" id="classRelay__log__info_html_a7944b964e17da951bd50aa65963f282e"><div class="ttname"><a href="classRelay__log__info.html#a7944b964e17da951bd50aa65963f282e">Relay_log_info::mts_recovery_group_cnt</a></div><div class="ttdeci">ulong mts_recovery_group_cnt</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1142</div></div>
<div class="ttc" id="classTHD_html_a909c901657292c8a63001a183452d8ca"><div class="ttname"><a href="classTHD.html#a909c901657292c8a63001a183452d8ca">THD::system_thread</a></div><div class="ttdeci">enum enum_thread_type system_thread</div><div class="ttdef"><b>Definition:</b> sql_class.h:2214</div></div>
<div class="ttc" id="classRpl__info__handler_html"><div class="ttname"><a href="classRpl__info__handler.html">Rpl_info_handler</a></div><div class="ttdef"><b>Definition:</b> rpl_info_handler.h:57</div></div>
<div class="ttc" id="classDeferred__log__events_html_a95030653e5a69ae402c20bd5e5c2c10c"><div class="ttname"><a href="classDeferred__log__events.html#a95030653e5a69ae402c20bd5e5c2c10c">Deferred_log_events::rewind</a></div><div class="ttdeci">void rewind()</div><div class="ttdef"><b>Definition:</b> rpl_utility.cc:1184</div></div>
<div class="ttc" id="classRelay__log__info_html_aa91dff754390dc28e8d0be359215ff22"><div class="ttname"><a href="classRelay__log__info.html#aa91dff754390dc28e8d0be359215ff22">Relay_log_info::finished_processing</a></div><div class="ttdeci">void finished_processing()</div><div class="ttdoc">When the processing of a transaction is completed, that timestamp is recorded, the information is cop...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:370</div></div>
<div class="ttc" id="classRelay__log__info_html_a273ca829837a1acac71bd7dd2a918d3aa22c1615fb1c73dd3ccaeede60f5c84ed"><div class="ttname"><a href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa22c1615fb1c73dd3ccaeede60f5c84ed">Relay_log_info::UNTIL_MASTER_POS</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:848</div></div>
<div class="ttc" id="time_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div><div class="ttdoc">Include file for Sun RPC to compile out of the box. </div></div>
<div class="ttc" id="classRelay__log__info_html_a476e3034acb3c38089a3f6a0942031af"><div class="ttname"><a href="classRelay__log__info.html#a476e3034acb3c38089a3f6a0942031af">Relay_log_info::post_rollback</a></div><div class="ttdeci">void post_rollback()</div><div class="ttdoc">Execute actions at replicated atomic DLL post rollback time. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1969</div></div>
<div class="ttc" id="my__inttypes_8h_html"><div class="ttname"><a href="my__inttypes_8h.html">my_inttypes.h</a></div><div class="ttdoc">Some integer typedefs for easier portability. </div></div>
<div class="ttc" id="classMYSQL__BIN__LOG_html"><div class="ttname"><a href="classMYSQL__BIN__LOG.html">MYSQL_BIN_LOG</a></div><div class="ttdef"><b>Definition:</b> binlog.h:138</div></div>
<div class="ttc" id="classRelay__log__info_html_a9052e86c77e2e197a9faf2f732aa0c43"><div class="ttname"><a href="classRelay__log__info.html#a9052e86c77e2e197a9faf2f732aa0c43">Relay_log_info::set_row_stmt_start_timestamp</a></div><div class="ttdeci">time_t set_row_stmt_start_timestamp()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1613</div></div>
<div class="ttc" id="query__options_8h_html"><div class="ttname"><a href="query__options_8h.html">query_options.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_a4faab8451d9e84b9b919bbc40df1c5e7"><div class="ttname"><a href="classRelay__log__info.html#a4faab8451d9e84b9b919bbc40df1c5e7">Relay_log_info::set_thd_tx_priority</a></div><div class="ttdeci">void set_thd_tx_priority(int priority)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1896</div></div>
<div class="ttc" id="classRelay__log__info_html_ae2003e3412484948f8f85484e1eeff9b"><div class="ttname"><a href="classRelay__log__info.html#ae2003e3412484948f8f85484e1eeff9b">Relay_log_info::m_privilege_checks_username</a></div><div class="ttdeci">std::string m_privilege_checks_username</div><div class="ttdoc">The user name part of the user passed on to PRIVILEGE_CHECKS_USER. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:706</div></div>
<div class="ttc" id="classRelay__log__info_html_a51d97a5d58159e94c6f49732939a3045"><div class="ttname"><a href="classRelay__log__info.html#a51d97a5d58159e94c6f49732939a3045">Relay_log_info::replicate_same_server_id</a></div><div class="ttdeci">bool replicate_same_server_id</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:279</div></div>
<div class="ttc" id="classRelay__log__info_html_a6614d4565621487b9ab85fb024139916"><div class="ttname"><a href="classRelay__log__info.html#a6614d4565621487b9ab85fb024139916">Relay_log_info::long_find_row_note_printed</a></div><div class="ttdeci">bool long_find_row_note_printed</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1832</div></div>
<div class="ttc" id="classRelay__log__info_html_a18b91a34e702cace64bc95f30bf3a5f5"><div class="ttname"><a href="classRelay__log__info.html#a18b91a34e702cace64bc95f30bf3a5f5">Relay_log_info::max_updated_index</a></div><div class="ttdeci">ulonglong max_updated_index</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1135</div></div>
<div class="ttc" id="classRelay__log__info_html_a1e42ba28e35b35f852129277ad2310a6"><div class="ttname"><a href="classRelay__log__info.html#a1e42ba28e35b35f852129277ad2310a6">Relay_log_info::mts_wq_excess_cnt</a></div><div class="ttdeci">volatile long mts_wq_excess_cnt</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1127</div></div>
<div class="ttc" id="binlog__event_8h_html"><div class="ttname"><a href="binlog__event_8h.html">binlog_event.h</a></div><div class="ttdoc">Contains the classes representing events occurring in the replication stream. </div></div>
<div class="ttc" id="classRelay__log__info_html_aa64c26af8f29f6ea0599d89bb877d719"><div class="ttname"><a href="classRelay__log__info.html#aa64c26af8f29f6ea0599d89bb877d719">Relay_log_info::log_space_total</a></div><div class="ttdeci">ulonglong log_space_total</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:808</div></div>
<div class="ttc" id="structMYSQL__LEX__CSTRING_html_a8ec5bb16b4275a6809163e00592b105d"><div class="ttname"><a href="structMYSQL__LEX__CSTRING.html#a8ec5bb16b4275a6809163e00592b105d">MYSQL_LEX_CSTRING::str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> mysql_lex_string.h:40</div></div>
<div class="ttc" id="classRelay__log__info_html_a9a590ea77f4e17a4caf2750901f9ca37"><div class="ttname"><a href="classRelay__log__info.html#a9a590ea77f4e17a4caf2750901f9ca37">Relay_log_info::is_group_master_log_pos_invalid</a></div><div class="ttdeci">bool is_group_master_log_pos_invalid</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:800</div></div>
<div class="ttc" id="binlog_8h_html"><div class="ttname"><a href="binlog_8h.html">binlog.h</a></div></div>
<div class="ttc" id="my__bitmap_8h_html_ae609821c8721ab0a983f16625af10a8b"><div class="ttname"><a href="my__bitmap_8h.html#ae609821c8721ab0a983f16625af10a8b">bitmap_free</a></div><div class="ttdeci">void bitmap_free(MY_BITMAP *map)</div><div class="ttdef"><b>Definition:</b> my_bitmap.cc:157</div></div>
<div class="ttc" id="rpl__utility_8h_html"><div class="ttname"><a href="rpl__utility_8h.html">rpl_utility.h</a></div></div>
<div class="ttc" id="mdl_8h_html_a7b8d423b69ef9a2842803673e2f0dccb"><div class="ttname"><a href="mdl_8h.html#a7b8d423b69ef9a2842803673e2f0dccb">enum_mdl_type</a></div><div class="ttdeci">enum_mdl_type</div><div class="ttdoc">Type of metadata lock request. </div><div class="ttdef"><b>Definition:</b> mdl.h:181</div></div>
<div class="ttc" id="classRelay__log__info_html_ad008be98e874b09908d1db5dd24afc12"><div class="ttname"><a href="classRelay__log__info.html#ad008be98e874b09908d1db5dd24afc12">Relay_log_info::last_event_start_time</a></div><div class="ttdeci">time_t last_event_start_time</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1024</div></div>
<div class="ttc" id="classRelay__log__info_html_a80ee7108bc7cbdf1df4025c266147514"><div class="ttname"><a href="classRelay__log__info.html#a80ee7108bc7cbdf1df4025c266147514">Relay_log_info::belongs_to_client</a></div><div class="ttdeci">bool belongs_to_client()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:253</div></div>
<div class="ttc" id="classRelay__log__info_html_aeb91802d715b374dc4415bc4132b180ba5b49c439efca9c3d8962c4dea71f6111"><div class="ttname"><a href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba5b49c439efca9c3d8962c4dea71f6111">Relay_log_info::MTS_IN_GROUP</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1167</div></div>
<div class="ttc" id="rpl__rli_8h_html_adf09c680a12be12db26232ba584b27c7"><div class="ttname"><a href="rpl__rli_8h.html#adf09c680a12be12db26232ba584b27c7">Slave_job_item</a></div><div class="ttdeci">struct slave_job_item Slave_job_item</div></div>
<div class="ttc" id="structTABLE__SHARE_html_a5dbe3202ca4426417b41aac3ac536529"><div class="ttname"><a href="structTABLE__SHARE.html#a5dbe3202ca4426417b41aac3ac536529">TABLE_SHARE::table_name</a></div><div class="ttdeci">LEX_CSTRING table_name</div><div class="ttdef"><b>Definition:</b> table.h:749</div></div>
<div class="ttc" id="classRelay__log__info_html_ad1d0853d8f0b0e9bd036456c26816897"><div class="ttname"><a href="classRelay__log__info.html#ad1d0853d8f0b0e9bd036456c26816897">Relay_log_info::mts_pending_jobs_size</a></div><div class="ttdeci">ulonglong mts_pending_jobs_size</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1092</div></div>
<div class="ttc" id="classFormat__description__log__event_html"><div class="ttname"><a href="classFormat__description__log__event.html">Format_description_log_event</a></div><div class="ttdoc">For binlog version 4. </div><div class="ttdef"><b>Definition:</b> log_event.h:1612</div></div>
<div class="ttc" id="classRelay__log__info_html_a130e6a5495f51e65e56c021e4d4d84b3"><div class="ttname"><a href="classRelay__log__info.html#a130e6a5495f51e65e56c021e4d4d84b3">Relay_log_info::set_event_start_pos</a></div><div class="ttdeci">void set_event_start_pos(my_off_t pos)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1548</div></div>
<div class="ttc" id="classRelay__log__info_html_a327da5ee7ada2691232c88b7d461a0e3"><div class="ttname"><a href="classRelay__log__info.html#a327da5ee7ada2691232c88b7d461a0e3">Relay_log_info::slave_patternload_file_size</a></div><div class="ttdeci">size_t slave_patternload_file_size</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:884</div></div>
<div class="ttc" id="classGtid__log__event_html"><div class="ttname"><a href="classGtid__log__event.html">Gtid_log_event</a></div><div class="ttdoc">This is a subclass if Gtid_event and Log_event. </div><div class="ttdef"><b>Definition:</b> log_event.h:3798</div></div>
<div class="ttc" id="classRelay__log__info_html_ada979f23838e56bf348c48b31fd23c1e"><div class="ttname"><a href="classRelay__log__info.html#ada979f23838e56bf348c48b31fd23c1e">Relay_log_info::is_mts_in_group</a></div><div class="ttdeci">bool is_mts_in_group()</div><div class="ttdoc">returns true if Coordinator is scheduling events belonging to the same group and has not reached yet ...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1295</div></div>
<div class="ttc" id="classPrealloced__array_html_a36f6ec905889fc8fb57a946e23925f83"><div class="ttname"><a href="classPrealloced__array.html#a36f6ec905889fc8fb57a946e23925f83">Prealloced_array::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> prealloced_array.h:216</div></div>
<div class="ttc" id="rpl__gtid_8h_html_a3cf0e1a495b2402d8e6aa88f870316d5"><div class="ttname"><a href="rpl__gtid_8h.html#a3cf0e1a495b2402d8e6aa88f870316d5">enum_return_status</a></div><div class="ttdeci">enum_return_status</div><div class="ttdoc">Generic return type for many functions that can succeed or fail. </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:118</div></div>
<div class="ttc" id="rpl__trx__boundary__parser_8h_html"><div class="ttname"><a href="rpl__trx__boundary__parser_8h.html">rpl_trx_boundary_parser.h</a></div><div class="ttdoc">Replication transaction boundary parser. </div></div>
<div class="ttc" id="classGtid__set_html_aba662ba6a9761b9b0c21473aecc27a1b"><div class="ttname"><a href="classGtid__set.html#aba662ba6a9761b9b0c21473aecc27a1b">Gtid_set::_add_gtid</a></div><div class="ttdeci">void _add_gtid(rpl_sidno sidno, rpl_gno gno)</div><div class="ttdoc">Adds the given GTID to this Gtid_set. </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:1476</div></div>
<div class="ttc" id="classSecurity__context_html"><div class="ttname"><a href="classSecurity__context.html">Security_context</a></div><div class="ttdoc">A set of THD members describing the current authenticated user. </div><div class="ttdef"><b>Definition:</b> sql_security_ctx.h:53</div></div>
<div class="ttc" id="classRelay__log__info_html_a768d1f6426a20be0e32d7380a231c0b2"><div class="ttname"><a href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2">Relay_log_info::enum_state_flag</a></div><div class="ttdeci">enum_state_flag</div><div class="ttdoc">Flags for the state of the replication. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:221</div></div>
<div class="ttc" id="classRelay__log__info_html_a75e1a46783f044a607456e828709f0e9"><div class="ttname"><a href="classRelay__log__info.html#a75e1a46783f044a607456e828709f0e9">Relay_log_info::m_privilege_checks_user_corrupted</a></div><div class="ttdeci">bool m_privilege_checks_user_corrupted</div><div class="ttdoc">Tells whether or not the internal data regarding PRIVILEGE_CHECKS_USER is corrupted. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:718</div></div>
<div class="ttc" id="classGtid__set_html_a1dcb30d3c0809db3baa3bce6a813332b"><div class="ttname"><a href="classGtid__set.html#a1dcb30d3c0809db3baa3bce6a813332b">Gtid_set::get_sid_map</a></div><div class="ttdeci">Sid_map * get_sid_map() const</div><div class="ttdoc">Return the Sid_map associated with this Gtid_set. </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:1846</div></div>
<div class="ttc" id="classRelay__log__info_html_ae67a40918ed5af5463e43fc3cbac3248"><div class="ttname"><a href="classRelay__log__info.html#ae67a40918ed5af5463e43fc3cbac3248">Relay_log_info::opt_slave_parallel_workers</a></div><div class="ttdeci">ulong opt_slave_parallel_workers</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1131</div></div>
<div class="ttc" id="group__Replication_html_ga299ff83510191167c4a0b924658c5520"><div class="ttname"><a href="group__Replication.html#ga299ff83510191167c4a0b924658c5520">clear_info</a></div><div class="ttdeci">void clear_info(Master_info *mi)</div><div class="ttdoc">Clear the information regarding the Master_info and Relay_log_info objects represented by the paramet...</div><div class="ttdef"><b>Definition:</b> rpl_slave.cc:1310</div></div>
<div class="ttc" id="classRelay__log__info_html_ac9508eb5e8371116f090e8dd8993e66a"><div class="ttname"><a href="classRelay__log__info.html#ac9508eb5e8371116f090e8dd8993e66a">Relay_log_info::abort_pos_wait</a></div><div class="ttdeci">volatile ulong abort_pos_wait</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:832</div></div>
<div class="ttc" id="classRelay__log__info_html_a0f7b5f06f937ae5c40eff00d3167eb10"><div class="ttname"><a href="classRelay__log__info.html#a0f7b5f06f937ae5c40eff00d3167eb10">Relay_log_info::wq_size_waits_cnt</a></div><div class="ttdeci">ulong wq_size_waits_cnt</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1179</div></div>
<div class="ttc" id="structGtid_html"><div class="ttname"><a href="structGtid.html">Gtid</a></div><div class="ttdoc">TODO: Move this structure to libbinlogevents/include/control_events.h when we start using C++11...</div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:1027</div></div>
<div class="ttc" id="classSid__map_html"><div class="ttname"><a href="classSid__map.html">Sid_map</a></div><div class="ttdoc">Represents a bidirectional map between SID and SIDNO. </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:685</div></div>
<div class="ttc" id="classRelay__log__info_html_acd5795ba0a4d0a453f9c945facedfea0ab60c6236dc855510b66ab9c432f0b2d5"><div class="ttname"><a href="classRelay__log__info.html#acd5795ba0a4d0a453f9c945facedfea0ab60c6236dc855510b66ab9c432f0b2d5">Relay_log_info::COMMIT_TS_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:314</div></div>
<div class="ttc" id="classRelay__log__info_html_a4a7324db04d581524aabb99168198309"><div class="ttname"><a href="classRelay__log__info.html#a4a7324db04d581524aabb99168198309">Relay_log_info::reported_unsafe_warning</a></div><div class="ttdeci">bool reported_unsafe_warning</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1604</div></div>
<div class="ttc" id="classRelay__log__info_html_a05ea3944a957a7ed3f970442cfb4ebc6"><div class="ttname"><a href="classRelay__log__info.html#a05ea3944a957a7ed3f970442cfb4ebc6">Relay_log_info::curr_group_da</a></div><div class="ttdeci">Prealloced_array&lt; Slave_job_item, 8 &gt; curr_group_da</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1108</div></div>
<div class="ttc" id="classRelay__log__info_html_a8fd8c969c11e538879d1012aa2012b25"><div class="ttname"><a href="classRelay__log__info.html#a8fd8c969c11e538879d1012aa2012b25">Relay_log_info::current_mts_submode</a></div><div class="ttdeci">Mts_submode * current_mts_submode</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1258</div></div>
<div class="ttc" id="classRelay__log__info_html_a387eb2ee580b81081ea7c6ac15fe3bb0"><div class="ttname"><a href="classRelay__log__info.html#a387eb2ee580b81081ea7c6ac15fe3bb0">Relay_log_info::clear_gtid_monitoring_info</a></div><div class="ttdeci">void clear_gtid_monitoring_info()</div><div class="ttdoc">Clears the Gtid_monitoring_info fields. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:388</div></div>
<div class="ttc" id="classRpl__info__factory_html"><div class="ttname"><a href="classRpl__info__factory.html">Rpl_info_factory</a></div><div class="ttdef"><b>Definition:</b> rpl_info_factory.h:43</div></div>
<div class="ttc" id="classRLI__current__event__raii_html_a93f1831c0f85d81a096b106730ca4894"><div class="ttname"><a href="classRLI__current__event__raii.html#a93f1831c0f85d81a096b106730ca4894">RLI_current_event_raii::~RLI_current_event_raii</a></div><div class="ttdeci">~RLI_current_event_raii()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2125</div></div>
<div class="ttc" id="m__string_8h_html"><div class="ttname"><a href="m__string_8h.html">m_string.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_a7f6eca9519fb6cf63ea08764f8f5ecb3"><div class="ttname"><a href="classRelay__log__info.html#a7f6eca9519fb6cf63ea08764f8f5ecb3">Relay_log_info::set_group_master_log_name</a></div><div class="ttdeci">void set_group_master_log_name(const char *log_file_name)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1502</div></div>
<div class="ttc" id="classRelay__log__info_html_ab719054675a57eb0ba67051005dbe344"><div class="ttname"><a href="classRelay__log__info.html#ab719054675a57eb0ba67051005dbe344">Relay_log_info::gtid_monitoring_info</a></div><div class="ttdeci">Gtid_monitoring_info * gtid_monitoring_info</div><div class="ttdoc">Stores information on the last processed transaction or the transaction that is currently being proce...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:694</div></div>
<div class="ttc" id="classUntil__option_html_a32e719eae569d4621c04b72325527634"><div class="ttname"><a href="classUntil__option.html#a32e719eae569d4621c04b72325527634">Until_option::is_satisfied_after_dispatching_event</a></div><div class="ttdeci">bool is_satisfied_after_dispatching_event()</div><div class="ttdoc">check if the until option is satisfied after applied or dispatched a event. </div><div class="ttdef"><b>Definition:</b> rpl_slave_until_options.h:96</div></div>
<div class="ttc" id="rpl__gtid_8h_html"><div class="ttname"><a href="rpl__gtid_8h.html">rpl_gtid.h</a></div></div>
<div class="ttc" id="thread__type_8h_html_adade01b1d73317cd10a128e7843f240baadaddfd06f0dc6795a60005e7041f187"><div class="ttname"><a href="thread__type_8h.html#adade01b1d73317cd10a128e7843f240baadaddfd06f0dc6795a60005e7041f187">SYSTEM_THREAD_SLAVE_SQL</a></div><div class="ttdef"><b>Definition:</b> thread_type.h:36</div></div>
<div class="ttc" id="classRelay__log__info_html_ae9371ab87be9e996e6c49c225caa6a4f"><div class="ttname"><a href="classRelay__log__info.html#ae9371ab87be9e996e6c49c225caa6a4f">Relay_log_info::commit_order_mngr</a></div><div class="ttdeci">Commit_order_manager * commit_order_mngr</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1725</div></div>
<div class="ttc" id="classRelay__log__info_html_a9fb4b69ab88ea6c8055cc94cb67d0590"><div class="ttname"><a href="classRelay__log__info.html#a9fb4b69ab88ea6c8055cc94cb67d0590">Relay_log_info::group_master_log_pos</a></div><div class="ttdeci">volatile my_off_t group_master_log_pos</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:666</div></div>
<div class="ttc" id="mysql__cond__bits_8h_html"><div class="ttname"><a href="mysql__cond__bits_8h.html">mysql_cond_bits.h</a></div><div class="ttdoc">Instrumentation helpers for conditions. </div></div>
<div class="ttc" id="classRelay__log__info_html_a1a80eca19c927d940b8058b9010e49de"><div class="ttname"><a href="classRelay__log__info.html#a1a80eca19c927d940b8058b9010e49de">Relay_log_info::notify_relay_log_change</a></div><div class="ttdeci">void notify_relay_log_change()</div><div class="ttdoc">Invalidates cached until_log_name and event_relay_log_name comparison result. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:896</div></div>
<div class="ttc" id="classRelay__log__info_html_ae54ea3c2cd3690bc0bc8b74eb2b75e48"><div class="ttname"><a href="classRelay__log__info.html#ae54ea3c2cd3690bc0bc8b74eb2b75e48">Relay_log_info::cleanup_after_session</a></div><div class="ttdeci">void cleanup_after_session()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1334</div></div>
<div class="ttc" id="rpl__gtid_8h_html_ad5623b8a2ac0c6cdeb5b57bfcfa1c811a995827d351344bbf1bb42d4bcfb58d1f"><div class="ttname"><a href="rpl__gtid_8h.html#ad5623b8a2ac0c6cdeb5b57bfcfa1c811a995827d351344bbf1bb42d4bcfb58d1f">ASSIGNED_GTID</a></div><div class="ttdoc">Specifies that the transaction has been assigned a GTID (UUID:NUMBER). </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:3651</div></div>
<div class="ttc" id="classRelay__log__info_html_a523b1810022f40f6c67605e6b35c89e3"><div class="ttname"><a href="classRelay__log__info.html#a523b1810022f40f6c67605e6b35c89e3">Relay_log_info::add_logged_gtid</a></div><div class="ttdeci">void add_logged_gtid(rpl_sidno sidno, rpl_gno gno)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:746</div></div>
<div class="ttc" id="classApplier__security__context__guard_html_a7e80e14a6840d60d9be012dadbf86a97"><div class="ttname"><a href="classApplier__security__context__guard.html#a7e80e14a6840d60d9be012dadbf86a97">Applier_security_context_guard::m_applier_security_ctx</a></div><div class="ttdeci">Security_context m_applier_security_ctx</div><div class="ttdoc">Applier security context based on PRIVILEGE_CHECK_USER user. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2358</div></div>
<div class="ttc" id="classString_html"><div class="ttname"><a href="classString.html">String</a></div><div class="ttdoc">Using this class is fraught with peril, and you need to be very careful when doing so...</div><div class="ttdef"><b>Definition:</b> sql_string.h:164</div></div>
<div class="ttc" id="classUntil__option_html"><div class="ttname"><a href="classUntil__option.html">Until_option</a></div><div class="ttdoc">This is the abstract base class for slave start until options. </div><div class="ttdef"><b>Definition:</b> rpl_slave_until_options.h:55</div></div>
<div class="ttc" id="classRelay__log__info_html_a8e6172455aa9667ddb5bc53ad8e737de"><div class="ttname"><a href="classRelay__log__info.html#a8e6172455aa9667ddb5bc53ad8e737de">Relay_log_info::mts_last_online_stat</a></div><div class="ttdeci">time_t mts_last_online_stat</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1211</div></div>
<div class="ttc" id="classRelay__log__info_html_ae1435014c6f1b00509cc0533d300a119"><div class="ttname"><a href="classRelay__log__info.html#ae1435014c6f1b00509cc0533d300a119">Relay_log_info::mi</a></div><div class="ttdeci">Master_info * mi</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:303</div></div>
<div class="ttc" id="classRelay__log__info_html_a085cce31f46960cf03b458e908f55e1a"><div class="ttname"><a href="classRelay__log__info.html#a085cce31f46960cf03b458e908f55e1a">Relay_log_info::mts_events_assigned</a></div><div class="ttdeci">ulonglong mts_events_assigned</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1175</div></div>
<div class="ttc" id="classUntil__option_html_a6ba3fc64114bfb69ac3874d3f5fe296c"><div class="ttname"><a href="classUntil__option.html#a6ba3fc64114bfb69ac3874d3f5fe296c">Until_option::is_satisfied_before_dispatching_event</a></div><div class="ttdeci">bool is_satisfied_before_dispatching_event(const Log_event *ev)</div><div class="ttdoc">check if the until option is satisfied before applying or dispatching a event. </div><div class="ttdef"><b>Definition:</b> rpl_slave_until_options.h:82</div></div>
<div class="ttc" id="lex__string_8h_html"><div class="ttname"><a href="lex__string_8h.html">lex_string.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_affa9fc41666186c0dd3e2d1eaf51b9e4"><div class="ttname"><a href="classRelay__log__info.html#affa9fc41666186c0dd3e2d1eaf51b9e4">Relay_log_info::mts_gaq_LOCK</a></div><div class="ttdeci">mysql_mutex_t mts_gaq_LOCK</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:270</div></div>
<div class="ttc" id="classRelay__log__info_html_ad39832d845e98bda4155f53e46be43ce"><div class="ttname"><a href="classRelay__log__info.html#ad39832d845e98bda4155f53e46be43ce">Relay_log_info::set_group_relay_log_name</a></div><div class="ttdeci">void set_group_relay_log_name(const char *log_file_name)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1512</div></div>
<div class="ttc" id="structTABLE_html"><div class="ttname"><a href="structTABLE.html">TABLE</a></div><div class="ttdef"><b>Definition:</b> table.h:1363</div></div>
<div class="ttc" id="group__psi__abi__mutex_html_gaab1542573f750448abe64c7dc3f3b819"><div class="ttname"><a href="group__psi__abi__mutex.html#gaab1542573f750448abe64c7dc3f3b819">PSI_mutex_key</a></div><div class="ttdeci">unsigned int PSI_mutex_key</div><div class="ttdoc">Instrumented mutex key. </div><div class="ttdef"><b>Definition:</b> psi_mutex_bits.h:49</div></div>
<div class="ttc" id="group__Replication_html_ga13c6cf13ed6f5f55cc60eb1597b6b379"><div class="ttname"><a href="group__Replication.html#ga13c6cf13ed6f5f55cc60eb1597b6b379">sql_slave_skip_counter</a></div><div class="ttdeci">uint sql_slave_skip_counter</div><div class="ttdoc">a copy of active_mi-&gt;rli-&gt;slave_skip_counter, for showing in SHOW GLOBAL VARIABLES, INFORMATION_SCHEMA.GLOBAL_VARIABLES and @sql_slave_skip_counter without taking all the mutexes needed to access active_mi-&gt;rli-&gt;slave_skip_counter properly. </div><div class="ttdef"><b>Definition:</b> rpl_slave.cc:8551</div></div>
<div class="ttc" id="classRelay__log__info_html_ae3f77566131029b5edc404c7277122b1"><div class="ttname"><a href="classRelay__log__info.html#ae3f77566131029b5edc404c7277122b1">Relay_log_info::is_processing_trx</a></div><div class="ttdeci">bool is_processing_trx()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:375</div></div>
<div class="ttc" id="classSlave__committed__queue_html"><div class="ttname"><a href="classSlave__committed__queue.html">Slave_committed_queue</a></div><div class="ttdoc">Group Assigned Queue whose first element identifies first gap in committed sequence. </div><div class="ttdef"><b>Definition:</b> rpl_rli_pdb.h:336</div></div>
<div class="ttc" id="classRelay__log__info_html_a8a2b8efda6a02b8ba87c981f2e86bde1"><div class="ttname"><a href="classRelay__log__info.html#a8a2b8efda6a02b8ba87c981f2e86bde1">Relay_log_info::is_mts_recovery</a></div><div class="ttdeci">bool is_mts_recovery() const</div><div class="ttdoc">returns true if there is any gap-group of events to execute at slave starting phase. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1270</div></div>
<div class="ttc" id="task_8h_html_aeda1029f1c228afd7422f2ba5b90df21"><div class="ttname"><a href="task_8h.html#aeda1029f1c228afd7422f2ba5b90df21">is_locked</a></div><div class="ttdeci">int is_locked(int fd)</div></div>
<div class="ttc" id="classRelay__log__info_html_a54e97ea210c1eebda090b14ad21e76ef"><div class="ttname"><a href="classRelay__log__info.html#a54e97ea210c1eebda090b14ad21e76ef">Relay_log_info::slave_worker_hash_lock</a></div><div class="ttdeci">mysql_mutex_t slave_worker_hash_lock</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1060</div></div>
<div class="ttc" id="classRelay__log__info_html_a273ca829837a1acac71bd7dd2a918d3aa7bdd8cac7b691b770a4596ac1dfa66c3"><div class="ttname"><a href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa7bdd8cac7b691b770a4596ac1dfa66c3">Relay_log_info::UNTIL_SQL_BEFORE_GTIDS</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:850</div></div>
<div class="ttc" id="classRelay__log__info_html_abd7a05f1f9c3c2097a6013028fdb8c73"><div class="ttname"><a href="classRelay__log__info.html#abd7a05f1f9c3c2097a6013028fdb8c73">Relay_log_info::retried_processing</a></div><div class="ttdeci">void retried_processing(uint transient_errno_arg, const char *transient_err_message_arg, ulong trans_retries_arg)</div><div class="ttdoc">When a transaction is retried, the error number and message, and total number of retries are stored...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:399</div></div>
<div class="ttc" id="classRelay__log__info_html_a3cc1aa64774cf98d03ec2495bb7cdb95"><div class="ttname"><a href="classRelay__log__info.html#a3cc1aa64774cf98d03ec2495bb7cdb95">Relay_log_info::cleanup_after_query</a></div><div class="ttdeci">void cleanup_after_query()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1330</div></div>
<div class="ttc" id="classRelay__log__info_html_a24b7931dde8fdf5aeda44407dfcb67d9"><div class="ttname"><a href="classRelay__log__info.html#a24b7931dde8fdf5aeda44407dfcb67d9">Relay_log_info::is_in_stmt</a></div><div class="ttdeci">bool is_in_stmt() const</div><div class="ttdoc">Auxiliary function used by is_in_group. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1390</div></div>
<div class="ttc" id="classRelay__log__info_html_a33483057036d96ba0b3988b8bfa4b140"><div class="ttname"><a href="classRelay__log__info.html#a33483057036d96ba0b3988b8bfa4b140">Relay_log_info::recovery_groups_inited</a></div><div class="ttdeci">bool recovery_groups_inited</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1141</div></div>
<div class="ttc" id="classRelay__log__info_html_aa1465e6e9f69406bd28330548d46b5e6"><div class="ttname"><a href="classRelay__log__info.html#aa1465e6e9f69406bd28330548d46b5e6">Relay_log_info::mts_worker_underrun_level</a></div><div class="ttdeci">long mts_worker_underrun_level</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1128</div></div>
<div class="ttc" id="classRelay__log__info_html_ae8cfd4bfc250442fde6e897a36afae3d"><div class="ttname"><a href="classRelay__log__info.html#ae8cfd4bfc250442fde6e897a36afae3d">Relay_log_info::future_event_relay_log_pos</a></div><div class="ttdeci">ulonglong future_event_relay_log_pos</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:649</div></div>
<div class="ttc" id="classRelay__log__info_html_ac9022af7ebf7fd6cdcdf492a94683c7a"><div class="ttname"><a href="classRelay__log__info.html#ac9022af7ebf7fd6cdcdf492a94683c7a">Relay_log_info::inc_event_relay_log_pos</a></div><div class="ttdeci">void inc_event_relay_log_pos()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:921</div></div>
<div class="ttc" id="classRpl__info_html"><div class="ttname"><a href="classRpl__info.html">Rpl_info</a></div><div class="ttdef"><b>Definition:</b> rpl_info.h:42</div></div>
<div class="ttc" id="classRelay__log__info_html_a43eb5fe024b53fecb42d1295742065d0"><div class="ttname"><a href="classRelay__log__info.html#a43eb5fe024b53fecb42d1295742065d0">Relay_log_info::m_flags</a></div><div class="ttdeci">uint32 m_flags</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1754</div></div>
<div class="ttc" id="my__bitmap_8h_html"><div class="ttname"><a href="my__bitmap_8h.html">my_bitmap.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_ada985f35bb25a49503b6796ebdd7e12f"><div class="ttname"><a href="classRelay__log__info.html#ada985f35bb25a49503b6796ebdd7e12f">Relay_log_info::last_master_timestamp</a></div><div class="ttdeci">time_t last_master_timestamp</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:818</div></div>
<div class="ttc" id="classRelay__log__info_html_a6610eb6c3f1e668cf82031f6d4a14e25"><div class="ttname"><a href="classRelay__log__info.html#a6610eb6c3f1e668cf82031f6d4a14e25">Relay_log_info::mts_recovery_group_seen_begin</a></div><div class="ttdeci">bool mts_recovery_group_seen_begin</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1144</div></div>
<div class="ttc" id="namespacebinary__log_html_ae2e9773ce2b58a3f7faad5390095c4dbae6781bd10cb94154d08ba2fd10f518fb"><div class="ttname"><a href="namespacebinary__log.html#ae2e9773ce2b58a3f7faad5390095c4dbae6781bd10cb94154d08ba2fd10f518fb">binary_log::QUERY_EVENT</a></div><div class="ttdef"><b>Definition:</b> binlog_event.h:279</div></div>
<div class="ttc" id="my__dbug_8h_html_a3770d2ff545ed3e4b714d20014e663df"><div class="ttname"><a href="my__dbug_8h.html#a3770d2ff545ed3e4b714d20014e663df">DBUG_PRINT</a></div><div class="ttdeci">#define DBUG_PRINT(keyword, arglist)</div><div class="ttdef"><b>Definition:</b> my_dbug.h:181</div></div>
<div class="ttc" id="classRelay__log__info_html_a21ece0de1d3523ea5d5624cafa21539d"><div class="ttname"><a href="classRelay__log__info.html#a21ece0de1d3523ea5d5624cafa21539d">Relay_log_info::mts_wq_no_underrun_cnt</a></div><div class="ttdeci">ulong mts_wq_no_underrun_cnt</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1185</div></div>
<div class="ttc" id="classRelay__log__info_html_a273ca829837a1acac71bd7dd2a918d3aaec02ecb2b8d310e7777d61bc4dd9ad74"><div class="ttname"><a href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aaec02ecb2b8d310e7777d61bc4dd9ad74">Relay_log_info::UNTIL_RELAY_POS</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:849</div></div>
<div class="ttc" id="classPrealloced__array_html"><div class="ttname"><a href="classPrealloced__array.html">Prealloced_array&lt; Slave_worker *, 4 &gt;</a></div></div>
<div class="ttc" id="classRelay__log__info_html_abd5bb6cca4f37241062a63dc7c123b09"><div class="ttname"><a href="classRelay__log__info.html#abd5bb6cca4f37241062a63dc7c123b09">Relay_log_info::pre_commit</a></div><div class="ttdeci">bool pre_commit()</div><div class="ttdoc">The method implements a pre-commit hook to add up a new statement typically to a DDL transaction to u...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1981</div></div>
<div class="ttc" id="my__dbug_8h_html_af5d75f213550ec27715b65d9bdfa45ec"><div class="ttname"><a href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a></div><div class="ttdeci">#define DBUG_ASSERT(A)</div><div class="ttdef"><b>Definition:</b> my_dbug.h:199</div></div>
<div class="ttc" id="classRelay__log__info_html_ad73aa78214cc6b08f3edf7404b343378"><div class="ttname"><a href="classRelay__log__info.html#ad73aa78214cc6b08f3edf7404b343378">Relay_log_info::mts_recovery_index</a></div><div class="ttdeci">ulong mts_recovery_index</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1143</div></div>
<div class="ttc" id="classApplier__security__context__guard_html_aaf94fefe846515973001f21d27d295cd"><div class="ttname"><a href="classApplier__security__context__guard.html#aaf94fefe846515973001f21d27d295cd">Applier_security_context_guard::m_logged_in_acl_user</a></div><div class="ttdeci">bool m_logged_in_acl_user</div><div class="ttdoc">Flag that states if there is a logged user. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2366</div></div>
<div class="ttc" id="classPrealloced__array_html_abe9bdf6bb8bca24028cbf148f2cd2bb2"><div class="ttname"><a href="classPrealloced__array.html#abe9bdf6bb8bca24028cbf148f2cd2bb2">Prealloced_array::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> prealloced_array.h:217</div></div>
<div class="ttc" id="rpl__tblmap_8h_html"><div class="ttname"><a href="rpl__tblmap_8h.html">rpl_tblmap.h</a></div></div>
<div class="ttc" id="m__string_8h_html_accb13dc1bbc754b77a9ecd9c3e832595"><div class="ttname"><a href="m__string_8h.html#accb13dc1bbc754b77a9ecd9c3e832595">strmake</a></div><div class="ttdeci">char * strmake(char *dst, const char *src, size_t length)</div><div class="ttdef"><b>Definition:</b> strmake.cc:42</div></div>
<div class="ttc" id="structdb__worker__hash__entry_html"><div class="ttname"><a href="structdb__worker__hash__entry.html">db_worker_hash_entry</a></div><div class="ttdoc">Legends running throughout the module: </div><div class="ttdef"><b>Definition:</b> rpl_rli_pdb.h:73</div></div>
<div class="ttc" id="classRelay__log__info_html_a37beeca009c8ec11415d6fdacc361077"><div class="ttname"><a href="classRelay__log__info.html#a37beeca009c8ec11415d6fdacc361077">Relay_log_info::get_sql_delay</a></div><div class="ttdeci">time_t get_sql_delay()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1581</div></div>
<div class="ttc" id="structoption_html"><div class="ttname"><a href="structoption.html">option</a></div><div class="ttdoc">structure to define some default &quot;config_option&quot; option settings </div><div class="ttdef"><b>Definition:</b> innodb_config.h:180</div></div>
<div class="ttc" id="rpl__rli_8h_html_a1579bccea2a3d80dadb65e68be3d898b"><div class="ttname"><a href="rpl__rli_8h.html#a1579bccea2a3d80dadb65e68be3d898b">operator!</a></div><div class="ttdeci">bool operator!(Relay_log_info::enum_priv_checks_status status)</div><div class="ttdoc">Negation operator for enum_priv_checks_status, to facilitate validation against SUCCESS. </div><div class="ttdef"><b>Definition:</b> rpl_rli.cc:2834</div></div>
<div class="ttc" id="classRelay__log__info_html_a802b06a9de3faf9576674f71feb7271f"><div class="ttname"><a href="classRelay__log__info.html#a802b06a9de3faf9576674f71feb7271f">Relay_log_info::mts_wq_overfill_cnt</a></div><div class="ttdeci">ulong mts_wq_overfill_cnt</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1193</div></div>
<div class="ttc" id="classRelay__log__info_html"><div class="ttname"><a href="classRelay__log__info.html">Relay_log_info</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:165</div></div>
<div class="ttc" id="classUntil__position_html"><div class="ttname"><a href="classUntil__position.html">Until_position</a></div><div class="ttdoc">It is an abstract class for until master position and until relay log position. </div><div class="ttdef"><b>Definition:</b> rpl_slave_until_options.h:130</div></div>
<div class="ttc" id="classRelay__log__info_html_a40e9c968385774492b3be06a7e9ddf5e"><div class="ttname"><a href="classRelay__log__info.html#a40e9c968385774492b3be06a7e9ddf5e">Relay_log_info::trans_retries</a></div><div class="ttdeci">ulong trans_retries</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:866</div></div>
<div class="ttc" id="rpl__rli_8h_html_aa619eec2ff0e4cc65cf9ccbd3519d199"><div class="ttname"><a href="rpl__rli_8h.html#aa619eec2ff0e4cc65cf9ccbd3519d199">is_mts_worker</a></div><div class="ttdeci">bool is_mts_worker(const THD *thd)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2027</div></div>
<div class="ttc" id="do__ctype_8cc_html_ab5ad9aa3d3e725ca44ebfa85e0b1020d"><div class="ttname"><a href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a></div><div class="ttdeci">char * pos</div><div class="ttdef"><b>Definition:</b> do_ctype.cc:76</div></div>
<div class="ttc" id="classRelay__log__info_html_a5524feabb3d2102a396b4e308dbcc3eb"><div class="ttname"><a href="classRelay__log__info.html#a5524feabb3d2102a396b4e308dbcc3eb">Relay_log_info::exit_counter</a></div><div class="ttdeci">ulong exit_counter</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1134</div></div>
<div class="ttc" id="classRelay__log__info_html_ab0e8e0326e5e2baca11fbf7a36cc6f8b"><div class="ttname"><a href="classRelay__log__info.html#ab0e8e0326e5e2baca11fbf7a36cc6f8b">Relay_log_info::is_until_satisfied_after_dispatching_event</a></div><div class="ttdeci">bool is_until_satisfied_after_dispatching_event()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1910</div></div>
<div class="ttc" id="prealloced__array_8h_html"><div class="ttname"><a href="prealloced__array_8h.html">prealloced_array.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_a0b9794ad546a88d09c36cc3da37ad167"><div class="ttname"><a href="classRelay__log__info.html#a0b9794ad546a88d09c36cc3da37ad167">Relay_log_info::slave_skip_counter</a></div><div class="ttdeci">volatile uint32 slave_skip_counter</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:831</div></div>
<div class="ttc" id="thread__type_8h_html"><div class="ttname"><a href="thread__type_8h.html">thread_type.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_a879ad96cea28534fcbe1c6e61b1a492e"><div class="ttname"><a href="classRelay__log__info.html#a879ad96cea28534fcbe1c6e61b1a492e">Relay_log_info::log_space_lock</a></div><div class="ttdeci">mysql_mutex_t log_space_lock</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:833</div></div>
<div class="ttc" id="classmalloc__unordered__map_html"><div class="ttname"><a href="classmalloc__unordered__map.html">malloc_unordered_map</a></div><div class="ttdoc">std::unordered_map, but with my_malloc, so that you can track the memory used using PSI memory keys...</div><div class="ttdef"><b>Definition:</b> map_helpers.h:175</div></div>
<div class="ttc" id="system__variables_8h_html"><div class="ttname"><a href="system__variables_8h.html">system_variables.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_a9e7cbad5f7f6a45c21e26ac67403cf10"><div class="ttname"><a href="classRelay__log__info.html#a9e7cbad5f7f6a45c21e26ac67403cf10">Relay_log_info::get_worker</a></div><div class="ttdeci">Slave_worker * get_worker(size_t n)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1236</div></div>
<div class="ttc" id="classRelay__log__info_html_a4e3253f3c9964e419e4047669806f12b"><div class="ttname"><a href="classRelay__log__info.html#a4e3253f3c9964e419e4047669806f12b">Relay_log_info::original_commit_timestamp</a></div><div class="ttdeci">uint64 original_commit_timestamp</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1027</div></div>
<div class="ttc" id="classRelay__log__info_html_af43dbbb682ab79634c5270c56d0e8c1f"><div class="ttname"><a href="classRelay__log__info.html#af43dbbb682ab79634c5270c56d0e8c1f">Relay_log_info::sql_delay</a></div><div class="ttdeci">time_t sql_delay</div><div class="ttdoc">Delay slave SQL thread by this amount of seconds. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1742</div></div>
<div class="ttc" id="classRelay__log__info_html_aeb91802d715b374dc4415bc4132b180ba0e10909319913fc4db783f22ef314321"><div class="ttname"><a href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba0e10909319913fc4db783f22ef314321">Relay_log_info::MTS_NOT_IN_GROUP</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1165</div></div>
<div class="ttc" id="rpl__slave__until__options_8h_html"><div class="ttname"><a href="rpl__slave__until__options_8h.html">rpl_slave_until_options.h</a></div></div>
<div class="ttc" id="rpl__rli_8h_html_ab5d66481fbc8e98fe5aa8073a67b037f"><div class="ttname"><a href="rpl__rli_8h.html#ab5d66481fbc8e98fe5aa8073a67b037f">is_atomic_ddl_commit_on_slave</a></div><div class="ttdeci">bool is_atomic_ddl_commit_on_slave(THD *thd)</div><div class="ttdoc">Checks whether the transaction identified by the argument is executed by a slave applier thread is an...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2075</div></div>
<div class="ttc" id="classRelay__log__info_html_afd826cfd193f05cae10230d6ddd5465a"><div class="ttname"><a href="classRelay__log__info.html#afd826cfd193f05cae10230d6ddd5465a">Relay_log_info::set_event_relay_log_number</a></div><div class="ttdeci">void set_event_relay_log_number(uint number)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1533</div></div>
<div class="ttc" id="classRLI__current__event__raii_html"><div class="ttname"><a href="classRLI__current__event__raii.html">RLI_current_event_raii</a></div><div class="ttdoc">RAII class to control the slave applier execution context binding with a being handled event...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2116</div></div>
<div class="ttc" id="classRelay__log__info_html_acbf96584fe2d6bb130e76953041d24e3"><div class="ttname"><a href="classRelay__log__info.html#acbf96584fe2d6bb130e76953041d24e3">Relay_log_info::exit_count_lock</a></div><div class="ttdeci">mysql_mutex_t exit_count_lock</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1090</div></div>
<div class="ttc" id="structMY__BITMAP_html"><div class="ttname"><a href="structMY__BITMAP.html">MY_BITMAP</a></div><div class="ttdef"><b>Definition:</b> my_bitmap.h:41</div></div>
<div class="ttc" id="classRelay__log__info_html_a59ee8e7a9d8e4adde7c85387aadb006e"><div class="ttname"><a href="classRelay__log__info.html#a59ee8e7a9d8e4adde7c85387aadb006e">Relay_log_info::gtid_retrieved_initialized</a></div><div class="ttdeci">bool gtid_retrieved_initialized</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:679</div></div>
<div class="ttc" id="classRelay__log__info_html_a91a3634c215d02d908e589d00851e153"><div class="ttname"><a href="classRelay__log__info.html#a91a3634c215d02d908e589d00851e153">Relay_log_info::new_group_master_log_pos</a></div><div class="ttdeci">my_off_t new_group_master_log_pos</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1220</div></div>
<div class="ttc" id="structTABLE_html_aebc263efffc909babcfb7671ed0fbd1a"><div class="ttname"><a href="structTABLE.html#aebc263efffc909babcfb7671ed0fbd1a">TABLE::s</a></div><div class="ttdeci">TABLE_SHARE * s</div><div class="ttdef"><b>Definition:</b> table.h:1364</div></div>
<div class="ttc" id="classRelay__log__info_html_a65bfcf035b94919018f07fd25ddf9cfd"><div class="ttname"><a href="classRelay__log__info.html#a65bfcf035b94919018f07fd25ddf9cfd">Relay_log_info::get_thd_tx_priority</a></div><div class="ttdeci">int get_thd_tx_priority()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1898</div></div>
<div class="ttc" id="classRelay__log__info_html_a0d1f80d296311d8b2dfa5f9b6a9e5f42"><div class="ttname"><a href="classRelay__log__info.html#a0d1f80d296311d8b2dfa5f9b6a9e5f42">Relay_log_info::save_temporary_tables</a></div><div class="ttdeci">TABLE * save_temporary_tables</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:300</div></div>
<div class="ttc" id="classtable__mapping_html"><div class="ttname"><a href="classtable__mapping.html">table_mapping</a></div><div class="ttdoc">Maps table id&amp;#39;s (integers) to table pointers. </div><div class="ttdef"><b>Definition:</b> rpl_tblmap.h:50</div></div>
<div class="ttc" id="classRelay__log__info_html_aff59190d1b65e2e5c8aacac048351b3a"><div class="ttname"><a href="classRelay__log__info.html#aff59190d1b65e2e5c8aacac048351b3a">Relay_log_info::unflag_detached_engine_ha_data</a></div><div class="ttdeci">bool unflag_detached_engine_ha_data()</div><div class="ttdoc">Drops the engine ha_data flag when it is up. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1952</div></div>
<div class="ttc" id="classRelay__log__info_html_a848ec09d6b0b7f92467ba77a06f12e22"><div class="ttname"><a href="classRelay__log__info.html#a848ec09d6b0b7f92467ba77a06f12e22">Relay_log_info::get_future_event_relay_log_pos</a></div><div class="ttdeci">ulonglong get_future_event_relay_log_pos()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1491</div></div>
<div class="ttc" id="classRelay__log__info_html_a4f2e2cf31c3781ff66835a2dcda4d782"><div class="ttname"><a href="classRelay__log__info.html#a4f2e2cf31c3781ff66835a2dcda4d782">Relay_log_info::workers_copy_pfs</a></div><div class="ttdeci">std::vector&lt; Slave_worker * &gt; workers_copy_pfs</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1074</div></div>
<div class="ttc" id="classLog__event_html"><div class="ttname"><a href="classLog__event.html">Log_event</a></div><div class="ttdoc">This is the abstract base class for binary log events. </div><div class="ttdef"><b>Definition:</b> log_event.h:659</div></div>
<div class="ttc" id="classRelay__log__info_html_acd5795ba0a4d0a453f9c945facedfea0a8f3f10b43bafa45077c18313d6d46755"><div class="ttname"><a href="classRelay__log__info.html#acd5795ba0a4d0a453f9c945facedfea0a8f3f10b43bafa45077c18313d6d46755">Relay_log_info::COMMIT_TS_NOT_FOUND</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:316</div></div>
<div class="ttc" id="classRelay__log__info_html_a273ca829837a1acac71bd7dd2a918d3aa8c0e9a19c1b528688d96417fbd14cd26"><div class="ttname"><a href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa8c0e9a19c1b528688d96417fbd14cd26">Relay_log_info::UNTIL_SQL_AFTER_GTIDS</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:851</div></div>
<div class="ttc" id="classRelay__log__info_html_a50adac4e8fcd877976d35b3f3fb805dd"><div class="ttname"><a href="classRelay__log__info.html#a50adac4e8fcd877976d35b3f3fb805dd">Relay_log_info::mts_wq_overrun_cnt</a></div><div class="ttdeci">volatile ulong mts_wq_overrun_cnt</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1178</div></div>
<div class="ttc" id="classRelay__log__info_html_a54c24d306bf43b2b0b25e58916572e7d"><div class="ttname"><a href="classRelay__log__info.html#a54c24d306bf43b2b0b25e58916572e7d">Relay_log_info::m_privilege_checks_hostname</a></div><div class="ttdeci">std::string m_privilege_checks_hostname</div><div class="ttdoc">The host name part of the user passed on to PRIVILEGE_CHECKS_USER. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:711</div></div>
<div class="ttc" id="rpl__rli_8h_html_ad5209062c63b43f631eef24a6f0e91fd"><div class="ttname"><a href="rpl__rli_8h.html#ad5209062c63b43f631eef24a6f0e91fd">mysql_show_relaylog_events</a></div><div class="ttdeci">bool mysql_show_relaylog_events(THD *thd)</div><div class="ttdoc">Execute a SHOW RELAYLOG EVENTS statement. </div><div class="ttdef"><b>Definition:</b> rpl_rli.cc:1444</div></div>
<div class="ttc" id="classRows__log__event_html"><div class="ttname"><a href="classRows__log__event.html">Rows_log_event</a></div><div class="ttdoc">Common base class for all row-containing log events. </div><div class="ttdef"><b>Definition:</b> log_event.h:2697</div></div>
<div class="ttc" id="classRelay__log__info_html_a2d1a2186486bb188c869ac2ee62bfc6b"><div class="ttname"><a href="classRelay__log__info.html#a2d1a2186486bb188c869ac2ee62bfc6b">Relay_log_info::inited_hash_workers</a></div><div class="ttdeci">bool inited_hash_workers</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1058</div></div>
<div class="ttc" id="classRelay__log__info_html_ab8af3ebafd8250455c908cf4a03920fa"><div class="ttname"><a href="classRelay__log__info.html#ab8af3ebafd8250455c908cf4a03920fa">Relay_log_info::get_worker_count</a></div><div class="ttdeci">size_t get_worker_count()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1225</div></div>
<div class="ttc" id="classGtid__log__event_html_a0dfb533b61b71021ccf787b5be301a94"><div class="ttname"><a href="classGtid__log__event.html#a0dfb533b61b71021ccf787b5be301a94">Gtid_log_event::get_sidno</a></div><div class="ttdeci">rpl_sidno get_sidno(bool need_lock)</div><div class="ttdoc">Return the SIDNO relative to the global sid_map for this GTID. </div><div class="ttdef"><b>Definition:</b> log_event.cc:13103</div></div>
<div class="ttc" id="my__psi__config_8h_html"><div class="ttname"><a href="my__psi__config_8h.html">my_psi_config.h</a></div><div class="ttdoc">Defines various enable/disable and HAVE_ macros related to the performance schema instrumentation sys...</div></div>
<div class="ttc" id="classRelay__log__info_html_ae193ed47f0122f0d45a37cbd48ccb921"><div class="ttname"><a href="classRelay__log__info.html#ae193ed47f0122f0d45a37cbd48ccb921">Relay_log_info::sql_force_rotate_relay</a></div><div class="ttdeci">std::atomic&lt; bool &gt; sql_force_rotate_relay</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:816</div></div>
<div class="ttc" id="structslave__job__item_html_a222fbd4be26f4e4d8a53615f934c73a5"><div class="ttname"><a href="structslave__job__item.html#a222fbd4be26f4e4d8a53615f934c73a5">slave_job_item::data</a></div><div class="ttdeci">Log_event * data</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:89</div></div>
<div class="ttc" id="uca-dump_8cc_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> uca-dump.cc:29</div></div>
<div class="ttc" id="sslopt-case_8h_html_ae00b773898ac853cec38cdf7a08b8e89"><div class="ttname"><a href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a></div><div class="ttdeci">case opt name</div><div class="ttdef"><b>Definition:</b> sslopt-case.h:32</div></div>
<div class="ttc" id="classRelay__log__info_html_a768d1f6426a20be0e32d7380a231c0b2a6e9fdb2f902d88e174ae5a30e50156dc"><div class="ttname"><a href="classRelay__log__info.html#a768d1f6426a20be0e32d7380a231c0b2a6e9fdb2f902d88e174ae5a30e50156dc">Relay_log_info::IN_STMT</a></div><div class="ttdoc">The replication thread is inside a statement. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:223</div></div>
<div class="ttc" id="my__io_8h_html_a0fd6678904889e4aeff1402c35e890da"><div class="ttname"><a href="my__io_8h.html#a0fd6678904889e4aeff1402c35e890da">FN_REFLEN</a></div><div class="ttdeci">#define FN_REFLEN</div><div class="ttdef"><b>Definition:</b> my_io.h:82</div></div>
<div class="ttc" id="classRelay__log__info_html_a9bbad242863fab978884b5c60b4a1b28"><div class="ttname"><a href="classRelay__log__info.html#a9bbad242863fab978884b5c60b4a1b28">Relay_log_info::relay_log</a></div><div class="ttdeci">MYSQL_BIN_LOG relay_log</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:285</div></div>
<div class="ttc" id="classApplier__security__context__guard_html"><div class="ttname"><a href="classApplier__security__context__guard.html">Applier_security_context_guard</a></div><div class="ttdoc">Utility class to allow RAII pattern with Security_context class. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2238</div></div>
<div class="ttc" id="my__inttypes_8h_html_a9c0acdcb1b083d30069a62cee1ece644"><div class="ttname"><a href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a></div><div class="ttdeci">long long int longlong</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:54</div></div>
<div class="ttc" id="classRelay__log__info_html_a23dbc6aff700428d743d8413794bb93e"><div class="ttname"><a href="classRelay__log__info.html#a23dbc6aff700428d743d8413794bb93e">Relay_log_info::m_table_map</a></div><div class="ttdeci">table_mapping m_table_map</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:984</div></div>
<div class="ttc" id="classReplication__transaction__boundary__parser_html"><div class="ttname"><a href="classReplication__transaction__boundary__parser.html">Replication_transaction_boundary_parser</a></div><div class="ttdoc">This is the class for verifying transaction boundaries in a replication event stream. </div><div class="ttdef"><b>Definition:</b> rpl_trx_boundary_parser.h:49</div></div>
<div class="ttc" id="classRelay__log__info_html_ad81ee3feef070c6b950a204bc3abd6c3"><div class="ttname"><a href="classRelay__log__info.html#ad81ee3feef070c6b950a204bc3abd6c3">Relay_log_info::mts_temp_table_LOCK</a></div><div class="ttdeci">mysql_mutex_t mts_temp_table_LOCK</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:265</div></div>
<div class="ttc" id="structslave__job__item_html_a71cffbb571380b58b35d3b56ee7297ed"><div class="ttname"><a href="structslave__job__item.html#a71cffbb571380b58b35d3b56ee7297ed">slave_job_item::relay_number</a></div><div class="ttdeci">uint relay_number</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:90</div></div>
<div class="ttc" id="my__systime_8h_html_a459956a84f34f6767e5b67b4493bd48d"><div class="ttname"><a href="my__systime_8h.html#a459956a84f34f6767e5b67b4493bd48d">my_time</a></div><div class="ttdeci">time_t my_time(int)</div><div class="ttdoc">Return current time. </div><div class="ttdef"><b>Definition:</b> my_systime.h:172</div></div>
<div class="ttc" id="my__inttypes_8h_html_acbd4acd0d29e2d6c43104827f77d9cd2"><div class="ttname"><a href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a></div><div class="ttdeci">uint32_t uint32</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:66</div></div>
<div class="ttc" id="classRelay__log__info_html_a810c03978cfab5184968a75cd2e98cf4"><div class="ttname"><a href="classRelay__log__info.html#a810c03978cfab5184968a75cd2e98cf4">Relay_log_info::set_future_event_relay_log_pos</a></div><div class="ttdeci">void set_future_event_relay_log_pos(ulonglong log_pos)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1494</div></div>
<div class="ttc" id="classRelay__log__info_html_ac5e0c91d6bd60cd1e72f01edbd8f8ab7"><div class="ttname"><a href="classRelay__log__info.html#ac5e0c91d6bd60cd1e72f01edbd8f8ab7">Relay_log_info::get_gtid_monitoring_info</a></div><div class="ttdeci">Gtid_monitoring_info * get_gtid_monitoring_info()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:324</div></div>
<div class="ttc" id="classRelay__log__info_html_ae7b85681986de5005ba80f84a92945cb"><div class="ttname"><a href="classRelay__log__info.html#ae7b85681986de5005ba80f84a92945cb">Relay_log_info::workers</a></div><div class="ttdeci">Slave_worker_array workers</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1052</div></div>
<div class="ttc" id="classRelay__log__info_html_a22bbe2a79ab591ad190b46f463999f8f"><div class="ttname"><a href="classRelay__log__info.html#a22bbe2a79ab591ad190b46f463999f8f">Relay_log_info::recovery_groups</a></div><div class="ttdeci">MY_BITMAP recovery_groups</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1140</div></div>
<div class="ttc" id="classRelay__log__info_html_a8328fba71f5d688eac1c9e5f8348cdfe"><div class="ttname"><a href="classRelay__log__info.html#a8328fba71f5d688eac1c9e5f8348cdfe">Relay_log_info::set_long_find_row_note_printed</a></div><div class="ttdeci">void set_long_find_row_note_printed()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1621</div></div>
<div class="ttc" id="classRelay__log__info_html_a394a3645c5158da7821527730b3fa1dc"><div class="ttname"><a href="classRelay__log__info.html#a394a3645c5158da7821527730b3fa1dc">Relay_log_info::curr_group_assigned_parts</a></div><div class="ttdeci">Prealloced_array&lt; db_worker_hash_entry *, 4 &gt; curr_group_assigned_parts</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1106</div></div>
<div class="ttc" id="classRelay__log__info_html_a6572c115b7179bd44e79fa39da82255a"><div class="ttname"><a href="classRelay__log__info.html#a6572c115b7179bd44e79fa39da82255a">Relay_log_info::ignore_log_space_limit</a></div><div class="ttdeci">std::atomic&lt; bool &gt; ignore_log_space_limit</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:809</div></div>
<div class="ttc" id="classRelay__log__info_html_a63bb6d3c259c2adc63e3886478951717"><div class="ttname"><a href="classRelay__log__info.html#a63bb6d3c259c2adc63e3886478951717">Relay_log_info::tables_to_lock_count</a></div><div class="ttdeci">uint tables_to_lock_count</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:983</div></div>
<div class="ttc" id="rpl__mts__submode_8h_html"><div class="ttname"><a href="rpl__mts__submode_8h.html">rpl_mts_submode.h</a></div></div>
<div class="ttc" id="classMDL__request_html"><div class="ttname"><a href="classMDL__request.html">MDL_request</a></div><div class="ttdoc">A pending metadata lock request. </div><div class="ttdef"><b>Definition:</b> mdl.h:784</div></div>
<div class="ttc" id="classRelay__log__info_html_a558b6c2e5188bb6c8193ae58cf16b37b"><div class="ttname"><a href="classRelay__log__info.html#a558b6c2e5188bb6c8193ae58cf16b37b">Relay_log_info::get_group_relay_log_name</a></div><div class="ttdeci">const char * get_group_relay_log_name()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1510</div></div>
<div class="ttc" id="classRelay__log__info_html_abfe3e935ab8e2acd38fb8fd9e6c93b55"><div class="ttname"><a href="classRelay__log__info.html#abfe3e935ab8e2acd38fb8fd9e6c93b55">Relay_log_info::sql_thread_kill_accepted</a></div><div class="ttdeci">bool sql_thread_kill_accepted</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1609</div></div>
<div class="ttc" id="psi__mutex__bits_8h_html"><div class="ttname"><a href="psi__mutex__bits_8h.html">psi_mutex_bits.h</a></div><div class="ttdoc">Instrumentation helpers for mutexes. </div></div>
<div class="ttc" id="classRelay__log__info_html_af5a9fc7cface91d34f721ad0a680646a"><div class="ttname"><a href="classRelay__log__info.html#af5a9fc7cface91d34f721ad0a680646a">Relay_log_info::slave_worker_hash_cond</a></div><div class="ttdeci">mysql_cond_t slave_worker_hash_cond</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1061</div></div>
<div class="ttc" id="classRelay__log__info_html_af8172590d5f51906f8f5edee3f163f4a"><div class="ttname"><a href="classRelay__log__info.html#af8172590d5f51906f8f5edee3f163f4a">Relay_log_info::recovery_parallel_workers</a></div><div class="ttdeci">ulong recovery_parallel_workers</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1136</div></div>
<div class="ttc" id="classRelay__log__info_html_a9b3f88686af3d54e61784a527b0a90d8"><div class="ttname"><a href="classRelay__log__info.html#a9b3f88686af3d54e61784a527b0a90d8">Relay_log_info::reset_row_stmt_start_timestamp</a></div><div class="ttdeci">void reset_row_stmt_start_timestamp()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1619</div></div>
<div class="ttc" id="my__sys_8h_html"><div class="ttname"><a href="my__sys_8h.html">my_sys.h</a></div><div class="ttdoc">Common header for many mysys elements. </div></div>
<div class="ttc" id="classRelay__log__info_html_aa0ba06ba84cb9d43773d2632b10a1ded"><div class="ttname"><a href="classRelay__log__info.html#aa0ba06ba84cb9d43773d2632b10a1ded">Relay_log_info::get_commit_order_manager</a></div><div class="ttdeci">Commit_order_manager * get_commit_order_manager()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1664</div></div>
<div class="ttc" id="classbinary__log_1_1Gtid__event_html_a447f427d2bee1c75009ab96da2e869b3"><div class="ttname"><a href="classbinary__log_1_1Gtid__event.html#a447f427d2bee1c75009ab96da2e869b3">binary_log::Gtid_event::original_commit_timestamp</a></div><div class="ttdeci">unsigned long long int original_commit_timestamp</div><div class="ttdoc">Timestamp when the transaction was committed on the originating master. </div><div class="ttdef"><b>Definition:</b> control_events.h:1002</div></div>
<div class="ttc" id="rpl__rli_8h_html_ade780523455b95642746c900e432ab4c"><div class="ttname"><a href="rpl__rli_8h.html#ade780523455b95642746c900e432ab4c">is_mts_db_partitioned</a></div><div class="ttdeci">bool is_mts_db_partitioned(Relay_log_info *rli)</div><div class="ttdoc">Auxiliary function to check if we have a db partitioned MTS. </div><div class="ttdef"><b>Definition:</b> rpl_rli.cc:2567</div></div>
<div class="ttc" id="classRelay__log__info_html_a14b055b1320a2a7cd3f9c4a9df960092"><div class="ttname"><a href="classRelay__log__info.html#a14b055b1320a2a7cd3f9c4a9df960092">Relay_log_info::is_in_group</a></div><div class="ttdeci">bool is_in_group() const</div><div class="ttdoc">A group is defined as the entire range of events that constitute a transaction or auto-committed stat...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1435</div></div>
<div class="ttc" id="classRelay__log__info_html_aeb91802d715b374dc4415bc4132b180ba9542e4aa79b0e44743acde0e70211a06"><div class="ttname"><a href="classRelay__log__info.html#aeb91802d715b374dc4415bc4132b180ba9542e4aa79b0e44743acde0e70211a06">Relay_log_info::MTS_END_GROUP</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1168</div></div>
<div class="ttc" id="classRelay__log__info_html_aa37efaa27105175aa1a8150ac99516ba"><div class="ttname"><a href="classRelay__log__info.html#aa37efaa27105175aa1a8150ac99516ba">Relay_log_info::get_group_relay_log_pos</a></div><div class="ttdeci">ulonglong get_group_relay_log_pos()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1511</div></div>
<div class="ttc" id="classRelay__log__info_html_abd04d27589bdc23557778578afcc1ba8"><div class="ttname"><a href="classRelay__log__info.html#abd04d27589bdc23557778578afcc1ba8">Relay_log_info::enum_require_table_primary_key</a></div><div class="ttdeci">enum_require_table_primary_key</div><div class="ttdoc">Identifies what is the slave policy on primary keys in tables. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:232</div></div>
<div class="ttc" id="my__inttypes_8h_html_a378b5b2448c7170f4b6bd225583e8a19"><div class="ttname"><a href="my__inttypes_8h.html#a378b5b2448c7170f4b6bd225583e8a19">my_off_t</a></div><div class="ttdeci">ulonglong my_off_t</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:71</div></div>
<div class="ttc" id="classRelay__log__info_html_a5b89dfc26a74c0fc0888948b38be5893"><div class="ttname"><a href="classRelay__log__info.html#a5b89dfc26a74c0fc0888948b38be5893">Relay_log_info::mts_wq_underrun_w_id</a></div><div class="ttdeci">volatile ulong mts_wq_underrun_w_id</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1116</div></div>
<div class="ttc" id="classGtid__set_html"><div class="ttname"><a href="classGtid__set.html">Gtid_set</a></div><div class="ttdoc">Represents a set of GTIDs. </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:1414</div></div>
<div class="ttc" id="classRelay__log__info_html_a8b94fd9487826588d8961e6b2a367909"><div class="ttname"><a href="classRelay__log__info.html#a8b94fd9487826588d8961e6b2a367909">Relay_log_info::enum_require_row_status</a></div><div class="ttdeci">enum_require_row_status</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:207</div></div>
<div class="ttc" id="my__psi__config_8h_html_a4dc72985f1638094cd20040ad3a9539c"><div class="ttname"><a href="my__psi__config_8h.html#a4dc72985f1638094cd20040ad3a9539c">HAVE_PSI_INTERFACE</a></div><div class="ttdeci">#define HAVE_PSI_INTERFACE</div><div class="ttdef"><b>Definition:</b> my_psi_config.h:38</div></div>
<div class="ttc" id="my__loglevel_8h_html"><div class="ttname"><a href="my__loglevel_8h.html">my_loglevel.h</a></div><div class="ttdoc">Definition of the global &quot;loglevel&quot; enumeration. </div></div>
<div class="ttc" id="classRelay__log__info_html_af8ef0f185cd38150141f293bcc9b4e70"><div class="ttname"><a href="classRelay__log__info.html#af8ef0f185cd38150141f293bcc9b4e70">Relay_log_info::get_table_data</a></div><div class="ttdeci">bool get_table_data(TABLE *table_arg, table_def **tabledef_var, TABLE **conv_table_var) const</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:988</div></div>
<div class="ttc" id="log__event_8h_html"><div class="ttname"><a href="log__event_8h.html">log_event.h</a></div><div class="ttdoc">Binary log event definitions. </div></div>
<div class="ttc" id="classApplier__security__context__guard_html_a996e5fbe2c884d4a2b073f1dd75cb6e2"><div class="ttname"><a href="classApplier__security__context__guard.html#a996e5fbe2c884d4a2b073f1dd75cb6e2">Applier_security_context_guard::m_thd</a></div><div class="ttdeci">THD const  * m_thd</div><div class="ttdoc">The THD object for which the security context will be initialized. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2356</div></div>
<div class="ttc" id="classRelay__log__info_html_aa34fae20ade65e0cb755bbe701afd6dc"><div class="ttname"><a href="classRelay__log__info.html#aa34fae20ade65e0cb755bbe701afd6dc">Relay_log_info::is_until_satisfied_before_dispatching_event</a></div><div class="ttdeci">bool is_until_satisfied_before_dispatching_event(const Log_event *ev)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1906</div></div>
<div class="ttc" id="sys__vars_8cc_html_ad68e20cca56e07a8bead6f9a10e2fc9f"><div class="ttname"><a href="sys__vars_8cc.html#ad68e20cca56e07a8bead6f9a10e2fc9f">update_timestamp</a></div><div class="ttdeci">static bool update_timestamp(THD *thd, set_var *var)</div><div class="ttdef"><b>Definition:</b> sys_vars.cc:5154</div></div>
<div class="ttc" id="classRelay__log__info_html_a2e0827f3a4c6406bd8c7e7e354eb6509"><div class="ttname"><a href="classRelay__log__info.html#a2e0827f3a4c6406bd8c7e7e354eb6509">Relay_log_info::set_event_relay_log_pos</a></div><div class="ttdeci">void set_event_relay_log_pos(ulonglong log_pos)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1551</div></div>
<div class="ttc" id="classMDL__lock__guard_html"><div class="ttname"><a href="classMDL__lock__guard.html">MDL_lock_guard</a></div><div class="ttdoc">Utility class to allow RAII pattern with MDL_request and MDL_context classes. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2134</div></div>
<div class="ttc" id="classRelay__log__info_html_a938c92ac33bdcc8077f037394b220092"><div class="ttname"><a href="classRelay__log__info.html#a938c92ac33bdcc8077f037394b220092">Relay_log_info::clear_until_option</a></div><div class="ttdeci">void clear_until_option()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1689</div></div>
<div class="ttc" id="classRLI__current__event__raii_html_a1e8022cdcb26e98e34000ce4ffc97f96"><div class="ttname"><a href="classRLI__current__event__raii.html#a1e8022cdcb26e98e34000ce4ffc97f96">RLI_current_event_raii::m_rli</a></div><div class="ttdeci">Relay_log_info * m_rli</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2117</div></div>
<div class="ttc" id="classRelay__log__info_html_a5ac60dc20a9772ae2c3d448ece59895f"><div class="ttname"><a href="classRelay__log__info.html#a5ac60dc20a9772ae2c3d448ece59895f">Relay_log_info::force_flush_postponed_due_to_split_trans</a></div><div class="ttdeci">bool force_flush_postponed_due_to_split_trans</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1662</div></div>
<div class="ttc" id="classRelay__log__info_html_a9efea5a95de42b86eccef1f403466f94"><div class="ttname"><a href="classRelay__log__info.html#a9efea5a95de42b86eccef1f403466f94">Relay_log_info::set_group_master_log_pos</a></div><div class="ttdeci">void set_group_master_log_pos(ulonglong log_pos)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1506</div></div>
<div class="ttc" id="classGtid__monitoring__info_html"><div class="ttname"><a href="classGtid__monitoring__info.html">Gtid_monitoring_info</a></div><div class="ttdoc">Stores information to monitor a transaction during the different replication stages. </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:1270</div></div>
<div class="ttc" id="classRelay__log__info_html_a36f7927bcf2fc2dda820bad73e6e5856"><div class="ttname"><a href="classRelay__log__info.html#a36f7927bcf2fc2dda820bad73e6e5856">Relay_log_info::mts_total_wait_overlap</a></div><div class="ttdeci">std::atomic&lt; longlong &gt; mts_total_wait_overlap</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1187</div></div>
<div class="ttc" id="classRelay__log__info_html_af66097d972b7e3696f87ce6dd28d24f9"><div class="ttname"><a href="classRelay__log__info.html#af66097d972b7e3696f87ce6dd28d24f9">Relay_log_info::last_assigned_worker</a></div><div class="ttdeci">Slave_worker * last_assigned_worker</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1096</div></div>
<div class="ttc" id="classRelay__log__info_html_a1b87485293445ca187a3e0dba5cb9c6d"><div class="ttname"><a href="classRelay__log__info.html#a1b87485293445ca187a3e0dba5cb9c6d">Relay_log_info::set_filter</a></div><div class="ttdeci">void set_filter(Rpl_filter *channel_filter)</div><div class="ttdoc">Set replication filter for the channel. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1712</div></div>
<div class="ttc" id="classRelay__log__info_html_a1071e0704aa31e9550c22259931a76e7"><div class="ttname"><a href="classRelay__log__info.html#a1071e0704aa31e9550c22259931a76e7">Relay_log_info::log_space_cond</a></div><div class="ttdeci">mysql_cond_t log_space_cond</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:834</div></div>
<div class="ttc" id="classMaster__info_html"><div class="ttname"><a href="classMaster__info.html">Master_info</a></div><div class="ttdef"><b>Definition:</b> rpl_mi.h:86</div></div>
<div class="ttc" id="psi__memory__key_8cc_html_a1e5e918cac2cef2fecaf965b06b93fe8"><div class="ttname"><a href="psi__memory__key_8cc.html#a1e5e918cac2cef2fecaf965b06b93fe8">key_memory_db_worker_hash_entry</a></div><div class="ttdeci">PSI_memory_key key_memory_db_worker_hash_entry</div><div class="ttdef"><b>Definition:</b> psi_memory_key.cc:103</div></div>
<div class="ttc" id="classRelay__log__info_html_a2f1874fce058e237fafbea6b52273018"><div class="ttname"><a href="classRelay__log__info.html#a2f1874fce058e237fafbea6b52273018">Relay_log_info::group_relay_log_pos</a></div><div class="ttdeci">ulonglong group_relay_log_pos</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:644</div></div>
<div class="ttc" id="classRelay__log__info_html_a23ee3506dd58a3812d0601ff83680567"><div class="ttname"><a href="classRelay__log__info.html#a23ee3506dd58a3812d0601ff83680567">Relay_log_info::mts_slave_worker_queue_len_max</a></div><div class="ttdeci">ulong mts_slave_worker_queue_len_max</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1091</div></div>
<div class="ttc" id="classRelay__log__info_html_a2bedd1496ce2b2f12bc9549612da39c1"><div class="ttname"><a href="classRelay__log__info.html#a2bedd1496ce2b2f12bc9549612da39c1">Relay_log_info::get_group_master_log_name</a></div><div class="ttdeci">const char * get_group_master_log_name()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1498</div></div>
<div class="ttc" id="hp__test1_8cc_html_adf916204820072417ed73a32de1cefcf"><div class="ttname"><a href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a></div><div class="ttdeci">static int flag</div><div class="ttdef"><b>Definition:</b> hp_test1.cc:39</div></div>
<div class="ttc" id="classRelay__log__info_html_aaebd1027e22891f20b73ee1553b641f6"><div class="ttname"><a href="classRelay__log__info.html#aaebd1027e22891f20b73ee1553b641f6">Relay_log_info::slave_parallel_workers</a></div><div class="ttdeci">ulong slave_parallel_workers</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1132</div></div>
<div class="ttc" id="classRelay__log__info_html_a93c5e43899923697e566fe7249e7b082"><div class="ttname"><a href="classRelay__log__info.html#a93c5e43899923697e566fe7249e7b082">Relay_log_info::stats_read_time</a></div><div class="ttdeci">ulonglong stats_read_time</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1200</div></div>
<div class="ttc" id="classRelay__log__info_html_ac43e0aa4092c8731d462502ca57e3a58"><div class="ttname"><a href="classRelay__log__info.html#ac43e0aa4092c8731d462502ca57e3a58">Relay_log_info::get_flag</a></div><div class="ttdeci">bool get_flag(enum_state_flag flag)</div><div class="ttdoc">Get the value of a replication state flag. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1367</div></div>
<div class="ttc" id="classTHD_html_af3feadcfbb9a7835b7941945c6cd0828"><div class="ttname"><a href="classTHD.html#af3feadcfbb9a7835b7941945c6cd0828">THD::is_operating_substatement_implicitly</a></div><div class="ttdeci">bool is_operating_substatement_implicitly</div><div class="ttdef"><b>Definition:</b> sql_class.h:2036</div></div>
<div class="ttc" id="classRelay__log__info_html_a2c69ad8016761856f3bcf2851949e39b"><div class="ttname"><a href="classRelay__log__info.html#a2c69ad8016761856f3bcf2851949e39b">Relay_log_info::get_c_rli</a></div><div class="ttdeci">virtual Relay_log_info * get_c_rli()</div><div class="ttdoc">Get coordinator&amp;#39;s RLI. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1705</div></div>
<div class="ttc" id="classRelay__log__info_html_abae2b82da325962f69b7cc4b25d9fb4f"><div class="ttname"><a href="classRelay__log__info.html#abae2b82da325962f69b7cc4b25d9fb4f">Relay_log_info::m_key_mts_temp_table_LOCK</a></div><div class="ttdeci">PSI_mutex_key m_key_mts_temp_table_LOCK</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:259</div></div>
<div class="ttc" id="classRelay__log__info_html_a48028f0544fc8c0adfe9e2599b2c3488"><div class="ttname"><a href="classRelay__log__info.html#a48028f0544fc8c0adfe9e2599b2c3488">Relay_log_info::event_start_pos</a></div><div class="ttdeci">my_off_t event_start_pos</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:652</div></div>
<div class="ttc" id="my__dbug_8h_html"><div class="ttname"><a href="my__dbug_8h.html">my_dbug.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_a5abed3ac1587b04f6c276a37e10345c1"><div class="ttname"><a href="classRelay__log__info.html#a5abed3ac1587b04f6c276a37e10345c1">Relay_log_info::stats_exec_time</a></div><div class="ttdeci">ulonglong stats_exec_time</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1199</div></div>
<div class="ttc" id="psi__memory__key_8h_html"><div class="ttname"><a href="psi__memory__key_8h.html">psi_memory_key.h</a></div></div>
<div class="ttc" id="classRelay__log__info_html_a9d92d490a28f3eea58110f2bb29240b4"><div class="ttname"><a href="classRelay__log__info.html#a9d92d490a28f3eea58110f2bb29240b4">Relay_log_info::get_event_relay_log_number</a></div><div class="ttdeci">uint get_event_relay_log_number()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1532</div></div>
<div class="ttc" id="classRelay__log__info_html_aa5ac490e962add1bd99e03cd92a0ccea"><div class="ttname"><a href="classRelay__log__info.html#aa5ac490e962add1bd99e03cd92a0ccea">Relay_log_info::get_gtid_set</a></div><div class="ttdeci">const Gtid_set * get_gtid_set() const</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:762</div></div>
<div class="ttc" id="structmysql__mutex__t_html"><div class="ttname"><a href="structmysql__mutex__t.html">mysql_mutex_t</a></div><div class="ttdoc">An instrumented mutex structure. </div><div class="ttdef"><b>Definition:</b> mysql_mutex_bits.h:49</div></div>
<div class="ttc" id="classRelay__log__info_html_a7aac59026b294e104954ce20641f0436"><div class="ttname"><a href="classRelay__log__info.html#a7aac59026b294e104954ce20641f0436">Relay_log_info::is_engine_ha_data_detached</a></div><div class="ttdeci">bool is_engine_ha_data_detached</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1877</div></div>
<div class="ttc" id="classMDL__lock__guard_html_a442c6c2e9a73ba6a4ede8192a2be8b78"><div class="ttname"><a href="classMDL__lock__guard.html#a442c6c2e9a73ba6a4ede8192a2be8b78">MDL_lock_guard::m_target</a></div><div class="ttdeci">THD * m_target</div><div class="ttdoc">The THD object holding the MDL context used for acquiring/releasing. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2199</div></div>
<div class="ttc" id="rpl__info__handler_8h_html_ad368d01448522483636362dc66c80c97"><div class="ttname"><a href="rpl__info__handler_8h.html#ad368d01448522483636362dc66c80c97">enum_return_check</a></div><div class="ttdeci">enum_return_check</div><div class="ttdef"><b>Definition:</b> rpl_info_handler.h:50</div></div>
<div class="ttc" id="classRelay__log__info_html_a75a9e8eeaf9a85ebe68b28bbfcc2cb1c"><div class="ttname"><a href="classRelay__log__info.html#a75a9e8eeaf9a85ebe68b28bbfcc2cb1c">Relay_log_info::mts_wq_oversize</a></div><div class="ttdeci">bool mts_wq_oversize</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1094</div></div>
<div class="ttc" id="rpl__rli_8h_html_aaf0fdf63a9071781ae1b3f8d4389f1c1"><div class="ttname"><a href="rpl__rli_8h.html#aaf0fdf63a9071781ae1b3f8d4389f1c1">is_committed_ddl</a></div><div class="ttdeci">bool is_committed_ddl(Log_event *ev)</div><div class="ttdoc">Checks whether the supplied event encodes a (2pc-aware) DDL that has been already committed...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2043</div></div>
<div class="ttc" id="classSlave__worker_html"><div class="ttname"><a href="classSlave__worker.html">Slave_worker</a></div><div class="ttdef"><b>Definition:</b> rpl_rli_pdb.h:516</div></div>
<div class="ttc" id="classRelay__log__info_html_ad1fba5148f3e9f8b4e802dd7357c6ead"><div class="ttname"><a href="classRelay__log__info.html#ad1fba5148f3e9f8b4e802dd7357c6ead">Relay_log_info::rli_description_event</a></div><div class="ttdeci">Format_description_log_event * rli_description_event</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1717</div></div>
<div class="ttc" id="classRelay__log__info_html_a90a2750ad4d1fd8fd8c1d0941c2693dc"><div class="ttname"><a href="classRelay__log__info.html#a90a2750ad4d1fd8fd8c1d0941c2693dc">Relay_log_info::gaq</a></div><div class="ttdeci">Slave_committed_queue * gaq</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1101</div></div>
<div class="ttc" id="classRelay__log__info_html_a66a2678532544c25f850b83f19bdf205"><div class="ttname"><a href="classRelay__log__info.html#a66a2678532544c25f850b83f19bdf205">Relay_log_info::rpl_filter</a></div><div class="ttdeci">Rpl_filter * rpl_filter</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:217</div></div>
<div class="ttc" id="mysql__mutex__bits_8h_html"><div class="ttname"><a href="mysql__mutex__bits_8h.html">mysql_mutex_bits.h</a></div><div class="ttdoc">ABI for instrumented mutexes. </div></div>
<div class="ttc" id="xcom__base_8cc_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> xcom_base.cc:442</div></div>
<div class="ttc" id="map__helpers_8h_html"><div class="ttname"><a href="map__helpers_8h.html">map_helpers.h</a></div></div>
<div class="ttc" id="classGtid__set_html_a4f026631d33627a5c273bdc35dcc03ef"><div class="ttname"><a href="classGtid__set.html#a4f026631d33627a5c273bdc35dcc03ef">Gtid_set::ensure_sidno</a></div><div class="ttdeci">enum_return_status ensure_sidno(rpl_sidno sidno)</div><div class="ttdoc">Allocates space for all sidnos up to the given sidno in the array of intervals. </div><div class="ttdef"><b>Definition:</b> rpl_gtid_set.cc:131</div></div>
<div class="ttc" id="classRelay__log__info_html_ac2434aadfaa4b15cac3ddb81d926779b"><div class="ttname"><a href="classRelay__log__info.html#ac2434aadfaa4b15cac3ddb81d926779b">Relay_log_info::ddl_not_atomic</a></div><div class="ttdeci">bool ddl_not_atomic</div><div class="ttdoc">Raised when slave applies and writes to its binary log statement which is not atomic DDL and has no X...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1894</div></div>
<div class="ttc" id="my__io_8h_html"><div class="ttname"><a href="my__io_8h.html">my_io.h</a></div><div class="ttdoc">Common #defines and includes for file and socket I/O. </div></div>
<div class="ttc" id="classRelay__log__info_html_af3d64d528e0e39a8cbbc406590e60a72"><div class="ttname"><a href="classRelay__log__info.html#af3d64d528e0e39a8cbbc406590e60a72">Relay_log_info::mts_end_group_sets_max_dbs</a></div><div class="ttdeci">bool mts_end_group_sets_max_dbs</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1113</div></div>
<div class="ttc" id="classRelay__log__info_html_af99718465f1f94df9c04b21183ea4324"><div class="ttname"><a href="classRelay__log__info.html#af99718465f1f94df9c04b21183ea4324">Relay_log_info::channel_mts_submode</a></div><div class="ttdeci">enum_mts_parallel_type channel_mts_submode</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1256</div></div>
<div class="ttc" id="classRelay__log__info_html_a96d1c200de7032d415aed7945d6ac096"><div class="ttname"><a href="classRelay__log__info.html#a96d1c200de7032d415aed7945d6ac096">Relay_log_info::set_sql_delay</a></div><div class="ttdeci">void set_sql_delay(time_t _sql_delay)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1582</div></div>
<div class="ttc" id="classRelay__log__info_html_a663b8408cbe5d4c4835a8d5056ecf0ab"><div class="ttname"><a href="classRelay__log__info.html#a663b8408cbe5d4c4835a8d5056ecf0ab">Relay_log_info::deferred_events</a></div><div class="ttdeci">Deferred_log_events * deferred_events</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1035</div></div>
<div class="ttc" id="classRelay__log__info_html_ac133581ad2f612639df07bbaaf5870f9"><div class="ttname"><a href="classRelay__log__info.html#ac133581ad2f612639df07bbaaf5870f9">Relay_log_info::enum_priv_checks_status</a></div><div class="ttdeci">enum_priv_checks_status</div><div class="ttdoc">Set of possible return values for the member methods related to PRIVILEGE_CHECKS_USER management...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:173</div></div>
<div class="ttc" id="classQuery__log__event_html"><div class="ttname"><a href="classQuery__log__event.html">Query_log_event</a></div><div class="ttdoc">A Query event is written to the binary log whenever the database is modified on the master...</div><div class="ttdef"><b>Definition:</b> log_event.h:1384</div></div>
<div class="ttc" id="classRelay__log__info_html_ad75560075f69e976a2ac82b11eca5149"><div class="ttname"><a href="classRelay__log__info.html#ad75560075f69e976a2ac82b11eca5149">Relay_log_info::unset_long_find_row_note_printed</a></div><div class="ttdeci">void unset_long_find_row_note_printed()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1623</div></div>
<div class="ttc" id="group__Data__Dictionary_html_gaa4991367acddcb2b2a0edeb169029917"><div class="ttname"><a href="group__Data__Dictionary.html#gaa4991367acddcb2b2a0edeb169029917">close_temporary_tables</a></div><div class="ttdeci">bool close_temporary_tables(THD *thd)</div><div class="ttdef"><b>Definition:</b> sql_base.cc:1760</div></div>
<div class="ttc" id="classRLI__current__event__raii_html_a7e6f722ace8dbf2e6fec91465f65342b"><div class="ttname"><a href="classRLI__current__event__raii.html#a7e6f722ace8dbf2e6fec91465f65342b">RLI_current_event_raii::set_current_event</a></div><div class="ttdeci">void set_current_event(Log_event *ev)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2124</div></div>
<div class="ttc" id="classRelay__log__info_html_a356972af8fbdefac5d409813171f93cb"><div class="ttname"><a href="classRelay__log__info.html#a356972af8fbdefac5d409813171f93cb">Relay_log_info::rli_fake</a></div><div class="ttdeci">bool rli_fake</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:677</div></div>
<div class="ttc" id="classRelay__log__info_html_a1981ac0f3e9ad05937c6805e8fb34e78"><div class="ttname"><a href="classRelay__log__info.html#a1981ac0f3e9ad05937c6805e8fb34e78">Relay_log_info::is_long_find_row_note_printed</a></div><div class="ttdeci">bool is_long_find_row_note_printed()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1627</div></div>
<div class="ttc" id="my__loglevel_8h_html_a246c20287aef048a7befd7c863325d82"><div class="ttname"><a href="my__loglevel_8h.html#a246c20287aef048a7befd7c863325d82">loglevel</a></div><div class="ttdeci">loglevel</div><div class="ttdef"><b>Definition:</b> my_loglevel.h:40</div></div>
<div class="ttc" id="components_2services_2mysql__mutex_8h_html_a5c748d3c7862702885acb90576754a2c"><div class="ttname"><a href="components_2services_2mysql__mutex_8h.html#a5c748d3c7862702885acb90576754a2c">mysql_mutex_unlock</a></div><div class="ttdeci">#define mysql_mutex_unlock(M)</div><div class="ttdef"><b>Definition:</b> mysql_mutex.h:56</div></div>
<div class="ttc" id="classRelay__log__info_html_af5c25a0d3d0e626411044867a4e66634"><div class="ttname"><a href="classRelay__log__info.html#af5c25a0d3d0e626411044867a4e66634">Relay_log_info::get_event_relay_log_name</a></div><div class="ttdeci">const char * get_event_relay_log_name()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1523</div></div>
<div class="ttc" id="classRelay__log__info_html_ad013b8da0a5155399d46c0782a09bd2b"><div class="ttname"><a href="classRelay__log__info.html#ad013b8da0a5155399d46c0782a09bd2b">Relay_log_info::get_event_relay_log_pos</a></div><div class="ttdeci">ulonglong get_event_relay_log_pos()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1524</div></div>
<div class="ttc" id="classRelay__log__info_html_a8488a40795fa34671aae5ff153c28c12"><div class="ttname"><a href="classRelay__log__info.html#a8488a40795fa34671aae5ff153c28c12">Relay_log_info::get_row_stmt_start_timestamp</a></div><div class="ttdeci">time_t get_row_stmt_start_timestamp()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1611</div></div>
<div class="ttc" id="rpl__rli_8h_html_a1d19304bdce3da4512a26949c51d603c"><div class="ttname"><a href="rpl__rli_8h.html#a1d19304bdce3da4512a26949c51d603c">Slave_worker_array</a></div><div class="ttdeci">Prealloced_array&lt; Slave_worker *, 4 &gt; Slave_worker_array</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:86</div></div>
<div class="ttc" id="classRelay__log__info_html_a1ba08799477aab79a09dec7e9d9f2f66"><div class="ttname"><a href="classRelay__log__info.html#a1ba08799477aab79a09dec7e9d9f2f66">Relay_log_info::pending_jobs</a></div><div class="ttdeci">volatile ulong pending_jobs</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1087</div></div>
<div class="ttc" id="structMDL__key_html_a391ec4bd98fec6852a48f7856546ed3b"><div class="ttname"><a href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a></div><div class="ttdeci">enum_mdl_namespace</div><div class="ttdoc">Object namespaces. </div><div class="ttdef"><b>Definition:</b> mdl.h:385</div></div>
<div class="ttc" id="classRelay__log__info_html_a24b2857beecd824f03bfed7352f8ac31"><div class="ttname"><a href="classRelay__log__info.html#a24b2857beecd824f03bfed7352f8ac31">Relay_log_info::logical_clock_cond</a></div><div class="ttdeci">mysql_cond_t logical_clock_cond</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:271</div></div>
<div class="ttc" id="classTHD_html_aeb4ab32a3c6fbacb94d4ef9372b445c6"><div class="ttname"><a href="classTHD.html#aeb4ab32a3c6fbacb94d4ef9372b445c6">THD::is_commit_in_middle_of_statement</a></div><div class="ttdeci">bool is_commit_in_middle_of_statement</div><div class="ttdef"><b>Definition:</b> sql_class.h:3531</div></div>
<div class="ttc" id="components_2services_2mysql__mutex_8h_html_a340bf8f49d0cbaa994eaf5fb1fc7a22f"><div class="ttname"><a href="components_2services_2mysql__mutex_8h.html#a340bf8f49d0cbaa994eaf5fb1fc7a22f">mysql_mutex_lock</a></div><div class="ttdeci">#define mysql_mutex_lock(M)</div><div class="ttdef"><b>Definition:</b> mysql_mutex.h:49</div></div>
<div class="ttc" id="structslave__job__item_html"><div class="ttname"><a href="structslave__job__item.html">slave_job_item</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:88</div></div>
<div class="ttc" id="group__Replication_html_ga5b0ba662ed95fe60c2a196f20675185b"><div class="ttname"><a href="group__Replication.html#ga5b0ba662ed95fe60c2a196f20675185b">is_atomic_ddl</a></div><div class="ttdeci">bool is_atomic_ddl(THD *thd, bool using_trans_arg)</div><div class="ttdoc">The function lists all DDL instances that are supported for crash-recovery (WL9175). </div><div class="ttdef"><b>Definition:</b> log_event.cc:3773</div></div>
<div class="ttc" id="classMDL__lock__guard_html_aa7b19e17b8ad711a31ead7f5576a09ad"><div class="ttname"><a href="classMDL__lock__guard.html#aa7b19e17b8ad711a31ead7f5576a09ad">MDL_lock_guard::m_request</a></div><div class="ttdeci">MDL_request m_request</div><div class="ttdoc">The MDL request holding the MDL ticket issued upon acquisition. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2201</div></div>
<div class="ttc" id="classRelay__log__info_html_aa8fec2313c01c6d45e98b3e34adf2d6e"><div class="ttname"><a href="classRelay__log__info.html#aa8fec2313c01c6d45e98b3e34adf2d6e">Relay_log_info::set_until_option</a></div><div class="ttdeci">void set_until_option(Until_option *option)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1683</div></div>
<div class="ttc" id="classGtid__log__event_html_a7f8e45f12601f4874a37af94fe9ae05a"><div class="ttname"><a href="classGtid__log__event.html#a7f8e45f12601f4874a37af94fe9ae05a">Gtid_log_event::get_gno</a></div><div class="ttdeci">rpl_gno get_gno() const</div><div class="ttdoc">Return the GNO for this GTID. </div><div class="ttdef"><b>Definition:</b> log_event.h:3938</div></div>
<div class="ttc" id="classRelay__log__info_html_a9c95b156684685e1c95c2f9f50657407"><div class="ttname"><a href="classRelay__log__info.html#a9c95b156684685e1c95c2f9f50657407">Relay_log_info::rli_checkpoint_seqno</a></div><div class="ttdeci">uint rli_checkpoint_seqno</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1137</div></div>
<div class="ttc" id="classGtid__log__event_html_a3beca6d36cc8b492cdb7831fe9fa2fe7"><div class="ttname"><a href="classGtid__log__event.html#a3beca6d36cc8b492cdb7831fe9fa2fe7">Gtid_log_event::get_type</a></div><div class="ttdeci">enum_gtid_type get_type() const</div><div class="ttdoc">Return the gtid type for this Gtid_log_event: this can be either ANONYMOUS_GTID, AUTOMATIC_GTID, or ASSIGNED_GTID. </div><div class="ttdef"><b>Definition:</b> log_event.h:3902</div></div>
<div class="ttc" id="classRows__query__log__event_html"><div class="ttname"><a href="classRows__query__log__event.html">Rows_query_log_event</a></div><div class="ttdoc">It is used to record the original query for the rows events in RBR. </div><div class="ttdef"><b>Definition:</b> log_event.h:3630</div></div>
<div class="ttc" id="classRelay__log__info_html_af064a83db2cde40d72badef1bf24ac57"><div class="ttname"><a href="classRelay__log__info.html#af064a83db2cde40d72badef1bf24ac57">Relay_log_info::set_event_relay_log_name</a></div><div class="ttdeci">void set_event_relay_log_name(const char *log_file_name)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1525</div></div>
<div class="ttc" id="classLog__event_html_aa1a7f67c16196fec12bc562872c97efd"><div class="ttname"><a href="classLog__event.html#aa1a7f67c16196fec12bc562872c97efd">Log_event::get_type_code</a></div><div class="ttdeci">Log_event_type get_type_code() const</div><div class="ttdef"><b>Definition:</b> log_event.h:916</div></div>
<div class="ttc" id="classRelay__log__info_html_a39e125483b40b8a6d8a3fbf49a431582"><div class="ttname"><a href="classRelay__log__info.html#a39e125483b40b8a6d8a3fbf49a431582">Relay_log_info::ign_master_log_pos_end</a></div><div class="ttdeci">ulonglong ign_master_log_pos_end</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:877</div></div>
<div class="ttc" id="mysql_8cc_html_a1025e6cbbd3179d2d91b9b4afb8f8efc"><div class="ttname"><a href="mysql_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">status</a></div><div class="ttdeci">static STATUS status</div><div class="ttdef"><b>Definition:</b> mysql.cc:199</div></div>
<div class="ttc" id="classRelay__log__info_html_a8c61f656e723c654b044fbaaabfb3356"><div class="ttname"><a href="classRelay__log__info.html#a8c61f656e723c654b044fbaaabfb3356">Relay_log_info::current_event</a></div><div class="ttdeci">Log_event * current_event</div><div class="ttdoc">Reference to being applied event. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1884</div></div>
<div class="ttc" id="classRelay__log__info_html_ad3a8292b885e7797e60d46c88a80c689"><div class="ttname"><a href="classRelay__log__info.html#ad3a8292b885e7797e60d46c88a80c689">Relay_log_info::thd_tx_priority</a></div><div class="ttdeci">int thd_tx_priority</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1862</div></div>
<div class="ttc" id="classApplier__security__context__guard_html_aa6a86b4a7fa405117b907088a781050a"><div class="ttname"><a href="classApplier__security__context__guard.html#aa6a86b4a7fa405117b907088a781050a">Applier_security_context_guard::m_current</a></div><div class="ttdeci">Security_context * m_current</div><div class="ttdoc">Currently in use security context. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2360</div></div>
<div class="ttc" id="mysql__ssl__rsa__setup_8cc_html_a5f4e2d00e13f7f971e3fbce0dee76947"><div class="ttname"><a href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a></div><div class="ttdeci">Log info(cout, &quot;NOTE&quot;)</div></div>
<div class="ttc" id="classtable__def_html"><div class="ttname"><a href="classtable__def.html">table_def</a></div><div class="ttdoc">A table definition from the master. </div><div class="ttdef"><b>Definition:</b> rpl_utility.h:247</div></div>
<div class="ttc" id="sql_2table_8h_html"><div class="ttname"><a href="sql_2table_8h.html">table.h</a></div></div>
<div class="ttc" id="structTABLE__LIST_html"><div class="ttname"><a href="structTABLE__LIST.html">TABLE_LIST</a></div><div class="ttdef"><b>Definition:</b> table.h:2540</div></div>
<div class="ttc" id="classCheckable__rwlock_html"><div class="ttname"><a href="classCheckable__rwlock.html">Checkable_rwlock</a></div><div class="ttdoc">This has the functionality of mysql_rwlock_t, with two differences: </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:303</div></div>
<div class="ttc" id="structRPL__TABLE__LIST_html"><div class="ttname"><a href="structRPL__TABLE__LIST.html">RPL_TABLE_LIST</a></div><div class="ttdoc">Extend the normal table list with a few new fields needed by the slave thread, but nowhere else...</div><div class="ttdef"><b>Definition:</b> rpl_utility.h:464</div></div>
<div class="ttc" id="classRelay__log__info_html_a160cc1ba17193286dcaf32b25354b1f4"><div class="ttname"><a href="classRelay__log__info.html#a160cc1ba17193286dcaf32b25354b1f4">Relay_log_info::gtid_timestamps_warning_logged</a></div><div class="ttdeci">bool gtid_timestamps_warning_logged</div><div class="ttdoc">Variable is set to true as long as original_commit_timestamp &gt; immediate_commit_timestamp so that the...</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:418</div></div>
<div class="ttc" id="classRelay__log__info_html_adb9571ba13a628556e9d1cb86ebf9393"><div class="ttname"><a href="classRelay__log__info.html#adb9571ba13a628556e9d1cb86ebf9393">Relay_log_info::is_parallel_exec</a></div><div class="ttdeci">bool is_parallel_exec() const</div><div class="ttdoc">returns true if events are to be executed in parallel </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1283</div></div>
<div class="ttc" id="classRelay__log__info_html_a273ca829837a1acac71bd7dd2a918d3aa011530204617f6ee11b00009567bf900"><div class="ttname"><a href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa011530204617f6ee11b00009567bf900">Relay_log_info::UNTIL_SQL_VIEW_ID</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:853</div></div>
<div class="ttc" id="structslave__job__item_html_a566808f6c83d97e52c6ad49bed042324"><div class="ttname"><a href="structslave__job__item.html#a566808f6c83d97e52c6ad49bed042324">slave_job_item::relay_pos</a></div><div class="ttdeci">my_off_t relay_pos</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:91</div></div>
<div class="ttc" id="structTABLE__SHARE_html_ae85eaeb39e37dc9d5c6d789fe84bc6f4"><div class="ttname"><a href="structTABLE__SHARE.html#ae85eaeb39e37dc9d5c6d789fe84bc6f4">TABLE_SHARE::db</a></div><div class="ttdeci">LEX_CSTRING db</div><div class="ttdef"><b>Definition:</b> table.h:748</div></div>
<div class="ttc" id="classRelay__log__info_html_a043db62d05293c4fc010f10d24847ddb"><div class="ttname"><a href="classRelay__log__info.html#a043db62d05293c4fc010f10d24847ddb">Relay_log_info::m_require_table_primary_key_check</a></div><div class="ttdeci">enum_require_table_primary_key m_require_table_primary_key_check</div><div class="ttdoc">Identifies what is the slave policy on primary keys in tables. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:737</div></div>
<div class="ttc" id="json__diff_8h_html_a33855265d1be9a5e07049fbe2614e351ad0749aaba8b833466dfcbb0428e4f89c"><div class="ttname"><a href="json__diff_8h.html#a33855265d1be9a5e07049fbe2614e351ad0749aaba8b833466dfcbb0428e4f89c">enum_json_diff_status::SUCCESS</a></div><div class="ttdoc">The JSON diffs were applied and the JSON value in the column was updated successfully. </div></div>
<div class="ttc" id="classRelay__log__info_html_a5fc96f1bf742a918dd26500687509d04"><div class="ttname"><a href="classRelay__log__info.html#a5fc96f1bf742a918dd26500687509d04">Relay_log_info::get_rpl_log_name</a></div><div class="ttdeci">const char * get_rpl_log_name()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1554</div></div>
<div class="ttc" id="classRelay__log__info_html_abd5b8a0a6f4568445b556aa4291815e3"><div class="ttname"><a href="classRelay__log__info.html#abd5b8a0a6f4568445b556aa4291815e3">Relay_log_info::started_processing</a></div><div class="ttdeci">void started_processing(Gtid gtid_arg, ulonglong original_ts_arg, ulonglong immediate_ts_arg, bool skipped=false)</div><div class="ttdoc">Stores the details of the transaction which has just started processing. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:339</div></div>
<div class="ttc" id="classRelay__log__info_html_af1ce47018282180ce343dd487402446c"><div class="ttname"><a href="classRelay__log__info.html#af1ce47018282180ce343dd487402446c">Relay_log_info::least_occupied_workers</a></div><div class="ttdeci">Prealloced_array&lt; ulong, 16 &gt; least_occupied_workers</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1210</div></div>
<div class="ttc" id="classRelay__log__info_html_a273ca829837a1acac71bd7dd2a918d3aa9900639c86aba35effe50342885799d2"><div class="ttname"><a href="classRelay__log__info.html#a273ca829837a1acac71bd7dd2a918d3aa9900639c86aba35effe50342885799d2">Relay_log_info::UNTIL_SQL_AFTER_MTS_GAPS</a></div><div class="ttdef"><b>Definition:</b> rpl_rli.h:852</div></div>
<div class="ttc" id="classRelay__log__info_html_a29ea309de4fad4a3a8a7d32fbba04799"><div class="ttname"><a href="classRelay__log__info.html#a29ea309de4fad4a3a8a7d32fbba04799">Relay_log_info::get_group_master_log_pos</a></div><div class="ttdeci">ulonglong get_group_master_log_pos()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1501</div></div>
<div class="ttc" id="classRelay__log__info_html_af8d21621e68c8c66fb6851423a5befa2"><div class="ttname"><a href="classRelay__log__info.html#af8d21621e68c8c66fb6851423a5befa2">Relay_log_info::mts_pending_jobs_size_max</a></div><div class="ttdeci">ulonglong mts_pending_jobs_size_max</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1093</div></div>
<div class="ttc" id="classRelay__log__info_html_a1b28b06ed566587ab0f01d5806854197"><div class="ttname"><a href="classRelay__log__info.html#a1b28b06ed566587ab0f01d5806854197">Relay_log_info::is_in_trx_or_stmt</a></div><div class="ttdeci">bool is_in_trx_or_stmt() const</div><div class="ttdoc">Auxiliary function used by is_in_group. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1404</div></div>
<div class="ttc" id="classRelay__log__info_html_adc2326e9be6c8e691e0ccc01a4f24a96"><div class="ttname"><a href="classRelay__log__info.html#adc2326e9be6c8e691e0ccc01a4f24a96">Relay_log_info::tables_to_lock</a></div><div class="ttdeci">RPL_TABLE_LIST * tables_to_lock</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:982</div></div>
<div class="ttc" id="classRelay__log__info_html_a852cdf695a4e254b55b845a10de0a137"><div class="ttname"><a href="classRelay__log__info.html#a852cdf695a4e254b55b845a10de0a137">Relay_log_info::get_sql_delay_end</a></div><div class="ttdeci">time_t get_sql_delay_end()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1583</div></div>
<div class="ttc" id="classDeferred__log__events_html"><div class="ttname"><a href="classDeferred__log__events.html">Deferred_log_events</a></div><div class="ttdef"><b>Definition:</b> rpl_utility.h:476</div></div>
<div class="ttc" id="thread__type_8h_html_adade01b1d73317cd10a128e7843f240ba65fce7bbaee140f7979c86de907a4927"><div class="ttname"><a href="thread__type_8h.html#adade01b1d73317cd10a128e7843f240ba65fce7bbaee140f7979c86de907a4927">SYSTEM_THREAD_SLAVE_WORKER</a></div><div class="ttdef"><b>Definition:</b> thread_type.h:41</div></div>
<div class="ttc" id="rpl__gtid_8h_html_a74378e47532331d3ac920082cf954668"><div class="ttname"><a href="rpl__gtid_8h.html#a74378e47532331d3ac920082cf954668">rpl_gno</a></div><div class="ttdeci">long long int rpl_gno</div><div class="ttdoc">Type of GNO, the second (numeric) component of GTID. </div><div class="ttdef"><b>Definition:</b> rpl_gtid.h:99</div></div>
<div class="ttc" id="rpl__info_8h_html"><div class="ttname"><a href="rpl__info_8h.html">rpl_info.h</a></div></div>
<div class="ttc" id="my__inttypes_8h_html_a718b4eb2652c286f4d42dc18a8e71a1a"><div class="ttname"><a href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a></div><div class="ttdeci">unsigned long ulong</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:48</div></div>
<div class="ttc" id="classRLI__current__event__raii_html_ab4ae13c7499999ef58317510367a571f"><div class="ttname"><a href="classRLI__current__event__raii.html#ab4ae13c7499999ef58317510367a571f">RLI_current_event_raii::RLI_current_event_raii</a></div><div class="ttdeci">RLI_current_event_raii(Relay_log_info *rli_arg, Log_event *ev)</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2120</div></div>
<div class="ttc" id="my__inttypes_8h_html_abc0f5bc07737e498f287334775dff2b6"><div class="ttname"><a href="my__inttypes_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a></div><div class="ttdeci">uint64_t uint64</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:68</div></div>
<div class="ttc" id="classRelay__log__info_html_a02bba2ccb2b53d74f5b66f8f9999f9c6"><div class="ttname"><a href="classRelay__log__info.html#a02bba2ccb2b53d74f5b66f8f9999f9c6">Relay_log_info::checkpoint_group</a></div><div class="ttdeci">uint checkpoint_group</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1139</div></div>
<div class="ttc" id="classRelay__log__info_html_a5ff858faafd7ae5945b3ad537232ccee"><div class="ttname"><a href="classRelay__log__info.html#a5ff858faafd7ae5945b3ad537232ccee">Relay_log_info::get_event_start_pos</a></div><div class="ttdeci">my_off_t get_event_start_pos()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1549</div></div>
<div class="ttc" id="classRelay__log__info_html_a7560155737282a20bc0db816650e5b48"><div class="ttname"><a href="classRelay__log__info.html#a7560155737282a20bc0db816650e5b48">Relay_log_info::sql_delay_end</a></div><div class="ttdeci">time_t sql_delay_end</div><div class="ttdoc">During a delay, specifies the point in time when the delay ends. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1752</div></div>
<div class="ttc" id="classRelay__log__info_html_a304cdfb16d97ae3148a4f0be59e55883"><div class="ttname"><a href="classRelay__log__info.html#a304cdfb16d97ae3148a4f0be59e55883">Relay_log_info::mts_coordinator_basic_nap</a></div><div class="ttdeci">ulong mts_coordinator_basic_nap</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1130</div></div>
<div class="ttc" id="classRelay__log__info_html_a81871a0c188dc19ab3b6a88389b7a561"><div class="ttname"><a href="classRelay__log__info.html#a81871a0c188dc19ab3b6a88389b7a561">Relay_log_info::curr_group_isolated</a></div><div class="ttdeci">bool curr_group_isolated</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1112</div></div>
<div class="ttc" id="classRelay__log__info_html_a8b38e96443b2adc87210a39ac7b831a8"><div class="ttname"><a href="classRelay__log__info.html#a8b38e96443b2adc87210a39ac7b831a8">Relay_log_info::notify_group_master_log_name_update</a></div><div class="ttdeci">void notify_group_master_log_name_update()</div><div class="ttdoc">The same as notify_group_relay_log_name_update but for group_master_log_name. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:916</div></div>
<div class="ttc" id="include_2mysql_2plugin_8h_html_a611d49c9771717379a8a296c87305746"><div class="ttname"><a href="include_2mysql_2plugin_8h.html#a611d49c9771717379a8a296c87305746">thd_tx_priority</a></div><div class="ttdeci">int thd_tx_priority(const MYSQL_THD thd)</div><div class="ttdef"><b>Definition:</b> sql_thd_api.cc:388</div></div>
<div class="ttc" id="classApplier__security__context__guard_html_a80e1173a5786a9c70ce221248ffeed20"><div class="ttname"><a href="classApplier__security__context__guard.html#a80e1173a5786a9c70ce221248ffeed20">Applier_security_context_guard::m_privilege_checks_none</a></div><div class="ttdeci">bool m_privilege_checks_none</div><div class="ttdoc">Flag that states if privilege check should be skipped. </div><div class="ttdef"><b>Definition:</b> rpl_rli.h:2364</div></div>
<div class="ttc" id="classbinary__log_1_1Gtid__event_html_a4a31e7742051b35b196eb62c29a1d1a1"><div class="ttname"><a href="classbinary__log_1_1Gtid__event.html#a4a31e7742051b35b196eb62c29a1d1a1">binary_log::Gtid_event::immediate_commit_timestamp</a></div><div class="ttdeci">unsigned long long int immediate_commit_timestamp</div><div class="ttdoc">Timestamp when the transaction was committed on the nearest master. </div><div class="ttdef"><b>Definition:</b> control_events.h:1004</div></div>
<div class="ttc" id="classRelay__log__info_html_a2015f13a3db6c6a141e4bedf9acc6fb6"><div class="ttname"><a href="classRelay__log__info.html#a2015f13a3db6c6a141e4bedf9acc6fb6">Relay_log_info::curr_group_seen_gtid</a></div><div class="ttdeci">bool curr_group_seen_gtid</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1110</div></div>
<div class="ttc" id="classRelay__log__info_html_a9e129a78644251c2f9034d2032b2ccc1"><div class="ttname"><a href="classRelay__log__info.html#a9e129a78644251c2f9034d2032b2ccc1">Relay_log_info::is_until_satisfied_at_start_slave</a></div><div class="ttdeci">bool is_until_satisfied_at_start_slave()</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1902</div></div>
<div class="ttc" id="classRelay__log__info_html_a79bac7fff3d72c9e7186eaea9ed1b618"><div class="ttname"><a href="classRelay__log__info.html#a79bac7fff3d72c9e7186eaea9ed1b618">Relay_log_info::row_stmt_start_timestamp</a></div><div class="ttdeci">time_t row_stmt_start_timestamp</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1831</div></div>
<div class="ttc" id="classRelay__log__info_html_a706a05a7c2f15a1fb5e7c47732718d49"><div class="ttname"><a href="classRelay__log__info.html#a706a05a7c2f15a1fb5e7c47732718d49">Relay_log_info::mts_total_wait_worker_avail</a></div><div class="ttdeci">ulonglong mts_total_wait_worker_avail</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1192</div></div>
<div class="ttc" id="classRelay__log__info_html_adf7b8e0b547257f58d2603709ecea80b"><div class="ttname"><a href="classRelay__log__info.html#adf7b8e0b547257f58d2603709ecea80b">Relay_log_info::error_on_rli_init_info</a></div><div class="ttdeci">bool error_on_rli_init_info</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:411</div></div>
<div class="ttc" id="classRelay__log__info_html_ad8996d82e9017c6c40237e7fa3744711"><div class="ttname"><a href="classRelay__log__info.html#ad8996d82e9017c6c40237e7fa3744711">Relay_log_info::deferred_events_collecting</a></div><div class="ttdeci">bool deferred_events_collecting</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1041</div></div>
<div class="ttc" id="classTHD_html"><div class="ttname"><a href="classTHD.html">THD</a></div><div class="ttdoc">For each client connection we create a separate thread with THD serving as a thread/connection descri...</div><div class="ttdef"><b>Definition:</b> sql_class.h:803</div></div>
<div class="ttc" id="classRelay__log__info_html_a18cf6e5f7f2d3c1f2cf96fbcf850b9ab"><div class="ttname"><a href="classRelay__log__info.html#a18cf6e5f7f2d3c1f2cf96fbcf850b9ab">Relay_log_info::rows_query_ev</a></div><div class="ttdeci">Rows_query_log_event * rows_query_ev</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:986</div></div>
<div class="ttc" id="classRelay__log__info_html_a003fc0f1dd4d8c31ec8206e75be296fb"><div class="ttname"><a href="classRelay__log__info.html#a003fc0f1dd4d8c31ec8206e75be296fb">Relay_log_info::curr_group_seen_begin</a></div><div class="ttdeci">bool curr_group_seen_begin</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1111</div></div>
<div class="ttc" id="classTHD_html_a3fa3f267d7ce6e0af0504fc0b17345db"><div class="ttname"><a href="classTHD.html#a3fa3f267d7ce6e0af0504fc0b17345db">THD::rli_slave</a></div><div class="ttdeci">Relay_log_info * rli_slave</div><div class="ttdef"><b>Definition:</b> sql_class.h:932</div></div>
<div class="ttc" id="classRelay__log__info_html_a2c39c01240d28e03760b9cc50ad3cf5f"><div class="ttname"><a href="classRelay__log__info.html#a2c39c01240d28e03760b9cc50ad3cf5f">Relay_log_info::pending_jobs_lock</a></div><div class="ttdeci">mysql_mutex_t pending_jobs_lock</div><div class="ttdef"><b>Definition:</b> rpl_rli.h:1088</div></div>
<div class="ttc" id="sql__class_8h_html"><div class="ttname"><a href="sql__class_8h.html">sql_class.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li><li class="navelem"><a class="el" href="rpl__rli_8h.html">rpl_rli.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
