<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/row0pread-histogram.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('row0pread-histogram_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">row0pread-histogram.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="row0pread-histogram_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 2019, 2020, Oracle and/or its affiliates. All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/row0pread-histogram.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">Parallel read histogram interface.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">Created 2019-04-20 by Darshan M N. */</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#ifndef row0pread_histogram_h</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#define row0pread_histogram_h</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;random&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="row0pread_8h.html">row0pread.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0counter_8h.html">ut0counter.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html">   39</a></span>&#160;<span class="keyword">class </span><a class="code" href="classHistogram__sampler.html">Histogram_sampler</a> {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">  /** Constructor.</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">  @param[in]  max_threads         Maximum number of threads to use.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">  @param[in]  sampling_seed       seed to be used for sampling</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">  @param[in]  sampling_percentage percentage of sampling that needs to be done</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">  @param[in]  sampling_method     sampling method to be used for sampling */</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classHistogram__sampler.html#a9e3e52e0b2830dddac6a345e7bcd252d">Histogram_sampler</a>(<span class="keywordtype">size_t</span> max_threads, <span class="keywordtype">int</span> sampling_seed,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                             <span class="keywordtype">double</span> sampling_percentage,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                             <a class="code" href="sql_2handler_8h.html#ae954cfd46ba0b8300368dccf2bebc842">enum_sampling_method</a> sampling_method);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">  /** Destructor. */</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classHistogram__sampler.html#acf66d0e51a0ee34fd63bab9a9f03b7e9">~Histogram_sampler</a>();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">  /** Initialize the sampler context.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">  @param[in]  trx   Transaction used for parallel read.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">  @param[in]  index clustered index.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">  @param[in]  prebuilt  prebuilt info</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">  @retval true on success. */</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classHistogram__sampler.html#a888df7b7051369a4f27fd7c1926b3eff">init</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structrow__prebuilt__t.html">row_prebuilt_t</a> *prebuilt);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">  /** Buffer next row.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classHistogram__sampler.html#ad7e88f7e257c5567c447a2b2be032f98">buffer_next</a>();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">  /** End parallel read in case the reader thread is still active and wait for</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">  its exit. This can happen if we&#39;re ending sampling prematurely. */</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classHistogram__sampler.html#ac688fbd8dc35b8a1370e77293129c25a">buffer_end</a>();</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /** Set the buffer.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">  @param[in]  buf buffer to be used to store the row converted to MySQL</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">  format. */</span></div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a3e2068c8ef2fd6c2f8aff1dac06c4d6e">   71</a></span>&#160;  <span class="keywordtype">void</span> <span class="keyword">set</span>(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacebuf.html">buf</a>) { <a class="code" href="classHistogram__sampler.html#a971c88810d6a737539ae062e556d05ed">m_buf</a> = <a class="code" href="namespacebuf.html">buf</a>; }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">  /** Start the sampling process.</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">  @return DB_SUCCESS or error code. */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classHistogram__sampler.html#a66723966491b586dfb13193d05ea6f61">run</a>();</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">  /** Check if the processing of the record needs to be skipped.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">  In case of record belonging to non-leaf page, we decide if the child page</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">  pertaining to the record needs to be skipped.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">  In case of record belonging to leaf page, we read the page regardless.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">  @return true if it needs to be skipped, else false. */</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classHistogram__sampler.html#a2ba15333585510034d86c5359fbe3323">skip</a>();</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">  /** Wait till there is a request to buffer the next row. */</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classHistogram__sampler.html#ae034c4b6dc1a8b68b91b772161977227">wait_for_start_of_buffering</a>();</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">  /** Wait till the buffering of the row is complete. */</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classHistogram__sampler.html#a4a652bdc39a48041079441c60193039c">wait_for_end_of_buffering</a>();</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">  /** Signal that the next row needs to be buffered. */</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classHistogram__sampler.html#a81c280b8ec8b19fc519cccebb4409e83">signal_start_of_buffering</a>();</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">  /** Signal that the buffering of the row is complete. */</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classHistogram__sampler.html#afc7228f0ec804cc1f34d0c411866a332">signal_end_of_buffering</a>();</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">  /** Set the error state.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">  @param[in] err                Error state to set to. */</span></div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#aa778418c6efcb37bb9588db432a91563">   99</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classHistogram__sampler.html#aa778418c6efcb37bb9588db432a91563">set_error_state</a>(<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>) { <a class="code" href="classHistogram__sampler.html#a5c2714005f2e9062a4aaa30a98e7f283">m_err</a> = <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>; }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">  /** @return true if in error state. */</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a62bbbadc4683474d905f42d6e34576ce">  102</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classHistogram__sampler.html#a62bbbadc4683474d905f42d6e34576ce">is_error_set</a>() const MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classHistogram__sampler.html#a5c2714005f2e9062a4aaa30a98e7f283">m_err</a> != <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654da3a3f63d8e5653727f5af7fdeb326e16d">DB_SUCCESS</a>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">  /** Each parallel reader thread&#39;s init function.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">  @param[in]  reader_thread_ctx  context information related to the thread</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">  @return DB_SUCCESS or error code. */</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classHistogram__sampler.html#a98913fcc2fd49a94419c79906bb7435a">start_callback</a>(<a class="code" href="structParallel__reader_1_1Thread__ctx.html">Parallel_reader::Thread_ctx</a> *reader_thread_ctx)</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">  /** Each parallel reader thread&#39;s end function.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">  @param[in]  reader_thread_ctx  context information related to the thread</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">  @return DB_SUCCESS or error code. */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classHistogram__sampler.html#a721e0ccddba0ce4908e27f7ad6a508e5">finish_callback</a>(<a class="code" href="structParallel__reader_1_1Thread__ctx.html">Parallel_reader::Thread_ctx</a> *reader_thread_ctx)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">  /** Convert the row in InnoDB format to MySQL format and store in the buffer</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">  for server to use.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">  @param[in]  ctx       Parallel read context.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">  @param[in]  rec       record that needs to be converted</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">  @param[in]  offsets   offsets belonging to the record</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">  @param[in]  index     index of the record</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">  @param[in]  prebuilt  Row meta-data cache.</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">  @return DB_SUCCESS or error code. */</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classHistogram__sampler.html#a853a5e8925ce403460f0eb5d52983f5d">sample_rec</a>(<span class="keyword">const</span> <a class="code" href="classParallel__reader_1_1Ctx.html">Parallel_reader::Ctx</a> *ctx, <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                     ulint *offsets, <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *index,</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                     <a class="code" href="structrow__prebuilt__t.html">row_prebuilt_t</a> *prebuilt);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">  /** For each record in a non-leaf block at level 1 (if leaf level is 0)</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">  check if the child page needs to be sampled and if so sample all the rows in</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">  the child page.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">  @param[in]  ctx       Parallel read context.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">  @param[in]  prebuilt  Row meta-data cache.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classHistogram__sampler.html#a520063183bf6174726c9802dc86eae54">process_non_leaf_rec</a>(<span class="keyword">const</span> <a class="code" href="classParallel__reader_1_1Ctx.html">Parallel_reader::Ctx</a> *ctx,</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                               <a class="code" href="structrow__prebuilt__t.html">row_prebuilt_t</a> *prebuilt)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">  /** Process the record in the leaf page. This would happen only when the root</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">  page is the leaf page and in such a case we process the page regardless of</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">  the sampling percentage.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">  @param[in]  ctx       Parallel read context.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">  @param[in]  prebuilt  Row meta-data cache.</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classHistogram__sampler.html#a085051cfe7e93bd7350c6b2771d6296c">process_leaf_rec</a>(<span class="keyword">const</span> <a class="code" href="classParallel__reader_1_1Ctx.html">Parallel_reader::Ctx</a> *ctx,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                           <a class="code" href="structrow__prebuilt__t.html">row_prebuilt_t</a> *prebuilt)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">  /** Buffer to store the sampled row which is in the MySQL format. */</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a971c88810d6a737539ae062e556d05ed">  152</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="classHistogram__sampler.html#a971c88810d6a737539ae062e556d05ed">m_buf</a>{<span class="keyword">nullptr</span>};</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">  /** Event to notify if the next row needs to be buffered. */</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a4b99bc5dccc52b5169e4083c3dd36a38">  155</a></span>&#160;  <a class="code" href="structos__event.html">os_event_t</a> <a class="code" href="classHistogram__sampler.html#a4b99bc5dccc52b5169e4083c3dd36a38">m_start_buffer_event</a>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">  /** Event to notify if the next row has been buffered. */</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a1c0c16185c9d405e89881a6b2b341640">  158</a></span>&#160;  <a class="code" href="structos__event.html">os_event_t</a> <a class="code" href="classHistogram__sampler.html#a1c0c16185c9d405e89881a6b2b341640">m_end_buffer_event</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">  /** Error code when the row was buffered. */</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a5c2714005f2e9062a4aaa30a98e7f283">  161</a></span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classHistogram__sampler.html#a5c2714005f2e9062a4aaa30a98e7f283">m_err</a>{<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654da3a3f63d8e5653727f5af7fdeb326e16d">DB_SUCCESS</a>};</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">  /** The parallel reader. */</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a46dc276e8cd39cbdcfc07df1a3d73c8b">  164</a></span>&#160;  <a class="code" href="classParallel__reader.html">Parallel_reader</a> <a class="code" href="classHistogram__sampler.html#a46dc276e8cd39cbdcfc07df1a3d73c8b">m_parallel_reader</a>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">  /** Random generator engine used to provide us random uniformly distrubuted</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">  values required to decide if the row in question needs to be sampled or</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">  not. */</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#aaccf95580ccdf4f2eac50076f2d6dfbd">  169</a></span>&#160;  std::mt19937 <a class="code" href="classHistogram__sampler.html#aaccf95580ccdf4f2eac50076f2d6dfbd">m_random_generator</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">  /** Uniform distribution used by the random generator. */</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a4d3ed15ee3d0e815b52f1efe42a4316f">  172</a></span>&#160;  <span class="keyword">static</span> std::uniform_real_distribution&lt;double&gt; <a class="code" href="classHistogram__sampler.html#a4d3ed15ee3d0e815b52f1efe42a4316f">m_distribution</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">  /** Sampling method to be used for sampling. */</span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a485b2b9a66b5edd0d05064165d2dfd50">  175</a></span>&#160;  <a class="code" href="sql_2handler_8h.html#ae954cfd46ba0b8300368dccf2bebc842">enum_sampling_method</a> <a class="code" href="classHistogram__sampler.html#a485b2b9a66b5edd0d05064165d2dfd50">m_sampling_method</a>{<a class="code" href="sql_2handler_8h.html#ae954cfd46ba0b8300368dccf2bebc842ab50339a10e1de285ac99d4c3990b8693">enum_sampling_method::NONE</a>};</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">  /** Sampling percentage to be used for sampling */</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a5a84fd927501930d6f6ea1385917ee2a">  178</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classHistogram__sampler.html#a5a84fd927501930d6f6ea1385917ee2a">m_sampling_percentage</a>{};</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">  /** Sampling seed to be used for sampling */</span></div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a1248949f278ff71b8f9e45758c4ee2c5">  181</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classHistogram__sampler.html#a1248949f278ff71b8f9e45758c4ee2c5">m_sampling_seed</a>{};</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">  /** Number of rows sampled */</span></div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="classHistogram__sampler.html#a012d4b3a0abc4a2bdfa5cf271031cd8a">  184</a></span>&#160;  std::atomic_size_t <a class="code" href="classHistogram__sampler.html#a012d4b3a0abc4a2bdfa5cf271031cd8a">m_n_sampled</a>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;};</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !row0pread_histogram_h */</span><span class="preprocessor"></span></div><div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654da3a3f63d8e5653727f5af7fdeb326e16d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654da3a3f63d8e5653727f5af7fdeb326e16d">DB_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> db0err.h:42</div></div>
<div class="ttc" id="classHistogram__sampler_html_a1248949f278ff71b8f9e45758c4ee2c5"><div class="ttname"><a href="classHistogram__sampler.html#a1248949f278ff71b8f9e45758c4ee2c5">Histogram_sampler::m_sampling_seed</a></div><div class="ttdeci">int m_sampling_seed</div><div class="ttdoc">Sampling seed to be used for sampling. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:181</div></div>
<div class="ttc" id="structtrx__t_html"><div class="ttname"><a href="structtrx__t.html">trx_t</a></div><div class="ttdef"><b>Definition:</b> trx0trx.h:833</div></div>
<div class="ttc" id="classParallel__reader_html"><div class="ttname"><a href="classParallel__reader.html">Parallel_reader</a></div><div class="ttdoc">The core idea is to find the left and right paths down the B+Tree.These paths correspond to the scan ...</div><div class="ttdef"><b>Definition:</b> row0pread.h:99</div></div>
<div class="ttc" id="ut0counter_8h_html"><div class="ttname"><a href="ut0counter_8h.html">ut0counter.h</a></div><div class="ttdoc">Counter utility class. </div></div>
<div class="ttc" id="classHistogram__sampler_html_a5c2714005f2e9062a4aaa30a98e7f283"><div class="ttname"><a href="classHistogram__sampler.html#a5c2714005f2e9062a4aaa30a98e7f283">Histogram_sampler::m_err</a></div><div class="ttdeci">dberr_t m_err</div><div class="ttdoc">Error code when the row was buffered. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:161</div></div>
<div class="ttc" id="classHistogram__sampler_html_a46dc276e8cd39cbdcfc07df1a3d73c8b"><div class="ttname"><a href="classHistogram__sampler.html#a46dc276e8cd39cbdcfc07df1a3d73c8b">Histogram_sampler::m_parallel_reader</a></div><div class="ttdeci">Parallel_reader m_parallel_reader</div><div class="ttdoc">The parallel reader. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:164</div></div>
<div class="ttc" id="classHistogram__sampler_html_ae034c4b6dc1a8b68b91b772161977227"><div class="ttname"><a href="classHistogram__sampler.html#ae034c4b6dc1a8b68b91b772161977227">Histogram_sampler::wait_for_start_of_buffering</a></div><div class="ttdeci">void wait_for_start_of_buffering()</div><div class="ttdoc">Wait till there is a request to buffer the next row. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:147</div></div>
<div class="ttc" id="classHistogram__sampler_html_a971c88810d6a737539ae062e556d05ed"><div class="ttname"><a href="classHistogram__sampler.html#a971c88810d6a737539ae062e556d05ed">Histogram_sampler::m_buf</a></div><div class="ttdeci">byte * m_buf</div><div class="ttdoc">Buffer to store the sampled row which is in the MySQL format. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:152</div></div>
<div class="ttc" id="classHistogram__sampler_html_a81c280b8ec8b19fc519cccebb4409e83"><div class="ttname"><a href="classHistogram__sampler.html#a81c280b8ec8b19fc519cccebb4409e83">Histogram_sampler::signal_start_of_buffering</a></div><div class="ttdeci">void signal_start_of_buffering()</div><div class="ttdoc">Signal that the next row needs to be buffered. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:159</div></div>
<div class="ttc" id="classHistogram__sampler_html_a4b99bc5dccc52b5169e4083c3dd36a38"><div class="ttname"><a href="classHistogram__sampler.html#a4b99bc5dccc52b5169e4083c3dd36a38">Histogram_sampler::m_start_buffer_event</a></div><div class="ttdeci">os_event_t m_start_buffer_event</div><div class="ttdoc">Event to notify if the next row needs to be buffered. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:155</div></div>
<div class="ttc" id="classHistogram__sampler_html_acf66d0e51a0ee34fd63bab9a9f03b7e9"><div class="ttname"><a href="classHistogram__sampler.html#acf66d0e51a0ee34fd63bab9a9f03b7e9">Histogram_sampler::~Histogram_sampler</a></div><div class="ttdeci">~Histogram_sampler()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:69</div></div>
<div class="ttc" id="row0pread_8h_html"><div class="ttname"><a href="row0pread_8h.html">row0pread.h</a></div><div class="ttdoc">Parallel read interface. </div></div>
<div class="ttc" id="namespacebuf_html"><div class="ttname"><a href="namespacebuf.html">buf</a></div><div class="ttdef"><b>Definition:</b> buf0block_hint.cc:29</div></div>
<div class="ttc" id="classHistogram__sampler_html_ad7e88f7e257c5567c447a2b2be032f98"><div class="ttname"><a href="classHistogram__sampler.html#ad7e88f7e257c5567c447a2b2be032f98">Histogram_sampler::buffer_next</a></div><div class="ttdeci">dberr_t buffer_next()</div><div class="ttdoc">Buffer next row. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:197</div></div>
<div class="ttc" id="classHistogram__sampler_html"><div class="ttname"><a href="classHistogram__sampler.html">Histogram_sampler</a></div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:39</div></div>
<div class="ttc" id="classHistogram__sampler_html_a485b2b9a66b5edd0d05064165d2dfd50"><div class="ttname"><a href="classHistogram__sampler.html#a485b2b9a66b5edd0d05064165d2dfd50">Histogram_sampler::m_sampling_method</a></div><div class="ttdeci">enum_sampling_method m_sampling_method</div><div class="ttdoc">Sampling method to be used for sampling. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:175</div></div>
<div class="ttc" id="classParallel__reader_1_1Ctx_html"><div class="ttname"><a href="classParallel__reader_1_1Ctx.html">Parallel_reader::Ctx</a></div><div class="ttdoc">Parallel reader execution context. </div><div class="ttdef"><b>Definition:</b> row0pread.h:671</div></div>
<div class="ttc" id="classHistogram__sampler_html_a98913fcc2fd49a94419c79906bb7435a"><div class="ttname"><a href="classHistogram__sampler.html#a98913fcc2fd49a94419c79906bb7435a">Histogram_sampler::start_callback</a></div><div class="ttdeci">dberr_t start_callback(Parallel_reader::Thread_ctx *reader_thread_ctx)</div><div class="ttdoc">Each parallel reader thread&amp;#39;s init function. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:76</div></div>
<div class="ttc" id="classHistogram__sampler_html_a62bbbadc4683474d905f42d6e34576ce"><div class="ttname"><a href="classHistogram__sampler.html#a62bbbadc4683474d905f42d6e34576ce">Histogram_sampler::is_error_set</a></div><div class="ttdeci">bool is_error_set() const</div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:102</div></div>
<div class="ttc" id="classHistogram__sampler_html_aa778418c6efcb37bb9588db432a91563"><div class="ttname"><a href="classHistogram__sampler.html#aa778418c6efcb37bb9588db432a91563">Histogram_sampler::set_error_state</a></div><div class="ttdeci">void set_error_state(dberr_t err)</div><div class="ttdoc">Set the error state. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:99</div></div>
<div class="ttc" id="structrow__prebuilt__t_html"><div class="ttname"><a href="structrow__prebuilt__t.html">row_prebuilt_t</a></div><div class="ttdoc">A struct for (sometimes lazily) prebuilt structures in an Innobase table handle used within MySQL; th...</div><div class="ttdef"><b>Definition:</b> row0mysql.h:550</div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="classHistogram__sampler_html_a085051cfe7e93bd7350c6b2771d6296c"><div class="ttname"><a href="classHistogram__sampler.html#a085051cfe7e93bd7350c6b2771d6296c">Histogram_sampler::process_leaf_rec</a></div><div class="ttdeci">dberr_t process_leaf_rec(const Parallel_reader::Ctx *ctx, row_prebuilt_t *prebuilt)</div><div class="ttdoc">Process the record in the leaf page. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:334</div></div>
<div class="ttc" id="rem0types_8h_html_a92caeffe2dc2fbe825a54aef9a163435"><div class="ttname"><a href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a></div><div class="ttdeci">byte rec_t</div><div class="ttdef"><b>Definition:</b> rem0types.h:39</div></div>
<div class="ttc" id="classHistogram__sampler_html_a5a84fd927501930d6f6ea1385917ee2a"><div class="ttname"><a href="classHistogram__sampler.html#a5a84fd927501930d6f6ea1385917ee2a">Histogram_sampler::m_sampling_percentage</a></div><div class="ttdeci">double m_sampling_percentage</div><div class="ttdoc">Sampling percentage to be used for sampling. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:178</div></div>
<div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:38</div></div>
<div class="ttc" id="classHistogram__sampler_html_a2ba15333585510034d86c5359fbe3323"><div class="ttname"><a href="classHistogram__sampler.html#a2ba15333585510034d86c5359fbe3323">Histogram_sampler::skip</a></div><div class="ttdeci">bool skip()</div><div class="ttdoc">Check if the processing of the record needs to be skipped. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:167</div></div>
<div class="ttc" id="sql_2handler_8h_html_ae954cfd46ba0b8300368dccf2bebc842ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="sql_2handler_8h.html#ae954cfd46ba0b8300368dccf2bebc842ab50339a10e1de285ac99d4c3990b8693">enum_sampling_method::NONE</a></div></div>
<div class="ttc" id="classHistogram__sampler_html_ac688fbd8dc35b8a1370e77293129c25a"><div class="ttname"><a href="classHistogram__sampler.html#ac688fbd8dc35b8a1370e77293129c25a">Histogram_sampler::buffer_end</a></div><div class="ttdeci">void buffer_end()</div><div class="ttdoc">End parallel read in case the reader thread is still active and wait for its exit. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:215</div></div>
<div class="ttc" id="namespacejson__binary_html_a091356787f1fe6633bc180fc2009c606"><div class="ttname"><a href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">json_binary::err</a></div><div class="ttdeci">static Value err()</div><div class="ttdoc">Create a Value object that represents an error condition. </div><div class="ttdef"><b>Definition:</b> json_binary.cc:908</div></div>
<div class="ttc" id="classHistogram__sampler_html_afc7228f0ec804cc1f34d0c411866a332"><div class="ttname"><a href="classHistogram__sampler.html#afc7228f0ec804cc1f34d0c411866a332">Histogram_sampler::signal_end_of_buffering</a></div><div class="ttdeci">void signal_end_of_buffering()</div><div class="ttdoc">Signal that the buffering of the row is complete. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:163</div></div>
<div class="ttc" id="classHistogram__sampler_html_a66723966491b586dfb13193d05ea6f61"><div class="ttname"><a href="classHistogram__sampler.html#a66723966491b586dfb13193d05ea6f61">Histogram_sampler::run</a></div><div class="ttdeci">dberr_t run()</div><div class="ttdoc">Start the sampling process. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:225</div></div>
<div class="ttc" id="classHistogram__sampler_html_a721e0ccddba0ce4908e27f7ad6a508e5"><div class="ttname"><a href="classHistogram__sampler.html#a721e0ccddba0ce4908e27f7ad6a508e5">Histogram_sampler::finish_callback</a></div><div class="ttdeci">dberr_t finish_callback(Parallel_reader::Thread_ctx *reader_thread_ctx)</div><div class="ttdoc">Each parallel reader thread&amp;#39;s end function. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:93</div></div>
<div class="ttc" id="classHistogram__sampler_html_a853a5e8925ce403460f0eb5d52983f5d"><div class="ttname"><a href="classHistogram__sampler.html#a853a5e8925ce403460f0eb5d52983f5d">Histogram_sampler::sample_rec</a></div><div class="ttdeci">dberr_t sample_rec(const Parallel_reader::Ctx *ctx, const rec_t *rec, ulint *offsets, const dict_index_t *index, row_prebuilt_t *prebuilt)</div><div class="ttdoc">Convert the row in InnoDB format to MySQL format and store in the buffer for server to use...</div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:227</div></div>
<div class="ttc" id="classHistogram__sampler_html_aaccf95580ccdf4f2eac50076f2d6dfbd"><div class="ttname"><a href="classHistogram__sampler.html#aaccf95580ccdf4f2eac50076f2d6dfbd">Histogram_sampler::m_random_generator</a></div><div class="ttdeci">std::mt19937 m_random_generator</div><div class="ttdoc">Random generator engine used to provide us random uniformly distrubuted values required to decide if ...</div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:169</div></div>
<div class="ttc" id="classHistogram__sampler_html_a012d4b3a0abc4a2bdfa5cf271031cd8a"><div class="ttname"><a href="classHistogram__sampler.html#a012d4b3a0abc4a2bdfa5cf271031cd8a">Histogram_sampler::m_n_sampled</a></div><div class="ttdeci">std::atomic_size_t m_n_sampled</div><div class="ttdoc">Number of rows sampled. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:184</div></div>
<div class="ttc" id="classHistogram__sampler_html_a888df7b7051369a4f27fd7c1926b3eff"><div class="ttname"><a href="classHistogram__sampler.html#a888df7b7051369a4f27fd7c1926b3eff">Histogram_sampler::init</a></div><div class="ttdeci">bool init(trx_t *trx, dict_index_t *index, row_prebuilt_t *prebuilt)</div><div class="ttdoc">Initialize the sampler context. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:117</div></div>
<div class="ttc" id="structos__event_html"><div class="ttname"><a href="structos__event.html">os_event</a></div><div class="ttdoc">InnoDB condition variable. </div><div class="ttdef"><b>Definition:</b> os0event.cc:66</div></div>
<div class="ttc" id="classHistogram__sampler_html_a9e3e52e0b2830dddac6a345e7bcd252d"><div class="ttname"><a href="classHistogram__sampler.html#a9e3e52e0b2830dddac6a345e7bcd252d">Histogram_sampler::Histogram_sampler</a></div><div class="ttdeci">Histogram_sampler(size_t max_threads, int sampling_seed, double sampling_percentage, enum_sampling_method sampling_method)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:40</div></div>
<div class="ttc" id="sql_2handler_8h_html_ae954cfd46ba0b8300368dccf2bebc842"><div class="ttname"><a href="sql_2handler_8h.html#ae954cfd46ba0b8300368dccf2bebc842">enum_sampling_method</a></div><div class="ttdeci">enum_sampling_method</div><div class="ttdef"><b>Definition:</b> handler.h:695</div></div>
<div class="ttc" id="classHistogram__sampler_html_a1c0c16185c9d405e89881a6b2b341640"><div class="ttname"><a href="classHistogram__sampler.html#a1c0c16185c9d405e89881a6b2b341640">Histogram_sampler::m_end_buffer_event</a></div><div class="ttdeci">os_event_t m_end_buffer_event</div><div class="ttdoc">Event to notify if the next row has been buffered. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:158</div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="classHistogram__sampler_html_a4d3ed15ee3d0e815b52f1efe42a4316f"><div class="ttname"><a href="classHistogram__sampler.html#a4d3ed15ee3d0e815b52f1efe42a4316f">Histogram_sampler::m_distribution</a></div><div class="ttdeci">static std::uniform_real_distribution&lt; double &gt; m_distribution</div><div class="ttdoc">Uniform distribution used by the random generator. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.h:172</div></div>
<div class="ttc" id="structParallel__reader_1_1Thread__ctx_html"><div class="ttname"><a href="structParallel__reader_1_1Thread__ctx.html">Parallel_reader::Thread_ctx</a></div><div class="ttdoc">Thread related context information. </div><div class="ttdef"><b>Definition:</b> row0pread.h:203</div></div>
<div class="ttc" id="classHistogram__sampler_html_a520063183bf6174726c9802dc86eae54"><div class="ttname"><a href="classHistogram__sampler.html#a520063183bf6174726c9802dc86eae54">Histogram_sampler::process_non_leaf_rec</a></div><div class="ttdeci">dberr_t process_non_leaf_rec(const Parallel_reader::Ctx *ctx, row_prebuilt_t *prebuilt)</div><div class="ttdoc">For each record in a non-leaf block at level 1 (if leaf level is 0) check if the child page needs to ...</div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:259</div></div>
<div class="ttc" id="classHistogram__sampler_html_a4a652bdc39a48041079441c60193039c"><div class="ttname"><a href="classHistogram__sampler.html#a4a652bdc39a48041079441c60193039c">Histogram_sampler::wait_for_end_of_buffering</a></div><div class="ttdeci">void wait_for_end_of_buffering()</div><div class="ttdoc">Wait till the buffering of the row is complete. </div><div class="ttdef"><b>Definition:</b> row0pread-histogram.cc:153</div></div>
<div class="ttc" id="structdict__index__t_html"><div class="ttname"><a href="structdict__index__t.html">dict_index_t</a></div><div class="ttdoc">Data structure for an index. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:886</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="row0pread-histogram_8h.html">row0pread-histogram.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
