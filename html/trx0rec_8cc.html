<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/trx/trx0rec.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('trx0rec_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">trx0rec.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transaction undo log record.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="trx0rec_8h_source.html">trx0rec.h</a>&quot;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &quot;<a class="el" href="fsp0fsp_8h_source.html">fsp0fsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mach0data_8h_source.html">mach0data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mtr0log_8h_source.html">mtr0log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0undo_8h_source.html">trx0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0dict_8h_source.html">dict0dict.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fsp0sysspace_8h_source.html">fsp0sysspace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lob0index_8h_source.html">lob0index.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lob0inf_8h_source.html">lob0inf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lob0lob_8h_source.html">lob0lob.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0que_8h_source.html">que0que.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="read0read_8h_source.html">read0read.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0ext_8h_source.html">row0ext.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0mysql_8h_source.html">row0mysql.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0row_8h_source.html">row0row.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0upd_8h_source.html">row0upd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0purge_8h_source.html">trx0purge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0rseg_8h_source.html">trx0rseg.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0mem_8h_source.html">ut0mem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacedd"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedd.html">dd</a></td></tr>
<tr class="memdesc:namespacedd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The version of the current data dictionary table definitions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa00d41ba476e75a2d04e414aaf90f9d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#aa00d41ba476e75a2d04e414aaf90f9d3">trx_undo_page_fetch_ext</a>(trx,  <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,  ext_buf,  prefix_len,  page_size,  field,  is_sdi,  len)</td></tr>
<tr class="separator:aa00d41ba476e75a2d04e414aaf90f9d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a7fcb27f48ff8999895f20e43c69207"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a0a7fcb27f48ff8999895f20e43c69207">trx_undo_page_report_modify_ext</a>(trx,  <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,  ptr,  ext_buf,  prefix_len,  page_size,  field,  len,  is_sdi,  spatial_status)</td></tr>
<tr class="separator:a0a7fcb27f48ff8999895f20e43c69207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c313838eb941721d7485ed7d8ae7fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a12c313838eb941721d7485ed7d8ae7fc">ATTRIB_USED_ONLY_IN_DEBUG</a></td></tr>
<tr class="separator:a12c313838eb941721d7485ed7d8ae7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0cba1ac9ac486cc339404f3f7b3ee765"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a0cba1ac9ac486cc339404f3f7b3ee765">trx_undof_page_add_undo_rec_log</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, ulint old_free, ulint new_free, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a0cba1ac9ac486cc339404f3f7b3ee765"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the mtr log entry of the inserted undo log record on the undo log page.  <a href="#a0cba1ac9ac486cc339404f3f7b3ee765">More...</a><br /></td></tr>
<tr class="separator:a0cba1ac9ac486cc339404f3f7b3ee765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a41486ecad84531c6f852c73288ce4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a21a41486ecad84531c6f852c73288ce4">trx_undo_parse_add_undo_rec</a> (<a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>)</td></tr>
<tr class="memdesc:a21a41486ecad84531c6f852c73288ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a redo log record of adding an undo log record.  <a href="#a21a41486ecad84531c6f852c73288ce4">More...</a><br /></td></tr>
<tr class="separator:a21a41486ecad84531c6f852c73288ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5fdc1d0edaf8d7891aedccde0aa2201"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#ac5fdc1d0edaf8d7891aedccde0aa2201">trx_undo_left</a> (const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr)</td></tr>
<tr class="memdesc:ac5fdc1d0edaf8d7891aedccde0aa2201"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the free space left for extending an undo log record.  <a href="#ac5fdc1d0edaf8d7891aedccde0aa2201">More...</a><br /></td></tr>
<tr class="separator:ac5fdc1d0edaf8d7891aedccde0aa2201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff965f452d447f88d7d5cfb7f042bd58"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#aff965f452d447f88d7d5cfb7f042bd58">trx_undo_max_free_space</a> ()</td></tr>
<tr class="memdesc:aff965f452d447f88d7d5cfb7f042bd58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the max free space of undo log by assuming it's a fresh new page and the free space doesn't count for the undo log header too.  <a href="#aff965f452d447f88d7d5cfb7f042bd58">More...</a><br /></td></tr>
<tr class="separator:aff965f452d447f88d7d5cfb7f042bd58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85d60197b7b3561fc88db2bac1da7b5"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#af85d60197b7b3561fc88db2bac1da7b5">trx_undo_page_set_next_prev_and_add</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:af85d60197b7b3561fc88db2bac1da7b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the next and previous pointers in the undo page for the undo record that was written to ptr.  <a href="#af85d60197b7b3561fc88db2bac1da7b5">More...</a><br /></td></tr>
<tr class="separator:af85d60197b7b3561fc88db2bac1da7b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afddad8a35a6f71bb6dc604d772b1832b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#afddad8a35a6f71bb6dc604d772b1832b">trx_undo_rec_is_multi_value</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *undo_rec)</td></tr>
<tr class="memdesc:afddad8a35a6f71bb6dc604d772b1832b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide if the following undo log record is a multi-value virtual column.  <a href="#afddad8a35a6f71bb6dc604d772b1832b">More...</a><br /></td></tr>
<tr class="separator:afddad8a35a6f71bb6dc604d772b1832b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a8c42bb19f149d818b80f43dc21c6c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a31a8c42bb19f149d818b80f43dc21c6c">trx_undo_log_v_idx</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, ulint <a class="el" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> first_v_col)</td></tr>
<tr class="memdesc:a31a8c42bb19f149d818b80f43dc21c6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write virtual column index info (index id and column position in index) to the undo log.  <a href="#a31a8c42bb19f149d818b80f43dc21c6c">More...</a><br /></td></tr>
<tr class="separator:a31a8c42bb19f149d818b80f43dc21c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d413618d9a9979284d5e9595dc3497e"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a9d413618d9a9979284d5e9595dc3497e">trx_undo_read_v_idx_low</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, ulint *col_pos)</td></tr>
<tr class="memdesc:a9d413618d9a9979284d5e9595dc3497e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read virtual column index from undo log, and verify the column is still indexed, and return its position.  <a href="#a9d413618d9a9979284d5e9595dc3497e">More...</a><br /></td></tr>
<tr class="separator:a9d413618d9a9979284d5e9595dc3497e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc4a542764a35a68b6e6b7f056aa0e60"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#afc4a542764a35a68b6e6b7f056aa0e60">trx_undo_read_v_idx</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> first_v_col, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *is_undo_log, ulint *field_no)</td></tr>
<tr class="memdesc:afc4a542764a35a68b6e6b7f056aa0e60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read virtual column index from undo log or online log if the log contains such info, and in the undo log case, verify the column is still indexed, and output its position.  <a href="#afc4a542764a35a68b6e6b7f056aa0e60">More...</a><br /></td></tr>
<tr class="separator:afc4a542764a35a68b6e6b7f056aa0e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a885ce773e17c3a83c0c7634e2ef0dd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a3a885ce773e17c3a83c0c7634e2ef0dd">trx_undo_store_multi_value</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, const <a class="el" href="structdfield__t.html">dfield_t</a> *vfield, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **ptr)</td></tr>
<tr class="memdesc:a3a885ce773e17c3a83c0c7634e2ef0dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the multi-value column information for undo log.  <a href="#a3a885ce773e17c3a83c0c7634e2ef0dd">More...</a><br /></td></tr>
<tr class="separator:a3a885ce773e17c3a83c0c7634e2ef0dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01164fa82e3761affcad5466dfd72ffe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a01164fa82e3761affcad5466dfd72ffe">trx_undo_report_insert_virtual</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *row, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **ptr)</td></tr>
<tr class="memdesc:a01164fa82e3761affcad5466dfd72ffe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports in the undo log of an insert of virtual columns.  <a href="#a01164fa82e3761affcad5466dfd72ffe">More...</a><br /></td></tr>
<tr class="separator:a01164fa82e3761affcad5466dfd72ffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6360dbff80bf489d23b07dfc3271b4a9"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a6360dbff80bf489d23b07dfc3271b4a9">trx_undo_page_report_insert</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *clust_entry, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a6360dbff80bf489d23b07dfc3271b4a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports in the undo log of an insert of a clustered index record.  <a href="#a6360dbff80bf489d23b07dfc3271b4a9">More...</a><br /></td></tr>
<tr class="separator:a6360dbff80bf489d23b07dfc3271b4a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2322117e1e3b2610ff39a17e60f1b8e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a2322117e1e3b2610ff39a17e60f1b8e3">trx_undo_rec_get_pars</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec, ulint *type, ulint *cmpl_info, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *updated_extern, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> *undo_no, <a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> *table_id, <a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a> &amp;type_cmpl)</td></tr>
<tr class="memdesc:a2322117e1e3b2610ff39a17e60f1b8e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an undo log record the general parameters.  <a href="#a2322117e1e3b2610ff39a17e60f1b8e3">More...</a><br /></td></tr>
<tr class="separator:a2322117e1e3b2610ff39a17e60f1b8e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afabb59f72f20367f7d622b40ce1eda7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#afabb59f72f20367f7d622b40ce1eda7e">trx_undo_rec_get_table_id</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memdesc:afabb59f72f20367f7d622b40ce1eda7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an undo log record the table ID.  <a href="#afabb59f72f20367f7d622b40ce1eda7e">More...</a><br /></td></tr>
<tr class="separator:afabb59f72f20367f7d622b40ce1eda7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1043e8db416626276800c8da5637ab8e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a1043e8db416626276800c8da5637ab8e">trx_undo_rec_get_multi_value</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="structdfield__t.html">dfield_t</a> *field, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a1043e8db416626276800c8da5637ab8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from an undo log record of a multi-value virtual column.  <a href="#a1043e8db416626276800c8da5637ab8e">More...</a><br /></td></tr>
<tr class="separator:a1043e8db416626276800c8da5637ab8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f0a7c02bc5673d59ebec7ceaad7862"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a51f0a7c02bc5673d59ebec7ceaad7862">trx_undo_rec_get_col_val</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **field, ulint *len, ulint *orig_len)</td></tr>
<tr class="memdesc:a51f0a7c02bc5673d59ebec7ceaad7862"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from an undo log record a non-virtual column value.  <a href="#a51f0a7c02bc5673d59ebec7ceaad7862">More...</a><br /></td></tr>
<tr class="separator:a51f0a7c02bc5673d59ebec7ceaad7862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af342f2995de54e084d2ea5e042f50c6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#af342f2995de54e084d2ea5e042f50c6c">trx_undo_rec_get_row_ref</a> (<a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdtuple__t.html">dtuple_t</a> **ref, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:af342f2995de54e084d2ea5e042f50c6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a row reference from an undo log record.  <a href="#af342f2995de54e084d2ea5e042f50c6c">More...</a><br /></td></tr>
<tr class="separator:af342f2995de54e084d2ea5e042f50c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3428eb8ab37c163d573e17ddd397e436"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a3428eb8ab37c163d573e17ddd397e436">trx_undo_rec_skip_row_ref</a> (<a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a3428eb8ab37c163d573e17ddd397e436"><td class="mdescLeft">&#160;</td><td class="mdescRight">Skips a row reference from an undo log record.  <a href="#a3428eb8ab37c163d573e17ddd397e436">More...</a><br /></td></tr>
<tr class="separator:a3428eb8ab37c163d573e17ddd397e436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e8d15bc4cbcb36e108716b5a1c15f86"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a9e8d15bc4cbcb36e108716b5a1c15f86">trx_undo_page_fetch_ext_func</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ext_buf, ulint prefix_len, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *field, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_sdi, ulint *len)</td></tr>
<tr class="memdesc:a9e8d15bc4cbcb36e108716b5a1c15f86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch a prefix of an externally stored column, for writing to the undo log of an update or delete marking of a clustered index record.  <a href="#a9e8d15bc4cbcb36e108716b5a1c15f86">More...</a><br /></td></tr>
<tr class="separator:a9e8d15bc4cbcb36e108716b5a1c15f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed3c491f1ae48d49740e15904b0dcc5b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#aed3c491f1ae48d49740e15904b0dcc5b">trx_undo_page_report_modify_ext_func</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ext_buf, ulint prefix_len, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **field, ulint *len, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_sdi, <a class="el" href="dict0types_8h.html#a2dc72e9ff7d0244e9f223ab2052a147d">spatial_status_t</a> spatial_status)</td></tr>
<tr class="memdesc:aed3c491f1ae48d49740e15904b0dcc5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes to the undo log a prefix of an externally stored column.  <a href="#aed3c491f1ae48d49740e15904b0dcc5b">More...</a><br /></td></tr>
<tr class="separator:aed3c491f1ae48d49740e15904b0dcc5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99637d5f30163597cf0485559e4e5a85"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a99637d5f30163597cf0485559e4e5a85">trx_undo_get_mbr_from_ext</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, double *mbr, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *field, ulint *len, const <a class="el" href="classdd_1_1Spatial__reference__system.html">dd::Spatial_reference_system</a> *srs)</td></tr>
<tr class="memdesc:a99637d5f30163597cf0485559e4e5a85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get MBR from a Geometry column stored externally.  <a href="#a99637d5f30163597cf0485559e4e5a85">More...</a><br /></td></tr>
<tr class="separator:a99637d5f30163597cf0485559e4e5a85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4ee9e1eccbdea3fe5493fece6412b9e"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#ac4ee9e1eccbdea3fe5493fece6412b9e">trx_undo_read_blob_update</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *undo_ptr, <a class="el" href="structupd__field__t.html">upd_field_t</a> *uf, <a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *lob_undo)</td></tr>
<tr class="separator:ac4ee9e1eccbdea3fe5493fece6412b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaddcbeeb62d6ccfd1525533edf2ac8ad"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#aaddcbeeb62d6ccfd1525533edf2ac8ad">trx_undo_report_blob_update</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *undo_ptr, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *field, ulint flen, const <a class="el" href="structupd__t.html">upd_t</a> *<a class="el" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, <a class="el" href="structupd__field__t.html">upd_field_t</a> *fld, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:aaddcbeeb62d6ccfd1525533edf2ac8ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the partial update information about LOBs to the undo log record.  <a href="#aaddcbeeb62d6ccfd1525533edf2ac8ad">More...</a><br /></td></tr>
<tr class="separator:aaddcbeeb62d6ccfd1525533edf2ac8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5941da9dc9347d1cd8cb3f2df8982a25"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a5941da9dc9347d1cd8cb3f2df8982a25">trx_undo_page_report_modify</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const ulint *offsets, const <a class="el" href="structupd__t.html">upd_t</a> *<a class="el" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, ulint cmpl_info, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *row, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a5941da9dc9347d1cd8cb3f2df8982a25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports in the undo log of an update or delete marking of a clustered index record.  <a href="#a5941da9dc9347d1cd8cb3f2df8982a25">More...</a><br /></td></tr>
<tr class="separator:a5941da9dc9347d1cd8cb3f2df8982a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a324bbc5d0dd2ad6bcf2caf37ea2ef88a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a324bbc5d0dd2ad6bcf2caf37ea2ef88a">trx_undo_update_rec_get_sys_cols</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *trx_id, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr, ulint *info_bits)</td></tr>
<tr class="memdesc:a324bbc5d0dd2ad6bcf2caf37ea2ef88a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an undo log update record the system field values of the old version.  <a href="#a324bbc5d0dd2ad6bcf2caf37ea2ef88a">More...</a><br /></td></tr>
<tr class="separator:a324bbc5d0dd2ad6bcf2caf37ea2ef88a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a302b5ca1f95234d5ad91b3d34227423e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a302b5ca1f95234d5ad91b3d34227423e">trx_undo_update_rec_get_update</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint type, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr, ulint info_bits, <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="structupd__t.html">upd_t</a> **upd, <a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *lob_undo, <a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a> &amp;type_cmpl)</td></tr>
<tr class="memdesc:a302b5ca1f95234d5ad91b3d34227423e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds an update vector based on a remaining part of an undo log record.  <a href="#a302b5ca1f95234d5ad91b3d34227423e">More...</a><br /></td></tr>
<tr class="separator:a302b5ca1f95234d5ad91b3d34227423e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e51ec89401164642aa4bf9e329858d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a59e51ec89401164642aa4bf9e329858d">trx_undo_rec_get_partial_row</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdtuple__t.html">dtuple_t</a> **row, ibool ignore_prefix, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a59e51ec89401164642aa4bf9e329858d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a partial row from an update undo log record, for purge.  <a href="#a59e51ec89401164642aa4bf9e329858d">More...</a><br /></td></tr>
<tr class="separator:a59e51ec89401164642aa4bf9e329858d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5f6bbe13f44572a126686af9047572"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#abf5f6bbe13f44572a126686af9047572">trx_undo_erase_page_end</a> (<a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:abf5f6bbe13f44572a126686af9047572"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases the unused undo log page end.  <a href="#abf5f6bbe13f44572a126686af9047572">More...</a><br /></td></tr>
<tr class="separator:abf5f6bbe13f44572a126686af9047572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9356d49e12323fc80c96cd83dd2cf938"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a9356d49e12323fc80c96cd83dd2cf938">trx_undo_parse_erase_page_end</a> (<a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a9356d49e12323fc80c96cd83dd2cf938"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a redo log record of erasing of an undo page end.  <a href="#a9356d49e12323fc80c96cd83dd2cf938">More...</a><br /></td></tr>
<tr class="separator:a9356d49e12323fc80c96cd83dd2cf938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b4faef28fe9a4375884b236e33d740e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a9b4faef28fe9a4375884b236e33d740e">trx_undo_report_row_operation</a> (ulint <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, ulint op_type, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *clust_entry, const <a class="el" href="structupd__t.html">upd_t</a> *<a class="el" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, ulint cmpl_info, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const ulint *offsets, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr)</td></tr>
<tr class="memdesc:a9b4faef28fe9a4375884b236e33d740e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes information to an undo log about an insert, update, or a delete marking of a clustered index record.  <a href="#a9b4faef28fe9a4375884b236e33d740e">More...</a><br /></td></tr>
<tr class="separator:a9b4faef28fe9a4375884b236e33d740e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fdd9c2554a7bd5f22a774fbef4a7694"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a2fdd9c2554a7bd5f22a774fbef4a7694">trx_undo_get_undo_rec_low</a> (<a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_temp)</td></tr>
<tr class="memdesc:a2fdd9c2554a7bd5f22a774fbef4a7694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies an undo record to heap.  <a href="#a2fdd9c2554a7bd5f22a774fbef4a7694">More...</a><br /></td></tr>
<tr class="separator:a2fdd9c2554a7bd5f22a774fbef4a7694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e45173b58297454e220c15b344e618c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a5e45173b58297454e220c15b344e618c">trx_undo_get_undo_rec</a> (<a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_temp, const <a class="el" href="structtable__name__t.html">table_name_t</a> &amp;<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>, <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> **undo_rec)</td></tr>
<tr class="memdesc:a5e45173b58297454e220c15b344e618c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies an undo record to heap.  <a href="#a5e45173b58297454e220c15b344e618c">More...</a><br /></td></tr>
<tr class="separator:a5e45173b58297454e220c15b344e618c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ec6cc9a7fea683695e2f06ba23f916"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#aa4ec6cc9a7fea683695e2f06ba23f916">trx_undo_prev_version_build</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *index_rec, <a class="el" href="structmtr__t.html">mtr_t</a> *index_mtr, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *const <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint *offsets, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> **old_vers, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *v_heap, const <a class="el" href="structdtuple__t.html">dtuple_t</a> **vrow, ulint v_status, <a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *lob_undo)</td></tr>
<tr class="memdesc:aa4ec6cc9a7fea683695e2f06ba23f916"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a previous version of a clustered index record.  <a href="#aa4ec6cc9a7fea683695e2f06ba23f916">More...</a><br /></td></tr>
<tr class="separator:aa4ec6cc9a7fea683695e2f06ba23f916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a343761be8957a62e701c95166e2081a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a343761be8957a62e701c95166e2081a1">trx_undo_read_v_cols</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *row, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> in_purge, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> online, const ulint *col_map, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a343761be8957a62e701c95166e2081a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read virtual column value from undo log.  <a href="#a343761be8957a62e701c95166e2081a1">More...</a><br /></td></tr>
<tr class="separator:a343761be8957a62e701c95166e2081a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a32cffd3ac03791f2e0a5125b00ea369f"><td class="memItemLeft" align="right" valign="top">static const ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8cc.html#a32cffd3ac03791f2e0a5125b00ea369f">VIRTUAL_COL_UNDO_FORMAT_1</a> = 0xF1</td></tr>
<tr class="memdesc:a32cffd3ac03791f2e0a5125b00ea369f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual column undo log version.  <a href="#a32cffd3ac03791f2e0a5125b00ea369f">More...</a><br /></td></tr>
<tr class="separator:a32cffd3ac03791f2e0a5125b00ea369f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transaction undo log record. </p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a12c313838eb941721d7485ed7d8ae7fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c313838eb941721d7485ed7d8ae7fc">&#9670;&nbsp;</a></span>ATTRIB_USED_ONLY_IN_DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ATTRIB_USED_ONLY_IN_DEBUG</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa00d41ba476e75a2d04e414aaf90f9d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa00d41ba476e75a2d04e414aaf90f9d3">&#9670;&nbsp;</a></span>trx_undo_page_fetch_ext</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define trx_undo_page_fetch_ext</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">trx, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ext_buf, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">prefix_len, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">page_size, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">field, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">is_sdi, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="trx0rec_8cc.html#a9e8d15bc4cbcb36e108716b5a1c15f86">trx_undo_page_fetch_ext_func</a>(trx, <a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ext_buf, prefix_len, page_size,  \</div><div class="line">                               field, is_sdi, len)</div><div class="ttc" id="trx0rec_8cc_html_a9e8d15bc4cbcb36e108716b5a1c15f86"><div class="ttname"><a href="trx0rec_8cc.html#a9e8d15bc4cbcb36e108716b5a1c15f86">trx_undo_page_fetch_ext_func</a></div><div class="ttdeci">static byte * trx_undo_page_fetch_ext_func(trx_t *trx, dict_index_t *index, byte *ext_buf, ulint prefix_len, const page_size_t &amp;page_size, const byte *field, bool is_sdi, ulint *len)</div><div class="ttdoc">Fetch a prefix of an externally stored column, for writing to the undo log of an update or delete mar...</div><div class="ttdef"><b>Definition:</b> trx0rec.cc:785</div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a7fcb27f48ff8999895f20e43c69207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a7fcb27f48ff8999895f20e43c69207">&#9670;&nbsp;</a></span>trx_undo_page_report_modify_ext</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define trx_undo_page_report_modify_ext</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">trx, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ptr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ext_buf, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">prefix_len, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">page_size, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">field, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">len, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">is_sdi, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">spatial_status&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="trx0rec_8cc.html#aed3c491f1ae48d49740e15904b0dcc5b">trx_undo_page_report_modify_ext_func</a>(trx, <a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ptr, ext_buf, prefix_len,  \</div><div class="line">                                       page_size, field, len, is_sdi,         \</div><div class="line">                                       spatial_status)</div><div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="trx0rec_8cc_html_aed3c491f1ae48d49740e15904b0dcc5b"><div class="ttname"><a href="trx0rec_8cc.html#aed3c491f1ae48d49740e15904b0dcc5b">trx_undo_page_report_modify_ext_func</a></div><div class="ttdeci">static byte * trx_undo_page_report_modify_ext_func(trx_t *trx, dict_index_t *index, byte *ptr, byte *ext_buf, ulint prefix_len, const page_size_t &amp;page_size, const byte **field, ulint *len, bool is_sdi, spatial_status_t spatial_status)</div><div class="ttdoc">Writes to the undo log a prefix of an externally stored column. </div><div class="ttdef"><b>Definition:</b> trx0rec.cc:837</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abf5f6bbe13f44572a126686af9047572"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf5f6bbe13f44572a126686af9047572">&#9670;&nbsp;</a></span>trx_undo_erase_page_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool trx_undo_erase_page_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Erases the unused undo log page end. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the page contained something, false if it was empty </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in/out: undo page whose end to erase </td></tr>
    <tr><td class="paramname">mtr</td><td>in/out: mini-transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99637d5f30163597cf0485559e4e5a85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99637d5f30163597cf0485559e4e5a85">&#9670;&nbsp;</a></span>trx_undo_get_mbr_from_ext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void trx_undo_get_mbr_from_ext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>mbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdd_1_1Spatial__reference__system.html">dd::Spatial_reference_system</a> *&#160;</td>
          <td class="paramname"><em>srs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get MBR from a Geometry column stored externally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the clustered index object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mbr</td><td>MBR to fill </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>table pagesize </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">field</td><td>field contain the geometry data </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len</td><td>length of field, in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">srs</td><td>Spatial reference system of R-tree. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5e45173b58297454e220c15b344e618c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e45173b58297454e220c15b344e618c">&#9670;&nbsp;</a></span>trx_undo_get_undo_rec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trx_undo_get_undo_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_temp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtable__name__t.html">table_name_t</a> &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> **&#160;</td>
          <td class="paramname"><em>undo_rec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copies an undo record to heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">roll_ptr</td><td>roll pointer to record </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trx_id</td><td>id of the trx that generated the roll pointer: it points to an undo log of this transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">heap</td><td>memory heap where copied </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_temp</td><td>true if temporary, no-redo rseg. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>table name </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">undo_rec</td><td>own: copy of the record </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if the undo log has been truncated and we cannot fetch the old version </td></tr>
    <tr><td class="paramname">false</td><td>if the undo log record is available NOTE: the caller must have latches on the clustered index page. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2fdd9c2554a7bd5f22a774fbef4a7694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fdd9c2554a7bd5f22a774fbef4a7694">&#9670;&nbsp;</a></span>trx_undo_get_undo_rec_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_get_undo_rec_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_temp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copies an undo record to heap. </p>
<p>This function can be called if we know that the undo log record exists. </p><dl class="section return"><dt>Returns</dt><dd>own: copy of the record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">roll_ptr</td><td>in: roll pointer to record </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap where copied </td></tr>
    <tr><td class="paramname">is_temp</td><td>in: true if temp undo rec. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac5fdc1d0edaf8d7891aedccde0aa2201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5fdc1d0edaf8d7891aedccde0aa2201">&#9670;&nbsp;</a></span>trx_undo_left()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint trx_undo_left </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the free space left for extending an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>bytes left </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>in: undo log page </td></tr>
    <tr><td class="paramname">ptr</td><td>in: pointer to page </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a31a8c42bb19f149d818b80f43dc21c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a8c42bb19f149d818b80f43dc21c6c">&#9670;&nbsp;</a></span>trx_undo_log_v_idx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_log_v_idx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>first_v_col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write virtual column index info (index id and column position in index) to the undo log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">undo_page</td><td>undo log page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pos</td><td>the virtual column position </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>undo log record being written </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">first_v_col</td><td>whether this is the first virtual column which could start with a version marker </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>new undo log pointer </dd></dl>

</div>
</div>
<a id="aff965f452d447f88d7d5cfb7f042bd58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff965f452d447f88d7d5cfb7f042bd58">&#9670;&nbsp;</a></span>trx_undo_max_free_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t trx_undo_max_free_space </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the max free space of undo log by assuming it's a fresh new page and the free space doesn't count for the undo log header too. </p>

</div>
</div>
<a id="a9e8d15bc4cbcb36e108716b5a1c15f86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e8d15bc4cbcb36e108716b5a1c15f86">&#9670;&nbsp;</a></span>trx_undo_page_fetch_ext_func()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_page_fetch_ext_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ext_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>prefix_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_sdi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch a prefix of an externally stored column, for writing to the undo log of an update or delete marking of a clustered index record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the clustered index object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ext_buf</td><td>buffer to hold the prefix data and BLOB pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prefix_len</td><td>prefix size to store in the undo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>page size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">field</td><td>an externally stored column </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_sdi</td><td>true for SDI indexes </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len</td><td>input: length of field; output: used length of ext_buf </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ext_buf </dd></dl>

</div>
</div>
<a id="a6360dbff80bf489d23b07dfc3271b4a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6360dbff80bf489d23b07dfc3271b4a9">&#9670;&nbsp;</a></span>trx_undo_page_report_insert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint trx_undo_page_report_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>clust_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reports in the undo log of an insert of a clustered index record. </p>
<dl class="section return"><dt>Returns</dt><dd>offset of the inserted entry on the page if succeed, 0 if fail </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log page </td></tr>
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">clust_entry</td><td>in: index entry which will be inserted to the clustered index </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5941da9dc9347d1cd8cb3f2df8982a25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5941da9dc9347d1cd8cb3f2df8982a25">&#9670;&nbsp;</a></span>trx_undo_page_report_modify()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint trx_undo_page_report_modify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structupd__t.html">upd_t</a> *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>cmpl_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reports in the undo log of an update or delete marking of a clustered index record. </p>
<dl class="section return"><dt>Returns</dt><dd>byte offset of the inserted undo log entry on the page if succeed, 0 if fail </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log page </td></tr>
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index where update or delete marking is done </td></tr>
    <tr><td class="paramname">rec</td><td>in: clustered index record which has NOT yet been modified </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec, index) </td></tr>
    <tr><td class="paramname">update</td><td>in: update vector which tells the columns to be updated; in the case of a delete, this should be set to NULL </td></tr>
    <tr><td class="paramname">cmpl_info</td><td>in: compiler info on secondary index updates </td></tr>
    <tr><td class="paramname">row</td><td>in: clustered index row contains virtual column info </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aed3c491f1ae48d49740e15904b0dcc5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed3c491f1ae48d49740e15904b0dcc5b">&#9670;&nbsp;</a></span>trx_undo_page_report_modify_ext_func()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_page_report_modify_ext_func </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ext_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>prefix_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_sdi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0types_8h.html#a2dc72e9ff7d0244e9f223ab2052a147d">spatial_status_t</a>&#160;</td>
          <td class="paramname"><em>spatial_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes to the undo log a prefix of an externally stored column. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the clustered index object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ptr</td><td>undo log position, at least 15 bytes must be available </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ext_buf</td><td>a buffer of DICT_MAX_FIELD_LEN_BY_FORMAT() size, or NULL when should not fetch a longer prefix </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prefix_len</td><td>prefix size to store in the undo log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>page size </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">field</td><td>the locally stored part of the externally stored column </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len</td><td>length of field, in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_sdi</td><td>true for SDI indexes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">spatial_status</td><td>whether the column is used by spatial index or regular index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>undo log position </dd></dl>

</div>
</div>
<a id="af85d60197b7b3561fc88db2bac1da7b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85d60197b7b3561fc88db2bac1da7b5">&#9670;&nbsp;</a></span>trx_undo_page_set_next_prev_and_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint trx_undo_page_set_next_prev_and_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the next and previous pointers in the undo page for the undo record that was written to ptr. </p>
<p>Update the first free value by the number of bytes written for this undo record. </p><dl class="section return"><dt>Returns</dt><dd>offset of the inserted entry on the page if succeeded, 0 if fail </dd></dl>
<p>&lt; offset within undo_page</p>
<p>&lt; offset within undo_page </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in/out: undo log page </td></tr>
    <tr><td class="paramname">ptr</td><td>in: ptr up to where data has been written on this undo page. </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21a41486ecad84531c6f852c73288ce4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a41486ecad84531c6f852c73288ce4">&#9670;&nbsp;</a></span>trx_undo_parse_add_undo_rec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_parse_add_undo_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a redo log record of adding an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9356d49e12323fc80c96cd83dd2cf938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9356d49e12323fc80c96cd83dd2cf938">&#9670;&nbsp;</a></span>trx_undo_parse_erase_page_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_parse_erase_page_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a redo log record of erasing of an undo page end. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa4ec6cc9a7fea683695e2f06ba23f916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4ec6cc9a7fea683695e2f06ba23f916">&#9670;&nbsp;</a></span>trx_undo_prev_version_build()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trx_undo_prev_version_build </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>index_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>index_mtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> **&#160;</td>
          <td class="paramname"><em>old_vers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>v_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>vrow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>v_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *&#160;</td>
          <td class="paramname"><em>lob_undo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a previous version of a clustered index record. </p>
<p>The caller must hold a latch on the index page of the clustered index record. If the vrow passed to this function is not null, then this function will store information about virtual columns from the requested version in vrow, unless the change did not affect any secondary index nor ordering field of clustered index (the change has UPD_NODE_NO_ORD_CHANGE flag) in which case the requested information can not be reconstructed from undo log, and the caller may assume that the (virtual) columns of secondary index have the same values they have in the more recent version (the one <code>rec</code> comes from). Equivalently, if the vrow is not returned, it is either because it was not requested, or not available due to UPD_NODE_NO_ORD_CHANGE. Obviously vrow is also not set in case rec is the oldest version in history, in which case we also set old_vers to NULL. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index_rec</td><td>clustered index record in the index tree </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index_mtr</td><td>mtr which contains the latch to index_rec page and purge_view </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rec</td><td>version of a clustered index record </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>clustered index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">offsets</td><td>rec_get_offsets(rec, index) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">heap</td><td>memory heap from which the memory needed is allocated </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">old_vers</td><td>previous version, or NULL if rec is the first inserted version, or if history data has been deleted </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_heap</td><td>memory heap used to create vrow dtuple if it is not yet created. This heap diffs from "heap" above in that it could be prebuilt-&gt;old_vers_heap for selection </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">vrow</td><td>virtual column info, if any </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_status</td><td>status determine if it is going into this function by purge thread or not. And if we read "after image" of undo log has been rebuilt </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lob_undo</td><td>LOB undo information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if previous version was built, or if it was an insert or the table has been rebuilt </td></tr>
    <tr><td class="paramname">false</td><td>if the previous version is earlier than purge_view, or being purged, which means that it may have been removed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac4ee9e1eccbdea3fe5493fece6412b9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4ee9e1eccbdea3fe5493fece6412b9e">&#9670;&nbsp;</a></span>trx_undo_read_blob_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_read_blob_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>undo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structupd__field__t.html">upd_field_t</a> *&#160;</td>
          <td class="paramname"><em>uf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *&#160;</td>
          <td class="paramname"><em>lob_undo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a343761be8957a62e701c95166e2081a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a343761be8957a62e701c95166e2081a1">&#9670;&nbsp;</a></span>trx_undo_read_v_cols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_read_v_cols </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>in_purge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>online</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>col_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read virtual column value from undo log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>undo log pointer </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">row</td><td>the dtuple to fill </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in_purge</td><td>called by purge thread </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">online</td><td>true if this is from online DDL log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">col_map</td><td>online rebuild column map </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap to keep value when necessary </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afc4a542764a35a68b6e6b7f056aa0e60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc4a542764a35a68b6e6b7f056aa0e60">&#9670;&nbsp;</a></span>trx_undo_read_v_idx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_read_v_idx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>first_v_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>is_undo_log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>field_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read virtual column index from undo log or online log if the log contains such info, and in the undo log case, verify the column is still indexed, and output its position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>undo log pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">first_v_col</td><td>if this is the first virtual column, which has the version marker </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">is_undo_log</td><td>this function is used to parse both undo log, and online log for virtual columns. So check to see if this is undo log. When first_v_col is true, is_undo_log is output, when first_v_col is false, is_undo_log is input </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">field_no</td><td>the column number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>

</div>
</div>
<a id="a9d413618d9a9979284d5e9595dc3497e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d413618d9a9979284d5e9595dc3497e">&#9670;&nbsp;</a></span>trx_undo_read_v_idx_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_read_v_idx_low </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>col_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read virtual column index from undo log, and verify the column is still indexed, and return its position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>undo log pointer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">col_pos</td><td>the column number or ULINT_UNDEFINED if the column is not indexed any more </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>

</div>
</div>
<a id="a51f0a7c02bc5673d59ebec7ceaad7862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f0a7c02bc5673d59ebec7ceaad7862">&#9670;&nbsp;</a></span>trx_undo_rec_get_col_val()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_col_val </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>orig_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from an undo log record a non-virtual column value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ptr</td><td>pointer to remaining part of the undo record </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">field</td><td>stored field </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len</td><td>length of the field, or UNIV_SQL_NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">orig_len</td><td>original length of the locally stored part of an externally stored column, or 0 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>

</div>
</div>
<a id="a1043e8db416626276800c8da5637ab8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1043e8db416626276800c8da5637ab8e">&#9670;&nbsp;</a></span>trx_undo_rec_get_multi_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_multi_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdfield__t.html">dfield_t</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from an undo log record of a multi-value virtual column. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>pointer to remaining part of the undo record </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">field</td><td>stored field, nullptr if the col is no longer indexed or existing, in the latter case, this function will only skip the log </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>

</div>
</div>
<a id="a2322117e1e3b2610ff39a17e60f1b8e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2322117e1e3b2610ff39a17e60f1b8e3">&#9670;&nbsp;</a></span>trx_undo_rec_get_pars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_pars </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>cmpl_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>updated_extern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> *&#160;</td>
          <td class="paramname"><em>undo_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> *&#160;</td>
          <td class="paramname"><em>table_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a> &amp;&#160;</td>
          <td class="paramname"><em>type_cmpl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an undo log record the general parameters. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_rec</td><td>in: undo log record </td></tr>
    <tr><td class="paramname">type</td><td>out: undo record type: TRX_UNDO_INSERT_REC, ... </td></tr>
    <tr><td class="paramname">cmpl_info</td><td>out: compiler info, relevant only for update type records </td></tr>
    <tr><td class="paramname">updated_extern</td><td>out: true if we updated an externally stored fild </td></tr>
    <tr><td class="paramname">undo_no</td><td>out: undo log record number </td></tr>
    <tr><td class="paramname">table_id</td><td>out: table id </td></tr>
    <tr><td class="paramname">type_cmpl</td><td>out: type compilation info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a59e51ec89401164642aa4bf9e329858d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e51ec89401164642aa4bf9e329858d">&#9670;&nbsp;</a></span>trx_undo_rec_get_partial_row()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_partial_row </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>ignore_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds a partial row from an update undo log record, for purge. </p>
<p>It contains the columns which occur as ordering in any index of the table. Any missing columns are indicated by col-&gt;mtype == DATA_MISSING. </p><dl class="section return"><dt>Returns</dt><dd>pointer to remaining part of undo record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part in update undo log record of a suitable type, at the start of the stored index columns; NOTE that this copy of the undo log record must be preserved as long as the partial row is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">row</td><td>out, own: partial row </td></tr>
    <tr><td class="paramname">ignore_prefix</td><td>in: flag to indicate if we expect blob prefixes in undo. Used only in the assertion. </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af342f2995de54e084d2ea5e042f50c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af342f2995de54e084d2ea5e042f50c6c">&#9670;&nbsp;</a></span>trx_undo_rec_get_row_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_row_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds a row reference from an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to remaining part of undo record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part of a copy of an undo log record, at the start of the row reference; NOTE that this copy of the undo log record must be preserved as long as the row reference is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">ref</td><td>out, own: row reference </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afabb59f72f20367f7d622b40ce1eda7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afabb59f72f20367f7d622b40ce1eda7e">&#9670;&nbsp;</a></span>trx_undo_rec_get_table_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> trx_undo_rec_get_table_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an undo log record the table ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_rec</td><td>Undo log record </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the table ID </dd></dl>

</div>
</div>
<a id="afddad8a35a6f71bb6dc604d772b1832b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afddad8a35a6f71bb6dc604d772b1832b">&#9670;&nbsp;</a></span>trx_undo_rec_is_multi_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trx_undo_rec_is_multi_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decide if the following undo log record is a multi-value virtual column. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_rec</td><td>undo log record </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if this is a multi-value virtual column log, otherwise false </dd></dl>

</div>
</div>
<a id="a3428eb8ab37c163d573e17ddd397e436"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3428eb8ab37c163d573e17ddd397e436">&#9670;&nbsp;</a></span>trx_undo_rec_skip_row_ref()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_skip_row_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Skips a row reference from an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to remaining part of undo record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part in update undo log record, at the start of the row reference </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaddcbeeb62d6ccfd1525533edf2ac8ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaddcbeeb62d6ccfd1525533edf2ac8ad">&#9670;&nbsp;</a></span>trx_undo_report_blob_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_report_blob_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>undo_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>flen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structupd__t.html">upd_t</a> *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structupd__field__t.html">upd_field_t</a> *&#160;</td>
          <td class="paramname"><em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write the partial update information about LOBs to the undo log record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_page</td><td>the undo page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>the clustered index where LOBs are modified. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_ptr</td><td>the location within undo page where next part of undo record is to be written. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">field</td><td>the LOB data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flen</td><td>length of LOB data in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">update</td><td>the update vector containing partial update information on LOBs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fld</td><td>the field to which the LOB belongs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mtr</td><td>the mini-transaction context. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the undo record pointer where new data can be written. </dd>
<dd>
nullptr when there is not enough space in undo page. </dd></dl>

</div>
</div>
<a id="a01164fa82e3761affcad5466dfd72ffe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01164fa82e3761affcad5466dfd72ffe">&#9670;&nbsp;</a></span>trx_undo_report_insert_virtual()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trx_undo_report_insert_virtual </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reports in the undo log of an insert of virtual columns. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_page</td><td>undo log page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">row</td><td>dtuple contains the virtual columns </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ptr</td><td>log ptr </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if write goes well, false if out of space </dd></dl>

</div>
</div>
<a id="a9b4faef28fe9a4375884b236e33d740e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b4faef28fe9a4375884b236e33d740e">&#9670;&nbsp;</a></span>trx_undo_report_row_operation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_undo_report_row_operation </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>op_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>clust_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structupd__t.html">upd_t</a> *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>cmpl_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes information to an undo log about an insert, update, or a delete marking of a clustered index record. </p>
<p>This information is used in a rollback of the transaction and in consistent reads that must look to the history of this transaction. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>in: if BTR_NO_UNDO_LOG_FLAG bit is set, does nothing </td></tr>
    <tr><td class="paramname">op_type</td><td>in: TRX_UNDO_INSERT_OP or TRX_UNDO_MODIFY_OP </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">clust_entry</td><td>in: in the case of an insert, index entry to insert into the clustered index, otherwise NULL </td></tr>
    <tr><td class="paramname">update</td><td>in: in the case of an update, the update vector, otherwise NULL </td></tr>
    <tr><td class="paramname">cmpl_info</td><td>in: compiler info on secondary index updates </td></tr>
    <tr><td class="paramname">rec</td><td>in: in case of an update or delete marking, the record in the clustered index, otherwise NULL </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec) </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: rollback pointer to the inserted undo log record, 0 if BTR_NO_UNDO_LOG flag was specified </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3a885ce773e17c3a83c0c7634e2ef0dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a885ce773e17c3a83c0c7634e2ef0dd">&#9670;&nbsp;</a></span>trx_undo_store_multi_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trx_undo_store_multi_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdfield__t.html">dfield_t</a> *&#160;</td>
          <td class="paramname"><em>vfield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store the multi-value column information for undo log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">undo_page</td><td>undo page to store the information </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vfield</td><td>multi-value field information </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ptr</td><td>pointer where to store the information </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if stored successfully, false if space is not enough </dd></dl>

</div>
</div>
<a id="a324bbc5d0dd2ad6bcf2caf37ea2ef88a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a324bbc5d0dd2ad6bcf2caf37ea2ef88a">&#9670;&nbsp;</a></span>trx_undo_update_rec_get_sys_cols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_update_rec_get_sys_cols </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>info_bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an undo log update record the system field values of the old version. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part of undo log record after reading general parameters </td></tr>
    <tr><td class="paramname">trx_id</td><td>out: trx id </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: roll ptr </td></tr>
    <tr><td class="paramname">info_bits</td><td>out: info bits state </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a302b5ca1f95234d5ad91b3d34227423e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a302b5ca1f95234d5ad91b3d34227423e">&#9670;&nbsp;</a></span>trx_undo_update_rec_get_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_update_rec_get_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>info_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structupd__t.html">upd_t</a> **&#160;</td>
          <td class="paramname"><em>upd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *&#160;</td>
          <td class="paramname"><em>lob_undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a> &amp;&#160;</td>
          <td class="paramname"><em>type_cmpl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds an update vector based on a remaining part of an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of the record, NULL if an error detected, which means that the record is corrupted </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part in update undo log record, after reading the row reference NOTE that this copy of the undo log record must be preserved as long as the update vector is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">type</td><td>in: TRX_UNDO_UPD_EXIST_REC, TRX_UNDO_UPD_DEL_REC, or TRX_UNDO_DEL_MARK_REC; in the last case, only trx id and roll ptr fields are added to the update vector </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction id from this undo record </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>in: roll pointer from this undo record </td></tr>
    <tr><td class="paramname">info_bits</td><td>in: info bits from this undo record </td></tr>
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
    <tr><td class="paramname">upd</td><td>out, own: update vector </td></tr>
    <tr><td class="paramname">lob_undo</td><td>out: LOB undo information. </td></tr>
    <tr><td class="paramname">type_cmpl</td><td>out: type compilation info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0cba1ac9ac486cc339404f3f7b3ee765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cba1ac9ac486cc339404f3f7b3ee765">&#9670;&nbsp;</a></span>trx_undof_page_add_undo_rec_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void trx_undof_page_add_undo_rec_log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>old_free</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>new_free</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the mtr log entry of the inserted undo log record on the undo log page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_page</td><td>in: undo log page </td></tr>
    <tr><td class="paramname">old_free</td><td>in: start offset of the inserted entry </td></tr>
    <tr><td class="paramname">new_free</td><td>in: end offset of the entry </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a32cffd3ac03791f2e0a5125b00ea369f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32cffd3ac03791f2e0a5125b00ea369f">&#9670;&nbsp;</a></span>VIRTUAL_COL_UNDO_FORMAT_1</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const ulint VIRTUAL_COL_UNDO_FORMAT_1 = 0xF1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Virtual column undo log version. </p>
<p>To distinguish it from a length value in 5.7.8 undo log, it starts with 0xF1 </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_7d6b8692e14baa729600e27a3e4f8b7c.html">trx</a></li><li class="navelem"><a class="el" href="trx0rec_8cc.html">trx0rec.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
