<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/row0row.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('row0row_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">row0row.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="row0row_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 1996, 2020, Oracle and/or its affiliates.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/row0row.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> General row routines</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> Created 4/20/1996 Heikki Tuuri</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *******************************************************/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifndef row0row_h</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define row0row_h</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="btr0types_8h.html">btr0types.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="data0data_8h.html">data0data.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict0types_8h.html">dict0types.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mtr0mtr_8h.html">mtr0mtr.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="que0types_8h.html">que0types.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rem0types_8h.html">rem0types.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="row0types_8h.html">row0types.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="trx0types_8h.html">trx0types.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;univ.i&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/** Gets the offset of the DB_TRX_ID field, in bytes relative to the origin of</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> a clustered index record.</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> @return offset of DATA_TRX_ID */</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;ulint <a class="code" href="row0row_8h.html#aac7fccbeaa734d8d5bbf04e8508130fd">row_get_trx_id_offset</a>(</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: clustered index */</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">const</span> ulint *offsets)      <span class="comment">/*!&lt; in: record offsets */</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/** Reads the trx id field from a clustered index record.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> @return value of the field */</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<a class="code" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> <a class="code" href="row0row_8h.html#ae4fd9d32b70aba75f6c573d6ca6475bd">row_get_rec_trx_id</a>(</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,          <span class="comment">/*!&lt; in: record */</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: clustered index */</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">const</span> ulint *offsets)      <span class="comment">/*!&lt; in: rec_get_offsets(rec, index) */</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">/** Reads the roll pointer field from a clustered index record.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> @return value of the field */</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<a class="code" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> <a class="code" href="row0row_8h.html#a14c41c387106c46b21a950855f57d686">row_get_rec_roll_ptr</a>(</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,          <span class="comment">/*!&lt; in: record */</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: clustered index */</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">const</span> ulint *offsets)      <span class="comment">/*!&lt; in: rec_get_offsets(rec, index) */</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/* Flags for row build type. */</span></div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="row0row_8h.html#aad6b6444329c5134dd6e9fa78c62301c">   72</a></span>&#160;<span class="preprocessor">#define ROW_BUILD_NORMAL 0     </span><span class="comment">/*!&lt; build index row */</span><span class="preprocessor"></span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="row0row_8h.html#a6ab5591e85f65a530d43defdaf398a9e">   73</a></span>&#160;<span class="preprocessor">#define ROW_BUILD_FOR_PURGE 1  </span><span class="comment">/*!&lt; build row for purge. */</span><span class="preprocessor"></span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="row0row_8h.html#a1a0c1ca2ec4eb811c49409fe6f92f8ef">   74</a></span>&#160;<span class="preprocessor">#define ROW_BUILD_FOR_UNDO 2   </span><span class="comment">/*!&lt; build row for undo. */</span><span class="preprocessor"></span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="row0row_8h.html#a1a0f1fdd3ba9eb56a5f35d29eac7202e">   75</a></span>&#160;<span class="preprocessor">#define ROW_BUILD_FOR_INSERT 3 </span><span class="comment">/*!&lt; build row for insert. */</span><span class="preprocessor"></span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/** When an insert or purge to a table is performed, this function builds</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> the entry to be inserted into or purged from an index on the table.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> @return index entry which should be inserted or purged</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> @retval NULL if the externally stored columns in the clustered index record</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> are unavailable and ext != NULL, or row is missing some needed columns. */</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="row0row_8h.html#a29b1e0eedac758f1cdc42fbc0f76630c">row_build_index_entry_low</a>(</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *row,       <span class="comment">/*!&lt; in: row which should be</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">                               inserted or purged */</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keyword">const</span> <a class="code" href="structrow__ext__t.html">row_ext_t</a> *ext,      <span class="comment">/*!&lt; in: externally stored column</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">                               prefixes, or NULL */</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: index on the table */</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap,          <span class="comment">/*!&lt; in: memory heap from which</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">                               the memory for the index entry</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">                               is allocated */</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    ulint <a class="code" href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a>)                <span class="comment">/*!&lt; in: ROW_BUILD_NORMAL,</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">                               ROW_BUILD_FOR_PURGE</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">                               or ROW_BUILD_FOR_UNDO */</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">/** When an insert or purge to a table is performed, this function builds</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> the entry to be inserted into or purged from an index on the table.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> @return index entry which should be inserted or purged, or NULL if the</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> externally stored columns in the clustered index record are</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> unavailable and ext != NULL */</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="row0row_8h.html#adfd60aba2c158224fb2d2a8e183c83c5">row_build_index_entry</a>(</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *row,       <span class="comment">/*!&lt; in: row which should be</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">                               inserted or purged */</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keyword">const</span> <a class="code" href="structrow__ext__t.html">row_ext_t</a> *ext,      <span class="comment">/*!&lt; in: externally stored column</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">                               prefixes, or NULL */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: index on the table */</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap)          <span class="comment">/*!&lt; in: memory heap from which</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">                               the memory for the index entry</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">                               is allocated */</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/** An inverse function to row_build_index_entry. Builds a row from a</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> record in a clustered index.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> @return own: row built; see the NOTE below! */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="row0row_8h.html#aad3a14e446e6d5c7c65bb438d9f6f48c">row_build</a>(ulint <a class="code" href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">type</a>,                <span class="comment">/*!&lt; in: ROW_COPY_POINTERS or</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">                                               ROW_COPY_DATA; the latter</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">                                               copies also the data fields to</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">                                               heap while the first only</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">                                               places pointers to data fields</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">                                               on the index page, and thus is</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">                                               more efficient */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: clustered index */</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,          <span class="comment">/*!&lt; in: record in the clustered</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">                                               index; NOTE: in the case</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">                                               ROW_COPY_POINTERS the data</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">                                               fields in the row will point</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">                                               directly into this record,</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">                                               therefore, the buffer page of</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">                                               this record must be at least</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">                                               s-latched and the latch held</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">                                               as long as the row dtuple is used! */</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    <span class="keyword">const</span> ulint *offsets, <span class="comment">/*!&lt; in: rec_get_offsets(rec,index)</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">                                          or NULL, in which case this function</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">                                          will invoke rec_get_offsets() */</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *col_table,<span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">                    /*!&lt; in: table, to check which</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">                    externally stored columns</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">                    occur in the ordering columns</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">                    of an index, or NULL if</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">                    index-&gt;table should be</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">                    consulted instead; the user</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">                    columns in this table should be</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">                    the same columns as in index-&gt;table */</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *add_cols,<span class="comment"></span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">                    /*!&lt; in: default values of</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">                    added columns, or NULL */</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    <span class="keyword">const</span> ulint *col_map, <span class="comment">/*!&lt; in: mapping of old column</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">                                          numbers to new ones, or NULL */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    <a class="code" href="structrow__ext__t.html">row_ext_t</a> **ext,      <span class="comment">/*!&lt; out, own: cache of</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">                                          externally stored column</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">                                          prefixes, or NULL */</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);    <span class="comment">/*!&lt; in: memory heap from which</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">                                          the memory needed is allocated */</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">/** An inverse function to row_build_index_entry. Builds a row from a</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">record in a clustered index, with possible indexing on ongoing</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">addition of new virtual columns.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">@param[in]      type            ROW_COPY_POINTERS or ROW_COPY_DATA;</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">@param[in]      index           clustered index</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">@param[in]      rec             record in the clustered index</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">@param[in]      offsets         rec_get_offsets(rec,index) or NULL</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">@param[in]      col_table       table, to check which</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">                                externally stored columns</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">                                occur in the ordering columns</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">                                of an index, or NULL if</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">                                index-&gt;table should be</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">                                consulted instead</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">@param[in]      add_cols        default values of added columns, or NULL</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">@param[in]      add_v           new virtual columns added</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">                                along with new indexes</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">@param[in]      col_map         mapping of old column</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">                                numbers to new ones, or NULL</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">@param[in]      ext             cache of externally stored column</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">                                prefixes, or NULL</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">@param[in]      heap            memory heap from which</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">                                the memory needed is allocated</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">@return own: row built */</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="row0row_8h.html#a9bae703dc138921925eefdbc5c7bc86c">row_build_w_add_vcol</a>(ulint <a class="code" href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">type</a>, <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                               <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <span class="keyword">const</span> ulint *offsets,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                               <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *col_table,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                               <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *add_cols,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                               <span class="keyword">const</span> <a class="code" href="structdict__add__v__col__t.html">dict_add_v_col_t</a> *add_v,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                               <span class="keyword">const</span> ulint *col_map, <a class="code" href="structrow__ext__t.html">row_ext_t</a> **ext,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                               <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/** Converts an index record to a typed data tuple.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"> @return index entry built; does not set info_bits, and the data fields</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"> in the entry will point directly to rec */</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="row0row_8h.html#a8197f76ace04aa6a8da8cee8f03c09b8">row_rec_to_index_entry_low</a>(</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,          <span class="comment">/*!&lt; in: record in the index */</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">const</span> ulint *offsets,      <span class="comment">/*!&lt; in: rec_get_offsets(rec, index) */</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap)          <span class="comment">/*!&lt; in: memory heap from which</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">                               the memory needed is allocated */</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">/** Converts an index record to a typed data tuple. NOTE that externally</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"> stored (often big) fields are NOT copied to heap.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> @return own: index entry built */</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="row0row_8h.html#a847ee4b4cf5e88e26a5c71843683f29f">row_rec_to_index_entry</a>(</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,          <span class="comment">/*!&lt; in: record in the index */</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">const</span> ulint *offsets,      <span class="comment">/*!&lt; in/out: rec_get_offsets(rec) */</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap)          <span class="comment">/*!&lt; in: memory heap from which</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">                               the memory needed is allocated */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">/** Builds from a secondary index record a row reference with which we can</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"> search the clustered index record.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"> @return own: row reference built; see the NOTE below! */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="row0row_8h.html#ab0f0c0bb8cf22fadbea897af1606269c">row_build_row_ref</a>(</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    ulint <a class="code" href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">type</a>,                <span class="comment">/*!&lt; in: ROW_COPY_DATA, or ROW_COPY_POINTERS:</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">                               the former copies also the data fields to</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">                               heap, whereas the latter only places pointers</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">                               to data fields on the index page */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <span class="comment">/*!&lt; in: secondary index */</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,          <span class="comment">/*!&lt; in: record in the index;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">                               NOTE: in the case ROW_COPY_POINTERS</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">                               the data fields in the row will point</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">                               directly into this record, therefore,</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">                               the buffer page of this record must be</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">                               at least s-latched and the latch held</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">                               as long as the row reference is used! */</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap)          <span class="comment">/*!&lt; in: memory heap from which the memory</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">                               needed is allocated */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/** Builds from a secondary index record a row reference with which we can</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">search the clustered index record.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">@param[in,out] ref Row reference built; see the note below!</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">@param[in,out] rec Record in the index; note: the data fields in ref will point</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">directly into this record, therefore, the buffer page of this record must be at</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">least s-latched and the latch held as long as the row reference is used!</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">@param[in] index Secondary index</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">@param[in] offsets Rec_get_offsets(rec, index) or null</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">@param[in] trx Transaction or null */</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0row_8h.html#a16308b74d96873a4691c0766f8d16e25">row_build_row_ref_in_tuple</a>(<a class="code" href="structdtuple__t.html">dtuple_t</a> *ref, <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint *offsets,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                <a class="code" href="structtrx__t.html">trx_t</a> *trx);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/** Builds from a secondary index record a row reference with which we can</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">search the clustered index record.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">@param[in,out]  ref     typed data tuple where the reference is built</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">@param[in]      map     array of field numbers in rec telling how ref should</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">                        be built from the fields of rec</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">@param[in]      rec     record in the index; must be preserved while ref is</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">                        used, as we do not copy field values to heap</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">@param[in]      offsets array returned by rec_get_offsets() */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keywordtype">void</span> <a class="code" href="row0row_8h.html#a3a7ab62071d9d257573b144a093be549">row_build_row_ref_fast</a>(<a class="code" href="structdtuple__t.html">dtuple_t</a> *ref, <span class="keyword">const</span> ulint *map, <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                            <span class="keyword">const</span> ulint *offsets);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">/** Searches the clustered index record for a row, if we have the row</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"> reference.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"> @return true if found */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;ibool <a class="code" href="row0row_8h.html#a33b0521a11c97ce434b2bae80ae2155a">row_search_on_row_ref</a>(<a class="code" href="structbtr__pcur__t.html">btr_pcur_t</a> *pcur, <span class="comment">/*!&lt; out: persistent cursor, which</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">                                              must be closed by the caller */</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                            ulint <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>,       <span class="comment">/*!&lt; in: BTR_MODIFY_LEAF, ... */</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                            <a class="code" href="structdict__table__t.html">dict_table_t</a> *table, <span class="comment">/*!&lt; in: table */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                            <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *ref, <span class="comment">/*!&lt; in: row reference */</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                            <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)          <span class="comment">/*!&lt; in/out: mtr */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">/** Fetches the clustered index record for a secondary index record. The latches</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"> on the secondary index record are preserved.</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"> @return record or NULL, if no record found */</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *<a class="code" href="row0row_8h.html#a416f4a7d911ca078ff797972513b829f">row_get_clust_rec</a>(</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    ulint <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>,                 <span class="comment">/*!&lt; in: BTR_MODIFY_LEAF, ... */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keyword">const</span> <a class="code" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec,           <span class="comment">/*!&lt; in: record in a secondary index */</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,  <span class="comment">/*!&lt; in: secondary index */</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> **clust_index, <span class="comment">/*!&lt; out: clustered index */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)                 <span class="comment">/*!&lt; in: mtr */</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">/** Parse the integer data from specified data, which could be</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">DATA_INT, DATA_FLOAT or DATA_DOUBLE. If the value is less than 0</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">and the type is not unsigned then we reset the value to 0</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">@param[in]      data            data to read</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">@param[in]      len             length of data</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">@param[in]      mtype           mtype of data</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">@param[in]      unsigned_type   if the data is unsigned</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">@return the integer value from the data */</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="keyword">inline</span> ib_uint64_t <a class="code" href="row0row_8h.html#ad2109d23ed962faa1cf0c58b9d4191de">row_parse_int</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *data, ulint len, ulint mtype,</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                 <span class="keywordtype">bool</span> unsigned_type);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">/** Parse the integer data from specified field, which could be</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">DATA_INT, DATA_FLOAT or DATA_DOUBLE. We could return 0 if</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">1) the value is less than 0 and the type is not unsigned</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">or 2) the field is null.</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">@param[in]      field           field to read the int value</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">@return the integer value read from the field, 0 for negative signed</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">int or NULL field */</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;ib_uint64_t <a class="code" href="row0row_8h.html#a59dc75ed0183a4eb2d40d2c55b377d2a">row_parse_int_from_field</a>(<span class="keyword">const</span> <a class="code" href="structdfield__t.html">dfield_t</a> *field);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">/** Read the autoinc counter from the clustered index row.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">@param[in]      row     row to read the autoinc counter</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">@param[in]      n       autoinc counter is in the nth field</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">@return the autoinc counter read */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;ib_uint64_t <a class="code" href="row0row_8h.html#a8e906c484f5fb40ca07ae6ba7157b89e">row_get_autoinc_counter</a>(<span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *row, ulint <a class="code" href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">/** Result of row_search_index_entry */</span></div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610">  297</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610">row_search_result</a> {</div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610ab1b66d2c86777e6c3103433a7794629e">  298</a></span>&#160;  <a class="code" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610ab1b66d2c86777e6c3103433a7794629e">ROW_FOUND</a> = 0,      <span class="comment">/*!&lt; the record was found */</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610a4095f536aeb9c036ebd817fb60c48b0b">  299</a></span>&#160;  <a class="code" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610a4095f536aeb9c036ebd817fb60c48b0b">ROW_NOT_FOUND</a>,      <span class="comment">/*!&lt; record not found */</span></div><div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610acc817aed7e8b438484c96d7244084ceb">  300</a></span>&#160;  <a class="code" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610acc817aed7e8b438484c96d7244084ceb">ROW_BUFFERED</a>,       <span class="comment">/*!&lt; one of BTR_INSERT, BTR_DELETE, or</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">                      BTR_DELETE_MARK was specified, the</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">                      secondary index leaf page was not in</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">                      the buffer pool, and the operation was</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">                      enqueued in the insert/delete buffer */</span></div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610a11cb94625dcb9dabb6e81aacab68405d">  305</a></span>&#160;  <a class="code" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610a11cb94625dcb9dabb6e81aacab68405d">ROW_NOT_DELETED_REF</a> <span class="comment">/*!&lt; BTR_DELETE was specified, and</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">                      row_purge_poss_sec() failed */</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;};</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">/** Searches an index record.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"> @return whether the record was found or buffered */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="keyword">enum</span> <a class="code" href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610">row_search_result</a> <a class="code" href="row0row_8h.html#ad31901c1b51c3d15267fc793721b82d6">row_search_index_entry</a>(</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>,   <span class="comment">/*!&lt; in: index */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>, <span class="comment">/*!&lt; in: index entry */</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    ulint <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>,            <span class="comment">/*!&lt; in: BTR_MODIFY_LEAF, ... */</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="structbtr__pcur__t.html">btr_pcur_t</a> *pcur,      <span class="comment">/*!&lt; in/out: persistent cursor, which must</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">                           be closed by the caller */</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="structmtr__t.html">mtr_t</a> *mtr)            <span class="comment">/*!&lt; in: mtr */</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="row0row_8h.html#aa72de90ad021f84b5545a32dcd5d3499">  320</a></span>&#160;<span class="preprocessor">#define ROW_COPY_DATA 1</span></div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="row0row_8h.html#ada564ec8498764f1117b370b9517e9a8">  321</a></span>&#160;<span class="preprocessor">#define ROW_COPY_POINTERS 2</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/* The allowed latching order of index records is the following:</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">(1) a secondary index record -&gt;</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">(2) the clustered index record -&gt;</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">(3) rollback segment data for the clustered index record. */</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">/** Formats the raw data in &quot;data&quot; (in InnoDB on-disk format) using</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> &quot;dict_field&quot; and writes the result to &quot;buf&quot;.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> Not more than &quot;buf_size&quot; bytes are written to &quot;buf&quot;.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> The result is always NUL-terminated (provided buf_size is positive) and the</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> number of bytes that were written to &quot;buf&quot; is returned (including the</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> terminating NUL).</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"> @return number of bytes that were written */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;ulint <a class="code" href="row0row_8h.html#a8415717f4374389b26903fab94033b1b">row_raw_format</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *data,               <span class="comment">/*!&lt; in: raw data */</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                     ulint data_len,                 <span class="comment">/*!&lt; in: raw data length</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">                                                     in bytes */</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                     <span class="keyword">const</span> <a class="code" href="structdict__field__t.html">dict_field_t</a> *dict_field, <span class="comment">/*!&lt; in: index field */</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                     <span class="keywordtype">char</span> *<a class="code" href="namespacebuf.html">buf</a>,                      <span class="comment">/*!&lt; out: output buffer */</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                     ulint <a class="code" href="create__def_8cc.html#a83a426bc389379d92979b5248e18877c">buf_size</a>)                 <span class="comment">/*!&lt; in: output buffer size</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">                                                     in bytes */</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">/** Class to build a series of entries based on one multi-value field.</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">It assumes that there is only one multi-value field on multi-value index. */</span></div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html">  346</a></span>&#160;<span class="keyword">class </span><a class="code" href="classMulti__value__entry__builder.html">Multi_value_entry_builder</a> {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">  /** Constructor */</span></div><div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#a8d0f6432dbbe274ca0b19d148a2b5728">  349</a></span>&#160;  <a class="code" href="classMulti__value__entry__builder.html#a8d0f6432dbbe274ca0b19d148a2b5728">Multi_value_entry_builder</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>, <span class="keywordtype">bool</span> selected)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      : <a class="code" href="classMulti__value__entry__builder.html#abc8e6d6f533b9f9522a0049dc8edbfd9">m_index</a>(index),</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <a class="code" href="classMulti__value__entry__builder.html#a5bdbbd832bd124a0f93f5771e75d08f0">m_selected</a>(selected),</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a>(entry),</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>(0),</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">m_mv_field_no</a>(0) {}</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#a04f23f750ce8501206c6cf9db25a7dd1">  357</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classMulti__value__entry__builder.html#a04f23f750ce8501206c6cf9db25a7dd1">~Multi_value_entry_builder</a>() {}</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">  /** Get the first index entry. If the multi-value field on the index</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">  is null, then it&#39;s the entry including the null field, otherwise,</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">  it should be the entry with  multi-value data at the &#39;pos&#39; position.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">  @param[in]    pos     position of the multi-value array, default value</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">                        will always start from 0</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">  @return the first index entry to handle, the one including null</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">  multi-value field, or the  multi-value data at the &#39;pos&#39; position */</span></div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#a7ae9de3018ed14093926f1912f170503">  366</a></span>&#160;  <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="classMulti__value__entry__builder.html#a7ae9de3018ed14093926f1912f170503">begin</a>(uint32_t <a class="code" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a> = 0) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classMulti__value__entry__builder.html#ac3a13228adef41c1d5ddb6592fb131cd">prepare_multi_value_field</a>()) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="classMulti__value__entry__builder.html#affb207cf7d98a882693d79de3f12724f">prepare_entry_if_necessary</a>();</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a> = <a class="code" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a> == <span class="keyword">nullptr</span> ? <a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a> : <a class="code" href="classMulti__value__entry__builder.html#aab51bfd0f7680fe8cf7b37eb93d43411">next</a>());</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">  /** Get next index entry based on next multi-value data.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">  If the previous value is null, then always no next.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">  @return next index entry, or nullptr if no more multi-value data */</span></div><div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#aab51bfd0f7680fe8cf7b37eb93d43411">  381</a></span>&#160;  <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="classMulti__value__entry__builder.html#aab51bfd0f7680fe8cf7b37eb93d43411">next</a>() {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a> == <span class="keyword">nullptr</span> || <a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a> &gt;= <a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>-&gt;<a class="code" href="structmulti__value__data.html#a61d7a55a4dcc0fc0591e07fd76b84455">num_v</a>) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="structdfield__t.html">dfield_t</a> *field = <a class="code" href="data0data_8h.html#abb318a58295cba54d3353921f0a741f7">dtuple_get_nth_field</a>(<a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a>, <a class="code" href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">m_mv_field_no</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="data0data_8h.html#ad79e05d68cd6ae496c4144c6c7b81cc7">dfield_is_multi_value</a>(field));</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMulti__value__entry__builder.html#a5bdbbd832bd124a0f93f5771e75d08f0">m_selected</a> &amp;&amp; (<a class="code" href="classMulti__value__entry__builder.html#ad399820e91bd7283bd148d4079afd51f">skip</a>() == <a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>-&gt;<a class="code" href="structmulti__value__data.html#a61d7a55a4dcc0fc0591e07fd76b84455">num_v</a>)) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> len = <a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>-&gt;<a class="code" href="structmulti__value__data.html#af2a11477bb7097c88acd0d970acd4949">data_len</a>[<a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>];</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="data0data_8h.html#a01263061c103fce3c132355c7de2d847">dfield_set_data</a>(field, <a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>-&gt;<a class="code" href="structmulti__value__data.html#a106ae5c79c0431192251f7327169df10">datap</a>[<a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>], len);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    ++<a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a>);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">  /** Get the position of last generated multi-value data</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">  @return the position */</span></div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#a1e0e1bea096210cb3dd6ed3d10e4c5e4">  403</a></span>&#160;  uint32_t <a class="code" href="classMulti__value__entry__builder.html#a1e0e1bea096210cb3dd6ed3d10e4c5e4">last_multi_value_position</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a> &gt; 0 ? <a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a> - 1 : 0);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; <span class="keyword">protected</span>:<span class="comment"></span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">  /** Find the multi-value field from the passed in entry or row.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">  m_mv_field_no should be set once the multi-value field found.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">  @return the multi-value field pointer, or nullptr if not found */</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="structdfield__t.html">dfield_t</a> *<a class="code" href="classMulti__value__entry__builder.html#a8dc0cd88f8ed8920d342abef53268a95">find_multi_value_field</a>() = 0;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">  /** Prepare the corresponding multi-value field from the row.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">  This function will set the m_mv_data if the proper field found.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">  @return true if the multi-value field with data on index found,</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">  otherwise, false */</span></div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#ac3a13228adef41c1d5ddb6592fb131cd">  417</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classMulti__value__entry__builder.html#ac3a13228adef41c1d5ddb6592fb131cd">prepare_multi_value_field</a>() {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="structdfield__t.html">dfield_t</a> *field = <a class="code" href="classMulti__value__entry__builder.html#a8dc0cd88f8ed8920d342abef53268a95">find_multi_value_field</a>();</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (field == <span class="keyword">nullptr</span> || field-&gt;<a class="code" href="structdfield__t.html#a8864caf20b4bd2dca2a0c76bc331a612">len</a> == UNIV_NO_INDEX_VALUE) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">false</span>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">m_mv_field_no</a> &gt; 0);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="data0data_8h.html#ad79e05d68cd6ae496c4144c6c7b81cc7">dfield_is_multi_value</a>(field));</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    --<a class="code" href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">m_mv_field_no</a>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="data0data_8h.html#a4cdfd235bef36c9cf972e32cd691206f">dfield_is_null</a>(field)) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="structmulti__value__data.html">multi_value_data</a> *<span class="keyword">&gt;</span>(field-&gt;<a class="code" href="structdfield__t.html#afd82f01691697d8794ee2112250a04b4">data</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">  /** Prepare the entry when the entry is not passed in */</span></div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#affb207cf7d98a882693d79de3f12724f">  437</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classMulti__value__entry__builder.html#affb207cf7d98a882693d79de3f12724f">prepare_entry_if_necessary</a>() { <span class="keywordflow">return</span>; }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">  /** Skip the not selected values and stop m_pos at the next selected one</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">  @return the next valid value position, or size of m_mv_data to indicate</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">  there is no more valid value */</span></div><div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#ad399820e91bd7283bd148d4079afd51f">  442</a></span>&#160;  <span class="keyword">virtual</span> uint32_t <a class="code" href="classMulti__value__entry__builder.html#ad399820e91bd7283bd148d4079afd51f">skip</a>() {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="classMulti__value__entry__builder.html#a5bdbbd832bd124a0f93f5771e75d08f0">m_selected</a>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>-&gt;<a class="code" href="structmulti__value__data.html#a61d7a55a4dcc0fc0591e07fd76b84455">num_v</a>);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; <span class="keyword">protected</span>:<span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">  /** Based on which index to build the entry */</span></div><div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#abc8e6d6f533b9f9522a0049dc8edbfd9">  450</a></span>&#160;  <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="classMulti__value__entry__builder.html#abc8e6d6f533b9f9522a0049dc8edbfd9">m_index</a>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">  /** True if only the selected(bitmap set) multi-value data would be</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">  used to build the entries, otherwise false. */</span></div><div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#a5bdbbd832bd124a0f93f5771e75d08f0">  454</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classMulti__value__entry__builder.html#a5bdbbd832bd124a0f93f5771e75d08f0">m_selected</a>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">  /** Entry built for the index */</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">  457</a></span>&#160;  <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">  /** Multi-value data position */</span></div><div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">  460</a></span>&#160;  uint32_t <a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">  /** Multi-value data */</span></div><div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">  463</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structmulti__value__data.html">multi_value_data</a> *<a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">  /** Field number of multi-value data on the index */</span></div><div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">  466</a></span>&#160;  uint32_t <a class="code" href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">m_mv_field_no</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;};</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">/** The subclass of the multi-value entry builder, for non-INSERT cases,</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">With this class, there should be no need to build separate entries for</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">different values in the same multi-value field. */</span></div><div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__normal.html">  472</a></span>&#160;<span class="keyword">class </span><a class="code" href="classMulti__value__entry__builder__normal.html">Multi_value_entry_builder_normal</a> : <span class="keyword">public</span> <a class="code" href="classMulti__value__entry__builder.html">Multi_value_entry_builder</a> {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">  @param[in]            row             based on which complete row to build</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">                                        the index row</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">  @param[in]            ext             externally stored column prefixes of</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">                                        the row</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">  @param[in,out]        index           multi-value index</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">  @param[in,out]        heap            memory heap</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">  @param[in]            check           true if type can be checked, otherwise</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">                                        skip checking</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">  @param[in]            selected        true if only the selected(bitmap set)</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">                                        multi-value data would be used to build</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">                                        the entries, otherwise false. */</span></div><div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__normal.html#ad760e235bd2db07182c8adee069eb988">  486</a></span>&#160;  <a class="code" href="classMulti__value__entry__builder__normal.html#ad760e235bd2db07182c8adee069eb988">Multi_value_entry_builder_normal</a>(<span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *row, <span class="keyword">const</span> <a class="code" href="structrow__ext__t.html">row_ext_t</a> *ext,</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                   <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap,</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                   <span class="keywordtype">bool</span> check, <span class="keywordtype">bool</span> selected)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      : <a class="code" href="classMulti__value__entry__builder.html">Multi_value_entry_builder</a>(index, <a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>, selected),</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        m_row(row),</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        m_ext(ext),</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        m_heap(heap),</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        m_check(check) {}</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">  /** Find the multi-value field from the passed in entry or row.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">  m_mv_field_no should be set once the multi-value field found.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">  @return the multi-value field pointer, or nullptr if not found */</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="structdfield__t.html">dfield_t</a> *<a class="code" href="classMulti__value__entry__builder.html#a8dc0cd88f8ed8920d342abef53268a95">find_multi_value_field</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">  /** Prepare the entry when the entry is not passed in */</span></div><div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__normal.html#a89a88c7a04cbf2d91eaa817124c829bb">  502</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMulti__value__entry__builder__normal.html#a89a88c7a04cbf2d91eaa817124c829bb">prepare_entry_if_necessary</a>()<span class="keyword"> override </span>{</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (m_check) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a> = <a class="code" href="row0row_8h.html#adfd60aba2c158224fb2d2a8e183c83c5">row_build_index_entry</a>(m_row, m_ext, <a class="code" href="classMulti__value__entry__builder.html#abc8e6d6f533b9f9522a0049dc8edbfd9">m_index</a>, m_heap);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="comment">/* If not check, then it&#39;s basically coming from purge. And actually,</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">      for multi-value index, this flag really doesn&#39;t matter. */</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a> = <a class="code" href="row0row_8h.html#a29b1e0eedac758f1cdc42fbc0f76630c">row_build_index_entry_low</a>(m_row, m_ext, <a class="code" href="classMulti__value__entry__builder.html#abc8e6d6f533b9f9522a0049dc8edbfd9">m_index</a>, m_heap,</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                          <a class="code" href="row0row_8h.html#a6ab5591e85f65a530d43defdaf398a9e">ROW_BUILD_FOR_PURGE</a>);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">  /** Skip the not selected values and stop m_pos at the next selected one</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">  @return the next valid value position, or size of m_mv_data to indicate</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">  there is no more valid value */</span></div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__normal.html#ac32f3a27f599d051f2fc564e61aa63c2">  516</a></span>&#160;  uint32_t <a class="code" href="classMulti__value__entry__builder__normal.html#ac32f3a27f599d051f2fc564e61aa63c2">skip</a>()<span class="keyword"> override </span>{</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="classMulti__value__entry__builder.html#a5bdbbd832bd124a0f93f5771e75d08f0">m_selected</a>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>-&gt;<a class="code" href="structmulti__value__data.html#ac97c8e6d0d73bd894e84eb941cde2ad2">bitset</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">while</span> (m_pos &lt; m_mv_data-&gt;num_v &amp;&amp; !<a class="code" href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">m_mv_data</a>-&gt;<a class="code" href="structmulti__value__data.html#ac97c8e6d0d73bd894e84eb941cde2ad2">bitset</a>-&gt;<a class="code" href="classBitset.html#a16853e7c3a968e7bd15c4aa0a4db9825">test</a>(<a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>)) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      ++<a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">m_pos</a>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">  /** Based on which complete row to build the index row */</span></div><div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__normal.html#a5d8c23a7e8be840f9ca0d9c5b52a086c">  532</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="classMulti__value__entry__builder__normal.html#a5d8c23a7e8be840f9ca0d9c5b52a086c">m_row</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">  /** Externally stored column prefixes, or nullptr */</span></div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__normal.html#a0da932bf950c2fb19e0872d1882f0da5">  535</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structrow__ext__t.html">row_ext_t</a> *<a class="code" href="classMulti__value__entry__builder__normal.html#a0da932bf950c2fb19e0872d1882f0da5">m_ext</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">  /** Memory heap */</span></div><div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__normal.html#ab969a3448dd22b89796f27927111dea3">  538</a></span>&#160;  <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="classMulti__value__entry__builder__normal.html#ab969a3448dd22b89796f27927111dea3">m_heap</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">  /** True if dfield type should be checked, otherwise false */</span></div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__normal.html#ae4adfc98049a694a1682e5875cbb9f17">  541</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classMulti__value__entry__builder__normal.html#ae4adfc98049a694a1682e5875cbb9f17">m_check</a>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;};</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">/** The subclass of the multi-value row builder, for INSERT cases.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">It simply replace the pointers to the multi-value field data for</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">each different value */</span></div><div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__insert.html">  547</a></span>&#160;<span class="keyword">class </span><a class="code" href="classMulti__value__entry__builder__insert.html">Multi_value_entry_builder_insert</a> : <span class="keyword">public</span> <a class="code" href="classMulti__value__entry__builder.html">Multi_value_entry_builder</a> {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">  @param[in,out]        index   multi-value index</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">  @param[in]            entry   entry to insert based on the index */</span></div><div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__insert.html#a8fb35f069eccd1b2fe77ffbd1ebc0531">  552</a></span>&#160;  <a class="code" href="classMulti__value__entry__builder__insert.html#a8fb35f069eccd1b2fe77ffbd1ebc0531">Multi_value_entry_builder_insert</a>(<a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="code" href="structdtuple__t.html">dtuple_t</a> *<a class="code" href="struct__entry.html">entry</a>)</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      : <a class="code" href="classMulti__value__entry__builder.html">Multi_value_entry_builder</a>(index, entry, <a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {}</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">  /** Find the multi-value field from the passed entry in or row.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">  m_mv_field_no should be set once the multi-value field found.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">  @return the multi-value field pointer, or nullptr if not found */</span></div><div class="line"><a name="l00559"></a><span class="lineno"><a class="line" href="classMulti__value__entry__builder__insert.html#a9ac5d60701f0fce8355105233e5c5220">  559</a></span>&#160;  <a class="code" href="structdfield__t.html">dfield_t</a> *<a class="code" href="classMulti__value__entry__builder__insert.html#a9ac5d60701f0fce8355105233e5c5220">find_multi_value_field</a>()<span class="keyword"> override </span>{</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    uint16_t i = 0;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="structdfield__t.html">dfield_t</a> *field = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">m_mv_field_no</a> = 0;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">for</span> (; i &lt; <a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a>-&gt;<a class="code" href="structdtuple__t.html#a46a4b886567f901cb246245a422fc8be">n_fields</a>; ++i) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      field = &amp;<a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a>-&gt;<a class="code" href="structdtuple__t.html#a85dce8d7139081a32aea0c1a01023184">fields</a>[i];</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="data0data_8h.html#ad79e05d68cd6ae496c4144c6c7b81cc7">dfield_is_multi_value</a>(field)) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <a class="code" href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">m_mv_field_no</a> = i + 1;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">return</span> (i == <a class="code" href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">m_entry</a>-&gt;<a class="code" href="structdtuple__t.html#a46a4b886567f901cb246245a422fc8be">n_fields</a> ? <span class="keyword">nullptr</span> : field);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;};</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="preprocessor">#include &quot;row0row.ic&quot;</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="rem0types_8h_html"><div class="ttname"><a href="rem0types_8h.html">rem0types.h</a></div><div class="ttdoc">Record manager global types. </div></div>
<div class="ttc" id="classMulti__value__entry__builder__normal_html_ae4adfc98049a694a1682e5875cbb9f17"><div class="ttname"><a href="classMulti__value__entry__builder__normal.html#ae4adfc98049a694a1682e5875cbb9f17">Multi_value_entry_builder_normal::m_check</a></div><div class="ttdeci">const bool m_check</div><div class="ttdoc">True if dfield type should be checked, otherwise false. </div><div class="ttdef"><b>Definition:</b> row0row.h:541</div></div>
<div class="ttc" id="row0row_8h_html_ae4fd9d32b70aba75f6c573d6ca6475bd"><div class="ttname"><a href="row0row_8h.html#ae4fd9d32b70aba75f6c573d6ca6475bd">row_get_rec_trx_id</a></div><div class="ttdeci">UNIV_INLINE trx_id_t row_get_rec_trx_id(const rec_t *rec, const dict_index_t *index, const ulint *offsets)</div><div class="ttdoc">Reads the trx id field from a clustered index record. </div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_a7ae9de3018ed14093926f1912f170503"><div class="ttname"><a href="classMulti__value__entry__builder.html#a7ae9de3018ed14093926f1912f170503">Multi_value_entry_builder::begin</a></div><div class="ttdeci">dtuple_t * begin(uint32_t pos=0)</div><div class="ttdoc">Get the first index entry. </div><div class="ttdef"><b>Definition:</b> row0row.h:366</div></div>
<div class="ttc" id="classMulti__value__entry__builder__insert_html"><div class="ttname"><a href="classMulti__value__entry__builder__insert.html">Multi_value_entry_builder_insert</a></div><div class="ttdoc">The subclass of the multi-value row builder, for INSERT cases. </div><div class="ttdef"><b>Definition:</b> row0row.h:547</div></div>
<div class="ttc" id="row0row_8h_html_ada50af148cc3c93ea77b5cbde1083610a4095f536aeb9c036ebd817fb60c48b0b"><div class="ttname"><a href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610a4095f536aeb9c036ebd817fb60c48b0b">ROW_NOT_FOUND</a></div><div class="ttdoc">record not found </div><div class="ttdef"><b>Definition:</b> row0row.h:299</div></div>
<div class="ttc" id="trx0types_8h_html_ad3ccac613ce33a8680d147c4a4f12e94"><div class="ttname"><a href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a></div><div class="ttdeci">ib_id_t roll_ptr_t</div><div class="ttdoc">Rollback pointer (DB_ROLL_PTR, DATA_ROLL_PTR) </div><div class="ttdef"><b>Definition:</b> trx0types.h:146</div></div>
<div class="ttc" id="structdtuple__t_html_a85dce8d7139081a32aea0c1a01023184"><div class="ttname"><a href="structdtuple__t.html#a85dce8d7139081a32aea0c1a01023184">dtuple_t::fields</a></div><div class="ttdeci">dfield_t * fields</div><div class="ttdoc">Fields. </div><div class="ttdef"><b>Definition:</b> data0data.h:725</div></div>
<div class="ttc" id="classMulti__value__entry__builder__insert_html_a8fb35f069eccd1b2fe77ffbd1ebc0531"><div class="ttname"><a href="classMulti__value__entry__builder__insert.html#a8fb35f069eccd1b2fe77ffbd1ebc0531">Multi_value_entry_builder_insert::Multi_value_entry_builder_insert</a></div><div class="ttdeci">Multi_value_entry_builder_insert(dict_index_t *index, dtuple_t *entry)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> row0row.h:552</div></div>
<div class="ttc" id="structtrx__t_html"><div class="ttname"><a href="structtrx__t.html">trx_t</a></div><div class="ttdef"><b>Definition:</b> trx0trx.h:833</div></div>
<div class="ttc" id="row0row_8h_html_a416f4a7d911ca078ff797972513b829f"><div class="ttname"><a href="row0row_8h.html#a416f4a7d911ca078ff797972513b829f">row_get_clust_rec</a></div><div class="ttdeci">rec_t * row_get_clust_rec(ulint mode, const rec_t *rec, const dict_index_t *index, dict_index_t **clust_index, mtr_t *mtr)</div><div class="ttdoc">Fetches the clustered index record for a secondary index record. </div><div class="ttdef"><b>Definition:</b> row0row.cc:920</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_a59b04ef15dc7dcf8f54ad53f90ee2630"><div class="ttname"><a href="classMulti__value__entry__builder.html#a59b04ef15dc7dcf8f54ad53f90ee2630">Multi_value_entry_builder::m_entry</a></div><div class="ttdeci">dtuple_t * m_entry</div><div class="ttdoc">Entry built for the index. </div><div class="ttdef"><b>Definition:</b> row0row.h:457</div></div>
<div class="ttc" id="structrow__ext__t_html"><div class="ttname"><a href="structrow__ext__t.html">row_ext_t</a></div><div class="ttdoc">Prefixes of externally stored columns. </div><div class="ttdef"><b>Definition:</b> row0ext.h:100</div></div>
<div class="ttc" id="classMulti__value__entry__builder__normal_html_a5d8c23a7e8be840f9ca0d9c5b52a086c"><div class="ttname"><a href="classMulti__value__entry__builder__normal.html#a5d8c23a7e8be840f9ca0d9c5b52a086c">Multi_value_entry_builder_normal::m_row</a></div><div class="ttdeci">const dtuple_t * m_row</div><div class="ttdoc">Based on which complete row to build the index row. </div><div class="ttdef"><b>Definition:</b> row0row.h:532</div></div>
<div class="ttc" id="data0data_8h_html_abb318a58295cba54d3353921f0a741f7"><div class="ttname"><a href="data0data_8h.html#abb318a58295cba54d3353921f0a741f7">dtuple_get_nth_field</a></div><div class="ttdeci">UNIV_INLINE dfield_t * dtuple_get_nth_field(const dtuple_t *tuple, ulint n)</div><div class="ttdoc">Gets nth field of a tuple. </div></div>
<div class="ttc" id="structmulti__value__data_html_ac97c8e6d0d73bd894e84eb941cde2ad2"><div class="ttname"><a href="structmulti__value__data.html#ac97c8e6d0d73bd894e84eb941cde2ad2">multi_value_data::bitset</a></div><div class="ttdeci">Bitset * bitset</div><div class="ttdoc">Bitset to indicate which data should be handled for current data array. </div><div class="ttdef"><b>Definition:</b> data0data.h:442</div></div>
<div class="ttc" id="row0row_8h_html_aad3a14e446e6d5c7c65bb438d9f6f48c"><div class="ttname"><a href="row0row_8h.html#aad3a14e446e6d5c7c65bb438d9f6f48c">row_build</a></div><div class="ttdeci">dtuple_t * row_build(ulint type, const dict_index_t *index, const rec_t *rec, const ulint *offsets, const dict_table_t *col_table, const dtuple_t *add_cols, const ulint *col_map, row_ext_t **ext, mem_heap_t *heap)</div><div class="ttdoc">An inverse function to row_build_index_entry. </div><div class="ttdef"><b>Definition:</b> row0row.cc:530</div></div>
<div class="ttc" id="row0row_8h_html_a29b1e0eedac758f1cdc42fbc0f76630c"><div class="ttname"><a href="row0row_8h.html#a29b1e0eedac758f1cdc42fbc0f76630c">row_build_index_entry_low</a></div><div class="ttdeci">dtuple_t * row_build_index_entry_low(const dtuple_t *row, const row_ext_t *ext, const dict_index_t *index, mem_heap_t *heap, ulint flag)</div><div class="ttdoc">When an insert or purge to a table is performed, this function builds the entry to be inserted into o...</div><div class="ttdef"><b>Definition:</b> row0row.cc:63</div></div>
<div class="ttc" id="data0data_8h_html_ad79e05d68cd6ae496c4144c6c7b81cc7"><div class="ttname"><a href="data0data_8h.html#ad79e05d68cd6ae496c4144c6c7b81cc7">dfield_is_multi_value</a></div><div class="ttdeci">UNIV_INLINE bool dfield_is_multi_value(const dfield_t *field)</div><div class="ttdoc">Determine if a field is of multi-value type. </div></div>
<div class="ttc" id="namespacestdx_1_1io_html_a2c9b563b772005f7960909d0d12186f5"><div class="ttname"><a href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">stdx::io::mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> file_handle.h:59</div></div>
<div class="ttc" id="structdtuple__t_html_a46a4b886567f901cb246245a422fc8be"><div class="ttname"><a href="structdtuple__t.html#a46a4b886567f901cb246245a422fc8be">dtuple_t::n_fields</a></div><div class="ttdeci">ulint n_fields</div><div class="ttdoc">Number of fields in dtuple. </div><div class="ttdef"><b>Definition:</b> data0data.h:717</div></div>
<div class="ttc" id="row0row_8h_html_a33b0521a11c97ce434b2bae80ae2155a"><div class="ttname"><a href="row0row_8h.html#a33b0521a11c97ce434b2bae80ae2155a">row_search_on_row_ref</a></div><div class="ttdeci">ibool row_search_on_row_ref(btr_pcur_t *pcur, ulint mode, dict_table_t *table, const dtuple_t *ref, mtr_t *mtr)</div><div class="ttdoc">Searches the clustered index record for a row, if we have the row reference. </div><div class="ttdef"><b>Definition:</b> row0row.cc:883</div></div>
<div class="ttc" id="structdict__table__t_html"><div class="ttname"><a href="structdict__table__t.html">dict_table_t</a></div><div class="ttdoc">Data structure for a database table. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:1532</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_aab51bfd0f7680fe8cf7b37eb93d43411"><div class="ttname"><a href="classMulti__value__entry__builder.html#aab51bfd0f7680fe8cf7b37eb93d43411">Multi_value_entry_builder::next</a></div><div class="ttdeci">dtuple_t * next()</div><div class="ttdoc">Get next index entry based on next multi-value data. </div><div class="ttdef"><b>Definition:</b> row0row.h:381</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_ae76196b57420e4c0a2b64c91c8e7335d"><div class="ttname"><a href="classMulti__value__entry__builder.html#ae76196b57420e4c0a2b64c91c8e7335d">Multi_value_entry_builder::m_mv_field_no</a></div><div class="ttdeci">uint32_t m_mv_field_no</div><div class="ttdoc">Field number of multi-value data on the index. </div><div class="ttdef"><b>Definition:</b> row0row.h:466</div></div>
<div class="ttc" id="structdict__add__v__col__t_html"><div class="ttname"><a href="structdict__add__v__col__t.html">dict_add_v_col_t</a></div><div class="ttdoc">Data structure for newly added virtual column in a table. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:669</div></div>
<div class="ttc" id="structdfield__t_html_afd82f01691697d8794ee2112250a04b4"><div class="ttname"><a href="structdfield__t.html#afd82f01691697d8794ee2112250a04b4">dfield_t::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">pointer to data </div><div class="ttdef"><b>Definition:</b> data0data.h:640</div></div>
<div class="ttc" id="namespacebuf_html"><div class="ttname"><a href="namespacebuf.html">buf</a></div><div class="ttdef"><b>Definition:</b> buf0block_hint.cc:29</div></div>
<div class="ttc" id="row0row_8h_html_a9bae703dc138921925eefdbc5c7bc86c"><div class="ttname"><a href="row0row_8h.html#a9bae703dc138921925eefdbc5c7bc86c">row_build_w_add_vcol</a></div><div class="ttdeci">dtuple_t * row_build_w_add_vcol(ulint type, const dict_index_t *index, const rec_t *rec, const ulint *offsets, const dict_table_t *col_table, const dtuple_t *add_cols, const dict_add_v_col_t *add_v, const ulint *col_map, row_ext_t **ext, mem_heap_t *heap)</div><div class="ttdoc">An inverse function to row_build_index_entry. </div><div class="ttdef"><b>Definition:</b> row0row.cc:595</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_a04f23f750ce8501206c6cf9db25a7dd1"><div class="ttname"><a href="classMulti__value__entry__builder.html#a04f23f750ce8501206c6cf9db25a7dd1">Multi_value_entry_builder::~Multi_value_entry_builder</a></div><div class="ttdeci">virtual ~Multi_value_entry_builder()</div><div class="ttdef"><b>Definition:</b> row0row.h:357</div></div>
<div class="ttc" id="structmem__block__info__t_html"><div class="ttname"><a href="structmem__block__info__t.html">mem_block_info_t</a></div><div class="ttdoc">The info structure stored at the beginning of a heap block. </div><div class="ttdef"><b>Definition:</b> mem0mem.h:349</div></div>
<div class="ttc" id="row0row_8h_html_a8e906c484f5fb40ca07ae6ba7157b89e"><div class="ttname"><a href="row0row_8h.html#a8e906c484f5fb40ca07ae6ba7157b89e">row_get_autoinc_counter</a></div><div class="ttdeci">ib_uint64_t row_get_autoinc_counter(const dtuple_t *row, ulint n)</div><div class="ttdoc">Read the autoinc counter from the clustered index row. </div><div class="ttdef"><b>Definition:</b> row0row.cc:980</div></div>
<div class="ttc" id="structbtr__pcur__t_html"><div class="ttname"><a href="structbtr__pcur__t.html">btr_pcur_t</a></div><div class="ttdef"><b>Definition:</b> btr0pcur.h:178</div></div>
<div class="ttc" id="data0data_8h_html"><div class="ttname"><a href="data0data_8h.html">data0data.h</a></div><div class="ttdoc">SQL data field and tuple. </div></div>
<div class="ttc" id="que0types_8h_html"><div class="ttname"><a href="que0types_8h.html">que0types.h</a></div><div class="ttdoc">Query graph global types. </div></div>
<div class="ttc" id="create__def_8cc_html_a83a426bc389379d92979b5248e18877c"><div class="ttname"><a href="create__def_8cc.html#a83a426bc389379d92979b5248e18877c">buf_size</a></div><div class="ttdeci">constexpr DWORD buf_size</div><div class="ttdef"><b>Definition:</b> create_def.cc:223</div></div>
<div class="ttc" id="structdfield__t_html_a8864caf20b4bd2dca2a0c76bc331a612"><div class="ttname"><a href="structdfield__t.html#a8864caf20b4bd2dca2a0c76bc331a612">dfield_t::len</a></div><div class="ttdeci">unsigned len</div><div class="ttdoc">data length; UNIV_SQL_NULL if SQL null </div><div class="ttdef"><b>Definition:</b> data0data.h:645</div></div>
<div class="ttc" id="btr0types_8h_html"><div class="ttname"><a href="btr0types_8h.html">btr0types.h</a></div><div class="ttdoc">The index tree general types. </div></div>
<div class="ttc" id="row0row_8h_html_aac7fccbeaa734d8d5bbf04e8508130fd"><div class="ttname"><a href="row0row_8h.html#aac7fccbeaa734d8d5bbf04e8508130fd">row_get_trx_id_offset</a></div><div class="ttdeci">UNIV_INLINE ulint row_get_trx_id_offset(const dict_index_t *index, const ulint *offsets)</div><div class="ttdoc">Gets the offset of the DB_TRX_ID field, in bytes relative to the origin of a clustered index record...</div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="dict0types_8h_html"><div class="ttname"><a href="dict0types_8h.html">dict0types.h</a></div><div class="ttdoc">Data dictionary global types. </div></div>
<div class="ttc" id="do__ctype_8cc_html_ab5ad9aa3d3e725ca44ebfa85e0b1020d"><div class="ttname"><a href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a></div><div class="ttdeci">char * pos</div><div class="ttdef"><b>Definition:</b> do_ctype.cc:76</div></div>
<div class="ttc" id="data0data_8h_html_a01263061c103fce3c132355c7de2d847"><div class="ttname"><a href="data0data_8h.html#a01263061c103fce3c132355c7de2d847">dfield_set_data</a></div><div class="ttdeci">UNIV_INLINE void dfield_set_data(dfield_t *field, const void *data, ulint len)</div><div class="ttdoc">Sets pointer to the data and length in a field. </div></div>
<div class="ttc" id="row0row_8h_html_a3a7ab62071d9d257573b144a093be549"><div class="ttname"><a href="row0row_8h.html#a3a7ab62071d9d257573b144a093be549">row_build_row_ref_fast</a></div><div class="ttdeci">UNIV_INLINE void row_build_row_ref_fast(dtuple_t *ref, const ulint *map, const rec_t *rec, const ulint *offsets)</div><div class="ttdoc">Builds from a secondary index record a row reference with which we can search the clustered index rec...</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_a1e0e1bea096210cb3dd6ed3d10e4c5e4"><div class="ttname"><a href="classMulti__value__entry__builder.html#a1e0e1bea096210cb3dd6ed3d10e4c5e4">Multi_value_entry_builder::last_multi_value_position</a></div><div class="ttdeci">uint32_t last_multi_value_position() const</div><div class="ttdoc">Get the position of last generated multi-value data. </div><div class="ttdef"><b>Definition:</b> row0row.h:403</div></div>
<div class="ttc" id="rem0types_8h_html_a92caeffe2dc2fbe825a54aef9a163435"><div class="ttname"><a href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a></div><div class="ttdeci">byte rec_t</div><div class="ttdef"><b>Definition:</b> rem0types.h:39</div></div>
<div class="ttc" id="structdtuple__t_html"><div class="ttname"><a href="structdtuple__t.html">dtuple_t</a></div><div class="ttdoc">Structure for an SQL data tuple of fields (logical record) </div><div class="ttdef"><b>Definition:</b> data0data.h:711</div></div>
<div class="ttc" id="classBitset_html_a16853e7c3a968e7bd15c4aa0a4db9825"><div class="ttname"><a href="classBitset.html#a16853e7c3a968e7bd15c4aa0a4db9825">Bitset::test</a></div><div class="ttdeci">bool test(size_t pos) const</div><div class="ttdoc">Test if the specified bit is set or not. </div><div class="ttdef"><b>Definition:</b> ut0bitset.h:82</div></div>
<div class="ttc" id="structmulti__value__data_html_a106ae5c79c0431192251f7327169df10"><div class="ttname"><a href="structmulti__value__data.html#a106ae5c79c0431192251f7327169df10">multi_value_data::datap</a></div><div class="ttdeci">const void ** datap</div><div class="ttdoc">points to different value </div><div class="ttdef"><b>Definition:</b> data0data.h:421</div></div>
<div class="ttc" id="row0row_8h_html_ad2109d23ed962faa1cf0c58b9d4191de"><div class="ttname"><a href="row0row_8h.html#ad2109d23ed962faa1cf0c58b9d4191de">row_parse_int</a></div><div class="ttdeci">ib_uint64_t row_parse_int(const byte *data, ulint len, ulint mtype, bool unsigned_type)</div><div class="ttdoc">Parse the integer data from specified data, which could be DATA_INT, DATA_FLOAT or DATA_DOUBLE...</div></div>
<div class="ttc" id="row0row_8h_html_a8415717f4374389b26903fab94033b1b"><div class="ttname"><a href="row0row_8h.html#a8415717f4374389b26903fab94033b1b">row_raw_format</a></div><div class="ttdeci">ulint row_raw_format(const char *data, ulint data_len, const dict_field_t *dict_field, char *buf, ulint buf_size)</div><div class="ttdoc">Formats the raw data in &quot;data&quot; (in InnoDB on-disk format) using &quot;dict_field&quot; and writes the result to...</div><div class="ttdef"><b>Definition:</b> row0row.cc:1135</div></div>
<div class="ttc" id="row0row_8h_html_ada50af148cc3c93ea77b5cbde1083610"><div class="ttname"><a href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610">row_search_result</a></div><div class="ttdeci">row_search_result</div><div class="ttdoc">Result of row_search_index_entry. </div><div class="ttdef"><b>Definition:</b> row0row.h:297</div></div>
<div class="ttc" id="row0types_8h_html"><div class="ttname"><a href="row0types_8h.html">row0types.h</a></div><div class="ttdoc">Row operation global types. </div></div>
<div class="ttc" id="classMulti__value__entry__builder__normal_html_ac32f3a27f599d051f2fc564e61aa63c2"><div class="ttname"><a href="classMulti__value__entry__builder__normal.html#ac32f3a27f599d051f2fc564e61aa63c2">Multi_value_entry_builder_normal::skip</a></div><div class="ttdeci">uint32_t skip() override</div><div class="ttdoc">Skip the not selected values and stop m_pos at the next selected one. </div><div class="ttdef"><b>Definition:</b> row0row.h:516</div></div>
<div class="ttc" id="structdict__field__t_html"><div class="ttname"><a href="structdict__field__t.html">dict_field_t</a></div><div class="ttdoc">Data structure for a field in an index. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:725</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html"><div class="ttname"><a href="classMulti__value__entry__builder.html">Multi_value_entry_builder</a></div><div class="ttdoc">Class to build a series of entries based on one multi-value field. </div><div class="ttdef"><b>Definition:</b> row0row.h:346</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_ad399820e91bd7283bd148d4079afd51f"><div class="ttname"><a href="classMulti__value__entry__builder.html#ad399820e91bd7283bd148d4079afd51f">Multi_value_entry_builder::skip</a></div><div class="ttdeci">virtual uint32_t skip()</div><div class="ttdoc">Skip the not selected values and stop m_pos at the next selected one. </div><div class="ttdef"><b>Definition:</b> row0row.h:442</div></div>
<div class="ttc" id="row0row_8h_html_adfd60aba2c158224fb2d2a8e183c83c5"><div class="ttname"><a href="row0row_8h.html#adfd60aba2c158224fb2d2a8e183c83c5">row_build_index_entry</a></div><div class="ttdeci">UNIV_INLINE dtuple_t * row_build_index_entry(const dtuple_t *row, const row_ext_t *ext, const dict_index_t *index, mem_heap_t *heap)</div><div class="ttdoc">When an insert or purge to a table is performed, this function builds the entry to be inserted into o...</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_ac3a13228adef41c1d5ddb6592fb131cd"><div class="ttname"><a href="classMulti__value__entry__builder.html#ac3a13228adef41c1d5ddb6592fb131cd">Multi_value_entry_builder::prepare_multi_value_field</a></div><div class="ttdeci">virtual bool prepare_multi_value_field()</div><div class="ttdoc">Prepare the corresponding multi-value field from the row. </div><div class="ttdef"><b>Definition:</b> row0row.h:417</div></div>
<div class="ttc" id="classMulti__value__entry__builder__insert_html_a9ac5d60701f0fce8355105233e5c5220"><div class="ttname"><a href="classMulti__value__entry__builder__insert.html#a9ac5d60701f0fce8355105233e5c5220">Multi_value_entry_builder_insert::find_multi_value_field</a></div><div class="ttdeci">dfield_t * find_multi_value_field() override</div><div class="ttdoc">Find the multi-value field from the passed entry in or row. </div><div class="ttdef"><b>Definition:</b> row0row.h:559</div></div>
<div class="ttc" id="structdfield__t_html"><div class="ttname"><a href="structdfield__t.html">dfield_t</a></div><div class="ttdoc">Structure for an SQL data field. </div><div class="ttdef"><b>Definition:</b> data0data.h:639</div></div>
<div class="ttc" id="row0row_8h_html_ada50af148cc3c93ea77b5cbde1083610acc817aed7e8b438484c96d7244084ceb"><div class="ttname"><a href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610acc817aed7e8b438484c96d7244084ceb">ROW_BUFFERED</a></div><div class="ttdoc">one of BTR_INSERT, BTR_DELETE, or BTR_DELETE_MARK was specified, the secondary index leaf page was no...</div><div class="ttdef"><b>Definition:</b> row0row.h:300</div></div>
<div class="ttc" id="classMulti__value__entry__builder__normal_html_a89a88c7a04cbf2d91eaa817124c829bb"><div class="ttname"><a href="classMulti__value__entry__builder__normal.html#a89a88c7a04cbf2d91eaa817124c829bb">Multi_value_entry_builder_normal::prepare_entry_if_necessary</a></div><div class="ttdeci">void prepare_entry_if_necessary() override</div><div class="ttdoc">Prepare the entry when the entry is not passed in. </div><div class="ttdef"><b>Definition:</b> row0row.h:502</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_a8d0f6432dbbe274ca0b19d148a2b5728"><div class="ttname"><a href="classMulti__value__entry__builder.html#a8d0f6432dbbe274ca0b19d148a2b5728">Multi_value_entry_builder::Multi_value_entry_builder</a></div><div class="ttdeci">Multi_value_entry_builder(dict_index_t *index, dtuple_t *entry, bool selected)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> row0row.h:349</div></div>
<div class="ttc" id="namespacebinary__log_1_1transaction_1_1compression_html_a22a3b5d8096f4c73ced74c0b668df0be"><div class="ttname"><a href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">binary_log::transaction::compression::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> base.h:36</div></div>
<div class="ttc" id="trx0types_8h_html"><div class="ttname"><a href="trx0types_8h.html">trx0types.h</a></div><div class="ttdoc">Transaction system global type definitions. </div></div>
<div class="ttc" id="row0row_8h_html_a8197f76ace04aa6a8da8cee8f03c09b8"><div class="ttname"><a href="row0row_8h.html#a8197f76ace04aa6a8da8cee8f03c09b8">row_rec_to_index_entry_low</a></div><div class="ttdeci">dtuple_t * row_rec_to_index_entry_low(const rec_t *rec, const dict_index_t *index, const ulint *offsets, mem_heap_t *heap)</div><div class="ttdoc">Converts an index record to a typed data tuple. </div><div class="ttdef"><b>Definition:</b> row0row.cc:609</div></div>
<div class="ttc" id="row0row_8h_html_a847ee4b4cf5e88e26a5c71843683f29f"><div class="ttname"><a href="row0row_8h.html#a847ee4b4cf5e88e26a5c71843683f29f">row_rec_to_index_entry</a></div><div class="ttdeci">dtuple_t * row_rec_to_index_entry(const rec_t *rec, const dict_index_t *index, const ulint *offsets, mem_heap_t *heap)</div><div class="ttdoc">Converts an index record to a typed data tuple. </div><div class="ttdef"><b>Definition:</b> row0row.cc:667</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_a21a3436d63699ade85679b90888e3b25"><div class="ttname"><a href="classMulti__value__entry__builder.html#a21a3436d63699ade85679b90888e3b25">Multi_value_entry_builder::m_mv_data</a></div><div class="ttdeci">const multi_value_data * m_mv_data</div><div class="ttdoc">Multi-value data. </div><div class="ttdef"><b>Definition:</b> row0row.h:463</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_affb207cf7d98a882693d79de3f12724f"><div class="ttname"><a href="classMulti__value__entry__builder.html#affb207cf7d98a882693d79de3f12724f">Multi_value_entry_builder::prepare_entry_if_necessary</a></div><div class="ttdeci">virtual void prepare_entry_if_necessary()</div><div class="ttdoc">Prepare the entry when the entry is not passed in. </div><div class="ttdef"><b>Definition:</b> row0row.h:437</div></div>
<div class="ttc" id="row0row_8h_html_a6ab5591e85f65a530d43defdaf398a9e"><div class="ttname"><a href="row0row_8h.html#a6ab5591e85f65a530d43defdaf398a9e">ROW_BUILD_FOR_PURGE</a></div><div class="ttdeci">#define ROW_BUILD_FOR_PURGE</div><div class="ttdoc">build row for purge. </div><div class="ttdef"><b>Definition:</b> row0row.h:73</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_abc8e6d6f533b9f9522a0049dc8edbfd9"><div class="ttname"><a href="classMulti__value__entry__builder.html#abc8e6d6f533b9f9522a0049dc8edbfd9">Multi_value_entry_builder::m_index</a></div><div class="ttdeci">dict_index_t * m_index</div><div class="ttdoc">Based on which index to build the entry. </div><div class="ttdef"><b>Definition:</b> row0row.h:450</div></div>
<div class="ttc" id="data0data_8h_html_a4cdfd235bef36c9cf972e32cd691206f"><div class="ttname"><a href="data0data_8h.html#a4cdfd235bef36c9cf972e32cd691206f">dfield_is_null</a></div><div class="ttdeci">UNIV_INLINE ulint dfield_is_null(const dfield_t *field)</div><div class="ttdoc">Determines if a field is SQL NULL. </div></div>
<div class="ttc" id="row0row_8h_html_ada50af148cc3c93ea77b5cbde1083610ab1b66d2c86777e6c3103433a7794629e"><div class="ttname"><a href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610ab1b66d2c86777e6c3103433a7794629e">ROW_FOUND</a></div><div class="ttdoc">the record was found </div><div class="ttdef"><b>Definition:</b> row0row.h:298</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_a5bdbbd832bd124a0f93f5771e75d08f0"><div class="ttname"><a href="classMulti__value__entry__builder.html#a5bdbbd832bd124a0f93f5771e75d08f0">Multi_value_entry_builder::m_selected</a></div><div class="ttdeci">const bool m_selected</div><div class="ttdoc">True if only the selected(bitmap set) multi-value data would be used to build the entries...</div><div class="ttdef"><b>Definition:</b> row0row.h:454</div></div>
<div class="ttc" id="row0row_8h_html_a16308b74d96873a4691c0766f8d16e25"><div class="ttname"><a href="row0row_8h.html#a16308b74d96873a4691c0766f8d16e25">row_build_row_ref_in_tuple</a></div><div class="ttdeci">void row_build_row_ref_in_tuple(dtuple_t *ref, const rec_t *rec, const dict_index_t *index, ulint *offsets, trx_t *trx)</div><div class="ttdoc">Builds from a secondary index record a row reference with which we can search the clustered index rec...</div><div class="ttdef"><b>Definition:</b> row0row.cc:808</div></div>
<div class="ttc" id="ut0dbg_8h_html_a17113dab7f37e298e889ac8818ab13d0"><div class="ttname"><a href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a></div><div class="ttdeci">#define ut_ad(EXPR)</div><div class="ttdoc">Debug assertion. </div><div class="ttdef"><b>Definition:</b> ut0dbg.h:66</div></div>
<div class="ttc" id="classMulti__value__entry__builder__normal_html_ab969a3448dd22b89796f27927111dea3"><div class="ttname"><a href="classMulti__value__entry__builder__normal.html#ab969a3448dd22b89796f27927111dea3">Multi_value_entry_builder_normal::m_heap</a></div><div class="ttdeci">mem_heap_t * m_heap</div><div class="ttdoc">Memory heap. </div><div class="ttdef"><b>Definition:</b> row0row.h:538</div></div>
<div class="ttc" id="classMulti__value__entry__builder__normal_html"><div class="ttname"><a href="classMulti__value__entry__builder__normal.html">Multi_value_entry_builder_normal</a></div><div class="ttdoc">The subclass of the multi-value entry builder, for non-INSERT cases, With this class, there should be no need to build separate entries for different values in the same multi-value field. </div><div class="ttdef"><b>Definition:</b> row0row.h:472</div></div>
<div class="ttc" id="trx0types_8h_html_a91afca43a639c098efe14a9069a1d4ec"><div class="ttname"><a href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a></div><div class="ttdeci">ib_id_t trx_id_t</div><div class="ttdoc">Transaction identifier (DB_TRX_ID, DATA_TRX_ID) </div><div class="ttdef"><b>Definition:</b> trx0types.h:144</div></div>
<div class="ttc" id="hp__test1_8cc_html_adf916204820072417ed73a32de1cefcf"><div class="ttname"><a href="hp__test1_8cc.html#adf916204820072417ed73a32de1cefcf">flag</a></div><div class="ttdeci">static int flag</div><div class="ttdef"><b>Definition:</b> hp_test1.cc:39</div></div>
<div class="ttc" id="row0row_8h_html_ada50af148cc3c93ea77b5cbde1083610a11cb94625dcb9dabb6e81aacab68405d"><div class="ttname"><a href="row0row_8h.html#ada50af148cc3c93ea77b5cbde1083610a11cb94625dcb9dabb6e81aacab68405d">ROW_NOT_DELETED_REF</a></div><div class="ttdoc">BTR_DELETE was specified, and row_purge_poss_sec() failed. </div><div class="ttdef"><b>Definition:</b> row0row.h:305</div></div>
<div class="ttc" id="structmulti__value__data_html"><div class="ttname"><a href="structmulti__value__data.html">multi_value_data</a></div><div class="ttdoc">Structure to hold number of multiple values. </div><div class="ttdef"><b>Definition:</b> data0data.h:418</div></div>
<div class="ttc" id="xcom__base_8cc_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> xcom_base.cc:442</div></div>
<div class="ttc" id="classMulti__value__entry__builder__normal_html_ad760e235bd2db07182c8adee069eb988"><div class="ttname"><a href="classMulti__value__entry__builder__normal.html#ad760e235bd2db07182c8adee069eb988">Multi_value_entry_builder_normal::Multi_value_entry_builder_normal</a></div><div class="ttdeci">Multi_value_entry_builder_normal(const dtuple_t *row, const row_ext_t *ext, dict_index_t *index, mem_heap_t *heap, bool check, bool selected)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> row0row.h:486</div></div>
<div class="ttc" id="mtr0mtr_8h_html"><div class="ttname"><a href="mtr0mtr_8h.html">mtr0mtr.h</a></div><div class="ttdoc">Mini-transaction buffer. </div></div>
<div class="ttc" id="row0row_8h_html_a59dc75ed0183a4eb2d40d2c55b377d2a"><div class="ttname"><a href="row0row_8h.html#a59dc75ed0183a4eb2d40d2c55b377d2a">row_parse_int_from_field</a></div><div class="ttdeci">ib_uint64_t row_parse_int_from_field(const dfield_t *field)</div><div class="ttdoc">Parse the integer data from specified field, which could be DATA_INT, DATA_FLOAT or DATA_DOUBLE...</div><div class="ttdef"><b>Definition:</b> row0row.cc:962</div></div>
<div class="ttc" id="classMulti__value__entry__builder__normal_html_a0da932bf950c2fb19e0872d1882f0da5"><div class="ttname"><a href="classMulti__value__entry__builder__normal.html#a0da932bf950c2fb19e0872d1882f0da5">Multi_value_entry_builder_normal::m_ext</a></div><div class="ttdeci">const row_ext_t * m_ext</div><div class="ttdoc">Externally stored column prefixes, or nullptr. </div><div class="ttdef"><b>Definition:</b> row0row.h:535</div></div>
<div class="ttc" id="row0row_8h_html_ad31901c1b51c3d15267fc793721b82d6"><div class="ttname"><a href="row0row_8h.html#ad31901c1b51c3d15267fc793721b82d6">row_search_index_entry</a></div><div class="ttdeci">enum row_search_result row_search_index_entry(dict_index_t *index, const dtuple_t *entry, ulint mode, btr_pcur_t *pcur, mtr_t *mtr)</div><div class="ttdoc">Searches an index record. </div><div class="ttdef"><b>Definition:</b> row0row.cc:988</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_abdc7e98573c1d8d3ad92fb8d1a4fed85"><div class="ttname"><a href="classMulti__value__entry__builder.html#abdc7e98573c1d8d3ad92fb8d1a4fed85">Multi_value_entry_builder::m_pos</a></div><div class="ttdeci">uint32_t m_pos</div><div class="ttdoc">Multi-value data position. </div><div class="ttdef"><b>Definition:</b> row0row.h:460</div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="structmtr__t_html"><div class="ttname"><a href="structmtr__t.html">mtr_t</a></div><div class="ttdoc">Mini-transaction handle and buffer. </div><div class="ttdef"><b>Definition:</b> mtr0mtr.h:169</div></div>
<div class="ttc" id="row0row_8h_html_ab0f0c0bb8cf22fadbea897af1606269c"><div class="ttname"><a href="row0row_8h.html#ab0f0c0bb8cf22fadbea897af1606269c">row_build_row_ref</a></div><div class="ttdeci">dtuple_t * row_build_row_ref(ulint type, const dict_index_t *index, const rec_t *rec, mem_heap_t *heap)</div><div class="ttdoc">Builds from a secondary index record a row reference with which we can search the clustered index rec...</div><div class="ttdef"><b>Definition:</b> row0row.cc:701</div></div>
<div class="ttc" id="classMulti__value__entry__builder_html_a8dc0cd88f8ed8920d342abef53268a95"><div class="ttname"><a href="classMulti__value__entry__builder.html#a8dc0cd88f8ed8920d342abef53268a95">Multi_value_entry_builder::find_multi_value_field</a></div><div class="ttdeci">virtual dfield_t * find_multi_value_field()=0</div><div class="ttdoc">Find the multi-value field from the passed in entry or row. </div></div>
<div class="ttc" id="struct__entry_html"><div class="ttname"><a href="struct__entry.html">_entry</a></div><div class="ttdef"><b>Definition:</b> completion_hash.h:34</div></div>
<div class="ttc" id="config__static_8h_html_a65e9886d74aaee76545e83dd09011727"><div class="ttname"><a href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></div><div class="ttdeci">#define false</div><div class="ttdef"><b>Definition:</b> config_static.h:43</div></div>
<div class="ttc" id="structmulti__value__data_html_af2a11477bb7097c88acd0d970acd4949"><div class="ttname"><a href="structmulti__value__data.html#af2a11477bb7097c88acd0d970acd4949">multi_value_data::data_len</a></div><div class="ttdeci">uint32_t * data_len</div><div class="ttdoc">each individual value length </div><div class="ttdef"><b>Definition:</b> data0data.h:424</div></div>
<div class="ttc" id="structmulti__value__data_html_a61d7a55a4dcc0fc0591e07fd76b84455"><div class="ttname"><a href="structmulti__value__data.html#a61d7a55a4dcc0fc0591e07fd76b84455">multi_value_data::num_v</a></div><div class="ttdeci">uint32_t num_v</div><div class="ttdoc">number of values </div><div class="ttdef"><b>Definition:</b> data0data.h:430</div></div>
<div class="ttc" id="dialog_8cc_html_ae7bd12bd7c9e418a420087971d0a7e31"><div class="ttname"><a href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></div><div class="ttdeci">Dialog Client Authentication nullptr</div><div class="ttdef"><b>Definition:</b> dialog.cc:353</div></div>
<div class="ttc" id="row0row_8h_html_a14c41c387106c46b21a950855f57d686"><div class="ttname"><a href="row0row_8h.html#a14c41c387106c46b21a950855f57d686">row_get_rec_roll_ptr</a></div><div class="ttdeci">UNIV_INLINE roll_ptr_t row_get_rec_roll_ptr(const rec_t *rec, const dict_index_t *index, const ulint *offsets)</div><div class="ttdoc">Reads the roll pointer field from a clustered index record. </div></div>
<div class="ttc" id="structdict__index__t_html"><div class="ttname"><a href="structdict__index__t.html">dict_index_t</a></div><div class="ttdoc">Data structure for an index. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:886</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="row0row_8h.html">row0row.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
