<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: sql/sql_update.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sql__update_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sql_update.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="sql__update_8h_source.html">sql/sql_update.h</a>&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;atomic&gt;</code><br />
<code>#include &lt;cassert&gt;</code><br />
<code>#include &lt;cstdio&gt;</code><br />
<code>#include &lt;cstring&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;<a class="el" href="field__types_8h_source.html">field_types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lex__string_8h_source.html">lex_string.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="m__ctype_8h_source.html">m_ctype.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem__root__deque_8h_source.html">mem_root_deque.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__alloc_8h_source.html">my_alloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__bit_8h_source.html">my_bit.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__bitmap_8h_source.html">my_bitmap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__inttypes_8h_source.html">my_inttypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__sys_8h_source.html">my_sys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__table__map_8h_source.html">my_table_map.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psi__base_8h_source.html">mysql/psi/psi_base.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="service__mysql__alloc_8h_source.html">mysql/service_mysql_alloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysql__com_8h_source.html">mysql_com.h</a>&quot;</code><br />
<code>#include &quot;mysqld_error.h&quot;</code><br />
<code>#include &quot;<a class="el" href="prealloced__array_8h_source.html">prealloced_array.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="scope__guard_8h_source.html">scope_guard.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="auth__acls_8h_source.html">sql/auth/auth_acls.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="auth__common_8h_source.html">sql/auth/auth_common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="basic__row__iterators_8h_source.html">sql/basic_row_iterators.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="binlog_8h_source.html">sql/binlog.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="composite__iterators_8h_source.html">sql/composite_iterators.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug__sync_8h_source.html">sql/debug_sync.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="derror_8h_source.html">sql/derror.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2field_8h_source.html">sql/field.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="filesort_8h_source.html">sql/filesort.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2handler_8h_source.html">sql/handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item_8h_source.html">sql/item.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item__json__func_8h_source.html">sql/item_json_func.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="item__subselect_8h_source.html">sql/item_subselect.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="access__path_8h_source.html">sql/join_optimizer/access_path.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="key_8h_source.html">sql/key.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="key__spec_8h_source.html">sql/key_spec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="locked__tables__list_8h_source.html">sql/locked_tables_list.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem__root__array_8h_source.html">sql/mem_root_array.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysqld_8h_source.html">sql/mysqld.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="opt__explain_8h_source.html">sql/opt_explain.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="opt__explain__format_8h_source.html">sql/opt_explain_format.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="opt__range_8h_source.html">sql/opt_range.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="opt__trace_8h_source.html">sql/opt_trace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="opt__trace__context_8h_source.html">sql/opt_trace_context.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="parse__tree__node__base_8h_source.html">sql/parse_tree_node_base.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="partition__info_8h_source.html">sql/partition_info.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2protocol_8h_source.html">sql/protocol.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psi__memory__key_8h_source.html">sql/psi_memory_key.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="query__options_8h_source.html">sql/query_options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="records_8h_source.html">sql/records.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row__iterator_8h_source.html">sql/row_iterator.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="select__lex__visitor_8h_source.html">sql/select_lex_visitor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sorting__iterator_8h_source.html">sql/sorting_iterator.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__array_8h_source.html">sql/sql_array.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__base_8h_source.html">sql/sql_base.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__bitmap_8h_source.html">sql/sql_bitmap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__class_8h_source.html">sql/sql_class.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__const_8h_source.html">sql/sql_const.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__data__change_8h_source.html">sql/sql_data_change.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__error_8h_source.html">sql/sql_error.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__executor_8h_source.html">sql/sql_executor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__lex_8h_source.html">sql/sql_lex.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__opt__exec__shared_8h_source.html">sql/sql_opt_exec_shared.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__optimizer_8h_source.html">sql/sql_optimizer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__partition_8h_source.html">sql/sql_partition.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__resolver_8h_source.html">sql/sql_resolver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__select_8h_source.html">sql/sql_select.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__tmp__table_8h_source.html">sql/sql_tmp_table.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__view_8h_source.html">sql/sql_view.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="system__variables_8h_source.html">sql/system_variables.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql_2table_8h_source.html">sql/table.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="table__trigger__dispatcher_8h_source.html">sql/table_trigger_dispatcher.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="temp__table__param_8h_source.html">sql/temp_table_param.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thd__raii_8h_source.html">sql/thd_raii.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timing__iterator_8h_source.html">sql/timing_iterator.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="transaction__info_8h_source.html">sql/transaction_info.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trigger__def_8h_source.html">sql/trigger_def.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="template__utils_8h_source.html">template_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thr__lock_8h_source.html">thr_lock.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8a7e9518fe8a0a2c8f663b4718595191"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#a8a7e9518fe8a0a2c8f663b4718595191">prepare_partial_update</a> (<a class="el" href="classOpt__trace__context.html">Opt_trace_context</a> *trace, const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> * &gt; &amp;fields, const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> * &gt; &amp;values)</td></tr>
<tr class="memdesc:a8a7e9518fe8a0a2c8f663b4718595191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the columns that can possibly be updated in-place using partial update.  <a href="#a8a7e9518fe8a0a2c8f663b4718595191">More...</a><br /></td></tr>
<tr class="separator:a8a7e9518fe8a0a2c8f663b4718595191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dbd8d598f8fa342edbcb0d8c8a078d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#a0dbd8d598f8fa342edbcb0d8c8a078d7">records_are_comparable</a> (const <a class="el" href="structTABLE.html">TABLE</a> *table)</td></tr>
<tr class="memdesc:a0dbd8d598f8fa342edbcb0d8c8a078d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the table's input and output record buffers are comparable using compare_records(TABLE*).  <a href="#a0dbd8d598f8fa342edbcb0d8c8a078d7">More...</a><br /></td></tr>
<tr class="separator:a0dbd8d598f8fa342edbcb0d8c8a078d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a846e83bdac324ac4ee95d47c7efd98b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#a846e83bdac324ac4ee95d47c7efd98b8">compare_records</a> (const <a class="el" href="structTABLE.html">TABLE</a> *table)</td></tr>
<tr class="memdesc:a846e83bdac324ac4ee95d47c7efd98b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares the input and outbut record buffers of the table to see if a row has changed.  <a href="#a846e83bdac324ac4ee95d47c7efd98b8">More...</a><br /></td></tr>
<tr class="separator:a846e83bdac324ac4ee95d47c7efd98b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e9f884816e8545d6efd88837e94565"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#a28e9f884816e8545d6efd88837e94565">check_constant_expressions</a> (const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> *&gt; &amp;values)</td></tr>
<tr class="memdesc:a28e9f884816e8545d6efd88837e94565"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if all expressions in list are constant expressions.  <a href="#a28e9f884816e8545d6efd88837e94565">More...</a><br /></td></tr>
<tr class="separator:a28e9f884816e8545d6efd88837e94565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1584a123ffcea15586475ac97f48ad"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#abb1584a123ffcea15586475ac97f48ad">get_table_map</a> (const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> *&gt; &amp;<a class="el" href="structitems.html">items</a>)</td></tr>
<tr class="separator:abb1584a123ffcea15586475ac97f48ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad787afdca46a80dd8476afc99214f963"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#ad787afdca46a80dd8476afc99214f963">unsafe_key_update</a> (<a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *leaves, <a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> tables_for_update)</td></tr>
<tr class="memdesc:ad787afdca46a80dd8476afc99214f963"><td class="mdescLeft">&#160;</td><td class="mdescRight">If one row is updated through two different aliases and the first update physically moves the row, the second update will error because the row is no longer located where expected.  <a href="#ad787afdca46a80dd8476afc99214f963">More...</a><br /></td></tr>
<tr class="separator:ad787afdca46a80dd8476afc99214f963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87e0aca37eee1f23be96f1ecc6201467"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#a87e0aca37eee1f23be96f1ecc6201467">has_json_columns</a> (const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> *&gt; &amp;<a class="el" href="structitems.html">items</a>)</td></tr>
<tr class="memdesc:a87e0aca37eee1f23be96f1ecc6201467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a list of Items contains an Item whose type is JSON.  <a href="#a87e0aca37eee1f23be96f1ecc6201467">More...</a><br /></td></tr>
<tr class="separator:a87e0aca37eee1f23be96f1ecc6201467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae37e788b4f8bbf6168a8f0e72545d68c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#ae37e788b4f8bbf6168a8f0e72545d68c">should_switch_to_multi_table_if_subqueries</a> (const <a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="classSELECT__LEX.html">SELECT_LEX</a> *select, const <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *table_list)</td></tr>
<tr class="memdesc:ae37e788b4f8bbf6168a8f0e72545d68c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decides if a single-table UPDATE/DELETE statement should switch to the multi-table code path, if there are subqueries which might benefit from semijoin or subquery materialization, and if no feature specific to the single-table path are used.  <a href="#ae37e788b4f8bbf6168a8f0e72545d68c">More...</a><br /></td></tr>
<tr class="separator:ae37e788b4f8bbf6168a8f0e72545d68c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46a42eebb0eba7e7249ff8c28a520c10"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__update_8cc.html#a46a42eebb0eba7e7249ff8c28a520c10">safe_update_on_fly</a> (<a class="el" href="classJOIN__TAB.html">JOIN_TAB</a> *join_tab, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *table_ref, <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *all_tables)</td></tr>
<tr class="memdesc:a46a42eebb0eba7e7249ff8c28a520c10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if table is safe to update on the fly.  <a href="#a46a42eebb0eba7e7249ff8c28a520c10">More...</a><br /></td></tr>
<tr class="separator:a46a42eebb0eba7e7249ff8c28a520c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a28e9f884816e8545d6efd88837e94565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e9f884816e8545d6efd88837e94565">&#9670;&nbsp;</a></span>check_constant_expressions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> check_constant_expressions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> *&gt; &amp;&#160;</td>
          <td class="paramname"><em>values</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if all expressions in list are constant expressions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">values</td><td>List of expressions</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Only constant expressions </td></tr>
    <tr><td class="paramname">false</td><td>At least one non-constant expression </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a846e83bdac324ac4ee95d47c7efd98b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a846e83bdac324ac4ee95d47c7efd98b8">&#9670;&nbsp;</a></span>compare_records()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> compare_records </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares the input and outbut record buffers of the table to see if a row has changed. </p>
<p>The algorithm iterates over updated columns and if they are nullable compares NULL bits in the buffer before comparing actual data. Special care must be taken to compare only the relevant NULL bits and mask out all others as they may be undefined. The storage engine will not and should not touch them.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>The table to evaluate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if row has changed. </dd>
<dd>
false otherwise. </dd></dl>

</div>
</div>
<a id="abb1584a123ffcea15586475ac97f48ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb1584a123ffcea15586475ac97f48ad">&#9670;&nbsp;</a></span>get_table_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> get_table_map </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> *&gt; &amp;&#160;</td>
          <td class="paramname"><em>items</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a87e0aca37eee1f23be96f1ecc6201467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87e0aca37eee1f23be96f1ecc6201467">&#9670;&nbsp;</a></span>has_json_columns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> has_json_columns </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> *&gt; &amp;&#160;</td>
          <td class="paramname"><em>items</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a list of Items contains an Item whose type is JSON. </p>

</div>
</div>
<a id="a8a7e9518fe8a0a2c8f663b4718595191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a7e9518fe8a0a2c8f663b4718595191">&#9670;&nbsp;</a></span>prepare_partial_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> prepare_partial_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOpt__trace__context.html">Opt_trace_context</a> *&#160;</td>
          <td class="paramname"><em>trace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmem__root__deque.html">mem_root_deque</a>&lt; <a class="el" href="classItem.html">Item</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mark the columns that can possibly be updated in-place using partial update. </p>
<p>Only JSON columns can be updated in-place, and only if all the updates of the column are on the form </p><pre class="fragment">json_col = JSON_SET(json_col, ...)

json_col = JSON_REPLACE(json_col, ...)

json_col = JSON_REMOVE(json_col, ...)
</pre><p>Even though a column is marked for partial update, it is not necessarily updated as a partial update during execution. It depends on the actual data in the column if it is possible to do it as a partial update. Also, for multi-table updates, it is only possible to perform partial updates in the first table of the join operation, and it is not determined until later (in Query_result_update::optimize()) which table it is.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trace</td><td>the optimizer trace context </td></tr>
    <tr><td class="paramname">fields</td><td>the fields that are updated by the update statement </td></tr>
    <tr><td class="paramname">values</td><td>the values they are updated to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false on success, true on error </dd></dl>

</div>
</div>
<a id="a0dbd8d598f8fa342edbcb0d8c8a078d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dbd8d598f8fa342edbcb0d8c8a078d7">&#9670;&nbsp;</a></span>records_are_comparable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> records_are_comparable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if the table's input and output record buffers are comparable using compare_records(TABLE*). </p>

</div>
</div>
<a id="a46a42eebb0eba7e7249ff8c28a520c10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46a42eebb0eba7e7249ff8c28a520c10">&#9670;&nbsp;</a></span>safe_update_on_fly()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> safe_update_on_fly </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJOIN__TAB.html">JOIN_TAB</a> *&#160;</td>
          <td class="paramname"><em>join_tab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>table_ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>all_tables</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if table is safe to update on the fly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">join_tab</td><td>Table (always the first one in the JOIN plan) </td></tr>
    <tr><td class="paramname">table_ref</td><td>Table reference for 'join_tab' </td></tr>
    <tr><td class="paramname">all_tables</td><td>List of tables (updated or not)</td></tr>
  </table>
  </dd>
</dl>
<p>We can update the first table in join on the fly if we know that:</p><ul>
<li>a row in this table will never be read twice (that depends, among other things, on the access method), and</li>
<li>updating this row won't influence the selection of rows in next tables.</li>
</ul>
<p>This function gets information about fields to be updated from the TABLE::write_set bitmap. And it gets information about which fields influence the selection of rows in next tables, from the TABLE::tmp_set bitmap.</p>
<dl class="section return"><dt>Returns</dt><dd>true if it is safe to update on the fly. </dd></dl>

</div>
</div>
<a id="ae37e788b4f8bbf6168a8f0e72545d68c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae37e788b4f8bbf6168a8f0e72545d68c">&#9670;&nbsp;</a></span>should_switch_to_multi_table_if_subqueries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> should_switch_to_multi_table_if_subqueries </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classSELECT__LEX.html">SELECT_LEX</a> *&#160;</td>
          <td class="paramname"><em>select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>table_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decides if a single-table UPDATE/DELETE statement should switch to the multi-table code path, if there are subqueries which might benefit from semijoin or subquery materialization, and if no feature specific to the single-table path are used. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handler </td></tr>
    <tr><td class="paramname">select</td><td>Query block </td></tr>
    <tr><td class="paramname">table_list</td><td>Table to modify </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if we should switch </dd></dl>

</div>
</div>
<a id="ad787afdca46a80dd8476afc99214f963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad787afdca46a80dd8476afc99214f963">&#9670;&nbsp;</a></span>unsafe_key_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> unsafe_key_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTABLE__LIST.html">TABLE_LIST</a> *&#160;</td>
          <td class="paramname"><em>leaves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td>
          <td class="paramname"><em>tables_for_update</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If one row is updated through two different aliases and the first update physically moves the row, the second update will error because the row is no longer located where expected. </p>
<p>This function checks if the multiple-table update is about to do that and if so returns with an error.</p>
<p>The following update operations physically moves rows: 1) Update of a column in a clustered primary key 2) Update of a column used to calculate which partition the row belongs to</p>
<p>This function returns with an error if both of the following are true:</p>
<p>a) A table in the multiple-table update statement is updated through multiple aliases (including views) b) At least one of the updates on the table from a) may physically moves the row. Note: Updating a column used to calculate which partition a row belongs to does not necessarily mean that the row is moved. The new value may or may not belong to the same partition.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">leaves</td><td>First leaf table </td></tr>
    <tr><td class="paramname">tables_for_update</td><td>Map of tables that are updated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the update is unsafe, in which case an error message is also set, false otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li><li class="navelem"><a class="el" href="sql__update_8cc.html">sql_update.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
