<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: regexp::Regexp_engine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classregexp_1_1Regexp__engine.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classregexp_1_1Regexp__engine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">regexp::Regexp_engine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class exposes high-level regular expression operations to the facade.  
 <a href="classregexp_1_1Regexp__engine.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="regexp__engine_8h_source.html">regexp_engine.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9dab3032aff6d73fe0f284f2799a8aa4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a9dab3032aff6d73fe0f284f2799a8aa4">Regexp_engine</a> (const std::u16string &amp;pattern, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="classregexp_1_1Regexp__engine.html#ac807d874c08a80300d0b7634530c537b">flags</a>, int stack_limit, int time_limit)</td></tr>
<tr class="memdesc:a9dab3032aff6d73fe0f284f2799a8aa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compiles the URegularExpression object.  <a href="#a9dab3032aff6d73fe0f284f2799a8aa4">More...</a><br /></td></tr>
<tr class="separator:a9dab3032aff6d73fe0f284f2799a8aa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac807d874c08a80300d0b7634530c537b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#ac807d874c08a80300d0b7634530c537b">flags</a> ()</td></tr>
<tr class="separator:ac807d874c08a80300d0b7634530c537b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c83bfc959d7efa4aaa17724e9a46d5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a7c83bfc959d7efa4aaa17724e9a46d5a">Reset</a> (const std::u16string &amp;subject)</td></tr>
<tr class="memdesc:a7c83bfc959d7efa4aaa17724e9a46d5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the engine with a new subject string.  <a href="#a7c83bfc959d7efa4aaa17724e9a46d5a">More...</a><br /></td></tr>
<tr class="separator:a7c83bfc959d7efa4aaa17724e9a46d5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af561e205df666d4f930fac6edd3b59c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#af561e205df666d4f930fac6edd3b59c1">Matches</a> (int <a class="el" href="routing__plugin_8cc.html#aee70c8416f705726100824ba89f1e090">start</a>, int occurrence)</td></tr>
<tr class="memdesc:af561e205df666d4f930fac6edd3b59c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to find match number <code>occurrence</code> in the string, starting on <code>start</code>.  <a href="#af561e205df666d4f930fac6edd3b59c1">More...</a><br /></td></tr>
<tr class="separator:af561e205df666d4f930fac6edd3b59c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e0af1ce29c31a7e25955a8bf242af9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a29e0af1ce29c31a7e25955a8bf242af9">StartOfMatch</a> ()</td></tr>
<tr class="memdesc:a29e0af1ce29c31a7e25955a8bf242af9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the start position in the input string of the string where Matches() found a match.  <a href="#a29e0af1ce29c31a7e25955a8bf242af9">More...</a><br /></td></tr>
<tr class="separator:a29e0af1ce29c31a7e25955a8bf242af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac912bc263bbc42d925d4f38208d81a18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#ac912bc263bbc42d925d4f38208d81a18">EndOfMatch</a> ()</td></tr>
<tr class="memdesc:ac912bc263bbc42d925d4f38208d81a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the position in the input string right after the end of the text where Matches() found a match.  <a href="#ac912bc263bbc42d925d4f38208d81a18">More...</a><br /></td></tr>
<tr class="separator:ac912bc263bbc42d925d4f38208d81a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e34ca04ceed6fb78aff984e6c3e5212"><td class="memItemLeft" align="right" valign="top">const std::u16string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a2e34ca04ceed6fb78aff984e6c3e5212">Replace</a> (const std::u16string &amp;replacement, int <a class="el" href="routing__plugin_8cc.html#aee70c8416f705726100824ba89f1e090">start</a>, int occurrence)</td></tr>
<tr class="memdesc:a2e34ca04ceed6fb78aff984e6c3e5212"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterates over the subject string, replacing matches.  <a href="#a2e34ca04ceed6fb78aff984e6c3e5212">More...</a><br /></td></tr>
<tr class="separator:a2e34ca04ceed6fb78aff984e6c3e5212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b915e1b5e5b05de5a309c0cac01506b"><td class="memItemLeft" align="right" valign="top">std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a1b915e1b5e5b05de5a309c0cac01506b">MatchedSubstring</a> ()</td></tr>
<tr class="memdesc:a1b915e1b5e5b05de5a309c0cac01506b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The start of the match and its length.  <a href="#a1b915e1b5e5b05de5a309c0cac01506b">More...</a><br /></td></tr>
<tr class="separator:a1b915e1b5e5b05de5a309c0cac01506b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b5bdf879474450fb1e48b1890dcc3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a41b5bdf879474450fb1e48b1890dcc3e">IsError</a> () const</td></tr>
<tr class="separator:a41b5bdf879474450fb1e48b1890dcc3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3465d0a12c5ad360e3d0ff7479a569f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#ad3465d0a12c5ad360e3d0ff7479a569f">CheckError</a> () const</td></tr>
<tr class="separator:ad3465d0a12c5ad360e3d0ff7479a569f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50abe2c89a7d0a649e7ff066899a6e34"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a50abe2c89a7d0a649e7ff066899a6e34">~Regexp_engine</a> ()</td></tr>
<tr class="separator:a50abe2c89a7d0a649e7ff066899a6e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee8013373c1ea7c1c72415c9a225a140"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#aee8013373c1ea7c1c72415c9a225a140">HardLimit</a> ()</td></tr>
<tr class="memdesc:aee8013373c1ea7c1c72415c9a225a140"><td class="mdescLeft">&#160;</td><td class="mdescRight">The hard limit for growing the replace buffer.  <a href="#aee8013373c1ea7c1c72415c9a225a140">More...</a><br /></td></tr>
<tr class="separator:aee8013373c1ea7c1c72415c9a225a140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1200cc999bf7bb79effdcf2baa73c5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#ae1200cc999bf7bb79effdcf2baa73c5d">AppendHead</a> (size_t size)</td></tr>
<tr class="memdesc:ae1200cc999bf7bb79effdcf2baa73c5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills in the prefix in case we are doing a replace operation starting on a non-first occurrence of the pattern, or a non-first start position.  <a href="#ae1200cc999bf7bb79effdcf2baa73c5d">More...</a><br /></td></tr>
<tr class="separator:ae1200cc999bf7bb79effdcf2baa73c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0ee963b1bcb3fe36ef3f8ff85e9dbcc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#af0ee963b1bcb3fe36ef3f8ff85e9dbcc">AppendReplacement</a> (const std::u16string &amp;replacement)</td></tr>
<tr class="memdesc:af0ee963b1bcb3fe36ef3f8ff85e9dbcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to write the replacement, growing the buffer if needed.  <a href="#af0ee963b1bcb3fe36ef3f8ff85e9dbcc">More...</a><br /></td></tr>
<tr class="separator:af0ee963b1bcb3fe36ef3f8ff85e9dbcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21c125f7143f599141b6c29969595bf8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a21c125f7143f599141b6c29969595bf8">AppendTail</a> ()</td></tr>
<tr class="memdesc:a21c125f7143f599141b6c29969595bf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends the trailing segment after the last match to the subject string,.  <a href="#a21c125f7143f599141b6c29969595bf8">More...</a><br /></td></tr>
<tr class="separator:a21c125f7143f599141b6c29969595bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0d9138de6fca3bb4318619fcfe5bf64"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#ae0d9138de6fca3bb4318619fcfe5bf64">SpareCapacity</a> () const</td></tr>
<tr class="memdesc:ae0d9138de6fca3bb4318619fcfe5bf64"><td class="mdescLeft">&#160;</td><td class="mdescRight">The spare capacity in the replacement buffer, given in code points.  <a href="#ae0d9138de6fca3bb4318619fcfe5bf64">More...</a><br /></td></tr>
<tr class="separator:ae0d9138de6fca3bb4318619fcfe5bf64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9a493e12460728b9aec13bba039eda2b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a9a493e12460728b9aec13bba039eda2b">TryToAppendReplacement</a> (const std::u16string &amp;replacement)</td></tr>
<tr class="memdesc:a9a493e12460728b9aec13bba039eda2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preflight function: If the buffer capacity is adequate, the replacement is appended to the buffer, otherwise nothing is written.  <a href="#a9a493e12460728b9aec13bba039eda2b">More...</a><br /></td></tr>
<tr class="separator:a9a493e12460728b9aec13bba039eda2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acca1d6fa503bdbc178f87d3b58c7aa2c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#acca1d6fa503bdbc178f87d3b58c7aa2c">TryToAppendTail</a> ()</td></tr>
<tr class="memdesc:acca1d6fa503bdbc178f87d3b58c7aa2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to append the part of the subject string after the last match to the buffer.  <a href="#acca1d6fa503bdbc178f87d3b58c7aa2c">More...</a><br /></td></tr>
<tr class="separator:acca1d6fa503bdbc178f87d3b58c7aa2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7f84e0b65237d862c0416d014a3d575a"><td class="memItemLeft" align="right" valign="top">URegularExpression *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a7f84e0b65237d862c0416d014a3d575a">m_re</a></td></tr>
<tr class="memdesc:a7f84e0b65237d862c0416d014a3d575a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our handle to ICU's compiled regular expression, owned by instances of this class.  <a href="#a7f84e0b65237d862c0416d014a3d575a">More...</a><br /></td></tr>
<tr class="separator:a7f84e0b65237d862c0416d014a3d575a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b777dad562fd626bc4313da9599e5f3"><td class="memItemLeft" align="right" valign="top">UErrorCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a1b777dad562fd626bc4313da9599e5f3">m_error_code</a> = U_ZERO_ERROR</td></tr>
<tr class="separator:a1b777dad562fd626bc4313da9599e5f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c9ffde948dfe5a97d935c04b15006a6"><td class="memItemLeft" align="right" valign="top">std::u16string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a7c9ffde948dfe5a97d935c04b15006a6">m_current_subject</a></td></tr>
<tr class="separator:a7c9ffde948dfe5a97d935c04b15006a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5de64ccf186d8a1200ba02ffefceab0"><td class="memItemLeft" align="right" valign="top">std::u16string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#ae5de64ccf186d8a1200ba02ffefceab0">m_replace_buffer</a></td></tr>
<tr class="separator:ae5de64ccf186d8a1200ba02ffefceab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3555c041391261b63b2b6ad4bcbc5230"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#a3555c041391261b63b2b6ad4bcbc5230">m_replace_buffer_pos</a> = 0</td></tr>
<tr class="memdesc:a3555c041391261b63b2b6ad4bcbc5230"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is always the next index in m_replace_buffer where ICU can write data.  <a href="#a3555c041391261b63b2b6ad4bcbc5230">More...</a><br /></td></tr>
<tr class="separator:a3555c041391261b63b2b6ad4bcbc5230"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ab88dcbb7e5ea76b50d64bfa403457c48"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classregexp_1_1Regexp__engine.html#ab88dcbb7e5ea76b50d64bfa403457c48">regexp_engine_unittest::Mock_regexp_engine</a></td></tr>
<tr class="separator:ab88dcbb7e5ea76b50d64bfa403457c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class exposes high-level regular expression operations to the facade. </p>
<p>It implements the algorithm for search-and-replace and the various matching options.</p>
<p>A buffer is used for search-and-replace, whose initial size is that of the subject string. The buffer uses ICU preflight features to probe the required buffer size within each append operation, and the buffer can grow up until max_allowed_packet, at which case and error will be thrown. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9dab3032aff6d73fe0f284f2799a8aa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dab3032aff6d73fe0f284f2799a8aa4">&#9670;&nbsp;</a></span>Regexp_engine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">regexp::Regexp_engine::Regexp_engine </td>
          <td>(</td>
          <td class="paramtype">const std::u16string &amp;&#160;</td>
          <td class="paramname"><em>pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stack_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>time_limit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compiles the URegularExpression object. </p>
<p>If compilation fails, my_error() is called and the IsError() returns true. In this case, all subsequent operations will be no-ops, reporting failure. This follows ICU's chaining conventions, see <a href="http://icu-project.org/apiref/icu4c/utypes_8h.html">http://icu-project.org/apiref/icu4c/utypes_8h.html</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pattern</td><td>The pattern string in ICU's character set.</td></tr>
    <tr><td class="paramname">flags</td><td>ICU flags.</td></tr>
    <tr><td class="paramname">stack_limit</td><td>Sets the amount of heap storage, in bytes, that the match backtracking stack is allowed to allocate.</td></tr>
    <tr><td class="paramname">time_limit</td><td>Gets set on the URegularExpression. Please refer to the ICU API docs for the definition of time limit. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a50abe2c89a7d0a649e7ff066899a6e34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50abe2c89a7d0a649e7ff066899a6e34">&#9670;&nbsp;</a></span>~Regexp_engine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual regexp::Regexp_engine::~Regexp_engine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae1200cc999bf7bb79effdcf2baa73c5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1200cc999bf7bb79effdcf2baa73c5d">&#9670;&nbsp;</a></span>AppendHead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regexp::Regexp_engine::AppendHead </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fills in the prefix in case we are doing a replace operation starting on a non-first occurrence of the pattern, or a non-first start position. </p>
<p>AppendReplacement() will fill in the section starting after the previous match or start position, so a prefix must be appended first.</p>
<p>The part we have to worry about here, the part that ICU doesn't add for us is, is if the search didn't start on the first character or first match for the regular expression. It's the longest such prefix that we have to copy ourselves. </p>

</div>
</div>
<a id="af0ee963b1bcb3fe36ef3f8ff85e9dbcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0ee963b1bcb3fe36ef3f8ff85e9dbcc">&#9670;&nbsp;</a></span>AppendReplacement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regexp::Regexp_engine::AppendReplacement </td>
          <td>(</td>
          <td class="paramtype">const std::u16string &amp;&#160;</td>
          <td class="paramname"><em>replacement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to write the replacement, growing the buffer if needed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replacement</td><td>The replacement string. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21c125f7143f599141b6c29969595bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21c125f7143f599141b6c29969595bf8">&#9670;&nbsp;</a></span>AppendTail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regexp::Regexp_engine::AppendTail </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Appends the trailing segment after the last match to the subject string,. </p>

</div>
</div>
<a id="ad3465d0a12c5ad360e3d0ff7479a569f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3465d0a12c5ad360e3d0ff7479a569f">&#9670;&nbsp;</a></span>CheckError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> regexp::Regexp_engine::CheckError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac912bc263bbc42d925d4f38208d81a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac912bc263bbc42d925d4f38208d81a18">&#9670;&nbsp;</a></span>EndOfMatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int regexp::Regexp_engine::EndOfMatch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the position in the input string right after the end of the text where Matches() found a match. </p>

</div>
</div>
<a id="ac807d874c08a80300d0b7634530c537b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac807d874c08a80300d0b7634530c537b">&#9670;&nbsp;</a></span>flags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> regexp::Regexp_engine::flags </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aee8013373c1ea7c1c72415c9a225a140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee8013373c1ea7c1c72415c9a225a140">&#9670;&nbsp;</a></span>HardLimit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t regexp::Regexp_engine::HardLimit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The hard limit for growing the replace buffer. </p>
<p>The buffer cannot grow beyond this size, and an error will be thrown if the limit is reached. </p>

</div>
</div>
<a id="a41b5bdf879474450fb1e48b1890dcc3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41b5bdf879474450fb1e48b1890dcc3e">&#9670;&nbsp;</a></span>IsError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> regexp::Regexp_engine::IsError </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1b915e1b5e5b05de5a309c0cac01506b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b915e1b5e5b05de5a309c0cac01506b">&#9670;&nbsp;</a></span>MatchedSubstring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; int, int &gt; regexp::Regexp_engine::MatchedSubstring </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The start of the match and its length. </p>
<dl class="section return"><dt>Returns</dt><dd>The index of the first code point of the match, and the length of the same. </dd></dl>

</div>
</div>
<a id="af561e205df666d4f930fac6edd3b59c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af561e205df666d4f930fac6edd3b59c1">&#9670;&nbsp;</a></span>Matches()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> regexp::Regexp_engine::Matches </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>occurrence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to find match number <code>occurrence</code> in the string, starting on <code>start</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>Start position, 0-based. </td></tr>
    <tr><td class="paramname">occurrence</td><td>Which occurrence to replace. If zero, replace all occurrences. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e34ca04ceed6fb78aff984e6c3e5212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e34ca04ceed6fb78aff984e6c3e5212">&#9670;&nbsp;</a></span>Replace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::u16string &amp; regexp::Regexp_engine::Replace </td>
          <td>(</td>
          <td class="paramtype">const std::u16string &amp;&#160;</td>
          <td class="paramname"><em>replacement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>occurrence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterates over the subject string, replacing matches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">replacement</td><td>The string to replace matches with. </td></tr>
    <tr><td class="paramname">start</td><td>Start position, 0-based. </td></tr>
    <tr><td class="paramname">occurrence</td><td>Which occurrence to replace. If zero, replace all occurrences.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to a the result of the operation. It is guaranteed to stay intact until a call is made to Reset(). </dd></dl>

</div>
</div>
<a id="a7c83bfc959d7efa4aaa17724e9a46d5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c83bfc959d7efa4aaa17724e9a46d5a">&#9670;&nbsp;</a></span>Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void regexp::Regexp_engine::Reset </td>
          <td>(</td>
          <td class="paramtype">const std::u16string &amp;&#160;</td>
          <td class="paramname"><em>subject</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the engine with a new subject string. </p>
<p>This also clears the replacement buffer, see Replace().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subject</td><td>The new string to match the regular expression against. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae0d9138de6fca3bb4318619fcfe5bf64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0d9138de6fca3bb4318619fcfe5bf64">&#9670;&nbsp;</a></span>SpareCapacity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int regexp::Regexp_engine::SpareCapacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The spare capacity in the replacement buffer, given in code points. </p>
<p>ICU communicates via a <code>capacity</code> variable, but we like to use an absolute position instead, and we want to keep a single source of truth, so we calculate it when needed and assert that the number is correct. </p>

</div>
</div>
<a id="a29e0af1ce29c31a7e25955a8bf242af9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29e0af1ce29c31a7e25955a8bf242af9">&#9670;&nbsp;</a></span>StartOfMatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int regexp::Regexp_engine::StartOfMatch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the start position in the input string of the string where Matches() found a match. </p>

</div>
</div>
<a id="a9a493e12460728b9aec13bba039eda2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a493e12460728b9aec13bba039eda2b">&#9670;&nbsp;</a></span>TryToAppendReplacement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int regexp::Regexp_engine::TryToAppendReplacement </td>
          <td>(</td>
          <td class="paramtype">const std::u16string &amp;&#160;</td>
          <td class="paramname"><em>replacement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Preflight function: If the buffer capacity is adequate, the replacement is appended to the buffer, otherwise nothing is written. </p>
<p>Either way, the replacement's full size is returned. </p>

</div>
</div>
<a id="acca1d6fa503bdbc178f87d3b58c7aa2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acca1d6fa503bdbc178f87d3b58c7aa2c">&#9670;&nbsp;</a></span>TryToAppendTail()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int regexp::Regexp_engine::TryToAppendTail </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to append the part of the subject string after the last match to the buffer. </p>
<p>This is a preflight function: If the buffer capacity is adequate, the tail is appended to the buffer, otherwise nothing is written. Either way, the tail's full size is returned. </p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="ab88dcbb7e5ea76b50d64bfa403457c48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab88dcbb7e5ea76b50d64bfa403457c48">&#9670;&nbsp;</a></span>regexp_engine_unittest::Mock_regexp_engine</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class regexp_engine_unittest::Mock_regexp_engine</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7c9ffde948dfe5a97d935c04b15006a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c9ffde948dfe5a97d935c04b15006a6">&#9670;&nbsp;</a></span>m_current_subject</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::u16string regexp::Regexp_engine::m_current_subject</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1b777dad562fd626bc4313da9599e5f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b777dad562fd626bc4313da9599e5f3">&#9670;&nbsp;</a></span>m_error_code</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UErrorCode regexp::Regexp_engine::m_error_code = U_ZERO_ERROR</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7f84e0b65237d862c0416d014a3d575a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f84e0b65237d862c0416d014a3d575a">&#9670;&nbsp;</a></span>m_re</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">URegularExpression* regexp::Regexp_engine::m_re</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Our handle to ICU's compiled regular expression, owned by instances of this class. </p>
<p>URegularExpression is a C struct, but this class follows RAII and initializes this pointer in the constructor and cleans it up in the destructor. </p>

</div>
</div>
<a id="ae5de64ccf186d8a1200ba02ffefceab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5de64ccf186d8a1200ba02ffefceab0">&#9670;&nbsp;</a></span>m_replace_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::u16string regexp::Regexp_engine::m_replace_buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3555c041391261b63b2b6ad4bcbc5230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3555c041391261b63b2b6ad4bcbc5230">&#9670;&nbsp;</a></span>m_replace_buffer_pos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int regexp::Regexp_engine::m_replace_buffer_pos = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is always the next index in m_replace_buffer where ICU can write data. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/regexp/<a class="el" href="regexp__engine_8h_source.html">regexp_engine.h</a></li>
<li>sql/regexp/<a class="el" href="regexp__engine_8cc.html">regexp_engine.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceregexp.html">regexp</a></li><li class="navelem"><a class="el" href="classregexp_1_1Regexp__engine.html">Regexp_engine</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
