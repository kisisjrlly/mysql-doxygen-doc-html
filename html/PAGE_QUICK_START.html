<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Writing a Test Case: Quick Start</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('PAGE_QUICK_START.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Writing a Test Case: Quick Start </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The basic principle of test case evaluation is that output resulting from running a test case is compared to the expected result.</p>
<p>This is just a <b>diff</b> comparison between the output and an expected-result file that the test writer provides. This simplistic method of comparison does not by itself provide any way to handle variation in the output that may occur when a test is run at different times. However, the test language provides commands for postprocessing result output before the comparison occurs. This enables you to manage certain forms of expected variation.</p>
<p>Use the following procedure to write a new test case. In the examples, <b><em>test_name</em></b> represents the name of the test case. It is assumed here that you'll be using a development source tree, so that when you create a new test case, you can commit the files associated with it to the source repository for others to use.</p>
<ol>
<li>
<p class="startli">Change location to the test directory <b>mysql-<em>version</em>/mysql-test</b>:</p>
<pre class="fragment">shell&gt; cd mysql-version/mysql-test</pre><p><b>mysql-<em>version</em></b> represents the root directory of your source tree. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Create the test case in a file <b>t/<em>test_name</em>.test</b>. You can do this with any text editor. For details of the language used for writing <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> test cases, see <a class="el" href="PAGE_MYSQLTEST_LANGUAGE_REFERENCE.html">mysqltest Language Reference</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Create an empty result file:</p>
<pre class="fragment">shell&gt; touch r/test_name.result</pre> <p class="endli"></p>
</li>
<li>
<p class="startli">Run the test:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl test_name</pre> <p class="endli"></p>
</li>
<li>
<p class="startli">Assuming that the test case produces output, it should fail because the output does not match the result file (which is empty at this point). The failure results in creation of a reject file named <b>mysql-test/var/log/<em>test_name</em>.reject</b>. Examine this file. If the reject file appears to contain the output that you expect the test case to produce, copy its content to the result file:</p>
<pre class="fragment">shell&gt; cp mysql-test/var/log/test_name.reject r/test_name.result</pre><p>Another way to create the result file is by invoking <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> with the <b><code>--record</code></b> option to record the test output in the result file:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl --record test_name</pre> <p class="endli"></p>
</li>
<li>
<p class="startli">Run the test again. This time it should succeed:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl test_name</pre><p>You can also run the newly created test case as part of the entire suite:</p>
<pre class="fragment">shell&gt; ./mysql-test-run.pl</pre>  </li>
</ol>
<p>It is also possible to invoke the <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> program directly. If the test case file refers to environment variables, you will need to define those variables in your environment first. For more information about the <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> program, see <a class="el" href="PAGE_MYSQLTEST.html">mysqltest â€” Program to Run Test Cases</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="PAGE_TESTING_TOOLS.html">Testing Tools</a></li><li class="navelem"><a class="el" href="PAGE_MYSQL_TEST_RUN.html">The MySQL Test Framework</a></li><li class="navelem"><a class="el" href="PAGE_WRITING_TESTCASES.html">Writing Test Cases</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
