<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: POSITION Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structPOSITION.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structPOSITION-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">POSITION Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A position of table within a join order.  
 <a href="structPOSITION.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="sql__select_8h_source.html">sql_select.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a83d1d2edcbb59d8fba1545cf7fdd2ca6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a83d1d2edcbb59d8fba1545cf7fdd2ca6">no_semijoin</a> ()</td></tr>
<tr class="memdesc:a83d1d2edcbb59d8fba1545cf7fdd2ca6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Even if the query has no semijoin, two sj-related members are read and must thus have been set, by this function.  <a href="#a83d1d2edcbb59d8fba1545cf7fdd2ca6">More...</a><br /></td></tr>
<tr class="separator:a83d1d2edcbb59d8fba1545cf7fdd2ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c8f96a5bd78bb131b769402bbc7e236"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a5c8f96a5bd78bb131b769402bbc7e236">set_prefix_cost</a> (double cost, double rowcount)</td></tr>
<tr class="memdesc:a5c8f96a5bd78bb131b769402bbc7e236"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set complete estimated cost and produced rowcount for the prefix of tables up to and including this table, in the join plan.  <a href="#a5c8f96a5bd78bb131b769402bbc7e236">More...</a><br /></td></tr>
<tr class="separator:a5c8f96a5bd78bb131b769402bbc7e236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99bbfd6be4d8364487a0679c94c5610e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a99bbfd6be4d8364487a0679c94c5610e">set_prefix_join_cost</a> (<a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> idx, const <a class="el" href="classCost__model__server.html">Cost_model_server</a> *cm)</td></tr>
<tr class="memdesc:a99bbfd6be4d8364487a0679c94c5610e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set complete estimated cost and produced rowcount for the prefix of tables up to and including this table, calculated from the cost of the previous stage, the fanout of the current stage and the cost to process a row at the current stage.  <a href="#a99bbfd6be4d8364487a0679c94c5610e">More...</a><br /></td></tr>
<tr class="separator:a99bbfd6be4d8364487a0679c94c5610e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:acb6f63a56ca8fe8acf3535f8e78aa1cb"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#acb6f63a56ca8fe8acf3535f8e78aa1cb">rows_fetched</a></td></tr>
<tr class="memdesc:acb6f63a56ca8fe8acf3535f8e78aa1cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of rows that will be fetched by the chosen access method per each row combination of previous tables.  <a href="#acb6f63a56ca8fe8acf3535f8e78aa1cb">More...</a><br /></td></tr>
<tr class="separator:acb6f63a56ca8fe8acf3535f8e78aa1cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9276cebf3036777645d137e977df0b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a1d9276cebf3036777645d137e977df0b">read_cost</a></td></tr>
<tr class="memdesc:a1d9276cebf3036777645d137e977df0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cost of accessing the table in course of the entire complete join execution, i.e.  <a href="#a1d9276cebf3036777645d137e977df0b">More...</a><br /></td></tr>
<tr class="separator:a1d9276cebf3036777645d137e977df0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13baae0bab02b149f00fb6c93affb278"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a13baae0bab02b149f00fb6c93affb278">filter_effect</a></td></tr>
<tr class="memdesc:a13baae0bab02b149f00fb6c93affb278"><td class="mdescLeft">&#160;</td><td class="mdescRight">The fraction of the 'rows_fetched' rows that will pass the table conditions that were NOT used by the access method.  <a href="#a13baae0bab02b149f00fb6c93affb278">More...</a><br /></td></tr>
<tr class="separator:a13baae0bab02b149f00fb6c93affb278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af72ad8da8d67dd94d20e251d8665bc03"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#af72ad8da8d67dd94d20e251d8665bc03">prefix_rowcount</a></td></tr>
<tr class="memdesc:af72ad8da8d67dd94d20e251d8665bc03"><td class="mdescLeft">&#160;</td><td class="mdescRight">prefix_rowcount and prefix_cost form a stack of partial join order costs and output sizes  <a href="#af72ad8da8d67dd94d20e251d8665bc03">More...</a><br /></td></tr>
<tr class="separator:af72ad8da8d67dd94d20e251d8665bc03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51c4ddd4341f4429576ed9a483957f5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#aa51c4ddd4341f4429576ed9a483957f5">prefix_cost</a></td></tr>
<tr class="separator:aa51c4ddd4341f4429576ed9a483957f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a4748a19ab2dfb60454b7599f3c98c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classJOIN__TAB.html">JOIN_TAB</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a21a4748a19ab2dfb60454b7599f3c98c">table</a></td></tr>
<tr class="separator:a21a4748a19ab2dfb60454b7599f3c98c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d7d705d6608d8090edc3a3b6b2867e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classKey__use.html">Key_use</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a8d7d705d6608d8090edc3a3b6b2867e7">key</a></td></tr>
<tr class="memdesc:a8d7d705d6608d8090edc3a3b6b2867e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">NULL - 'index' or 'range' or 'index_merge' or 'ALL' access is used.  <a href="#a8d7d705d6608d8090edc3a3b6b2867e7">More...</a><br /></td></tr>
<tr class="separator:a8d7d705d6608d8090edc3a3b6b2867e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a696c42cfd3a68fc9b4cd05dfdecd5a89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a696c42cfd3a68fc9b4cd05dfdecd5a89">ref_depend_map</a></td></tr>
<tr class="memdesc:a696c42cfd3a68fc9b4cd05dfdecd5a89"><td class="mdescLeft">&#160;</td><td class="mdescRight">If ref-based access is used: bitmap of tables this table depends on.  <a href="#a696c42cfd3a68fc9b4cd05dfdecd5a89">More...</a><br /></td></tr>
<tr class="separator:a696c42cfd3a68fc9b4cd05dfdecd5a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42884d8b0e02d796797c2e677423ae6d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a42884d8b0e02d796797c2e677423ae6d">use_join_buffer</a></td></tr>
<tr class="separator:a42884d8b0e02d796797c2e677423ae6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dfa60b279dcb54763724b521d9e8f4a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a6dfa60b279dcb54763724b521d9e8f4a">sj_strategy</a></td></tr>
<tr class="memdesc:a6dfa60b279dcb54763724b521d9e8f4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current optimization state: Semi-join strategy to be used for this and preceding join tables.  <a href="#a6dfa60b279dcb54763724b521d9e8f4a">More...</a><br /></td></tr>
<tr class="separator:a6dfa60b279dcb54763724b521d9e8f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d8e34769a1e8a832d1a651bd3fccfdf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a7d8e34769a1e8a832d1a651bd3fccfdf">n_sj_tables</a></td></tr>
<tr class="memdesc:a7d8e34769a1e8a832d1a651bd3fccfdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Valid only after fix_semijoin_strategies_for_picked_join_order() call: if sj_strategy!=SJ_OPT_NONE, this is the number of subsequent tables that are covered by the specified semi-join strategy.  <a href="#a7d8e34769a1e8a832d1a651bd3fccfdf">More...</a><br /></td></tr>
<tr class="separator:a7d8e34769a1e8a832d1a651bd3fccfdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d184938a883d7b9d83de69cc65a3081"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a8d184938a883d7b9d83de69cc65a3081">dups_producing_tables</a></td></tr>
<tr class="memdesc:a8d184938a883d7b9d83de69cc65a3081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitmap of semi-join inner tables that are in the join prefix and for which there's no provision yet for how to eliminate semi-join duplicates which they produce.  <a href="#a8d184938a883d7b9d83de69cc65a3081">More...</a><br /></td></tr>
<tr class="separator:a8d184938a883d7b9d83de69cc65a3081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10be40e136533603a32019f571b4b801"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a10be40e136533603a32019f571b4b801">first_loosescan_table</a></td></tr>
<tr class="separator:a10be40e136533603a32019f571b4b801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13f15156d6e436a302dc79e8f852503b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a13f15156d6e436a302dc79e8f852503b">loosescan_need_tables</a></td></tr>
<tr class="separator:a13f15156d6e436a302dc79e8f852503b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1af86fd1eec5fcb7909ce9965df9f9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#ac1af86fd1eec5fcb7909ce9965df9f9d">loosescan_key</a></td></tr>
<tr class="separator:ac1af86fd1eec5fcb7909ce9965df9f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c644ad469a99aaae15c53bd056ce874"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a9c644ad469a99aaae15c53bd056ce874">loosescan_parts</a></td></tr>
<tr class="separator:a9c644ad469a99aaae15c53bd056ce874"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec45d188bcdb4327dd44a49bdbc1aa71"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#aec45d188bcdb4327dd44a49bdbc1aa71">first_firstmatch_table</a></td></tr>
<tr class="separator:aec45d188bcdb4327dd44a49bdbc1aa71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca1d3e9bd29f76d2af844165de77c69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="nested__join_8h.html#a9873f827ac2be7426ae50ff2f36a57af">nested_join_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a4ca1d3e9bd29f76d2af844165de77c69">cur_embedding_map</a></td></tr>
<tr class="memdesc:a4ca1d3e9bd29f76d2af844165de77c69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value of Optimize_table_order::cur_embedding_map after this table has been added to the plan.  <a href="#a4ca1d3e9bd29f76d2af844165de77c69">More...</a><br /></td></tr>
<tr class="separator:a4ca1d3e9bd29f76d2af844165de77c69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab762040ccb819d102830d87eaadf2a93"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#ab762040ccb819d102830d87eaadf2a93">first_firstmatch_rtbl</a></td></tr>
<tr class="separator:ab762040ccb819d102830d87eaadf2a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c84b2181db994d4aa3af80303ba9c6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a7c84b2181db994d4aa3af80303ba9c6c">firstmatch_need_tables</a></td></tr>
<tr class="separator:a7c84b2181db994d4aa3af80303ba9c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ed591eaf7ab6cce96f61b29b5125e5c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a3ed591eaf7ab6cce96f61b29b5125e5c">first_dupsweedout_table</a></td></tr>
<tr class="separator:a3ed591eaf7ab6cce96f61b29b5125e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c911d788e9422a4a983946144f308e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a6c911d788e9422a4a983946144f308e8">dupsweedout_tables</a></td></tr>
<tr class="separator:a6c911d788e9422a4a983946144f308e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d59d94e289e91dba4cffc35a0ed274"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a11d59d94e289e91dba4cffc35a0ed274">sjm_scan_last_inner</a></td></tr>
<tr class="separator:a11d59d94e289e91dba4cffc35a0ed274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42768738c50d3689ac6eb62e9aa4e963"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPOSITION.html#a42768738c50d3689ac6eb62e9aa4e963">sjm_scan_need_tables</a></td></tr>
<tr class="separator:a42768738c50d3689ac6eb62e9aa4e963"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A position of table within a join order. </p>
<p>This structure is primarily used as a part of <code>join-&gt;positions</code> and <code>join-&gt;best_positions</code> arrays.</p>
<p>One POSITION element contains information about:</p><ul>
<li>Which table is accessed</li>
<li>Which access method was chosen = Its cost and #of output records</li>
<li>Semi-join strategy choice. Note that there are two different representation formats:<ol type="1">
<li>The one used during join optimization</li>
<li>The one used at plan refinement/code generation stage. We call fix_semijoin_strategies_for_picked_join_order() to switch between #1 and #2. See that function's comment for more details.</li>
</ol>
</li>
<li>Semi-join optimization state. When we're running join optimization, we main a state for every semi-join strategy which are various variables that tell us if/at which point we could consider applying the strategy. The variables are really a function of join prefix but they are too expensive to re-caclulate for every join prefix we consider, so we maintain current state in join-&gt;positions[#tables_in_prefix]. See advance_sj_state() for details.</li>
</ul>
<p>This class has to stay a POD, because it is memcpy'd in many places. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a83d1d2edcbb59d8fba1545cf7fdd2ca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d1d2edcbb59d8fba1545cf7fdd2ca6">&#9670;&nbsp;</a></span>no_semijoin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void POSITION::no_semijoin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Even if the query has no semijoin, two sj-related members are read and must thus have been set, by this function. </p>

</div>
</div>
<a id="a5c8f96a5bd78bb131b769402bbc7e236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c8f96a5bd78bb131b769402bbc7e236">&#9670;&nbsp;</a></span>set_prefix_cost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void POSITION::set_prefix_cost </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>rowcount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set complete estimated cost and produced rowcount for the prefix of tables up to and including this table, in the join plan. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cost</td><td>Estimated cost </td></tr>
    <tr><td class="paramname">rowcount</td><td>Estimated row count </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99bbfd6be4d8364487a0679c94c5610e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99bbfd6be4d8364487a0679c94c5610e">&#9670;&nbsp;</a></span>set_prefix_join_cost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void POSITION::set_prefix_join_cost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCost__model__server.html">Cost_model_server</a> *&#160;</td>
          <td class="paramname"><em>cm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set complete estimated cost and produced rowcount for the prefix of tables up to and including this table, calculated from the cost of the previous stage, the fanout of the current stage and the cost to process a row at the current stage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td>Index of position object within array, if zero there is no "previous" stage that can be added. </td></tr>
    <tr><td class="paramname">cm</td><td>Cost model that provides the actual calculation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4ca1d3e9bd29f76d2af844165de77c69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca1d3e9bd29f76d2af844165de77c69">&#9670;&nbsp;</a></span>cur_embedding_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="nested__join_8h.html#a9873f827ac2be7426ae50ff2f36a57af">nested_join_map</a> POSITION::cur_embedding_map</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Value of Optimize_table_order::cur_embedding_map after this table has been added to the plan. </p>
<p>Used to constrain FirstMatch table orders. </p>

</div>
</div>
<a id="a8d184938a883d7b9d83de69cc65a3081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d184938a883d7b9d83de69cc65a3081">&#9670;&nbsp;</a></span>dups_producing_tables</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> POSITION::dups_producing_tables</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bitmap of semi-join inner tables that are in the join prefix and for which there's no provision yet for how to eliminate semi-join duplicates which they produce. </p>

</div>
</div>
<a id="a6c911d788e9422a4a983946144f308e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c911d788e9422a4a983946144f308e8">&#9670;&nbsp;</a></span>dupsweedout_tables</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> POSITION::dupsweedout_tables</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a13baae0bab02b149f00fb6c93affb278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13baae0bab02b149f00fb6c93affb278">&#9670;&nbsp;</a></span>filter_effect</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float POSITION::filter_effect</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The fraction of the 'rows_fetched' rows that will pass the table conditions that were NOT used by the access method. </p>
<p>If, e.g.,</p>
<p>"SELECT ... WHERE t1.colx = 4 and t1.coly @&gt; 5"</p>
<p>is resolved by ref access on t1.colx, filter_effect will be the fraction of rows that will pass the "t1.coly @&gt; 5" predicate. The valid range is 0..1, where 0.0 means that no rows will pass the table conditions and 1.0 means that all rows will pass.</p>
<p>It is used to calculate how many row combinations will be joined with the next table, </p><dl class="section see"><dt>See also</dt><dd>prefix_rowcount below.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>With condition filtering enabled, it is possible to get a fanout = rows_fetched * filter_effect that is less than 1.0. Consider, e.g., a join between t1 and t2:</dd></dl>
<p>"SELECT ... WHERE t1.col1=t2.colx and t2.coly OP @&lt;something@&gt;"</p>
<p>where t1 is a prefix table and the optimizer currently calculates the cost of adding t2 to the join. Assume that the chosen access method on t2 is a 'ref' access on 'colx' that is estimated to produce 2 rows per row from t1 (i.e., rows_fetched = 2). It will in this case be perfectly fine to calculate a filtering effect &lt;0.5 (resulting in "rows_fetched * filter_effect @&lt; 1.0") from the predicate "t2.coly OP @&lt;something@&gt;". If so, the number of row combinations from (t1,t2) is lower than the prefix_rowcount of t1.</p>
<p>The above is just an example of how the fanout of a table can become less than one. It can happen for any access method. </p>

</div>
</div>
<a id="a3ed591eaf7ab6cce96f61b29b5125e5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ed591eaf7ab6cce96f61b29b5125e5c">&#9670;&nbsp;</a></span>first_dupsweedout_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> POSITION::first_dupsweedout_table</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab762040ccb819d102830d87eaadf2a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab762040ccb819d102830d87eaadf2a93">&#9670;&nbsp;</a></span>first_firstmatch_rtbl</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> POSITION::first_firstmatch_rtbl</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aec45d188bcdb4327dd44a49bdbc1aa71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec45d188bcdb4327dd44a49bdbc1aa71">&#9670;&nbsp;</a></span>first_firstmatch_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> POSITION::first_firstmatch_table</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a10be40e136533603a32019f571b4b801"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10be40e136533603a32019f571b4b801">&#9670;&nbsp;</a></span>first_loosescan_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> POSITION::first_loosescan_table</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7c84b2181db994d4aa3af80303ba9c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c84b2181db994d4aa3af80303ba9c6c">&#9670;&nbsp;</a></span>firstmatch_need_tables</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> POSITION::firstmatch_need_tables</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8d7d705d6608d8090edc3a3b6b2867e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d7d705d6608d8090edc3a3b6b2867e7">&#9670;&nbsp;</a></span>key</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classKey__use.html">Key_use</a>* POSITION::key</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NULL - 'index' or 'range' or 'index_merge' or 'ALL' access is used. </p>
<p>Other - [eq_]ref[_or_null] access is used. Pointer to {t.keypart1 = expr} </p>

</div>
</div>
<a id="ac1af86fd1eec5fcb7909ce9965df9f9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1af86fd1eec5fcb7909ce9965df9f9d">&#9670;&nbsp;</a></span>loosescan_key</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> POSITION::loosescan_key</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a13f15156d6e436a302dc79e8f852503b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13f15156d6e436a302dc79e8f852503b">&#9670;&nbsp;</a></span>loosescan_need_tables</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> POSITION::loosescan_need_tables</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9c644ad469a99aaae15c53bd056ce874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c644ad469a99aaae15c53bd056ce874">&#9670;&nbsp;</a></span>loosescan_parts</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> POSITION::loosescan_parts</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7d8e34769a1e8a832d1a651bd3fccfdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d8e34769a1e8a832d1a651bd3fccfdf">&#9670;&nbsp;</a></span>n_sj_tables</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> POSITION::n_sj_tables</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Valid only after fix_semijoin_strategies_for_picked_join_order() call: if sj_strategy!=SJ_OPT_NONE, this is the number of subsequent tables that are covered by the specified semi-join strategy. </p>

</div>
</div>
<a id="aa51c4ddd4341f4429576ed9a483957f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa51c4ddd4341f4429576ed9a483957f5">&#9670;&nbsp;</a></span>prefix_cost</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double POSITION::prefix_cost</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af72ad8da8d67dd94d20e251d8665bc03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af72ad8da8d67dd94d20e251d8665bc03">&#9670;&nbsp;</a></span>prefix_rowcount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double POSITION::prefix_rowcount</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>prefix_rowcount and prefix_cost form a stack of partial join order costs and output sizes </p>
<p>prefix_rowcount: The number of row combinations that will be joined to the next table in the join sequence.</p>
<p>For a joined table it is calculated as prefix_rowcount = last_table.prefix_rowcount * rows_fetched * filter_effect</p>
<dl class="section see"><dt>See also</dt><dd>filter_effect</dd></dl>
<p>For a semijoined table it may be less than this formula due to duplicate elimination. </p>

</div>
</div>
<a id="a1d9276cebf3036777645d137e977df0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d9276cebf3036777645d137e977df0b">&#9670;&nbsp;</a></span>read_cost</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double POSITION::read_cost</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cost of accessing the table in course of the entire complete join execution, i.e. </p>
<p>cost of one access method use (e.g. 'range' or 'ref' scan ) multiplied by estimated number of rows from tables earlier in the join sequence.</p>
<p>read_cost does NOT include cost of processing rows within the executor (row_evaluate_cost). </p>

</div>
</div>
<a id="a696c42cfd3a68fc9b4cd05dfdecd5a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a696c42cfd3a68fc9b4cd05dfdecd5a89">&#9670;&nbsp;</a></span>ref_depend_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> POSITION::ref_depend_map</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If ref-based access is used: bitmap of tables this table depends on. </p>

</div>
</div>
<a id="acb6f63a56ca8fe8acf3535f8e78aa1cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb6f63a56ca8fe8acf3535f8e78aa1cb">&#9670;&nbsp;</a></span>rows_fetched</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double POSITION::rows_fetched</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of rows that will be fetched by the chosen access method per each row combination of previous tables. </p>
<p>That is:</p>
<p>rows_fetched = selectivity(access_condition) * cardinality(table)</p>
<p>where 'access_condition' is whatever condition was chosen for index access, depending on the access method ('ref', 'range', etc.)</p>
<dl class="section note"><dt>Note</dt><dd>For index/table scans, rows_fetched may be less than the number of rows in the table because the cost of evaluating constant conditions is included in the scan cost, and the number of rows produced by these scans is the estimated number of rows that pass the constant conditions. </dd></dl>
<dl class="section see"><dt>See also</dt><dd>Optimize_table_order::calculate_scan_cost() . But this is only during planning; make_join_readinfo() simplifies it for EXPLAIN. </dd></dl>

</div>
</div>
<a id="a6dfa60b279dcb54763724b521d9e8f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dfa60b279dcb54763724b521d9e8f4a">&#9670;&nbsp;</a></span>sj_strategy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> POSITION::sj_strategy</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current optimization state: Semi-join strategy to be used for this and preceding join tables. </p>
<p>Join optimizer sets this for the <em>last</em> join_tab in the duplicate-generating range. That is, in order to interpret this field, one needs to traverse join-&gt;[best_]positions array from right to left. When you see a join table with sj_strategy!= SJ_OPT_NONE, some other field (depending on the strategy) tells how many preceding positions this applies to. The values of covered_preceding_positions-&gt;sj_strategy must be ignored. </p>

</div>
</div>
<a id="a11d59d94e289e91dba4cffc35a0ed274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11d59d94e289e91dba4cffc35a0ed274">&#9670;&nbsp;</a></span>sjm_scan_last_inner</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> POSITION::sjm_scan_last_inner</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a42768738c50d3689ac6eb62e9aa4e963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42768738c50d3689ac6eb62e9aa4e963">&#9670;&nbsp;</a></span>sjm_scan_need_tables</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__table__map_8h.html#a82b78abeba8cfb8e3df3e082f42b6cff">table_map</a> POSITION::sjm_scan_need_tables</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a21a4748a19ab2dfb60454b7599f3c98c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a4748a19ab2dfb60454b7599f3c98c">&#9670;&nbsp;</a></span>table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classJOIN__TAB.html">JOIN_TAB</a>* POSITION::table</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a42884d8b0e02d796797c2e677423ae6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42884d8b0e02d796797c2e677423ae6d">&#9670;&nbsp;</a></span>use_join_buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> POSITION::use_join_buffer</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>sql/<a class="el" href="sql__select_8h_source.html">sql_select.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structPOSITION.html">POSITION</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
