<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Opt_trace_context Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classOpt__trace__context.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classOpt__trace__context-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Opt_trace_context Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A per-session context which is always available at any point of execution, because in practice it's accessible from THD which contains:  
 <a href="classOpt__trace__context.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="opt__trace__context_8h_source.html">opt_trace_context.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context_1_1Opt__trace__context__impl.html">Opt_trace_context_impl</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">To have the smallest impact on THD's size, most of the implementation is moved to a separate class Opt_trace_context_impl which is instantiated on the heap when really needed.  <a href="classOpt__trace__context_1_1Opt__trace__context__impl.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9516bc7a301ef712dc92441dff2d419e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classOpt__trace__context.html#a9516bc7a301ef712dc92441dff2d419eafaa66924435d94d86adf198060616ff6">FLAG_DEFAULT</a> = 0, 
<a class="el" href="classOpt__trace__context.html#a9516bc7a301ef712dc92441dff2d419eadad2b3ca0a38a224f0b50fd55ccbac0a">FLAG_ENABLED</a> = 1 &lt;&lt; 0, 
<a class="el" href="classOpt__trace__context.html#a9516bc7a301ef712dc92441dff2d419ea2bc5480a3ae26890887bea512ecc5735">FLAG_ONE_LINE</a> = 1 &lt;&lt; 1
 }<tr class="memdesc:a9516bc7a301ef712dc92441dff2d419e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags' numeric values for @@optimizer_trace variable.  <a href="classOpt__trace__context.html#a9516bc7a301ef712dc92441dff2d419e">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a9516bc7a301ef712dc92441dff2d419e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71428b27f932674f6b2535ee6c30845c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845c">feature_value</a> { <br />
&#160;&#160;<a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845cadc93b9e1defa9303a74e84e903fe15ac">GREEDY_SEARCH</a> = 1 &lt;&lt; 0, 
<a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845ca99c26e1ae1dd556e362a8d5cf219f3b0">RANGE_OPTIMIZER</a> = 1 &lt;&lt; 1, 
<a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845caebdae66fec0d46fb5471db19a3961fa5">DYNAMIC_RANGE</a> = 1 &lt;&lt; 2, 
<a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845ca4756cfbb7483d3ca9ef9643437f86de2">REPEATED_SUBSELECT</a> = 1 &lt;&lt; 3, 
<br />
&#160;&#160;<a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845caa8da583be0a3e14dc069062cf477e415">MISC</a> = 1 &lt;&lt; 7
<br />
 }<tr class="memdesc:a71428b27f932674f6b2535ee6c30845c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Features' numeric values for @@optimizer_trace_features variable.  <a href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845c">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a71428b27f932674f6b2535ee6c30845c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a94819392df94b1f78c4ea82eb7a6b6c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a94819392df94b1f78c4ea82eb7a6b6c5">Opt_trace_context</a> ()</td></tr>
<tr class="separator:a94819392df94b1f78c4ea82eb7a6b6c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a733576edff333b12006a5c16cd015753"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a733576edff333b12006a5c16cd015753">~Opt_trace_context</a> ()</td></tr>
<tr class="separator:a733576edff333b12006a5c16cd015753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2b0c775eff3d65b7523615feb02721"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a2c2b0c775eff3d65b7523615feb02721">start</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="classOpt__trace__context.html#a7ed6fd86377900e05a4cd7c57d360e7e">support_I_S</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> support_dbug_or_missing_priv, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> end_marker, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> one_line, long offset, long limit, <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> max_mem_size, <a class="el" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> features)</td></tr>
<tr class="memdesc:a2c2b0c775eff3d65b7523615feb02721"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a new trace.  <a href="#a2c2b0c775eff3d65b7523615feb02721">More...</a><br /></td></tr>
<tr class="separator:a2c2b0c775eff3d65b7523615feb02721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8aa2d56f6bb9c4ca5c0973dba1f65c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#ac8aa2d56f6bb9c4ca5c0973dba1f65c2">end</a> ()</td></tr>
<tr class="memdesc:ac8aa2d56f6bb9c4ca5c0973dba1f65c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ends the current (=open, unfinished, being-generated) trace.  <a href="#ac8aa2d56f6bb9c4ca5c0973dba1f65c2">More...</a><br /></td></tr>
<tr class="separator:ac8aa2d56f6bb9c4ca5c0973dba1f65c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9810000ce2386e2de8c6cf7d116a4baa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a9810000ce2386e2de8c6cf7d116a4baa">is_started</a> () const</td></tr>
<tr class="memdesc:a9810000ce2386e2de8c6cf7d116a4baa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether there is a current trace.  <a href="#a9810000ce2386e2de8c6cf7d116a4baa">More...</a><br /></td></tr>
<tr class="separator:a9810000ce2386e2de8c6cf7d116a4baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed6fd86377900e05a4cd7c57d360e7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a7ed6fd86377900e05a4cd7c57d360e7e">support_I_S</a> () const</td></tr>
<tr class="separator:a7ed6fd86377900e05a4cd7c57d360e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e5e5948f0688f96e74766126b3c19a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a54e5e5948f0688f96e74766126b3c19a">set_query</a> (const char *<a class="el" href="myisam__ftdump_8cc.html#af26982218484ec3fdcb8f7d92e864a9b">query</a>, size_t length, const <a class="el" href="structCHARSET__INFO.html">CHARSET_INFO</a> *charset)</td></tr>
<tr class="memdesc:a54e5e5948f0688f96e74766126b3c19a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the "original" query (not transformed, as sent by client) for the current trace.  <a href="#a54e5e5948f0688f96e74766126b3c19a">More...</a><br /></td></tr>
<tr class="separator:a54e5e5948f0688f96e74766126b3c19a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73fc470d089e7bcfc365da46bcba0aa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a73fc470d089e7bcfc365da46bcba0aa0">reset</a> ()</td></tr>
<tr class="memdesc:a73fc470d089e7bcfc365da46bcba0aa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Brainwash: deletes all remembered traces and resets counters regarding OFFSET/LIMIT (so that the next statement is considered as "at offset
0").  <a href="#a73fc470d089e7bcfc365da46bcba0aa0">More...</a><br /></td></tr>
<tr class="separator:a73fc470d089e7bcfc365da46bcba0aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d7bb9b01f56889e6164eda74ce55cc4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a1d7bb9b01f56889e6164eda74ce55cc4">get_end_marker</a> () const</td></tr>
<tr class="separator:a1d7bb9b01f56889e6164eda74ce55cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f07c0bd6fca2bf54b201fceda9f1e57"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a1f07c0bd6fca2bf54b201fceda9f1e57">get_one_line</a> () const</td></tr>
<tr class="separator:a1f07c0bd6fca2bf54b201fceda9f1e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0f75e03747214be10eed4ac01e1eece"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#aa0f75e03747214be10eed4ac01e1eece">missing_privilege</a> ()</td></tr>
<tr class="memdesc:aa0f75e03747214be10eed4ac01e1eece"><td class="mdescLeft">&#160;</td><td class="mdescRight">User lacks privileges to see the current trace.  <a href="#aa0f75e03747214be10eed4ac01e1eece">More...</a><br /></td></tr>
<tr class="separator:aa0f75e03747214be10eed4ac01e1eece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad564ce5fb29f40a9dabf8cff5f1c3c56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#ad564ce5fb29f40a9dabf8cff5f1c3c56">feature_enabled</a> (<a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845c">feature_value</a> f) const</td></tr>
<tr class="separator:ad564ce5fb29f40a9dabf8cff5f1c3c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10db9990d53e23cd1cad0ac7bbcc3af5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpt__trace__stmt.html">Opt_trace_stmt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a10db9990d53e23cd1cad0ac7bbcc3af5">get_current_stmt_in_gen</a> ()</td></tr>
<tr class="memdesc:a10db9990d53e23cd1cad0ac7bbcc3af5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opt_trace_struct is passed Opt_trace_context*, and needs to know to which statement's trace to attach, so Opt_trace_context must provide this information.  <a href="#a10db9990d53e23cd1cad0ac7bbcc3af5">More...</a><br /></td></tr>
<tr class="separator:a10db9990d53e23cd1cad0ac7bbcc3af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70d352017387b4e6a1b9a182f5761d6e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classOpt__trace__stmt.html">Opt_trace_stmt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a70d352017387b4e6a1b9a182f5761d6e">get_next_stmt_for_I_S</a> (long *got_so_far) const</td></tr>
<tr class="separator:a70d352017387b4e6a1b9a182f5761d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54c6091fabdbee06af814a303dd5ebac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a54c6091fabdbee06af814a303dd5ebac">disable_I_S_for_this_and_children</a> ()</td></tr>
<tr class="memdesc:a54c6091fabdbee06af814a303dd5ebac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporarily disables I_S for this trace and its children.  <a href="#a54c6091fabdbee06af814a303dd5ebac">More...</a><br /></td></tr>
<tr class="separator:a54c6091fabdbee06af814a303dd5ebac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ba192b501206b15004b3a445e12f85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#ab9ba192b501206b15004b3a445e12f85">restore_I_S</a> ()</td></tr>
<tr class="memdesc:ab9ba192b501206b15004b3a445e12f85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores I_S support to what it was before the previous call to disable_I_S_for_this_and_children().  <a href="#ab9ba192b501206b15004b3a445e12f85">More...</a><br /></td></tr>
<tr class="separator:ab9ba192b501206b15004b3a445e12f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a7d926a110b8f420e73d8b61a0e7d78dd"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a7d926a110b8f420e73d8b61a0e7d78dd">flag_names</a> []</td></tr>
<tr class="memdesc:a7d926a110b8f420e73d8b61a0e7d78dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Names of flags for @@optimizer_trace variable of <code>sys_vars.cc</code> :  <a href="#a7d926a110b8f420e73d8b61a0e7d78dd">More...</a><br /></td></tr>
<tr class="separator:a7d926a110b8f420e73d8b61a0e7d78dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa397d1781b174529f3b4f89e0618b05f"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#aa397d1781b174529f3b4f89e0618b05f">feature_names</a> []</td></tr>
<tr class="memdesc:aa397d1781b174529f3b4f89e0618b05f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Features' names for @@optimizer_trace_features variable of <code>sys_vars.cc:</code>  <a href="#aa397d1781b174529f3b4f89e0618b05f">More...</a><br /></td></tr>
<tr class="separator:aa397d1781b174529f3b4f89e0618b05f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf95e4ca42ac0b64a2068f5ed1fa0233"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845c">feature_value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#aaf95e4ca42ac0b64a2068f5ed1fa0233">default_features</a></td></tr>
<tr class="memdesc:aaf95e4ca42ac0b64a2068f5ed1fa0233"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimizer features which are traced by default.  <a href="#aaf95e4ca42ac0b64a2068f5ed1fa0233">More...</a><br /></td></tr>
<tr class="separator:aaf95e4ca42ac0b64a2068f5ed1fa0233"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3fd3bf8bf0a395bcdc7c12d29a34d7ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a3fd3bf8bf0a395bcdc7c12d29a34d7ad">purge_stmts</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> purge_all)</td></tr>
<tr class="memdesc:a3fd3bf8bf0a395bcdc7c12d29a34d7ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find and delete unneeded traces.  <a href="#a3fd3bf8bf0a395bcdc7c12d29a34d7ad">More...</a><br /></td></tr>
<tr class="separator:a3fd3bf8bf0a395bcdc7c12d29a34d7ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78cdbf454c05d5be953d97d9e062667b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a78cdbf454c05d5be953d97d9e062667b">allowed_mem_size_for_current_stmt</a> () const</td></tr>
<tr class="memdesc:a78cdbf454c05d5be953d97d9e062667b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute maximum allowed memory size for current trace.  <a href="#a78cdbf454c05d5be953d97d9e062667b">More...</a><br /></td></tr>
<tr class="separator:a78cdbf454c05d5be953d97d9e062667b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0101a758de60bb9ce8903c88e9560c9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#ad0101a758de60bb9ce8903c88e9560c9">Opt_trace_context</a> (const <a class="el" href="classOpt__trace__context.html">Opt_trace_context</a> &amp;)</td></tr>
<tr class="memdesc:ad0101a758de60bb9ce8903c88e9560c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Not defined copy constructor, to disallow copy.  <a href="#ad0101a758de60bb9ce8903c88e9560c9">More...</a><br /></td></tr>
<tr class="separator:ad0101a758de60bb9ce8903c88e9560c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50803d251ebafba87b9e3679fe875d80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpt__trace__context.html">Opt_trace_context</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a50803d251ebafba87b9e3679fe875d80">operator=</a> (const <a class="el" href="classOpt__trace__context.html">Opt_trace_context</a> &amp;)</td></tr>
<tr class="memdesc:a50803d251ebafba87b9e3679fe875d80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Not defined assignment operator, to disallow assignment.  <a href="#a50803d251ebafba87b9e3679fe875d80">More...</a><br /></td></tr>
<tr class="separator:a50803d251ebafba87b9e3679fe875d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac69f511bd8f049e532436e78fe4672f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpt__trace__context_1_1Opt__trace__context__impl.html">Opt_trace_context_impl</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#ac69f511bd8f049e532436e78fe4672f3">pimpl</a></td></tr>
<tr class="separator:ac69f511bd8f049e532436e78fe4672f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a939c2d9c62ec261fd00233d5d1e48160"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOpt__trace__context.html#a939c2d9c62ec261fd00233d5d1e48160">I_S_disabled</a></td></tr>
<tr class="memdesc:a939c2d9c62ec261fd00233d5d1e48160"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamically allocated implementation.  <a href="#a939c2d9c62ec261fd00233d5d1e48160">More...</a><br /></td></tr>
<tr class="separator:a939c2d9c62ec261fd00233d5d1e48160"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A per-session context which is always available at any point of execution, because in practice it's accessible from THD which contains: </p>
<pre class="fragment">Opt_trace_context opt_trace; </pre><p> It maintains properties of the session's regarding tracing: enabled/disabled state, style (all trace on one line, or not, etc), a list of all remembered traces of previous and current SQL statement (as restricted by OFFSET/LIMIT), and a pointer to the current (being-generated) trace (which itself has a pointer to its current open object/array).</p>
<p>Here is why the context needs to provide the current open object/array:</p>
<ul>
<li>When adding a value (scalar or array or object) to an array, or adding a key/value pair to an object, we need this outer object or array (from now on, we will use the term "structure" for "object or array", as both are structured types).</li>
</ul>
<ul>
<li>The most natural way would be that the outer object would be passed in argument to the adder (the function which wants to add the value or key/value).</li>
</ul>
<ul>
<li>But tracing is sometimes produced from deep down the stack trace, with many intermediate frames doing no tracing (writing nothing to the trace), so it would require passing the outer structure through many levels, thus modifying many function prototypes. Example (in gdb "backtrace" notation: inner frames first): <pre class="fragment">    #0  Item_in_subselect::single_value_transformer
        - opens an object for key "transformation"
    #1  Item_in_subselect::select_in_like_transformer - does no tracing
    #2  Item_allany_subselect::select_transformer - does no tracing
    #3  SELECT_LEX::prepare - opens an object for key "join_preparation"
</pre> So the object opened in #3 would have to be passed in argument to #2 and #1 in order to finally reach #0 where object "transformation" would be added to it.</li>
</ul>
<ul>
<li>So, as we cannot practically pass the object down, we rather maintain a "current object or array" accessible from the Opt_trace_context context; it's a pointer to an instance of Opt_trace_struct, and the function deep down (frame #0) grabs it from the context, where it was depositted by the function high up (frame #3 in the last example). </li>
</ul>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a9516bc7a301ef712dc92441dff2d419e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9516bc7a301ef712dc92441dff2d419e">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags' numeric values for @@optimizer_trace variable. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9516bc7a301ef712dc92441dff2d419eafaa66924435d94d86adf198060616ff6"></a>FLAG_DEFAULT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9516bc7a301ef712dc92441dff2d419eadad2b3ca0a38a224f0b50fd55ccbac0a"></a>FLAG_ENABLED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9516bc7a301ef712dc92441dff2d419ea2bc5480a3ae26890887bea512ecc5735"></a>FLAG_ONE_LINE&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<a id="a71428b27f932674f6b2535ee6c30845c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71428b27f932674f6b2535ee6c30845c">&#9670;&nbsp;</a></span>feature_value</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845c">Opt_trace_context::feature_value</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Features' numeric values for @@optimizer_trace_features variable. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a71428b27f932674f6b2535ee6c30845cadc93b9e1defa9303a74e84e903fe15ac"></a>GREEDY_SEARCH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a71428b27f932674f6b2535ee6c30845ca99c26e1ae1dd556e362a8d5cf219f3b0"></a>RANGE_OPTIMIZER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a71428b27f932674f6b2535ee6c30845caebdae66fec0d46fb5471db19a3961fa5"></a>DYNAMIC_RANGE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a71428b27f932674f6b2535ee6c30845ca4756cfbb7483d3ca9ef9643437f86de2"></a>REPEATED_SUBSELECT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a71428b27f932674f6b2535ee6c30845caa8da583be0a3e14dc069062cf477e415"></a>MISC&#160;</td><td class="fielddoc"><p>Anything unclassified, including the top object (thus, by "inheritance
from parent", disabling MISC makes an empty trace). </p>
<p>This feature cannot be disabled by the user; for this it is important that it always has biggest flag; flag's value itself does not matter. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a94819392df94b1f78c4ea82eb7a6b6c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94819392df94b1f78c4ea82eb7a6b6c5">&#9670;&nbsp;</a></span>Opt_trace_context() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Opt_trace_context::Opt_trace_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a733576edff333b12006a5c16cd015753"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a733576edff333b12006a5c16cd015753">&#9670;&nbsp;</a></span>~Opt_trace_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Opt_trace_context::~Opt_trace_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad0101a758de60bb9ce8903c88e9560c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0101a758de60bb9ce8903c88e9560c9">&#9670;&nbsp;</a></span>Opt_trace_context() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Opt_trace_context::Opt_trace_context </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOpt__trace__context.html">Opt_trace_context</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Not defined copy constructor, to disallow copy. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a78cdbf454c05d5be953d97d9e062667b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78cdbf454c05d5be953d97d9e062667b">&#9670;&nbsp;</a></span>allowed_mem_size_for_current_stmt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Opt_trace_context::allowed_mem_size_for_current_stmt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute maximum allowed memory size for current trace. </p>
<p>The current trace is the only one active. Other traces break down in two groups:</p><ul>
<li>the finished ones (from previously executed statements),</li>
<li>the "started but not finished ones": they are not current, are not being updated at this moment: this must be the trace of a top statement calling a substatement which is the current trace now: trace's top statement is not being updated at this moment. So the current trace can grow in the room left by all traces above. </li>
</ul>

</div>
</div>
<a id="a54c6091fabdbee06af814a303dd5ebac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54c6091fabdbee06af814a303dd5ebac">&#9670;&nbsp;</a></span>disable_I_S_for_this_and_children()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Opt_trace_context::disable_I_S_for_this_and_children </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Temporarily disables I_S for this trace and its children. </p>

</div>
</div>
<a id="ac8aa2d56f6bb9c4ca5c0973dba1f65c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8aa2d56f6bb9c4ca5c0973dba1f65c2">&#9670;&nbsp;</a></span>end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Opt_trace_context::end </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ends the current (=open, unfinished, being-generated) trace. </p>
<p>If <code>missing_privilege()</code> has been called between start() and end(), end() restores I_S support to what it was before the call to <code>missing_privilege()</code>. This is the key to ensure that missing_privilege() does not disable I_S support for the rest of the connection's life! </p>

</div>
</div>
<a id="ad564ce5fb29f40a9dabf8cff5f1c3c56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad564ce5fb29f40a9dabf8cff5f1c3c56">&#9670;&nbsp;</a></span>feature_enabled()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Opt_trace_context::feature_enabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845c">feature_value</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>whether an optimizer feature should be traced. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>feature </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a10db9990d53e23cd1cad0ac7bbcc3af5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10db9990d53e23cd1cad0ac7bbcc3af5">&#9670;&nbsp;</a></span>get_current_stmt_in_gen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpt__trace__stmt.html">Opt_trace_stmt</a>* Opt_trace_context::get_current_stmt_in_gen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Opt_trace_struct is passed Opt_trace_context*, and needs to know to which statement's trace to attach, so Opt_trace_context must provide this information. </p>

</div>
</div>
<a id="a1d7bb9b01f56889e6164eda74ce55cc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d7bb9b01f56889e6164eda74ce55cc4">&#9670;&nbsp;</a></span>get_end_marker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Opt_trace_context::get_end_marker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd>parameters of Opt_trace_context::start() </dd></dl>

</div>
</div>
<a id="a70d352017387b4e6a1b9a182f5761d6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70d352017387b4e6a1b9a182f5761d6e">&#9670;&nbsp;</a></span>get_next_stmt_for_I_S()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classOpt__trace__stmt.html">Opt_trace_stmt</a> * Opt_trace_context::get_next_stmt_for_I_S </td>
          <td>(</td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>got_so_far</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the next statement to show in I_S. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">got_so_far</td><td>How many statements the caller got so far (by previous calls to this function); function updates this count. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>traces are returned from oldest to newest. </dd></dl>

</div>
</div>
<a id="a1f07c0bd6fca2bf54b201fceda9f1e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f07c0bd6fca2bf54b201fceda9f1e57">&#9670;&nbsp;</a></span>get_one_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Opt_trace_context::get_one_line </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd>parameters of Opt_trace_context::start() </dd></dl>

</div>
</div>
<a id="a9810000ce2386e2de8c6cf7d116a4baa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9810000ce2386e2de8c6cf7d116a4baa">&#9670;&nbsp;</a></span>is_started()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Opt_trace_context::is_started </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether there is a current trace. </p>

</div>
</div>
<a id="aa0f75e03747214be10eed4ac01e1eece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0f75e03747214be10eed4ac01e1eece">&#9670;&nbsp;</a></span>missing_privilege()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Opt_trace_context::missing_privilege </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>User lacks privileges to see the current trace. </p>
<p>Make the trace appear empty in Opt_trace_info, and disable I_S for all its upcoming children.</p>
<p>Once a call to this function has been made, subsequent calls to it before <code>end()</code> have no effects. </p>

</div>
</div>
<a id="a50803d251ebafba87b9e3679fe875d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50803d251ebafba87b9e3679fe875d80">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpt__trace__context.html">Opt_trace_context</a>&amp; Opt_trace_context::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOpt__trace__context.html">Opt_trace_context</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Not defined assignment operator, to disallow assignment. </p>

</div>
</div>
<a id="a3fd3bf8bf0a395bcdc7c12d29a34d7ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fd3bf8bf0a395bcdc7c12d29a34d7ad">&#9670;&nbsp;</a></span>purge_stmts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Opt_trace_context::purge_stmts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>purge_all</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find and delete unneeded traces. </p>
<p>For example if OFFSET=-1,LIMIT=1, only the last trace is needed. When a new trace is started, the previous traces becomes unneeded and this function deletes them which frees memory. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">purge_all</td><td>if true, ignore OFFSET and thus delete everything </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a73fc470d089e7bcfc365da46bcba0aa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73fc470d089e7bcfc365da46bcba0aa0">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Opt_trace_context::reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Brainwash: deletes all remembered traces and resets counters regarding OFFSET/LIMIT (so that the next statement is considered as "at offset
0"). </p>
<p>Does not reset the @@optimizer_trace_offset/limit variables. </p>

</div>
</div>
<a id="ab9ba192b501206b15004b3a445e12f85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9ba192b501206b15004b3a445e12f85">&#9670;&nbsp;</a></span>restore_I_S()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Opt_trace_context::restore_I_S </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restores I_S support to what it was before the previous call to disable_I_S_for_this_and_children(). </p>

</div>
</div>
<a id="a54e5e5948f0688f96e74766126b3c19a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54e5e5948f0688f96e74766126b3c19a">&#9670;&nbsp;</a></span>set_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Opt_trace_context::set_query </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structCHARSET__INFO.html">CHARSET_INFO</a> *&#160;</td>
          <td class="paramname"><em>charset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the "original" query (not transformed, as sent by client) for the current trace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>query </td></tr>
    <tr><td class="paramname">length</td><td>query's length </td></tr>
    <tr><td class="paramname">charset</td><td>charset which was used to encode this query </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2c2b0c775eff3d65b7523615feb02721"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c2b0c775eff3d65b7523615feb02721">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Opt_trace_context::start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>support_I_S</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>support_dbug_or_missing_priv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>end_marker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>one_line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>max_mem_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a>&#160;</td>
          <td class="paramname"><em>features</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts a new trace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">support_I_S</td><td>Whether this statement should have its trace in information_schema </td></tr>
    <tr><td class="paramname">support_dbug_or_missing_priv</td><td>'true' if this statement should have its trace in the dbug log (&ndash;debug), or if missing_privilege() may be called on this trace </td></tr>
    <tr><td class="paramname">end_marker</td><td>For a key/(object|array) pair, should the key be repeated in a comment when the object|array closes? like <pre class="fragment">                         "key_foo": {
                                      multi-line blah
                                    } / * key_foo * /</pre> This is for human-readability only, not valid in JSON. Note that YAML supports #-prefixed comments (we would just need to put the next item's "," before the current item's "#"). </td></tr>
    <tr><td class="paramname">one_line</td><td>Should the trace be on a single line without indentation? (More compact for network transfer to programs, less human-readable.) </td></tr>
    <tr><td class="paramname">offset</td><td>Offset for restricting trace production. </td></tr>
    <tr><td class="paramname">limit</td><td>Limit for restricting trace production. </td></tr>
    <tr><td class="paramname">max_mem_size</td><td>Maximum allowed for cumulated size of all remembered traces. </td></tr>
    <tr><td class="paramname">features</td><td>Only these optimizer features should be traced.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>ok </td></tr>
    <tr><td class="paramname">true</td><td>error (OOM): instance is unusable, so only destructor is permitted on it; any other member function has undefined effects. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7ed6fd86377900e05a4cd7c57d360e7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed6fd86377900e05a4cd7c57d360e7e">&#9670;&nbsp;</a></span>support_I_S()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Opt_trace_context::support_I_S </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>whether the current trace writes to I_S. This function should rarely be used. Don't you use this for some clever optimizations bypassing opt trace! </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aaf95e4ca42ac0b64a2068f5ed1fa0233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf95e4ca42ac0b64a2068f5ed1fa0233">&#9670;&nbsp;</a></span>default_features</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845c">Opt_trace_context::feature_value</a> Opt_trace_context::default_features</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">    <a class="code" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845c">Opt_trace_context::feature_value</a>(<a class="code" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845cadc93b9e1defa9303a74e84e903fe15ac">Opt_trace_context::GREEDY_SEARCH</a> |</div><div class="line">                                     <a class="code" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845ca99c26e1ae1dd556e362a8d5cf219f3b0">Opt_trace_context::RANGE_OPTIMIZER</a> |</div><div class="line">                                     <a class="code" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845caebdae66fec0d46fb5471db19a3961fa5">Opt_trace_context::DYNAMIC_RANGE</a> |</div><div class="line">                                     <a class="code" href="classOpt__trace__context.html#a71428b27f932674f6b2535ee6c30845ca4756cfbb7483d3ca9ef9643437f86de2">Opt_trace_context::REPEATED_SUBSELECT</a>)</div></div><!-- fragment -->
<p>Optimizer features which are traced by default. </p>

</div>
</div>
<a id="aa397d1781b174529f3b4f89e0618b05f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa397d1781b174529f3b4f89e0618b05f">&#9670;&nbsp;</a></span>feature_names</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * Opt_trace_context::feature_names</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    <span class="stringliteral">&quot;greedy_search&quot;</span>,      <span class="stringliteral">&quot;range_optimizer&quot;</span>, <span class="stringliteral">&quot;dynamic_range&quot;</span>,</div><div class="line">    <span class="stringliteral">&quot;repeated_subselect&quot;</span>, <span class="stringliteral">&quot;default&quot;</span>,         <a class="code" href="m__string_8h.html#a01a1e214486d9454ca611f01cb1cfc39">NullS</a>}</div></div><!-- fragment -->
<p>Features' names for @@optimizer_trace_features variable of <code>sys_vars.cc:</code> </p>
<ul>
<li>"greedy_search" = the greedy search for a plan </li>
<li>"range_optimizer" = the cost analysis of accessing data through ranges in indexes </li>
<li>"dynamic_range" = the range optimization performed for each record when access method is dynamic range </li>
<li>"repeated_subselect" = the repeated execution of subselects </li>
<li>"default". </li>
</ul>

</div>
</div>
<a id="a7d926a110b8f420e73d8b61a0e7d78dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d926a110b8f420e73d8b61a0e7d78dd">&#9670;&nbsp;</a></span>flag_names</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * Opt_trace_context::flag_names</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {<span class="stringliteral">&quot;enabled&quot;</span>, <span class="stringliteral">&quot;one_line&quot;</span>, <span class="stringliteral">&quot;default&quot;</span>,</div><div class="line">                                               <a class="code" href="m__string_8h.html#a01a1e214486d9454ca611f01cb1cfc39">NullS</a>}</div></div><!-- fragment -->
<p>Names of flags for @@optimizer_trace variable of <code>sys_vars.cc</code> : </p>
<ul>
<li>"enabled" = tracing enabled </li>
<li>"one_line"= see parameter of <a class="el" href="classOpt__trace__context.html#a2c2b0c775eff3d65b7523615feb02721">Opt_trace_context::start</a> </li>
<li>"default". </li>
</ul>

</div>
</div>
<a id="a939c2d9c62ec261fd00233d5d1e48160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a939c2d9c62ec261fd00233d5d1e48160">&#9670;&nbsp;</a></span>I_S_disabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Opt_trace_context::I_S_disabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dynamically allocated implementation. </p>
<p>&lt;&gt;0 &lt;=&gt; any to-be-created statement's trace should not be in information_schema. This applies to next statements, their substatements, etc. </p>

</div>
</div>
<a id="ac69f511bd8f049e532436e78fe4672f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac69f511bd8f049e532436e78fe4672f3">&#9670;&nbsp;</a></span>pimpl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpt__trace__context_1_1Opt__trace__context__impl.html">Opt_trace_context_impl</a>* Opt_trace_context::pimpl</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="opt__trace__context_8h_source.html">opt_trace_context.h</a></li>
<li>sql/<a class="el" href="opt__trace_8cc.html">opt_trace.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classOpt__trace__context.html">Opt_trace_context</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
