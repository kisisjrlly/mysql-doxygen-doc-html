<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/trx0rec.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('trx0rec_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">trx0rec.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transaction undo log record.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;univ.i&quot;</code><br />
<code>#include &quot;<a class="el" href="data0data_8h_source.html">data0data.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0types_8h_source.html">dict0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lob0undo_8h_source.html">lob0undo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mtr0mtr_8h_source.html">mtr0mtr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="page0types_8h_source.html">page0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rem0types_8h_source.html">rem0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0log_8h_source.html">row0log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0types_8h_source.html">row0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0types_8h_source.html">trx0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0types_8h_source.html">que0types.h</a>&quot;</code><br />
<code>#include &quot;trx0rec.ic&quot;</code><br />
</div>
<p><a href="trx0rec_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type and compilation info flag in the undo record for update.  <a href="structtype__cmpl__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa33615de4352554c23bc129777776c50"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#aa33615de4352554c23bc129777776c50">trx_undo_rec_get_ptr</a>(undo_rec,  undo_no)&#160;&#160;&#160;((undo_rec) + trx_undo_rec_get_offset(undo_no))</td></tr>
<tr class="memdesc:aa33615de4352554c23bc129777776c50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the start of the undo record data area.  <a href="#aa33615de4352554c23bc129777776c50">More...</a><br /></td></tr>
<tr class="separator:aa33615de4352554c23bc129777776c50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaee338d1ea2904c4a781ea0499d78d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#adaee338d1ea2904c4a781ea0499d78d9">TRX_UNDO_PREV_IN_PURGE</a>&#160;&#160;&#160;0x1</td></tr>
<tr class="memdesc:adaee338d1ea2904c4a781ea0499d78d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">status bit used for trx_undo_prev_version_build()  <a href="#adaee338d1ea2904c4a781ea0499d78d9">More...</a><br /></td></tr>
<tr class="separator:adaee338d1ea2904c4a781ea0499d78d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c05f98e384bce86a905b7f694f3cca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a30c05f98e384bce86a905b7f694f3cca">TRX_UNDO_GET_OLD_V_VALUE</a>&#160;&#160;&#160;0x2</td></tr>
<tr class="memdesc:a30c05f98e384bce86a905b7f694f3cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">This tells trx_undo_prev_version_build() to fetch the old value in the undo log (which is the after image for an update)  <a href="#a30c05f98e384bce86a905b7f694f3cca">More...</a><br /></td></tr>
<tr class="separator:a30c05f98e384bce86a905b7f694f3cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68638a104879e7d71a298f105e931a12"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a68638a104879e7d71a298f105e931a12">TRX_UNDO_INSERT_REC</a>&#160;&#160;&#160;11 /* fresh insert into clustered <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a> */</td></tr>
<tr class="separator:a68638a104879e7d71a298f105e931a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3bb6122832fe57dc4a20e56484d7e9f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#ab3bb6122832fe57dc4a20e56484d7e9f">TRX_UNDO_UPD_EXIST_REC</a></td></tr>
<tr class="separator:ab3bb6122832fe57dc4a20e56484d7e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad68e3a0bdf312e5ac4231cae931f7c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#adad68e3a0bdf312e5ac4231cae931f7c">TRX_UNDO_UPD_DEL_REC</a></td></tr>
<tr class="separator:adad68e3a0bdf312e5ac4231cae931f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81d03d47210ccfb93579a4fb30bbbee1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a81d03d47210ccfb93579a4fb30bbbee1">TRX_UNDO_DEL_MARK_REC</a></td></tr>
<tr class="separator:a81d03d47210ccfb93579a4fb30bbbee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7e3157451dbb20e57c176474aba8196"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#ac7e3157451dbb20e57c176474aba8196">TRX_UNDO_CMPL_INFO_MULT</a></td></tr>
<tr class="separator:ac7e3157451dbb20e57c176474aba8196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1034d3bdf5448388235380b1876be79"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#aa1034d3bdf5448388235380b1876be79">TRX_UNDO_MODIFY_BLOB</a></td></tr>
<tr class="separator:aa1034d3bdf5448388235380b1876be79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d5348d1a573af4aef6f3d08eadaeba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a80d5348d1a573af4aef6f3d08eadaeba">TRX_UNDO_UPD_EXTERN</a></td></tr>
<tr class="separator:a80d5348d1a573af4aef6f3d08eadaeba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89624e3de13054fc0c468b458bb892b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a89624e3de13054fc0c468b458bb892b1">TRX_UNDO_INSERT_OP</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a89624e3de13054fc0c468b458bb892b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c5248a5e8a2db6408ecd658de204eb9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a0c5248a5e8a2db6408ecd658de204eb9">TRX_UNDO_MODIFY_OP</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a0c5248a5e8a2db6408ecd658de204eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af31abdf6a056c7fac0a3e2b4cc16929b"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#af31abdf6a056c7fac0a3e2b4cc16929b">trx_undo_rec_copy</a> (const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *undo_page, uint32_t undo_offset, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:af31abdf6a056c7fac0a3e2b4cc16929b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies the undo record to the heap.  <a href="#af31abdf6a056c7fac0a3e2b4cc16929b">More...</a><br /></td></tr>
<tr class="separator:af31abdf6a056c7fac0a3e2b4cc16929b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac16587ee578cdb99b41525cd4a9e3658"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#ac16587ee578cdb99b41525cd4a9e3658">trx_undo_rec_get_type</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memdesc:ac16587ee578cdb99b41525cd4a9e3658"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the undo log record type.  <a href="#ac16587ee578cdb99b41525cd4a9e3658">More...</a><br /></td></tr>
<tr class="separator:ac16587ee578cdb99b41525cd4a9e3658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f620ad159449f5ef50b0896f129b577"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a0f620ad159449f5ef50b0896f129b577">trx_undo_rec_get_cmpl_info</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memdesc:a0f620ad159449f5ef50b0896f129b577"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an undo log record the record compiler info.  <a href="#a0f620ad159449f5ef50b0896f129b577">More...</a><br /></td></tr>
<tr class="separator:a0f620ad159449f5ef50b0896f129b577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aebcafefa1ee5c243da7e9249c9f5e2"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a1aebcafefa1ee5c243da7e9249c9f5e2">trx_undo_rec_get_extern_storage</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memdesc:a1aebcafefa1ee5c243da7e9249c9f5e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns TRUE if an undo log record contains an extern storage field.  <a href="#a1aebcafefa1ee5c243da7e9249c9f5e2">More...</a><br /></td></tr>
<tr class="separator:a1aebcafefa1ee5c243da7e9249c9f5e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06cc7356840b50f7c121dd50ecad82a2"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a06cc7356840b50f7c121dd50ecad82a2">trx_undo_rec_get_undo_no</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memdesc:a06cc7356840b50f7c121dd50ecad82a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the undo log record number.  <a href="#a06cc7356840b50f7c121dd50ecad82a2">More...</a><br /></td></tr>
<tr class="separator:a06cc7356840b50f7c121dd50ecad82a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afabb59f72f20367f7d622b40ce1eda7e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#afabb59f72f20367f7d622b40ce1eda7e">trx_undo_rec_get_table_id</a> (const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec)</td></tr>
<tr class="memdesc:afabb59f72f20367f7d622b40ce1eda7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an undo log record the table ID.  <a href="#afabb59f72f20367f7d622b40ce1eda7e">More...</a><br /></td></tr>
<tr class="separator:afabb59f72f20367f7d622b40ce1eda7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af342f2995de54e084d2ea5e042f50c6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#af342f2995de54e084d2ea5e042f50c6c">trx_undo_rec_get_row_ref</a> (<a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdtuple__t.html">dtuple_t</a> **ref, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:af342f2995de54e084d2ea5e042f50c6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a row reference from an undo log record.  <a href="#af342f2995de54e084d2ea5e042f50c6c">More...</a><br /></td></tr>
<tr class="separator:af342f2995de54e084d2ea5e042f50c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a324bbc5d0dd2ad6bcf2caf37ea2ef88a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a324bbc5d0dd2ad6bcf2caf37ea2ef88a">trx_undo_update_rec_get_sys_cols</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *trx_id, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr, ulint *info_bits)</td></tr>
<tr class="memdesc:a324bbc5d0dd2ad6bcf2caf37ea2ef88a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an undo log update record the system field values of the old version.  <a href="#a324bbc5d0dd2ad6bcf2caf37ea2ef88a">More...</a><br /></td></tr>
<tr class="separator:a324bbc5d0dd2ad6bcf2caf37ea2ef88a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a302b5ca1f95234d5ad91b3d34227423e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a302b5ca1f95234d5ad91b3d34227423e">trx_undo_update_rec_get_update</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint type, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> roll_ptr, ulint info_bits, <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="structupd__t.html">upd_t</a> **upd, <a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *lob_undo, <a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a> &amp;type_cmpl)</td></tr>
<tr class="memdesc:a302b5ca1f95234d5ad91b3d34227423e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds an update vector based on a remaining part of an undo log record.  <a href="#a302b5ca1f95234d5ad91b3d34227423e">More...</a><br /></td></tr>
<tr class="separator:a302b5ca1f95234d5ad91b3d34227423e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e51ec89401164642aa4bf9e329858d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a59e51ec89401164642aa4bf9e329858d">trx_undo_rec_get_partial_row</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdtuple__t.html">dtuple_t</a> **row, ibool ignore_prefix, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a59e51ec89401164642aa4bf9e329858d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a partial row from an update undo log record, for purge.  <a href="#a59e51ec89401164642aa4bf9e329858d">More...</a><br /></td></tr>
<tr class="separator:a59e51ec89401164642aa4bf9e329858d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b4faef28fe9a4375884b236e33d740e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a9b4faef28fe9a4375884b236e33d740e">trx_undo_report_row_operation</a> (ulint <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, ulint op_type, <a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *clust_entry, const <a class="el" href="structupd__t.html">upd_t</a> *<a class="el" href="myisamlog_8cc.html#a63c3b620cc1cd0b4a2850c8d9804fde2">update</a>, ulint cmpl_info, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const ulint *offsets, <a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *roll_ptr)</td></tr>
<tr class="memdesc:a9b4faef28fe9a4375884b236e33d740e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes information to an undo log about an insert, update, or a delete marking of a clustered index record.  <a href="#a9b4faef28fe9a4375884b236e33d740e">More...</a><br /></td></tr>
<tr class="separator:a9b4faef28fe9a4375884b236e33d740e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b355a2322627ee073a9585ca24fb7d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a0b355a2322627ee073a9585ca24fb7d1">trx_undo_prev_version_build</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *index_rec, <a class="el" href="structmtr__t.html">mtr_t</a> *index_mtr, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint *offsets, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> **old_vers, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *v_heap, const <a class="el" href="structdtuple__t.html">dtuple_t</a> **vrow, ulint v_status, <a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *lob_undo)</td></tr>
<tr class="memdesc:a0b355a2322627ee073a9585ca24fb7d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a previous version of a clustered index record.  <a href="#a0b355a2322627ee073a9585ca24fb7d1">More...</a><br /></td></tr>
<tr class="separator:a0b355a2322627ee073a9585ca24fb7d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a41486ecad84531c6f852c73288ce4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a21a41486ecad84531c6f852c73288ce4">trx_undo_parse_add_undo_rec</a> (<a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>)</td></tr>
<tr class="memdesc:a21a41486ecad84531c6f852c73288ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a redo log record of adding an undo log record.  <a href="#a21a41486ecad84531c6f852c73288ce4">More...</a><br /></td></tr>
<tr class="separator:a21a41486ecad84531c6f852c73288ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9356d49e12323fc80c96cd83dd2cf938"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a9356d49e12323fc80c96cd83dd2cf938">trx_undo_parse_erase_page_end</a> (<a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *end_ptr, <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a9356d49e12323fc80c96cd83dd2cf938"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a redo log record of erasing of an undo page end.  <a href="#a9356d49e12323fc80c96cd83dd2cf938">More...</a><br /></td></tr>
<tr class="separator:a9356d49e12323fc80c96cd83dd2cf938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f0a7c02bc5673d59ebec7ceaad7862"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a51f0a7c02bc5673d59ebec7ceaad7862">trx_undo_rec_get_col_val</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **field, ulint *len, ulint *orig_len)</td></tr>
<tr class="memdesc:a51f0a7c02bc5673d59ebec7ceaad7862"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from an undo log record a non-virtual column value.  <a href="#a51f0a7c02bc5673d59ebec7ceaad7862">More...</a><br /></td></tr>
<tr class="separator:a51f0a7c02bc5673d59ebec7ceaad7862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a343761be8957a62e701c95166e2081a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a343761be8957a62e701c95166e2081a1">trx_undo_read_v_cols</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *row, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> in_purge, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> online, const ulint *col_map, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a343761be8957a62e701c95166e2081a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read virtual column value from undo log.  <a href="#a343761be8957a62e701c95166e2081a1">More...</a><br /></td></tr>
<tr class="separator:a343761be8957a62e701c95166e2081a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc4a542764a35a68b6e6b7f056aa0e60"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#afc4a542764a35a68b6e6b7f056aa0e60">trx_undo_read_v_idx</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> first_v_col, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *is_undo_log, ulint *field_no)</td></tr>
<tr class="memdesc:afc4a542764a35a68b6e6b7f056aa0e60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read virtual column index from undo log or online log if the log contains such info, and in the undo log case, verify the column is still indexed, and output its position.  <a href="#afc4a542764a35a68b6e6b7f056aa0e60">More...</a><br /></td></tr>
<tr class="separator:afc4a542764a35a68b6e6b7f056aa0e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2322117e1e3b2610ff39a17e60f1b8e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a2322117e1e3b2610ff39a17e60f1b8e3">trx_undo_rec_get_pars</a> (<a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *undo_rec, ulint *type, ulint *cmpl_info, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *updated_extern, <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> *undo_no, <a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> *table_id, <a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a> &amp;type_cmpl)</td></tr>
<tr class="memdesc:a2322117e1e3b2610ff39a17e60f1b8e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from an undo log record the general parameters.  <a href="#a2322117e1e3b2610ff39a17e60f1b8e3">More...</a><br /></td></tr>
<tr class="separator:a2322117e1e3b2610ff39a17e60f1b8e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff965f452d447f88d7d5cfb7f042bd58"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#aff965f452d447f88d7d5cfb7f042bd58">trx_undo_max_free_space</a> ()</td></tr>
<tr class="memdesc:aff965f452d447f88d7d5cfb7f042bd58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the max free space of undo log by assuming it's a fresh new page and the free space doesn't count for the undo log header too.  <a href="#aff965f452d447f88d7d5cfb7f042bd58">More...</a><br /></td></tr>
<tr class="separator:aff965f452d447f88d7d5cfb7f042bd58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afddad8a35a6f71bb6dc604d772b1832b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#afddad8a35a6f71bb6dc604d772b1832b">trx_undo_rec_is_multi_value</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *undo_rec)</td></tr>
<tr class="memdesc:afddad8a35a6f71bb6dc604d772b1832b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide if the following undo log record is a multi-value virtual column.  <a href="#afddad8a35a6f71bb6dc604d772b1832b">More...</a><br /></td></tr>
<tr class="separator:afddad8a35a6f71bb6dc604d772b1832b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1043e8db416626276800c8da5637ab8e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trx0rec_8h.html#a1043e8db416626276800c8da5637ab8e">trx_undo_rec_get_multi_value</a> (const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="el" href="structdfield__t.html">dfield_t</a> *field, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:a1043e8db416626276800c8da5637ab8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from an undo log record of a multi-value virtual column.  <a href="#a1043e8db416626276800c8da5637ab8e">More...</a><br /></td></tr>
<tr class="separator:a1043e8db416626276800c8da5637ab8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transaction undo log record. </p>
<p>Created 3/26/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac7e3157451dbb20e57c176474aba8196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7e3157451dbb20e57c176474aba8196">&#9670;&nbsp;</a></span>TRX_UNDO_CMPL_INFO_MULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_CMPL_INFO_MULT</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">16 <span class="comment">/* compilation info is multiplied by \</span></div><div class="line"><span class="comment">     this and ORed to the type above */</span></div></div><!-- fragment -->
</div>
</div>
<a id="a81d03d47210ccfb93579a4fb30bbbee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81d03d47210ccfb93579a4fb30bbbee1">&#9670;&nbsp;</a></span>TRX_UNDO_DEL_MARK_REC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_DEL_MARK_REC</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">14 <span class="comment">/* delete marking of a record; fields \</span></div><div class="line"><span class="comment">     do not change */</span></div></div><!-- fragment -->
</div>
</div>
<a id="a30c05f98e384bce86a905b7f694f3cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c05f98e384bce86a905b7f694f3cca">&#9670;&nbsp;</a></span>TRX_UNDO_GET_OLD_V_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_GET_OLD_V_VALUE&#160;&#160;&#160;0x2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This tells trx_undo_prev_version_build() to fetch the old value in the undo log (which is the after image for an update) </p>

</div>
</div>
<a id="a89624e3de13054fc0c468b458bb892b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89624e3de13054fc0c468b458bb892b1">&#9670;&nbsp;</a></span>TRX_UNDO_INSERT_OP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_INSERT_OP&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a68638a104879e7d71a298f105e931a12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68638a104879e7d71a298f105e931a12">&#9670;&nbsp;</a></span>TRX_UNDO_INSERT_REC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_INSERT_REC&#160;&#160;&#160;11 /* fresh insert into clustered <a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a> */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa1034d3bdf5448388235380b1876be79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1034d3bdf5448388235380b1876be79">&#9670;&nbsp;</a></span>TRX_UNDO_MODIFY_BLOB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_MODIFY_BLOB</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">64 <span class="comment">/* If this bit is set in type_cmpl,  \</span></div><div class="line"><span class="comment">     then the undo log record has support \</span></div><div class="line"><span class="comment">     for partial update of BLOBs. Also to \</span></div><div class="line"><span class="comment">     make the undo log format extensible, \</span></div><div class="line"><span class="comment">     introducing a new flag next to the   \</span></div><div class="line"><span class="comment">     type_cmpl flag. */</span></div></div><!-- fragment -->
</div>
</div>
<a id="a0c5248a5e8a2db6408ecd658de204eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c5248a5e8a2db6408ecd658de204eb9">&#9670;&nbsp;</a></span>TRX_UNDO_MODIFY_OP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_MODIFY_OP&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adaee338d1ea2904c4a781ea0499d78d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaee338d1ea2904c4a781ea0499d78d9">&#9670;&nbsp;</a></span>TRX_UNDO_PREV_IN_PURGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_PREV_IN_PURGE&#160;&#160;&#160;0x1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>status bit used for trx_undo_prev_version_build() </p>
<p>TRX_UNDO_PREV_IN_PURGE tells trx_undo_prev_version_build() that it is being called purge view and we would like to get the purge record even it is in the purge view (in normal case, it will return without fetching the purge record </p>

</div>
</div>
<a id="aa33615de4352554c23bc129777776c50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa33615de4352554c23bc129777776c50">&#9670;&nbsp;</a></span>trx_undo_rec_get_ptr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define trx_undo_rec_get_ptr</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">undo_rec, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">undo_no&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((undo_rec) + trx_undo_rec_get_offset(undo_no))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the start of the undo record data area. </p>

</div>
</div>
<a id="adad68e3a0bdf312e5ac4231cae931f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad68e3a0bdf312e5ac4231cae931f7c">&#9670;&nbsp;</a></span>TRX_UNDO_UPD_DEL_REC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_UPD_DEL_REC</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">13 <span class="comment">/* update of a delete marked record to \</span></div><div class="line"><span class="comment">     a not delete marked record; also the   \</span></div><div class="line"><span class="comment">     fields of the record can change */</span></div></div><!-- fragment -->
</div>
</div>
<a id="ab3bb6122832fe57dc4a20e56484d7e9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3bb6122832fe57dc4a20e56484d7e9f">&#9670;&nbsp;</a></span>TRX_UNDO_UPD_EXIST_REC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_UPD_EXIST_REC</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">12 <span class="comment">/* update of a non-delete-marked \</span></div><div class="line"><span class="comment">     record */</span></div></div><!-- fragment -->
</div>
</div>
<a id="a80d5348d1a573af4aef6f3d08eadaeba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80d5348d1a573af4aef6f3d08eadaeba">&#9670;&nbsp;</a></span>TRX_UNDO_UPD_EXTERN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_UNDO_UPD_EXTERN</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">128 <span class="comment">/* This bit can be ORed to type_cmpl \</span></div><div class="line"><span class="comment">      to denote that we updated external   \</span></div><div class="line"><span class="comment">      storage fields: used by purge to     \</span></div><div class="line"><span class="comment">      free the external storage */</span></div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aff965f452d447f88d7d5cfb7f042bd58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff965f452d447f88d7d5cfb7f042bd58">&#9670;&nbsp;</a></span>trx_undo_max_free_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t trx_undo_max_free_space </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the max free space of undo log by assuming it's a fresh new page and the free space doesn't count for the undo log header too. </p>

</div>
</div>
<a id="a21a41486ecad84531c6f852c73288ce4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a41486ecad84531c6f852c73288ce4">&#9670;&nbsp;</a></span>trx_undo_parse_add_undo_rec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_parse_add_undo_rec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a redo log record of adding an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL in: page or NULL</dd>
<dd>
end of log record or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9356d49e12323fc80c96cd83dd2cf938"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9356d49e12323fc80c96cd83dd2cf938">&#9670;&nbsp;</a></span>trx_undo_parse_erase_page_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_parse_erase_page_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>end_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a redo log record of erasing of an undo page end. </p>
<dl class="section return"><dt>Returns</dt><dd>end of log record or NULL in: mtr or NULL</dd>
<dd>
end of log record or NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: buffer </td></tr>
    <tr><td class="paramname">end_ptr</td><td>in: buffer end </td></tr>
    <tr><td class="paramname">page</td><td>in: page or NULL </td></tr>
    <tr><td class="paramname">mtr</td><td>in: mtr or NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0b355a2322627ee073a9585ca24fb7d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b355a2322627ee073a9585ca24fb7d1">&#9670;&nbsp;</a></span>trx_undo_prev_version_build()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trx_undo_prev_version_build </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>index_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>index_mtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> **&#160;</td>
          <td class="paramname"><em>old_vers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>v_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>vrow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>v_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *&#160;</td>
          <td class="paramname"><em>lob_undo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a previous version of a clustered index record. </p>
<p>The caller must hold a latch on the index page of the clustered index record. If the vrow passed to this function is not null, then this function will store information about virtual columns from the requested version in vrow, unless the change did not affect any secondary index nor ordering field of clustered index (the change has UPD_NODE_NO_ORD_CHANGE flag) in which case the requested information can not be reconstructed from undo log, and the caller may assume that the (virtual) columns of secondary index have the same values they have in the more recent version (the one <code>rec</code> comes from). Equivalently, if the vrow is not returned, it is either because it was not requested, or not available due to UPD_NODE_NO_ORD_CHANGE. Obviously vrow is also not set in case rec is the oldest version in history, in which case we also set old_vers to NULL. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index_rec</td><td>clustered index record in the index tree </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index_mtr</td><td>mtr which contains the latch to index_rec page and purge_view </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rec</td><td>version of a clustered index record </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>clustered index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">offsets</td><td>rec_get_offsets(rec, index) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">heap</td><td>memory heap from which the memory needed is allocated </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">old_vers</td><td>previous version, or NULL if rec is the first inserted version, or if history data has been deleted </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_heap</td><td>memory heap used to create vrow dtuple if it is not yet created. This heap diffs from "heap" above in that it could be prebuilt-&gt;old_vers_heap for selection </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">vrow</td><td>virtual column info, if any </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_status</td><td>status determine if it is going into this function by purge thread or not. And if we read "after image" of undo log has been rebuilt </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lob_undo</td><td>LOB undo information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if previous version was built, or if it was an insert or the table has been rebuilt </td></tr>
    <tr><td class="paramname">false</td><td>if the previous version is earlier than purge_view, or being purged, which means that it may have been removed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a343761be8957a62e701c95166e2081a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a343761be8957a62e701c95166e2081a1">&#9670;&nbsp;</a></span>trx_undo_read_v_cols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_undo_read_v_cols </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>in_purge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>online</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>col_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read virtual column value from undo log. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>undo log pointer </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">row</td><td>the dtuple to fill </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">in_purge</td><td>called by purge thread </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">online</td><td>true if this is from online DDL log </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">col_map</td><td>online rebuild column map </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap to keep value when necessary </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afc4a542764a35a68b6e6b7f056aa0e60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc4a542764a35a68b6e6b7f056aa0e60">&#9670;&nbsp;</a></span>trx_undo_read_v_idx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_read_v_idx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>first_v_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>is_undo_log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>field_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read virtual column index from undo log or online log if the log contains such info, and in the undo log case, verify the column is still indexed, and output its position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>the table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>undo log pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">first_v_col</td><td>if this is the first virtual column, which has the version marker </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">is_undo_log</td><td>this function is used to parse both undo log, and online log for virtual columns. So check to see if this is undo log. When first_v_col is true, is_undo_log is output, when first_v_col is false, is_undo_log is input </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">field_no</td><td>the column number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>

</div>
</div>
<a id="af31abdf6a056c7fac0a3e2b4cc16929b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af31abdf6a056c7fac0a3e2b4cc16929b">&#9670;&nbsp;</a></span>trx_undo_rec_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a>* trx_undo_rec_copy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>undo_page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>undo_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies the undo record to the heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_page</td><td>Undo Page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_offset</td><td>offset of the undo record in the page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">heap</td><td>heap where copied </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>copy of undo log record </dd></dl>

</div>
</div>
<a id="a0f620ad159449f5ef50b0896f129b577"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f620ad159449f5ef50b0896f129b577">&#9670;&nbsp;</a></span>trx_undo_rec_get_cmpl_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint trx_undo_rec_get_cmpl_info </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an undo log record the record compiler info. </p>
<dl class="section return"><dt>Returns</dt><dd>compiler info in: undo log record </dd></dl>

</div>
</div>
<a id="a51f0a7c02bc5673d59ebec7ceaad7862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51f0a7c02bc5673d59ebec7ceaad7862">&#9670;&nbsp;</a></span>trx_undo_rec_get_col_val()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_col_val </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> **&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>orig_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from an undo log record a non-virtual column value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ptr</td><td>pointer to remaining part of the undo record </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">field</td><td>stored field </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len</td><td>length of the field, or UNIV_SQL_NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">orig_len</td><td>original length of the locally stored part of an externally stored column, or 0 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>

</div>
</div>
<a id="a1aebcafefa1ee5c243da7e9249c9f5e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aebcafefa1ee5c243da7e9249c9f5e2">&#9670;&nbsp;</a></span>trx_undo_rec_get_extern_storage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ibool trx_undo_rec_get_extern_storage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns TRUE if an undo log record contains an extern storage field. </p>
<dl class="section return"><dt>Returns</dt><dd>true if extern in: undo log record </dd></dl>

</div>
</div>
<a id="a1043e8db416626276800c8da5637ab8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1043e8db416626276800c8da5637ab8e">&#9670;&nbsp;</a></span>trx_undo_rec_get_multi_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_multi_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdfield__t.html">dfield_t</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from an undo log record of a multi-value virtual column. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>pointer to remaining part of the undo record </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">field</td><td>stored field, nullptr if the col is no longer indexed or existing, in the latter case, this function will only skip the log </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">heap</td><td>memory heap </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values </dd></dl>

</div>
</div>
<a id="a2322117e1e3b2610ff39a17e60f1b8e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2322117e1e3b2610ff39a17e60f1b8e3">&#9670;&nbsp;</a></span>trx_undo_rec_get_pars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_pars </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>cmpl_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>updated_extern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> *&#160;</td>
          <td class="paramname"><em>undo_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> *&#160;</td>
          <td class="paramname"><em>table_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a> &amp;&#160;</td>
          <td class="paramname"><em>type_cmpl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an undo log record the general parameters. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values out: type compilation info.</dd>
<dd>
remaining part of undo log record after reading these values </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">undo_rec</td><td>in: undo log record </td></tr>
    <tr><td class="paramname">type</td><td>out: undo record type: TRX_UNDO_INSERT_REC, ... </td></tr>
    <tr><td class="paramname">cmpl_info</td><td>out: compiler info, relevant only for update type records </td></tr>
    <tr><td class="paramname">updated_extern</td><td>out: true if we updated an externally stored fild </td></tr>
    <tr><td class="paramname">undo_no</td><td>out: undo log record number </td></tr>
    <tr><td class="paramname">table_id</td><td>out: table id </td></tr>
    <tr><td class="paramname">type_cmpl</td><td>out: type compilation info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a59e51ec89401164642aa4bf9e329858d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e51ec89401164642aa4bf9e329858d">&#9670;&nbsp;</a></span>trx_undo_rec_get_partial_row()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_partial_row </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>ignore_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds a partial row from an update undo log record, for purge. </p>
<p>It contains the columns which occur as ordering in any index of the table. Any missing columns are indicated by col-&gt;mtype == DATA_MISSING. </p><dl class="section return"><dt>Returns</dt><dd>pointer to remaining part of undo record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part in update undo log record of a suitable type, at the start of the stored index columns; NOTE that this copy of the undo log record must be preserved as long as the partial row is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">row</td><td>out, own: partial row </td></tr>
    <tr><td class="paramname">ignore_prefix</td><td>in: flag to indicate if we expect blob prefixes in undo. Used only in the assertion. </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af342f2995de54e084d2ea5e042f50c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af342f2995de54e084d2ea5e042f50c6c">&#9670;&nbsp;</a></span>trx_undo_rec_get_row_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_rec_get_row_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdtuple__t.html">dtuple_t</a> **&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds a row reference from an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to remaining part of undo record in: memory heap from which the memory needed is allocated</dd>
<dd>
pointer to remaining part of undo record </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part of a copy of an undo log record, at the start of the row reference; NOTE that this copy of the undo log record must be preserved as long as the row reference is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">ref</td><td>out, own: row reference </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afabb59f72f20367f7d622b40ce1eda7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afabb59f72f20367f7d622b40ce1eda7e">&#9670;&nbsp;</a></span>trx_undo_rec_get_table_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> trx_undo_rec_get_table_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an undo log record the table ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_rec</td><td>Undo log record </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the table ID </dd></dl>

</div>
</div>
<a id="ac16587ee578cdb99b41525cd4a9e3658"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac16587ee578cdb99b41525cd4a9e3658">&#9670;&nbsp;</a></span>trx_undo_rec_get_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint trx_undo_rec_get_type </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the undo log record type. </p>
<dl class="section return"><dt>Returns</dt><dd>record type in: undo log record </dd></dl>

</div>
</div>
<a id="a06cc7356840b50f7c121dd50ecad82a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06cc7356840b50f7c121dd50ecad82a2">&#9670;&nbsp;</a></span>trx_undo_rec_get_undo_no()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="trx0types_8h.html#a4661d2883c1cd5d8f1cfbd63b553f1bc">undo_no_t</a> trx_undo_rec_get_undo_no </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="trx0types_8h.html#a0b302ec5d015d6388eb98277b58048c7">trx_undo_rec_t</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the undo log record number. </p>
<dl class="section return"><dt>Returns</dt><dd>undo no in: undo log record </dd></dl>

</div>
</div>
<a id="afddad8a35a6f71bb6dc604d772b1832b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afddad8a35a6f71bb6dc604d772b1832b">&#9670;&nbsp;</a></span>trx_undo_rec_is_multi_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> trx_undo_rec_is_multi_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>undo_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decide if the following undo log record is a multi-value virtual column. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_rec</td><td>undo log record </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if this is a multi-value virtual column log, otherwise false </dd></dl>

</div>
</div>
<a id="a9b4faef28fe9a4375884b236e33d740e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b4faef28fe9a4375884b236e33d740e">&#9670;&nbsp;</a></span>trx_undo_report_row_operation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> trx_undo_report_row_operation </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>op_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>clust_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structupd__t.html">upd_t</a> *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>cmpl_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes information to an undo log about an insert, update, or a delete marking of a clustered index record. </p>
<p>This information is used in a rollback of the transaction and in consistent reads that must look to the history of this transaction. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>in: if BTR_NO_UNDO_LOG_FLAG bit is set, does nothing </td></tr>
    <tr><td class="paramname">op_type</td><td>in: TRX_UNDO_INSERT_OP or TRX_UNDO_MODIFY_OP </td></tr>
    <tr><td class="paramname">thr</td><td>in: query thread </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">clust_entry</td><td>in: in the case of an insert, index entry to insert into the clustered index, otherwise NULL </td></tr>
    <tr><td class="paramname">update</td><td>in: in the case of an update, the update vector, otherwise NULL </td></tr>
    <tr><td class="paramname">cmpl_info</td><td>in: compiler info on secondary index updates </td></tr>
    <tr><td class="paramname">rec</td><td>in: in case of an update or delete marking, the record in the clustered index, otherwise NULL </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec) </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: rollback pointer to the inserted undo log record, 0 if BTR_NO_UNDO_LOG flag was specified </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a324bbc5d0dd2ad6bcf2caf37ea2ef88a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a324bbc5d0dd2ad6bcf2caf37ea2ef88a">&#9670;&nbsp;</a></span>trx_undo_update_rec_get_sys_cols()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_update_rec_get_sys_cols </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> *&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a> *&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>info_bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from an undo log update record the system field values of the old version. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of undo log record after reading these values out: info bits state</dd>
<dd>
remaining part of undo log record after reading these values </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part of undo log record after reading general parameters </td></tr>
    <tr><td class="paramname">trx_id</td><td>out: trx id </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>out: roll ptr </td></tr>
    <tr><td class="paramname">info_bits</td><td>out: info bits state </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a302b5ca1f95234d5ad91b3d34227423e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a302b5ca1f95234d5ad91b3d34227423e">&#9670;&nbsp;</a></span>trx_undo_update_rec_get_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* trx_undo_update_rec_get_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#ad3ccac613ce33a8680d147c4a4f12e94">roll_ptr_t</a>&#160;</td>
          <td class="paramname"><em>roll_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>info_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structupd__t.html">upd_t</a> **&#160;</td>
          <td class="paramname"><em>upd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlob_1_1undo__vers__t.html">lob::undo_vers_t</a> *&#160;</td>
          <td class="paramname"><em>lob_undo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtype__cmpl__t.html">type_cmpl_t</a> &amp;&#160;</td>
          <td class="paramname"><em>type_cmpl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Builds an update vector based on a remaining part of an undo log record. </p>
<dl class="section return"><dt>Returns</dt><dd>remaining part of the record, NULL if an error detected, which means that the record is corrupted. out: type compilation info</dd>
<dd>
remaining part of the record, NULL if an error detected, which means that the record is corrupted </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>in: remaining part in update undo log record, after reading the row reference NOTE that this copy of the undo log record must be preserved as long as the update vector is used, as we do NOT copy the data in the record! </td></tr>
    <tr><td class="paramname">index</td><td>in: clustered index </td></tr>
    <tr><td class="paramname">type</td><td>in: TRX_UNDO_UPD_EXIST_REC, TRX_UNDO_UPD_DEL_REC, or TRX_UNDO_DEL_MARK_REC; in the last case, only trx id and roll ptr fields are added to the update vector </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction id from this undo record </td></tr>
    <tr><td class="paramname">roll_ptr</td><td>in: roll pointer from this undo record </td></tr>
    <tr><td class="paramname">info_bits</td><td>in: info bits from this undo record </td></tr>
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">heap</td><td>in: memory heap from which the memory needed is allocated </td></tr>
    <tr><td class="paramname">upd</td><td>out, own: update vector </td></tr>
    <tr><td class="paramname">lob_undo</td><td>out: LOB undo information. </td></tr>
    <tr><td class="paramname">type_cmpl</td><td>out: type compilation info </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="trx0rec_8h.html">trx0rec.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
