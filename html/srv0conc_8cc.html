<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/srv/srv0conc.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('srv0conc_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">srv0conc.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>InnoDB concurrency manager.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="service__thd__wait_8h_source.html">mysql/service_thd_wait.h</a>&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &quot;<a class="el" href="dict0dict_8h_source.html">dict0dict.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ha__prototypes_8h_source.html">ha_prototypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0mysql_8h_source.html">row0mysql.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0srv_8h_source.html">srv0srv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsrv__conc__t.html">srv_conc_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variables tracking the active and waiting threads.  <a href="structsrv__conc__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aae7987790787e895c0faf28f4b2265d8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#aae7987790787e895c0faf28f4b2265d8">srv_enter_innodb_with_tickets</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:aae7987790787e895c0faf28f4b2265d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Note that a user thread is entering InnoDB.  <a href="#aae7987790787e895c0faf28f4b2265d8">More...</a><br /></td></tr>
<tr class="separator:aae7987790787e895c0faf28f4b2265d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7bea384d4c78fd484eac5688ce7e35c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#aa7bea384d4c78fd484eac5688ce7e35c">srv_conc_enter_innodb_with_atomics</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:aa7bea384d4c78fd484eac5688ce7e35c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the scheduling of a user thread that wants to enter InnoDB.  <a href="#aa7bea384d4c78fd484eac5688ce7e35c">More...</a><br /></td></tr>
<tr class="separator:aa7bea384d4c78fd484eac5688ce7e35c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413b879559e15f3ed4fed8cfb228e5a3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#a413b879559e15f3ed4fed8cfb228e5a3">srv_conc_exit_innodb_with_atomics</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a413b879559e15f3ed4fed8cfb228e5a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Note that a user thread is leaving InnoDB code.  <a href="#a413b879559e15f3ed4fed8cfb228e5a3">More...</a><br /></td></tr>
<tr class="separator:a413b879559e15f3ed4fed8cfb228e5a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a972b5604fed56a64cea5ec085164b2fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#a972b5604fed56a64cea5ec085164b2fd">srv_conc_enter_innodb</a> (<a class="el" href="structrow__prebuilt__t.html">row_prebuilt_t</a> *prebuilt)</td></tr>
<tr class="memdesc:a972b5604fed56a64cea5ec085164b2fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts an OS thread to wait if there are too many concurrent threads (&gt;= srv_thread_concurrency) inside InnoDB.  <a href="#a972b5604fed56a64cea5ec085164b2fd">More...</a><br /></td></tr>
<tr class="separator:a972b5604fed56a64cea5ec085164b2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd281f2009e2717ab671d2ed58cac5e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#afd281f2009e2717ab671d2ed58cac5e3">srv_conc_force_enter_innodb</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:afd281f2009e2717ab671d2ed58cac5e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This lets a thread enter InnoDB regardless of the number of threads inside InnoDB.  <a href="#afd281f2009e2717ab671d2ed58cac5e3">More...</a><br /></td></tr>
<tr class="separator:afd281f2009e2717ab671d2ed58cac5e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f9911b687fec2e80bbac3bb0f50342b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#a3f9911b687fec2e80bbac3bb0f50342b">srv_conc_force_exit_innodb</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a3f9911b687fec2e80bbac3bb0f50342b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This must be called when a thread exits InnoDB in a lock wait or at the end of an SQL statement.  <a href="#a3f9911b687fec2e80bbac3bb0f50342b">More...</a><br /></td></tr>
<tr class="separator:a3f9911b687fec2e80bbac3bb0f50342b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9275d5353d50fe95261d59522ce15d35"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#a9275d5353d50fe95261d59522ce15d35">srv_conc_get_waiting_threads</a> (void)</td></tr>
<tr class="memdesc:a9275d5353d50fe95261d59522ce15d35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the count of threads waiting inside InnoDB.  <a href="#a9275d5353d50fe95261d59522ce15d35">More...</a><br /></td></tr>
<tr class="separator:a9275d5353d50fe95261d59522ce15d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04f10342cf5ad803b8fed0b35f26f03f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#a04f10342cf5ad803b8fed0b35f26f03f">srv_conc_get_active_threads</a> (void)</td></tr>
<tr class="memdesc:a04f10342cf5ad803b8fed0b35f26f03f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the count of threads active inside InnoDB.  <a href="#a04f10342cf5ad803b8fed0b35f26f03f">More...</a><br /></td></tr>
<tr class="separator:a04f10342cf5ad803b8fed0b35f26f03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa45841bf8131629058efee6d466073c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#aa45841bf8131629058efee6d466073c4">srv_n_free_tickets_to_enter</a> = 500</td></tr>
<tr class="memdesc:aa45841bf8131629058efee6d466073c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of times a thread is allowed to enter InnoDB within the same SQL query after it has once got the ticket.  <a href="#aa45841bf8131629058efee6d466073c4">More...</a><br /></td></tr>
<tr class="separator:aa45841bf8131629058efee6d466073c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ad0110d480d32024edb52fc3c3c2876"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#a9ad0110d480d32024edb52fc3c3c2876">srv_adaptive_max_sleep_delay</a> = 150000</td></tr>
<tr class="memdesc:a9ad0110d480d32024edb52fc3c3c2876"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum sleep delay (in micro-seconds), value of 0 disables it.  <a href="#a9ad0110d480d32024edb52fc3c3c2876">More...</a><br /></td></tr>
<tr class="separator:a9ad0110d480d32024edb52fc3c3c2876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed49551023a457895aa546d78493e185"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#aed49551023a457895aa546d78493e185">srv_thread_sleep_delay</a> = 10000</td></tr>
<tr class="memdesc:aed49551023a457895aa546d78493e185"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep delay for threads waiting to enter InnoDB.  <a href="#aed49551023a457895aa546d78493e185">More...</a><br /></td></tr>
<tr class="separator:aed49551023a457895aa546d78493e185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a635476db4318272e9ad8a961243e1a33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#a635476db4318272e9ad8a961243e1a33">srv_thread_concurrency</a> = 0</td></tr>
<tr class="memdesc:a635476db4318272e9ad8a961243e1a33"><td class="mdescLeft">&#160;</td><td class="mdescRight">The following controls how many threads we let inside InnoDB concurrently: threads waiting for locks are not counted into the number because otherwise we could get a deadlock.  <a href="#a635476db4318272e9ad8a961243e1a33">More...</a><br /></td></tr>
<tr class="separator:a635476db4318272e9ad8a961243e1a33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b03f0c17ccf345fd458c8d506f84c0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structsrv__conc__t.html">srv_conc_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="srv0conc_8cc.html#aa5b03f0c17ccf345fd458c8d506f84c0">srv_conc</a></td></tr>
<tr class="separator:aa5b03f0c17ccf345fd458c8d506f84c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>InnoDB concurrency manager. </p>
<p>Created 2011/04/18 Sunny Bains </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a972b5604fed56a64cea5ec085164b2fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a972b5604fed56a64cea5ec085164b2fd">&#9670;&nbsp;</a></span>srv_conc_enter_innodb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> srv_conc_enter_innodb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrow__prebuilt__t.html">row_prebuilt_t</a> *&#160;</td>
          <td class="paramname"><em>prebuilt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts an OS thread to wait if there are too many concurrent threads (&gt;= srv_thread_concurrency) inside InnoDB. </p>
<p>The threads wait in a FIFO queue. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">prebuilt</td><td>row prebuilt handler </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Innodb error code. </dd></dl>

</div>
</div>
<a id="aa7bea384d4c78fd484eac5688ce7e35c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7bea384d4c78fd484eac5688ce7e35c">&#9670;&nbsp;</a></span>srv_conc_enter_innodb_with_atomics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> srv_conc_enter_innodb_with_atomics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle the scheduling of a user thread that wants to enter InnoDB. </p>
<p>Setting srv_adaptive_max_sleep_delay &gt; 0 switches the adaptive sleep calibration to ON. When set, we want to wait in the queue for as little time as possible. However, very short waits will result in a lot of context switches and that is also not desirable. When threads need to sleep multiple times we increment os_thread_sleep_delay by one. When we see threads getting a slot without waiting and there are no other threads waiting in the queue, we try and reduce the wait as much as we can. Currently we reduce it by half each time. If the thread only had to wait for one turn before it was able to enter InnoDB we decrement it by one. This is to try and keep the sleep time stable around the "optimum" sleep time. </p><dl class="section return"><dt>Returns</dt><dd>InnoDB error code. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction that wants to enter InnoDB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a413b879559e15f3ed4fed8cfb228e5a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a413b879559e15f3ed4fed8cfb228e5a3">&#9670;&nbsp;</a></span>srv_conc_exit_innodb_with_atomics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void srv_conc_exit_innodb_with_atomics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Note that a user thread is leaving InnoDB code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afd281f2009e2717ab671d2ed58cac5e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd281f2009e2717ab671d2ed58cac5e3">&#9670;&nbsp;</a></span>srv_conc_force_enter_innodb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_conc_force_enter_innodb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This lets a thread enter InnoDB regardless of the number of threads inside InnoDB. </p>
<p>This must be called when a thread ends a lock wait. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction object associated with the thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3f9911b687fec2e80bbac3bb0f50342b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f9911b687fec2e80bbac3bb0f50342b">&#9670;&nbsp;</a></span>srv_conc_force_exit_innodb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_conc_force_exit_innodb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This must be called when a thread exits InnoDB in a lock wait or at the end of an SQL statement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction object associated with the thread </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a04f10342cf5ad803b8fed0b35f26f03f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04f10342cf5ad803b8fed0b35f26f03f">&#9670;&nbsp;</a></span>srv_conc_get_active_threads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t srv_conc_get_active_threads </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the count of threads active inside InnoDB. </p>

</div>
</div>
<a id="a9275d5353d50fe95261d59522ce15d35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9275d5353d50fe95261d59522ce15d35">&#9670;&nbsp;</a></span>srv_conc_get_waiting_threads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t srv_conc_get_waiting_threads </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the count of threads waiting inside InnoDB. </p>

</div>
</div>
<a id="aae7987790787e895c0faf28f4b2265d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae7987790787e895c0faf28f4b2265d8">&#9670;&nbsp;</a></span>srv_enter_innodb_with_tickets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void srv_enter_innodb_with_tickets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Note that a user thread is entering InnoDB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in/out: transaction that wants to enter InnoDB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a9ad0110d480d32024edb52fc3c3c2876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad0110d480d32024edb52fc3c3c2876">&#9670;&nbsp;</a></span>srv_adaptive_max_sleep_delay</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> srv_adaptive_max_sleep_delay = 150000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum sleep delay (in micro-seconds), value of 0 disables it. </p>

</div>
</div>
<a id="aa5b03f0c17ccf345fd458c8d506f84c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5b03f0c17ccf345fd458c8d506f84c0">&#9670;&nbsp;</a></span>srv_conc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsrv__conc__t.html">srv_conc_t</a> srv_conc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa45841bf8131629058efee6d466073c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa45841bf8131629058efee6d466073c4">&#9670;&nbsp;</a></span>srv_n_free_tickets_to_enter</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> srv_n_free_tickets_to_enter = 500</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of times a thread is allowed to enter InnoDB within the same SQL query after it has once got the ticket. </p>

</div>
</div>
<a id="a635476db4318272e9ad8a961243e1a33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a635476db4318272e9ad8a961243e1a33">&#9670;&nbsp;</a></span>srv_thread_concurrency</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> srv_thread_concurrency = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The following controls how many threads we let inside InnoDB concurrently: threads waiting for locks are not counted into the number because otherwise we could get a deadlock. </p>
<p>Value of 0 will disable the concurrency check. </p>

</div>
</div>
<a id="aed49551023a457895aa546d78493e185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed49551023a457895aa546d78493e185">&#9670;&nbsp;</a></span>srv_thread_sleep_delay</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> srv_thread_sleep_delay = 10000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleep delay for threads waiting to enter InnoDB. </p>
<p>In micro-seconds. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_ce7b78e3b9fb70718702eb843d7f3421.html">srv</a></li><li class="navelem"><a class="el" href="srv0conc_8cc.html">srv0conc.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
