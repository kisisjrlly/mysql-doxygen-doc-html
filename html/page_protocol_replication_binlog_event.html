<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Binlog Event</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_protocol_replication_binlog_event.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Binlog Event </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The events contain the actual data that should be shipped from the master to the slave.</p>
<p>Depending on the use, different events are sent.</p>
<h1><a class="anchor" id="sect_protocol_replication_binlog_event_mgmt"></a>
Binlog Management</h1>
<p>The first event is either a <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_start_v3">START_EVENT_V3</a> or a <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_format_desc">FORMAT_DESCRIPTION_EVENT</a> while the last event is either a <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_stop">STOP_EVENT</a> or <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_rotate">ROTATE_EVENT</a>.</p>
<h2><a class="anchor" id="sect_protocol_replication_event_start_v3"></a>
START_EVENT_V3</h2>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Binlog::START_EVENT_V3:</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>binlog-version </td><td>Version of the binlog format. See <a class="el" href="page_protocol_replication.html#sect_protocol_replication_binlog_version">Binlog Version</a> </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_fix">string[50]</a> </td><td>mysql-server version </td><td>version of the MySQL Server that created the binlog. The string is evaluted to apply work-arounds in the slave.  </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int4">int&lt;4&gt;</a> </td><td>create-timestamp </td><td>seconds since Unix epoch when the binlog was created </td></tr>
</table>
<h2><a class="anchor" id="sect_protocol_replication_event_format_desc"></a>
FORMAT_DESCRIPTION_EVENT</h2>
<p>A format description event is the first event of a binlog for binlog <a class="el" href="page_protocol_replication.html#sect_protocol_replication_binlog_version_v4">Version 4</a>. It described how the other events are laid out.</p>
<dl class="section note"><dt>Note</dt><dd>Added in MySQL 5.0.0 as a replacement for <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_start_v3">START_EVENT_V3</a>.</dd></dl>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Payload</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>binlog-version </td><td>Version of the binlog format. See <a class="el" href="page_protocol_replication.html#sect_protocol_replication_binlog_version">Binlog Version</a> </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_fix">string[50]</a> </td><td>mysql-server version </td><td>version of the MySQL Server that created the binlog. The string is evaluted to apply work-arounds in the slave.  </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int4">int&lt;4&gt;</a> </td><td>create-timestamp </td><td>seconds since Unix epoch when the binlog was created </td></tr>
</table>
<p><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int1">int&lt;1&gt;</a> </p>
<p>event-header-length </p>
<p>Length of the <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_binlog_event_header">Binlog Event Header</a> of next events. Should always be 19. </p>
<p><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_eof">string&lt;EOF&gt;</a> </p>
<p>event type header lengths </p>
<p>a array indexed by <code>binlog-event-type - 1</code> to extract the length of the event specific header </p>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line">$ <a class="code" href="xcom__cache_8cc.html#afe16fd8b6041439b9fb6ff68b38316de">hexdump</a> -v -s 4 -C relay-bin.000001</div><div class="line">00000004  82 2d c2 4b 0f 02 00 00  00 67 00 00 00 6b 00 00  |.-.K.....g...k..|</div><div class="line">00000014  00 00 00 04 00 35 2e 35  2e 32 2d 6d 32 00 00 00  |.....5.5.2-m2...|</div><div class="line">00000024  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</div><div class="line">00000034  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</div><div class="line">00000044  00 00 00 00 00 00 00 82  2d c2 4b 13 38 0d 00 08  |........-.K.8...|</div><div class="line">00000054  00 12 00 04 04 04 04 12  00 00 54 00 04 1a 08 00  |..........T.....|</div><div class="line">00000064  00 00 08 08 08 02 00                              |........        |</div></div><!-- fragment --></dd></dl>
<p>For mysql-5.5.2-m2 the event specific header lengths are:</p>
<table class="doxtable">
<tr>
<th rowspan="2">Event Name</th><th colspan="3">Header Length </th></tr>
<tr>
<th>v4</th><th>v3</th><th>v1 </th></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_binlog_event_header">Binlog Event Header</a> </td><td colspan="2">19</td><td>13 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_start_v3">START_EVENT_V3</a> </td><td colspan="3">56 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query">QUERY_EVENT</a> </td><td>13</td><td colspan="2">11 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_stop">STOP_EVENT</a> </td><td colspan="3">0 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_rotate">ROTATE_EVENT</a> </td><td colspan="2">8</td><td>0 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_intvar">INTVAR_EVENT</a> </td><td colspan="3">0 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_load">LOAD_EVENT</a> </td><td colspan="3">18 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_slave">SLAVE_EVENT</a> </td><td colspan="3">0 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_create_file">CREATE_FILE_EVENT</a> </td><td colspan="3">4 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_append_block">APPEND_BLOCK_EVENT</a> </td><td colspan="3">4 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_exec_load">EXEC_LOAD_EVENT</a> </td><td colspan="3">4 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_delete_file">DELETE_FILE_EVENT</a> </td><td colspan="3">4 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_new_load">NEW_LOAD_EVENT</a> </td><td colspan="3">18 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_rand">RAND_EVENT</a> </td><td colspan="3">0 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_uservar">USER_VAR_EVENT</a> </td><td colspan="3">0 </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_format_desc">FORMAT_DESCRIPTION_EVENT</a> </td><td>84</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_xid">XID_EVENT</a> </td><td>0</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_load_query_begin">BEGIN_LOAD_QUERY_EVENT</a> </td><td>4</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_load_query_execute">EXECUTE_LOAD_QUERY_EVENT</a> </td><td>26</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_table_map">TABLE_MAP_EVENT</a> </td><td>8</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_delete_rows_v0">DELETE_ROWS_EVENTv0</a> </td><td>0</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_update_rows_v0">UPDATE_ROWS_EVENTv0</a> </td><td>0</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_write_rows_v0">WRITE_ROWS_EVENTv0</a> </td><td>0</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_delete_rows_v1">DELETE_ROWS_EVENTv1</a> </td><td>8/6</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_update_rows_v1">UPDATE_ROWS_EVENTv1</a> </td><td>8/6</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_write_rows_v1">WRITE_ROWS_EVENTv1</a> </td><td>8/6</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_incident">INCIDENT_EVENT</a> </td><td>2</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_heartbeat">HEARTBEAT_EVENT</a> </td><td>0</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_delete_rows_v2">DELETE_ROWS_EVENTv2</a> </td><td>10</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_update_rows_v2">UPDATE_ROWS_EVENTv2</a> </td><td>10</td><td colspan="2">&mdash; </td></tr>
<tr>
<td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_write_rows_v2">WRITE_ROWS_EVENTv2</a> </td><td>10</td><td colspan="2">&mdash; </td></tr>
</table>
<p>The <code>event-size</code> of <code>0x67</code> (<code>103</code>) minus the <code>event-header</code> length of <code>0x13</code> (<code>19</code>) should match the event type header length of the <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_format_desc">FORMAT_DESCRIPTION_EVENT</a> <code>0x54</code> (<code>84</code>).</p>
<p>The number of events understood by the master may differ from what the slave supports. It is calculated by:</p>
<div class="fragment"><div class="line">event_size - event_header_length - 2 - 50 - 4 - 1</div></div><!-- fragment --><p>For mysql-5.5.2-m2 it is <code>0x1b</code> (<code>27</code>).</p>
<h2><a class="anchor" id="sect_protocol_replication_event_stop"></a>
STOP_EVENT</h2>
<p>A <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_stop">STOP_EVENT</a> has not payload or post-header</p>
<h2><a class="anchor" id="sect_protocol_replication_event_rotate"></a>
ROTATE_EVENT</h2>
<p>The rotate event is added to the binlog as last event to tell the reader what binlog to request next.</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Post-header</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td colspan="3">if binlog-version &gt; 1 { </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int8">int&lt;8&gt;</a> </td><td>position </td><td></td></tr>
<tr>
<td colspan="3">} </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Payload</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_eof">string&lt;EOF&gt;</a> </td><td>binlog </td><td>name of the next binlog </td></tr>
</table>
<h2><a class="anchor" id="sect_protocol_replication_event_slave"></a>
SLAVE_EVENT</h2>
<dl class="section note"><dt>Note</dt><dd>Ignored !</dd></dl>
<h2><a class="anchor" id="sect_protocol_replication_event_incident"></a>
INCIDENT_EVENT</h2>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Payload</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>type </td><td><table class="doxtable">
<tr>
<th>Hex</th><th>Name </th></tr>
<tr>
<td>0x0000</td><td>INCIDENT_NONE </td></tr>
<tr>
<td>0x0001</td><td>INCIDENT_LOST_EVENTS  </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int1">int&lt;1&gt;</a> </td><td>message_length </td><td>Length of <code>message</code> </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_var">binary&lt;var&gt;</a> </td><td>message </td><td>Incident message with length <code>message_length</code> </td></tr>
</table>
<p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="sect_protocol_replication_event_heartbeat"></a>
HEARTBEAT_EVENT</h2>
<p>An artificial event genereted by the master. It isn't written to the relay logs.</p>
<p>It is added by the master after the replication connection was idle for <code>x</code> seconds to update the slave's `Seconds_behind_master timestamp in the SHOW SLAVE STATUS output.</p>
<p>It has no payload nor post-header.</p>
<h1><a class="anchor" id="sect_protocol_replication_binlog_event_sbr"></a>
Statement Based Replication Events</h1>
<p>Statement Based Replication or SBR sends the SQL queries a client sent to the master AS IS to the slave. It needs extra events to mimic the client connection's state on the slave side.</p>
<h2><a class="anchor" id="sect_protocol_replication_event_query"></a>
QUERY_EVENT</h2>
<p>The query event is used to send text queries through the binlod</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Post-header</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int4">int&lt;4&gt;</a> </td><td>slave_proxy_id </td><td></td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int4">int&lt;4&gt;</a> </td><td>execution time </td><td></td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int1">int&lt;1&gt;</a> </td><td>schema length </td><td></td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>error code </td><td></td></tr>
<tr>
<td colspan="3">if binlog-version &gt;= 4 { </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>status_vars length </td><td>Number of bytes in the following sequence of <code>status_vars</code> </td></tr>
<tr>
<td colspan="3">} </td></tr>
</table>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Payload</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_var">binary&lt;var&gt;</a> </td><td>status-vars </td><td><p class="starttd">A sequence of status key/value pairs. The key is 1-byte, while the value is dependent on the key </p><table class="doxtable">
<tr>
<th>Hex</th><th>Flag</th><th>Value Length </th></tr>
<tr>
<td>0x00</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_00">Q_FLAGS2_CODE</a> </td><td>4 </td></tr>
<tr>
<td>0x01</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_01">Q_SQL_MODE_CODE</a> </td><td>8 </td></tr>
<tr>
<td>0x02</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_02">Q_AUTO_INCREMENT</a> </td><td>1 + n + 1 </td></tr>
<tr>
<td>0x03</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_03">Q_CATALOG</a> </td><td>2 + 2 </td></tr>
<tr>
<td>0x04</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_04">Q_CHARSET_CODE</a> </td><td>2 + 2 + 2 </td></tr>
<tr>
<td>0x05</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_05">Q_TIME_ZONE_CODE</a> </td><td>1 + 1 </td></tr>
<tr>
<td>0x06</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_06">Q_CATALOG_NZ_CODE</a> </td><td>1 + n </td></tr>
<tr>
<td>0x07</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_07">Q_LC_TIME_NAMES_CODE</a> </td><td>2 </td></tr>
<tr>
<td>0x08</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_08">Q_CHARSET_DATABASE_CODE</a> </td><td>2 </td></tr>
<tr>
<td>0x09</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_09">Q_TABLE_MAP_FOR_UPDATE_CODE</a> </td><td>8 </td></tr>
<tr>
<td>0x0a</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_0a">Q_MASTER_DATA_WRITTEN_CODE</a> </td><td>4 </td></tr>
<tr>
<td>0x0b</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_0b">Q_INVOKERS</a> </td><td>1 + n + 1 + n </td></tr>
<tr>
<td>0x0c</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_0c">Q_UPDATED_DB_NAMES</a> </td><td>1 + n*nul-term-string </td></tr>
<tr>
<td>0x0d</td><td><a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_event_query_0d">Q_MICROSECONDS</a> </td><td>3 </td></tr>
</table>
<p>The value of the different status vars are:</p>
<p><a class="anchor" id="sect_protocol_replication_event_query_00"></a><b>Q_FLAGS2_CODE</b></p>
<p>Bitmask of flags that are usually set with the SET command:</p>
<p>SQL_AUTO_IS_NULL FOREIGN_KEY_CHECKS UNIQUE_CHECKS AUTOCOMMIT</p>
<table class="doxtable">
<tr>
<th>Hex</th><th>Flag </th></tr>
<tr>
<td>0x00004000</td><td>OPTION_AUTO_IS_NULL </td></tr>
<tr>
<td>0x00080000</td><td>OPTION_NOT_AUTOCOMMIT </td></tr>
<tr>
<td>0x04000000</td><td>OPTION_NO_FOREIGN_KEY_CHECKS </td></tr>
<tr>
<td>0x08000000</td><td>OPTION_RELAXED_UNIQUE_CHECKS </td></tr>
</table>
<p><a class="anchor" id="sect_protocol_replication_event_query_01"></a><b>Q_SQL_MODE_CODE</b></p>
<p>Bitmask of flags that are usually set with SET sql_mode:</p>
<table class="doxtable">
<tr>
<th>Hex</th><th>Flag </th></tr>
<tr>
<td>0x00000001</td><td>MODE_REAL_AS_FLOAT </td></tr>
<tr>
<td>0x00000002</td><td>MODE_PIPES_AS_CONCAT </td></tr>
<tr>
<td>0x00000004</td><td>MODE_ANSI_QUOTES </td></tr>
<tr>
<td>0x00000008</td><td>MODE_IGNORE_SPACE </td></tr>
<tr>
<td>0x00000010</td><td>MODE_NOT_USED </td></tr>
<tr>
<td>0x00000020</td><td>MODE_ONLY_FULL_GROUP_BY </td></tr>
<tr>
<td>0x00000040</td><td>MODE_NO_UNSIGNED_SUBTRACTION </td></tr>
<tr>
<td>0x00000080</td><td>MODE_NO_DIR_IN_CREATE </td></tr>
<tr>
<td>0x00000100</td><td>MODE_POSTGRESQL </td></tr>
<tr>
<td>0x00000200</td><td>MODE_ORACLE </td></tr>
<tr>
<td>0x00000400</td><td>MODE_MSSQL </td></tr>
<tr>
<td>0x00000800</td><td>MODE_DB2 </td></tr>
<tr>
<td>0x00001000</td><td>MODE_MAXDB </td></tr>
<tr>
<td>0x00002000</td><td>MODE_NO_KEY_OPTIONS </td></tr>
<tr>
<td>0x00004000</td><td>MODE_NO_TABLE_OPTIONS </td></tr>
<tr>
<td>0x00008000</td><td>MODE_NO_FIELD_OPTIONS </td></tr>
<tr>
<td>0x00010000</td><td>MODE_MYSQL323 </td></tr>
<tr>
<td>0x00020000</td><td>MODE_MYSQL40 </td></tr>
<tr>
<td>0x00040000</td><td>MODE_ANSI </td></tr>
<tr>
<td>0x00080000</td><td>MODE_NO_AUTO_VALUE_ON_ZERO </td></tr>
<tr>
<td>0x00100000</td><td>MODE_NO_BACKSLASH_ESCAPES </td></tr>
<tr>
<td>0x00200000</td><td>MODE_STRICT_TRANS_TABLES </td></tr>
<tr>
<td>0x00400000</td><td>MODE_STRICT_ALL_TABLES </td></tr>
<tr>
<td>0x00800000</td><td>MODE_NO_ZERO_IN_DATE </td></tr>
<tr>
<td>0x01000000</td><td>MODE_NO_ZERO_DATE </td></tr>
<tr>
<td>0x02000000</td><td>MODE_INVALID_DATES </td></tr>
<tr>
<td>0x04000000</td><td>MODE_ERROR_FOR_DIVISION_BY_ZERO </td></tr>
<tr>
<td>0x08000000</td><td>MODE_TRADITIONAL </td></tr>
<tr>
<td>0x10000000</td><td>MODE_NO_AUTO_CREATE_USER </td></tr>
<tr>
<td>0x20000000</td><td>MODE_HIGH_NOT_PRECEDENCE </td></tr>
<tr>
<td>0x40000000</td><td>MODE_NO_ENGINE_SUBSTITUTION </td></tr>
<tr>
<td>0x80000000</td><td>MODE_PAD_CHAR_TO_FULL_LENGTH </td></tr>
</table>
<p><a class="anchor" id="sect_protocol_replication_event_query_02"></a><b>Q_AUTO_INCREMENT</b></p>
<p>2 byte autoincrement-increment and 2 byte autoincrement-offset</p>
<dl class="section note"><dt>Note</dt><dd>Only written if the -increment is &gt; 1</dd></dl>
<p><a class="anchor" id="sect_protocol_replication_event_query_03"></a><b>Q_CATALOG</b></p>
<p>1 byte length + &lt;length&gt; chars of the cataiog + &lsquo;0&lsquo;-char</p>
<dl class="section note"><dt>Note</dt><dd>Oly written if length &gt; 0</dd></dl>
<p><a class="anchor" id="sect_protocol_replication_event_query_04"></a><b>Q_CHARSET_CODE</b></p>
<p>2 bytes character_set_client + 2 bytes collation_connection + 2 bytes collation_server</p>
<p>See <a class="el" href="page_protocol_basic_character_set.html">Character Set</a></p>
<p><a class="anchor" id="sect_protocol_replication_event_query_05"></a><b>Q_TIME_ZONE_CODE</b></p>
<p>1 byte length + &lt;length&gt; chars of the timezone.</p>
<p>Timezone the master is in.</p>
<dl class="section note"><dt>Note</dt><dd>only written when length &gt; 0</dd></dl>
<p><a class="anchor" id="sect_protocol_replication_event_query_06"></a><b>Q_CATALOG_NZ_CODE</b></p>
<p>1 byte length + &lt;length&gt; chars of the catalog.</p>
<dl class="section note"><dt>Note</dt><dd>only written when length &gt; 0</dd></dl>
<p><a class="anchor" id="sect_protocol_replication_event_query_07"></a><b>Q_LC_TIME_NAMES_CODE</b></p>
<p>LC_TIME of the server. Defines how to parse week-, month and day-names in timestamps</p>
<dl class="section note"><dt>Note</dt><dd>only written when length &gt; 0</dd></dl>
<p><a class="anchor" id="sect_protocol_replication_event_query_08"></a><b>Q_CHARSET_DATABASE_CODE</b></p>
<p>character set and collation of the schema</p>
<p><a class="anchor" id="sect_protocol_replication_event_query_09"></a><b>Q_TABLE_MAP_FOR_UPDATE_CODE</b></p>
<p>a 64bit field ... should only be used in <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_binlog_event_rbr">Row Based Replication Events</a> and multi-table updates</p>
<p><a class="anchor" id="sect_protocol_replication_event_query_0a"></a><b>Q_MASTER_DATA_WRITTEN_CODE</b></p>
<p>4 byte ...</p>
<p><a class="anchor" id="sect_protocol_replication_event_query_0b"></a><b>Q_INVOKERS</b></p>
<p>1 byte length + &lt;length&gt; bytes username and 1 byte length + &lt;length&gt; bytes hostname</p>
<p><a class="anchor" id="sect_protocol_replication_event_query_0c"></a><b>Q_UPDATED_DB_NAMES</b></p>
<p>1 byte count + &lt;count&gt; \0 terminated string</p>
<p><a class="anchor" id="sect_protocol_replication_event_query_0d"></a><b>Q_MICROSECONDS</b></p>
<p>3 byte microseconds</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_var">binary&lt;var&gt;</a> </td><td>schema </td><td></td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_eof">binary&lt;eof&gt;</a> </td><td>query </td><td>text of the query </td></tr>
</table>
<h2><a class="anchor" id="sect_protocol_replication_event_intvar"></a>
INTVAR_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_rand"></a>
RAND_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_uservar"></a>
USER_VAR_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_xid"></a>
XID_EVENT</h2>
<h1><a class="anchor" id="sect_protocol_replication_binlog_event_rbr"></a>
Row Based Replication Events</h1>
<p>In Row Based replication the changed rows are sent to the slave which removes side-effects and makes it more reliable. Now all statements can be sent with RBR though. Most of the time you will see RBR and SBR side by side.</p>
<h2><a class="anchor" id="sect_protocol_replication_event_table_map"></a>
TABLE_MAP_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_delete_rows_v0"></a>
DELETE_ROWS_EVENTv0</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_update_rows_v0"></a>
UPDATE_ROWS_EVENTv0</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_write_rows_v0"></a>
WRITE_ROWS_EVENTv0</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_delete_rows_v1"></a>
DELETE_ROWS_EVENTv1</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_update_rows_v1"></a>
UPDATE_ROWS_EVENTv1</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_write_rows_v1"></a>
WRITE_ROWS_EVENTv1</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_delete_rows_v2"></a>
DELETE_ROWS_EVENTv2</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_update_rows_v2"></a>
UPDATE_ROWS_EVENTv2</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_write_rows_v2"></a>
WRITE_ROWS_EVENTv2</h2>
<h1><a class="anchor" id="sect_protocol_replication_binlog_event_load_file"></a>
LOAD INFILE replication</h1>
<p><code>LOAD DATA|XML INFILE</code> is a special SQL statement as it has to ship the files over to the slave too to execute the statement.</p>
<h2><a class="anchor" id="sect_protocol_replication_event_load"></a>
LOAD_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_create_file"></a>
CREATE_FILE_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_append_block"></a>
APPEND_BLOCK_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_exec_load"></a>
EXEC_LOAD_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_delete_file"></a>
DELETE_FILE_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_new_load"></a>
NEW_LOAD_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_load_query_begin"></a>
BEGIN_LOAD_QUERY_EVENT</h2>
<h2><a class="anchor" id="sect_protocol_replication_event_load_query_execute"></a>
EXECUTE_LOAD_QUERY_EVENT</h2>
<p>A binlog event starts with <a class="el" href="page_protocol_replication_binlog_event.html#sect_protocol_replication_binlog_event_header">Binlog Event Header</a> and is followed by a event specific part.</p>
<h1><a class="anchor" id="sect_protocol_replication_binlog_event_header"></a>
Binlog Event Header</h1>
<p>The binlog event header starts each event and is either 13 or 19 bytes long, depending on the <a class="el" href="page_protocol_replication.html#sect_protocol_replication_binlog_version">Binlog Version</a></p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Binlog::EventHeader:</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int4">int&lt;4&gt;</a> </td><td>timestamp </td><td>seconds since unix epoch </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int1">int&lt;1&gt;</a> </td><td>event_type </td><td>See binary_log::Log_event_type </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int4">int&lt;4&gt;</a> </td><td>server-id </td><td>server-id of the originating mysql-server. Used to filter out events in circular replication </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int4">int&lt;4&gt;</a> </td><td>event-size </td><td>size of the event (header, post-header, body) </td></tr>
<tr>
<td colspan="3">if binlog-version &gt; 1 { </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int4">int&lt;4&gt;</a> </td><td>log-pos </td><td>position of the next event </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>flags </td><td>See <a class="el" href="group__group__cs__binglog__event__header__flags.html">Binlog Event Header Flags</a> </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="PAGE_PROTOCOL.html">Client/Server Protocol</a></li><li class="navelem"><a class="el" href="page_protocol_connection_lifecycle.html">Connection Lifecycle</a></li><li class="navelem"><a class="el" href="page_protocol_replication.html">Replication Protocol</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
