<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/fil0fil.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fil0fil_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">fil0fil.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="fil0fil_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 1995, 2020, Oracle and/or its affiliates. All Rights Reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/fil0fil.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> The low-level file system</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> Created 10/25/1995 Heikki Tuuri</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *******************************************************/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifndef fil0fil_h</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define fil0fil_h</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;univ.i&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict0types_8h.html">dict0types.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fil0types_8h.html">fil0types.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log0recv_8h.html">log0recv.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="page0size_8h.html">page0size.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ibuf0types_8h.html">ibuf0types.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0new_8h.html">ut0new.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="m__ctype_8h.html">m_ctype.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="object__id_8h.html">sql/dd/object_id.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/** Maximum number of tablespaces to be scanned by a thread while scanning</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">for available tablespaces during server startup. This is a hard maximum.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">If the number of files to be scanned is more than</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">FIL_SCAN_MAX_TABLESPACES_PER_THREAD,</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">then additional threads will be spawned to scan the additional files in</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">parallel. */</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a26521056551ad399700a55e8e49745e4">   59</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a26521056551ad399700a55e8e49745e4">FIL_SCAN_MAX_TABLESPACES_PER_THREAD</a> = 8000;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/** Maximum number of threads that will be used for scanning the tablespace</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">files. This can be further adjusted depending on the number of available</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">cores. */</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a9e10bc654d78974b1d4b1e8ba140c919">   64</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a9e10bc654d78974b1d4b1e8ba140c919">FIL_SCAN_MAX_THREADS</a> = 16;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/** Number of threads per core. */</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a90582aba45e9663d7f3bc08ebec71461">   67</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a90582aba45e9663d7f3bc08ebec71461">FIL_SCAN_THREADS_PER_CORE</a> = 2;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/** Calculate the number of threads that can be spawned to scan the given</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">number of files taking into the consideration, number of cores available</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">on the machine.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">@param[in]      num_files       Number of files to be scanned</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">@return number of threads to be spawned for scanning the files */</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a639ac3ff903694600d0e20031f0ae6d7">fil_get_scan_threads</a>(<span class="keywordtype">size_t</span> num_files);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/** This tablespace name is used internally during file discovery to open a</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">general tablespace before the data dictionary is recovered and available. */</span></div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a042f765290ec32f0bb07bd739a6e3a2d">   78</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">char</span> <a class="code" href="fil0fil_8h.html#a042f765290ec32f0bb07bd739a6e3a2d">general_space_name</a>[] = <span class="stringliteral">&quot;innodb_general&quot;</span>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/** This tablespace name is used as the prefix for implicit undo tablespaces</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">and during file discovery to open an undo tablespace before the DD is</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">recovered and available. */</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a4a24b6c76a7d0ae9796aac709afe383d">   83</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">char</span> <a class="code" href="fil0fil_8h.html#a4a24b6c76a7d0ae9796aac709afe383d">undo_space_name</a>[] = <span class="stringliteral">&quot;innodb_undo&quot;</span>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#aac7270d128627843f3e29fcbb6ad2efc">recv_recovery_on</a>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#ifdef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#include &lt;unordered_set&gt;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">using</span> Dir_set = std::unordered_set&lt;std::string&gt;;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">extern</span> Dir_set rem_gen_ts_dirs;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> replay_in_datadir;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">// Forward declaration</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">struct </span><a class="code" href="structtrx__t.html">trx_t</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">class </span><a class="code" href="classpage__id__t.html">page_id_t</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a1f3f6b918269926839b130cc93599dcb">   98</a></span>&#160;<span class="keyword">using</span> <a class="code" href="fil0fil_8h.html#a1f3f6b918269926839b130cc93599dcb">Filenames</a> = std::vector&lt;std::string, ut_allocator&lt;std::string&gt;&gt;;</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a6c60fe65fadc68cfeb60b9c3ab103c23">   99</a></span>&#160;<span class="keyword">using</span> <a class="code" href="fil0fil_8h.html#a6c60fe65fadc68cfeb60b9c3ab103c23">Space_ids</a> = std::vector&lt;space_id_t, ut_allocator&lt;space_id_t&gt;&gt;;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/** File types */</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">  102</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a> : uint8_t {<span class="comment"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">  /** temporary tablespace (temporary undo log or tables) */</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a5a4d9468a033de7ec56839ed0798dcdd">  104</a></span>&#160;  <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a5a4d9468a033de7ec56839ed0798dcdd">FIL_TYPE_TEMPORARY</a> = 1,<span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">  /** a tablespace that is being imported (no logging until finished) */</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a5a5b16cbc361d9568fbd287d964fc9ad">  106</a></span>&#160;  <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a5a5b16cbc361d9568fbd287d964fc9ad">FIL_TYPE_IMPORT</a> = 2,<span class="comment"></span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">  /** persistent tablespace (for system, undo log or tables) */</span></div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726aa40030e0a18923b6d46ff2f258053485">  108</a></span>&#160;  <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726aa40030e0a18923b6d46ff2f258053485">FIL_TYPE_TABLESPACE</a> = 4,<span class="comment"></span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">  /** redo log covering changes to files of FIL_TYPE_TABLESPACE */</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a526717c86779e369bda326c28cd13532">  110</a></span>&#160;  <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a526717c86779e369bda326c28cd13532">FIL_TYPE_LOG</a> = 8</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;};</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/** Result of comparing a path. */</span></div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8ab">  114</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8ab">Fil_state</a> {<span class="comment"></span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">  /** The path matches what was found during the scan. */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8aba05015086bdd8402218f6aad6528bef08">MATCHES</a>,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">  /** No MLOG_FILE_DELETE record and the file could not be found. */</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8aba10d1208b485425756fcc932229386b02">MISSING</a>,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">  /** A MLOG_FILE_DELETE was found, file was deleted. */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8aba63c2867fdcae0e8e8413d7ac21b69b59">DELETED</a>,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">  /** Space ID matches but the paths don&#39;t match. */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <a class="code" href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8aba6f2d0bce8e047d9f2eadd436b29c3f6d">MOVED</a>,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">  /** Tablespace and/or filename was renamed. The DDL log will handle</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">  this case. */</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8abaa25e78d8d98c26f0fd73aa560f93c828">RENAMED</a></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;};</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/** Check if fil_type is any of FIL_TYPE_TEMPORARY, FIL_TYPE_IMPORT</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">or FIL_TYPE_TABLESPACE.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">@param[in]      type    variable of type fil_type_t</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">@return true if any of FIL_TYPE_TEMPORARY, FIL_TYPE_IMPORT</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">or FIL_TYPE_TABLESPACE */</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a44fadec70e24114015918420d21d216c">  137</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a44fadec70e24114015918420d21d216c">fil_type_is_data</a>(<a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a> <a class="code" href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">type</a>) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">return</span> (type == <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a5a4d9468a033de7ec56839ed0798dcdd">FIL_TYPE_TEMPORARY</a> || type == <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a5a5b16cbc361d9568fbd287d964fc9ad">FIL_TYPE_IMPORT</a> ||</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          type == <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726aa40030e0a18923b6d46ff2f258053485">FIL_TYPE_TABLESPACE</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keyword">struct </span><a class="code" href="structfil__space__t.html">fil_space_t</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/** File node of a tablespace or the log data space */</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="structfil__node__t.html">  145</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfil__node__t.html">fil_node_t</a> {</div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="structfil__node__t.html#ad2dc7ae431e941695b584f39b63d5aa0">  146</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="structfil__node__t.html#ad2dc7ae431e941695b584f39b63d5aa0">List_node</a> = <a class="code" href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a>(<a class="code" href="structfil__node__t.html">fil_node_t</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">  /** tablespace containing this file */</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a243f6624484c727fc57dc125bce3c33a">  149</a></span>&#160;  <a class="code" href="structfil__space__t.html">fil_space_t</a> *<a class="code" href="structfil__node__t.html#a243f6624484c727fc57dc125bce3c33a">space</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">  /** file name; protected by Fil_shard::m_mutex and log_sys-&gt;mutex. */</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structfil__node__t.html#afdd997de745dbcce78b8c2babb3bc0c5">  152</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="structfil__node__t.html#afdd997de745dbcce78b8c2babb3bc0c5">name</a>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">  /** whether this file is open. Note: We set the is_open flag after</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">  we increase the write the MLOG_FILE_OPEN record to redo log. Therefore</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">  we increment the in_use reference count before setting the OPEN flag. */</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a3961ec970636d385335ec17487ad7f7f">  157</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__node__t.html#a3961ec970636d385335ec17487ad7f7f">is_open</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">  /** file handle (valid if is_open) */</span></div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a3f4181309de91fce2441a5754505f878">  160</a></span>&#160;  <a class="code" href="structpfs__os__file__t.html">pfs_os_file_t</a> <a class="code" href="structfil__node__t.html#a3f4181309de91fce2441a5754505f878">handle</a>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">  /** event that groups and serializes calls to fsync */</span></div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a7308aba5a01ef62c772f00c96b8d718e">  163</a></span>&#160;  <a class="code" href="structos__event.html">os_event_t</a> <a class="code" href="structfil__node__t.html#a7308aba5a01ef62c772f00c96b8d718e">sync_event</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">  /** whether the file actually is a raw device or disk partition */</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="structfil__node__t.html#aff0c368bb3d23876d6ddcf95ca993acb">  166</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__node__t.html#aff0c368bb3d23876d6ddcf95ca993acb">is_raw_disk</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">  /** size of the file in database pages (0 if not known yet);</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">  the possible last incomplete megabyte may be ignored</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">  if space-&gt;id == 0 */</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a4beb675e385fb2fe1121c6d4720f866f">  171</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structfil__node__t.html#a4beb675e385fb2fe1121c6d4720f866f">size</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">  /** Size of the file when last flushed, used to force the flush when file</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">  grows to keep the filesystem metadata synced when using O_DIRECT_NO_FSYNC */</span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="structfil__node__t.html#aae6d3d043410a1eddf7f7525c24930f3">  175</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structfil__node__t.html#aae6d3d043410a1eddf7f7525c24930f3">flush_size</a>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">  /** initial size of the file in database pages;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  FIL_IBD_FILE_INITIAL_SIZE by default */</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a4aeaa7ced1c6a3c72e8e74014730d6e6">  179</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structfil__node__t.html#a4aeaa7ced1c6a3c72e8e74014730d6e6">init_size</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">  /** maximum size of the file in database pages */</span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a0deb3febd8f4bd31fef83d15858817d8">  182</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structfil__node__t.html#a0deb3febd8f4bd31fef83d15858817d8">max_size</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">  /** count of pending i/o&#39;s; is_open must be true if nonzero */</span></div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a3e349f1d1c38ce76728312007ed1ff05">  185</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structfil__node__t.html#a3e349f1d1c38ce76728312007ed1ff05">n_pending</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">  /** count of pending flushes; is_open must be true if nonzero */</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a5bfbfdc5e360799d8be418d213fde98e">  188</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structfil__node__t.html#a5bfbfdc5e360799d8be418d213fde98e">n_pending_flushes</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">  /** e.g., when a file is being extended or just opened. */</span></div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="structfil__node__t.html#ac14aadfea498192d192bfdbf6ebc2964">  191</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structfil__node__t.html#ac14aadfea498192d192bfdbf6ebc2964">in_use</a>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">  /** number of writes to the file since the system was started */</span></div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structfil__node__t.html#af49fe898e6ce203ab6bf9006d3547c98">  194</a></span>&#160;  int64_t <a class="code" href="structfil__node__t.html#af49fe898e6ce203ab6bf9006d3547c98">modification_counter</a>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">  /** the modification_counter of the latest flush to disk */</span></div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a83d46f981b4f21f19529cd8f85e9ab44">  197</a></span>&#160;  int64_t <a class="code" href="structfil__node__t.html#a83d46f981b4f21f19529cd8f85e9ab44">flush_counter</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">  /** link to the fil_system-&gt;LRU list (keeping track of open files) */</span></div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="structfil__node__t.html#afa4365074c5db047186849c83ecb29ad">  200</a></span>&#160;  <a class="code" href="structfil__node__t.html#ad2dc7ae431e941695b584f39b63d5aa0">List_node</a> <a class="code" href="structfil__node__t.html#afa4365074c5db047186849c83ecb29ad">LRU</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">  /** whether the file system of this file supports PUNCH HOLE */</span></div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="structfil__node__t.html#ad7bb2a18b7a45cdf53efb714908773a7">  203</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__node__t.html#ad7bb2a18b7a45cdf53efb714908773a7">punch_hole</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">  /** block size to use for punching holes */</span></div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a2cc25d38ce9b18033759e879fd5d48f1">  206</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structfil__node__t.html#a2cc25d38ce9b18033759e879fd5d48f1">block_size</a>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">  /** whether atomic write is enabled for this file */</span></div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a3b58e9e43f798b2bf912fc04575ee773">  209</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__node__t.html#a3b58e9e43f798b2bf912fc04575ee773">atomic_write</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">  /** FIL_NODE_MAGIC_N */</span></div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="structfil__node__t.html#a504b1e39b39ff411270efe46d1e1dee0">  212</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structfil__node__t.html#a504b1e39b39ff411270efe46d1e1dee0">magic_n</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;};</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/* Type of (un)encryption operation in progress for Tablespace. */</span></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a49ce4da45019e3380a27ec498952c9eeac157bdf0b85a40d2619cbc8bc1ae5fe2">  216</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fil0fil_8h.html#a49ce4da45019e3380a27ec498952c9ee">encryption_op_type</a> { <a class="code" href="fil0fil_8h.html#a49ce4da45019e3380a27ec498952c9eea244e5e74f856cdd5aafc1005877a2f61">ENCRYPTION</a> = 1, <a class="code" href="fil0fil_8h.html#a49ce4da45019e3380a27ec498952c9eeab5f88847da182e7a1a8af64f4e18f048">DECRYPTION</a> = 2, <a class="code" href="tls__context_8h.html#abc99fb62f3132cb429717ad2d9fb1026ab50339a10e1de285ac99d4c3990b8693">NONE</a> };</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/** Tablespace or log data space */</span></div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="structfil__space__t.html">  219</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfil__space__t.html">fil_space_t</a> {</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="structfil__space__t.html#ab7c8355fbc548ea5d387e2dc41d23907">  220</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="structfil__space__t.html#ab7c8355fbc548ea5d387e2dc41d23907">List_node</a> = <a class="code" href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a>(<a class="code" href="structfil__space__t.html">fil_space_t</a>);</div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a9486dca533bf90936df4a2100a2ccdea">  221</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="structfil__space__t.html#a9486dca533bf90936df4a2100a2ccdea">Files</a> = std::vector&lt;fil_node_t, ut_allocator&lt;fil_node_t&gt;&gt;;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">  /** Tablespace name */</span></div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="structfil__space__t.html#ac039387fd8fcd366a7fb36eaac1d6f2b">  224</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="structfil__space__t.html#ac039387fd8fcd366a7fb36eaac1d6f2b">name</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">  /** Tablespace ID */</span></div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a2d2a3ee346817ef29455fabbb6ef630f">  227</a></span>&#160;  <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> <a class="code" href="structfil__space__t.html#a2d2a3ee346817ef29455fabbb6ef630f">id</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">  /** true if we want to rename the .ibd file of tablespace and</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">  want to stop temporarily posting of new i/o requests on the file */</span></div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a3cd681d1e9cd1c31db83547b312c386c">  231</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__space__t.html#a3cd681d1e9cd1c31db83547b312c386c">stop_ios</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">  /** We set this true when we start deleting a single-table</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">  tablespace.  When this is set following new ops are not allowed:</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">  * read IO request</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">  * ibuf merge</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">  * file flush</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">  Note that we can still possibly have new write operations because we</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">  don&#39;t check this flag when doing flush batches. */</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a914db0402230b5f4cc86eb6da6a64cc0">  240</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__space__t.html#a914db0402230b5f4cc86eb6da6a64cc0">stop_new_ops</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">  /** Reference count for operations who want to skip redo log in</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">  the file space in order to make fsp_space_modify_check pass. */</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="structfil__space__t.html#af42b582c377e62afa6fc13dd54065b51">  245</a></span>&#160;  ulint <a class="code" href="structfil__space__t.html#af42b582c377e62afa6fc13dd54065b51">redo_skipped_count</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">  /** Purpose */</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="structfil__space__t.html#ad7320ff0b74bd82eb243019e6beda567">  249</a></span>&#160;  <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a> <a class="code" href="structfil__space__t.html#ad7320ff0b74bd82eb243019e6beda567">purpose</a>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">  /** Files attached to this tablespace. Note: Only the system tablespace</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">  can have multiple files, this is a legacy issue. */</span></div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a8b6a761060b17d30e588b1cc88eca188">  253</a></span>&#160;  <a class="code" href="structfil__space__t.html#a9486dca533bf90936df4a2100a2ccdea">Files</a> <a class="code" href="structfil__space__t.html#a8b6a761060b17d30e588b1cc88eca188">files</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">  /** Tablespace file size in pages; 0 if not known yet */</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a3ef7149edd65ef1d6efed8b658e8ebd9">  256</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structfil__space__t.html#a3ef7149edd65ef1d6efed8b658e8ebd9">size</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">  /** FSP_SIZE in the tablespace header; 0 if not known yet */</span></div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a4980ba5c59a25180ce5209df87b52275">  259</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structfil__space__t.html#a4980ba5c59a25180ce5209df87b52275">size_in_header</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">  /** Length of the FSP_FREE list */</span></div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a6a627e2e0029e5e021781b34efcd46c4">  262</a></span>&#160;  uint32_t <a class="code" href="structfil__space__t.html#a6a627e2e0029e5e021781b34efcd46c4">free_len</a>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">  /** Contents of FSP_FREE_LIMIT */</span></div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="structfil__space__t.html#ab2c7ce5109e347e4e241425c1d55afc2">  265</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structfil__space__t.html#ab2c7ce5109e347e4e241425c1d55afc2">free_limit</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">  /** Tablespace flags; see fsp_flags_is_valid() and</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">  page_size_t(ulint) (constructor).</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">  This is protected by space-&gt;latch and tablespace MDL */</span></div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a440702a347c5514fc439e8d80301ff30">  270</a></span>&#160;  uint32_t <a class="code" href="structfil__space__t.html#a440702a347c5514fc439e8d80301ff30">flags</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">  /** Number of reserved free extents for ongoing operations like</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">  B-tree page split */</span></div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a983db4e9de443314440b685b6ac0c605">  274</a></span>&#160;  uint32_t <a class="code" href="structfil__space__t.html#a983db4e9de443314440b685b6ac0c605">n_reserved_extents</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">  /** This is positive when flushing the tablespace to disk;</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">  dropping of the tablespace is forbidden if this is positive */</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structfil__space__t.html#ad53590c95c02a0a9663bdfadfbdf4f69">  278</a></span>&#160;  uint32_t <a class="code" href="structfil__space__t.html#ad53590c95c02a0a9663bdfadfbdf4f69">n_pending_flushes</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">  /** This is positive when we have pending operations against this</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">  tablespace. The pending operations can be ibuf merges or lock</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">  validation code trying to read a block.  Dropping of the tablespace</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">  is forbidden if this is positive.  Protected by Fil_shard::m_mutex. */</span></div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="structfil__space__t.html#aae6d47f86345fd8e94803cc3d35be793">  284</a></span>&#160;  uint32_t <a class="code" href="structfil__space__t.html#aae6d47f86345fd8e94803cc3d35be793">n_pending_ops</a>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">  /** Latch protecting the file space storage allocation */</span></div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a4047294cd4825618c91b496c07705884">  288</a></span>&#160;  <a class="code" href="structrw__lock__t.html">rw_lock_t</a> <a class="code" href="structfil__space__t.html#a4047294cd4825618c91b496c07705884">latch</a>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">  /** List of spaces with at least one unflushed file we have</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">  written to */</span></div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a367c51f39f1a4818525a0d276b2a3c77">  293</a></span>&#160;  <a class="code" href="structfil__space__t.html#ab7c8355fbc548ea5d387e2dc41d23907">List_node</a> <a class="code" href="structfil__space__t.html#a367c51f39f1a4818525a0d276b2a3c77">unflushed_spaces</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">  /** true if this space is currently in unflushed_spaces */</span></div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="structfil__space__t.html#ae39d97cb039e33439dca7e630bc48707">  296</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__space__t.html#ae39d97cb039e33439dca7e630bc48707">is_in_unflushed_spaces</a>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">  /** Compression algorithm */</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="structfil__space__t.html#acb0719acd0ee7f7df746d3019605098d">  299</a></span>&#160;  <a class="code" href="structCompression.html#a01483c6913b58d659bb3db427e23d901">Compression::Type</a> <a class="code" href="structfil__space__t.html#acb0719acd0ee7f7df746d3019605098d">compression_type</a>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">  /** Encryption algorithm */</span></div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a3f1a015508867576d40df500a387ee47">  302</a></span>&#160;  <a class="code" href="classEncryption.html#a1c2502b499e9986bdea1663b14ae96a4">Encryption::Type</a> <a class="code" href="structfil__space__t.html#a3f1a015508867576d40df500a387ee47">encryption_type</a>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">  /** Encrypt key */</span></div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a7b98e12ffba4eae0b63a0433e40da45f">  305</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> encryption_key[<a class="code" href="classEncryption.html#aca983e7bc2fce23999ac82ebe097652c">Encryption::KEY_LEN</a>];</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">  /** Encrypt key length*/</span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a4bc9ffd82c27e25d2ea292b4dc53ea67">  308</a></span>&#160;  ulint <a class="code" href="structfil__space__t.html#a4bc9ffd82c27e25d2ea292b4dc53ea67">encryption_klen</a>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">  /** Encrypt initial vector */</span></div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a82e35b3dece48d935fcf748d3b27053c">  311</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> encryption_iv[<a class="code" href="classEncryption.html#aca983e7bc2fce23999ac82ebe097652c">Encryption::KEY_LEN</a>];</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">  /** Encryption is in progress */</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a37c9bb64bb38b36ac38634c67120b9fb">  314</a></span>&#160;  <a class="code" href="fil0fil_8h.html#a49ce4da45019e3380a27ec498952c9ee">encryption_op_type</a> <a class="code" href="structfil__space__t.html#a37c9bb64bb38b36ac38634c67120b9fb">encryption_op_in_progress</a>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">  /** Release the reserved free extents.</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">  @param[in]    n_reserved      number of reserved extents */</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordtype">void</span> release_free_extents(ulint n_reserved);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">  /** FIL_SPACE_MAGIC_N */</span></div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a959fc361ed9df1aaacb7bb9ad766d34e">  321</a></span>&#160;  ulint <a class="code" href="structfil__space__t.html#a959fc361ed9df1aaacb7bb9ad766d34e">magic_n</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">  /** LSN when the instance was deleted. */</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a82a55f22ffb961a1d193b4087da4d0f6">  324</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structfil__space__t.html#a82a55f22ffb961a1d193b4087da4d0f6">m_deleted_lsn</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">  /** Determine if this space was deleted with BUF_REMOVE_NONE.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">  @return true if the space was deleted */</span></div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a6d9cf8b913bef17b9a5797b0e8696864">  328</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__space__t.html#a6d9cf8b913bef17b9a5797b0e8696864">is_deleted</a>() { <span class="keywordflow">return</span> m_deleted_lsn &gt; 0; }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">  /** System tablespace */</span></div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="structfil__space__t.html#aa0126fd910461de7fd5f6a6bfe9fb0e8">  331</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="structfil__space__t.html">fil_space_t</a> *<a class="code" href="structfil__space__t.html#aa0126fd910461de7fd5f6a6bfe9fb0e8">s_sys_space</a>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">  /** Redo log tablespace */</span></div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="structfil__space__t.html#a00ccbc0d499ac1a60f1ca2131f1d1b90">  334</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="structfil__space__t.html">fil_space_t</a> *<a class="code" href="structfil__space__t.html#a00ccbc0d499ac1a60f1ca2131f1d1b90">s_redo_space</a>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">  /** Print the extent descriptor pages of this tablespace into</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">  the given output stream.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">  @param[in]    out     the output stream.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">  @return       the output stream. */</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  std::ostream &amp;print_xdes_pages(std::ostream &amp;out) <span class="keyword">const</span>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">  /** Print the extent descriptor pages of this tablespace into</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">  the given file.</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">  @param[in]    filename        the output file name. */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordtype">void</span> print_xdes_pages(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="pfs__example__component__population_8cc.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;};</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">/** Value of fil_space_t::magic_n */</span></div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a583fe8ebbb512ab76b88f8a9d7f4b02e">  351</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a583fe8ebbb512ab76b88f8a9d7f4b02e">FIL_SPACE_MAGIC_N</a> = 89472;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">/** Value of fil_node_t::magic_n */</span></div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a24a4cfc46221e82d7ca99f5eb371fade">  354</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a24a4cfc46221e82d7ca99f5eb371fade">FIL_NODE_MAGIC_N</a> = 89389;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">/** Common InnoDB file extentions */</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">  357</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">ib_file_suffix</a> {</div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cacee139505c65bec7e41da9cc658a06f8">  358</a></span>&#160;  <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cacee139505c65bec7e41da9cc658a06f8">NO_EXT</a> = 0,</div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca8f95e1ef03fd5c24f5260811b4e1896f">  359</a></span>&#160;  <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca8f95e1ef03fd5c24f5260811b4e1896f">IBD</a> = 1,</div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cac9008e38bf966331c0505e775b43fe1b">  360</a></span>&#160;  <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cac9008e38bf966331c0505e775b43fe1b">CFG</a> = 2,</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cac412396f311807aefbb9fa08979dcd95">  361</a></span>&#160;  <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cac412396f311807aefbb9fa08979dcd95">CFP</a> = 3,</div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca6ffb4649ce717106b47a4513fd239506">  362</a></span>&#160;  <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca6ffb4649ce717106b47a4513fd239506">IBT</a> = 4,</div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cacf37978f6a1d495b4d7b69b7362408cd">  363</a></span>&#160;  <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cacf37978f6a1d495b4d7b69b7362408cd">IBU</a> = 5,</div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca358c126da32e703fd814bade6dd2c863">  364</a></span>&#160;  <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca358c126da32e703fd814bade6dd2c863">DWR</a> = 6</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;};</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fil0fil_8h.html#ae552caec2202bf9728d628867b59c013">dot_ext</a>[];</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a6d924a8e77722e1623478213e57c5648">  369</a></span>&#160;<span class="preprocessor">#define DOT_IBD dot_ext[IBD]</span></div><div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#acf8b3f4fe2df3eb4778b122b8633c896">  370</a></span>&#160;<span class="preprocessor">#define DOT_CFG dot_ext[CFG]</span></div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a21695b3dbfd41e9b22caf9fb1316e020">  371</a></span>&#160;<span class="preprocessor">#define DOT_CFP dot_ext[CFP]</span></div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae92fa32e833fa250e51606a966891ddf">  372</a></span>&#160;<span class="preprocessor">#define DOT_IBT dot_ext[IBT]</span></div><div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#abb5f6655bbd26b98061ebd626e98bb18">  373</a></span>&#160;<span class="preprocessor">#define DOT_IBU dot_ext[IBU]</span></div><div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a6dda448feea9f84a443a8610cc59bb5b">  374</a></span>&#160;<span class="preprocessor">#define DOT_DWR dot_ext[DWR]</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">/* Initialization of m_abs_path() produces warning C4351:</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">&quot;new behavior: elements of array &#39;...&#39; will be default initialized.&quot;</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">See https://msdn.microsoft.com/en-us/library/1ywe7hcy.aspx */</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#pragma warning(disable : 4351)</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _WIN32 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">/** Wrapper for a path to a directory that may or may not exist. */</span></div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="classFil__path.html">  384</a></span>&#160;<span class="keyword">class </span><a class="code" href="classFil__path.html">Fil_path</a> {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">  /** schema &#39;/&#39; table separator */</span></div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classFil__path.html#afe7b496407179d37145487abceb0b94e">  387</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> DB_SEPARATOR = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">  /** OS specific path separator. */</span></div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="classFil__path.html#a789f1723be245ad664de3757f1f1994e">  390</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> OS_SEPARATOR = OS_PATH_SEPARATOR;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">  /** Directory separators that are supported. */</span></div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="classFil__path.html#a8c3eddf5e8d631b3ce4b7956c3d98a71">  393</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> SEPARATOR = <span class="stringliteral">&quot;\\/&quot;</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> DOT_SLASH = <span class="stringliteral">&quot;.\\&quot;</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> DOT_DOT_SLASH = <span class="stringliteral">&quot;..\\&quot;</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> SLASH_DOT_DOT_SLASH = <span class="stringliteral">&quot;\\..\\&quot;</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="classFil__path.html#acaeebe0f16b06f9cd6abb80c3e149319">  399</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> DOT_SLASH = <span class="stringliteral">&quot;./&quot;</span>;</div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="classFil__path.html#a94070799c12cf93534b3425c37ef7c76">  400</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> DOT_DOT_SLASH = <span class="stringliteral">&quot;../&quot;</span>;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classFil__path.html#a19f147f48cd8a895133e064dbc09d7b4">  401</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keyword">auto</span> SLASH_DOT_DOT_SLASH = <span class="stringliteral">&quot;/../&quot;</span>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _WIN32 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">  /** Various types of file paths. */</span></div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="classFil__path.html#a256179f84319ff1bb253a10b41acb0d0a36e8f861ad84288b67c1aa18c719189f">  405</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classFil__path.html#a256179f84319ff1bb253a10b41acb0d0">path_type</a> { absolute, <a class="code" href="classFil__path.html#a256179f84319ff1bb253a10b41acb0d0a36e8f861ad84288b67c1aa18c719189f">relative</a>, file_name_only, invalid };</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">  /** Default constructor. Defaults to MySQL_datadir_path.  */</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="classFil__path.html">Fil_path</a>();</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">  @param[in]  path            Path, not necessarily NUL terminated</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">  @param[in]  len             Length of path</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">  @param[in]  normalize_path  If false, it&#39;s the callers responsibility to</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">                              ensure that the path is normalized. */</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classFil__path.html">Fil_path</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>, <span class="keywordtype">size_t</span> len, <span class="keywordtype">bool</span> <a class="code" href="duk__module__shim_8c.html#ae87978b9adf0de34bb46e7261a1d4796">normalize_path</a> = <span class="keyword">false</span>);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">  @param[in]  path            Path, not necessarily NUL terminated</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">  @param[in]  normalize_path  If false, it&#39;s the callers responsibility to</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">                              ensure that the path is normalized. */</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classFil__path.html">Fil_path</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keywordtype">bool</span> <a class="code" href="duk__module__shim_8c.html#ae87978b9adf0de34bb46e7261a1d4796">normalize_path</a> = <span class="keyword">false</span>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">  @param[in]  path            pathname (may also include the file basename)</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">  @param[in]  normalize_path  If false, it&#39;s the callers responsibility to</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">                              ensure that the path is normalized. */</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classFil__path.html">Fil_path</a>(<span class="keyword">const</span> std::string &amp;path, <span class="keywordtype">bool</span> <a class="code" href="duk__module__shim_8c.html#ae87978b9adf0de34bb46e7261a1d4796">normalize_path</a> = <span class="keyword">false</span>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">  /** Implicit type conversion</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">  @return pointer to m_path.c_str() */</span></div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="classFil__path.html#aec7c6cbce4b05b0a32fe8ab3c963e07e">  431</a></span>&#160;  <span class="keyword">operator</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *() <span class="keyword">const</span> { <span class="keywordflow">return</span> (m_path.c_str()); }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">  /** Explicit type conversion</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">  @return pointer to m_path.c_str() */</span></div><div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="classFil__path.html#ae81765fa07fc6b87d8105c53a400aee9">  435</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classFil__path.html#ae81765fa07fc6b87d8105c53a400aee9">operator()</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (m_path.c_str()); }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">  /** @return the value of m_path */</span></div><div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="classFil__path.html#a2da163e80ea5c9a7867cf906c3657d0c">  438</a></span>&#160;  <span class="keyword">const</span> std::string &amp;<a class="code" href="classFil__path.html#a2da163e80ea5c9a7867cf906c3657d0c">path</a>() const MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> (m_path);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">  /** @return the length of m_path */</span></div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="classFil__path.html#a91b6ec3a03def3dc881bfe9cd0abfa3e">  443</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classFil__path.html#a91b6ec3a03def3dc881bfe9cd0abfa3e">len</a>() const MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> (m_path.length());</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">  /** Return the absolute path by value. If m_abs_path is null, calculate</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">  it and return it by value without trying to reset this const object.</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">  m_abs_path can be empty if the path did not exist when this object</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">  was constructed.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">  @return the absolute path by value. */</span></div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="classFil__path.html#a7bc2e6945e362c395f6a3e12bbb24a5b">  452</a></span>&#160;  <span class="keyword">const</span> std::string <a class="code" href="classFil__path.html#a7bc2e6945e362c395f6a3e12bbb24a5b">abs_path</a>() const MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span> (m_abs_path.empty()) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">return</span> (get_real_path(m_path));</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">return</span> (m_abs_path);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">  /** @return the length of m_abs_path */</span></div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="classFil__path.html#a03773a2616e0f226342b8d47e45d32e6">  461</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classFil__path.html#a03773a2616e0f226342b8d47e45d32e6">abs_len</a>() const MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">return</span> (m_abs_path.length());</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">  /** Determine if this path is equal to the other path.</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  @param[in]  other             path to compare to</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">  @return true if the paths are the same */</span></div><div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="classFil__path.html#a3166607f4bb16de7744d3c0899a81fb5">  468</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#a3166607f4bb16de7744d3c0899a81fb5">operator==</a>(<span class="keyword">const</span> <a class="code" href="classFil__path.html">Fil_path</a> &amp;other)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (is_same_as(other)); }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">  /** Check if m_path is the same as this other path.</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">  @param[in]  other  directory path to compare to</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">  @return true if m_path is the same as path */</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordtype">bool</span> is_same_as(<span class="keyword">const</span> <a class="code" href="classFil__path.html">Fil_path</a> &amp;other) <span class="keyword">const</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">  /** Check if this path is the same as the other path.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">  @param[in]  other  directory path to compare to</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">  @return true if this path is the same as the other path */</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordtype">bool</span> is_same_as(<span class="keyword">const</span> std::string &amp;other) <span class="keyword">const</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">  /** Check if two path strings are equal. Put them into Fil_path objects</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">  so that they can be compared correctly.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">  @param[in]  first   first path to check</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">  @param[in]  second  socond path to check</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">  @return true if these two paths are the same */</span></div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="classFil__path.html#a0c276da724d4caf785f2ccafd249664b">  487</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#a0c276da724d4caf785f2ccafd249664b">is_same_as</a>(<span class="keyword">const</span> std::string &amp;first, <span class="keyword">const</span> std::string &amp;second)</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (first.empty() || second.empty()) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">false</span>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="classFil__path.html">Fil_path</a> first_path(first);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    std::string first_abs = first_path.<a class="code" href="classFil__path.html#a7bc2e6945e362c395f6a3e12bbb24a5b">abs_path</a>();</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    trim_separator(first_abs);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="classFil__path.html">Fil_path</a> second_path(second);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    std::string second_abs = second_path.<a class="code" href="classFil__path.html#a7bc2e6945e362c395f6a3e12bbb24a5b">abs_path</a>();</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    trim_separator(second_abs);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">return</span> (first_abs == second_abs);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  }</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">  /** Check if m_path is the parent of the other path.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">  @param[in]  other  path to compare to</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">  @return true if m_path is an ancestor of name */</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordtype">bool</span> is_ancestor(<span class="keyword">const</span> <a class="code" href="classFil__path.html">Fil_path</a> &amp;other) <span class="keyword">const</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">  /** Check if this Fil_path is an ancestor of the other path.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">  @param[in]  other  path to compare to</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">  @return true if this Fil_path is an ancestor of the other path */</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordtype">bool</span> is_ancestor(<span class="keyword">const</span> std::string &amp;other) <span class="keyword">const</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">  /** Check if the first path is an ancestor of the second.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">  Do not assume that these paths have been converted to real paths</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">  and are ready to compare. If the two paths are the same</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">  we will return false.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">  @param[in]  first   Parent path to check</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">  @param[in]  second  Descendent path to check</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">  @return true if the first path is an ancestor of the second */</span></div><div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="classFil__path.html#a44646ba52123441521cc5f6f22264ac9">  523</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#a44646ba52123441521cc5f6f22264ac9">is_ancestor</a>(<span class="keyword">const</span> std::string &amp;first, <span class="keyword">const</span> std::string &amp;second)</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (first.empty() || second.empty()) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">false</span>);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="classFil__path.html">Fil_path</a> ancestor(first);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="classFil__path.html">Fil_path</a> descendant(second);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">return</span> (ancestor.<a class="code" href="classFil__path.html#a00a27434a643694af13d0b0338a62898">is_ancestor</a>(descendant));</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">  /** @return true if m_path exists and is a file. */</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordtype">bool</span> is_file_and_exists() <span class="keyword">const</span> MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">  /** @return true if m_path exists and is a directory. */</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordtype">bool</span> is_directory_and_exists() <span class="keyword">const</span> MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">  /** This validation is only for &#39;:&#39;.</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">  @return true if the path is valid. */</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacegis.html#a34498b3a631cea076601d0d9fb07ac92">is_valid</a>() <span class="keyword">const</span> MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">  /** Determine if m_path contains a circular section like &quot;/anydir/../&quot;</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">  Fil_path::normalize() must be run before this.</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">  @return true if a circular section if found, false if not */</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordtype">bool</span> is_circular() <span class="keyword">const</span> MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">  /** Determine if the file or directory is considered HIDDEN.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">  Most file systems identify the HIDDEN attribute by a &#39;.&#39; preceeding the</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">  basename.  On Windows, a HIDDEN path is identified by a file attribute.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">  We will use the preceeding &#39;.&#39; to indicate a HIDDEN attribute on ALL</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">  file systems so that InnoDB tablespaces and their directory structure</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">  remain portable.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">  @param[in]  path  The full or relative path of a file or directory.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">  @return true if the directory or path is HIDDEN. */</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> is_hidden(std::string path);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">  /** Use the WIN32_FIND_DATA struncture to determine if the file or</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">  directory is HIDDEN.  Consider a SYSTEM attribute also as an indicator</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">  that it is HIDDEN to InnoDB.</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">  @param[in]  dirent  A directory entry obtained from a call to FindFirstFile()</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">  or FindNextFile()</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">  @return true if the directory or path is HIDDEN. */</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> is_hidden(WIN32_FIND_DATA &amp;dirent);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* WIN32 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">  /** Remove quotes e.g., &#39;a;b&#39; or &quot;a;b&quot; -&gt; a;b.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">  This will only remove the quotes if they are matching on the whole string.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">  This will not work if each delimited string is quoted since this is called</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">  before the string is parsed.</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">  @return pathspec with the quotes stripped */</span></div><div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="classFil__path.html#a9ce5c89cf9c5bfaac6ec83ce402c2cba">  575</a></span>&#160;  <span class="keyword">static</span> std::string <a class="code" href="classFil__path.html#a9ce5c89cf9c5bfaac6ec83ce402c2cba">remove_quotes</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *pathspec) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    std::string <a class="code" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>(pathspec);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(!path.empty());</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> (path.size() &gt;= 2 &amp;&amp; ((path.front() == <span class="charliteral">&#39;\&#39;&#39;</span> &amp;&amp; path.back() == <span class="charliteral">&#39;\&#39;&#39;</span>) ||</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                             (path.front() == <span class="charliteral">&#39;&quot;&#39;</span> &amp;&amp; path.back() == <span class="charliteral">&#39;&quot;&#39;</span>))) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      path.erase(0, 1);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      path.erase(path.size() - 1);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">return</span> (path);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">  /** Determine if a path is a relative path or not.</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">  @param[in]  path  OS directory or file path to evaluate</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">  @retval true if the path is relative</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">  @retval false if the path is absolute or file_name_only */</span></div><div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="classFil__path.html#a6d3e5004c601d97b80981c258d0f09ec">  593</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#a6d3e5004c601d97b80981c258d0f09ec">is_relative_path</a>(<span class="keyword">const</span> std::string &amp;path)</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span> (type_of_path(path) == relative);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">  /** @return true if the path is an absolute path. */</span></div><div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="classFil__path.html#ab2d1a0699a1e396e61f243f0fce0e9fb">  599</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#ab2d1a0699a1e396e61f243f0fce0e9fb">is_absolute_path</a>() const MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> (type_of_path(m_path) == absolute);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">  /** Determine if a path is an absolute path or not.</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">  @param[in]  path  OS directory or file path to evaluate</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">  @retval true if the path is absolute</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">  @retval false if the path is relative or file_name_only */</span></div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="classFil__path.html#a71d0142483a56ab705234320ae427e97">  607</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#a71d0142483a56ab705234320ae427e97">is_absolute_path</a>(<span class="keyword">const</span> std::string &amp;path)</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">return</span> (type_of_path(path) == absolute);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">  /** Determine what type of path is provided.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">  @param[in]  path  OS directory or file path to evaluate</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">  @return the type of filepath; &#39;absolute&#39;, &#39;relative&#39;,</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">  &#39;file_name_only&#39;, or &#39;invalid&#39; if the path is empty. */</span></div><div class="line"><a name="l00616"></a><span class="lineno"><a class="line" href="classFil__path.html#adb3f0cc2c799e6ade139bb5a0611e3a1">  616</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="classFil__path.html#a256179f84319ff1bb253a10b41acb0d0">path_type</a> <a class="code" href="classFil__path.html#adb3f0cc2c799e6ade139bb5a0611e3a1">type_of_path</a>(<span class="keyword">const</span> std::string &amp;path)</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (path.empty()) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">return</span> (invalid);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">/* The most likely type is a file name only with no separators. */</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keyword">auto</span> first_separator = path.find_first_of(SEPARATOR);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (first_separator == std::string::npos) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">return</span> (file_name_only);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">/* Any string that starts with an OS_SEPARATOR is</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">    an absolute path. This includes any OS and even</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">    paths like &quot;\\Host\share&quot; on Windows. */</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (first_separator == 0) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">return</span> (absolute);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">/* Windows may have an absolute path like &#39;A:\&#39; */</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (path.length() &gt;= 3 &amp;&amp; isalpha(path.at(0)) &amp;&amp; path.at(1) == <span class="charliteral">&#39;:&#39;</span> &amp;&amp;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        (path.at(2) == <span class="charliteral">&#39;\\&#39;</span> || path.at(2) == <span class="charliteral">&#39;/&#39;</span>)) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keywordflow">return</span> (absolute);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _WIN32 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="comment">/* Since it contains separators and is not an absolute path,</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">    it must be a relative path. */</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">return</span> (relative);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">/* Check if the path is prefixed with pattern.</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">  @return true if prefix matches */</span></div><div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="classFil__path.html#af010111b0bec54a4d7a8bc2809dc69a3">  650</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#af010111b0bec54a4d7a8bc2809dc69a3">has_prefix</a>(<span class="keyword">const</span> std::string &amp;path, <span class="keyword">const</span> std::string prefix)</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> (path.size() &gt;= prefix.size() &amp;&amp;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <a class="code" href="group__Query__Optimizer.html#gafb541e941e7c4614ceb9eeddae48f9dc">std::equal</a>(prefix.begin(), prefix.end(), path.begin()));</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">  /** Normalize a directory path for the current OS:</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">  On Windows, we convert &#39;/&#39; to &#39;\&#39;, else we convert &#39;\&#39; to &#39;/&#39;.</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">  @param[in,out]  path  Directory and file path */</span></div><div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="classFil__path.html#ae1acd6ccbe1a15e9c0b1856beef462cb">  659</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classFil__path.html#ae1acd6ccbe1a15e9c0b1856beef462cb">normalize</a>(std::string &amp;path) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;c : path) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">if</span> (c == OS_PATH_SEPARATOR_ALT) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        c = OS_SEPARATOR;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">  /** Normalize a directory path for the current OS:</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">  On Windows, we convert &#39;/&#39; to &#39;\&#39;, else we convert &#39;\&#39; to &#39;/&#39;.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">  @param[in,out]  path  A NUL terminated path */</span></div><div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="classFil__path.html#ac1d4f7bf25e932b5d11622ed81c9a24d">  670</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classFil__path.html#ac1d4f7bf25e932b5d11622ed81c9a24d">normalize</a>(<span class="keywordtype">char</span> *path) {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> ptr = path; *ptr; ++ptr) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordflow">if</span> (*ptr == OS_PATH_SEPARATOR_ALT) {</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        *ptr = OS_SEPARATOR;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">  /** Convert a path string to lower case using the CHARSET my_charset_filename.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">  @param[in,out]  path  Directory and file path */</span></div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="classFil__path.html#ad6de22f094729db1a29a50f0dfdd9a3f">  680</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classFil__path.html#ad6de22f094729db1a29a50f0dfdd9a3f">to_lower</a>(std::string &amp;path) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;c : path) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      c = <a class="code" href="m__ctype_8h.html#ab650ec0e29cc9c8cab5261f5fa33b31a">my_tolower</a>(&amp;<a class="code" href="m__ctype_8h.html#a7711738e5ae46f8381a25a4662d868a2">my_charset_filename</a>, c);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">  /** @return true if the path exists and is a file . */</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keyword">static</span> <a class="code" href="os0file_8h.html#a223a90243330328550582ef30fae2481">os_file_type_t</a> get_file_type(<span class="keyword">const</span> std::string &amp;path)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">  /** Return a string to display the file type of a path.</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">  @param[in]  path  path name</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">  @return true if the path exists and is a file . */</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *get_file_type_string(<span class="keyword">const</span> std::string &amp;path);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">  /** Return a string to display the file type of a path.</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">  @param[in]  type  OS file type</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">  @return true if the path exists and is a file . */</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *get_file_type_string(<a class="code" href="os0file_8h.html#a223a90243330328550582ef30fae2481">os_file_type_t</a> <a class="code" href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">type</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">  /** Get the real path for a directory or a file name. This path can be</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">  used to compare with another absolute path. It will be converted to</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">  lower case on case insensitive file systems and if it is a directory,</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">  it will end with a directory separator. The call to my_realpath() may</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">  fail on non-Windows platforms if the path does not exist. If so, the</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">  parameter &#39;force&#39; determines what to return.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">  @param[in]  path   directory or filename to convert to a real path</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">  @param[in]  force  if true and my_realpath() fails, use the path provided.</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">                     if false and my_realpath() fails, return a null string.</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">  @return  the absolute path prepared for making comparisons with other real</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">           paths. */</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keyword">static</span> std::string get_real_path(<span class="keyword">const</span> std::string &amp;path, <span class="keywordtype">bool</span> force = <span class="keyword">true</span>)</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">  /** Separate the portion of a directory path that exists and the portion that</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">  does not exist.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">  @param[in]      path   Path to evaluate</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">  @param[in,out]  ghost  The portion of the path that does not exist.</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">  @return the existing portion of a path. */</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keyword">static</span> std::string get_existing_path(<span class="keyword">const</span> std::string &amp;path,</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                       std::string &amp;ghost)</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">  /** Check if the name is an undo tablespace name.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">  @param[in]    name            Tablespace name</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">  @return true if it is an undo tablespace name */</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> is_undo_tablespace_name(<span class="keyword">const</span> std::string &amp;<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>)</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">  /** Check if the file has the the specified suffix</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">  @param[in]    sfx             suffix to look for</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment">  @param[in]    path            Filename to check</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">  @return true if it has the the &quot;.ibd&quot; suffix. */</span></div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="classFil__path.html#af8d5d551eb4196dc05af7848d19bf79a">  733</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#af8d5d551eb4196dc05af7848d19bf79a">has_suffix</a>(<a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">ib_file_suffix</a> sfx, <span class="keyword">const</span> std::string &amp;path) {</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> suffix = <a class="code" href="fil0fil_8h.html#ae552caec2202bf9728d628867b59c013">dot_ext</a>[sfx];</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordtype">size_t</span> len = strlen(suffix);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">return</span> (path.size() &gt;= len &amp;&amp;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            path.compare(path.size() - len, len, suffix) == 0);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">  /** Check if the file has the the specified suffix and truncate</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">  @param[in]            sfx     suffix to look for</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">  @param[in,out]        path    Filename to check</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">  @return true if the suffix is found and truncated. */</span></div><div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="classFil__path.html#ad57426d001dd9035b587b59bd270b230">  745</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#ad57426d001dd9035b587b59bd270b230">truncate_suffix</a>(<a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">ib_file_suffix</a> sfx, std::string &amp;path) {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> suffix = <a class="code" href="fil0fil_8h.html#ae552caec2202bf9728d628867b59c013">dot_ext</a>[sfx];</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">size_t</span> len = strlen(suffix);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">if</span> (path.size() &lt; len ||</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        path.compare(path.size() - len, len, suffix) != 0) {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">false</span>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    path.resize(path.size() - len);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">  /** Check if a character is a path separator (&#39;\&#39; or &#39;/&#39;)</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">  @param[in]  c  Character to check</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">  @return true if it is a separator */</span></div><div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="classFil__path.html#a86b4fe805cd8230f0dd18f473a756c41">  761</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classFil__path.html#a86b4fe805cd8230f0dd18f473a756c41">is_separator</a>(<span class="keywordtype">char</span> c) { <span class="keywordflow">return</span> (c == <span class="charliteral">&#39;\\&#39;</span> || c == <span class="charliteral">&#39;/&#39;</span>); }</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">  /** If the last character of a directory path is a separator (&#39;\&#39; or &#39;/&#39;)</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">  trim it off the string.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">  @param[in]  path  file system path */</span></div><div class="line"><a name="l00766"></a><span class="lineno"><a class="line" href="classFil__path.html#ae97213b9316a6b944ced56ec9474323b">  766</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classFil__path.html#ae97213b9316a6b944ced56ec9474323b">trim_separator</a>(std::string &amp;path) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span> (!path.empty() &amp;&amp; is_separator(path.back())) {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      path.resize(path.size() - 1);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">  /** If the last character of a directory path is NOT a separator,</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">  append a separator to the path.</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">  NOTE: We leave it up to the caller to assure that the path is a directory</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">  and not a file since if that directory does not yet exist, this function</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">  cannot tell the difference.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">  @param[in]  path  file system path */</span></div><div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="classFil__path.html#a8a61ba31d249599bc8f0148646590af2">  778</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classFil__path.html#a8a61ba31d249599bc8f0148646590af2">append_separator</a>(std::string &amp;path) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span> (!path.empty() &amp;&amp; !is_separator(path.back())) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      path.push_back(OS_SEPARATOR);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">  /** Allocate and build a file name from a path, a table or</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">  tablespace name and a suffix.</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">  @param[in]    path_in         nullptr or the direcory path or</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">                                  the full path and filename</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">  @param[in]    name_in         nullptr if path is full, or</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">                                  Table/Tablespace name</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">  @param[in]    ext             the file extension to use</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">  @param[in]      trim            whether last name on the path should</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">                                  be trimmed</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">  @return own: file name; must be freed by ut_free() */</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> *make(<span class="keyword">const</span> std::string &amp;path_in, <span class="keyword">const</span> std::string &amp;name_in,</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                    <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">ib_file_suffix</a> ext, <span class="keywordtype">bool</span> <a class="code" href="testapp_8c.html#a104bdbc595bddd1fc349220c98c786d7">trim</a> = <span class="keyword">false</span>)</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">  /** Allocate and build a CFG file name from a path.</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">  @param[in]    path_in         Full path to the filename</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">  @return own: file name; must be freed by ut_free() */</span></div><div class="line"><a name="l00801"></a><span class="lineno"><a class="line" href="classFil__path.html#a49e762cac740da14f10a6c94bb630bdc">  801</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="classFil__path.html#a49e762cac740da14f10a6c94bb630bdc">make_cfg</a>(<span class="keyword">const</span> std::string &amp;path_in)</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> (make(path_in, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cac9008e38bf966331c0505e775b43fe1b">CFG</a>));</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">  /** Allocate and build a CFP file name from a path.</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">  @param[in]    path_in         Full path to the filename</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">  @return own: file name; must be freed by ut_free() */</span></div><div class="line"><a name="l00809"></a><span class="lineno"><a class="line" href="classFil__path.html#ad08acbd2aa912a5f75643f35187ed78c">  809</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="classFil__path.html#ad08acbd2aa912a5f75643f35187ed78c">make_cfp</a>(<span class="keyword">const</span> std::string &amp;path_in)</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">return</span> (make(path_in, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cac412396f311807aefbb9fa08979dcd95">CFP</a>));</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">  /** Allocate and build a file name from a path, a table or</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">  tablespace name and a suffix.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">  @param[in]    path_in         nullptr or the direcory path or</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">                                  the full path and filename</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">  @param[in]    name_in         nullptr if path is full, or</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">                                  Table/Tablespace name</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">  @return own: file name; must be freed by ut_free() */</span></div><div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="classFil__path.html#a546333b4b758741b1ad08ca13c5ffaea">  821</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="classFil__path.html#a546333b4b758741b1ad08ca13c5ffaea">make_ibd</a>(<span class="keyword">const</span> std::string &amp;path_in, <span class="keyword">const</span> std::string &amp;name_in)</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">return</span> (make(path_in, name_in, <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca8f95e1ef03fd5c24f5260811b4e1896f">IBD</a>));</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">  /** Allocate and build a file name from a path, a table or</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">  tablespace name and a suffix.</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">  @param[in]    name_in         Table/Tablespace name</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">  @return own: file name; must be freed by ut_free() */</span></div><div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="classFil__path.html#a83b40d6d94780d7284f1bb678488cc22">  830</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="classFil__path.html#a83b40d6d94780d7284f1bb678488cc22">make_ibd_from_table_name</a>(<span class="keyword">const</span> std::string &amp;name_in)</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">return</span> (make(<span class="stringliteral">&quot;&quot;</span>, name_in, <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca8f95e1ef03fd5c24f5260811b4e1896f">IBD</a>));</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">  /** Create an IBD path name after replacing the basename in an old path</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">  with a new basename.  The old_path is a full path name including the</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">  extension.  The tablename is in the normal form &quot;schema/tablename&quot;.</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">  @param[in]    path_in         Pathname</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">  @param[in]    name_in         Contains new base name</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">  @param[in]    extn            File extension</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">  @return new full pathname */</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keyword">static</span> std::string make_new_path(<span class="keyword">const</span> std::string &amp;path_in,</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                                   <span class="keyword">const</span> std::string &amp;name_in,</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                                   <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">ib_file_suffix</a> extn)</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">  /** Parse file-per-table file name and build Innodb dictionary table name.</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">  @param[in]    file_path       File name with complete path</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">  @param[in]    extn            File extension</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">  @param[out]   dict_name       Innodb dictionary table name</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">  @return true, if successful. */</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> parse_file_path(<span class="keyword">const</span> std::string &amp;file_path, <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">ib_file_suffix</a> extn,</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                              std::string &amp;<a class="code" href="namespacedict__name.html">dict_name</a>);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">  /** This function reduces a null-terminated full remote path name</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">  into the path that is sent by MySQL for DATA DIRECTORY clause.</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">  It replaces the &#39;databasename/tablename.ibd&#39; found at the end of the</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">  path with just &#39;tablename&#39;.</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">  Since the result is always smaller than the path sent in, no new</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">  memory is allocated. The caller should allocate memory for the path</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">  sent in. This function manipulates that path in place. If the path</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">  format is not as expected, set data_dir_path to &quot;&quot; and return.</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">  The result is used to inform a SHOW CREATE TABLE command.</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">  @param[in,out]        data_dir_path   Full path/data_dir_path */</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> make_data_dir_path(<span class="keywordtype">char</span> *data_dir_path);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">  /** Check if the filepath provided is in a valid placement.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">  This routine is run during file discovery at startup.</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">  1) File-per-table must be in a dir named for the schema.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">  2) File-per-table must not be in the datadir.</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">  3) General tablespace must not be under the datadir.</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">  @param[in]    space_name  tablespace name</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">  @param[in]    space_id    tablespace ID</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">  @param[in]    fsp_flags   tablespace flags</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">  @param[in]    path        scanned realpath to an existing file to validate</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">  @retval true if the filepath is a valid datafile location */</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> is_valid_location(<span class="keyword">const</span> <span class="keywordtype">char</span> *space_name, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id,</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                                uint32_t fsp_flags, <span class="keyword">const</span> std::string &amp;path);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">  /** Check if the implicit filepath is immediately within a dir named for</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">  the schema.</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">  @param[in]    space_name  tablespace name</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">  @param[in]    path        scanned realpath to an existing file to validate</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">  @retval true if the filepath is valid */</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> is_valid_location_within_db(<span class="keyword">const</span> <span class="keywordtype">char</span> *space_name,</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                                          <span class="keyword">const</span> std::string &amp;path);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">  /** Convert filename to the file system charset format.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">  @param[in,out]        name            Filename to convert */</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> convert_to_filename_charset(std::string &amp;name);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">  /** Convert to lower case using the file system charset.</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">  @param[in,out]        path            Filepath to convert */</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> convert_to_lower_case(std::string &amp;path);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; <span class="keyword">protected</span>:<span class="comment"></span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">  /** Path to a file or directory. */</span></div><div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="classFil__path.html#a5a0787465141c982867ec17a1f873b00">  903</a></span>&#160;  std::string <a class="code" href="classFil__path.html#a5a0787465141c982867ec17a1f873b00">m_path</a>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">  /** A full absolute path to the same file. */</span></div><div class="line"><a name="l00906"></a><span class="lineno"><a class="line" href="classFil__path.html#a818d549710759a964a53c99af147b282">  906</a></span>&#160;  std::string <a class="code" href="classFil__path.html#a818d549710759a964a53c99af147b282">m_abs_path</a>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;};</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">/** The MySQL server --datadir value */</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="keyword">extern</span> <a class="code" href="classFil__path.html">Fil_path</a> <a class="code" href="fil0fil_8h.html#acbb949be855afdee75492fdc6b15eae1">MySQL_datadir_path</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">/** The MySQL server --innodb-undo-directory value */</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="keyword">extern</span> <a class="code" href="classFil__path.html">Fil_path</a> <a class="code" href="fil0fil_8h.html#a1b25803d14d08483d9080d2c24263db1">MySQL_undo_path</a>;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/** The undo path is different from any other known directory. */</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a44a67d237301b99531fe6b13ac90d5db">MySQL_undo_path_is_unique</a>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">/** Initial size of a single-table tablespace in pages */</span></div><div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a476b33f40dd3e61d08fe5281c8e195b2">  919</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a476b33f40dd3e61d08fe5281c8e195b2">FIL_IBD_FILE_INITIAL_SIZE</a> = 7;</div><div class="line"><a name="l00920"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a55e6fc55af12543b79ad9143366d7079">  920</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a55e6fc55af12543b79ad9143366d7079">FIL_IBT_FILE_INITIAL_SIZE</a> = 5;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">/** An empty tablespace (CREATE TABLESPACE) has minimum</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">of 4 pages and an empty CREATE TABLE (file_per_table) has 6 pages.</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">Minimum of these two is 4 */</span></div><div class="line"><a name="l00925"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a3565d2e4f820ad3ca5d10050ee349700">  925</a></span>&#160;constexpr <span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a3565d2e4f820ad3ca5d10050ee349700">FIL_IBD_FILE_INITIAL_SIZE_5_7</a> = 4;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">/** &#39;null&#39; (undefined) page offset in the context of file spaces */</span></div><div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a578077ea17f5093fc8fa7381ae89f7c8">  928</a></span>&#160;constexpr <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="fil0fil_8h.html#a578077ea17f5093fc8fa7381ae89f7c8">FIL_NULL</a> = std::numeric_limits&lt;page_no_t&gt;::max();</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">/** Maximum Page Number, one less than FIL_NULL */</span></div><div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a156ce94a40e1c03eafdc50ae6835ddbe">  931</a></span>&#160;constexpr <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="fil0fil_8h.html#a156ce94a40e1c03eafdc50ae6835ddbe">PAGE_NO_MAX</a> = std::numeric_limits&lt;page_no_t&gt;::max() - 1;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">/** Unknown space id */</span></div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aca94a6a8a0e445a399d0b145a77a9cb1">  934</a></span>&#160;constexpr <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> <a class="code" href="fil0fil_8h.html#aca94a6a8a0e445a399d0b145a77a9cb1">SPACE_UNKNOWN</a> = std::numeric_limits&lt;space_id_t&gt;::max();</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">/* Space address data type; this is intended to be used when</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">addresses accurate to a byte are stored in file pages. If the page part</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">of the address is FIL_NULL, the address is considered undefined. */</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">/** &#39;type&#39; definition in C: an address stored in a file page is a</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">string of bytes */</span></div><div class="line"><a name="l00942"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a7fb8fc662a77304b613e26fb6327faec">  942</a></span>&#160;<span class="keyword">using</span> <a class="code" href="fil0fil_8h.html#a7fb8fc662a77304b613e26fb6327faec">fil_faddr_t</a> = <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">/** File space address */</span></div><div class="line"><a name="l00945"></a><span class="lineno"><a class="line" href="structfil__addr__t.html">  945</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfil__addr__t.html">fil_addr_t</a> {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">/* Default constructor */</span></div><div class="line"><a name="l00947"></a><span class="lineno"><a class="line" href="structfil__addr__t.html#a0038fe8edaeb417030ca416421d0e178">  947</a></span>&#160;  <a class="code" href="structfil__addr__t.html#a0038fe8edaeb417030ca416421d0e178">fil_addr_t</a>() : <a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>(FIL_NULL), boffset(0) {}</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">  @param[in]    p       Logical page number</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">  @param[in]    boff    Offset within the page */</span></div><div class="line"><a name="l00952"></a><span class="lineno"><a class="line" href="structfil__addr__t.html#abab77b02b5fd9d7eaa64cb140b199aff">  952</a></span>&#160;  <a class="code" href="structfil__addr__t.html#abab77b02b5fd9d7eaa64cb140b199aff">fil_addr_t</a>(<a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a>, uint32_t boff) : <a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>(p), boffset(boff) {}</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">  /** Compare to instances</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">  @param[in]    rhs     Instance to compare with</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">  @return true if the page number and page offset are equal */</span></div><div class="line"><a name="l00957"></a><span class="lineno"><a class="line" href="structfil__addr__t.html#af82807188dcb0e17c0436006d2c309fb">  957</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__addr__t.html#af82807188dcb0e17c0436006d2c309fb">is_equal</a>(<span class="keyword">const</span> <a class="code" href="structfil__addr__t.html">fil_addr_t</a> &amp;rhs)<span class="keyword"> const </span>{</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a> == rhs.<a class="code" href="structfil__addr__t.html#acce6e3b37eabe358fa61ca850405b507">page</a> &amp;&amp; boffset == rhs.<a class="code" href="structfil__addr__t.html#a7dd983dae1a77f305993b23e0800fb0a">boffset</a>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  }</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">  /** Check if the file address is null.</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">  @return true if null */</span></div><div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="structfil__addr__t.html#afb9a0e7a68effb721b22509f403e3ed8">  963</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfil__addr__t.html#afb9a0e7a68effb721b22509f403e3ed8">is_null</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a> == FIL_NULL &amp;&amp; boffset == 0); }</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">  /** Print a string representation.</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">  @param[in,out]        out             Stream to write to */</span></div><div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="structfil__addr__t.html#ac9980d2dcc71833c41e1f348630bfc2b">  967</a></span>&#160;  std::ostream &amp;<a class="code" href="structfil__addr__t.html#ac9980d2dcc71833c41e1f348630bfc2b">print</a>(std::ostream &amp;out)<span class="keyword"> const </span>{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;[fil_addr_t: page=&quot;</span> &lt;&lt; <a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a> &lt;&lt; <span class="stringliteral">&quot;, boffset=&quot;</span> &lt;&lt; boffset &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">return</span> (out);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">  /** Page number within a space */</span></div><div class="line"><a name="l00974"></a><span class="lineno"><a class="line" href="structfil__addr__t.html#acce6e3b37eabe358fa61ca850405b507">  974</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structfil__addr__t.html#acce6e3b37eabe358fa61ca850405b507">page</a>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">  /** Byte offset within the page */</span></div><div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="structfil__addr__t.html#a7dd983dae1a77f305993b23e0800fb0a">  977</a></span>&#160;  uint32_t <a class="code" href="structfil__addr__t.html#a7dd983dae1a77f305993b23e0800fb0a">boffset</a>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;};</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">/* For printing fil_addr_t to a stream.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">@param[in,out]  out             Stream to write to</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">@param[in]      obj             fil_addr_t instance to write */</span></div><div class="line"><a name="l00983"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a3f82df38193e22d0763fd87fe52334a1">  983</a></span>&#160;<span class="keyword">inline</span> std::ostream &amp;<a class="code" href="fil0fil_8h.html#a3f82df38193e22d0763fd87fe52334a1">operator&lt;&lt;</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="structfil__addr__t.html">fil_addr_t</a> &amp;obj) {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">return</span> (obj.<a class="code" href="structfil__addr__t.html#ac9980d2dcc71833c41e1f348630bfc2b">print</a>(out));</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">/** The null file address */</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="keyword">extern</span> <a class="code" href="structfil__addr__t.html">fil_addr_t</a> <a class="code" href="fil0fil_8h.html#a7245663b84659f1d90266ce6303678e4">fil_addr_null</a>;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">  990</a></span>&#160;<span class="keyword">using</span> <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> = uint16_t;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">/** File page types (values of FIL_PAGE_TYPE) @{ */</span><span class="comment"></span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">/** B-tree node */</span></div><div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a41be152bff4a84f8182a05213b35134a">  994</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a41be152bff4a84f8182a05213b35134a">FIL_PAGE_INDEX</a> = 17855;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">/** R-tree node */</span></div><div class="line"><a name="l00997"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a465b8535e824662061bad9dfb290a409">  997</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a465b8535e824662061bad9dfb290a409">FIL_PAGE_RTREE</a> = 17854;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">/** Tablespace SDI Index page */</span></div><div class="line"><a name="l01000"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a98d3fc7dcab858ee6f9981dca51089a7"> 1000</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a98d3fc7dcab858ee6f9981dca51089a7">FIL_PAGE_SDI</a> = 17853;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">/** Undo log page */</span></div><div class="line"><a name="l01003"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a0eb91dfa25617dbb4c3bc6f847b651b2"> 1003</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a0eb91dfa25617dbb4c3bc6f847b651b2">FIL_PAGE_UNDO_LOG</a> = 2;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">/** Index node */</span></div><div class="line"><a name="l01006"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a3f9730bffd0bae95de65f2a89eed94f7"> 1006</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a3f9730bffd0bae95de65f2a89eed94f7">FIL_PAGE_INODE</a> = 3;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">/** Insert buffer free list */</span></div><div class="line"><a name="l01009"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aaa4f43beb8dfce3ba26303c8167c9844"> 1009</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#aaa4f43beb8dfce3ba26303c8167c9844">FIL_PAGE_IBUF_FREE_LIST</a> = 4;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">/* File page types introduced in MySQL/InnoDB 5.1.7 */</span><span class="comment"></span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">/** Freshly allocated page */</span></div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aa619a3a0c2d7555e677c37646cabb7e8"> 1013</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#aa619a3a0c2d7555e677c37646cabb7e8">FIL_PAGE_TYPE_ALLOCATED</a> = 0;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">/** Insert buffer bitmap */</span></div><div class="line"><a name="l01016"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#afccb4618754b1f3d87174600051962d2"> 1016</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#afccb4618754b1f3d87174600051962d2">FIL_PAGE_IBUF_BITMAP</a> = 5;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">/** System page */</span></div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#acddcb653ea9528847daf75ec0c4b0041"> 1019</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#acddcb653ea9528847daf75ec0c4b0041">FIL_PAGE_TYPE_SYS</a> = 6;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">/** Transaction system data */</span></div><div class="line"><a name="l01022"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aae0992caffb8e8f342acc548337bbe95"> 1022</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#aae0992caffb8e8f342acc548337bbe95">FIL_PAGE_TYPE_TRX_SYS</a> = 7;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">/** File space header */</span></div><div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#af791150ac0f0430e5edd59faaf5c3bde"> 1025</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#af791150ac0f0430e5edd59faaf5c3bde">FIL_PAGE_TYPE_FSP_HDR</a> = 8;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">/** Extent descriptor page */</span></div><div class="line"><a name="l01028"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a9391f2ee9b550430b09af777bd3a3b76"> 1028</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a9391f2ee9b550430b09af777bd3a3b76">FIL_PAGE_TYPE_XDES</a> = 9;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">/** Uncompressed BLOB page */</span></div><div class="line"><a name="l01031"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ad8f39cad77dc1018f45edb31c9328570"> 1031</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#ad8f39cad77dc1018f45edb31c9328570">FIL_PAGE_TYPE_BLOB</a> = 10;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">/** First compressed BLOB page */</span></div><div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a175cdb94c744443c1400bc0af88c78c4"> 1034</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a175cdb94c744443c1400bc0af88c78c4">FIL_PAGE_TYPE_ZBLOB</a> = 11;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">/** Subsequent compressed BLOB page */</span></div><div class="line"><a name="l01037"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aa116115d65501d15a9e10472da769735"> 1037</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#aa116115d65501d15a9e10472da769735">FIL_PAGE_TYPE_ZBLOB2</a> = 12;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">/** In old tablespaces, garbage in FIL_PAGE_TYPE is replaced with</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">this value when flushing pages. */</span></div><div class="line"><a name="l01041"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aa16109797a628837e3ab6f1f04d86e60"> 1041</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#aa16109797a628837e3ab6f1f04d86e60">FIL_PAGE_TYPE_UNKNOWN</a> = 13;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">/** Compressed page */</span></div><div class="line"><a name="l01044"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a9607ac7853dde13d0456fb05747bc25a"> 1044</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a9607ac7853dde13d0456fb05747bc25a">FIL_PAGE_COMPRESSED</a> = 14;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">/** Encrypted page */</span></div><div class="line"><a name="l01047"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ab9bb5a0a6104ad5246734048e8ca4597"> 1047</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#ab9bb5a0a6104ad5246734048e8ca4597">FIL_PAGE_ENCRYPTED</a> = 15;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">/** Compressed and Encrypted page */</span></div><div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a26f18c4bcc2a3f065809cd26581eeaf3"> 1050</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a26f18c4bcc2a3f065809cd26581eeaf3">FIL_PAGE_COMPRESSED_AND_ENCRYPTED</a> = 16;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">/** Encrypted R-tree page */</span></div><div class="line"><a name="l01053"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a12ac69fcb82162d44d5a76e64a6255fe"> 1053</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a12ac69fcb82162d44d5a76e64a6255fe">FIL_PAGE_ENCRYPTED_RTREE</a> = 17;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">/** Uncompressed SDI BLOB page */</span></div><div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ad69a57342a5985a911b7232e1b275742"> 1056</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#ad69a57342a5985a911b7232e1b275742">FIL_PAGE_SDI_BLOB</a> = 18;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">/** Commpressed SDI BLOB page */</span></div><div class="line"><a name="l01059"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aad1680d7f61f0977351181c361ce1d97"> 1059</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#aad1680d7f61f0977351181c361ce1d97">FIL_PAGE_SDI_ZBLOB</a> = 19;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">/** Legacy doublewrite buffer page. */</span></div><div class="line"><a name="l01062"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aa72d3c3c30968e31fb99187cd7316fa5"> 1062</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#aa72d3c3c30968e31fb99187cd7316fa5">FIL_PAGE_TYPE_LEGACY_DBLWR</a> = 20;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">/** Rollback Segment Array page */</span></div><div class="line"><a name="l01065"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ae888af331068bfcfb0e8ce4b07de9487"> 1065</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#ae888af331068bfcfb0e8ce4b07de9487">FIL_PAGE_TYPE_RSEG_ARRAY</a> = 21;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">/** Index pages of uncompressed LOB */</span></div><div class="line"><a name="l01068"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a123d7bced59879577f97fd5e3893da8a"> 1068</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a123d7bced59879577f97fd5e3893da8a">FIL_PAGE_TYPE_LOB_INDEX</a> = 22;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">/** Data pages of uncompressed LOB */</span></div><div class="line"><a name="l01071"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a15d58ef09dd9a196988f6eb08f744930"> 1071</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a15d58ef09dd9a196988f6eb08f744930">FIL_PAGE_TYPE_LOB_DATA</a> = 23;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">/** The first page of an uncompressed LOB */</span></div><div class="line"><a name="l01074"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a0922c81a176ec8867f3ec32c1e484904"> 1074</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a0922c81a176ec8867f3ec32c1e484904">FIL_PAGE_TYPE_LOB_FIRST</a> = 24;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">/** The first page of a compressed LOB */</span></div><div class="line"><a name="l01077"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aa2a338b6496f9c4299874191d0490e1c"> 1077</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#aa2a338b6496f9c4299874191d0490e1c">FIL_PAGE_TYPE_ZLOB_FIRST</a> = 25;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">/** Data pages of compressed LOB */</span></div><div class="line"><a name="l01080"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a92029552027a3d65eab6fc99bf6afa2b"> 1080</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a92029552027a3d65eab6fc99bf6afa2b">FIL_PAGE_TYPE_ZLOB_DATA</a> = 26;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">/** Index pages of compressed LOB. This page contains an array of</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">z_index_entry_t objects.*/</span></div><div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#adb6176c5f111db9997f1106eef6bb009"> 1084</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#adb6176c5f111db9997f1106eef6bb009">FIL_PAGE_TYPE_ZLOB_INDEX</a> = 27;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">/** Fragment pages of compressed LOB. */</span></div><div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a6f4bc1557d5667d022cb4e874e54c695"> 1087</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a6f4bc1557d5667d022cb4e874e54c695">FIL_PAGE_TYPE_ZLOB_FRAG</a> = 28;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">/** Index pages of fragment pages (compressed LOB). */</span></div><div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a35b5217e34bb41a859bccf7fd2d1b7af"> 1090</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a35b5217e34bb41a859bccf7fd2d1b7af">FIL_PAGE_TYPE_ZLOB_FRAG_ENTRY</a> = 29;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">/** Used by i_s.cc to index into the text description. */</span></div><div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a7061150bba02af80efc57616e0cf4ff1"> 1093</a></span>&#160;constexpr <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#a7061150bba02af80efc57616e0cf4ff1">FIL_PAGE_TYPE_LAST</a> = <a class="code" href="fil0fil_8h.html#a35b5217e34bb41a859bccf7fd2d1b7af">FIL_PAGE_TYPE_ZLOB_FRAG_ENTRY</a>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">/** Check whether the page type is index (Btree or Rtree or SDI) type */</span></div><div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a37bb1e24e835b3dcf1228017b6e903f7"> 1096</a></span>&#160;<span class="preprocessor">#define fil_page_type_is_index(page_type)                      \</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="preprocessor">  (page_type == FIL_PAGE_INDEX || page_type == FIL_PAGE_SDI || \</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="preprocessor">   page_type == FIL_PAGE_RTREE)</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">/** Check whether the page is index page (either regular Btree index or Rtree</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">index */</span></div><div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a716d70780468ba614ab2d46516e753f7"> 1102</a></span>&#160;<span class="preprocessor">#define fil_page_index_page_check(page) \</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="preprocessor">  fil_page_type_is_index(fil_page_get_type(page))</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">/** @} */</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">/** The number of fsyncs done to the log */</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="fil0fil_8h.html#a39a42ffa98db259fbbe96572f310836d">fil_n_log_flushes</a>;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">/** Number of pending redo log flushes */</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="fil0fil_8h.html#a92993d7b03ae1933b3465469b960295a">fil_n_pending_log_flushes</a>;<span class="comment"></span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/** Number of pending tablespace flushes */</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="fil0fil_8h.html#a7a3d525dad9447d8b1f10b71fa8ceeb9">fil_n_pending_tablespace_flushes</a>;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">/** Number of files currently open */</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="fil0fil_8h.html#a6f217df105139955e14289976f102e10">fil_n_file_opened</a>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">/** Look up a tablespace.</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">The caller should hold an InnoDB table lock or a MDL that prevents</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">the tablespace from being dropped during the operation,</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">or the caller should be in single-threaded crash recovery mode</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">(no user connections that could drop tablespaces).</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">If this is not the case, fil_space_acquire() and fil_space_release()</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">should be used instead.</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">@return tablespace, or nullptr if not found */</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<a class="code" href="structfil__space__t.html">fil_space_t</a> *<a class="code" href="fil0fil_8h.html#a246bc88b7e6a76d4dc8c26fa8f7f26d1">fil_space_get</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">/** Returns the latch of a file space.</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">@return latch protecting storage allocation */</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<a class="code" href="structrw__lock__t.html">rw_lock_t</a> *<a class="code" href="fil0fil_8h.html#a2d434d6cf2b0e2673e69d867d933433b">fil_space_get_latch</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">/** Gets the type of a file space.</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">@return file type */</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a> <a class="code" href="fil0fil_8h.html#a2cad8dd2050bb49d4a553686b231cdf2">fil_space_get_type</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">/** Note that a tablespace has been imported.</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">It is initially marked as FIL_TYPE_IMPORT so that no logging is</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">done during the import process when the space ID is stamped to each page.</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">Now we change it to FIL_SPACE_TABLESPACE to start redo and undo logging.</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">NOTE: temporary tablespaces are never imported.</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID */</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a9caac97efbd0d4d2d7167cef0a41e51f">fil_space_set_imported</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">/** Attach a file to a tablespace. File must be closed.</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">@param[in]      name            file name (file must be closed)</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">@param[in]      size            file size in database blocks, rounded</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">                                downwards to an integer</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">@param[in,out]  space           space where to append</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">@param[in]      is_raw          true if a raw device or a raw disk partition</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">@param[in]      atomic_write    true if the file has atomic write enabled</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">@param[in]      max_pages       maximum number of pages in file</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">@return pointer to the file name</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">@retval nullptr if error */</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="fil0fil_8h.html#a84970d71627adf657f03fbec0eeef569">fil_node_create</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size, <a class="code" href="structfil__space__t.html">fil_space_t</a> *space,</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                      <span class="keywordtype">bool</span> is_raw, <span class="keywordtype">bool</span> atomic_write,</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                      <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> max_pages = PAGE_NO_MAX)</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">/** Create a space memory object and put it to the fil_system hash table.</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">The tablespace name is independent from the tablespace file-name.</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">Error messages are issued to the server log.</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">@param[in]      name            Tablespace name</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">@param[in]      flags           Tablespace flags</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">@param[in]      purpose         Tablespace purpose</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">@return pointer to created tablespace, to be filled in with fil_node_create()</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">@retval nullptr on failure (such as when the same tablespace exists) */</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<a class="code" href="structfil__space__t.html">fil_space_t</a> *<a class="code" href="fil0fil_8h.html#ae35564e76ec51d859ebf71b79bf418a4">fil_space_create</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id,</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                              uint32_t <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a> purpose)</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">/** Assigns a new space id for a new single-table tablespace. This works</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">simply by incrementing the global counter. If 4 billion id&#39;s is not enough,</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">we may need to recycle id&#39;s.</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">@param[out]     space_id                Set this to the new tablespace ID</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">@return true if assigned, false if not */</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#ac4fbebdfd084a82357b6c496846a80cc">fil_assign_new_space_id</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> *space_id)</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">/** Returns the path from the first fil_node_t found with this space ID.</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">The caller is responsible for freeing the memory allocated here for the</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">value returned.</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">@return own: A copy of fil_node_t::path, nullptr if space ID is zero</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">        or not found. */</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="fil0fil_8h.html#ac779a181f9caaa423e712f1c0bf13749">fil_space_get_first_path</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">/** Returns the size of the space in pages. The tablespace must be cached</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">in the memory cache.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">@return space size, 0 if space not found */</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="fil0fil_8h.html#abe7b87d702aa585acb95430bf3583a66">fil_space_get_size</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">/** Returns the flags of the space. The tablespace must be cached</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">in the memory cache.</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID for which to get the flags</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">@return flags, ULINT_UNDEFINED if space not found */</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;uint32_t <a class="code" href="fil0fil_8h.html#a183b38e6500914b529fe0103930090c5">fil_space_get_flags</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">/** Sets the flags of the tablespace. The tablespace must be locked</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">in MDL_EXCLUSIVE MODE.</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">@param[in]      space           tablespace in-memory struct</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">@param[in]      flags           tablespace flags */</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a302ac5497eda800518a519a5f7c06882">fil_space_set_flags</a>(<a class="code" href="structfil__space__t.html">fil_space_t</a> *space, uint32_t <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">/** Open each file of a tablespace if not already open.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">@retval true    if all file nodes were opened</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">@retval false   on failure */</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#af06273731da470c55d8c08b8b3346f32">fil_space_open</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id) MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">/** Close each file of a tablespace if open.</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID */</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a6635d7cf204fe3b71010777815671bd6">fil_space_close</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">/** Returns the page size of the space and whether it is compressed or not.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">The tablespace must be cached in the memory cache.</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment">@param[out]     found           true if tablespace was found</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">@return page size */</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> <a class="code" href="fil0fil_8h.html#a7d969050b079fabd799826d685620854">fil_space_get_page_size</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <span class="keywordtype">bool</span> *found)</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">/** Initializes the tablespace memory cache.</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">@param[in]      max_n_open      Maximum number of open files */</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a76eff6ecf40d691344ba7fc0a3d55c7e">fil_init</a>(ulint max_n_open);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">/** Initializes the tablespace memory cache. */</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a84217718f085ad4d05ae43ab64906206">fil_close</a>();</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">/** Opens all log files and system tablespace data files.</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">They stay open until the database server shutdown. This should be called</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">at a server startup after the space objects for the log and the system</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">tablespace have been created. The purpose of this operation is to make</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">sure we never run out of file descriptors if we need to read from the</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">insert buffer or to write to the log. */</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#ae0ddd62274fd0944bd8a8d22db178f43">fil_open_log_and_system_tablespace_files</a>();</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">/** Closes all open files. There must not be any pending i/o&#39;s or not flushed</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">modifications in the files. */</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a74a7f3a7524f83baa533e865b824ea64">fil_close_all_files</a>();</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">/** Closes the redo log files. There must not be any pending i/o&#39;s or not</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">flushed modifications in the files.</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment">@param[in]      free_all        Whether to free the instances. */</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a6bf9aebbbf0ff3873993dce5b68ffd3b">fil_close_log_files</a>(<span class="keywordtype">bool</span> free_all);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment">/** Iterate over the files in all the tablespaces. */</span></div><div class="line"><a name="l01262"></a><span class="lineno"><a class="line" href="classFil__iterator.html"> 1262</a></span>&#160;<span class="keyword">class </span><a class="code" href="classFil__iterator.html">Fil_iterator</a> {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l01264"></a><span class="lineno"><a class="line" href="classFil__iterator.html#a6fb530c9ad8ad86eaba80d8d4aa044b5"> 1264</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classFil__iterator.html#a6fb530c9ad8ad86eaba80d8d4aa044b5">Function</a> = std::function&lt;dberr_t(fil_node_t *)&gt;;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">  /** For each data file, exclude redo log files.</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment">  @param[in]    include_log     include files, if true</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">  @param[in]    f               Callback */</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> F&gt;</div><div class="line"><a name="l01270"></a><span class="lineno"><a class="line" href="classFil__iterator.html#ac05438d4c2c501314d1b3e1529b46a2b"> 1270</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="classFil__iterator.html#ac05438d4c2c501314d1b3e1529b46a2b">for_each_file</a>(<span class="keywordtype">bool</span> include_log, F &amp;&amp;f) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">return</span> (iterate(include_log, [=](<a class="code" href="structfil__node__t.html">fil_node_t</a> *<a class="code" href="namespacefile.html">file</a>) { <span class="keywordflow">return</span> (f(file)); }));</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  }</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">  /** Iterate through all persistent tablespace files (FIL_TYPE_TABLESPACE)</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">  returning the nodes via callback function cbk.</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">  @param[in]    include_log     include log files, if true</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">  @param[in]    f               Callback</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="comment">  @return any error returned by the callback function. */</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="keyword">static</span> <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> iterate(<span class="keywordtype">bool</span> include_log, <a class="code" href="classFil__iterator.html#a6fb530c9ad8ad86eaba80d8d4aa044b5">Function</a> &amp;&amp;f);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;};</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">/** Sets the max tablespace id counter if the given number is bigger than the</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">previous value.</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment">@param[in]      max_id          Maximum known tablespace ID */</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#aaa52f6d1eb1a1dac2c9fa31e67cc931e">fil_set_max_space_id_if_bigger</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> max_id);</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">/** Write the flushed LSN to the page header of the first page in the</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment">system tablespace.</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment">@param[in]      lsn             Flushed LSN</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">@return DB_SUCCESS or error number */</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a6e33698f69836432f1cb98d6c3c93d3b">fil_write_flushed_lsn</a>(<a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="xcom__base_8cc.html#a0ce0765b958f7289d206f0c78bd105c7">lsn</a>) MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">/** Frees a space object from the tablespace memory cache.</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment">Closes a tablespaces&#39; files but does not delete them.</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">There must not be any pending i/o&#39;s or flushes on the files.</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">@return true if success */</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="keywordtype">bool</span> meb_fil_space_free(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">/** Extends all tablespaces to the size stored in the space header. During the</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">mysqlbackup --apply-log phase we extended the spaces on-demand so that log</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment">records could be applied, but that may have left spaces still too small</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment">compared to the size stored in the space header. */</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="keywordtype">void</span> meb_extend_tablespaces_to_stored_len();</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">/** Process a file name passed as an input</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">@param[in]      name            absolute path of tablespace file</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment">@param[in]      space_id        the tablespace ID */</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="keywordtype">void</span> meb_fil_name_process(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">/** Acquire a tablespace when it could be dropped concurrently.</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">Used by background threads that do not necessarily hold proper locks</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">for concurrency control.</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">@return the tablespace, or nullptr if missing or being deleted */</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<a class="code" href="structfil__space__t.html">fil_space_t</a> *<a class="code" href="fil0fil_8h.html#a898ba1a1faba441b5f042c5ba14518d4">fil_space_acquire</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">/** Acquire a tablespace that may not exist.</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">Used by background threads that do not necessarily hold proper locks</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">for concurrency control.</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">@return the tablespace, or nullptr if missing or being deleted */</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<a class="code" href="structfil__space__t.html">fil_space_t</a> *<a class="code" href="fil0fil_8h.html#acc0c193260209597c6246aab49e8bc57">fil_space_acquire_silent</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment">/** Release a tablespace acquired with fil_space_acquire().</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">@param[in,out]  space   Tablespace to release  */</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a80b8d6c871cd6cbb3b8070d806afee19">fil_space_release</a>(<a class="code" href="structfil__space__t.html">fil_space_t</a> *space);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">/** Fetch the file name opened for a space_id from the file map.</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">@param[in]   space_id  tablespace ID</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">@param[out]  name      the scanned filename</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment">@return true if the space_id is found. The name is set to an</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">empty string if the space_id is not found. */</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a0b42cf1baad76bf974a25c99ff7bf06a">fil_system_get_file_by_space_id</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, std::string &amp;name);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">/** Fetch the file name opened for an undo space number from the file map.</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">@param[in]   space_num  Undo tablespace Number</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">@param[out]  space_id   Undo tablespace ID</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">@param[out]  name       the scanned filename</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">@return true if the space_num was found. The name is set to an</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">empty string if the space_num is not found. */</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a04c3db21caa081f0938ad16d17743497">fil_system_get_file_by_space_num</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num,</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                                      <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> &amp;space_id, std::string &amp;name);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">/** Truncate the tablespace to needed size.</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID to truncate</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">@param[in]      size_in_pages   Truncate size.</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">@return true if truncate was successful. */</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a80d90b87f907097d8e996d56e9b39826">fil_truncate_tablespace</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size_in_pages)</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">/** Drop and create an UNDO tablespace.</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">@param[in]  old_space_id   Tablespace ID to truncate</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">@param[in]  new_space_id   Tablespace ID to for the new file</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">@param[in]  size_in_pages  Truncate size.</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">@return true if truncate was successful. */</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#aa40c1e190dea30f510081f98a98e48a4">fil_replace_tablespace</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> old_space_id, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> new_space_id,</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                            <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size_in_pages)</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">/** Closes a single-table tablespace. The tablespace must be cached in the</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">memory cache. Free all pages used by the tablespace.</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">@param[in,out]  trx             Transaction covering the close</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">@return DB_SUCCESS or error */</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a165fafc51a410abbcbdaeb2dcde0e241">fil_close_tablespace</a>(<a class="code" href="structtrx__t.html">trx_t</a> *trx, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">/** Discards a single-table tablespace. The tablespace must be cached in the</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">memory cache. Discarding is like deleting a tablespace, but</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment"> 1. We do not drop the table from the data dictionary;</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment"> 2. We remove all insert buffer entries for the tablespace immediately;</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">    in DROP TABLE they are only removed gradually in the background;</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment"> 3. When the user does IMPORT TABLESPACE, the tablespace will have the</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">    same id as it originally had.</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment"> 4. Free all the pages in use by the tablespace if rename=true.</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">@return DB_SUCCESS or error */</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#ae05afc75972a4fe79695b4563e7f4b12">fil_discard_tablespace</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">/** Test if a tablespace file can be renamed to a new filepath by checking</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">if that the old filepath exists and the new filepath does not exist.</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">@param[in]      old_path        Old filepath</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">@param[in]      new_path        New filepath</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">@param[in]      is_discarded    Whether the tablespace is discarded</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">@return innodb error code */</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a7fb936f27ff66ec84e14972bdf2498dc">fil_rename_tablespace_check</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *old_path,</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                                    <span class="keyword">const</span> <span class="keywordtype">char</span> *new_path, <span class="keywordtype">bool</span> is_discarded)</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment">/** Rename a single-table tablespace.</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">The tablespace must exist in the memory cache.</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">@param[in]      old_path        Old file name</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">@param[in]      new_name        New tablespace name in the schema/name format</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">@param[in]      new_path_in     New file name, or nullptr if it is located in</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">the normal data directory</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">@return InnoDB error code */</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a9af3c7308412f543e7c732f4d744d599">fil_rename_tablespace</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *old_path,</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                              <span class="keyword">const</span> <span class="keywordtype">char</span> *new_name, <span class="keyword">const</span> <span class="keywordtype">char</span> *new_path_in)</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">/** Create an IBD tablespace file.</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">@param[in]      name            Tablespace name in dbname/tablename format.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">                                For general tablespaces, the &#39;dbname/&#39; part</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">                                may be missing.</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment">@param[in]      path            Path and filename of the datafile to create.</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">@param[in]      flags           Tablespace flags</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">@param[in]      size            Initial size of the tablespace file in pages,</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">                                must be &gt;= FIL_IBD_FILE_INITIAL_SIZE</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#ae57ef1933a8adfa619ea4a67bd3aff6e">fil_ibd_create</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                       uint32_t <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size)</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">/** Create a session temporary tablespace (IBT) file.</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">@param[in]      name            Tablespace name</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">@param[in]      path            Path and filename of the datafile to create.</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">@param[in]      flags           Tablespace flags</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">@param[in]      size            Initial size of the tablespace file in pages,</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">                                must be &gt;= FIL_IBT_FILE_INITIAL_SIZE</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#ac0877a7a83f8c2e639172038a763a434">fil_ibt_create</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *path,</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                       uint32_t flags, <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size)</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">/** Deletes an IBD  or IBU tablespace.</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">The tablespace must be cached in the memory cache. This will delete the</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment">datafile, fil_space_t &amp; fil_node_t entries from the file_system_t cache.</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">@param[in]      buf_remove      Specify the action to take on the pages</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">for this table in the buffer pool.</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">@return DB_SUCCESS, DB_TABLESPCE_NOT_FOUND or DB_IO_ERROR */</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#af2667bd8f4524493714d53ce9c2cd941">fil_delete_tablespace</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="code" href="buf0types_8h.html#a64b07ecd8aec364fe56a54bcd279b3b3">buf_remove_t</a> buf_remove)</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">/** Open a single-table tablespace and optionally check the space id is</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">right in it. If not successful, print an error message to the error log. This</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment">function is used to open a tablespace when we start up mysqld, and also in</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">IMPORT TABLESPACE.</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">NOTE that we assume this operation is used either at the database startup</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">or under the protection of the dictionary mutex, so that two users cannot</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">race here.</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">The fil_node_t::handle will not be left open.</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">@param[in]      validate        whether we should validate the tablespace</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">                                (read the first page of the file and</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">                                check that the space id in it matches id)</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">@param[in]      purpose         FIL_TYPE_TABLESPACE or FIL_TYPE_TEMPORARY</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">@param[in]      flags           tablespace flags</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment">@param[in]      space_name      tablespace name of the datafile</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment">                                If file-per-table, it is the table name in the</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">                                databasename/tablename format</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment">@param[in]      table_name      table name in case need to build filename</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">from it</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">@param[in]      path_in         expected filepath, usually read from dictionary</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">@param[in]      strict          whether to report error when open ibd failed</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">@param[in]      old_space       whether it is a 5.7 tablespace opening</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">                                by upgrade</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a216853b540379e2d5c5b804e2d5f8350">fil_ibd_open</a>(<span class="keywordtype">bool</span> validate, <a class="code" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a> purpose, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id,</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                     uint32_t flags, <span class="keyword">const</span> <span class="keywordtype">char</span> *space_name,</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacerules__table__service.html#a58d8b2e690d4fb60a8d9557c8a4b5cd1">table_name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *path_in, <span class="keywordtype">bool</span> strict,</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                     <span class="keywordtype">bool</span> old_space) MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="comment">/** Returns true if a matching tablespace exists in the InnoDB tablespace</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">memory cache.</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="comment">@param[in]      name            Tablespace name used in space_create().</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="comment">@param[in]      print_err       Print detailed error information to the</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment">                                error log if a matching tablespace is</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">                                not found from memory.</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="comment">@param[in]      adjust_space    Whether to adjust space id on mismatch</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment">@param[in]      heap            Heap memory</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="comment">@param[in]      table_id        table ID</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment">@return true if a matching tablespace exists in the memory cache */</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a1dff64b055265ef6bfb1117a0e52f3df">fil_space_exists_in_mem</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *name,</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                             <span class="keywordtype">bool</span> print_err, <span class="keywordtype">bool</span> adjust_space,</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                             <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap, <a class="code" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> table_id)</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">/** Extends all tablespaces to the size stored in the space header. During the</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment">mysqlbackup --apply-log phase we extended the spaces on-demand so that log</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">records could be appllied, but that may have left spaces still too small</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="comment">compared to the size stored in the space header. */</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a9ee761a0f94092398aad2144be2d8ebd">fil_extend_tablespaces_to_stored_len</a>();</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="comment">/** Try to extend a tablespace if it is smaller than the specified size.</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="comment">@param[in,out]  space           Tablespace ID</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="comment">@param[in]      size            desired size in pages</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="comment">@return whether the tablespace is at least as big as requested */</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a35b2e421c61a5b0f0f5b6ba0f572d054">fil_space_extend</a>(<a class="code" href="structfil__space__t.html">fil_space_t</a> *space, <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size)</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">/** Tries to reserve free extents in a file space.</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment">@param[in]      n_free_now      Number of free extents now</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment">@param[in]      n_to_reserve    How many one wants to reserve</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="comment">@return true if succeed */</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a898a83bd2c3b03830f612b8cfa6d12f3">fil_space_reserve_free_extents</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, ulint n_free_now,</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                                    ulint n_to_reserve)</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">/** Releases free extents in a file space.</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">@param[in]      n_reserved      How many were reserved */</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a9facec35f36a17d5a5ef51746d81bd86">fil_space_release_free_extents</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, ulint n_reserved);</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="comment">/** Gets the number of reserved extents. If the database is silent, this</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment">number should be zero.</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment">@return the number of reserved extents */</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;ulint <a class="code" href="fil0fil_8h.html#a1ecc661e47bafeed4a86efbc0b32fa94">fil_space_get_n_reserved_extents</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="comment">/** Read or write redo log data (synchronous buffered IO).</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment">@param[in]      type            IO context</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="comment">@param[in]      page_id         where to read or write</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment">@param[in]      page_size       page size</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment">@param[in]      byte_offset     remainder of offset in bytes</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="comment">@param[in]      len             this must not cross a file boundary;</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<span class="comment">@param[in,out]  buf             buffer where to store read data or from where</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="comment">                                to write</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="comment">@retval DB_SUCCESS if all OK */</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a6cea8774598156db53c675791f8911d4">fil_redo_io</a>(<span class="keyword">const</span> <a class="code" href="classIORequest.html">IORequest</a> &amp;type, <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size, ulint byte_offset, ulint len,</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                    <span class="keywordtype">void</span> *<a class="code" href="namespacebuf.html">buf</a>) MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">/** Read or write data from a file.</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment">@param[in]      type            IO context</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">@param[in]      sync            If true then do synchronous IO</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="comment">@param[in]      page_id         page id</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment">@param[in]      page_size       page size</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">@param[in]      byte_offset     remainder of offset in bytes; in aio this</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment">                                must be divisible by the OS block size</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">@param[in]      len             how many bytes to read or write; this must</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">                                not cross a file boundary; in AIO this must</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="comment">                                be a block size multiple</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment">@param[in,out]  buf             buffer where to store read data or from where</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">                                to write; in AIO this must be appropriately</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment">                                aligned</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">@param[in]      message         message for AIO handler if !sync, else ignored</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment">@return error code</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment">@retval DB_SUCCESS on success</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment">@retval DB_TABLESPACE_DELETED if the tablespace does not exist */</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#ad121c7d988d7de8bbf634b5dec95ee92">fil_io</a>(<span class="keyword">const</span> <a class="code" href="classIORequest.html">IORequest</a> &amp;type, <span class="keywordtype">bool</span> sync, <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;               <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size, ulint byte_offset, ulint len,</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;               <span class="keywordtype">void</span> *buf, <span class="keywordtype">void</span> *message) MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment">/** Waits for an AIO operation to complete. This function is used to write the</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">handler for completed requests. The aio array of pending requests is divided</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">into segments (see os0file.cc for more info). The thread specifies which</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">segment it wants to wait for.</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">@param[in]      segment         The number of the segment in the AIO array</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment">                                to wait for */</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#aca9bf7607c848041530d5e841c14a7d8">fil_aio_wait</a>(ulint segment);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">/** Flushes to disk possible writes cached by the OS. If the space does</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">not exist or is being dropped, does not do anything.</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID (this can be a group of log files</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">                                or a tablespace of the database) */</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#af46bc1eba7b282012a9d3c58bdd155e4">fil_flush</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment">/** Flush to disk the writes in file spaces of the given type</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="comment">possibly cached by the OS. */</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a0931f11b2cac78f733c50dfbd7215ae2">fil_flush_file_redo</a>();</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">/** Flush to disk the writes in file spaces of the given type</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment">possibly cached by the OS.</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment">@param[in]      purpose         FIL_TYPE_TABLESPACE or FIL_TYPE_LOG, can be</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">ORred. */</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#acc72e44736e7f41797f8accd98d5905e">fil_flush_file_spaces</a>(uint8_t purpose);</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">/** Checks the consistency of the tablespace cache.</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">@return true if ok */</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a141f6ad82c682a18639a8448616c70d7">fil_validate</a>();</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment">/** Returns true if file address is undefined.</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment">@param[in]      addr            File address to check</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="comment">@return true if undefined */</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#ad93c06146df5dc35fa50cd81e30cf7a7">fil_addr_is_null</a>(<span class="keyword">const</span> <a class="code" href="structfil__addr__t.html">fil_addr_t</a> &amp;addr)</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">/** Get the predecessor of a file page.</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment">@param[in]      page            File page</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment">@return FIL_PAGE_PREV */</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="fil0fil_8h.html#a19e4f775bfed739a42abcf116ee85107">fil_page_get_prev</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>)</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="comment">/** Get the successor of a file page.</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="comment">@param[in]      page            File page</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="comment">@return FIL_PAGE_NEXT */</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="fil0fil_8h.html#a8dc879c2f6e6d7ba3665b45809151f8d">fil_page_get_next</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *page)</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment">/** Sets the file page type.</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">@param[in,out]  page            File page</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">@param[in]      type            File page type to set */</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#adc05d48fd63d3f8800288213198028b3">fil_page_set_type</a>(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *page, ulint type);</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment">/** Reset the page type.</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="comment">Data files created before MySQL 5.1 may contain garbage in FIL_PAGE_TYPE.</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment">In MySQL 3.23.53, only undo log pages and index pages were tagged.</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="comment">Any other pages were written with uninitialized bytes in FIL_PAGE_TYPE.</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="comment">@param[in]      page_id         Page number</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="comment">@param[in,out]  page            Page with invalid FIL_PAGE_TYPE</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="comment">@param[in]      type            Expected page type</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment">@param[in,out]  mtr             Mini-transaction */</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#ad1c8f59a6056674daf9dad7460c3d712">fil_page_reset_type</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id, <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *page, ulint type,</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                         <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">/** Get the file page type.</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">@param[in]      page            File page</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment">@return page type */</span></div><div class="line"><a name="l01634"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#ab64a7186e99eb6c62ba75701faa8296b"> 1634</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="fil0fil_8h.html#ab64a7186e99eb6c62ba75701faa8296b">fil_page_get_type</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *page) {</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="keywordflow">return</span> (static_cast&lt;page_type_t&gt;(<a class="code" href="mach0data_8h.html#ac9eed1c0fd6bf1f7edd38bebdea3fd13">mach_read_from_2</a>(page + <a class="code" href="fil0types_8h.html#a21e45de3e62f010649a911f8027cfa4e">FIL_PAGE_TYPE</a>)));</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;}<span class="comment"></span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="comment">/** Check (and if needed, reset) the page type.</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">Data files created before MySQL 5.1 may contain</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment">garbage in the FIL_PAGE_TYPE field.</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">In MySQL 3.23.53, only undo log pages and index pages were tagged.</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">Any other pages were written with uninitialized bytes in FIL_PAGE_TYPE.</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">@param[in]      page_id         Page number</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">@param[in,out]  page            Page with possibly invalid FIL_PAGE_TYPE</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment">@param[in]      type            Expected page type</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="comment">@param[in,out]  mtr             Mini-transaction */</span></div><div class="line"><a name="l01646"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#afae19bad00bf1b4de89ea84e456612f4"> 1646</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#afae19bad00bf1b4de89ea84e456612f4">fil_page_check_type</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id, <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *page,</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                                ulint type, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr) {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  ulint page_type = <a class="code" href="fil0fil_8h.html#ab64a7186e99eb6c62ba75701faa8296b">fil_page_get_type</a>(page);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="keywordflow">if</span> (page_type != type) {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="fil0fil_8h.html#ad1c8f59a6056674daf9dad7460c3d712">fil_page_reset_type</a>(page_id, page, type, mtr);</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  }</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;}</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment">/** Check (and if needed, reset) the page type.</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">Data files created before MySQL 5.1 may contain</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">garbage in the FIL_PAGE_TYPE field.</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment">In MySQL 3.23.53, only undo log pages and index pages were tagged.</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment">Any other pages were written with uninitialized bytes in FIL_PAGE_TYPE.</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">@param[in,out]  block           Block with possibly invalid FIL_PAGE_TYPE</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment">@param[in]      type            Expected page type</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment">@param[in,out]  mtr             Mini-transaction */</span></div><div class="line"><a name="l01663"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a91503ca6851d0e2caf70c16935136d5a"> 1663</a></span>&#160;<span class="preprocessor">#define fil_block_check_type(block, type, mtr) \</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="preprocessor">  fil_page_check_type(block-&gt;page.id, block-&gt;frame, type, mtr)</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">/** Increase redo skipped count for a tablespace.</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID */</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a2dc37e993bccf6e1a331e2ff5e56cafb">fil_space_inc_redo_skipped_count</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment">/** Decrease redo skipped count for a tablespace.</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID */</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a4559d8a2c8ab1735e57456b173bc3ada">fil_space_dec_redo_skipped_count</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment">/** Check whether a single-table tablespace is redo skipped.</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment">@return true if redo skipped */</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#ad0da419c03df4459e0d2170fff32bcfd">fil_space_is_redo_skipped</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="comment">/** Delete the tablespace file and any related files like .cfg.</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="comment">This should not be called for temporary tables.</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="comment">@param[in]      path            File path of the IBD tablespace</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="comment">@return true on success */</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a1e5f471d5272ce5d45250f4d66075926">fil_delete_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path) MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment">/** Callback functor. */</span></div><div class="line"><a name="l01689"></a><span class="lineno"><a class="line" href="structPageCallback.html"> 1689</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structPageCallback.html">PageCallback</a> {<span class="comment"></span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="comment">  /** Default constructor */</span></div><div class="line"><a name="l01691"></a><span class="lineno"><a class="line" href="structPageCallback.html#a7a7e5048664114dd32155c6b68628983"> 1691</a></span>&#160;  <a class="code" href="structPageCallback.html#a7a7e5048664114dd32155c6b68628983">PageCallback</a>() : m_page_size(0, 0, <a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>), m_filepath() UNIV_NOTHROW {}</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"><a class="line" href="structPageCallback.html#ab384ed74aa8c49a91d4cf54f07f78809"> 1693</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="structPageCallback.html#ab384ed74aa8c49a91d4cf54f07f78809">~PageCallback</a>() UNIV_NOTHROW {}</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">  /** Called for page 0 in the tablespace file at the start.</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">  @param file_size size of the file in bytes</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment">  @param block contents of the first page in the tablespace file</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment">  @retval DB_SUCCESS or error code. */</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="audit__api__message__emit_8cc.html#a9ab62ce08f07c43d34e2d46dcc0f5f68">init</a>(<a class="code" href="os0file_8h.html#a56e6594160a317a93fa099a4ba9ba59d">os_offset_t</a> <a class="code" href="mysql__config__editor_8cc.html#a14ba597917108e3c1937893de7c4ac0c">file_size</a>, <span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block)</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) UNIV_NOTHROW = 0;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">  /** Called for every page in the tablespace. If the page was not</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">  updated then its state must be set to BUF_PAGE_NOT_USED. For</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">  compressed tables the page descriptor memory will be at offset:</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">  block-&gt;frame + UNIV_PAGE_SIZE;</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment">  @param offset physical offset within the file</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment">  @param block block read from file, note it is not from the buffer pool</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment">  @retval DB_SUCCESS or error code. */</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> operator()(<a class="code" href="os0file_8h.html#a56e6594160a317a93fa099a4ba9ba59d">os_offset_t</a> offset, <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block)</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) UNIV_NOTHROW = 0;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">  /** Set the name of the physical file and the file handle that is used</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="comment">  to open it for the file that is being iterated over.</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment">  @param filename then physical name of the tablespace file.</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment">  @param file OS file handle */</span></div><div class="line"><a name="l01716"></a><span class="lineno"><a class="line" href="structPageCallback.html#a7d89d92e242fb93303eca43108b7245c"> 1716</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structPageCallback.html#a7d89d92e242fb93303eca43108b7245c">set_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="pfs__example__component__population_8cc.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>, <a class="code" href="structpfs__os__file__t.html">pfs_os_file_t</a> <a class="code" href="namespacefile.html">file</a>) UNIV_NOTHROW {</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    m_file = <a class="code" href="namespacefile.html">file</a>;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    m_filepath = <a class="code" href="pfs__example__component__population_8cc.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  }</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment">  /** @return the space id of the tablespace */</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> get_space_id() <span class="keyword">const</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) UNIV_NOTHROW = 0;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment">  @retval the space flags of the tablespace being iterated over */</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="keyword">virtual</span> ulint get_space_flags() <span class="keyword">const</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;      MY_ATTRIBUTE((warn_unused_result)) UNIV_NOTHROW = 0;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment">  /** Set the tablespace table size.</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">  @param[in] page a page belonging to the tablespace */</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="keywordtype">void</span> set_page_size(<span class="keyword">const</span> <a class="code" href="buf0types_8h.html#a03c346e355d639f165c311ad5946b3e2">buf_frame_t</a> *page) UNIV_NOTHROW;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment">  /** The compressed page size</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment">  @return the compressed page size */</span></div><div class="line"><a name="l01736"></a><span class="lineno"><a class="line" href="structPageCallback.html#a91abe49addf720cb6ec4674533225080"> 1736</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;<a class="code" href="structPageCallback.html#a91abe49addf720cb6ec4674533225080">get_page_size</a>() const MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordflow">return</span> (m_page_size);</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  }</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">  /** The tablespace page size. */</span></div><div class="line"><a name="l01741"></a><span class="lineno"><a class="line" href="structPageCallback.html#a6e6df08c1996c45eda9c18baf6936146"> 1741</a></span>&#160;  <a class="code" href="classpage__size__t.html">page_size_t</a> <a class="code" href="structPageCallback.html#a6e6df08c1996c45eda9c18baf6936146">m_page_size</a>;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<span class="comment">  /** File handle to the tablespace */</span></div><div class="line"><a name="l01744"></a><span class="lineno"><a class="line" href="structPageCallback.html#a33afabca051a48ad7d987c8ac54b3cee"> 1744</a></span>&#160;  <a class="code" href="structpfs__os__file__t.html">pfs_os_file_t</a> <a class="code" href="structPageCallback.html#a33afabca051a48ad7d987c8ac54b3cee">m_file</a>;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;<span class="comment">  /** Physical file path. */</span></div><div class="line"><a name="l01747"></a><span class="lineno"><a class="line" href="structPageCallback.html#aa21563b7fb4374f5d91d1086a6b4d165"> 1747</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structPageCallback.html#aa21563b7fb4374f5d91d1086a6b4d165">m_filepath</a>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="comment">// Disable copying</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <a class="code" href="structPageCallback.html">PageCallback</a>(<a class="code" href="structPageCallback.html">PageCallback</a> &amp;&amp;) = <span class="keyword">delete</span>;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <a class="code" href="structPageCallback.html">PageCallback</a>(<span class="keyword">const</span> <a class="code" href="structPageCallback.html">PageCallback</a> &amp;) = <span class="keyword">delete</span>;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <a class="code" href="structPageCallback.html">PageCallback</a> &amp;operator=(<span class="keyword">const</span> <a class="code" href="structPageCallback.html">PageCallback</a> &amp;) = <span class="keyword">delete</span>;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;};</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="comment">/** Iterate over all the pages in the tablespace.</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;<span class="comment">@param[in]  table the table definiton in the server</span></div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment">@param[in]  n_io_buffers number of blocks to read and write together</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">@param[in]  compression_type compression type if compression is enabled,</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment">else Compression::Type::NONE</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="comment">@param[in,out]  callback functor that will do the page updates</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a79a1203a65e27f57206bc6cc7db450ad">fil_tablespace_iterate</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, ulint n_io_buffers,</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                               <a class="code" href="structCompression.html#a01483c6913b58d659bb3db427e23d901">Compression::Type</a> compression_type,</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                               <a class="code" href="structPageCallback.html">PageCallback</a> &amp;callback)</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="comment">/** Looks for a pre-existing fil_space_t with the given tablespace ID</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment">and, if found, returns the name and filepath in newly allocated buffers</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">that the caller must free.</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment">@param[in]      space_id        The tablespace ID to search for.</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment">@param[out]     name            Name of the tablespace found.</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment">@param[out]     filepath        The filepath of the first datafile for the</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;<span class="comment">tablespace.</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="comment">@return true if tablespace is found, false if not. */</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a52186ff9b540cdf300358388d96f734b">fil_space_read_name_and_filepath</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <span class="keywordtype">char</span> **name,</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                                      <span class="keywordtype">char</span> **<a class="code" href="myisamlog_8cc.html#ae9175a148fe52c327ca1a8970b3d9994">filepath</a>)</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">/** Convert a file name to a tablespace name. Strip the file name</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment">prefix and suffix, leaving only databasename/tablename.</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="comment">@param[in]      filename        directory/databasename/tablename.ibd</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">@return database/tablename string, to be freed with ut_free() */</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="fil0fil_8h.html#aee1dea897f6c36988afdfdbc65ea9977">fil_path_to_space_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="pfs__example__component__population_8cc.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>)</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment">/** Returns the space ID based on the tablespace name.</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="comment">The tablespace must be found in the tablespace memory cache.</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="comment">This call is made from external to this module, so the mutex is not owned.</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;<span class="comment">@param[in]      name            Tablespace name</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment">@return space ID if tablespace found, SPACE_UNKNOWN if space not. */</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> <a class="code" href="fil0fil_8h.html#ac2ee1f9813d4976064d9e56248bfab81">fil_space_get_id_by_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment">/** Check if swapping two .ibd files can be done without failure</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="comment">@param[in]      old_table       old table</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment">@param[in]      new_table       new table</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="comment">@param[in]      tmp_name        temporary table name</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment">@return innodb error code */</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#ad769fd254fa0ab1b8e181e39a9f89202">fil_rename_precheck</a>(<span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *old_table,</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                            <span class="keyword">const</span> <a class="code" href="structdict__table__t.html">dict_table_t</a> *new_table, <span class="keyword">const</span> <span class="keywordtype">char</span> *tmp_name)</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">/** Set the compression type for the tablespace</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">@param[in]      space_id        Space ID of the tablespace</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment">@param[in]      algorithm       Text representation of the algorithm</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a19213581445ab184d972671b031d977f">fil_set_compression</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *algorithm)</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment">/** Get the compression algorithm for a tablespace.</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment">@param[in]      space_id        Space ID to check</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment">@return the compression algorithm */</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<a class="code" href="structCompression.html#a01483c6913b58d659bb3db427e23d901">Compression::Type</a> <a class="code" href="fil0fil_8h.html#ac0b30459524d7eb7975867608a50b3af">fil_get_compression</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">/** Set encryption information for IORequest.</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">@param[in,out]  req_type        IO request</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="comment">@param[in]      page_id         page id</span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">@param[in]      space           table space */</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a18965f299d6ba424c02acc513e50c06a">fil_io_set_encryption</a>(<a class="code" href="classIORequest.html">IORequest</a> &amp;req_type, <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                           <a class="code" href="structfil__space__t.html">fil_space_t</a> *space);</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment">/** Set the encryption type for the tablespace</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;<span class="comment">@param[in] space_id             Space ID of tablespace for which to set</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">@param[in] algorithm            Encryption algorithm</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;<span class="comment">@param[in] key                  Encryption key</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;<span class="comment">@param[in] iv                   Encryption iv</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a5471aa722c5cca4260425b61a3e67f19">fil_set_encryption</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="code" href="classEncryption.html#a1c2502b499e9986bdea1663b14ae96a4">Encryption::Type</a> algorithm,</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                           <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="suite__stubs_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>, <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *iv)</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment">/** Reset the encryption type for the tablespace</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment">@param[in] space_id             Space ID of tablespace for which to set</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment">@return DB_SUCCESS or error code */</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a5da42569fa2400ff8a012f60e8a6b8bc">fil_reset_encryption</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">/** Rotate the tablespace keys by new master key.</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">@return the number of tablespaces that failed to rotate. */</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a78baa1f0817890233fc56bc4bac392e2">fil_encryption_rotate</a>() MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="comment">/** During crash recovery, open a tablespace if it had not been opened</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="comment">yet, to get valid size and flags.</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment">@param[in,out]  space           Tablespace instance */</span></div><div class="line"><a name="l01846"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#a467e261c91443ac395e7e73818250864"> 1846</a></span>&#160;inline <span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a467e261c91443ac395e7e73818250864">fil_space_open_if_needed</a>(<a class="code" href="structfil__space__t.html">fil_space_t</a> *space) {</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordflow">if</span> (space-&gt;size == 0) {</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="comment">/* Initially, size and flags will be set to 0,</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">    until the files are opened for the first time.</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">    fil_space_get_size() will open the file</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment">    and adjust the size and flags. */</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size = <a class="code" href="fil0fil_8h.html#abe7b87d702aa585acb95430bf3583a66">fil_space_get_size</a>(space-&gt;id);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <a class="code" href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a>(size == space-&gt;size);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;}</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="preprocessor">#if !defined(NO_FALLOCATE) &amp;&amp; defined(UNIV_LINUX)</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment">Try and enable FusionIO atomic writes.</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="comment">@param[in] file         OS file handle</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="comment">@return true if successful */</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;<span class="keywordtype">bool</span> fil_fusionio_enable_atomic_write(<a class="code" href="structpfs__os__file__t.html">pfs_os_file_t</a> <a class="code" href="namespacefile.html">file</a>)</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !NO_FALLOCATE &amp;&amp; UNIV_LINUX */</span><span class="preprocessor"></span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment">/** Note that the file system where the file resides doesn&#39;t support PUNCH HOLE.</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="comment">Called from AIO handlers when IO returns DB_IO_NO_PUNCH_HOLE</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="comment">@param[in,out]  file            file to set */</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a7ba2afbf2f08e437ea77a9df12aafd76">fil_no_punch_hole</a>(<a class="code" href="structfil__node__t.html">fil_node_t</a> *file);</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="preprocessor">#ifdef UNIV_ENABLE_UNIT_TEST_MAKE_FILEPATH</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="keywordtype">void</span> test_make_filepath();</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_ENABLE_UNIT_TEST_MAKE_FILEPATH */</span><span class="preprocessor"></span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">/** @return the system tablespace instance */</span></div><div class="line"><a name="l01877"></a><span class="lineno"><a class="line" href="fil0fil_8h.html#aa2e71362c135a27e839180bc84f3e271"> 1877</a></span>&#160;<span class="preprocessor">#define fil_space_get_sys_space() (fil_space_t::s_sys_space)</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment">/** Redo a tablespace create.</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment">@param[in]      ptr             redo log record</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment">@param[in]      end             end of the redo log buffer</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment">@param[in]      page_id         Tablespace Id and first page in file</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">@param[in]      parsed_bytes    Number of bytes parsed so far</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment">@param[in]      parse_only      Don&#39;t apply, parse only</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment">@return pointer to next redo log record</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment">@retval nullptr if this log record was truncated */</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="fil0fil_8h.html#a0be569c91a4c7ddf551cfc7c1d4a0508">fil_tablespace_redo_create</a>(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>,</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id, ulint parsed_bytes,</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                                 <span class="keywordtype">bool</span> parse_only)</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">/** Redo a tablespace delete.</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment">@param[in]      ptr             redo log record</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment">@param[in]      end             end of the redo log buffer</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">@param[in]      page_id         Tablespace Id and first page in file</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment">@param[in]      parsed_bytes    Number of bytes parsed so far</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="comment">@param[in]      parse_only      Don&#39;t apply, parse only</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment">@return pointer to next redo log record</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment">@retval nullptr if this log record was truncated */</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="fil0fil_8h.html#ae1b5c7acbf556edf0e9fac6aa05f8403">fil_tablespace_redo_delete</a>(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>,</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id, ulint parsed_bytes,</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                                 <span class="keywordtype">bool</span> parse_only)</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<span class="comment">/** Redo a tablespace rename.</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="comment">This function doesn&#39;t do anything, simply parses the redo log record.</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="comment">@param[in]      ptr             redo log record</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<span class="comment">@param[in]      end             end of the redo log buffer</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="comment">@param[in]      page_id         Tablespace Id and first page in file</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<span class="comment">@param[in]      parsed_bytes    Number of bytes parsed so far</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment">@param[in]      parse_only      Don&#39;t apply, parse only</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment">@return pointer to next redo log record</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="comment">@retval nullptr if this log record was truncated */</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="fil0fil_8h.html#a3b245830907eeb1d0d644df6c5caf114">fil_tablespace_redo_rename</a>(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>,</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id, ulint parsed_bytes,</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                                 <span class="keywordtype">bool</span> parse_only)</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment">/** Redo a tablespace extend</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="comment">@param[in]      ptr             redo log record</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment">@param[in]      end             end of the redo log buffer</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="comment">@param[in]      page_id         Tablespace Id and first page in file</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment">@param[in]      parsed_bytes    Number of bytes parsed so far</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="comment">@param[in]      parse_only      Don&#39;t apply the log if true</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment">@return pointer to next redo log record</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment">@retval nullptr if this log record was truncated */</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="fil0fil_8h.html#a28e0bafa01bbae68a929ab1795e45e89">fil_tablespace_redo_extend</a>(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>,</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id, ulint parsed_bytes,</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                                 <span class="keywordtype">bool</span> parse_only)</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="comment">/** Parse and process an encryption redo record.</span></div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment">@param[in]      ptr             redo log record</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">@param[in]      end             end of the redo log buffer</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment">@param[in]      space_id        the tablespace ID</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment">@return log record end, nullptr if not a complete record */</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="fil0fil_8h.html#aa756b73bd6a05712a077acfd32f5f068">fil_tablespace_redo_encryption</a>(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>,</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                                     <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;<span class="comment">/** Read the tablespace id to path mapping from the file</span></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="comment">@param[in]      recovery        true if called from crash recovery */</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a71f228d5c3c149365bc0bc6788baedee">fil_tablespace_open_init_for_recovery</a>(<span class="keywordtype">bool</span> recovery);</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">/** Lookup the tablespace ID.</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment">@param[in]      space_id                Tablespace ID to lookup</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">@return true if the space ID is known. */</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a98e07ef792f5e2f3d9b56a9ca128015b">fil_tablespace_lookup_for_recovery</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment">/** Compare and update space name and dd path for partitioned table. Uniformly</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment">converts partition separators and names to lower case.</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment">@param[in]      space_id        tablespace ID</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment">@param[in]      fsp_flags       tablespace flags</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="comment">@param[in]      update_space    update space name</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="comment">@param[in,out]  space_name      tablespace name</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">@param[in,out]  dd_path         file name with complete path</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">@return true, if names are updated. */</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a40997b33c3c195a72bd8a8dd1e533625">fil_update_partition_name</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, uint32_t fsp_flags,</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                               <span class="keywordtype">bool</span> update_space, std::string &amp;space_name,</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                               std::string &amp;dd_path);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="comment">/** Add tablespace to the set of tablespaces to be updated in DD.</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment">@param[in]      dd_object_id    Server DD tablespace ID</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="comment">@param[in]      space_id        Innodb tablespace ID</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="comment">@param[in]      space_name      New tablespace name</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="comment">@param[in]      old_path        Old Path in the data dictionary</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="comment">@param[in]      new_path        New path to be update in dictionary */</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#ab4b7a6ac55b053acee243a0fe046bf31">fil_add_moved_space</a>(<a class="code" href="namespacedd.html#a0b4cee5d24960e48c74e25ae29222757">dd::Object_id</a> dd_object_id, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id,</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span> *space_name, <span class="keyword">const</span> std::string &amp;old_path,</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                         <span class="keyword">const</span> std::string &amp;new_path);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment">/** Lookup the tablespace ID and return the path to the file. The filename</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment">is ignored when testing for equality. Only the path up to the file name is</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment">considered for matching: e.g. ./test/a.ibd == ./test/b.ibd.</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment">@param[in]  dd_object_id  server DD tablespace ID</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="comment">@param[in]  space_id      tablespace ID to lookup</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="comment">@param[in]  space_name    tablespace name</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment">@param[in]  fsp_flags     tablespace flags</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment">@param[in]  old_path      the path found in dd:Tablespace_files</span></div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="comment">@param[out] new_path      the scanned path for this space_id</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;<span class="comment">@return status of the match. */</span></div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<a class="code" href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8ab">Fil_state</a> <a class="code" href="fil0fil_8h.html#ab533bb0009841e0274fffb6e68663544">fil_tablespace_path_equals</a>(<a class="code" href="namespacedd.html#a0b4cee5d24960e48c74e25ae29222757">dd::Object_id</a> dd_object_id,</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                                     <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id,</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                                     <span class="keyword">const</span> <span class="keywordtype">char</span> *space_name, ulint fsp_flags,</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                                     std::string old_path,</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                                     std::string *new_path)</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="comment">/** This function should be called after recovery has completed.</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;<span class="comment">Check for tablespace files for which we did not see any MLOG_FILE_DELETE</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="comment">or MLOG_FILE_RENAME record. These could not be recovered</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="comment">@return true if there were some filenames missing for which we had to</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="comment">ignore redo log records during the apply phase */</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a0caea17496d1257f7110bcc45eae017c">fil_check_missing_tablespaces</a>() MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="comment">/** Normalize and save a directory to scan for datafiles.</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="comment">@param[in]  directory    directory to scan for ibd and ibu files</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment">@param[in]  is_undo_dir  true for an undo directory */</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#afacb769e2a96c661b6a8ee5da5bc5ec0">fil_set_scan_dir</a>(const <a class="code" href="namespacestd.html">std</a>::<span class="keywordtype">string</span> &amp;directory, <span class="keywordtype">bool</span> is_undo_dir = <a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment">/** Normalize and save a list of directories to scan for datafiles.</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">@param[in]  directories  Directories to scan for ibd and ibu files</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;<span class="comment">                         in the form:  &quot;dir1;dir2; ... dirN&quot; */</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a7aa5fba3f3a77975264902cfce8472ad">fil_set_scan_dirs</a>(const <a class="code" href="namespacestd.html">std</a>::<span class="keywordtype">string</span> &amp;directories);</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<span class="comment">/** Discover tablespaces by reading the header from .ibd files.</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment">@return DB_SUCCESS if all goes well */</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a7ddeecaf58ff08907c96d1c5220823b8">fil_scan_for_tablespaces</a>();</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="comment">/** Open the tabelspace and also get the tablespace filenames, space_id must</span></div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="comment">already be known.</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">@param[in]      space_id        Tablespace ID to lookup</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment">@return true if open was successful */</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#ad2952feccaa0c237580133339c0b5833">fil_tablespace_open_for_recovery</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment">/** Replay a file rename operation for ddl replay.</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="comment">@param[in]      page_id         Space ID and first page number in the file</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="comment">@param[in]      old_name        old file name</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="comment">@param[in]      new_name        new file name</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="comment">@return whether the operation was successfully applied</span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;<span class="comment">(the name did not exist, or new_name did not exist and</span></div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment">name was successfully renamed to new_name)  */</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#acd44318c203e192667d357ebb3f06a84">fil_op_replay_rename_for_ddl</a>(const <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                                  const <span class="keywordtype">char</span> *old_name, const <span class="keywordtype">char</span> *new_name);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;<span class="comment">/** Free the Tablespace_files instance.</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;<span class="comment">@param[in]      read_only_mode  true if InnoDB is started in read only mode.</span></div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;<span class="comment">@return DB_SUCCESS if all OK */</span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#aed587e56779b167934cae78d35a50b23">fil_open_for_business</a>(<span class="keywordtype">bool</span> read_only_mode)</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment">/** Check if a path is known to InnoDB meaning that it is in or under</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment">one of the four path settings scanned at startup for file discovery.</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="comment">@param[in]  path    Path to check</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="comment">@return true if path is known to InnoDB */</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a12b5a37c6f9ebdc5a28b600588c14e75">fil_path_is_known</a>(const <a class="code" href="namespacestd.html">std</a>::<span class="keywordtype">string</span> &amp;path)</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="comment">/** Get the list of directories that datafiles can reside in.</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment">@return the list of directories &#39;dir1;dir2;....;dirN&#39; */</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<a class="code" href="namespacestd.html">std</a>::<span class="keywordtype">string</span> <a class="code" href="fil0fil_8h.html#af7c3b7a186ed08fffb210acd50210fe3">fil_get_dirs</a>() MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">/** Rename a tablespace.  Use the space_id to find the shard.</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">@param[in]      space_id        tablespace ID</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment">@param[in]      old_name        old tablespace name</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment">@param[in]      new_name        new tablespace name</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">@return DB_SUCCESS on success */</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="fil0fil_8h.html#a54e73aa6628b09914ab4a46b0135eae3">fil_rename_tablespace_by_id</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, const <span class="keywordtype">char</span> *old_name,</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                                    const <span class="keywordtype">char</span> *new_name)</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="comment">/** Free the data structures required for recovery. */</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a40a1d5e0125b674829ea128c5705668a">fil_free_scanned_files</a>();</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;<span class="comment">/** Update the tablespace name. In case, the new name</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="comment">and old name are same, no update done.</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="comment">@param[in,out]  space           tablespace object on which name</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="comment">                                will be updated</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="comment">@param[in]      name            new name for tablespace */</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#a56d7ea82cf7a6ebc476a9f268886659b">fil_space_update_name</a>(<a class="code" href="structfil__space__t.html">fil_space_t</a> *space, const <span class="keywordtype">char</span> *name);</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment">/** Adjust file name for import for partition files in different letter case.</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment">@param[in]      table   Innodb dict table</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="comment">@param[in]      path    file path to open</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="comment">@param[in]      extn    file extension */</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#aeae560365a83ac0f7684b91a9eebc52b">fil_adjust_name_import</a>(<a class="code" href="structdict__table__t.html">dict_table_t</a> *table, const <span class="keywordtype">char</span> *path,</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                            <a class="code" href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">ib_file_suffix</a> extn);</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="comment">/** Set the low water mark for the buffer pool. This will remove all</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment">dirty pages lower than this LSN in the BP.</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment">@param[in] lwm  Low water mark */</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fil0fil_8h.html#aef8d77d8b8a420977a6d2978780c0817">fil_checkpoint</a>(<a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> lwm);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment">/** Count how many truncated undo space IDs are still tracked in</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment">the buffer pool and the file_system cache.</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment">@param[in]  undo_num  undo tablespace number.</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">@return number of undo tablespaces that are still in memory. */</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="fil0fil_8h.html#a7cd47cd0c379edbdeda4f04ad2d51a66">fil_count_deleted</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo_num);</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment">/** Check if a particular undo space_id for a page in the buffer pool has</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="comment">been deleted recently.  Its space_id will be found in m_deleted until</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="comment">Fil:shard::checkpoint removes all its pages from the buffer pool and the</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="comment">fil_space_t from Fil_system.</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="comment">@return true if this space_id is in the list of recently deleted undo spaces. */</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="fil0fil_8h.html#a8d78d7b6eb2d227e87dfe9793c8e4ba0">fil_is_deleted</a>(<a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* fil0fil_h */</span><span class="preprocessor"></span></div><div class="ttc" id="structPageCallback_html_a7a7e5048664114dd32155c6b68628983"><div class="ttname"><a href="structPageCallback.html#a7a7e5048664114dd32155c6b68628983">PageCallback::PageCallback</a></div><div class="ttdeci">PageCallback()</div><div class="ttdoc">Default constructor. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1691</div></div>
<div class="ttc" id="structPageCallback_html_aa21563b7fb4374f5d91d1086a6b4d165"><div class="ttname"><a href="structPageCallback.html#aa21563b7fb4374f5d91d1086a6b4d165">PageCallback::m_filepath</a></div><div class="ttdeci">const char * m_filepath</div><div class="ttdoc">Physical file path. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1747</div></div>
<div class="ttc" id="structfil__space__t_html_ab2c7ce5109e347e4e241425c1d55afc2"><div class="ttname"><a href="structfil__space__t.html#ab2c7ce5109e347e4e241425c1d55afc2">fil_space_t::free_limit</a></div><div class="ttdeci">page_no_t free_limit</div><div class="ttdoc">Contents of FSP_FREE_LIMIT. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:265</div></div>
<div class="ttc" id="fil0fil_8h_html_a7061150bba02af80efc57616e0cf4ff1"><div class="ttname"><a href="fil0fil_8h.html#a7061150bba02af80efc57616e0cf4ff1">FIL_PAGE_TYPE_LAST</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_LAST</div><div class="ttdoc">Used by i_s.cc to index into the text description. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1093</div></div>
<div class="ttc" id="fil0fil_8h_html_a156ce94a40e1c03eafdc50ae6835ddbe"><div class="ttname"><a href="fil0fil_8h.html#a156ce94a40e1c03eafdc50ae6835ddbe">PAGE_NO_MAX</a></div><div class="ttdeci">constexpr page_no_t PAGE_NO_MAX</div><div class="ttdoc">Maximum Page Number, one less than FIL_NULL. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:931</div></div>
<div class="ttc" id="structfil__addr__t_html_acce6e3b37eabe358fa61ca850405b507"><div class="ttname"><a href="structfil__addr__t.html#acce6e3b37eabe358fa61ca850405b507">fil_addr_t::page</a></div><div class="ttdeci">page_no_t page</div><div class="ttdoc">Page number within a space. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:974</div></div>
<div class="ttc" id="fil0fil_8h_html_ac2ee1f9813d4976064d9e56248bfab81"><div class="ttname"><a href="fil0fil_8h.html#ac2ee1f9813d4976064d9e56248bfab81">fil_space_get_id_by_name</a></div><div class="ttdeci">space_id_t fil_space_get_id_by_name(const char *name)</div><div class="ttdoc">Returns the space ID based on the tablespace name. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:6442</div></div>
<div class="ttc" id="fil0fil_8h_html_a123d7bced59879577f97fd5e3893da8a"><div class="ttname"><a href="fil0fil_8h.html#a123d7bced59879577f97fd5e3893da8a">FIL_PAGE_TYPE_LOB_INDEX</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_LOB_INDEX</div><div class="ttdoc">Index pages of uncompressed LOB. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1068</div></div>
<div class="ttc" id="fil0fil_8h_html_a84217718f085ad4d05ae43ab64906206"><div class="ttname"><a href="fil0fil_8h.html#a84217718f085ad4d05ae43ab64906206">fil_close</a></div><div class="ttdeci">void fil_close()</div><div class="ttdoc">Initializes the tablespace memory cache. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8531</div></div>
<div class="ttc" id="fil0fil_8h_html_a583fe8ebbb512ab76b88f8a9d7f4b02e"><div class="ttname"><a href="fil0fil_8h.html#a583fe8ebbb512ab76b88f8a9d7f4b02e">FIL_SPACE_MAGIC_N</a></div><div class="ttdeci">constexpr size_t FIL_SPACE_MAGIC_N</div><div class="ttdoc">Value of fil_space_t::magic_n. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:351</div></div>
<div class="ttc" id="buf0types_8h_html_a64b07ecd8aec364fe56a54bcd279b3b3"><div class="ttname"><a href="buf0types_8h.html#a64b07ecd8aec364fe56a54bcd279b3b3">buf_remove_t</a></div><div class="ttdeci">buf_remove_t</div><div class="ttdoc">Algorithm to remove the pages for a tablespace from the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0types.h:76</div></div>
<div class="ttc" id="fil0fil_8h_html_a639ac3ff903694600d0e20031f0ae6d7"><div class="ttname"><a href="fil0fil_8h.html#a639ac3ff903694600d0e20031f0ae6d7">fil_get_scan_threads</a></div><div class="ttdeci">size_t fil_get_scan_threads(size_t num_files)</div><div class="ttdoc">Calculate the number of threads that can be spawned to scan the given number of files taking into the...</div><div class="ttdef"><b>Definition:</b> fil0fil.cc:129</div></div>
<div class="ttc" id="structfil__node__t_html"><div class="ttname"><a href="structfil__node__t.html">fil_node_t</a></div><div class="ttdoc">File node of a tablespace or the log data space. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:145</div></div>
<div class="ttc" id="fil0fil_8h_html_aa116115d65501d15a9e10472da769735"><div class="ttname"><a href="fil0fil_8h.html#aa116115d65501d15a9e10472da769735">FIL_PAGE_TYPE_ZBLOB2</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_ZBLOB2</div><div class="ttdoc">Subsequent compressed BLOB page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1037</div></div>
<div class="ttc" id="fil0fil_8h_html_a898a83bd2c3b03830f612b8cfa6d12f3"><div class="ttname"><a href="fil0fil_8h.html#a898a83bd2c3b03830f612b8cfa6d12f3">fil_space_reserve_free_extents</a></div><div class="ttdeci">bool fil_space_reserve_free_extents(space_id_t space_id, ulint n_free_now, ulint n_to_reserve)</div><div class="ttdoc">Tries to reserve free extents in a file space. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:7377</div></div>
<div class="ttc" id="fil0fil_8h_html_a1b25803d14d08483d9080d2c24263db1"><div class="ttname"><a href="fil0fil_8h.html#a1b25803d14d08483d9080d2c24263db1">MySQL_undo_path</a></div><div class="ttdeci">Fil_path MySQL_undo_path</div><div class="ttdoc">The MySQL server innodb-undo-directory value. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:280</div></div>
<div class="ttc" id="fil0fil_8h_html_a6c60fe65fadc68cfeb60b9c3ab103c23"><div class="ttname"><a href="fil0fil_8h.html#a6c60fe65fadc68cfeb60b9c3ab103c23">Space_ids</a></div><div class="ttdeci">std::vector&lt; space_id_t, ut_allocator&lt; space_id_t &gt; &gt; Space_ids</div><div class="ttdef"><b>Definition:</b> fil0fil.h:99</div></div>
<div class="ttc" id="structfil__space__t_html_a2d2a3ee346817ef29455fabbb6ef630f"><div class="ttname"><a href="structfil__space__t.html#a2d2a3ee346817ef29455fabbb6ef630f">fil_space_t::id</a></div><div class="ttdeci">space_id_t id</div><div class="ttdoc">Tablespace ID. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:227</div></div>
<div class="ttc" id="fil0fil_8h_html_af2667bd8f4524493714d53ce9c2cd941"><div class="ttname"><a href="fil0fil_8h.html#af2667bd8f4524493714d53ce9c2cd941">fil_delete_tablespace</a></div><div class="ttdeci">dberr_t fil_delete_tablespace(space_id_t space_id, buf_remove_t buf_remove)</div><div class="ttdoc">Deletes an IBD or IBU tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4588</div></div>
<div class="ttc" id="fil0fil_8h_html_a6999af95accb9cdef5f4ac2e41e3f8aba6f2d0bce8e047d9f2eadd436b29c3f6d"><div class="ttname"><a href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8aba6f2d0bce8e047d9f2eadd436b29c3f6d">Fil_state::MOVED</a></div><div class="ttdoc">Space ID matches but the paths don&amp;#39;t match. </div></div>
<div class="ttc" id="fil0fil_8h_html_a6f4bc1557d5667d022cb4e874e54c695"><div class="ttname"><a href="fil0fil_8h.html#a6f4bc1557d5667d022cb4e874e54c695">FIL_PAGE_TYPE_ZLOB_FRAG</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_ZLOB_FRAG</div><div class="ttdoc">Fragment pages of compressed LOB. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1087</div></div>
<div class="ttc" id="fil0fil_8h_html_a6999af95accb9cdef5f4ac2e41e3f8aba05015086bdd8402218f6aad6528bef08"><div class="ttname"><a href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8aba05015086bdd8402218f6aad6528bef08">Fil_state::MATCHES</a></div><div class="ttdoc">The path matches what was found during the scan. </div></div>
<div class="ttc" id="api0api_8h_html_a3a920291a017c14a72331c818adf2265"><div class="ttname"><a href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a></div><div class="ttdeci">uint32 page_no_t</div><div class="ttdoc">Page number. </div><div class="ttdef"><b>Definition:</b> api0api.h:57</div></div>
<div class="ttc" id="structrw__lock__t_html"><div class="ttname"><a href="structrw__lock__t.html">rw_lock_t</a></div><div class="ttdoc">The structure used in the spin lock implementation of a read-write lock. </div><div class="ttdef"><b>Definition:</b> sync0rw.h:564</div></div>
<div class="ttc" id="fil0fil_8h_html_a9e10bc654d78974b1d4b1e8ba140c919"><div class="ttname"><a href="fil0fil_8h.html#a9e10bc654d78974b1d4b1e8ba140c919">FIL_SCAN_MAX_THREADS</a></div><div class="ttdeci">constexpr size_t FIL_SCAN_MAX_THREADS</div><div class="ttdoc">Maximum number of threads that will be used for scanning the tablespace files. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:64</div></div>
<div class="ttc" id="classFil__path_html_a44646ba52123441521cc5f6f22264ac9"><div class="ttname"><a href="classFil__path.html#a44646ba52123441521cc5f6f22264ac9">Fil_path::is_ancestor</a></div><div class="ttdeci">static bool is_ancestor(const std::string &amp;first, const std::string &amp;second)</div><div class="ttdoc">Check if the first path is an ancestor of the second. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:523</div></div>
<div class="ttc" id="log0types_8h_html_aa7401e3081ffb8ee7e8fb182647f475c"><div class="ttname"><a href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a></div><div class="ttdeci">uint64_t lsn_t</div><div class="ttdoc">Type used for all log sequence number storage and arithmetics. </div><div class="ttdef"><b>Definition:</b> log0types.h:60</div></div>
<div class="ttc" id="classFil__path_html_a6d3e5004c601d97b80981c258d0f09ec"><div class="ttname"><a href="classFil__path.html#a6d3e5004c601d97b80981c258d0f09ec">Fil_path::is_relative_path</a></div><div class="ttdeci">static bool is_relative_path(const std::string &amp;path)</div><div class="ttdoc">Determine if a path is a relative path or not. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:593</div></div>
<div class="ttc" id="fil0fil_8h_html_ae4202885f0e295482e94ef66a76cd00cac412396f311807aefbb9fa08979dcd95"><div class="ttname"><a href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cac412396f311807aefbb9fa08979dcd95">CFP</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:361</div></div>
<div class="ttc" id="fil0fil_8h_html_aad1680d7f61f0977351181c361ce1d97"><div class="ttname"><a href="fil0fil_8h.html#aad1680d7f61f0977351181c361ce1d97">FIL_PAGE_SDI_ZBLOB</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_SDI_ZBLOB</div><div class="ttdoc">Commpressed SDI BLOB page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1059</div></div>
<div class="ttc" id="fil0fil_8h_html_a78baa1f0817890233fc56bc4bac392e2"><div class="ttname"><a href="fil0fil_8h.html#a78baa1f0817890233fc56bc4bac392e2">fil_encryption_rotate</a></div><div class="ttdeci">size_t fil_encryption_rotate()</div><div class="ttdoc">Rotate the tablespace keys by new master key. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9390</div></div>
<div class="ttc" id="fil0fil_8h_html_a1dff64b055265ef6bfb1117a0e52f3df"><div class="ttname"><a href="fil0fil_8h.html#a1dff64b055265ef6bfb1117a0e52f3df">fil_space_exists_in_mem</a></div><div class="ttdeci">bool fil_space_exists_in_mem(space_id_t space_id, const char *name, bool print_err, bool adjust_space, mem_heap_t *heap, table_id_t table_id)</div><div class="ttdoc">Returns true if a matching tablespace exists in the InnoDB tablespace memory cache. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:6427</div></div>
<div class="ttc" id="structfil__node__t_html_aff0c368bb3d23876d6ddcf95ca993acb"><div class="ttname"><a href="structfil__node__t.html#aff0c368bb3d23876d6ddcf95ca993acb">fil_node_t::is_raw_disk</a></div><div class="ttdeci">bool is_raw_disk</div><div class="ttdoc">whether the file actually is a raw device or disk partition </div><div class="ttdef"><b>Definition:</b> fil0fil.h:166</div></div>
<div class="ttc" id="classFil__path_html_a91b6ec3a03def3dc881bfe9cd0abfa3e"><div class="ttname"><a href="classFil__path.html#a91b6ec3a03def3dc881bfe9cd0abfa3e">Fil_path::len</a></div><div class="ttdeci">size_t len() const</div><div class="ttdef"><b>Definition:</b> fil0fil.h:443</div></div>
<div class="ttc" id="fil0fil_8h_html_a9af3c7308412f543e7c732f4d744d599"><div class="ttname"><a href="fil0fil_8h.html#a9af3c7308412f543e7c732f4d744d599">fil_rename_tablespace</a></div><div class="ttdeci">dberr_t fil_rename_tablespace(space_id_t space_id, const char *old_path, const char *new_name, const char *new_path_in)</div><div class="ttdoc">Rename a single-table tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5313</div></div>
<div class="ttc" id="structfil__space__t_html_ae39d97cb039e33439dca7e630bc48707"><div class="ttname"><a href="structfil__space__t.html#ae39d97cb039e33439dca7e630bc48707">fil_space_t::is_in_unflushed_spaces</a></div><div class="ttdeci">bool is_in_unflushed_spaces</div><div class="ttdoc">true if this space is currently in unflushed_spaces </div><div class="ttdef"><b>Definition:</b> fil0fil.h:296</div></div>
<div class="ttc" id="fil0fil_8h_html_ae57ef1933a8adfa619ea4a67bd3aff6e"><div class="ttname"><a href="fil0fil_8h.html#ae57ef1933a8adfa619ea4a67bd3aff6e">fil_ibd_create</a></div><div class="ttdeci">dberr_t fil_ibd_create(space_id_t space_id, const char *name, const char *path, uint32_t flags, page_no_t size)</div><div class="ttdoc">Create an IBD tablespace file. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5663</div></div>
<div class="ttc" id="m__ctype_8h_html_a7711738e5ae46f8381a25a4662d868a2"><div class="ttname"><a href="m__ctype_8h.html#a7711738e5ae46f8381a25a4662d868a2">my_charset_filename</a></div><div class="ttdeci">MYSQL_PLUGIN_IMPORT CHARSET_INFO my_charset_filename</div><div class="ttdef"><b>Definition:</b> ctype-utf8.cc:7040</div></div>
<div class="ttc" id="structfil__node__t_html_a5bfbfdc5e360799d8be418d213fde98e"><div class="ttname"><a href="structfil__node__t.html#a5bfbfdc5e360799d8be418d213fde98e">fil_node_t::n_pending_flushes</a></div><div class="ttdeci">size_t n_pending_flushes</div><div class="ttdoc">count of pending flushes; is_open must be true if nonzero </div><div class="ttdef"><b>Definition:</b> fil0fil.h:188</div></div>
<div class="ttc" id="classFil__path_html_ae81765fa07fc6b87d8105c53a400aee9"><div class="ttname"><a href="classFil__path.html#ae81765fa07fc6b87d8105c53a400aee9">Fil_path::operator()</a></div><div class="ttdeci">const char * operator()() const</div><div class="ttdoc">Explicit type conversion. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:435</div></div>
<div class="ttc" id="classFil__path_html_af010111b0bec54a4d7a8bc2809dc69a3"><div class="ttname"><a href="classFil__path.html#af010111b0bec54a4d7a8bc2809dc69a3">Fil_path::has_prefix</a></div><div class="ttdeci">static bool has_prefix(const std::string &amp;path, const std::string prefix)</div><div class="ttdef"><b>Definition:</b> fil0fil.h:650</div></div>
<div class="ttc" id="fil0fil_8h_html_a165fafc51a410abbcbdaeb2dcde0e241"><div class="ttname"><a href="fil0fil_8h.html#a165fafc51a410abbcbdaeb2dcde0e241">fil_close_tablespace</a></div><div class="ttdeci">dberr_t fil_close_tablespace(trx_t *trx, space_id_t space_id)</div><div class="ttdoc">Closes a single-table tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4274</div></div>
<div class="ttc" id="fil0fil_8h_html_afccb4618754b1f3d87174600051962d2"><div class="ttname"><a href="fil0fil_8h.html#afccb4618754b1f3d87174600051962d2">FIL_PAGE_IBUF_BITMAP</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_IBUF_BITMAP</div><div class="ttdoc">Insert buffer bitmap. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1016</div></div>
<div class="ttc" id="fil0fil_8h_html_a476b33f40dd3e61d08fe5281c8e195b2"><div class="ttname"><a href="fil0fil_8h.html#a476b33f40dd3e61d08fe5281c8e195b2">FIL_IBD_FILE_INITIAL_SIZE</a></div><div class="ttdeci">constexpr size_t FIL_IBD_FILE_INITIAL_SIZE</div><div class="ttdoc">Initial size of a single-table tablespace in pages. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:919</div></div>
<div class="ttc" id="fil0fil_8h_html_a7d969050b079fabd799826d685620854"><div class="ttname"><a href="fil0fil_8h.html#a7d969050b079fabd799826d685620854">fil_space_get_page_size</a></div><div class="ttdeci">const page_size_t fil_space_get_page_size(space_id_t space_id, bool *found)</div><div class="ttdoc">Returns the page size of the space and whether it is compressed or not. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3630</div></div>
<div class="ttc" id="fil0fil_8h_html_a80d90b87f907097d8e996d56e9b39826"><div class="ttname"><a href="fil0fil_8h.html#a80d90b87f907097d8e996d56e9b39826">fil_truncate_tablespace</a></div><div class="ttdeci">bool fil_truncate_tablespace(space_id_t space_id, page_no_t size_in_pages)</div><div class="ttdoc">Truncate the tablespace to needed size. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4664</div></div>
<div class="ttc" id="structfil__space__t_html_aa0126fd910461de7fd5f6a6bfe9fb0e8"><div class="ttname"><a href="structfil__space__t.html#aa0126fd910461de7fd5f6a6bfe9fb0e8">fil_space_t::s_sys_space</a></div><div class="ttdeci">static fil_space_t * s_sys_space</div><div class="ttdoc">System tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:331</div></div>
<div class="ttc" id="fil0fil_8h_html_a41be152bff4a84f8182a05213b35134a"><div class="ttname"><a href="fil0fil_8h.html#a41be152bff4a84f8182a05213b35134a">FIL_PAGE_INDEX</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_INDEX</div><div class="ttdoc">File page types (values of FIL_PAGE_TYPE) </div><div class="ttdef"><b>Definition:</b> fil0fil.h:994</div></div>
<div class="ttc" id="structfil__node__t_html_a3b58e9e43f798b2bf912fc04575ee773"><div class="ttname"><a href="structfil__node__t.html#a3b58e9e43f798b2bf912fc04575ee773">fil_node_t::atomic_write</a></div><div class="ttdeci">bool atomic_write</div><div class="ttdoc">whether atomic write is enabled for this file </div><div class="ttdef"><b>Definition:</b> fil0fil.h:209</div></div>
<div class="ttc" id="fil0fil_8h_html_a3565d2e4f820ad3ca5d10050ee349700"><div class="ttname"><a href="fil0fil_8h.html#a3565d2e4f820ad3ca5d10050ee349700">FIL_IBD_FILE_INITIAL_SIZE_5_7</a></div><div class="ttdeci">constexpr size_t FIL_IBD_FILE_INITIAL_SIZE_5_7</div><div class="ttdoc">An empty tablespace (CREATE TABLESPACE) has minimum of 4 pages and an empty CREATE TABLE (file_per_ta...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:925</div></div>
<div class="ttc" id="classEncryption_html_aca983e7bc2fce23999ac82ebe097652c"><div class="ttname"><a href="classEncryption.html#aca983e7bc2fce23999ac82ebe097652c">Encryption::KEY_LEN</a></div><div class="ttdeci">static constexpr size_t KEY_LEN</div><div class="ttdoc">Encryption key length. </div><div class="ttdef"><b>Definition:</b> os0enc.h:83</div></div>
<div class="ttc" id="fil0fil_8h_html_ad1c8f59a6056674daf9dad7460c3d712"><div class="ttname"><a href="fil0fil_8h.html#ad1c8f59a6056674daf9dad7460c3d712">fil_page_reset_type</a></div><div class="ttdeci">void fil_page_reset_type(const page_id_t &amp;page_id, byte *page, ulint type, mtr_t *mtr)</div><div class="ttdoc">Reset the page type. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8523</div></div>
<div class="ttc" id="fil0fil_8h_html_a9607ac7853dde13d0456fb05747bc25a"><div class="ttname"><a href="fil0fil_8h.html#a9607ac7853dde13d0456fb05747bc25a">FIL_PAGE_COMPRESSED</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_COMPRESSED</div><div class="ttdoc">Compressed page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1044</div></div>
<div class="ttc" id="fil0fil_8h_html_a183b38e6500914b529fe0103930090c5"><div class="ttname"><a href="fil0fil_8h.html#a183b38e6500914b529fe0103930090c5">fil_space_get_flags</a></div><div class="ttdeci">uint32_t fil_space_get_flags(space_id_t space_id)</div><div class="ttdoc">Returns the flags of the space. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3563</div></div>
<div class="ttc" id="structtrx__t_html"><div class="ttname"><a href="structtrx__t.html">trx_t</a></div><div class="ttdef"><b>Definition:</b> trx0trx.h:833</div></div>
<div class="ttc" id="fil0fil_8h_html_ae4202885f0e295482e94ef66a76cd00c"><div class="ttname"><a href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00c">ib_file_suffix</a></div><div class="ttdeci">ib_file_suffix</div><div class="ttdoc">Common InnoDB file extentions. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:357</div></div>
<div class="ttc" id="classFil__path_html_a546333b4b758741b1ad08ca13c5ffaea"><div class="ttname"><a href="classFil__path.html#a546333b4b758741b1ad08ca13c5ffaea">Fil_path::make_ibd</a></div><div class="ttdeci">static char * make_ibd(const std::string &amp;path_in, const std::string &amp;name_in)</div><div class="ttdoc">Allocate and build a file name from a path, a table or tablespace name and a suffix. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:821</div></div>
<div class="ttc" id="fil0fil_8h_html_a9facec35f36a17d5a5ef51746d81bd86"><div class="ttname"><a href="fil0fil_8h.html#a9facec35f36a17d5a5ef51746d81bd86">fil_space_release_free_extents</a></div><div class="ttdeci">void fil_space_release_free_extents(space_id_t space_id, ulint n_reserved)</div><div class="ttdoc">Releases free extents in a file space. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:7403</div></div>
<div class="ttc" id="classFil__path_html_a03773a2616e0f226342b8d47e45d32e6"><div class="ttname"><a href="classFil__path.html#a03773a2616e0f226342b8d47e45d32e6">Fil_path::abs_len</a></div><div class="ttdeci">size_t abs_len() const</div><div class="ttdef"><b>Definition:</b> fil0fil.h:461</div></div>
<div class="ttc" id="structbuf__block__t_html"><div class="ttname"><a href="structbuf__block__t.html">buf_block_t</a></div><div class="ttdoc">The buffer control block structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1324</div></div>
<div class="ttc" id="classpage__id__t_html"><div class="ttname"><a href="classpage__id__t.html">page_id_t</a></div><div class="ttdoc">Page identifier. </div><div class="ttdef"><b>Definition:</b> buf0types.h:158</div></div>
<div class="ttc" id="structPageCallback_html_a33afabca051a48ad7d987c8ac54b3cee"><div class="ttname"><a href="structPageCallback.html#a33afabca051a48ad7d987c8ac54b3cee">PageCallback::m_file</a></div><div class="ttdeci">pfs_os_file_t m_file</div><div class="ttdoc">File handle to the tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1744</div></div>
<div class="ttc" id="fil0fil_8h_html_a92029552027a3d65eab6fc99bf6afa2b"><div class="ttname"><a href="fil0fil_8h.html#a92029552027a3d65eab6fc99bf6afa2b">FIL_PAGE_TYPE_ZLOB_DATA</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_ZLOB_DATA</div><div class="ttdoc">Data pages of compressed LOB. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1080</div></div>
<div class="ttc" id="classFil__path_html_a5a0787465141c982867ec17a1f873b00"><div class="ttname"><a href="classFil__path.html#a5a0787465141c982867ec17a1f873b00">Fil_path::m_path</a></div><div class="ttdeci">std::string m_path</div><div class="ttdoc">Path to a file or directory. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:903</div></div>
<div class="ttc" id="fil0fil_8h_html_aca9bf7607c848041530d5e841c14a7d8"><div class="ttname"><a href="fil0fil_8h.html#aca9bf7607c848041530d5e841c14a7d8">fil_aio_wait</a></div><div class="ttdeci">void fil_aio_wait(ulint segment)</div><div class="ttdoc">Waits for an AIO operation to complete. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8070</div></div>
<div class="ttc" id="fil0fil_8h_html_a6999af95accb9cdef5f4ac2e41e3f8ab"><div class="ttname"><a href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8ab">Fil_state</a></div><div class="ttdeci">Fil_state</div><div class="ttdoc">Result of comparing a path. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:114</div></div>
<div class="ttc" id="fil0fil_8h_html_a18965f299d6ba424c02acc513e50c06a"><div class="ttname"><a href="fil0fil_8h.html#a18965f299d6ba424c02acc513e50c06a">fil_io_set_encryption</a></div><div class="ttdeci">void fil_io_set_encryption(IORequest &amp;req_type, const page_id_t &amp;page_id, fil_space_t *space)</div><div class="ttdoc">Set encryption information for IORequest. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:7587</div></div>
<div class="ttc" id="fil0fil_8h_html_a6bf9aebbbf0ff3873993dce5b68ffd3b"><div class="ttname"><a href="fil0fil_8h.html#a6bf9aebbbf0ff3873993dce5b68ffd3b">fil_close_log_files</a></div><div class="ttdeci">void fil_close_log_files(bool free_all)</div><div class="ttdoc">Closes the redo log files. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3822</div></div>
<div class="ttc" id="fil0fil_8h_html_a35b2e421c61a5b0f0f5b6ba0f572d054"><div class="ttname"><a href="fil0fil_8h.html#a35b2e421c61a5b0f0f5b6ba0f572d054">fil_space_extend</a></div><div class="ttdeci">bool fil_space_extend(fil_space_t *space, page_no_t size)</div><div class="ttdoc">Try to extend a tablespace if it is smaller than the specified size. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:6808</div></div>
<div class="ttc" id="fil0fil_8h_html_af46bc1eba7b282012a9d3c58bdd155e4"><div class="ttname"><a href="fil0fil_8h.html#af46bc1eba7b282012a9d3c58bdd155e4">fil_flush</a></div><div class="ttdeci">void fil_flush(space_id_t space_id)</div><div class="ttdoc">Flushes to disk possible writes cached by the OS. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8410</div></div>
<div class="ttc" id="fil0fil_8h_html_ae4202885f0e295482e94ef66a76cd00cacf37978f6a1d495b4d7b69b7362408cd"><div class="ttname"><a href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cacf37978f6a1d495b4d7b69b7362408cd">IBU</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:363</div></div>
<div class="ttc" id="fil0fil_8h_html_acc72e44736e7f41797f8accd98d5905e"><div class="ttname"><a href="fil0fil_8h.html#acc72e44736e7f41797f8accd98d5905e">fil_flush_file_spaces</a></div><div class="ttdeci">void fil_flush_file_spaces(uint8_t purpose)</div><div class="ttdoc">Flush to disk the writes in file spaces of the given type possibly cached by the OS. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8479</div></div>
<div class="ttc" id="fil0fil_8h_html_a71f228d5c3c149365bc0bc6788baedee"><div class="ttname"><a href="fil0fil_8h.html#a71f228d5c3c149365bc0bc6788baedee">fil_tablespace_open_init_for_recovery</a></div><div class="ttdeci">void fil_tablespace_open_init_for_recovery(bool recovery)</div><div class="ttdoc">Read the tablespace id to path mapping from the file. </div></div>
<div class="ttc" id="structfil__addr__t_html_abab77b02b5fd9d7eaa64cb140b199aff"><div class="ttname"><a href="structfil__addr__t.html#abab77b02b5fd9d7eaa64cb140b199aff">fil_addr_t::fil_addr_t</a></div><div class="ttdeci">fil_addr_t(page_no_t p, uint32_t boff)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:952</div></div>
<div class="ttc" id="log0recv_8h_html"><div class="ttname"><a href="log0recv_8h.html">log0recv.h</a></div><div class="ttdoc">Recovery. </div></div>
<div class="ttc" id="fil0fil_8h_html_a042f765290ec32f0bb07bd739a6e3a2d"><div class="ttname"><a href="fil0fil_8h.html#a042f765290ec32f0bb07bd739a6e3a2d">general_space_name</a></div><div class="ttdeci">static constexpr char general_space_name[]</div><div class="ttdoc">This tablespace name is used internally during file discovery to open a general tablespace before the...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:78</div></div>
<div class="ttc" id="fil0fil_8h_html_ad2952feccaa0c237580133339c0b5833"><div class="ttname"><a href="fil0fil_8h.html#ad2952feccaa0c237580133339c0b5833">fil_tablespace_open_for_recovery</a></div><div class="ttdeci">bool fil_tablespace_open_for_recovery(space_id_t space_id)</div><div class="ttdoc">Open the tabelspace and also get the tablespace filenames, space_id must already be known...</div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10098</div></div>
<div class="ttc" id="structfil__space__t_html"><div class="ttname"><a href="structfil__space__t.html">fil_space_t</a></div><div class="ttdoc">Tablespace or log data space. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:219</div></div>
<div class="ttc" id="classFil__path_html_adb3f0cc2c799e6ade139bb5a0611e3a1"><div class="ttname"><a href="classFil__path.html#adb3f0cc2c799e6ade139bb5a0611e3a1">Fil_path::type_of_path</a></div><div class="ttdeci">static path_type type_of_path(const std::string &amp;path)</div><div class="ttdoc">Determine what type of path is provided. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:616</div></div>
<div class="ttc" id="fil0fil_8h_html_a1ecc661e47bafeed4a86efbc0b32fa94"><div class="ttname"><a href="fil0fil_8h.html#a1ecc661e47bafeed4a86efbc0b32fa94">fil_space_get_n_reserved_extents</a></div><div class="ttdeci">ulint fil_space_get_n_reserved_extents(space_id_t space_id)</div><div class="ttdoc">Gets the number of reserved extents. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:7422</div></div>
<div class="ttc" id="structfil__node__t_html_a243f6624484c727fc57dc125bce3c33a"><div class="ttname"><a href="structfil__node__t.html#a243f6624484c727fc57dc125bce3c33a">fil_node_t::space</a></div><div class="ttdeci">fil_space_t * space</div><div class="ttdoc">tablespace containing this file </div><div class="ttdef"><b>Definition:</b> fil0fil.h:149</div></div>
<div class="ttc" id="classFil__path_html_ac1d4f7bf25e932b5d11622ed81c9a24d"><div class="ttname"><a href="classFil__path.html#ac1d4f7bf25e932b5d11622ed81c9a24d">Fil_path::normalize</a></div><div class="ttdeci">static void normalize(char *path)</div><div class="ttdoc">Normalize a directory path for the current OS: On Windows, we convert &amp;#39;/&amp;#39; to &amp;#39;\&amp;#39;, else we convert &amp;#39;\&amp;#39;...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:670</div></div>
<div class="ttc" id="fil0fil_8h_html_a141f6ad82c682a18639a8448616c70d7"><div class="ttname"><a href="fil0fil_8h.html#a141f6ad82c682a18639a8448616c70d7">fil_validate</a></div><div class="ttdeci">bool fil_validate()</div><div class="ttdoc">Checks the consistency of the tablespace cache. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:1983</div></div>
<div class="ttc" id="fil0fil_8h_html_a44fadec70e24114015918420d21d216c"><div class="ttname"><a href="fil0fil_8h.html#a44fadec70e24114015918420d21d216c">fil_type_is_data</a></div><div class="ttdeci">bool fil_type_is_data(fil_type_t type)</div><div class="ttdoc">Check if fil_type is any of FIL_TYPE_TEMPORARY, FIL_TYPE_IMPORT or FIL_TYPE_TABLESPACE. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:137</div></div>
<div class="ttc" id="fil0fil_8h_html_ad8f39cad77dc1018f45edb31c9328570"><div class="ttname"><a href="fil0fil_8h.html#ad8f39cad77dc1018f45edb31c9328570">FIL_PAGE_TYPE_BLOB</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_BLOB</div><div class="ttdoc">Uncompressed BLOB page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1031</div></div>
<div class="ttc" id="fil0fil_8h_html_a04c3db21caa081f0938ad16d17743497"><div class="ttname"><a href="fil0fil_8h.html#a04c3db21caa081f0938ad16d17743497">fil_system_get_file_by_space_num</a></div><div class="ttdeci">bool fil_system_get_file_by_space_num(space_id_t space_num, space_id_t &amp;space_id, std::string &amp;name)</div><div class="ttdoc">Fetch the file name opened for an undo space number from the file map. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4412</div></div>
<div class="ttc" id="fil0fil_8h_html_af791150ac0f0430e5edd59faaf5c3bde"><div class="ttname"><a href="fil0fil_8h.html#af791150ac0f0430e5edd59faaf5c3bde">FIL_PAGE_TYPE_FSP_HDR</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_FSP_HDR</div><div class="ttdoc">File space header. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1025</div></div>
<div class="ttc" id="structdict__table__t_html"><div class="ttname"><a href="structdict__table__t.html">dict_table_t</a></div><div class="ttdoc">Data structure for a database table. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:1532</div></div>
<div class="ttc" id="namespacedict__name_html"><div class="ttname"><a href="namespacedict__name.html">dict_name</a></div><div class="ttdoc">Innodb data dictionary name. </div><div class="ttdef"><b>Definition:</b> dict0dd.cc:6203</div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> varlen_sort.h:182</div></div>
<div class="ttc" id="fil0fil_8h_html_aa2a338b6496f9c4299874191d0490e1c"><div class="ttname"><a href="fil0fil_8h.html#aa2a338b6496f9c4299874191d0490e1c">FIL_PAGE_TYPE_ZLOB_FIRST</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_ZLOB_FIRST</div><div class="ttdoc">The first page of a compressed LOB. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1077</div></div>
<div class="ttc" id="fil0fil_8h_html_a4559d8a2c8ab1735e57456b173bc3ada"><div class="ttname"><a href="fil0fil_8h.html#a4559d8a2c8ab1735e57456b173bc3ada">fil_space_dec_redo_skipped_count</a></div><div class="ttdeci">void fil_space_dec_redo_skipped_count(space_id_t space_id)</div><div class="ttdoc">Decrease redo skipped count for a tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4689</div></div>
<div class="ttc" id="fil0fil_8h_html_a465b8535e824662061bad9dfb290a409"><div class="ttname"><a href="fil0fil_8h.html#a465b8535e824662061bad9dfb290a409">FIL_PAGE_RTREE</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_RTREE</div><div class="ttdoc">R-tree node. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:997</div></div>
<div class="ttc" id="structfil__space__t_html_a959fc361ed9df1aaacb7bb9ad766d34e"><div class="ttname"><a href="structfil__space__t.html#a959fc361ed9df1aaacb7bb9ad766d34e">fil_space_t::magic_n</a></div><div class="ttdeci">ulint magic_n</div><div class="ttdoc">FIL_SPACE_MAGIC_N. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:321</div></div>
<div class="ttc" id="structfil__space__t_html_a4980ba5c59a25180ce5209df87b52275"><div class="ttname"><a href="structfil__space__t.html#a4980ba5c59a25180ce5209df87b52275">fil_space_t::size_in_header</a></div><div class="ttdeci">page_no_t size_in_header</div><div class="ttdoc">FSP_SIZE in the tablespace header; 0 if not known yet. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:259</div></div>
<div class="ttc" id="fil0fil_8h_html_a79a1203a65e27f57206bc6cc7db450ad"><div class="ttname"><a href="fil0fil_8h.html#a79a1203a65e27f57206bc6cc7db450ad">fil_tablespace_iterate</a></div><div class="ttdeci">dberr_t fil_tablespace_iterate(dict_table_t *table, ulint n_io_buffers, Compression::Type compression_type, PageCallback &amp;callback)</div><div class="ttdoc">Iterate over all the pages in the tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8830</div></div>
<div class="ttc" id="classFil__path_html_a256179f84319ff1bb253a10b41acb0d0a36e8f861ad84288b67c1aa18c719189f"><div class="ttname"><a href="classFil__path.html#a256179f84319ff1bb253a10b41acb0d0a36e8f861ad84288b67c1aa18c719189f">Fil_path::relative</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:405</div></div>
<div class="ttc" id="structCompression_html_a01483c6913b58d659bb3db427e23d901"><div class="ttname"><a href="structCompression.html#a01483c6913b58d659bb3db427e23d901">Compression::Type</a></div><div class="ttdeci">Type</div><div class="ttdoc">Algorithm types supported. </div><div class="ttdef"><b>Definition:</b> file.h:52</div></div>
<div class="ttc" id="fil0fil_8h_html_a7cd47cd0c379edbdeda4f04ad2d51a66"><div class="ttname"><a href="fil0fil_8h.html#a7cd47cd0c379edbdeda4f04ad2d51a66">fil_count_deleted</a></div><div class="ttdeci">size_t fil_count_deleted(space_id_t undo_num)</div><div class="ttdoc">Count how many truncated undo space IDs are still tracked in the buffer pool and the file_system cach...</div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11875</div></div>
<div class="ttc" id="fil0fil_8h_html_a80b8d6c871cd6cbb3b8070d806afee19"><div class="ttname"><a href="fil0fil_8h.html#a80b8d6c871cd6cbb3b8070d806afee19">fil_space_release</a></div><div class="ttdeci">void fil_space_release(fil_space_t *space)</div><div class="ttdoc">Release a tablespace acquired with fil_space_acquire(). </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3985</div></div>
<div class="ttc" id="namespacegis_html_a34498b3a631cea076601d0d9fb07ac92"><div class="ttname"><a href="namespacegis.html#a34498b3a631cea076601d0d9fb07ac92">gis::is_valid</a></div><div class="ttdeci">bool is_valid(const dd::Spatial_reference_system *srs, const Geometry *g, const char *func_name, bool *is_valid) noexcept</div><div class="ttdoc">Decides if a geometry is valid. </div><div class="ttdef"><b>Definition:</b> is_valid.cc:94</div></div>
<div class="ttc" id="fil0fil_8h_html_acc0c193260209597c6246aab49e8bc57"><div class="ttname"><a href="fil0fil_8h.html#acc0c193260209597c6246aab49e8bc57">fil_space_acquire_silent</a></div><div class="ttdeci">fil_space_t * fil_space_acquire_silent(space_id_t space_id)</div><div class="ttdoc">Acquire a tablespace that may not exist. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3979</div></div>
<div class="ttc" id="structfil__space__t_html_a6a627e2e0029e5e021781b34efcd46c4"><div class="ttname"><a href="structfil__space__t.html#a6a627e2e0029e5e021781b34efcd46c4">fil_space_t::free_len</a></div><div class="ttdeci">uint32_t free_len</div><div class="ttdoc">Length of the FSP_FREE list. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:262</div></div>
<div class="ttc" id="fil0fil_8h_html_ae4202885f0e295482e94ef66a76cd00ca6ffb4649ce717106b47a4513fd239506"><div class="ttname"><a href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca6ffb4649ce717106b47a4513fd239506">IBT</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:362</div></div>
<div class="ttc" id="fil0fil_8h_html_a7245663b84659f1d90266ce6303678e4"><div class="ttname"><a href="fil0fil_8h.html#a7245663b84659f1d90266ce6303678e4">fil_addr_null</a></div><div class="ttdeci">fil_addr_t fil_addr_null</div><div class="ttdoc">The null file address. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:329</div></div>
<div class="ttc" id="structfil__node__t_html_ad7bb2a18b7a45cdf53efb714908773a7"><div class="ttname"><a href="structfil__node__t.html#ad7bb2a18b7a45cdf53efb714908773a7">fil_node_t::punch_hole</a></div><div class="ttdeci">bool punch_hole</div><div class="ttdoc">whether the file system of this file supports PUNCH HOLE </div><div class="ttdef"><b>Definition:</b> fil0fil.h:203</div></div>
<div class="ttc" id="namespacebuf_html"><div class="ttname"><a href="namespacebuf.html">buf</a></div><div class="ttdef"><b>Definition:</b> buf0block_hint.cc:29</div></div>
<div class="ttc" id="fil0fil_8h_html_a7fb8fc662a77304b613e26fb6327faec"><div class="ttname"><a href="fil0fil_8h.html#a7fb8fc662a77304b613e26fb6327faec">fil_faddr_t</a></div><div class="ttdeci">byte fil_faddr_t</div><div class="ttdoc">&amp;#39;type&amp;#39; definition in C: an address stored in a file page is a string of bytes </div><div class="ttdef"><b>Definition:</b> fil0fil.h:942</div></div>
<div class="ttc" id="fil0fil_8h_html_a8dc879c2f6e6d7ba3665b45809151f8d"><div class="ttname"><a href="fil0fil_8h.html#a8dc879c2f6e6d7ba3665b45809151f8d">fil_page_get_next</a></div><div class="ttdeci">page_no_t fil_page_get_next(const byte *page)</div><div class="ttdoc">Get the successor of a file page. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8504</div></div>
<div class="ttc" id="classFil__path_html_a71d0142483a56ab705234320ae427e97"><div class="ttname"><a href="classFil__path.html#a71d0142483a56ab705234320ae427e97">Fil_path::is_absolute_path</a></div><div class="ttdeci">static bool is_absolute_path(const std::string &amp;path)</div><div class="ttdoc">Determine if a path is an absolute path or not. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:607</div></div>
<div class="ttc" id="fil0fil_8h_html_ae4202885f0e295482e94ef66a76cd00cac9008e38bf966331c0505e775b43fe1b"><div class="ttname"><a href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cac9008e38bf966331c0505e775b43fe1b">CFG</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:360</div></div>
<div class="ttc" id="classFil__iterator_html_a6fb530c9ad8ad86eaba80d8d4aa044b5"><div class="ttname"><a href="classFil__iterator.html#a6fb530c9ad8ad86eaba80d8d4aa044b5">Fil_iterator::Function</a></div><div class="ttdeci">std::function&lt; dberr_t(fil_node_t *)&gt; Function</div><div class="ttdef"><b>Definition:</b> fil0fil.h:1264</div></div>
<div class="ttc" id="fil0fil_8h_html_aa40c1e190dea30f510081f98a98e48a4"><div class="ttname"><a href="fil0fil_8h.html#aa40c1e190dea30f510081f98a98e48a4">fil_replace_tablespace</a></div><div class="ttdeci">bool fil_replace_tablespace(space_id_t old_space_id, space_id_t new_space_id, page_no_t size_in_pages)</div><div class="ttdoc">Drop and create an UNDO tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5686</div></div>
<div class="ttc" id="fil0fil_8h_html_ac0b30459524d7eb7975867608a50b3af"><div class="ttname"><a href="fil0fil_8h.html#ac0b30459524d7eb7975867608a50b3af">fil_get_compression</a></div><div class="ttdeci">Compression::Type fil_get_compression(space_id_t space_id)</div><div class="ttdoc">Get the compression algorithm for a tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9198</div></div>
<div class="ttc" id="fil0fil_8h_html_a55e6fc55af12543b79ad9143366d7079"><div class="ttname"><a href="fil0fil_8h.html#a55e6fc55af12543b79ad9143366d7079">FIL_IBT_FILE_INITIAL_SIZE</a></div><div class="ttdeci">constexpr size_t FIL_IBT_FILE_INITIAL_SIZE</div><div class="ttdef"><b>Definition:</b> fil0fil.h:920</div></div>
<div class="ttc" id="fil0fil_8h_html_a98d3fc7dcab858ee6f9981dca51089a7"><div class="ttname"><a href="fil0fil_8h.html#a98d3fc7dcab858ee6f9981dca51089a7">FIL_PAGE_SDI</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_SDI</div><div class="ttdoc">Tablespace SDI Index page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1000</div></div>
<div class="ttc" id="classFil__path_html_ad08acbd2aa912a5f75643f35187ed78c"><div class="ttname"><a href="classFil__path.html#ad08acbd2aa912a5f75643f35187ed78c">Fil_path::make_cfp</a></div><div class="ttdeci">static char * make_cfp(const std::string &amp;path_in)</div><div class="ttdoc">Allocate and build a CFP file name from a path. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:809</div></div>
<div class="ttc" id="structfil__space__t_html_a6d9cf8b913bef17b9a5797b0e8696864"><div class="ttname"><a href="structfil__space__t.html#a6d9cf8b913bef17b9a5797b0e8696864">fil_space_t::is_deleted</a></div><div class="ttdeci">bool is_deleted()</div><div class="ttdoc">Determine if this space was deleted with BUF_REMOVE_NONE. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:328</div></div>
<div class="ttc" id="object__id_8h_html"><div class="ttname"><a href="object__id_8h.html">object_id.h</a></div></div>
<div class="ttc" id="structmem__block__info__t_html"><div class="ttname"><a href="structmem__block__info__t.html">mem_block_info_t</a></div><div class="ttdoc">The info structure stored at the beginning of a heap block. </div><div class="ttdef"><b>Definition:</b> mem0mem.h:349</div></div>
<div class="ttc" id="fil0fil_8h_html_a40997b33c3c195a72bd8a8dd1e533625"><div class="ttname"><a href="fil0fil_8h.html#a40997b33c3c195a72bd8a8dd1e533625">fil_update_partition_name</a></div><div class="ttdeci">bool fil_update_partition_name(space_id_t space_id, uint32_t fsp_flags, bool update_space, std::string &amp;space_name, std::string &amp;dd_path)</div><div class="ttdoc">Compare and update space name and dd path for partitioned table. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10225</div></div>
<div class="ttc" id="fil0fil_8h_html_aaa52f6d1eb1a1dac2c9fa31e67cc931e"><div class="ttname"><a href="fil0fil_8h.html#aaa52f6d1eb1a1dac2c9fa31e67cc931e">fil_set_max_space_id_if_bigger</a></div><div class="ttdeci">void fil_set_max_space_id_if_bigger(space_id_t max_id)</div><div class="ttdoc">Sets the max tablespace id counter if the given number is bigger than the previous value...</div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3889</div></div>
<div class="ttc" id="structfil__space__t_html_a9486dca533bf90936df4a2100a2ccdea"><div class="ttname"><a href="structfil__space__t.html#a9486dca533bf90936df4a2100a2ccdea">fil_space_t::Files</a></div><div class="ttdeci">std::vector&lt; fil_node_t, ut_allocator&lt; fil_node_t &gt; &gt; Files</div><div class="ttdef"><b>Definition:</b> fil0fil.h:221</div></div>
<div class="ttc" id="structfil__space__t_html_a440702a347c5514fc439e8d80301ff30"><div class="ttname"><a href="structfil__space__t.html#a440702a347c5514fc439e8d80301ff30">fil_space_t::flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdoc">Tablespace flags; see fsp_flags_is_valid() and page_size_t(ulint) (constructor). </div><div class="ttdef"><b>Definition:</b> fil0fil.h:270</div></div>
<div class="ttc" id="fil0fil_8h_html_ae4202885f0e295482e94ef66a76cd00cacee139505c65bec7e41da9cc658a06f8"><div class="ttname"><a href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00cacee139505c65bec7e41da9cc658a06f8">NO_EXT</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:358</div></div>
<div class="ttc" id="fil0fil_8h_html_aed587e56779b167934cae78d35a50b23"><div class="ttname"><a href="fil0fil_8h.html#aed587e56779b167934cae78d35a50b23">fil_open_for_business</a></div><div class="ttdeci">dberr_t fil_open_for_business(bool read_only_mode)</div><div class="ttdoc">Free the Tablespace_files instance. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9985</div></div>
<div class="ttc" id="fil0fil_8h_html_ae4202885f0e295482e94ef66a76cd00ca358c126da32e703fd814bade6dd2c863"><div class="ttname"><a href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca358c126da32e703fd814bade6dd2c863">DWR</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:364</div></div>
<div class="ttc" id="audit__api__message__emit_8cc_html_a9ab62ce08f07c43d34e2d46dcc0f5f68"><div class="ttname"><a href="audit__api__message__emit_8cc.html#a9ab62ce08f07c43d34e2d46dcc0f5f68">init</a></div><div class="ttdeci">static mysql_service_status_t init()</div><div class="ttdoc">Component initialization. </div><div class="ttdef"><b>Definition:</b> audit_api_message_emit.cc:570</div></div>
<div class="ttc" id="fil0fil_8h_html_ac4fbebdfd084a82357b6c496846a80cc"><div class="ttname"><a href="fil0fil_8h.html#ac4fbebdfd084a82357b6c496846a80cc">fil_assign_new_space_id</a></div><div class="ttdeci">bool fil_assign_new_space_id(space_id_t *space_id)</div><div class="ttdoc">Assigns a new space id for a new single-table tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3447</div></div>
<div class="ttc" id="fil0fil_8h_html_a3f9730bffd0bae95de65f2a89eed94f7"><div class="ttname"><a href="fil0fil_8h.html#a3f9730bffd0bae95de65f2a89eed94f7">FIL_PAGE_INODE</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_INODE</div><div class="ttdoc">Index node. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1006</div></div>
<div class="ttc" id="fil0fil_8h_html_aa72d3c3c30968e31fb99187cd7316fa5"><div class="ttname"><a href="fil0fil_8h.html#aa72d3c3c30968e31fb99187cd7316fa5">FIL_PAGE_TYPE_LEGACY_DBLWR</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_LEGACY_DBLWR</div><div class="ttdoc">Legacy doublewrite buffer page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1062</div></div>
<div class="ttc" id="classFil__path_html"><div class="ttname"><a href="classFil__path.html">Fil_path</a></div><div class="ttdoc">Wrapper for a path to a directory that may or may not exist. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:384</div></div>
<div class="ttc" id="fil0fil_8h_html_ab533bb0009841e0274fffb6e68663544"><div class="ttname"><a href="fil0fil_8h.html#ab533bb0009841e0274fffb6e68663544">fil_tablespace_path_equals</a></div><div class="ttdeci">Fil_state fil_tablespace_path_equals(dd::Object_id dd_object_id, space_id_t space_id, const char *space_name, ulint fsp_flags, std::string old_path, std::string *new_path)</div><div class="ttdoc">Lookup the tablespace ID and return the path to the file. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10102</div></div>
<div class="ttc" id="fil0fil_8h_html_a0931f11b2cac78f733c50dfbd7215ae2"><div class="ttname"><a href="fil0fil_8h.html#a0931f11b2cac78f733c50dfbd7215ae2">fil_flush_file_redo</a></div><div class="ttdeci">void fil_flush_file_redo()</div><div class="ttdoc">Flush to disk the writes in file spaces of the given type possibly cached by the OS. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8485</div></div>
<div class="ttc" id="classFil__path_html_ad57426d001dd9035b587b59bd270b230"><div class="ttname"><a href="classFil__path.html#ad57426d001dd9035b587b59bd270b230">Fil_path::truncate_suffix</a></div><div class="ttdeci">static bool truncate_suffix(ib_file_suffix sfx, std::string &amp;path)</div><div class="ttdoc">Check if the file has the the specified suffix and truncate. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:745</div></div>
<div class="ttc" id="ibuf0types_8h_html"><div class="ttname"><a href="ibuf0types_8h.html">ibuf0types.h</a></div><div class="ttdoc">Insert buffer global types. </div></div>
<div class="ttc" id="structPageCallback_html_ab384ed74aa8c49a91d4cf54f07f78809"><div class="ttname"><a href="structPageCallback.html#ab384ed74aa8c49a91d4cf54f07f78809">PageCallback::~PageCallback</a></div><div class="ttdeci">virtual ~PageCallback() 1</div><div class="ttdef"><b>Definition:</b> fil0fil.h:1693</div></div>
<div class="ttc" id="fil0fil_8h_html_a9391f2ee9b550430b09af777bd3a3b76"><div class="ttname"><a href="fil0fil_8h.html#a9391f2ee9b550430b09af777bd3a3b76">FIL_PAGE_TYPE_XDES</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_XDES</div><div class="ttdoc">Extent descriptor page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1028</div></div>
<div class="ttc" id="structfil__space__t_html_a367c51f39f1a4818525a0d276b2a3c77"><div class="ttname"><a href="structfil__space__t.html#a367c51f39f1a4818525a0d276b2a3c77">fil_space_t::unflushed_spaces</a></div><div class="ttdeci">List_node unflushed_spaces</div><div class="ttdoc">List of spaces with at least one unflushed file we have written to. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:293</div></div>
<div class="ttc" id="xcom__base_8cc_html_a0ce0765b958f7289d206f0c78bd105c7"><div class="ttname"><a href="xcom__base_8cc.html#a0ce0765b958f7289d206f0c78bd105c7">lsn</a></div><div class="ttdeci">static uint64_t lsn</div><div class="ttdef"><b>Definition:</b> xcom_base.cc:426</div></div>
<div class="ttc" id="fil0fil_8h_html_acd44318c203e192667d357ebb3f06a84"><div class="ttname"><a href="fil0fil_8h.html#acd44318c203e192667d357ebb3f06a84">fil_op_replay_rename_for_ddl</a></div><div class="ttdeci">bool fil_op_replay_rename_for_ddl(const page_id_t &amp;page_id, const char *old_name, const char *new_name)</div><div class="ttdoc">Replay a file rename operation for ddl replay. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9996</div></div>
<div class="ttc" id="myisamlog_8cc_html_ae9175a148fe52c327ca1a8970b3d9994"><div class="ttname"><a href="myisamlog_8cc.html#ae9175a148fe52c327ca1a8970b3d9994">filepath</a></div><div class="ttdeci">static const char * filepath</div><div class="ttdef"><b>Definition:</b> myisamlog.cc:93</div></div>
<div class="ttc" id="structfil__addr__t_html_a0038fe8edaeb417030ca416421d0e178"><div class="ttname"><a href="structfil__addr__t.html#a0038fe8edaeb417030ca416421d0e178">fil_addr_t::fil_addr_t</a></div><div class="ttdeci">fil_addr_t()</div><div class="ttdef"><b>Definition:</b> fil0fil.h:947</div></div>
<div class="ttc" id="structfil__space__t_html_a37c9bb64bb38b36ac38634c67120b9fb"><div class="ttname"><a href="structfil__space__t.html#a37c9bb64bb38b36ac38634c67120b9fb">fil_space_t::encryption_op_in_progress</a></div><div class="ttdeci">encryption_op_type encryption_op_in_progress</div><div class="ttdoc">Encryption is in progress. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:314</div></div>
<div class="ttc" id="fil0fil_8h_html_a216853b540379e2d5c5b804e2d5f8350"><div class="ttname"><a href="fil0fil_8h.html#a216853b540379e2d5c5b804e2d5f8350">fil_ibd_open</a></div><div class="ttdeci">dberr_t fil_ibd_open(bool validate, fil_type_t purpose, space_id_t space_id, uint32_t flags, const char *space_name, const char *table_name, const char *path_in, bool strict, bool old_space)</div><div class="ttdoc">Open a single-table tablespace and optionally check the space id is right in it. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5739</div></div>
<div class="ttc" id="fil0fil_8h_html_a56d7ea82cf7a6ebc476a9f268886659b"><div class="ttname"><a href="fil0fil_8h.html#a56d7ea82cf7a6ebc476a9f268886659b">fil_space_update_name</a></div><div class="ttdeci">void fil_space_update_name(fil_space_t *space, const char *name)</div><div class="ttdoc">Update the tablespace name. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11722</div></div>
<div class="ttc" id="fil0fil_8h_html_a26f18c4bcc2a3f065809cd26581eeaf3"><div class="ttname"><a href="fil0fil_8h.html#a26f18c4bcc2a3f065809cd26581eeaf3">FIL_PAGE_COMPRESSED_AND_ENCRYPTED</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_COMPRESSED_AND_ENCRYPTED</div><div class="ttdoc">Compressed and Encrypted page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1050</div></div>
<div class="ttc" id="classIORequest_html"><div class="ttname"><a href="classIORequest.html">IORequest</a></div><div class="ttdoc">The IO Context that is passed down to the low level IO code. </div><div class="ttdef"><b>Definition:</b> os0file.h:256</div></div>
<div class="ttc" id="fil0fil_8h_html_a6e33698f69836432f1cb98d6c3c93d3b"><div class="ttname"><a href="fil0fil_8h.html#a6e33698f69836432f1cb98d6c3c93d3b">fil_write_flushed_lsn</a></div><div class="ttdeci">dberr_t fil_write_flushed_lsn(lsn_t lsn)</div><div class="ttdoc">Write the flushed LSN to the page header of the first page in the system tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3901</div></div>
<div class="ttc" id="fil0fil_8h_html_adb6176c5f111db9997f1106eef6bb009"><div class="ttname"><a href="fil0fil_8h.html#adb6176c5f111db9997f1106eef6bb009">FIL_PAGE_TYPE_ZLOB_INDEX</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_ZLOB_INDEX</div><div class="ttdoc">Index pages of compressed LOB. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1084</div></div>
<div class="ttc" id="structfil__node__t_html_a83d46f981b4f21f19529cd8f85e9ab44"><div class="ttname"><a href="structfil__node__t.html#a83d46f981b4f21f19529cd8f85e9ab44">fil_node_t::flush_counter</a></div><div class="ttdeci">int64_t flush_counter</div><div class="ttdoc">the modification_counter of the latest flush to disk </div><div class="ttdef"><b>Definition:</b> fil0fil.h:197</div></div>
<div class="ttc" id="fil0fil_8h_html_ac0877a7a83f8c2e639172038a763a434"><div class="ttname"><a href="fil0fil_8h.html#ac0877a7a83f8c2e639172038a763a434">fil_ibt_create</a></div><div class="ttdeci">dberr_t fil_ibt_create(space_id_t space_id, const char *name, const char *path, uint32_t flags, page_no_t size)</div><div class="ttdoc">Create a session temporary tablespace (IBT) file. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5679</div></div>
<div class="ttc" id="fil0fil_8h_html_a0caea17496d1257f7110bcc45eae017c"><div class="ttname"><a href="fil0fil_8h.html#a0caea17496d1257f7110bcc45eae017c">fil_check_missing_tablespaces</a></div><div class="ttdeci">bool fil_check_missing_tablespaces()</div><div class="ttdoc">This function should be called after recovery has completed. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10337</div></div>
<div class="ttc" id="fil0fil_8h_html_a2d434d6cf2b0e2673e69d867d933433b"><div class="ttname"><a href="fil0fil_8h.html#a2d434d6cf2b0e2673e69d867d933433b">fil_space_get_latch</a></div><div class="ttdeci">rw_lock_t * fil_space_get_latch(space_id_t space_id)</div><div class="ttdoc">Returns the latch of a file space. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:2313</div></div>
<div class="ttc" id="structfil__node__t_html_a7308aba5a01ef62c772f00c96b8d718e"><div class="ttname"><a href="structfil__node__t.html#a7308aba5a01ef62c772f00c96b8d718e">fil_node_t::sync_event</a></div><div class="ttdeci">os_event_t sync_event</div><div class="ttdoc">event that groups and serializes calls to fsync </div><div class="ttdef"><b>Definition:</b> fil0fil.h:163</div></div>
<div class="ttc" id="fil0fil_8h_html_aef8d77d8b8a420977a6d2978780c0817"><div class="ttname"><a href="fil0fil_8h.html#aef8d77d8b8a420977a6d2978780c0817">fil_checkpoint</a></div><div class="ttdeci">void fil_checkpoint(lsn_t lwm)</div><div class="ttdoc">Set the low water mark for the buffer pool. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11873</div></div>
<div class="ttc" id="structfil__space__t_html_a983db4e9de443314440b685b6ac0c605"><div class="ttname"><a href="structfil__space__t.html#a983db4e9de443314440b685b6ac0c605">fil_space_t::n_reserved_extents</a></div><div class="ttdeci">uint32_t n_reserved_extents</div><div class="ttdoc">Number of reserved free extents for ongoing operations like B-tree page split. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:274</div></div>
<div class="ttc" id="fil0fil_8h_html_a6f217df105139955e14289976f102e10"><div class="ttname"><a href="fil0fil_8h.html#a6f217df105139955e14289976f102e10">fil_n_file_opened</a></div><div class="ttdeci">ulint fil_n_file_opened</div><div class="ttdoc">Number of files currently open. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:298</div></div>
<div class="ttc" id="classFil__path_html_a86b4fe805cd8230f0dd18f473a756c41"><div class="ttname"><a href="classFil__path.html#a86b4fe805cd8230f0dd18f473a756c41">Fil_path::is_separator</a></div><div class="ttdeci">static bool is_separator(char c)</div><div class="ttdoc">Check if a character is a path separator (&amp;#39;\&amp;#39; or &amp;#39;/&amp;#39;) </div><div class="ttdef"><b>Definition:</b> fil0fil.h:761</div></div>
<div class="ttc" id="fil0fil_8h_html_ae4202885f0e295482e94ef66a76cd00ca8f95e1ef03fd5c24f5260811b4e1896f"><div class="ttname"><a href="fil0fil_8h.html#ae4202885f0e295482e94ef66a76cd00ca8f95e1ef03fd5c24f5260811b4e1896f">IBD</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:359</div></div>
<div class="ttc" id="duk__module__shim_8c_html_ae87978b9adf0de34bb46e7261a1d4796"><div class="ttname"><a href="duk__module__shim_8c.html#ae87978b9adf0de34bb46e7261a1d4796">normalize_path</a></div><div class="ttdeci">static duk_ret_t normalize_path(duk_context *ctx, duk_idx_t obj_idx)</div><div class="ttdef"><b>Definition:</b> duk_module_shim.c:75</div></div>
<div class="ttc" id="fil0fil_8h_html_a7ddeecaf58ff08907c96d1c5220823b8"><div class="ttname"><a href="fil0fil_8h.html#a7ddeecaf58ff08907c96d1c5220823b8">fil_scan_for_tablespaces</a></div><div class="ttdeci">dberr_t fil_scan_for_tablespaces()</div><div class="ttdoc">Discover tablespaces by reading the header from .ibd files. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11700</div></div>
<div class="ttc" id="fil0fil_8h_html_ae35564e76ec51d859ebf71b79bf418a4"><div class="ttname"><a href="fil0fil_8h.html#ae35564e76ec51d859ebf71b79bf418a4">fil_space_create</a></div><div class="ttdeci">fil_space_t * fil_space_create(const char *name, space_id_t space_id, uint32_t flags, fil_type_t purpose)</div><div class="ttdoc">Create a space memory object and put it to the fil_system hash table. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3338</div></div>
<div class="ttc" id="structPageCallback_html_a91abe49addf720cb6ec4674533225080"><div class="ttname"><a href="structPageCallback.html#a91abe49addf720cb6ec4674533225080">PageCallback::get_page_size</a></div><div class="ttdeci">const page_size_t &amp; get_page_size() const</div><div class="ttdoc">The compressed page size. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1736</div></div>
<div class="ttc" id="ctype-mb_8cc_html_adf406aa6822ceac22d62ef63cc2879c0"><div class="ttname"><a href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a></div><div class="ttdeci">int page</div><div class="ttdef"><b>Definition:</b> ctype-mb.cc:1234</div></div>
<div class="ttc" id="fil0fil_8h_html_afae19bad00bf1b4de89ea84e456612f4"><div class="ttname"><a href="fil0fil_8h.html#afae19bad00bf1b4de89ea84e456612f4">fil_page_check_type</a></div><div class="ttdeci">void fil_page_check_type(const page_id_t &amp;page_id, byte *page, ulint type, mtr_t *mtr)</div><div class="ttdoc">Check (and if needed, reset) the page type. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1646</div></div>
<div class="ttc" id="fil0fil_8h_html_a0be569c91a4c7ddf551cfc7c1d4a0508"><div class="ttname"><a href="fil0fil_8h.html#a0be569c91a4c7ddf551cfc7c1d4a0508">fil_tablespace_redo_create</a></div><div class="ttdeci">byte * fil_tablespace_redo_create(byte *ptr, const byte *end, const page_id_t &amp;page_id, ulint parsed_bytes, bool parse_only)</div><div class="ttdoc">Redo a tablespace create. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10349</div></div>
<div class="ttc" id="fil0fil_8h_html_adc05d48fd63d3f8800288213198028b3"><div class="ttname"><a href="fil0fil_8h.html#adc05d48fd63d3f8800288213198028b3">fil_page_set_type</a></div><div class="ttdeci">void fil_page_set_type(byte *page, ulint type)</div><div class="ttdoc">Sets the file page type. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8511</div></div>
<div class="ttc" id="dict0types_8h_html"><div class="ttname"><a href="dict0types_8h.html">dict0types.h</a></div><div class="ttdoc">Data dictionary global types. </div></div>
<div class="ttc" id="structfil__node__t_html_a0deb3febd8f4bd31fef83d15858817d8"><div class="ttname"><a href="structfil__node__t.html#a0deb3febd8f4bd31fef83d15858817d8">fil_node_t::max_size</a></div><div class="ttdeci">page_no_t max_size</div><div class="ttdoc">maximum size of the file in database pages </div><div class="ttdef"><b>Definition:</b> fil0fil.h:182</div></div>
<div class="ttc" id="classFil__path_html_a0c276da724d4caf785f2ccafd249664b"><div class="ttname"><a href="classFil__path.html#a0c276da724d4caf785f2ccafd249664b">Fil_path::is_same_as</a></div><div class="ttdeci">static bool is_same_as(const std::string &amp;first, const std::string &amp;second)</div><div class="ttdoc">Check if two path strings are equal. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:487</div></div>
<div class="ttc" id="fil0fil_8h_html_a93968a4e96491426198f9eeb83e56726"><div class="ttname"><a href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a></div><div class="ttdeci">fil_type_t</div><div class="ttdoc">File types. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:102</div></div>
<div class="ttc" id="structfil__space__t_html_a82a55f22ffb961a1d193b4087da4d0f6"><div class="ttname"><a href="structfil__space__t.html#a82a55f22ffb961a1d193b4087da4d0f6">fil_space_t::m_deleted_lsn</a></div><div class="ttdeci">lsn_t m_deleted_lsn</div><div class="ttdoc">LSN when the instance was deleted. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:324</div></div>
<div class="ttc" id="fil0fil_8h_html_aee1dea897f6c36988afdfdbc65ea9977"><div class="ttname"><a href="fil0fil_8h.html#aee1dea897f6c36988afdfdbc65ea9977">fil_path_to_space_name</a></div><div class="ttdeci">char * fil_path_to_space_name(const char *filename)</div><div class="ttdoc">Convert a file name to a tablespace name. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5949</div></div>
<div class="ttc" id="fil0fil_8h_html_a3b245830907eeb1d0d644df6c5caf114"><div class="ttname"><a href="fil0fil_8h.html#a3b245830907eeb1d0d644df6c5caf114">fil_tablespace_redo_rename</a></div><div class="ttdeci">byte * fil_tablespace_redo_rename(byte *ptr, const byte *end, const page_id_t &amp;page_id, ulint parsed_bytes, bool parse_only)</div><div class="ttdoc">Redo a tablespace rename. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10460</div></div>
<div class="ttc" id="fil0fil_8h_html_a302ac5497eda800518a519a5f7c06882"><div class="ttname"><a href="fil0fil_8h.html#a302ac5497eda800518a519a5f7c06882">fil_space_set_flags</a></div><div class="ttdeci">void fil_space_set_flags(fil_space_t *space, uint32_t flags)</div><div class="ttdoc">Sets the flags of the tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9628</div></div>
<div class="ttc" id="fil0fil_8h_html_a8d78d7b6eb2d227e87dfe9793c8e4ba0"><div class="ttname"><a href="fil0fil_8h.html#a8d78d7b6eb2d227e87dfe9793c8e4ba0">fil_is_deleted</a></div><div class="ttdeci">bool fil_is_deleted(space_id_t space_id)</div><div class="ttdoc">Check if a particular undo space_id for a page in the buffer pool has been deleted recently...</div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11879</div></div>
<div class="ttc" id="fil0fil_8h_html_a6999af95accb9cdef5f4ac2e41e3f8aba10d1208b485425756fcc932229386b02"><div class="ttname"><a href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8aba10d1208b485425756fcc932229386b02">Fil_state::MISSING</a></div><div class="ttdoc">No MLOG_FILE_DELETE record and the file could not be found. </div></div>
<div class="ttc" id="fil0fil_8h_html_ae0ddd62274fd0944bd8a8d22db178f43"><div class="ttname"><a href="fil0fil_8h.html#ae0ddd62274fd0944bd8a8d22db178f43">fil_open_log_and_system_tablespace_files</a></div><div class="ttdeci">void fil_open_log_and_system_tablespace_files()</div><div class="ttdoc">Opens all log files and system tablespace data files. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3710</div></div>
<div class="ttc" id="fil0fil_8h_html_a6999af95accb9cdef5f4ac2e41e3f8abaa25e78d8d98c26f0fd73aa560f93c828"><div class="ttname"><a href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8abaa25e78d8d98c26f0fd73aa560f93c828">Fil_state::RENAMED</a></div><div class="ttdoc">Tablespace and/or filename was renamed. </div></div>
<div class="ttc" id="fil0fil_8h_html_ad0da419c03df4459e0d2170fff32bcfd"><div class="ttname"><a href="fil0fil_8h.html#ad0da419c03df4459e0d2170fff32bcfd">fil_space_is_redo_skipped</a></div><div class="ttdeci">bool fil_space_is_redo_skipped(space_id_t space_id)</div><div class="ttdoc">Check whether a single-table tablespace is redo skipped. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4707</div></div>
<div class="ttc" id="buf0types_8h_html_a03c346e355d639f165c311ad5946b3e2"><div class="ttname"><a href="buf0types_8h.html#a03c346e355d639f165c311ad5946b3e2">buf_frame_t</a></div><div class="ttdeci">byte buf_frame_t</div><div class="ttdoc">A buffer frame. </div><div class="ttdef"><b>Definition:</b> buf0types.h:59</div></div>
<div class="ttc" id="fil0fil_8h_html_ab64a7186e99eb6c62ba75701faa8296b"><div class="ttname"><a href="fil0fil_8h.html#ab64a7186e99eb6c62ba75701faa8296b">fil_page_get_type</a></div><div class="ttdeci">page_type_t fil_page_get_type(const byte *page)</div><div class="ttdoc">Get the file page type. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1634</div></div>
<div class="ttc" id="structfil__node__t_html_afa4365074c5db047186849c83ecb29ad"><div class="ttname"><a href="structfil__node__t.html#afa4365074c5db047186849c83ecb29ad">fil_node_t::LRU</a></div><div class="ttdeci">List_node LRU</div><div class="ttdoc">link to the fil_system-&gt;LRU list (keeping track of open files) </div><div class="ttdef"><b>Definition:</b> fil0fil.h:200</div></div>
<div class="ttc" id="structfil__addr__t_html_afb9a0e7a68effb721b22509f403e3ed8"><div class="ttname"><a href="structfil__addr__t.html#afb9a0e7a68effb721b22509f403e3ed8">fil_addr_t::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Check if the file address is null. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:963</div></div>
<div class="ttc" id="fil0fil_8h_html_a90582aba45e9663d7f3bc08ebec71461"><div class="ttname"><a href="fil0fil_8h.html#a90582aba45e9663d7f3bc08ebec71461">FIL_SCAN_THREADS_PER_CORE</a></div><div class="ttdeci">constexpr size_t FIL_SCAN_THREADS_PER_CORE</div><div class="ttdoc">Number of threads per core. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:67</div></div>
<div class="ttc" id="namespacerules__table__service_html_a71d6ca457fe4ae5d5151f92c06cc3fd3"><div class="ttname"><a href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">rules_table_service::end</a></div><div class="ttdeci">Cursor end()</div><div class="ttdoc">A past-the-end Cursor. </div><div class="ttdef"><b>Definition:</b> rules_table_service.cc:188</div></div>
<div class="ttc" id="structfil__addr__t_html_af82807188dcb0e17c0436006d2c309fb"><div class="ttname"><a href="structfil__addr__t.html#af82807188dcb0e17c0436006d2c309fb">fil_addr_t::is_equal</a></div><div class="ttdeci">bool is_equal(const fil_addr_t &amp;rhs) const</div><div class="ttdoc">Compare to instances. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:957</div></div>
<div class="ttc" id="fil0fil_8h_html_a7fb936f27ff66ec84e14972bdf2498dc"><div class="ttname"><a href="fil0fil_8h.html#a7fb936f27ff66ec84e14972bdf2498dc">fil_rename_tablespace_check</a></div><div class="ttdeci">dberr_t fil_rename_tablespace_check(space_id_t space_id, const char *old_path, const char *new_path, bool is_discarded)</div><div class="ttdoc">Test if a tablespace file can be renamed to a new filepath by checking if that the old filepath exist...</div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5031</div></div>
<div class="ttc" id="classFil__path_html_a818d549710759a964a53c99af147b282"><div class="ttname"><a href="classFil__path.html#a818d549710759a964a53c99af147b282">Fil_path::m_abs_path</a></div><div class="ttdeci">std::string m_abs_path</div><div class="ttdoc">A full absolute path to the same file. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:906</div></div>
<div class="ttc" id="fil0fil_8h_html_a15d58ef09dd9a196988f6eb08f744930"><div class="ttname"><a href="fil0fil_8h.html#a15d58ef09dd9a196988f6eb08f744930">FIL_PAGE_TYPE_LOB_DATA</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_LOB_DATA</div><div class="ttdoc">Data pages of uncompressed LOB. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1071</div></div>
<div class="ttc" id="fil0fil_8h_html_a0922c81a176ec8867f3ec32c1e484904"><div class="ttname"><a href="fil0fil_8h.html#a0922c81a176ec8867f3ec32c1e484904">FIL_PAGE_TYPE_LOB_FIRST</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_LOB_FIRST</div><div class="ttdoc">The first page of an uncompressed LOB. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1074</div></div>
<div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:38</div></div>
<div class="ttc" id="fil0fil_8h_html_a93968a4e96491426198f9eeb83e56726a526717c86779e369bda326c28cd13532"><div class="ttname"><a href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a526717c86779e369bda326c28cd13532">FIL_TYPE_LOG</a></div><div class="ttdoc">redo log covering changes to files of FIL_TYPE_TABLESPACE </div><div class="ttdef"><b>Definition:</b> fil0fil.h:110</div></div>
<div class="ttc" id="fil0fil_8h_html_ad93c06146df5dc35fa50cd81e30cf7a7"><div class="ttname"><a href="fil0fil_8h.html#ad93c06146df5dc35fa50cd81e30cf7a7">fil_addr_is_null</a></div><div class="ttdeci">bool fil_addr_is_null(const fil_addr_t &amp;addr)</div><div class="ttdoc">Returns true if file address is undefined. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8490</div></div>
<div class="ttc" id="fil0fil_8h_html_af06273731da470c55d8c08b8b3346f32"><div class="ttname"><a href="fil0fil_8h.html#af06273731da470c55d8c08b8b3346f32">fil_space_open</a></div><div class="ttdeci">bool fil_space_open(space_id_t space_id)</div><div class="ttdoc">Open each file of a tablespace if not already open. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3601</div></div>
<div class="ttc" id="mysqldump_8cc_html_a38dcf0baefa35c1961c23cf3e06002b5"><div class="ttname"><a href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a></div><div class="ttdeci">static char * path</div><div class="ttdef"><b>Definition:</b> mysqldump.cc:131</div></div>
<div class="ttc" id="structfil__space__t_html_a00ccbc0d499ac1a60f1ca2131f1d1b90"><div class="ttname"><a href="structfil__space__t.html#a00ccbc0d499ac1a60f1ca2131f1d1b90">fil_space_t::s_redo_space</a></div><div class="ttdeci">static fil_space_t * s_redo_space</div><div class="ttdoc">Redo log tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:334</div></div>
<div class="ttc" id="structfil__addr__t_html_ac9980d2dcc71833c41e1f348630bfc2b"><div class="ttname"><a href="structfil__addr__t.html#ac9980d2dcc71833c41e1f348630bfc2b">fil_addr_t::print</a></div><div class="ttdeci">std::ostream &amp; print(std::ostream &amp;out) const</div><div class="ttdoc">Print a string representation. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:967</div></div>
<div class="ttc" id="structPageCallback_html_a7d89d92e242fb93303eca43108b7245c"><div class="ttname"><a href="structPageCallback.html#a7d89d92e242fb93303eca43108b7245c">PageCallback::set_file</a></div><div class="ttdeci">void set_file(const char *filename, pfs_os_file_t file) 1</div><div class="ttdoc">Set the name of the physical file and the file handle that is used to open it for the file that is be...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:1716</div></div>
<div class="ttc" id="fil0fil_8h_html_a76eff6ecf40d691344ba7fc0a3d55c7e"><div class="ttname"><a href="fil0fil_8h.html#a76eff6ecf40d691344ba7fc0a3d55c7e">fil_init</a></div><div class="ttdeci">void fil_init(ulint max_n_open)</div><div class="ttdoc">Initializes the tablespace memory cache. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3645</div></div>
<div class="ttc" id="ut0new_8h_html"><div class="ttname"><a href="ut0new_8h.html">ut0new.h</a></div><div class="ttdoc">Instrumented memory allocator. </div></div>
<div class="ttc" id="fil0fil_8h_html_a28736d878c89fb4395c9bc86f4530dfc"><div class="ttname"><a href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a></div><div class="ttdeci">uint16_t page_type_t</div><div class="ttdef"><b>Definition:</b> fil0fil.h:990</div></div>
<div class="ttc" id="tls__context_8h_html_abc99fb62f3132cb429717ad2d9fb1026ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="tls__context_8h.html#abc99fb62f3132cb429717ad2d9fb1026ab50339a10e1de285ac99d4c3990b8693">TlsVerify::NONE</a></div></div>
<div class="ttc" id="structfil__space__t_html_a8b6a761060b17d30e588b1cc88eca188"><div class="ttname"><a href="structfil__space__t.html#a8b6a761060b17d30e588b1cc88eca188">fil_space_t::files</a></div><div class="ttdeci">Files files</div><div class="ttdoc">Files attached to this tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:253</div></div>
<div class="ttc" id="classFil__path_html_a8a61ba31d249599bc8f0148646590af2"><div class="ttname"><a href="classFil__path.html#a8a61ba31d249599bc8f0148646590af2">Fil_path::append_separator</a></div><div class="ttdeci">static void append_separator(std::string &amp;path)</div><div class="ttdoc">If the last character of a directory path is NOT a separator, append a separator to the path...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:778</div></div>
<div class="ttc" id="structfil__space__t_html_aae6d47f86345fd8e94803cc3d35be793"><div class="ttname"><a href="structfil__space__t.html#aae6d47f86345fd8e94803cc3d35be793">fil_space_t::n_pending_ops</a></div><div class="ttdeci">uint32_t n_pending_ops</div><div class="ttdoc">This is positive when we have pending operations against this tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:284</div></div>
<div class="ttc" id="sslopt-case_8h_html_ae00b773898ac853cec38cdf7a08b8e89"><div class="ttname"><a href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a></div><div class="ttdeci">case opt name</div><div class="ttdef"><b>Definition:</b> sslopt-case.h:32</div></div>
<div class="ttc" id="classEncryption_html_a1c2502b499e9986bdea1663b14ae96a4"><div class="ttname"><a href="classEncryption.html#a1c2502b499e9986bdea1663b14ae96a4">Encryption::Type</a></div><div class="ttdeci">Type</div><div class="ttdoc">Algorithm types supported. </div><div class="ttdef"><b>Definition:</b> os0enc.h:42</div></div>
<div class="ttc" id="structfil__addr__t_html"><div class="ttname"><a href="structfil__addr__t.html">fil_addr_t</a></div><div class="ttdoc">File space address. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:945</div></div>
<div class="ttc" id="fil0fil_8h_html_a175cdb94c744443c1400bc0af88c78c4"><div class="ttname"><a href="fil0fil_8h.html#a175cdb94c744443c1400bc0af88c78c4">FIL_PAGE_TYPE_ZBLOB</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_ZBLOB</div><div class="ttdoc">First compressed BLOB page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1034</div></div>
<div class="ttc" id="fil0fil_8h_html_a4a24b6c76a7d0ae9796aac709afe383d"><div class="ttname"><a href="fil0fil_8h.html#a4a24b6c76a7d0ae9796aac709afe383d">undo_space_name</a></div><div class="ttdeci">static constexpr char undo_space_name[]</div><div class="ttdoc">This tablespace name is used as the prefix for implicit undo tablespaces and during file discovery to...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:83</div></div>
<div class="ttc" id="structfil__space__t_html_a4bc9ffd82c27e25d2ea292b4dc53ea67"><div class="ttname"><a href="structfil__space__t.html#a4bc9ffd82c27e25d2ea292b4dc53ea67">fil_space_t::encryption_klen</a></div><div class="ttdeci">ulint encryption_klen</div><div class="ttdoc">Encrypt key length. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:308</div></div>
<div class="ttc" id="os0file_8h_html_a223a90243330328550582ef30fae2481"><div class="ttname"><a href="os0file_8h.html#a223a90243330328550582ef30fae2481">os_file_type_t</a></div><div class="ttdeci">os_file_type_t</div><div class="ttdef"><b>Definition:</b> os0file.h:631</div></div>
<div class="ttc" id="structfil__space__t_html_acb0719acd0ee7f7df746d3019605098d"><div class="ttname"><a href="structfil__space__t.html#acb0719acd0ee7f7df746d3019605098d">fil_space_t::compression_type</a></div><div class="ttdeci">Compression::Type compression_type</div><div class="ttdoc">Compression algorithm. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:299</div></div>
<div class="ttc" id="ut0dbg_8h_html_ae7aed983dfe98ac872b5a9915fa778fa"><div class="ttname"><a href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a></div><div class="ttdeci">#define ut_a(EXPR)</div><div class="ttdoc">Abort execution if EXPR does not evaluate to nonzero. </div><div class="ttdef"><b>Definition:</b> ut0dbg.h:54</div></div>
<div class="ttc" id="namespacedd_html_a0b4cee5d24960e48c74e25ae29222757"><div class="ttname"><a href="namespacedd.html#a0b4cee5d24960e48c74e25ae29222757">dd::Object_id</a></div><div class="ttdeci">unsigned long long Object_id</div><div class="ttdef"><b>Definition:</b> object_id.h:30</div></div>
<div class="ttc" id="fil0fil_8h_html_a26521056551ad399700a55e8e49745e4"><div class="ttname"><a href="fil0fil_8h.html#a26521056551ad399700a55e8e49745e4">FIL_SCAN_MAX_TABLESPACES_PER_THREAD</a></div><div class="ttdeci">constexpr size_t FIL_SCAN_MAX_TABLESPACES_PER_THREAD</div><div class="ttdoc">Maximum number of tablespaces to be scanned by a thread while scanning for available tablespaces duri...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:59</div></div>
<div class="ttc" id="fil0fil_8h_html_a3f82df38193e22d0763fd87fe52334a1"><div class="ttname"><a href="fil0fil_8h.html#a3f82df38193e22d0763fd87fe52334a1">operator&lt;&lt;</a></div><div class="ttdeci">std::ostream &amp; operator&lt;&lt;(std::ostream &amp;out, const fil_addr_t &amp;obj)</div><div class="ttdef"><b>Definition:</b> fil0fil.h:983</div></div>
<div class="ttc" id="fil0fil_8h_html_a84970d71627adf657f03fbec0eeef569"><div class="ttname"><a href="fil0fil_8h.html#a84970d71627adf657f03fbec0eeef569">fil_node_create</a></div><div class="ttdeci">char * fil_node_create(const char *name, page_no_t size, fil_space_t *space, bool is_raw, bool atomic_write, page_no_t max_pages=PAGE_NO_MAX)</div><div class="ttdoc">Attach a file to a tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:2508</div></div>
<div class="ttc" id="namespacebinary__log_1_1transaction_1_1compression_html_a22a3b5d8096f4c73ced74c0b668df0be"><div class="ttname"><a href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">binary_log::transaction::compression::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> base.h:36</div></div>
<div class="ttc" id="fil0fil_8h_html_a898ba1a1faba441b5f042c5ba14518d4"><div class="ttname"><a href="fil0fil_8h.html#a898ba1a1faba441b5f042c5ba14518d4">fil_space_acquire</a></div><div class="ttdeci">fil_space_t * fil_space_acquire(space_id_t space_id)</div><div class="ttdoc">Acquire a tablespace when it could be dropped concurrently. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3970</div></div>
<div class="ttc" id="structfil__space__t_html_ad53590c95c02a0a9663bdfadfbdf4f69"><div class="ttname"><a href="structfil__space__t.html#ad53590c95c02a0a9663bdfadfbdf4f69">fil_space_t::n_pending_flushes</a></div><div class="ttdeci">uint32_t n_pending_flushes</div><div class="ttdoc">This is positive when flushing the tablespace to disk; dropping of the tablespace is forbidden if thi...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:278</div></div>
<div class="ttc" id="fil0fil_8h_html_a39a42ffa98db259fbbe96572f310836d"><div class="ttname"><a href="fil0fil_8h.html#a39a42ffa98db259fbbe96572f310836d">fil_n_log_flushes</a></div><div class="ttdeci">ulint fil_n_log_flushes</div><div class="ttdoc">The number of fsyncs done to the log. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:289</div></div>
<div class="ttc" id="fil0fil_8h_html_ad121c7d988d7de8bbf634b5dec95ee92"><div class="ttname"><a href="fil0fil_8h.html#ad121c7d988d7de8bbf634b5dec95ee92">fil_io</a></div><div class="ttdeci">dberr_t fil_io(const IORequest &amp;type, bool sync, const page_id_t &amp;page_id, const page_size_t &amp;page_size, ulint byte_offset, ulint len, void *buf, void *message)</div><div class="ttdoc">Read or write data from a file. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8144</div></div>
<div class="ttc" id="fil0fil_8h_html_acbb949be855afdee75492fdc6b15eae1"><div class="ttname"><a href="fil0fil_8h.html#acbb949be855afdee75492fdc6b15eae1">MySQL_datadir_path</a></div><div class="ttdeci">Fil_path MySQL_datadir_path</div><div class="ttdoc">The MySQL server datadir value. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:277</div></div>
<div class="ttc" id="dict0types_8h_html_ac877e05c194a7c04fa5921c88cdcb1f7"><div class="ttname"><a href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a></div><div class="ttdeci">ib_id_t table_id_t</div><div class="ttdoc">Table or partition identifier (unique within an InnoDB instance). </div><div class="ttdef"><b>Definition:</b> dict0types.h:215</div></div>
<div class="ttc" id="fil0fil_8h_html_afacb769e2a96c661b6a8ee5da5bc5ec0"><div class="ttname"><a href="fil0fil_8h.html#afacb769e2a96c661b6a8ee5da5bc5ec0">fil_set_scan_dir</a></div><div class="ttdeci">void fil_set_scan_dir(const std::string &amp;directory, bool is_undo_dir=false)</div><div class="ttdoc">Normalize and save a directory to scan for datafiles. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11690</div></div>
<div class="ttc" id="fil0fil_8h_html_a5da42569fa2400ff8a012f60e8a6b8bc"><div class="ttname"><a href="fil0fil_8h.html#a5da42569fa2400ff8a012f60e8a6b8bc">fil_reset_encryption</a></div><div class="ttdeci">dberr_t fil_reset_encryption(space_id_t space_id)</div><div class="ttdoc">Reset the encryption type for the tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9254</div></div>
<div class="ttc" id="structfil__space__t_html_a3cd681d1e9cd1c31db83547b312c386c"><div class="ttname"><a href="structfil__space__t.html#a3cd681d1e9cd1c31db83547b312c386c">fil_space_t::stop_ios</a></div><div class="ttdeci">bool stop_ios</div><div class="ttdoc">true if we want to rename the .ibd file of tablespace and want to stop temporarily posting of new i/o...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:231</div></div>
<div class="ttc" id="structfil__space__t_html_a3f1a015508867576d40df500a387ee47"><div class="ttname"><a href="structfil__space__t.html#a3f1a015508867576d40df500a387ee47">fil_space_t::encryption_type</a></div><div class="ttdeci">Encryption::Type encryption_type</div><div class="ttdoc">Encryption algorithm. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:302</div></div>
<div class="ttc" id="fil0fil_8h_html_aaa4f43beb8dfce3ba26303c8167c9844"><div class="ttname"><a href="fil0fil_8h.html#aaa4f43beb8dfce3ba26303c8167c9844">FIL_PAGE_IBUF_FREE_LIST</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_IBUF_FREE_LIST</div><div class="ttdoc">Insert buffer free list. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1009</div></div>
<div class="ttc" id="structfil__addr__t_html_a7dd983dae1a77f305993b23e0800fb0a"><div class="ttname"><a href="structfil__addr__t.html#a7dd983dae1a77f305993b23e0800fb0a">fil_addr_t::boffset</a></div><div class="ttdeci">uint32_t boffset</div><div class="ttdoc">Byte offset within the page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:977</div></div>
<div class="ttc" id="classFil__iterator_html"><div class="ttname"><a href="classFil__iterator.html">Fil_iterator</a></div><div class="ttdoc">Iterate over the files in all the tablespaces. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1262</div></div>
<div class="ttc" id="structfil__space__t_html_ac039387fd8fcd366a7fb36eaac1d6f2b"><div class="ttname"><a href="structfil__space__t.html#ac039387fd8fcd366a7fb36eaac1d6f2b">fil_space_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Tablespace name. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:224</div></div>
<div class="ttc" id="structfil__node__t_html_a3961ec970636d385335ec17487ad7f7f"><div class="ttname"><a href="structfil__node__t.html#a3961ec970636d385335ec17487ad7f7f">fil_node_t::is_open</a></div><div class="ttdeci">bool is_open</div><div class="ttdoc">whether this file is open. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:157</div></div>
<div class="ttc" id="m__ctype_8h_html_ab650ec0e29cc9c8cab5261f5fa33b31a"><div class="ttname"><a href="m__ctype_8h.html#ab650ec0e29cc9c8cab5261f5fa33b31a">my_tolower</a></div><div class="ttdeci">#define my_tolower(s, c)</div><div class="ttdef"><b>Definition:</b> m_ctype.h:653</div></div>
<div class="ttc" id="classFil__path_html_a9ce5c89cf9c5bfaac6ec83ce402c2cba"><div class="ttname"><a href="classFil__path.html#a9ce5c89cf9c5bfaac6ec83ce402c2cba">Fil_path::remove_quotes</a></div><div class="ttdeci">static std::string remove_quotes(const char *pathspec)</div><div class="ttdoc">Remove quotes e.g., &amp;#39;a;b&amp;#39; or &quot;a;b&quot; -&gt; a;b. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:575</div></div>
<div class="ttc" id="suite__stubs_8c_html_acd3d88da3c0e0313c3645ff34f62f542"><div class="ttname"><a href="suite__stubs_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a></div><div class="ttdeci">static const char * key</div><div class="ttdef"><b>Definition:</b> suite_stubs.c:14</div></div>
<div class="ttc" id="fil0fil_8h_html_ae888af331068bfcfb0e8ce4b07de9487"><div class="ttname"><a href="fil0fil_8h.html#ae888af331068bfcfb0e8ce4b07de9487">FIL_PAGE_TYPE_RSEG_ARRAY</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_RSEG_ARRAY</div><div class="ttdoc">Rollback Segment Array page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1065</div></div>
<div class="ttc" id="fil0fil_8h_html_ae1b5c7acbf556edf0e9fac6aa05f8403"><div class="ttname"><a href="fil0fil_8h.html#ae1b5c7acbf556edf0e9fac6aa05f8403">fil_tablespace_redo_delete</a></div><div class="ttdeci">byte * fil_tablespace_redo_delete(byte *ptr, const byte *end, const page_id_t &amp;page_id, ulint parsed_bytes, bool parse_only)</div><div class="ttdoc">Redo a tablespace delete. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10735</div></div>
<div class="ttc" id="fil0fil_8h_html_a2cad8dd2050bb49d4a553686b231cdf2"><div class="ttname"><a href="fil0fil_8h.html#a2cad8dd2050bb49d4a553686b231cdf2">fil_space_get_type</a></div><div class="ttdeci">fil_type_t fil_space_get_type(space_id_t space_id)</div><div class="ttdoc">Gets the type of a file space. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:2330</div></div>
<div class="ttc" id="fil0fil_8h_html_aac7270d128627843f3e29fcbb6ad2efc"><div class="ttname"><a href="fil0fil_8h.html#aac7270d128627843f3e29fcbb6ad2efc">recv_recovery_on</a></div><div class="ttdeci">volatile bool recv_recovery_on</div><div class="ttdoc">true when applying redo log records during crash recovery; false otherwise. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:96</div></div>
<div class="ttc" id="fil0fil_8h_html_a0b42cf1baad76bf974a25c99ff7bf06a"><div class="ttname"><a href="fil0fil_8h.html#a0b42cf1baad76bf974a25c99ff7bf06a">fil_system_get_file_by_space_id</a></div><div class="ttdeci">bool fil_system_get_file_by_space_id(space_id_t space_id, std::string &amp;name)</div><div class="ttdoc">Fetch the file name opened for a space_id from the file map. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4406</div></div>
<div class="ttc" id="fil0fil_8h_html_a40a1d5e0125b674829ea128c5705668a"><div class="ttname"><a href="fil0fil_8h.html#a40a1d5e0125b674829ea128c5705668a">fil_free_scanned_files</a></div><div class="ttdeci">void fil_free_scanned_files()</div><div class="ttdoc">Free the data structures required for recovery. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11715</div></div>
<div class="ttc" id="group__Query__Optimizer_html_gafb541e941e7c4614ceb9eeddae48f9dc"><div class="ttname"><a href="group__Query__Optimizer.html#gafb541e941e7c4614ceb9eeddae48f9dc">equal</a></div><div class="ttdeci">static bool equal(const Item *i1, const Item *i2, const Field *f2)</div><div class="ttdef"><b>Definition:</b> sql_select.cc:3747</div></div>
<div class="ttc" id="api0api_8h_html_a02e9c11b4a9783f4b0b89fcf060f8f28"><div class="ttname"><a href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a></div><div class="ttdeci">uint32 space_id_t</div><div class="ttdoc">Tablespace identifier. </div><div class="ttdef"><b>Definition:</b> api0api.h:59</div></div>
<div class="ttc" id="structfil__node__t_html_aae6d3d043410a1eddf7f7525c24930f3"><div class="ttname"><a href="structfil__node__t.html#aae6d3d043410a1eddf7f7525c24930f3">fil_node_t::flush_size</a></div><div class="ttdeci">page_no_t flush_size</div><div class="ttdoc">Size of the file when last flushed, used to force the flush when file grows to keep the filesystem me...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:175</div></div>
<div class="ttc" id="fil0fil_8h_html_a9caac97efbd0d4d2d7167cef0a41e51f"><div class="ttname"><a href="fil0fil_8h.html#a9caac97efbd0d4d2d7167cef0a41e51f">fil_space_set_imported</a></div><div class="ttdeci">void fil_space_set_imported(space_id_t space_id)</div><div class="ttdoc">Note that a tablespace has been imported. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:2350</div></div>
<div class="ttc" id="fil0fil_8h_html_aca94a6a8a0e445a399d0b145a77a9cb1"><div class="ttname"><a href="fil0fil_8h.html#aca94a6a8a0e445a399d0b145a77a9cb1">SPACE_UNKNOWN</a></div><div class="ttdeci">constexpr space_id_t SPACE_UNKNOWN</div><div class="ttdoc">Unknown space id. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:934</div></div>
<div class="ttc" id="fil0fil_8h_html_aa619a3a0c2d7555e677c37646cabb7e8"><div class="ttname"><a href="fil0fil_8h.html#aa619a3a0c2d7555e677c37646cabb7e8">FIL_PAGE_TYPE_ALLOCATED</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_ALLOCATED</div><div class="ttdoc">Freshly allocated page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1013</div></div>
<div class="ttc" id="classFil__path_html_a2da163e80ea5c9a7867cf906c3657d0c"><div class="ttname"><a href="classFil__path.html#a2da163e80ea5c9a7867cf906c3657d0c">Fil_path::path</a></div><div class="ttdeci">const std::string &amp; path() const</div><div class="ttdef"><b>Definition:</b> fil0fil.h:438</div></div>
<div class="ttc" id="os0file_8h_html_a56e6594160a317a93fa099a4ba9ba59d"><div class="ttname"><a href="os0file_8h.html#a56e6594160a317a93fa099a4ba9ba59d">os_offset_t</a></div><div class="ttdeci">ib_uint64_t os_offset_t</div><div class="ttdoc">File offset in bytes. </div><div class="ttdef"><b>Definition:</b> os0file.h:83</div></div>
<div class="ttc" id="ut0dbg_8h_html_a17113dab7f37e298e889ac8818ab13d0"><div class="ttname"><a href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a></div><div class="ttdeci">#define ut_ad(EXPR)</div><div class="ttdoc">Debug assertion. </div><div class="ttdef"><b>Definition:</b> ut0dbg.h:66</div></div>
<div class="ttc" id="structfil__node__t_html_a4beb675e385fb2fe1121c6d4720f866f"><div class="ttname"><a href="structfil__node__t.html#a4beb675e385fb2fe1121c6d4720f866f">fil_node_t::size</a></div><div class="ttdeci">page_no_t size</div><div class="ttdoc">size of the file in database pages (0 if not known yet); the possible last incomplete megabyte may be...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:171</div></div>
<div class="ttc" id="fil0fil_8h_html_a35b5217e34bb41a859bccf7fd2d1b7af"><div class="ttname"><a href="fil0fil_8h.html#a35b5217e34bb41a859bccf7fd2d1b7af">FIL_PAGE_TYPE_ZLOB_FRAG_ENTRY</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_ZLOB_FRAG_ENTRY</div><div class="ttdoc">Index pages of fragment pages (compressed LOB). </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1090</div></div>
<div class="ttc" id="fil0fil_8h_html_ae05afc75972a4fe79695b4563e7f4b12"><div class="ttname"><a href="fil0fil_8h.html#ae05afc75972a4fe79695b4563e7f4b12">fil_discard_tablespace</a></div><div class="ttdeci">dberr_t fil_discard_tablespace(space_id_t space_id)</div><div class="ttdoc">Discards a single-table tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4740</div></div>
<div class="ttc" id="fil0fil_8h_html_a93968a4e96491426198f9eeb83e56726aa40030e0a18923b6d46ff2f258053485"><div class="ttname"><a href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726aa40030e0a18923b6d46ff2f258053485">FIL_TYPE_TABLESPACE</a></div><div class="ttdoc">persistent tablespace (for system, undo log or tables) </div><div class="ttdef"><b>Definition:</b> fil0fil.h:108</div></div>
<div class="ttc" id="structfil__space__t_html_ad7320ff0b74bd82eb243019e6beda567"><div class="ttname"><a href="structfil__space__t.html#ad7320ff0b74bd82eb243019e6beda567">fil_space_t::purpose</a></div><div class="ttdeci">fil_type_t purpose</div><div class="ttdoc">Purpose. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:249</div></div>
<div class="ttc" id="structfil__node__t_html_a2cc25d38ce9b18033759e879fd5d48f1"><div class="ttname"><a href="structfil__node__t.html#a2cc25d38ce9b18033759e879fd5d48f1">fil_node_t::block_size</a></div><div class="ttdeci">size_t block_size</div><div class="ttdoc">block size to use for punching holes </div><div class="ttdef"><b>Definition:</b> fil0fil.h:206</div></div>
<div class="ttc" id="fil0fil_8h_html_a6999af95accb9cdef5f4ac2e41e3f8aba63c2867fdcae0e8e8413d7ac21b69b59"><div class="ttname"><a href="fil0fil_8h.html#a6999af95accb9cdef5f4ac2e41e3f8aba63c2867fdcae0e8e8413d7ac21b69b59">Fil_state::DELETED</a></div><div class="ttdoc">A MLOG_FILE_DELETE was found, file was deleted. </div></div>
<div class="ttc" id="classFil__iterator_html_ac05438d4c2c501314d1b3e1529b46a2b"><div class="ttname"><a href="classFil__iterator.html#ac05438d4c2c501314d1b3e1529b46a2b">Fil_iterator::for_each_file</a></div><div class="ttdeci">static dberr_t for_each_file(bool include_log, F &amp;&amp;f)</div><div class="ttdoc">For each data file, exclude redo log files. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1270</div></div>
<div class="ttc" id="classpage__size__t_html"><div class="ttname"><a href="classpage__size__t.html">page_size_t</a></div><div class="ttdoc">Page size descriptor. </div><div class="ttdef"><b>Definition:</b> page0size.h:49</div></div>
<div class="ttc" id="fil0fil_8h_html_a7a3d525dad9447d8b1f10b71fa8ceeb9"><div class="ttname"><a href="fil0fil_8h.html#a7a3d525dad9447d8b1f10b71fa8ceeb9">fil_n_pending_tablespace_flushes</a></div><div class="ttdeci">ulint fil_n_pending_tablespace_flushes</div><div class="ttdoc">Number of pending tablespace flushes. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:295</div></div>
<div class="ttc" id="classFil__path_html_ad6de22f094729db1a29a50f0dfdd9a3f"><div class="ttname"><a href="classFil__path.html#ad6de22f094729db1a29a50f0dfdd9a3f">Fil_path::to_lower</a></div><div class="ttdeci">static void to_lower(std::string &amp;path)</div><div class="ttdoc">Convert a path string to lower case using the CHARSET my_charset_filename. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:680</div></div>
<div class="ttc" id="pfs__example__component__population_8cc_html_a7efa5e9c7494c7d4586359300221aa5d"><div class="ttname"><a href="pfs__example__component__population_8cc.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a></div><div class="ttdeci">const char * filename</div><div class="ttdef"><b>Definition:</b> pfs_example_component_population.cc:64</div></div>
<div class="ttc" id="fil0fil_8h_html_aa16109797a628837e3ab6f1f04d86e60"><div class="ttname"><a href="fil0fil_8h.html#aa16109797a628837e3ab6f1f04d86e60">FIL_PAGE_TYPE_UNKNOWN</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_UNKNOWN</div><div class="ttdoc">In old tablespaces, garbage in FIL_PAGE_TYPE is replaced with this value when flushing pages...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:1041</div></div>
<div class="ttc" id="fil0fil_8h_html_a93968a4e96491426198f9eeb83e56726a5a5b16cbc361d9568fbd287d964fc9ad"><div class="ttname"><a href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a5a5b16cbc361d9568fbd287d964fc9ad">FIL_TYPE_IMPORT</a></div><div class="ttdoc">a tablespace that is being imported (no logging until finished) </div><div class="ttdef"><b>Definition:</b> fil0fil.h:106</div></div>
<div class="ttc" id="classFil__path_html_a256179f84319ff1bb253a10b41acb0d0"><div class="ttname"><a href="classFil__path.html#a256179f84319ff1bb253a10b41acb0d0">Fil_path::path_type</a></div><div class="ttdeci">path_type</div><div class="ttdoc">Various types of file paths. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:405</div></div>
<div class="ttc" id="mysql__config__editor_8cc_html_a14ba597917108e3c1937893de7c4ac0c"><div class="ttname"><a href="mysql__config__editor_8cc.html#a14ba597917108e3c1937893de7c4ac0c">file_size</a></div><div class="ttdeci">static size_t file_size</div><div class="ttdef"><b>Definition:</b> mysql_config_editor.cc:70</div></div>
<div class="ttc" id="structfil__space__t_html_ab7c8355fbc548ea5d387e2dc41d23907"><div class="ttname"><a href="structfil__space__t.html#ab7c8355fbc548ea5d387e2dc41d23907">fil_space_t::List_node</a></div><div class="ttdeci">UT_LIST_NODE_T(fil_space_t) List_node</div><div class="ttdef"><b>Definition:</b> fil0fil.h:220</div></div>
<div class="ttc" id="fil0types_8h_html"><div class="ttname"><a href="fil0types_8h.html">fil0types.h</a></div><div class="ttdoc">The low-level file system page header &amp; trailer offsets. </div></div>
<div class="ttc" id="fil0fil_8h_html_aeae560365a83ac0f7684b91a9eebc52b"><div class="ttname"><a href="fil0fil_8h.html#aeae560365a83ac0f7684b91a9eebc52b">fil_adjust_name_import</a></div><div class="ttdeci">void fil_adjust_name_import(dict_table_t *table, const char *path, ib_file_suffix extn)</div><div class="ttdoc">Adjust file name for import for partition files in different letter case. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8751</div></div>
<div class="ttc" id="fil0fil_8h_html_a49ce4da45019e3380a27ec498952c9ee"><div class="ttname"><a href="fil0fil_8h.html#a49ce4da45019e3380a27ec498952c9ee">encryption_op_type</a></div><div class="ttdeci">encryption_op_type</div><div class="ttdef"><b>Definition:</b> fil0fil.h:216</div></div>
<div class="ttc" id="structPageCallback_html"><div class="ttname"><a href="structPageCallback.html">PageCallback</a></div><div class="ttdoc">Callback functor. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1689</div></div>
<div class="ttc" id="classFil__path_html_a83b40d6d94780d7284f1bb678488cc22"><div class="ttname"><a href="classFil__path.html#a83b40d6d94780d7284f1bb678488cc22">Fil_path::make_ibd_from_table_name</a></div><div class="ttdeci">static char * make_ibd_from_table_name(const std::string &amp;name_in)</div><div class="ttdoc">Allocate and build a file name from a path, a table or tablespace name and a suffix. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:830</div></div>
<div class="ttc" id="fil0fil_8h_html_a19e4f775bfed739a42abcf116ee85107"><div class="ttname"><a href="fil0fil_8h.html#a19e4f775bfed739a42abcf116ee85107">fil_page_get_prev</a></div><div class="ttdeci">page_no_t fil_page_get_prev(const byte *page)</div><div class="ttdoc">Get the predecessor of a file page. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8497</div></div>
<div class="ttc" id="fil0fil_8h_html_a1f3f6b918269926839b130cc93599dcb"><div class="ttname"><a href="fil0fil_8h.html#a1f3f6b918269926839b130cc93599dcb">Filenames</a></div><div class="ttdeci">std::vector&lt; std::string, ut_allocator&lt; std::string &gt; &gt; Filenames</div><div class="ttdef"><b>Definition:</b> fil0fil.h:98</div></div>
<div class="ttc" id="fil0fil_8h_html_ab4b7a6ac55b053acee243a0fe046bf31"><div class="ttname"><a href="fil0fil_8h.html#ab4b7a6ac55b053acee243a0fe046bf31">fil_add_moved_space</a></div><div class="ttdeci">void fil_add_moved_space(dd::Object_id dd_object_id, space_id_t space_id, const char *space_name, const std::string &amp;old_path, const std::string &amp;new_path)</div><div class="ttdoc">Add tablespace to the set of tablespaces to be updated in DD. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10218</div></div>
<div class="ttc" id="page0size_8h_html"><div class="ttname"><a href="page0size_8h.html">page0size.h</a></div><div class="ttdoc">A class describing a page size. </div></div>
<div class="ttc" id="fil0fil_8h_html_ae552caec2202bf9728d628867b59c013"><div class="ttname"><a href="fil0fil_8h.html#ae552caec2202bf9728d628867b59c013">dot_ext</a></div><div class="ttdeci">const char * dot_ext[]</div><div class="ttdoc">Common InnoDB file extentions. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:286</div></div>
<div class="ttc" id="fil0fil_8h_html_a24a4cfc46221e82d7ca99f5eb371fade"><div class="ttname"><a href="fil0fil_8h.html#a24a4cfc46221e82d7ca99f5eb371fade">FIL_NODE_MAGIC_N</a></div><div class="ttdeci">constexpr size_t FIL_NODE_MAGIC_N</div><div class="ttdoc">Value of fil_node_t::magic_n. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:354</div></div>
<div class="ttc" id="fil0fil_8h_html_a12b5a37c6f9ebdc5a28b600588c14e75"><div class="ttname"><a href="fil0fil_8h.html#a12b5a37c6f9ebdc5a28b600588c14e75">fil_path_is_known</a></div><div class="ttdeci">bool fil_path_is_known(const std::string &amp;path)</div><div class="ttdoc">Check if a path is known to InnoDB meaning that it is in or under one of the four path settings scann...</div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11706</div></div>
<div class="ttc" id="structpfs__os__file__t_html"><div class="ttname"><a href="structpfs__os__file__t.html">pfs_os_file_t</a></div><div class="ttdoc">Common file descriptor for file IO instrumentation with PFS on windows and other platforms. </div><div class="ttdef"><b>Definition:</b> os0file.h:152</div></div>
<div class="ttc" id="structfil__node__t_html_ad2dc7ae431e941695b584f39b63d5aa0"><div class="ttname"><a href="structfil__node__t.html#ad2dc7ae431e941695b584f39b63d5aa0">fil_node_t::List_node</a></div><div class="ttdeci">UT_LIST_NODE_T(fil_node_t) List_node</div><div class="ttdef"><b>Definition:</b> fil0fil.h:146</div></div>
<div class="ttc" id="fil0fil_8h_html_a0eb91dfa25617dbb4c3bc6f847b651b2"><div class="ttname"><a href="fil0fil_8h.html#a0eb91dfa25617dbb4c3bc6f847b651b2">FIL_PAGE_UNDO_LOG</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_UNDO_LOG</div><div class="ttdoc">Undo log page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1003</div></div>
<div class="ttc" id="testapp_8c_html_a104bdbc595bddd1fc349220c98c786d7"><div class="ttname"><a href="testapp_8c.html#a104bdbc595bddd1fc349220c98c786d7">trim</a></div><div class="ttdeci">static char * trim(char *ptr)</div><div class="ttdef"><b>Definition:</b> testapp.c:546</div></div>
<div class="ttc" id="fil0fil_8h_html_a7aa5fba3f3a77975264902cfce8472ad"><div class="ttname"><a href="fil0fil_8h.html#a7aa5fba3f3a77975264902cfce8472ad">fil_set_scan_dirs</a></div><div class="ttdeci">void fil_set_scan_dirs(const std::string &amp;directories)</div><div class="ttdoc">Normalize and save a list of directories to scan for datafiles. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11694</div></div>
<div class="ttc" id="fil0fil_8h_html_ab9bb5a0a6104ad5246734048e8ca4597"><div class="ttname"><a href="fil0fil_8h.html#ab9bb5a0a6104ad5246734048e8ca4597">FIL_PAGE_ENCRYPTED</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_ENCRYPTED</div><div class="ttdoc">Encrypted page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1047</div></div>
<div class="ttc" id="classFil__path_html_a3166607f4bb16de7744d3c0899a81fb5"><div class="ttname"><a href="classFil__path.html#a3166607f4bb16de7744d3c0899a81fb5">Fil_path::operator==</a></div><div class="ttdeci">bool operator==(const Fil_path &amp;other) const</div><div class="ttdoc">Determine if this path is equal to the other path. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:468</div></div>
<div class="ttc" id="fil0fil_8h_html_ad769fd254fa0ab1b8e181e39a9f89202"><div class="ttname"><a href="fil0fil_8h.html#ad769fd254fa0ab1b8e181e39a9f89202">fil_rename_precheck</a></div><div class="ttdeci">dberr_t fil_rename_precheck(const dict_table_t *old_table, const dict_table_t *new_table, const char *tmp_name)</div><div class="ttdoc">Check if swapping two .ibd files can be done without failure. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9058</div></div>
<div class="ttc" id="structos__event_html"><div class="ttname"><a href="structos__event.html">os_event</a></div><div class="ttdoc">InnoDB condition variable. </div><div class="ttdef"><b>Definition:</b> os0event.cc:66</div></div>
<div class="ttc" id="fil0fil_8h_html_a93968a4e96491426198f9eeb83e56726a5a4d9468a033de7ec56839ed0798dcdd"><div class="ttname"><a href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726a5a4d9468a033de7ec56839ed0798dcdd">FIL_TYPE_TEMPORARY</a></div><div class="ttdoc">temporary tablespace (temporary undo log or tables) </div><div class="ttdef"><b>Definition:</b> fil0fil.h:104</div></div>
<div class="ttc" id="fil0fil_8h_html_a74a7f3a7524f83baa533e865b824ea64"><div class="ttname"><a href="fil0fil_8h.html#a74a7f3a7524f83baa533e865b824ea64">fil_close_all_files</a></div><div class="ttdeci">void fil_close_all_files()</div><div class="ttdoc">Closes all open files. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3767</div></div>
<div class="ttc" id="fil0fil_8h_html_a98e07ef792f5e2f3d9b56a9ca128015b"><div class="ttname"><a href="fil0fil_8h.html#a98e07ef792f5e2f3d9b56a9ca128015b">fil_tablespace_lookup_for_recovery</a></div><div class="ttdeci">bool fil_tablespace_lookup_for_recovery(space_id_t space_id)</div><div class="ttdoc">Lookup the tablespace ID. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10048</div></div>
<div class="ttc" id="structfil__node__t_html_a504b1e39b39ff411270efe46d1e1dee0"><div class="ttname"><a href="structfil__node__t.html#a504b1e39b39ff411270efe46d1e1dee0">fil_node_t::magic_n</a></div><div class="ttdeci">size_t magic_n</div><div class="ttdoc">FIL_NODE_MAGIC_N. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:212</div></div>
<div class="ttc" id="fil0fil_8h_html_a9ee761a0f94092398aad2144be2d8ebd"><div class="ttname"><a href="fil0fil_8h.html#a9ee761a0f94092398aad2144be2d8ebd">fil_extend_tablespaces_to_stored_len</a></div><div class="ttdeci">void fil_extend_tablespaces_to_stored_len()</div><div class="ttdoc">Extends all tablespaces to the size stored in the space header. </div></div>
<div class="ttc" id="classFil__path_html_ae97213b9316a6b944ced56ec9474323b"><div class="ttname"><a href="classFil__path.html#ae97213b9316a6b944ced56ec9474323b">Fil_path::trim_separator</a></div><div class="ttdeci">static void trim_separator(std::string &amp;path)</div><div class="ttdoc">If the last character of a directory path is a separator (&amp;#39;\&amp;#39; or &amp;#39;/&amp;#39;) trim it off the string...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:766</div></div>
<div class="ttc" id="structPageCallback_html_a6e6df08c1996c45eda9c18baf6936146"><div class="ttname"><a href="structPageCallback.html#a6e6df08c1996c45eda9c18baf6936146">PageCallback::m_page_size</a></div><div class="ttdeci">page_size_t m_page_size</div><div class="ttdoc">The tablespace page size. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1741</div></div>
<div class="ttc" id="fil0fil_8h_html_aae0992caffb8e8f342acc548337bbe95"><div class="ttname"><a href="fil0fil_8h.html#aae0992caffb8e8f342acc548337bbe95">FIL_PAGE_TYPE_TRX_SYS</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_TRX_SYS</div><div class="ttdoc">Transaction system data. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1022</div></div>
<div class="ttc" id="fil0fil_8h_html_a19213581445ab184d972671b031d977f"><div class="ttname"><a href="fil0fil_8h.html#a19213581445ab184d972671b031d977f">fil_set_compression</a></div><div class="ttdeci">dberr_t fil_set_compression(space_id_t space_id, const char *algorithm)</div><div class="ttdoc">Set the compression type for the tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9141</div></div>
<div class="ttc" id="fil0fil_8h_html_acddcb653ea9528847daf75ec0c4b0041"><div class="ttname"><a href="fil0fil_8h.html#acddcb653ea9528847daf75ec0c4b0041">FIL_PAGE_TYPE_SYS</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_TYPE_SYS</div><div class="ttdoc">System page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1019</div></div>
<div class="ttc" id="structfil__node__t_html_ac14aadfea498192d192bfdbf6ebc2964"><div class="ttname"><a href="structfil__node__t.html#ac14aadfea498192d192bfdbf6ebc2964">fil_node_t::in_use</a></div><div class="ttdeci">size_t in_use</div><div class="ttdoc">e.g., when a file is being extended or just opened. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:191</div></div>
<div class="ttc" id="classFil__path_html_ab2d1a0699a1e396e61f243f0fce0e9fb"><div class="ttname"><a href="classFil__path.html#ab2d1a0699a1e396e61f243f0fce0e9fb">Fil_path::is_absolute_path</a></div><div class="ttdeci">bool is_absolute_path() const</div><div class="ttdef"><b>Definition:</b> fil0fil.h:599</div></div>
<div class="ttc" id="m__ctype_8h_html"><div class="ttname"><a href="m__ctype_8h.html">m_ctype.h</a></div><div class="ttdoc">A better implementation of the UNIX ctype(3) library. </div></div>
<div class="ttc" id="fil0types_8h_html_a21e45de3e62f010649a911f8027cfa4e"><div class="ttname"><a href="fil0types_8h.html#a21e45de3e62f010649a911f8027cfa4e">FIL_PAGE_TYPE</a></div><div class="ttdeci">#define FIL_PAGE_TYPE</div><div class="ttdoc">file page type: FIL_PAGE_INDEX,..., 2 bytes. </div><div class="ttdef"><b>Definition:</b> fil0types.h:75</div></div>
<div class="ttc" id="namespacefile_html"><div class="ttname"><a href="namespacefile.html">file</a></div><div class="ttdef"><b>Definition:</b> os0file.h:85</div></div>
<div class="ttc" id="ctype-mb_8cc_html_a6bc6b007533335efe02bafff799ec64c"><div class="ttname"><a href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a></div><div class="ttdeci">const char * p</div><div class="ttdef"><b>Definition:</b> ctype-mb.cc:1235</div></div>
<div class="ttc" id="fil0fil_8h_html_a5471aa722c5cca4260425b61a3e67f19"><div class="ttname"><a href="fil0fil_8h.html#a5471aa722c5cca4260425b61a3e67f19">fil_set_encryption</a></div><div class="ttdeci">dberr_t fil_set_encryption(space_id_t space_id, Encryption::Type algorithm, byte *key, byte *iv)</div><div class="ttdoc">Set the encryption type for the tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9210</div></div>
<div class="ttc" id="fil0fil_8h_html_a578077ea17f5093fc8fa7381ae89f7c8"><div class="ttname"><a href="fil0fil_8h.html#a578077ea17f5093fc8fa7381ae89f7c8">FIL_NULL</a></div><div class="ttdeci">constexpr page_no_t FIL_NULL</div><div class="ttdoc">&amp;#39;null&amp;#39; (undefined) page offset in the context of file spaces </div><div class="ttdef"><b>Definition:</b> fil0fil.h:928</div></div>
<div class="ttc" id="structfil__space__t_html_a3ef7149edd65ef1d6efed8b658e8ebd9"><div class="ttname"><a href="structfil__space__t.html#a3ef7149edd65ef1d6efed8b658e8ebd9">fil_space_t::size</a></div><div class="ttdeci">page_no_t size</div><div class="ttdoc">Tablespace file size in pages; 0 if not known yet. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:256</div></div>
<div class="ttc" id="classFil__path_html_af8d5d551eb4196dc05af7848d19bf79a"><div class="ttname"><a href="classFil__path.html#af8d5d551eb4196dc05af7848d19bf79a">Fil_path::has_suffix</a></div><div class="ttdeci">static bool has_suffix(ib_file_suffix sfx, const std::string &amp;path)</div><div class="ttdoc">Check if the file has the the specified suffix. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:733</div></div>
<div class="ttc" id="fil0fil_8h_html_ad69a57342a5985a911b7232e1b275742"><div class="ttname"><a href="fil0fil_8h.html#ad69a57342a5985a911b7232e1b275742">FIL_PAGE_SDI_BLOB</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_SDI_BLOB</div><div class="ttdoc">Uncompressed SDI BLOB page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1056</div></div>
<div class="ttc" id="classFil__path_html_a49e762cac740da14f10a6c94bb630bdc"><div class="ttname"><a href="classFil__path.html#a49e762cac740da14f10a6c94bb630bdc">Fil_path::make_cfg</a></div><div class="ttdeci">static char * make_cfg(const std::string &amp;path_in)</div><div class="ttdoc">Allocate and build a CFG file name from a path. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:801</div></div>
<div class="ttc" id="fil0fil_8h_html_a49ce4da45019e3380a27ec498952c9eea244e5e74f856cdd5aafc1005877a2f61"><div class="ttname"><a href="fil0fil_8h.html#a49ce4da45019e3380a27ec498952c9eea244e5e74f856cdd5aafc1005877a2f61">ENCRYPTION</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:216</div></div>
<div class="ttc" id="structfil__node__t_html_afdd997de745dbcce78b8c2babb3bc0c5"><div class="ttname"><a href="structfil__node__t.html#afdd997de745dbcce78b8c2babb3bc0c5">fil_node_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">file name; protected by Fil_shard::m_mutex and log_sys-&gt;mutex. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:152</div></div>
<div class="ttc" id="structfil__node__t_html_a3f4181309de91fce2441a5754505f878"><div class="ttname"><a href="structfil__node__t.html#a3f4181309de91fce2441a5754505f878">fil_node_t::handle</a></div><div class="ttdeci">pfs_os_file_t handle</div><div class="ttdoc">file handle (valid if is_open) </div><div class="ttdef"><b>Definition:</b> fil0fil.h:160</div></div>
<div class="ttc" id="fil0fil_8h_html_a1e5f471d5272ce5d45250f4d66075926"><div class="ttname"><a href="fil0fil_8h.html#a1e5f471d5272ce5d45250f4d66075926">fil_delete_file</a></div><div class="ttdeci">bool fil_delete_file(const char *path)</div><div class="ttdoc">Delete the tablespace file and any related files like .cfg. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9027</div></div>
<div class="ttc" id="fil0fil_8h_html_a7ba2afbf2f08e437ea77a9df12aafd76"><div class="ttname"><a href="fil0fil_8h.html#a7ba2afbf2f08e437ea77a9df12aafd76">fil_no_punch_hole</a></div><div class="ttdeci">void fil_no_punch_hole(fil_node_t *file)</div><div class="ttdoc">Note that the file system where the file resides doesn&amp;#39;t support PUNCH HOLE. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9139</div></div>
<div class="ttc" id="hp__test1_8cc_html_a6eec09a91807e20d7b3d6ef3da594067"><div class="ttname"><a href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a></div><div class="ttdeci">static int flags[50]</div><div class="ttdef"><b>Definition:</b> hp_test1.cc:39</div></div>
<div class="ttc" id="fil0fil_8h_html_af7c3b7a186ed08fffb210acd50210fe3"><div class="ttname"><a href="fil0fil_8h.html#af7c3b7a186ed08fffb210acd50210fe3">fil_get_dirs</a></div><div class="ttdeci">std::string fil_get_dirs()</div><div class="ttdoc">Get the list of directories that datafiles can reside in. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:11712</div></div>
<div class="ttc" id="fil0fil_8h_html_a2dc37e993bccf6e1a331e2ff5e56cafb"><div class="ttname"><a href="fil0fil_8h.html#a2dc37e993bccf6e1a331e2ff5e56cafb">fil_space_inc_redo_skipped_count</a></div><div class="ttdeci">void fil_space_inc_redo_skipped_count(space_id_t space_id)</div><div class="ttdoc">Increase redo skipped count for a tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:4673</div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="structfil__space__t_html_a4047294cd4825618c91b496c07705884"><div class="ttname"><a href="structfil__space__t.html#a4047294cd4825618c91b496c07705884">fil_space_t::latch</a></div><div class="ttdeci">rw_lock_t latch</div><div class="ttdoc">Latch protecting the file space storage allocation. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:288</div></div>
<div class="ttc" id="structfil__node__t_html_a4aeaa7ced1c6a3c72e8e74014730d6e6"><div class="ttname"><a href="structfil__node__t.html#a4aeaa7ced1c6a3c72e8e74014730d6e6">fil_node_t::init_size</a></div><div class="ttdeci">page_no_t init_size</div><div class="ttdoc">initial size of the file in database pages; FIL_IBD_FILE_INITIAL_SIZE by default </div><div class="ttdef"><b>Definition:</b> fil0fil.h:179</div></div>
<div class="ttc" id="fil0fil_8h_html_a52186ff9b540cdf300358388d96f734b"><div class="ttname"><a href="fil0fil_8h.html#a52186ff9b540cdf300358388d96f734b">fil_space_read_name_and_filepath</a></div><div class="ttdeci">bool fil_space_read_name_and_filepath(space_id_t space_id, char **name, char **filepath)</div><div class="ttdoc">Looks for a pre-existing fil_space_t with the given tablespace ID and, if found, returns the name and...</div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5919</div></div>
<div class="ttc" id="fil0fil_8h_html_a6cea8774598156db53c675791f8911d4"><div class="ttname"><a href="fil0fil_8h.html#a6cea8774598156db53c675791f8911d4">fil_redo_io</a></div><div class="ttdeci">dberr_t fil_redo_io(const IORequest &amp;type, const page_id_t &amp;page_id, const page_size_t &amp;page_size, ulint byte_offset, ulint len, void *buf)</div><div class="ttdoc">Read or write redo log data (synchronous buffered IO). </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:8047</div></div>
<div class="ttc" id="structmtr__t_html"><div class="ttname"><a href="structmtr__t.html">mtr_t</a></div><div class="ttdoc">Mini-transaction handle and buffer. </div><div class="ttdef"><b>Definition:</b> mtr0mtr.h:169</div></div>
<div class="ttc" id="fil0fil_8h_html_abe7b87d702aa585acb95430bf3583a66"><div class="ttname"><a href="fil0fil_8h.html#abe7b87d702aa585acb95430bf3583a66">fil_space_get_size</a></div><div class="ttdeci">page_no_t fil_space_get_size(space_id_t space_id)</div><div class="ttdoc">Returns the size of the space in pages. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3545</div></div>
<div class="ttc" id="fil0fil_8h_html_a467e261c91443ac395e7e73818250864"><div class="ttname"><a href="fil0fil_8h.html#a467e261c91443ac395e7e73818250864">fil_space_open_if_needed</a></div><div class="ttdeci">void fil_space_open_if_needed(fil_space_t *space)</div><div class="ttdoc">During crash recovery, open a tablespace if it had not been opened yet, to get valid size and flags...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:1846</div></div>
<div class="ttc" id="fil0fil_8h_html_a92993d7b03ae1933b3465469b960295a"><div class="ttname"><a href="fil0fil_8h.html#a92993d7b03ae1933b3465469b960295a">fil_n_pending_log_flushes</a></div><div class="ttdeci">ulint fil_n_pending_log_flushes</div><div class="ttdoc">Number of pending redo log flushes. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:292</div></div>
<div class="ttc" id="fil0fil_8h_html_ac779a181f9caaa423e712f1c0bf13749"><div class="ttname"><a href="fil0fil_8h.html#ac779a181f9caaa423e712f1c0bf13749">fil_space_get_first_path</a></div><div class="ttdeci">char * fil_space_get_first_path(space_id_t space_id)</div><div class="ttdoc">Returns the path from the first fil_node_t found with this space ID. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3521</div></div>
<div class="ttc" id="innodb__utility_8h_html_a496a8f8646bff5c74c18ee0c04134b6d"><div class="ttname"><a href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a></div><div class="ttdeci">#define UT_LIST_NODE_T(TYPE)</div><div class="ttdef"><b>Definition:</b> innodb_utility.h:40</div></div>
<div class="ttc" id="fil0fil_8h_html_a28e0bafa01bbae68a929ab1795e45e89"><div class="ttname"><a href="fil0fil_8h.html#a28e0bafa01bbae68a929ab1795e45e89">fil_tablespace_redo_extend</a></div><div class="ttdeci">byte * fil_tablespace_redo_extend(byte *ptr, const byte *end, const page_id_t &amp;page_id, ulint parsed_bytes, bool parse_only)</div><div class="ttdoc">Redo a tablespace extend. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10570</div></div>
<div class="ttc" id="config__static_8h_html_a65e9886d74aaee76545e83dd09011727"><div class="ttname"><a href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></div><div class="ttdeci">#define false</div><div class="ttdef"><b>Definition:</b> config_static.h:43</div></div>
<div class="ttc" id="mach0data_8h_html_ac9eed1c0fd6bf1f7edd38bebdea3fd13"><div class="ttname"><a href="mach0data_8h.html#ac9eed1c0fd6bf1f7edd38bebdea3fd13">mach_read_from_2</a></div><div class="ttdeci">UNIV_INLINE uint16_t mach_read_from_2(const byte *b)</div><div class="ttdoc">The following function is used to fetch data from 2 consecutive bytes. </div></div>
<div class="ttc" id="structfil__node__t_html_a3e349f1d1c38ce76728312007ed1ff05"><div class="ttname"><a href="structfil__node__t.html#a3e349f1d1c38ce76728312007ed1ff05">fil_node_t::n_pending</a></div><div class="ttdeci">size_t n_pending</div><div class="ttdoc">count of pending i/o&amp;#39;s; is_open must be true if nonzero </div><div class="ttdef"><b>Definition:</b> fil0fil.h:185</div></div>
<div class="ttc" id="classFil__path_html_ae1acd6ccbe1a15e9c0b1856beef462cb"><div class="ttname"><a href="classFil__path.html#ae1acd6ccbe1a15e9c0b1856beef462cb">Fil_path::normalize</a></div><div class="ttdeci">static void normalize(std::string &amp;path)</div><div class="ttdoc">Normalize a directory path for the current OS: On Windows, we convert &amp;#39;/&amp;#39; to &amp;#39;\&amp;#39;, else we convert &amp;#39;\&amp;#39;...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:659</div></div>
<div class="ttc" id="structfil__space__t_html_a914db0402230b5f4cc86eb6da6a64cc0"><div class="ttname"><a href="structfil__space__t.html#a914db0402230b5f4cc86eb6da6a64cc0">fil_space_t::stop_new_ops</a></div><div class="ttdeci">bool stop_new_ops</div><div class="ttdoc">We set this true when we start deleting a single-table tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:240</div></div>
<div class="ttc" id="fil0fil_8h_html_a49ce4da45019e3380a27ec498952c9eeab5f88847da182e7a1a8af64f4e18f048"><div class="ttname"><a href="fil0fil_8h.html#a49ce4da45019e3380a27ec498952c9eeab5f88847da182e7a1a8af64f4e18f048">DECRYPTION</a></div><div class="ttdef"><b>Definition:</b> fil0fil.h:216</div></div>
<div class="ttc" id="fil0fil_8h_html_aa756b73bd6a05712a077acfd32f5f068"><div class="ttname"><a href="fil0fil_8h.html#aa756b73bd6a05712a077acfd32f5f068">fil_tablespace_redo_encryption</a></div><div class="ttdeci">byte * fil_tablespace_redo_encryption(byte *ptr, const byte *end, space_id_t space_id)</div><div class="ttdoc">Parse and process an encryption redo record. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:10828</div></div>
<div class="ttc" id="fil0fil_8h_html_a12ac69fcb82162d44d5a76e64a6255fe"><div class="ttname"><a href="fil0fil_8h.html#a12ac69fcb82162d44d5a76e64a6255fe">FIL_PAGE_ENCRYPTED_RTREE</a></div><div class="ttdeci">constexpr page_type_t FIL_PAGE_ENCRYPTED_RTREE</div><div class="ttdoc">Encrypted R-tree page. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:1053</div></div>
<div class="ttc" id="classFil__path_html_a7bc2e6945e362c395f6a3e12bbb24a5b"><div class="ttname"><a href="classFil__path.html#a7bc2e6945e362c395f6a3e12bbb24a5b">Fil_path::abs_path</a></div><div class="ttdeci">const std::string abs_path() const</div><div class="ttdoc">Return the absolute path by value. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:452</div></div>
<div class="ttc" id="classFil__path_html_a00a27434a643694af13d0b0338a62898"><div class="ttname"><a href="classFil__path.html#a00a27434a643694af13d0b0338a62898">Fil_path::is_ancestor</a></div><div class="ttdeci">bool is_ancestor(const Fil_path &amp;other) const</div><div class="ttdoc">Check if m_path is the parent of the other path. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:9461</div></div>
<div class="ttc" id="fil0fil_8h_html_a6635d7cf204fe3b71010777815671bd6"><div class="ttname"><a href="fil0fil_8h.html#a6635d7cf204fe3b71010777815671bd6">fil_space_close</a></div><div class="ttdeci">void fil_space_close(space_id_t space_id)</div><div class="ttdoc">Close each file of a tablespace if open. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:3615</div></div>
<div class="ttc" id="fil0fil_8h_html_a246bc88b7e6a76d4dc8c26fa8f7f26d1"><div class="ttname"><a href="fil0fil_8h.html#a246bc88b7e6a76d4dc8c26fa8f7f26d1">fil_space_get</a></div><div class="ttdeci">fil_space_t * fil_space_get(space_id_t space_id)</div><div class="ttdoc">Look up a tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:2296</div></div>
<div class="ttc" id="fil0fil_8h_html_a54e73aa6628b09914ab4a46b0135eae3"><div class="ttname"><a href="fil0fil_8h.html#a54e73aa6628b09914ab4a46b0135eae3">fil_rename_tablespace_by_id</a></div><div class="ttdeci">dberr_t fil_rename_tablespace_by_id(space_id_t space_id, const char *old_name, const char *new_name)</div><div class="ttdoc">Rename a tablespace. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:5394</div></div>
<div class="ttc" id="structfil__space__t_html_af42b582c377e62afa6fc13dd54065b51"><div class="ttname"><a href="structfil__space__t.html#af42b582c377e62afa6fc13dd54065b51">fil_space_t::redo_skipped_count</a></div><div class="ttdeci">ulint redo_skipped_count</div><div class="ttdoc">Reference count for operations who want to skip redo log in the file space in order to make fsp_space...</div><div class="ttdef"><b>Definition:</b> fil0fil.h:245</div></div>
<div class="ttc" id="structfil__node__t_html_af49fe898e6ce203ab6bf9006d3547c98"><div class="ttname"><a href="structfil__node__t.html#af49fe898e6ce203ab6bf9006d3547c98">fil_node_t::modification_counter</a></div><div class="ttdeci">int64_t modification_counter</div><div class="ttdoc">number of writes to the file since the system was started </div><div class="ttdef"><b>Definition:</b> fil0fil.h:194</div></div>
<div class="ttc" id="namespacerules__table__service_html_a58d8b2e690d4fb60a8d9557c8a4b5cd1"><div class="ttname"><a href="namespacerules__table__service.html#a58d8b2e690d4fb60a8d9557c8a4b5cd1">rules_table_service::table_name</a></div><div class="ttdeci">const char * table_name</div><div class="ttdef"><b>Definition:</b> rules_table_service.cc:55</div></div>
<div class="ttc" id="fil0fil_8h_html_a44a67d237301b99531fe6b13ac90d5db"><div class="ttname"><a href="fil0fil_8h.html#a44a67d237301b99531fe6b13ac90d5db">MySQL_undo_path_is_unique</a></div><div class="ttdeci">bool MySQL_undo_path_is_unique</div><div class="ttdoc">The undo path is different from any other known directory. </div><div class="ttdef"><b>Definition:</b> fil0fil.cc:283</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="fil0fil_8h.html">fil0fil.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
