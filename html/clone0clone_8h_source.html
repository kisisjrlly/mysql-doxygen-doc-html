<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/clone0clone.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('clone0clone_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">clone0clone.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="clone0clone_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 2017, 2020, Oracle and/or its affiliates. All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/clone0clone.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> Innodb Clone System</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *******************************************************/</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#ifndef CLONE_CLONE_INCLUDE</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#define CLONE_CLONE_INCLUDE</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;chrono&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="db0err_8h.html">db0err.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="include_2mysql_2plugin_8h.html">mysql/plugin.h</a>&quot;</span>  <span class="comment">// thd_killed()</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sql_2handler_8h.html">sql/handler.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;univ.i&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0mutex_8h.html">ut0mutex.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="clone0desc_8h.html">clone0desc.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="clone0repl_8h.html">clone0repl.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="clone0snapshot_8h.html">clone0snapshot.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/** Directory under data directory for all clone status files. */</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">   47</a></span>&#160;<span class="preprocessor">#define CLONE_FILES_DIR OS_FILE_PREFIX &quot;clone&quot; OS_PATH_SEPARATOR_STR</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/** Clone in progress file name length. */</span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#ae84cc06a9645353fed07ab760cfed389">   50</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="clone0clone_8h.html#ae84cc06a9645353fed07ab760cfed389">CLONE_INNODB_FILE_LEN</a> = 64;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/** Clone simulate recovery error file name. */</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a34bc247f013c828d1fb44953d65ddbb7">   54</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#a34bc247f013c828d1fb44953d65ddbb7">CLONE_INNODB_RECOVERY_CRASH_POINT</a>[] =</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;status_crash_point&quot;</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/** Clone in progress file name. */</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#aaf626ad1ad5ef7eb535c52f7e30b0510">   59</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#aaf626ad1ad5ef7eb535c52f7e30b0510">CLONE_INNODB_IN_PROGRESS_FILE</a>[] =</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;status_in_progress&quot;</span>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">/** Clone error file name. */</span></div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a4cedc7060a40c680edabf5e7e2932de2">   63</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#a4cedc7060a40c680edabf5e7e2932de2">CLONE_INNODB_ERROR_FILE</a>[] =</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;status_error&quot;</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">/** Clone fix up file name. Present when clone needs table fix up. */</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#adf36e2d18afddb8b4269ce06be432ee5">   67</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#adf36e2d18afddb8b4269ce06be432ee5">CLONE_INNODB_FIXUP_FILE</a>[] =</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;status_fix&quot;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/** Clone recovery status. */</span></div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a19914ee6be34b23b79c58a0cb0aa53a7">   71</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#a19914ee6be34b23b79c58a0cb0aa53a7">CLONE_INNODB_RECOVERY_FILE</a>[] =</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;status_recovery&quot;</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/** Clone file name for list of files cloned in place. */</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#ad457d1b9ce795e6ec06596d03cc10453">   75</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#ad457d1b9ce795e6ec06596d03cc10453">CLONE_INNODB_NEW_FILES</a>[] =</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;new_files&quot;</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/** Clone file name for list of files to be replaced. */</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a42f5a4378799d625a79d24b42609203e">   79</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#a42f5a4378799d625a79d24b42609203e">CLONE_INNODB_REPLACED_FILES</a>[] =</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;replace_files&quot;</span>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/** Clone file name for list of old files to be removed. */</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a2753575659d811be0d7d4f1551566d14">   83</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#a2753575659d811be0d7d4f1551566d14">CLONE_INNODB_OLD_FILES</a>[] =</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;old_files&quot;</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/** Clone file extension for files to be replaced. */</span></div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#ac5208dcb489ab0e88279fc85f720683c">   87</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#ac5208dcb489ab0e88279fc85f720683c">CLONE_INNODB_REPLACED_FILE_EXTN</a>[] = <span class="stringliteral">&quot;.&quot;</span> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;clone&quot;</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/** Clone file extension for saved old files. */</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a918d2cfd2c331100c3eef1c6f123e03e">   90</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="clone0clone_8h.html#a918d2cfd2c331100c3eef1c6f123e03e">CLONE_INNODB_SAVED_FILE_EXTN</a>[] = <span class="stringliteral">&quot;.&quot;</span> <a class="code" href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a> <span class="stringliteral">&quot;clone_save&quot;</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a7cc4085b3e3ba15d5806d6fbb8de3a52">   92</a></span>&#160;<span class="keyword">using</span> <a class="code" href="clone0clone_8h.html#a7cc4085b3e3ba15d5806d6fbb8de3a52">Clone_Msec</a> = std::chrono::milliseconds;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a9fb03aaa960c11fac23b6f6c695046a6">   93</a></span>&#160;<span class="keyword">using</span> <a class="code" href="clone0clone_8h.html#a9fb03aaa960c11fac23b6f6c695046a6">Clone_Sec</a> = <a class="code" href="task_8cc.html#a541442824a656f9c820631f4b8adf441">std::chrono::seconds</a>;</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a7ce86caf0d5d2748b8e806e7d78eab03">   94</a></span>&#160;<span class="keyword">using</span> <a class="code" href="clone0clone_8h.html#a7ce86caf0d5d2748b8e806e7d78eab03">Clone_Min</a> = std::chrono::minutes;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">/** Default sleep time while waiting: 100 ms */</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a29d8b217b62ffa5c39b1d081e82797e4">   97</a></span>&#160;<span class="keyword">const</span> <a class="code" href="clone0clone_8h.html#a7cc4085b3e3ba15d5806d6fbb8de3a52">Clone_Msec</a> <a class="code" href="clone0clone_8h.html#a29d8b217b62ffa5c39b1d081e82797e4">CLONE_DEF_SLEEP</a>{100};</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/** Default alert interval in multiple of sleep time: 5 seconds */</span></div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#af30a5d3d3eb8dae128e8b06588b62944">  100</a></span>&#160;<span class="keyword">const</span> <a class="code" href="clone0clone_8h.html#a9fb03aaa960c11fac23b6f6c695046a6">Clone_Sec</a> <a class="code" href="clone0clone_8h.html#af30a5d3d3eb8dae128e8b06588b62944">CLONE_DEF_ALERT_INTERVAL</a>{5};</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">/** Default timeout in multiple of sleep time: 30 minutes */</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#ac92bf1d56f3aa4b6528f203064caa39a">  103</a></span>&#160;<span class="keyword">const</span> <a class="code" href="clone0clone_8h.html#a7ce86caf0d5d2748b8e806e7d78eab03">Clone_Min</a> <a class="code" href="clone0clone_8h.html#ac92bf1d56f3aa4b6528f203064caa39a">CLONE_DEF_TIMEOUT</a>{30};</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/** Clone system state */</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5">  106</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5">Clone_System_State</a> {</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5ad7eb112345b35f02ab2eec402bbb95e1">  107</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5ad7eb112345b35f02ab2eec402bbb95e1">CLONE_SYS_INACTIVE</a>,</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5a9e084b9a5f5e39aa4d0550526fdccc01">  108</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5a9e084b9a5f5e39aa4d0550526fdccc01">CLONE_SYS_ACTIVE</a>,</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5aa5a1e0c77435af8ca1431a11cb5523a3">  109</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5aa5a1e0c77435af8ca1431a11cb5523a3">CLONE_SYS_ABORT</a></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;};</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a3c30cf46be2e0a1821f25caf56c7af00">  112</a></span>&#160;<span class="keyword">using</span> <a class="code" href="clone0clone_8h.html#a3c30cf46be2e0a1821f25caf56c7af00">Clone_Sys_State</a> = std::atomic&lt;Clone_System_State&gt;;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/** Clone Handle State */</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462">  115</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462">Clone_Handle_State</a> {</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a15a782f2367c11ca3a9ee11a3f9c4eec">  116</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a15a782f2367c11ca3a9ee11a3f9c4eec">CLONE_STATE_INIT</a> = 1,</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a9fe408c44204945674f4441f6af7c452">  117</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a9fe408c44204945674f4441f6af7c452">CLONE_STATE_ACTIVE</a>,</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a5992a4b64ad753ff55d5dc3199694727">  118</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a5992a4b64ad753ff55d5dc3199694727">CLONE_STATE_IDLE</a>,</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a7410d9f301e973ced01602bb530b012c">  119</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a7410d9f301e973ced01602bb530b012c">CLONE_STATE_ABORT</a></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;};</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">/** Clone task state */</span></div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997">  123</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997">Clone_Task_State</a> { <a class="code" href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997a48e25d5c36fdf932e89b192cd2764028">CLONE_TASK_INACTIVE</a> = 1, <a class="code" href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997af1b0357e5fecbed9686edc2aca7cc5d7">CLONE_TASK_ACTIVE</a> };</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/** Maximum number of concurrent snapshots */</span></div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a71083ad89dcb9c05c38b7425a639b5d7">  126</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="clone0clone_8h.html#a71083ad89dcb9c05c38b7425a639b5d7">MAX_SNAPSHOTS</a> = 1;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/** Maximum number of concurrent clones */</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#ac508a078e986fa9a8dd8cfd2f70a49bb">  129</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="clone0clone_8h.html#ac508a078e986fa9a8dd8cfd2f70a49bb">MAX_CLONES</a> = 1;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/** Clone system array size */</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#a189689a38e3458187474a699e21a1a81">  132</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="clone0clone_8h.html#a189689a38e3458187474a699e21a1a81">CLONE_ARR_SIZE</a> = 2 * <a class="code" href="clone0clone_8h.html#ac508a078e986fa9a8dd8cfd2f70a49bb">MAX_CLONES</a>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/** Snapshot system array size */</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="clone0clone_8h.html#abab72de7eb4f289336e3db0d14cd2121">  135</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="clone0clone_8h.html#abab72de7eb4f289336e3db0d14cd2121">SNAPSHOT_ARR_SIZE</a> = 2 * <a class="code" href="clone0clone_8h.html#a71083ad89dcb9c05c38b7425a639b5d7">MAX_SNAPSHOTS</a>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">/** Task for clone operation. Multiple task can concurrently work</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">on a clone operation. */</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="structClone__Task.html">  139</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structClone__Task.html">Clone_Task</a> {<span class="comment"></span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">  /** Task Meta data */</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="structClone__Task.html#a4efcccea37165a8c1feb99f887678cb4">  141</a></span>&#160;  <a class="code" href="structClone__Task__Meta.html">Clone_Task_Meta</a> <a class="code" href="structClone__Task.html#a4efcccea37165a8c1feb99f887678cb4">m_task_meta</a>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">  /** Task state */</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="structClone__Task.html#afa5b4cec7cb0e425c53d1a759c680c0e">  144</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997">Clone_Task_State</a> <a class="code" href="structClone__Task.html#afa5b4cec7cb0e425c53d1a759c680c0e">m_task_state</a>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">  /** Serial descriptor byte string */</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="structClone__Task.html#afb26f530d284abe4385eab5e505934bd">  147</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structClone__Task.html#afb26f530d284abe4385eab5e505934bd">m_serial_desc</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">  /** Serial descriptor allocated length */</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="structClone__Task.html#a5ea8c230cbabe54443310bcb0aa4487f">  150</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structClone__Task.html#a5ea8c230cbabe54443310bcb0aa4487f">m_alloc_len</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">  /** Current file descriptor */</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="structClone__Task.html#a68b2e7bc84e1b682230858ea3e2e3002">  153</a></span>&#160;  <a class="code" href="structpfs__os__file__t.html">pfs_os_file_t</a> <a class="code" href="structClone__Task.html#a68b2e7bc84e1b682230858ea3e2e3002">m_current_file_des</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">  /** Current file index */</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structClone__Task.html#a1285b4fe5a7c97b7480521a28c49a081">  156</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structClone__Task.html#a1285b4fe5a7c97b7480521a28c49a081">m_current_file_index</a>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">  /** Data files are read using OS buffer cache */</span></div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structClone__Task.html#a0671d47dcbc7f9ed6f9ad5eab2700182">  159</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structClone__Task.html#a0671d47dcbc7f9ed6f9ad5eab2700182">m_file_cache</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">  /** If master task */</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="structClone__Task.html#ab7e8f96fd1332b3856c65a7e0920a780">  162</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structClone__Task.html#ab7e8f96fd1332b3856c65a7e0920a780">m_is_master</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">  /** If task has associated session */</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="structClone__Task.html#ad5d4e4ef93e2789b101ce18bc6bf617d">  165</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structClone__Task.html#ad5d4e4ef93e2789b101ce18bc6bf617d">m_has_thd</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">  /** Ignore debug sync point */</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="structClone__Task.html#ae7b4cf6218dc549ace2e78cc287d6bae">  169</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structClone__Task.html#ae7b4cf6218dc549ace2e78cc287d6bae">m_ignore_sync</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">  /** Counter to restart in different state */</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="structClone__Task.html#a47b28dcfcfd1fd9ed12ad977f4095471">  172</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structClone__Task.html#a47b28dcfcfd1fd9ed12ad977f4095471">m_debug_counter</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">  /** Allocated buffer */</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="structClone__Task.html#a7a8d46a9287e6f7231a8d1032f69a020">  176</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structClone__Task.html#a7a8d46a9287e6f7231a8d1032f69a020">m_current_buffer</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  /** Allocated buffer length */</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="structClone__Task.html#a6a853569d53110a146b980249f80a7cc">  179</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structClone__Task.html#a6a853569d53110a146b980249f80a7cc">m_buffer_alloc_len</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">  /** Data transferred for current chunk in bytes */</span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="structClone__Task.html#a3004cc184968899b7a9f9adf000efd7c">  182</a></span>&#160;  uint32_t <a class="code" href="structClone__Task.html#a3004cc184968899b7a9f9adf000efd7c">m_data_size</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;};</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keyword">class </span><a class="code" href="classClone__Handle.html">Clone_Handle</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">/** Task manager for manging the tasks for a clone operation */</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html">  188</a></span>&#160;<span class="keyword">class </span><a class="code" href="classClone__Task__Manager.html">Clone_Task_Manager</a> {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">  /** Initialize task manager for clone handle</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">  @param[in]    snapshot        snapshot */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="audit__api__message__emit_8cc.html#a9ab62ce08f07c43d34e2d46dcc0f5f68">init</a>(<a class="code" href="classClone__Snapshot.html">Clone_Snapshot</a> *snapshot);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">  /** Get task state mutex</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">  @return state mutex */</span></div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a9771cf3edb4ed32a8b04f7e27524a4fe">  196</a></span>&#160;  ib_mutex_t *<a class="code" href="classClone__Task__Manager.html#a9771cf3edb4ed32a8b04f7e27524a4fe">get_mutex</a>() { <span class="keywordflow">return</span> (&amp;m_state_mutex); }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">  /** Handle any error raised by concurrent tasks.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">  @param[in]    raise_error     raise error if true</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordtype">int</span> handle_error_other_task(<span class="keywordtype">bool</span> raise_error);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">  /** Set error number</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">  @param[in]    err             error number</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">  @param[in]    file_name       associated file name if any  */</span></div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a82a4da1c2e9f1dee43d5e76860fe84bf">  206</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classClone__Task__Manager.html#a82a4da1c2e9f1dee43d5e76860fe84bf">set_error</a>(<span class="keywordtype">int</span> <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *file_name) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="ut0mutex_8h.html#aba9ab29617d78284418d99bc1a06865d">mutex_enter</a>(&amp;m_state_mutex);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">ib::info</a>(ER_IB_CLONE_OPERATION) &lt;&lt; <span class="stringliteral">&quot;Clone Set Error code: &quot;</span> &lt;&lt; err</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                    &lt;&lt; <span class="stringliteral">&quot; Saved Error code: &quot;</span> &lt;&lt; m_saved_error;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">/* Override any network error as we should not be waiting for restart</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">    if other errors have occurred. */</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (m_saved_error == 0 || <a class="code" href="group__Replication.html#ga2fc76e97a75b02d55803a3c4aa14f5a7">is_network_error</a>(m_saved_error)) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      m_saved_error = <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">if</span> (file_name != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(m_err_file_name != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(m_err_file_len != 0);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        strncpy(m_err_file_name, file_name, m_err_file_len);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="ut0mutex_8h.html#aa55ad8b49fb970ed42f72485f53e1547">mutex_exit</a>(&amp;m_state_mutex);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">  /** Add a task to task manager</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">  @param[in]    thd     server THD object</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">  @param[in]    ref_loc reference locator from remote</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">  @param[in]    loc_len locator length in bytes</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">  @param[out]   task_id task identifier</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordtype">int</span> add_task(<a class="code" href="classTHD.html">THD</a> *thd, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ref_loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> loc_len, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;task_id);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">  /** Drop task from task manager</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">  @param[in]    thd             server THD object</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">  @param[in]    task_id         current task ID</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">  @param[out]   is_master       true, if master task</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">  @return true if needs to wait for re-start */</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordtype">bool</span> drop_task(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> task_id, <span class="keywordtype">bool</span> &amp;is_master);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">  /** Reset chunk information for task</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">  @param[in]    task    current task */</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#af24c8dc24c80cc44d1b0c1cc31d74b15">  245</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classClone__Task__Manager.html#af24c8dc24c80cc44d1b0c1cc31d74b15">reset_chunk</a>(<a class="code" href="structClone__Task.html">Clone_Task</a> *task) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="ut0mutex_8h.html#a7eccf8a96f24ab7f4012bb203640cf17">mutex_own</a>(&amp;m_state_mutex));</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">/* Reset current processing chunk */</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    task-&gt;<a class="code" href="structClone__Task.html#a4efcccea37165a8c1feb99f887678cb4">m_task_meta</a>.<a class="code" href="structClone__Task__Meta.html#a68e9290b58c1d17ee9f0369b4a202022">m_chunk_num</a> = 0;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    task-&gt;<a class="code" href="structClone__Task.html#a4efcccea37165a8c1feb99f887678cb4">m_task_meta</a>.<a class="code" href="structClone__Task__Meta.html#a3d3bfc9e53ab63a005793af8f9b4b62e">m_block_num</a> = 0;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (task-&gt;<a class="code" href="structClone__Task.html#a3004cc184968899b7a9f9adf000efd7c">m_data_size</a> &gt; 0) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(get_state() != <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2a6a608cd2d97a992d99b5ac64e993c37a">CLONE_SNAPSHOT_NONE</a>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(get_state() != <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2aafabb5179c4b5d9bbf01825af998188a">CLONE_SNAPSHOT_INIT</a>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(get_state() != <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2a6959608a12f9dde1dc13204cae34b9ed">CLONE_SNAPSHOT_DONE</a>);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keyword">auto</span> &amp;monitor = m_clone_snapshot-&gt;get_clone_monitor();</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      monitor.update_work(task-&gt;<a class="code" href="structClone__Task.html#a3004cc184968899b7a9f9adf000efd7c">m_data_size</a>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    task-&gt;<a class="code" href="structClone__Task.html#a3004cc184968899b7a9f9adf000efd7c">m_data_size</a> = 0;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">  /** Get task by index</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">  @param[in]    index   task index</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">  @return task */</span></div><div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a4a866b92d137ed0023a6be9e3dda944e">  268</a></span>&#160;  <a class="code" href="structClone__Task.html">Clone_Task</a> *<a class="code" href="classClone__Task__Manager.html#a4a866b92d137ed0023a6be9e3dda944e">get_task_by_index</a>(<a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keyword">auto</span> task = (m_clone_tasks + <a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(task-&gt;m_task_state == <a class="code" href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997af1b0357e5fecbed9686edc2aca7cc5d7">CLONE_TASK_ACTIVE</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">return</span> (task);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">  /** Reserve next chunk from task manager. Called by individual tasks.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">  @param[in]    task            requesting task</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">  @param[out]   ret_chunk       reserved chunk number</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">  @param[out]   ret_block       start block number</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">                                  &#39;0&#39; if no more chunk.</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordtype">int</span> reserve_next_chunk(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, uint32_t &amp;ret_chunk,</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                         uint32_t &amp;ret_block);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">  /** Set current chunk and block information</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">  @param[in,out]        task            requesting task</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">  @param[in]    new_meta        updated task metadata</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordtype">int</span> set_chunk(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="structClone__Task__Meta.html">Clone_Task_Meta</a> *new_meta);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">  /** Track any incomplete chunks handled by the task</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">  @param[in,out]        task    current task */</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordtype">void</span> add_incomplete_chunk(<a class="code" href="structClone__Task.html">Clone_Task</a> *task);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">  /** Initialize task manager for current state */</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordtype">void</span> init_state();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">  /** Reinitialize state using locator</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">  @param[in]    loc     locator from remote client</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">  @param[in]    loc_len locator length in bytes */</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordtype">void</span> reinit_copy_state(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> loc_len);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">  /** Reinitialize state using locator</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">  @param[in]    ref_loc         current locator</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">  @param[in]    ref_len         current locator length</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">  @param[out]   new_loc         new locator to be sent to remote server</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">  @param[out]   new_len         length of new locator</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">  @param[in,out]        alloc_len       allocated length for locator buffer */</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordtype">void</span> reinit_apply_state(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ref_loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ref_len, <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&amp;new_loc,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                          <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;new_len, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;alloc_len);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">  /** Reset state transition information */</span></div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a2b7968d40eb39ce7503198e19590cf2e">  312</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classClone__Task__Manager.html#a2b7968d40eb39ce7503198e19590cf2e">reset_transition</a>() {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    m_num_tasks_transit = 0;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    m_num_tasks_finished = 0;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    m_next_state = <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2a6a608cd2d97a992d99b5ac64e993c37a">CLONE_SNAPSHOT_NONE</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">  /** Reset error information */</span></div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a57e998e764bda6504e5a682676056334">  319</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classClone__Task__Manager.html#a57e998e764bda6504e5a682676056334">reset_error</a>() {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    m_saved_error = 0;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    strncpy(m_err_file_name, <span class="stringliteral">&quot;Clone File&quot;</span>, m_err_file_len);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">  /** Get current clone state</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">  @return clone state */</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#ad822294bc58ee74007866adb43de14b3">  326</a></span>&#160;  <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2">Snapshot_State</a> <a class="code" href="classClone__Task__Manager.html#ad822294bc58ee74007866adb43de14b3">get_state</a>() { <span class="keywordflow">return</span> (m_current_state); }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">  /** Check if in state transition</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">  @return true if state transition is in progress */</span></div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#ac1b7b2f25ea63ad198c591a7296a0ef9">  330</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#ac1b7b2f25ea63ad198c591a7296a0ef9">in_transit_state</a>() { <span class="keywordflow">return</span> (m_next_state != <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2a6a608cd2d97a992d99b5ac64e993c37a">CLONE_SNAPSHOT_NONE</a>); }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">  /** Get attached snapshot</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">  @return snapshot */</span></div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a8c51b708aa6e839ba0eb896c2ae00740">  334</a></span>&#160;  <a class="code" href="classClone__Snapshot.html">Clone_Snapshot</a> *<a class="code" href="classClone__Task__Manager.html#a8c51b708aa6e839ba0eb896c2ae00740">get_snapshot</a>() { <span class="keywordflow">return</span> (m_clone_snapshot); }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">  /** Move to next snapshot state. Each task must call this after</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">  no more chunk is left in current state. The state can be changed</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">  only after all tasks have finished transferring the reserved chunks.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">  @param[in]    task            clone task</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">  @param[in]    state_desc      descriptor for next state</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">  @param[in]    new_state       next state to move to</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">  @param[in]    cbk             alert callback for long wait</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">  @param[out]   num_wait        unfinished tasks in current state</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordtype">int</span> change_state(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="structClone__Desc__State.html">Clone_Desc_State</a> *state_desc,</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                   <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2">Snapshot_State</a> new_state, <a class="code" href="clone0monitor_8h.html#a2e0c5f071f51db5e1b358916807c5694">Clone_Alert_Func</a> cbk,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                   <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;num_wait);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">  /** Check if state transition is over and all tasks moved to next state</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">  @param[in]    task            requesting task</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">  @param[in]    new_state       next state to move to</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">  @param[in]    exit_on_wait    exit from transition if needs to wait</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">  @param[in]    in_err          input error if already occurred</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">  @param[out]   num_wait        number of tasks to move to next state</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">int</span> check_state(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2">Snapshot_State</a> new_state, <span class="keywordtype">bool</span> exit_on_wait,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                  <span class="keywordtype">int</span> in_err, uint32_t &amp;num_wait);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">  /** Check if needs to send state metadata once</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">  @param[in]    task    current task</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">  @return true if needs to send state metadata */</span></div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a0226e02bdbfb71b17b6083fd8b79b108">  362</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#a0226e02bdbfb71b17b6083fd8b79b108">is_restart_metadata</a>(<a class="code" href="structClone__Task.html">Clone_Task</a> *task) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (task-&gt;<a class="code" href="structClone__Task.html#ab7e8f96fd1332b3856c65a7e0920a780">m_is_master</a> &amp;&amp; m_send_state_meta) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      m_send_state_meta = <span class="keyword">false</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">false</span>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">  /** @return true if file metadata is transferred */</span></div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#aa7e94c3115590567065b213ac0e4c5b1">  372</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#aa7e94c3115590567065b213ac0e4c5b1">is_file_metadata_transferred</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> (m_transferred_file_meta);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">  /** Set sub-state: all file metadata is transferred */</span></div><div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#aac330ece7ed1d2215ae0ade7494fcbac">  377</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classClone__Task__Manager.html#aac330ece7ed1d2215ae0ade7494fcbac">set_file_meta_transferred</a>() { m_transferred_file_meta = <span class="keyword">true</span>; }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">  /** Mark state finished for current task</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">  @param[in]    task    current task</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordtype">int</span> finish_state(<a class="code" href="structClone__Task.html">Clone_Task</a> *task);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">  /** Set acknowledged state</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">  @param[in]    state_desc      State descriptor */</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordtype">void</span> ack_state(<span class="keyword">const</span> <a class="code" href="structClone__Desc__State.html">Clone_Desc_State</a> *state_desc);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">  /** Wait for acknowledgement</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">  @param[in]    clone           parent clone handle</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">  @param[in]    task            current task</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">  @param[in]    callback        user callback interface</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordtype">int</span> wait_ack(<a class="code" href="classClone__Handle.html">Clone_Handle</a> *<a class="code" href="window_8cc.html#ab18bcb21ff8541fc5fef0f12ddc372aa">clone</a>, <a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">  /** Check if state ACK is needed</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">  @param[in]    state_desc      State descriptor</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">  @return true if need to wait for ACK from remote */</span></div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#aaa34b04d8bb7da05d85cd3cd64ace13a">  398</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#aaa34b04d8bb7da05d85cd3cd64ace13a">check_ack</a>(<span class="keyword">const</span> <a class="code" href="structClone__Desc__State.html">Clone_Desc_State</a> *state_desc) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="ut0mutex_8h.html#aba9ab29617d78284418d99bc1a06865d">mutex_enter</a>(&amp;m_state_mutex);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">/* Check if state is already acknowledged */</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span> (m_ack_state == state_desc-&gt;<a class="code" href="structClone__Desc__State.html#a3a2ddeedcd8ddf8cc278e96898a5e7d6">m_state</a>) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(m_restart_count &gt; 0);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      ret = <span class="keyword">false</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      ++m_num_tasks_finished;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="ut0mutex_8h.html#aa55ad8b49fb970ed42f72485f53e1547">mutex_exit</a>(&amp;m_state_mutex);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">return</span> (ret);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">  /** Check if clone is restarted after failure</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">  @return true if restarted */</span></div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a2dbd9f81f67c3c4474cb77ec1c3e21cf">  417</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#a2dbd9f81f67c3c4474cb77ec1c3e21cf">is_restarted</a>() { <span class="keywordflow">return</span> (m_restart_count &gt; 0); }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">  /** Allocate buffers for current task</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">  @param[in,out]        task    current task</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="item__strfunc_8cc.html#ad354a0cf5326155e6233ae0e09593d27">alloc_buffer</a>(<a class="code" href="structClone__Task.html">Clone_Task</a> *task);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">  /** Wait during clone operation</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">  @param[in]    chunk_num       chunk number to process</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">  @param[in]    task            current task */</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordtype">void</span> debug_wait(<a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> chunk_num, <a class="code" href="structClone__Task.html">Clone_Task</a> *task);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">  /** Force restart clone operation by raising network error</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">  @param[in]    task            current task</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">  @param[in]    in_err          any err that has occurred</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">  @param[in]    restart_count   restart counter</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordtype">int</span> debug_restart(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <span class="keywordtype">int</span> in_err, <span class="keywordtype">int</span> restart_count);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">  /** Check if we need to wait before adding current task</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">  @param[in]    ref_loc reference locator from remote</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">  @param[in]    loc_len reference locator length</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">  @return true, if needs to wait */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordtype">bool</span> wait_before_add(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ref_loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> loc_len);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">  /** Check if network error</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">  @param[in]    err     error code</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">  @return true if network error */</span></div><div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a3dbbd43394883fa746354c623d764bca">  449</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#a3dbbd43394883fa746354c623d764bca">is_network_error</a>(<span class="keywordtype">int</span> <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (err == ER_NET_ERROR_ON_WRITE || err == ER_NET_READ_ERROR ||</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        err == ER_NET_WRITE_INTERRUPTED || err == ER_NET_READ_INTERRUPTED ||</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        err == ER_NET_WAIT_ERROR) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">false</span>);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">  /** Reserve free task from task manager and initialize</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">  @param[in]    thd     server THD object</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">  @param[out]   task_id initialized task ID */</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordtype">void</span> reserve_task(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;task_id);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">  /** Check if we should process incomplete chunk next. Incomplete</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">  chunks could be there after a re-start from network failure. We always</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">  process the chunks in order and need to choose accordingly.</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  @return if need to process incomplete chunk next. */</span></div><div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a682acdf67891f70bfb7277351822a416">  467</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#a682acdf67891f70bfb7277351822a416">process_inclomplete_chunk</a>() {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">/* 1. Check if there is any incomplete chunk. */</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">auto</span> &amp;chunks = m_chunk_info.m_incomplete_chunks;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (chunks.empty()) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">false</span>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">/* 2. Check if all complete chunks are processed. */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keyword">auto</span> min_complete_chunk = m_chunk_info.m_min_unres_chunk;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (min_complete_chunk &gt; m_chunk_info.m_total_chunks) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="comment">/* 3. Compare the minimum chunk number for complete and incomplete chunk */</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keyword">auto</span> it = chunks.begin();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keyword">auto</span> min_incomplete_chunk = it-&gt;first;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(min_complete_chunk != min_incomplete_chunk);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">return</span> (min_incomplete_chunk &lt; min_complete_chunk);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">  /** Get next in complete chunk if any</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">  @param[out]   block_num       first block number in chunk</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">  @return incomplete chunk number */</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  uint32_t get_next_incomplete_chunk(<a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a> &amp;block_num);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">  /** Get next unreserved chunk</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">  @return chunk number */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  uint32_t get_next_chunk();</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">  /** Mutex synchronizing access by concurrent tasks */</span></div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#aefcfd414a5b5b71a2ed2133f279ec336">  499</a></span>&#160;  ib_mutex_t <a class="code" href="classClone__Task__Manager.html#aefcfd414a5b5b71a2ed2133f279ec336">m_state_mutex</a>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">  /** Finished and incomplete chunk information */</span></div><div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a33b59e5993f1e2750846743f1a419817">  502</a></span>&#160;  <a class="code" href="structChunk__Info.html">Chunk_Info</a> <a class="code" href="classClone__Task__Manager.html#a33b59e5993f1e2750846743f1a419817">m_chunk_info</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">  /** Clone task array */</span></div><div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a73a3e83e0124ec8cecd55bdfae8fc5e3">  505</a></span>&#160;  <a class="code" href="structClone__Task.html">Clone_Task</a> m_clone_tasks[<a class="code" href="clone0desc_8h.html#a0e699c209c1ac59224a4780558e57df2">CLONE_MAX_TASKS</a>];</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">  /** Current number of tasks */</span></div><div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a7eda5ce876f2ada582d4e1cc8856ea86">  508</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Task__Manager.html#a7eda5ce876f2ada582d4e1cc8856ea86">m_num_tasks</a>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">  /** Number of tasks finished current state */</span></div><div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a3b237c0a0db8d13c4335594fa6f8e40e">  511</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Task__Manager.html#a3b237c0a0db8d13c4335594fa6f8e40e">m_num_tasks_finished</a>;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">  /** Number of tasks in transit state */</span></div><div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a6d85f8c60867d0f4597aa62ef19b0f40">  514</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Task__Manager.html#a6d85f8c60867d0f4597aa62ef19b0f40">m_num_tasks_transit</a>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">  /** Number of times clone is restarted */</span></div><div class="line"><a name="l00517"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#abd8c598774afd6b79c2d8c06b76f2d22">  517</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Task__Manager.html#abd8c598774afd6b79c2d8c06b76f2d22">m_restart_count</a>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">  /** Acknowledged state from client */</span></div><div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a8e5e19a8bbbee4f0a4cda7587cec1145">  520</a></span>&#160;  <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2">Snapshot_State</a> <a class="code" href="classClone__Task__Manager.html#a8e5e19a8bbbee4f0a4cda7587cec1145">m_ack_state</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">  /** Current state for clone */</span></div><div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#ac6a0ea504bfaad967d2a665460fda742">  523</a></span>&#160;  <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2">Snapshot_State</a> <a class="code" href="classClone__Task__Manager.html#ac6a0ea504bfaad967d2a665460fda742">m_current_state</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">  /** Next state: used during state transfer */</span></div><div class="line"><a name="l00526"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#ab57f9da2f713065eaf385df4b008bc40">  526</a></span>&#160;  <a class="code" href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2">Snapshot_State</a> <a class="code" href="classClone__Task__Manager.html#ab57f9da2f713065eaf385df4b008bc40">m_next_state</a>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">/* Sub state: File metadata is transferred */</span></div><div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a2ff0cdd9f17a6b2b4df19a1e723e27c6">  529</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#a2ff0cdd9f17a6b2b4df19a1e723e27c6">m_transferred_file_meta</a>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">  /** Send state metadata before starting: Used for restart */</span></div><div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a38c4a97c67a4a7568e6b3371533be424">  532</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Task__Manager.html#a38c4a97c67a4a7568e6b3371533be424">m_send_state_meta</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">  /** Save any error raised by a task */</span></div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a76beec79d7a9a8668a699d2b3441fbd1">  535</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classClone__Task__Manager.html#a76beec79d7a9a8668a699d2b3441fbd1">m_saved_error</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">  /** File name related to the saved error */</span></div><div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#ab71a0f3ea0720c08be084e3f5e54a3ab">  538</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="classClone__Task__Manager.html#ab71a0f3ea0720c08be084e3f5e54a3ab">m_err_file_name</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">  /** File name length */</span></div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#adedce69712abc7663e3d6ae81bc383bd">  541</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classClone__Task__Manager.html#adedce69712abc7663e3d6ae81bc383bd">m_err_file_len</a>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">  /** Attached snapshot handle */</span></div><div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="classClone__Task__Manager.html#a5b60364beffdf051c32d4ac886cecac4">  544</a></span>&#160;  <a class="code" href="classClone__Snapshot.html">Clone_Snapshot</a> *<a class="code" href="classClone__Task__Manager.html#a5b60364beffdf051c32d4ac886cecac4">m_clone_snapshot</a>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;};</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">/** Clone Handle for copying or applying data */</span></div><div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="classClone__Handle.html">  548</a></span>&#160;<span class="keyword">class </span><a class="code" href="classClone__Handle.html">Clone_Handle</a> {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">  /** Construct clone handle</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">  @param[in]    handle_type     clone handle type</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">  @param[in]    clone_version   clone version</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">  @param[in]    clone_index     index in clone array */</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="classClone__Handle.html">Clone_Handle</a>(<a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a> handle_type, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> clone_version,</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;               <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> clone_index);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">  /** Destructor: Detach from snapshot */</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  ~<a class="code" href="classClone__Handle.html">Clone_Handle</a>();</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">  /** Initialize clone handle</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">  @param[in]    ref_loc         reference locator</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">  @param[in]    ref_len         reference locator length</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">  @param[in]    type            clone type</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">  @param[in]    data_dir        data directory for apply</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="audit__api__message__emit_8cc.html#a9ab62ce08f07c43d34e2d46dcc0f5f68">init</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ref_loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ref_len, <a class="code" href="sql_2handler_8h.html#a73ef56501f204f36a12bc62de984ffc0">Ha_clone_type</a> <a class="code" href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">type</a>,</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;           <span class="keyword">const</span> <span class="keywordtype">char</span> *data_dir);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">  /** Attach to the clone handle */</span></div><div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a87b05281f2214c2b7a68e1c73ef553aa">  570</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classClone__Handle.html#a87b05281f2214c2b7a68e1c73ef553aa">attach</a>() { ++m_ref_count; }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">  /** Detach from the clone handle</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">  @return reference count */</span></div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a8df77d0eee99848fe81279abad1be7c9">  574</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Handle.html#a8df77d0eee99848fe81279abad1be7c9">detach</a>() {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a>(m_ref_count &gt; 0);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    --m_ref_count;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">return</span> (m_ref_count);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">  /** Get locator for the clone handle.</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">  @param[out]   loc_len serialized locator length</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">  @return serialized clone locator */</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *get_locator(<a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;loc_len);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">  /** @return clone data directory */</span></div><div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a2ea53c8a85de6027ed8a77656fc41fe1">  587</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classClone__Handle.html#a2ea53c8a85de6027ed8a77656fc41fe1">get_datadir</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (m_clone_dir); }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">  /** @return true, if clone is replacing current data directory. */</span></div><div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a85b61826cad8c2c465d99cf774857c6c">  590</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#a85b61826cad8c2c465d99cf774857c6c">replace_datadir</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">return</span> (!is_copy_clone() &amp;&amp; m_clone_dir == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">  /** Build locator descriptor for the clone handle</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">  @param[out]   loc_desc        locator descriptor */</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordtype">void</span> build_descriptor(<a class="code" href="structClone__Desc__Locator.html">Clone_Desc_Locator</a> *loc_desc);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">  /** Add a task to clone handle</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">  @param[in]    thd     server THD object</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">  @param[in]    ref_loc reference locator from remote</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">  @param[in]    ref_len reference locator length</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">  @param[out]   task_id task identifier</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="classClone__Handle.html#af9277b82873cd209907729571fe72581">  604</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classClone__Handle.html#af9277b82873cd209907729571fe72581">add_task</a>(<a class="code" href="classTHD.html">THD</a> *thd, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ref_loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> ref_len, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;task_id) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span> (m_clone_task_manager.add_task(thd, ref_loc, ref_len, task_id));</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">  /** Drop task from clone handle</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">  @param[in]    thd             server THD object</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">  @param[in]    task_id         current task ID</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">  @param[in]    in_err          input error</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">  @param[out]   is_master       true, if master task</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">  @return true if needs to wait for re-start */</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordtype">bool</span> drop_task(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> task_id, <span class="keywordtype">int</span> in_err, <span class="keywordtype">bool</span> &amp;is_master);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">  /** Save current error number</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">  @param[in]    err     error number */</span></div><div class="line"><a name="l00618"></a><span class="lineno"><a class="line" href="classClone__Handle.html#acef026a83bbd9f6e7053c6ebba2b986a">  618</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classClone__Handle.html#acef026a83bbd9f6e7053c6ebba2b986a">save_error</a>(<span class="keywordtype">int</span> <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (err != 0) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      m_clone_task_manager.set_error(err, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">  /** Check for error from other tasks and DDL</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">  @param[in,out]        thd     session THD</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="classClone__Handle.html#afb9e0074092400fd8be35b2679115508">  627</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classClone__Handle.html#afb9e0074092400fd8be35b2679115508">check_error</a>(<a class="code" href="classTHD.html">THD</a> *thd) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordtype">bool</span> has_thd = (thd != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a> = m_clone_task_manager.handle_error_other_task(has_thd);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">/* Save any error reported */</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    save_error(<a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">  /** @return true if any task is interrupted */</span></div><div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a5cffeaf17bc3a36921967f8025529249">  636</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#a5cffeaf17bc3a36921967f8025529249">is_interrupted</a>() {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a> = m_clone_task_manager.handle_error_other_task(<span class="keyword">false</span>);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a> == ER_QUERY_INTERRUPTED);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">  /** Get clone handle index in clone array</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">  @return array index */</span></div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="classClone__Handle.html#af89296ceff8dffcd6a4b355d742ffb52">  643</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Handle.html#af89296ceff8dffcd6a4b355d742ffb52">get_index</a>() { <span class="keywordflow">return</span> (m_clone_arr_index); }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">  /** Get clone data descriptor version</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">  @return version */</span></div><div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="classClone__Handle.html#ae321f40ba249ae07a382e9eaa40c28c4">  647</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Handle.html#ae321f40ba249ae07a382e9eaa40c28c4">get_version</a>() { <span class="keywordflow">return</span> (m_clone_desc_version); }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">  /** Check if it is copy clone</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">  @return true if copy clone handle */</span></div><div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a3a20a2fd5d0b8e8c8d3954f66662e183">  651</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#a3a20a2fd5d0b8e8c8d3954f66662e183">is_copy_clone</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (m_clone_handle_type == <a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739ccad817c8c58aa8871bd6d12bcec378d2cf">CLONE_HDL_COPY</a>); }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">  /** Check if clone type matches</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">  @param[in]    other_handle_type       type to match with</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">  @return true if type matches with clone handle type */</span></div><div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a0916ebc0bdf431419495d4799705031c">  656</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#a0916ebc0bdf431419495d4799705031c">match_hdl_type</a>(<a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a> other_handle_type) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">return</span> (m_clone_handle_type == other_handle_type);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">  /** Set current clone state</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">  @param[in]    state   clone handle state */</span></div><div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a628523a4eeea816b4288ba7ad11c0253">  662</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classClone__Handle.html#a628523a4eeea816b4288ba7ad11c0253">set_state</a>(<a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462">Clone_Handle_State</a> state) { m_clone_handle_state = state; }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">  /** Check if clone state is active</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">  @return true if in active state */</span></div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a32ac0815c17fa31b2d263cff6e1bbd63">  666</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#a32ac0815c17fa31b2d263cff6e1bbd63">is_active</a>() { <span class="keywordflow">return</span> (m_clone_handle_state == <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a9fe408c44204945674f4441f6af7c452">CLONE_STATE_ACTIVE</a>); }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">  /** Check if clone is initialized</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">  @return true if in initial state */</span></div><div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a86f739068ea2913e6d773fd45ead41a3">  670</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#a86f739068ea2913e6d773fd45ead41a3">is_init</a>() { <span class="keywordflow">return</span> (m_clone_handle_state == <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a15a782f2367c11ca3a9ee11a3f9c4eec">CLONE_STATE_INIT</a>); }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">  /** Check if clone is idle waiting for restart</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">  @return true if clone is in idle state */</span></div><div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a828b6bfb8ed2ccc35c8d7f261b4cbe12">  674</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#a828b6bfb8ed2ccc35c8d7f261b4cbe12">is_idle</a>() { <span class="keywordflow">return</span> (m_clone_handle_state == <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a5992a4b64ad753ff55d5dc3199694727">CLONE_STATE_IDLE</a>); }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">  /** Check if clone is aborted</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">  @return true if clone is aborted */</span></div><div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="classClone__Handle.html#af9c1174c2bf67655aa6778e274c11783">  678</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#af9c1174c2bf67655aa6778e274c11783">is_abort</a>() { <span class="keywordflow">return</span> (m_clone_handle_state == <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a7410d9f301e973ced01602bb530b012c">CLONE_STATE_ABORT</a>); }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">  /** Restart copy after a network failure</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">  @param[in]    thd     server THD object</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">  @param[in]    loc     locator wit copy state from remote client</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">  @param[in]    loc_len locator length in bytes</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordtype">int</span> restart_copy(<a class="code" href="classTHD.html">THD</a> *thd, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> loc_len);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">  /** Build locator with current state and restart apply</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">  @param[in]    thd     server THD object</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">  @param[in,out]        loc     loctor with current state information</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">  @param[in,out]        loc_len locator length in bytes</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordtype">int</span> restart_apply(<a class="code" href="classTHD.html">THD</a> *thd, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&amp;loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;loc_len);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">  /** Transfer snapshot data via callback</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">  @param[in]    thd             server THD object</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">  @param[in]    task_id         current task ID</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">  @param[in]    callback        user callback interface</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">copy</a>(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> task_id, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">  /** Apply snapshot data received via callback</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">  @param[in]    thd             server THD</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">  @param[in]    task_id         current task ID</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">  @param[in]    callback        user callback interface</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordtype">int</span> apply(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> task_id, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">  /** Send keep alive while during long wait</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">  @param[in]    task            task that is sending the information</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordtype">int</span> send_keep_alive(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">  /** Check if enough space is there to clone.</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">  @return error if not enough space */</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordtype">int</span> check_space();</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">  /** Create clone data directory.</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordtype">int</span> create_clone_directory();</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">  /** Display clone progress</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">  @param[in]    cur_chunk       current chunk number</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">  @param[in]    max_chunk       total number of chunks</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">  @param[in,out]        percent_done    percentage completed</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">  @param[in,out]        disp_time       last displayed time */</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordtype">void</span> display_progress(uint32_t cur_chunk, uint32_t max_chunk,</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                        uint32_t &amp;percent_done,</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                        <a class="code" href="ut0ut_8h.html#a3e075761a4687069aecd2e080344189b">ib_time_monotonic_ms_t</a> &amp;disp_time);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">  /** Open file for the task</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">  @param[in]    task            clone task</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">  @param[in]    file_meta       file information</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">  @param[in]    file_type       file type (data, log etc.)</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">  @param[in]    create_file     create if not present</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">  @param[in]    set_and_close   set size and close</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="mysqltest_8cc.html#a4795fabad9773489eb36acaf44cb0395">open_file</a>(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="structClone__File__Meta.html">Clone_File_Meta</a> *file_meta, ulint file_type,</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <span class="keywordtype">bool</span> <a class="code" href="query__result_8cc.html#a1355c43f29b5a79b5a3697b79e76d051">create_file</a>, <span class="keywordtype">bool</span> set_and_close);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">  /** Close file for the task</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">  @param[in]    task    clone task</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordtype">int</span> close_file(<a class="code" href="structClone__Task.html">Clone_Task</a> *task);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">  /** Callback providing the file reference and data length to copy</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">  @param[in]    cbk     callback interface</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">  @param[in]    task    clone task</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">  @param[in]    len     data length</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">  @param[in]    buf_cbk invoke buffer callback</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">  @param[in]    offset  file offset</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">  @param[in]    name    file name where func invoked</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">  @param[in]    line    line where the func invoked</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordtype">int</span> file_callback(<a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *cbk, <a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> len, <span class="keywordtype">bool</span> buf_cbk,</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    uint64_t offset</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;#ifdef UNIV_PFS_IO</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    ,</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> line</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;#endif <span class="comment">/* UNIV_PFS_IO */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  );</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">  /** Move to next state</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">  @param[in]    task            clone task</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">  @param[in]    state_desc      descriptor for next state to move to</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordtype">int</span> move_to_next_state(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback,</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                         <a class="code" href="structClone__Desc__State.html">Clone_Desc_State</a> *state_desc);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">  /** Send current state information via callback</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">  @param[in]    task            task that is sending the information</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">  @param[in]    is_start        if it is the start of current state</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keywordtype">int</span> send_state_metadata(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback,</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                          <span class="keywordtype">bool</span> is_start);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">  /** Send current task information via callback</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">  @param[in]    task            task that is sending the information</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordtype">int</span> send_task_metadata(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">  /** Send all file information via callback</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">  @param[in]    task            task that is sending the information</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordtype">int</span> send_all_file_metadata(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">  /** Send current file information via callback</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">  @param[in]    task            task that is sending the information</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">  @param[in]    file_meta       file meta information</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordtype">int</span> send_file_metadata(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="structClone__File__Meta.html">Clone_File_Meta</a> *file_meta,</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                         <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">  /** Send cloned data via callback</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">  @param[in]    task            task that is sending the information</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">  @param[in]    file_meta       file information</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">  @param[in]    offset          file offset</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">  @param[in]    buffer          data buffer or NULL if send from file</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">  @param[in]    size            data buffer size</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordtype">int</span> send_data(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="structClone__File__Meta.html">Clone_File_Meta</a> *file_meta,</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                ib_uint64_t offset, <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="test__sql__9__sessions_8cc.html#ac242a6dca06b33213957c913bd72414c">buffer</a>, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> size,</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">  /** Process a data chunk and send data blocks via callback</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">  @param[in]    task            task that is sending the information</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">  @param[in]    chunk_num       chunk number to process</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">  @param[in]    block_num       start block number</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordtype">int</span> process_chunk(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, uint32_t chunk_num, uint32_t block_num,</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                    <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">  /** Create apply task based on task metadata in callback</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">  @param[in]    task            current task</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordtype">int</span> apply_task_metadata(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">  /** Move to next state based on state metadata and set</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">  state information</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">  @param[in]            task            current task</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">  @param[in,out]        callback        callback interface</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">  @param[in,out]        state_desc      clone state descriptor</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordtype">int</span> ack_state_metadata(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback,</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                         <a class="code" href="structClone__Desc__State.html">Clone_Desc_State</a> *state_desc);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">  /** Notify state change via callback.</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">  @param[in]            task            current task</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">  @param[in,out]        callback        callback interface</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">  @param[in,out]        state_desc      clone state descriptor */</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordtype">void</span> notify_state_change(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback,</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                           <a class="code" href="structClone__Desc__State.html">Clone_Desc_State</a> *state_desc);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">  /** Move to next state based on state metadata and set</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">  state information</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">  @param[in]    task            current task</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordtype">int</span> apply_state_metadata(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">  /** Create file metadata based on callback</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">  @param[in]    task            current task</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordtype">int</span> apply_file_metadata(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">  /** Apply data received via callback</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">  @param[in]    task            current task</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordtype">int</span> apply_data(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">  /** Receive data from callback and apply</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">  @param[in]    task            task that is receiving the information</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">  @param[in]    offset          file offset for applying data</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">  @param[in]    file_size       updated file size</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">  @param[in]    size            data length in bytes</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">  @param[in]    callback        callback interface</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordtype">int</span> receive_data(<a class="code" href="structClone__Task.html">Clone_Task</a> *task, uint64_t offset, uint64_t <a class="code" href="mysql__config__editor_8cc.html#a14ba597917108e3c1937893de7c4ac0c">file_size</a>,</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                   uint32_t size, <a class="code" href="classHa__clone__cbk.html">Ha_clone_cbk</a> *callback);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">  /** Punch holes for multiple pages during apply.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">  @param[in]    file            file descriptor</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">  @param[in]    buffer          data buffer</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">  @param[in]    len             buffer length</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">  @param[in]    start_off       starting offset in file</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">  @param[in]    page_len        page length</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">  @param[in]    block_size      file system block size</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">  @return innodb error code */</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> punch_holes(<a class="code" href="os0file_8h.html#a63fac270d46d4a195e833a6672729041">os_file_t</a> <a class="code" href="namespacefile.html">file</a>, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *buffer, uint32_t len,</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                      uint64_t start_off, uint32_t page_len,</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                      uint32_t block_size);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">  /** Modify page encryption attribute and/or punch hole.</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">  @param[in]            task    task that is applying data</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">  @param[in]            offset  file offset for applying data</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">  @param[in,out]        buffer  data to apply</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">  @param[in]            buf_len data buffer length</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordtype">int</span> modify_and_write(<span class="keyword">const</span> <a class="code" href="structClone__Task.html">Clone_Task</a> *task, uint64_t offset,</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                       <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buffer, uint32_t buf_len);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">  /** Clone handle type: Copy, Apply */</span></div><div class="line"><a name="l00895"></a><span class="lineno"><a class="line" href="classClone__Handle.html#ae3347a0bf855789c524a0c09ded85149">  895</a></span>&#160;  <a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a> <a class="code" href="classClone__Handle.html#ae3347a0bf855789c524a0c09ded85149">m_clone_handle_type</a>;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">  /** Clone handle state */</span></div><div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="classClone__Handle.html#ad9f463079a21d9934b3507ac26310a72">  898</a></span>&#160;  <a class="code" href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462">Clone_Handle_State</a> <a class="code" href="classClone__Handle.html#ad9f463079a21d9934b3507ac26310a72">m_clone_handle_state</a>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">  /** Fixed locator for version negotiation. */</span></div><div class="line"><a name="l00901"></a><span class="lineno"><a class="line" href="classClone__Handle.html#afd90967eecae14828750be028d7faaee">  901</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> m_version_locator[<a class="code" href="clone0desc_8h.html#a927765bbc1fbd213fc508abdf495221a">CLONE_DESC_MAX_BASE_LEN</a>];</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">  /** Serialized locator */</span></div><div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a318cbfb2c011ab3a1dd74390b3c334a5">  904</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="classClone__Handle.html#a318cbfb2c011ab3a1dd74390b3c334a5">m_clone_locator</a>;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">  /** Locator length in bytes */</span></div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="classClone__Handle.html#ab9b806ba6042ef85eaaf6e8f1724e754">  907</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Handle.html#ab9b806ba6042ef85eaaf6e8f1724e754">m_locator_length</a>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">  /** Serialized Restart locator */</span></div><div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="classClone__Handle.html#ac895433d1908e6ed277774ec4c441368">  910</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="classClone__Handle.html#ac895433d1908e6ed277774ec4c441368">m_restart_loc</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">  /** Restart locator length in bytes */</span></div><div class="line"><a name="l00913"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a4de2e1b8ff866bda65a62bed107ea5c3">  913</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Handle.html#a4de2e1b8ff866bda65a62bed107ea5c3">m_restart_loc_len</a>;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">  /** Clone descriptor version in use */</span></div><div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a3a6b6b6f57576c19449b660f5d168ddd">  916</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Handle.html#a3a6b6b6f57576c19449b660f5d168ddd">m_clone_desc_version</a>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">  /** Index in global array */</span></div><div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="classClone__Handle.html#a60f4e583e81ac6189a2514811e649e5f">  919</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Handle.html#a60f4e583e81ac6189a2514811e649e5f">m_clone_arr_index</a>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">  /** Unique clone identifier */</span></div><div class="line"><a name="l00922"></a><span class="lineno"><a class="line" href="classClone__Handle.html#aa41597f4f035c8bb45caf9288f756116">  922</a></span>&#160;  ib_uint64_t <a class="code" href="classClone__Handle.html#aa41597f4f035c8bb45caf9288f756116">m_clone_id</a>;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">  /** Reference count */</span></div><div class="line"><a name="l00925"></a><span class="lineno"><a class="line" href="classClone__Handle.html#ab20fd15226122f3ddfbcb5801423adbc">  925</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Handle.html#ab20fd15226122f3ddfbcb5801423adbc">m_ref_count</a>;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">  /** Allow restart of clone operation after network failure */</span></div><div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="classClone__Handle.html#ae836765901609ad28b4367c5c19729e8">  928</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classClone__Handle.html#ae836765901609ad28b4367c5c19729e8">m_allow_restart</a>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">  /** Clone data directory */</span></div><div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="classClone__Handle.html#ab6ed783172b8f36b5e31e6dab5f66574">  931</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classClone__Handle.html#ab6ed783172b8f36b5e31e6dab5f66574">m_clone_dir</a>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">  /** Clone task manager */</span></div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="classClone__Handle.html#abcfbde56a63574d054cb4553e35362d5">  934</a></span>&#160;  <a class="code" href="classClone__Task__Manager.html">Clone_Task_Manager</a> <a class="code" href="classClone__Handle.html#abcfbde56a63574d054cb4553e35362d5">m_clone_task_manager</a>;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;};</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">/** Clone System */</span></div><div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="classClone__Sys.html">  938</a></span>&#160;<span class="keyword">class </span><a class="code" href="classClone__Sys.html">Clone_Sys</a> {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">  /** Construct clone system */</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <a class="code" href="classClone__Sys.html">Clone_Sys</a>();</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">  /** Destructor: Call during system shutdown */</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  ~<a class="code" href="classClone__Sys.html">Clone_Sys</a>();</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">  /** Create and add a new clone handle to clone system</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">  @param[in]    loc             locator</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">  @param[in]    hdl_type        handle type</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">  @param[out]   clone_hdl       clone handle</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordtype">int</span> add_clone(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *loc, <a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a> hdl_type,</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                <a class="code" href="classClone__Handle.html">Clone_Handle</a> *&amp;clone_hdl);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">  /** drop a clone handle from clone system</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">  @param[in]    clone_handle    Clone handle */</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordtype">void</span> drop_clone(<a class="code" href="classClone__Handle.html">Clone_Handle</a> *<a class="code" href="clone__handler_8cc.html#a9afac3cca6b652042af4225b04b17a03">clone_handle</a>);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">  /** Find if a clone is already running for the reference locator</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">  @param[in]    ref_loc         reference locator</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">  @param[in]    loc_len         reference locator length</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">  @param[in]    hdl_type        clone type</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">  @return clone handle if found, NULL otherwise */</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="classClone__Handle.html">Clone_Handle</a> *find_clone(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ref_loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> loc_len,</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                           <a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a> hdl_type);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">  /** Get the clone handle from locator by index</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">  @param[in]    loc     locator</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">  @param[in]    loc_len locator length in bytes</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">  @return clone handle */</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="classClone__Handle.html">Clone_Handle</a> *get_clone_by_index(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *loc, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> loc_len);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">  /** Get or create a snapshot for clone and attach</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">  @param[in]    hdl_type        handle type</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">  @param[in]    clone_type      clone type</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">  @param[in]    snapshot_id     snapshot identifier</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">  @param[in]    is_pfs_monitor  true, if needs PFS monitoring</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">  @param[out]   snapshot        clone snapshot</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keywordtype">int</span> attach_snapshot(<a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a> hdl_type, <a class="code" href="sql_2handler_8h.html#a73ef56501f204f36a12bc62de984ffc0">Ha_clone_type</a> clone_type,</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                      ib_uint64_t snapshot_id, <span class="keywordtype">bool</span> is_pfs_monitor,</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                      <a class="code" href="classClone__Snapshot.html">Clone_Snapshot</a> *&amp;snapshot);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">  /** Detach clone handle from snapshot</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">  @param[in]    snapshot        snapshot</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment">  @param[in]    hdl_type        handle type */</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordtype">void</span> detach_snapshot(<a class="code" href="classClone__Snapshot.html">Clone_Snapshot</a> *snapshot, <a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a> hdl_type);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">  /** Mark clone state to abort if no active clone. If force is set,</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">  abort all active clones and set state to abort.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">  @param[in]    force   force active clones to abort</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">  @return true if global state is set to abort successfully */</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="keywordtype">bool</span> mark_abort(<span class="keywordtype">bool</span> force);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">  /** Mark clone state to active if no other abort request */</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordtype">void</span> mark_active();</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">  /** Mark to indicate that new clone operations should wait.</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">  @return true, if no active clone and mark is set successfully */</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordtype">bool</span> mark_wait();</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">  /** Free the wait marker. */</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordtype">void</span> mark_free();</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">  /** Wait for marker to get freed.</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">  @param[in,out]        thd     user session</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">  @return, error if timeout */</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordtype">int</span> wait_for_free(<a class="code" href="classTHD.html">THD</a> *thd);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">  /** Get next unique ID</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">  @return unique ID */</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  ib_uint64_t get_next_id();</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">  /** Get clone sys mutex</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">  @return clone system mutex */</span></div><div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="classClone__Sys.html#ad3cc5d1f5cda4e416a97f9bdb15aa417"> 1015</a></span>&#160;  ib_mutex_t *<a class="code" href="classClone__Sys.html#ad3cc5d1f5cda4e416a97f9bdb15aa417">get_mutex</a>() { <span class="keywordflow">return</span> (&amp;m_clone_sys_mutex); }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">  /** Clone System state */</span></div><div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="classClone__Sys.html#ad2ca9abb3b3012773e5fe8fe40fe8ac9"> 1018</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="clone0clone_8h.html#a3c30cf46be2e0a1821f25caf56c7af00">Clone_Sys_State</a> <a class="code" href="classClone__Sys.html#ad2ca9abb3b3012773e5fe8fe40fe8ac9">s_clone_sys_state</a>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">  /** Number of active abort requests */</span></div><div class="line"><a name="l01021"></a><span class="lineno"><a class="line" href="classClone__Sys.html#ac27d94779d555d48e9a137657255cc03"> 1021</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Sys.html#ac27d94779d555d48e9a137657255cc03">s_clone_abort_count</a>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">  /** Number of active wait requests */</span></div><div class="line"><a name="l01024"></a><span class="lineno"><a class="line" href="classClone__Sys.html#a2c843f9683a34b5e2ed7c7cbe1629beb"> 1024</a></span>&#160;  <span class="keyword">static</span> <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Sys.html#a2c843f9683a34b5e2ed7c7cbe1629beb">s_clone_wait_count</a>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">  /** Function to check wait condition</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">  @param[in]    is_alert        print alert message</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">  @param[out]   result          true, if condition is satisfied</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l01030"></a><span class="lineno"><a class="line" href="classClone__Sys.html#abb5ab05435fedb6b41b4e72eaba4dfac"> 1030</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classClone__Sys.html#abb5ab05435fedb6b41b4e72eaba4dfac">Wait_Cond_Cbk_Func</a> = std::function&lt;int(bool is_alert, bool &amp;result)&gt;;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">  /** Wait till the condition is satisfied or timeout.</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">  @param[in]    sleep_time      sleep time in milliseconds</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">  @param[in]    timeout         total time to wait in seconds</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment">  @param[in]    alert_interval  alert interval in seconds</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">  @param[in]    func            callback function for condition check</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">  @param[in]    mutex           release during sleep and re-acquire</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">  @param[out]   is_timeout      true if timeout</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">  @return error code returned by callback function. */</span></div><div class="line"><a name="l01040"></a><span class="lineno"><a class="line" href="classClone__Sys.html#a5bc5cb187896ca2b81a625a575b70e2b"> 1040</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classClone__Sys.html#a5bc5cb187896ca2b81a625a575b70e2b">wait</a>(<a class="code" href="clone0clone_8h.html#a7cc4085b3e3ba15d5806d6fbb8de3a52">Clone_Msec</a> sleep_time, <a class="code" href="clone0clone_8h.html#a9fb03aaa960c11fac23b6f6c695046a6">Clone_Sec</a> timeout,</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                  <a class="code" href="clone0clone_8h.html#a9fb03aaa960c11fac23b6f6c695046a6">Clone_Sec</a> alert_interval, <a class="code" href="classClone__Sys.html#abb5ab05435fedb6b41b4e72eaba4dfac">Wait_Cond_Cbk_Func</a> &amp;&amp;func,</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                  ib_mutex_t *<a class="code" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>, <span class="keywordtype">bool</span> &amp;<a class="code" href="my__thread_8h.html#a17e14459233f296f457d54c9f5602991">is_timeout</a>) {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a> = 0;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacenet_1_1impl_1_1socket.html#af0aef40a99065320448f6e90710198cc">wait</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    is_timeout = <span class="keyword">false</span>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordtype">int</span> loop_count = 0;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keyword">auto</span> alert_count = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(alert_interval / sleep_time);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keyword">auto</span> total_count = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(timeout / sleep_time);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">/* Call function once before waiting. */</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    err = func(<span class="keyword">false</span>, wait);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">while</span> (!is_timeout &amp;&amp; wait &amp;&amp; err == 0) {</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      ++loop_count;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="comment">/* Release input mutex */</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">if</span> (mutex != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="ut0mutex_8h.html#a7eccf8a96f24ab7f4012bb203640cf17">mutex_own</a>(mutex));</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <a class="code" href="ut0mutex_8h.html#aa55ad8b49fb970ed42f72485f53e1547">mutex_exit</a>(mutex);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      std::this_thread::sleep_for(sleep_time);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="comment">/* Acquire input mutex back */</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">if</span> (mutex != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <a class="code" href="ut0mutex_8h.html#aba9ab29617d78284418d99bc1a06865d">mutex_enter</a>(mutex);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="keyword">auto</span> alert = (alert_count &gt; 0) ? (loop_count % alert_count == 0) : <span class="keyword">true</span>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      err = func(alert, wait);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      is_timeout = (loop_count &gt; total_count);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">return</span> (err);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">  /** Wait till the condition is satisfied or default timeout.</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">  @param[in]    func            callback function for condition check</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">  @param[in]    mutex           release during sleep and re-acquire</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">  @param[out]   is_timeout      true if timeout</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">  @return error code returned by callback function. */</span></div><div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="classClone__Sys.html#acfe248bd7ad1d5ec1d6b44fa2e5dd4c0"> 1084</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classClone__Sys.html#acfe248bd7ad1d5ec1d6b44fa2e5dd4c0">wait_default</a>(<a class="code" href="classClone__Sys.html#abb5ab05435fedb6b41b4e72eaba4dfac">Wait_Cond_Cbk_Func</a> &amp;&amp;func, ib_mutex_t *<a class="code" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>,</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                          <span class="keywordtype">bool</span> &amp;<a class="code" href="my__thread_8h.html#a17e14459233f296f457d54c9f5602991">is_timeout</a>) {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacenet_1_1impl_1_1socket.html#af0aef40a99065320448f6e90710198cc">wait</a>(<a class="code" href="clone0clone_8h.html#a29d8b217b62ffa5c39b1d081e82797e4">CLONE_DEF_SLEEP</a>, <a class="code" href="clone0clone_8h.html#a9fb03aaa960c11fac23b6f6c695046a6">Clone_Sec</a>(<a class="code" href="clone0clone_8h.html#ac92bf1d56f3aa4b6528f203064caa39a">CLONE_DEF_TIMEOUT</a>),</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                 <a class="code" href="clone0clone_8h.html#af30a5d3d3eb8dae128e8b06588b62944">CLONE_DEF_ALERT_INTERVAL</a>,</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                 std::forward&lt;Wait_Cond_Cbk_Func&gt;(func), mutex, is_timeout));</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment">  /** Check if any active clone is running.</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">  @param[in]    print_alert     print alert message</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">  @return true, if concurrent clone in progress */</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordtype">bool</span> check_active_clone(<span class="keywordtype">bool</span> print_alert);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">  /** @return GTID persistor */</span></div><div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="classClone__Sys.html#a5f343a6f4e86926c6242a5a7580f5761"> 1097</a></span>&#160;  <a class="code" href="classClone__persist__gtid.html">Clone_persist_gtid</a> &amp;<a class="code" href="classClone__Sys.html#a5f343a6f4e86926c6242a5a7580f5761">get_gtid_persistor</a>() { <span class="keywordflow">return</span> (m_gtid_persister); }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">  /** Find free index to allocate new clone handle.</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">  @param[in]    hdl_type        clone handle type</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">  @param[out]   free_index      free index in array</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">  @return error code */</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordtype">int</span> find_free_index(<a class="code" href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a> hdl_type, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> &amp;free_index);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">  /** Array of clone handles */</span></div><div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="classClone__Sys.html#a04041b389b3aadfca406057d0a10826a"> 1108</a></span>&#160;  <a class="code" href="classClone__Handle.html">Clone_Handle</a> *m_clone_arr[<a class="code" href="clone0clone_8h.html#a189689a38e3458187474a699e21a1a81">CLONE_ARR_SIZE</a>];</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">  /** Number of copy clones */</span></div><div class="line"><a name="l01111"></a><span class="lineno"><a class="line" href="classClone__Sys.html#a4fe392ee930116ab0f03ee982be2ac04"> 1111</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Sys.html#a4fe392ee930116ab0f03ee982be2ac04">m_num_clones</a>;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">  /** Number of apply clones */</span></div><div class="line"><a name="l01114"></a><span class="lineno"><a class="line" href="classClone__Sys.html#a27495e75a817ce1f1f654f646bb7c267"> 1114</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Sys.html#a27495e75a817ce1f1f654f646bb7c267">m_num_apply_clones</a>;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">  /** Array of clone snapshots */</span></div><div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="classClone__Sys.html#a80049b93d03eff1e90d83698344fbbfd"> 1117</a></span>&#160;  <a class="code" href="classClone__Snapshot.html">Clone_Snapshot</a> *m_snapshot_arr[<a class="code" href="clone0clone_8h.html#abab72de7eb4f289336e3db0d14cd2121">SNAPSHOT_ARR_SIZE</a>];</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">  /** Number of copy snapshots */</span></div><div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="classClone__Sys.html#a04856a2937d7bfec2cabeeea29870db6"> 1120</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Sys.html#a04856a2937d7bfec2cabeeea29870db6">m_num_snapshots</a>;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">  /** Number of apply snapshots */</span></div><div class="line"><a name="l01123"></a><span class="lineno"><a class="line" href="classClone__Sys.html#aa1ba07809361b87503301a2a31766049"> 1123</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classClone__Sys.html#aa1ba07809361b87503301a2a31766049">m_num_apply_snapshots</a>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">  /** Clone system mutex */</span></div><div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="classClone__Sys.html#acdea68e2f1428eed261ce663d97a295a"> 1126</a></span>&#160;  ib_mutex_t <a class="code" href="classClone__Sys.html#acdea68e2f1428eed261ce663d97a295a">m_clone_sys_mutex</a>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">  /** Clone unique ID generator */</span></div><div class="line"><a name="l01129"></a><span class="lineno"><a class="line" href="classClone__Sys.html#aeb1ac19d87dee95148fde4ebc47419e5"> 1129</a></span>&#160;  ib_uint64_t <a class="code" href="classClone__Sys.html#aeb1ac19d87dee95148fde4ebc47419e5">m_clone_id_generator</a>;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">  /** GTID persister */</span></div><div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="classClone__Sys.html#ac50e2e93dca9355b721e10b87ba6d197"> 1132</a></span>&#160;  <a class="code" href="classClone__persist__gtid.html">Clone_persist_gtid</a> <a class="code" href="classClone__Sys.html#ac50e2e93dca9355b721e10b87ba6d197">m_gtid_persister</a>;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;};</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">/** Clone system global */</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="keyword">extern</span> <a class="code" href="classClone__Sys.html">Clone_Sys</a> *<a class="code" href="clone0clone_8h.html#a17bfa5d73dd386d0a76bdfcd45fa9720">clone_sys</a>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CLONE_CLONE_INCLUDE */</span><span class="preprocessor"></span></div><div class="ttc" id="clone0desc_8h_html_ad9fa4db4462b38df011362f52da7a8f2"><div class="ttname"><a href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2">Snapshot_State</a></div><div class="ttdeci">Snapshot_State</div><div class="ttdoc">Snapshot state transfer during clone. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:92</div></div>
<div class="ttc" id="os0file_8h_html_a63fac270d46d4a195e833a6672729041"><div class="ttname"><a href="os0file_8h.html#a63fac270d46d4a195e833a6672729041">os_file_t</a></div><div class="ttdeci">int os_file_t</div><div class="ttdoc">File handle. </div><div class="ttdef"><b>Definition:</b> os0file.h:131</div></div>
<div class="ttc" id="classClone__Task__Manager_html_adedce69712abc7663e3d6ae81bc383bd"><div class="ttname"><a href="classClone__Task__Manager.html#adedce69712abc7663e3d6ae81bc383bd">Clone_Task_Manager::m_err_file_len</a></div><div class="ttdeci">size_t m_err_file_len</div><div class="ttdoc">File name length. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:541</div></div>
<div class="ttc" id="classClone__Sys_html_ad3cc5d1f5cda4e416a97f9bdb15aa417"><div class="ttname"><a href="classClone__Sys.html#ad3cc5d1f5cda4e416a97f9bdb15aa417">Clone_Sys::get_mutex</a></div><div class="ttdeci">ib_mutex_t * get_mutex()</div><div class="ttdoc">Get clone sys mutex. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1015</div></div>
<div class="ttc" id="clone0clone_8h_html_a3c30cf46be2e0a1821f25caf56c7af00"><div class="ttname"><a href="clone0clone_8h.html#a3c30cf46be2e0a1821f25caf56c7af00">Clone_Sys_State</a></div><div class="ttdeci">std::atomic&lt; Clone_System_State &gt; Clone_Sys_State</div><div class="ttdef"><b>Definition:</b> clone0clone.h:112</div></div>
<div class="ttc" id="classClone__Handle_html_a828b6bfb8ed2ccc35c8d7f261b4cbe12"><div class="ttname"><a href="classClone__Handle.html#a828b6bfb8ed2ccc35c8d7f261b4cbe12">Clone_Handle::is_idle</a></div><div class="ttdeci">bool is_idle()</div><div class="ttdoc">Check if clone is idle waiting for restart. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:674</div></div>
<div class="ttc" id="classClone__Handle_html_a5cffeaf17bc3a36921967f8025529249"><div class="ttname"><a href="classClone__Handle.html#a5cffeaf17bc3a36921967f8025529249">Clone_Handle::is_interrupted</a></div><div class="ttdeci">bool is_interrupted()</div><div class="ttdef"><b>Definition:</b> clone0clone.h:636</div></div>
<div class="ttc" id="classClone__Sys_html_a04856a2937d7bfec2cabeeea29870db6"><div class="ttname"><a href="classClone__Sys.html#a04856a2937d7bfec2cabeeea29870db6">Clone_Sys::m_num_snapshots</a></div><div class="ttdeci">uint m_num_snapshots</div><div class="ttdoc">Number of copy snapshots. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1120</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a33b59e5993f1e2750846743f1a419817"><div class="ttname"><a href="classClone__Task__Manager.html#a33b59e5993f1e2750846743f1a419817">Clone_Task_Manager::m_chunk_info</a></div><div class="ttdeci">Chunk_Info m_chunk_info</div><div class="ttdoc">Finished and incomplete chunk information. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:502</div></div>
<div class="ttc" id="mysqltest_8cc_html_a4795fabad9773489eb36acaf44cb0395"><div class="ttname"><a href="mysqltest_8cc.html#a4795fabad9773489eb36acaf44cb0395">open_file</a></div><div class="ttdeci">static int open_file(const char *name)</div><div class="ttdef"><b>Definition:</b> mysqltest.cc:2949</div></div>
<div class="ttc" id="classClone__Handle_html_a318cbfb2c011ab3a1dd74390b3c334a5"><div class="ttname"><a href="classClone__Handle.html#a318cbfb2c011ab3a1dd74390b3c334a5">Clone_Handle::m_clone_locator</a></div><div class="ttdeci">byte * m_clone_locator</div><div class="ttdoc">Serialized locator. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:904</div></div>
<div class="ttc" id="clone0clone_8h_html_a558460c584978bd35eb4dcbac37d4997af1b0357e5fecbed9686edc2aca7cc5d7"><div class="ttname"><a href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997af1b0357e5fecbed9686edc2aca7cc5d7">CLONE_TASK_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:123</div></div>
<div class="ttc" id="classClone__Handle_html_a8df77d0eee99848fe81279abad1be7c9"><div class="ttname"><a href="classClone__Handle.html#a8df77d0eee99848fe81279abad1be7c9">Clone_Handle::detach</a></div><div class="ttdeci">uint detach()</div><div class="ttdoc">Detach from the clone handle. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:574</div></div>
<div class="ttc" id="db0err_8h_html"><div class="ttname"><a href="db0err_8h.html">db0err.h</a></div><div class="ttdoc">Global error codes for the database. </div></div>
<div class="ttc" id="clone0desc_8h_html_ad9fa4db4462b38df011362f52da7a8f2a6959608a12f9dde1dc13204cae34b9ed"><div class="ttname"><a href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2a6959608a12f9dde1dc13204cae34b9ed">CLONE_SNAPSHOT_DONE</a></div><div class="ttdoc">Snapshot state at end after finishing transfer. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:109</div></div>
<div class="ttc" id="sql_2handler_8h_html_a73ef56501f204f36a12bc62de984ffc0"><div class="ttname"><a href="sql_2handler_8h.html#a73ef56501f204f36a12bc62de984ffc0">Ha_clone_type</a></div><div class="ttdeci">Ha_clone_type</div><div class="ttdoc">Clone operation types. </div><div class="ttdef"><b>Definition:</b> handler.h:935</div></div>
<div class="ttc" id="structClone__Task_html_a68b2e7bc84e1b682230858ea3e2e3002"><div class="ttname"><a href="structClone__Task.html#a68b2e7bc84e1b682230858ea3e2e3002">Clone_Task::m_current_file_des</a></div><div class="ttdeci">pfs_os_file_t m_current_file_des</div><div class="ttdoc">Current file descriptor. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:153</div></div>
<div class="ttc" id="classHa__clone__cbk_html"><div class="ttname"><a href="classHa__clone__cbk.html">Ha_clone_cbk</a></div><div class="ttdef"><b>Definition:</b> handler.h:987</div></div>
<div class="ttc" id="clone0clone_8h_html_a04a51432368dca2e99c6df8bde9d0ae5ad7eb112345b35f02ab2eec402bbb95e1"><div class="ttname"><a href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5ad7eb112345b35f02ab2eec402bbb95e1">CLONE_SYS_INACTIVE</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:107</div></div>
<div class="ttc" id="classClone__Handle_html_a2ea53c8a85de6027ed8a77656fc41fe1"><div class="ttname"><a href="classClone__Handle.html#a2ea53c8a85de6027ed8a77656fc41fe1">Clone_Handle::get_datadir</a></div><div class="ttdeci">const char * get_datadir() const</div><div class="ttdef"><b>Definition:</b> clone0clone.h:587</div></div>
<div class="ttc" id="clone0clone_8h_html_adf36e2d18afddb8b4269ce06be432ee5"><div class="ttname"><a href="clone0clone_8h.html#adf36e2d18afddb8b4269ce06be432ee5">CLONE_INNODB_FIXUP_FILE</a></div><div class="ttdeci">const char CLONE_INNODB_FIXUP_FILE[]</div><div class="ttdoc">Clone fix up file name. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:67</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a682acdf67891f70bfb7277351822a416"><div class="ttname"><a href="classClone__Task__Manager.html#a682acdf67891f70bfb7277351822a416">Clone_Task_Manager::process_inclomplete_chunk</a></div><div class="ttdeci">bool process_inclomplete_chunk()</div><div class="ttdoc">Check if we should process incomplete chunk next. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:467</div></div>
<div class="ttc" id="test__sql__9__sessions_8cc_html_ac242a6dca06b33213957c913bd72414c"><div class="ttname"><a href="test__sql__9__sessions_8cc.html#ac242a6dca06b33213957c913bd72414c">buffer</a></div><div class="ttdeci">char buffer[STRING_BUFFER]</div><div class="ttdef"><b>Definition:</b> test_sql_9_sessions.cc:57</div></div>
<div class="ttc" id="classClone__persist__gtid_html"><div class="ttname"><a href="classClone__persist__gtid.html">Clone_persist_gtid</a></div><div class="ttdoc">Persist GTID along with transaction commit. </div><div class="ttdef"><b>Definition:</b> clone0repl.h:68</div></div>
<div class="ttc" id="classClone__Handle_html_ab9b806ba6042ef85eaaf6e8f1724e754"><div class="ttname"><a href="classClone__Handle.html#ab9b806ba6042ef85eaaf6e8f1724e754">Clone_Handle::m_locator_length</a></div><div class="ttdeci">uint m_locator_length</div><div class="ttdoc">Locator length in bytes. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:907</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a0226e02bdbfb71b17b6083fd8b79b108"><div class="ttname"><a href="classClone__Task__Manager.html#a0226e02bdbfb71b17b6083fd8b79b108">Clone_Task_Manager::is_restart_metadata</a></div><div class="ttdeci">bool is_restart_metadata(Clone_Task *task)</div><div class="ttdoc">Check if needs to send state metadata once. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:362</div></div>
<div class="ttc" id="clone0clone_8h_html_ac508a078e986fa9a8dd8cfd2f70a49bb"><div class="ttname"><a href="clone0clone_8h.html#ac508a078e986fa9a8dd8cfd2f70a49bb">MAX_CLONES</a></div><div class="ttdeci">const int MAX_CLONES</div><div class="ttdoc">Maximum number of concurrent clones. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:129</div></div>
<div class="ttc" id="memcached_8c_html_a4acff8232e4aec9cd5c6dc200ac55ef3"><div class="ttname"><a href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> memcached.c:384</div></div>
<div class="ttc" id="classClone__Handle_html_abcfbde56a63574d054cb4553e35362d5"><div class="ttname"><a href="classClone__Handle.html#abcfbde56a63574d054cb4553e35362d5">Clone_Handle::m_clone_task_manager</a></div><div class="ttdeci">Clone_Task_Manager m_clone_task_manager</div><div class="ttdoc">Clone task manager. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:934</div></div>
<div class="ttc" id="classClone__Task__Manager_html_abd8c598774afd6b79c2d8c06b76f2d22"><div class="ttname"><a href="classClone__Task__Manager.html#abd8c598774afd6b79c2d8c06b76f2d22">Clone_Task_Manager::m_restart_count</a></div><div class="ttdeci">uint m_restart_count</div><div class="ttdoc">Number of times clone is restarted. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:517</div></div>
<div class="ttc" id="classClone__Snapshot_html"><div class="ttname"><a href="classClone__Snapshot.html">Clone_Snapshot</a></div><div class="ttdoc">Dynamic database snapshot: Holds metadata and handle to data. </div><div class="ttdef"><b>Definition:</b> clone0snapshot.h:116</div></div>
<div class="ttc" id="include_2mysql_2plugin_8h_html"><div class="ttname"><a href="include_2mysql_2plugin_8h.html">plugin.h</a></div></div>
<div class="ttc" id="task_8cc_html_a541442824a656f9c820631f4b8adf441"><div class="ttname"><a href="task_8cc.html#a541442824a656f9c820631f4b8adf441">seconds</a></div><div class="ttdeci">double seconds()</div><div class="ttdef"><b>Definition:</b> task.cc:301</div></div>
<div class="ttc" id="my__thread_8h_html_a17e14459233f296f457d54c9f5602991"><div class="ttname"><a href="my__thread_8h.html#a17e14459233f296f457d54c9f5602991">is_timeout</a></div><div class="ttdeci">static int is_timeout(int e)</div><div class="ttdef"><b>Definition:</b> my_thread.h:66</div></div>
<div class="ttc" id="clone0clone_8h_html_a04a51432368dca2e99c6df8bde9d0ae5a9e084b9a5f5e39aa4d0550526fdccc01"><div class="ttname"><a href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5a9e084b9a5f5e39aa4d0550526fdccc01">CLONE_SYS_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:108</div></div>
<div class="ttc" id="structClone__Task_html_a5ea8c230cbabe54443310bcb0aa4487f"><div class="ttname"><a href="structClone__Task.html#a5ea8c230cbabe54443310bcb0aa4487f">Clone_Task::m_alloc_len</a></div><div class="ttdeci">uint m_alloc_len</div><div class="ttdoc">Serial descriptor allocated length. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:150</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a4a866b92d137ed0023a6be9e3dda944e"><div class="ttname"><a href="classClone__Task__Manager.html#a4a866b92d137ed0023a6be9e3dda944e">Clone_Task_Manager::get_task_by_index</a></div><div class="ttdeci">Clone_Task * get_task_by_index(uint index)</div><div class="ttdoc">Get task by index. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:268</div></div>
<div class="ttc" id="clone0clone_8h_html_a42f5a4378799d625a79d24b42609203e"><div class="ttname"><a href="clone0clone_8h.html#a42f5a4378799d625a79d24b42609203e">CLONE_INNODB_REPLACED_FILES</a></div><div class="ttdeci">const char CLONE_INNODB_REPLACED_FILES[]</div><div class="ttdoc">Clone file name for list of files to be replaced. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:79</div></div>
<div class="ttc" id="classClone__Handle_html_ab6ed783172b8f36b5e31e6dab5f66574"><div class="ttname"><a href="classClone__Handle.html#ab6ed783172b8f36b5e31e6dab5f66574">Clone_Handle::m_clone_dir</a></div><div class="ttdeci">const char * m_clone_dir</div><div class="ttdoc">Clone data directory. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:931</div></div>
<div class="ttc" id="clone0clone_8h_html_a71083ad89dcb9c05c38b7425a639b5d7"><div class="ttname"><a href="clone0clone_8h.html#a71083ad89dcb9c05c38b7425a639b5d7">MAX_SNAPSHOTS</a></div><div class="ttdeci">const int MAX_SNAPSHOTS</div><div class="ttdoc">Maximum number of concurrent snapshots. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:126</div></div>
<div class="ttc" id="classClone__Task__Manager_html_aaa34b04d8bb7da05d85cd3cd64ace13a"><div class="ttname"><a href="classClone__Task__Manager.html#aaa34b04d8bb7da05d85cd3cd64ace13a">Clone_Task_Manager::check_ack</a></div><div class="ttdeci">bool check_ack(const Clone_Desc_State *state_desc)</div><div class="ttdoc">Check if state ACK is needed. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:398</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a2ff0cdd9f17a6b2b4df19a1e723e27c6"><div class="ttname"><a href="classClone__Task__Manager.html#a2ff0cdd9f17a6b2b4df19a1e723e27c6">Clone_Task_Manager::m_transferred_file_meta</a></div><div class="ttdeci">bool m_transferred_file_meta</div><div class="ttdef"><b>Definition:</b> clone0clone.h:529</div></div>
<div class="ttc" id="classClone__Handle_html_ae836765901609ad28b4367c5c19729e8"><div class="ttname"><a href="classClone__Handle.html#ae836765901609ad28b4367c5c19729e8">Clone_Handle::m_allow_restart</a></div><div class="ttdeci">bool m_allow_restart</div><div class="ttdoc">Allow restart of clone operation after network failure. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:928</div></div>
<div class="ttc" id="classClone__Sys_html_ac50e2e93dca9355b721e10b87ba6d197"><div class="ttname"><a href="classClone__Sys.html#ac50e2e93dca9355b721e10b87ba6d197">Clone_Sys::m_gtid_persister</a></div><div class="ttdeci">Clone_persist_gtid m_gtid_persister</div><div class="ttdoc">GTID persister. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1132</div></div>
<div class="ttc" id="structClone__Task_html_a3004cc184968899b7a9f9adf000efd7c"><div class="ttname"><a href="structClone__Task.html#a3004cc184968899b7a9f9adf000efd7c">Clone_Task::m_data_size</a></div><div class="ttdeci">uint32_t m_data_size</div><div class="ttdoc">Data transferred for current chunk in bytes. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:182</div></div>
<div class="ttc" id="clone0clone_8h_html_a04a51432368dca2e99c6df8bde9d0ae5"><div class="ttname"><a href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5">Clone_System_State</a></div><div class="ttdeci">Clone_System_State</div><div class="ttdoc">Clone system state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:106</div></div>
<div class="ttc" id="classClone__Sys_html_abb5ab05435fedb6b41b4e72eaba4dfac"><div class="ttname"><a href="classClone__Sys.html#abb5ab05435fedb6b41b4e72eaba4dfac">Clone_Sys::Wait_Cond_Cbk_Func</a></div><div class="ttdeci">std::function&lt; int(bool is_alert, bool &amp;result)&gt; Wait_Cond_Cbk_Func</div><div class="ttdoc">Function to check wait condition. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1030</div></div>
<div class="ttc" id="clone__handler_8cc_html_a9afac3cca6b652042af4225b04b17a03"><div class="ttname"><a href="clone__handler_8cc.html#a9afac3cca6b652042af4225b04b17a03">clone_handle</a></div><div class="ttdeci">Clone_handler * clone_handle</div><div class="ttdoc">Clone handler global. </div><div class="ttdef"><b>Definition:</b> clone_handler.cc:57</div></div>
<div class="ttc" id="clone0desc_8h_html_a927765bbc1fbd213fc508abdf495221a"><div class="ttname"><a href="clone0desc_8h.html#a927765bbc1fbd213fc508abdf495221a">CLONE_DESC_MAX_BASE_LEN</a></div><div class="ttdeci">const uint32_t CLONE_DESC_MAX_BASE_LEN</div><div class="ttdoc">Maximum base length for any serialized descriptor. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:44</div></div>
<div class="ttc" id="clone0clone_8h_html_a34bc247f013c828d1fb44953d65ddbb7"><div class="ttname"><a href="clone0clone_8h.html#a34bc247f013c828d1fb44953d65ddbb7">CLONE_INNODB_RECOVERY_CRASH_POINT</a></div><div class="ttdeci">const char CLONE_INNODB_RECOVERY_CRASH_POINT[]</div><div class="ttdoc">Clone simulate recovery error file name. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:54</div></div>
<div class="ttc" id="classClone__Sys_html_aeb1ac19d87dee95148fde4ebc47419e5"><div class="ttname"><a href="classClone__Sys.html#aeb1ac19d87dee95148fde4ebc47419e5">Clone_Sys::m_clone_id_generator</a></div><div class="ttdeci">ib_uint64_t m_clone_id_generator</div><div class="ttdoc">Clone unique ID generator. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1129</div></div>
<div class="ttc" id="classClone__Sys_html_aa1ba07809361b87503301a2a31766049"><div class="ttname"><a href="classClone__Sys.html#aa1ba07809361b87503301a2a31766049">Clone_Sys::m_num_apply_snapshots</a></div><div class="ttdeci">uint m_num_apply_snapshots</div><div class="ttdoc">Number of apply snapshots. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1123</div></div>
<div class="ttc" id="structClone__Task_html_afa5b4cec7cb0e425c53d1a759c680c0e"><div class="ttname"><a href="structClone__Task.html#afa5b4cec7cb0e425c53d1a759c680c0e">Clone_Task::m_task_state</a></div><div class="ttdeci">Clone_Task_State m_task_state</div><div class="ttdoc">Task state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:144</div></div>
<div class="ttc" id="clone0snapshot_8h_html_a516dd8934f7b16de2ba80510120739cc"><div class="ttname"><a href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739cc">Clone_Handle_Type</a></div><div class="ttdeci">Clone_Handle_Type</div><div class="ttdoc">Clone handle type. </div><div class="ttdef"><b>Definition:</b> clone0snapshot.h:89</div></div>
<div class="ttc" id="structClone__Task_html_a6a853569d53110a146b980249f80a7cc"><div class="ttname"><a href="structClone__Task.html#a6a853569d53110a146b980249f80a7cc">Clone_Task::m_buffer_alloc_len</a></div><div class="ttdeci">uint m_buffer_alloc_len</div><div class="ttdoc">Allocated buffer length. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:179</div></div>
<div class="ttc" id="structClone__Task_html_a0671d47dcbc7f9ed6f9ad5eab2700182"><div class="ttname"><a href="structClone__Task.html#a0671d47dcbc7f9ed6f9ad5eab2700182">Clone_Task::m_file_cache</a></div><div class="ttdeci">bool m_file_cache</div><div class="ttdoc">Data files are read using OS buffer cache. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:159</div></div>
<div class="ttc" id="clone0clone_8h_html_a7cc4085b3e3ba15d5806d6fbb8de3a52"><div class="ttname"><a href="clone0clone_8h.html#a7cc4085b3e3ba15d5806d6fbb8de3a52">Clone_Msec</a></div><div class="ttdeci">std::chrono::milliseconds Clone_Msec</div><div class="ttdef"><b>Definition:</b> clone0clone.h:92</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a9771cf3edb4ed32a8b04f7e27524a4fe"><div class="ttname"><a href="classClone__Task__Manager.html#a9771cf3edb4ed32a8b04f7e27524a4fe">Clone_Task_Manager::get_mutex</a></div><div class="ttdeci">ib_mutex_t * get_mutex()</div><div class="ttdoc">Get task state mutex. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:196</div></div>
<div class="ttc" id="structClone__Desc__State_html_a3a2ddeedcd8ddf8cc278e96898a5e7d6"><div class="ttname"><a href="structClone__Desc__State.html#a3a2ddeedcd8ddf8cc278e96898a5e7d6">Clone_Desc_State::m_state</a></div><div class="ttdeci">Snapshot_State m_state</div><div class="ttdoc">Current snapshot State. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:440</div></div>
<div class="ttc" id="classClone__Handle_html_aa41597f4f035c8bb45caf9288f756116"><div class="ttname"><a href="classClone__Handle.html#aa41597f4f035c8bb45caf9288f756116">Clone_Handle::m_clone_id</a></div><div class="ttdeci">ib_uint64_t m_clone_id</div><div class="ttdoc">Unique clone identifier. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:922</div></div>
<div class="ttc" id="window_8cc_html_ab18bcb21ff8541fc5fef0f12ddc372aa"><div class="ttname"><a href="window_8cc.html#ab18bcb21ff8541fc5fef0f12ddc372aa">clone</a></div><div class="ttdeci">static ORDER * clone(THD *thd, ORDER *order)</div><div class="ttdoc">Shallow clone the list of ORDER objects using mem_root and return the cloned list. </div><div class="ttdef"><b>Definition:</b> window.cc:80</div></div>
<div class="ttc" id="audit__api__message__emit_8cc_html_a9ab62ce08f07c43d34e2d46dcc0f5f68"><div class="ttname"><a href="audit__api__message__emit_8cc.html#a9ab62ce08f07c43d34e2d46dcc0f5f68">init</a></div><div class="ttdeci">static mysql_service_status_t init()</div><div class="ttdoc">Component initialization. </div><div class="ttdef"><b>Definition:</b> audit_api_message_emit.cc:570</div></div>
<div class="ttc" id="classClone__Handle_html_ae321f40ba249ae07a382e9eaa40c28c4"><div class="ttname"><a href="classClone__Handle.html#ae321f40ba249ae07a382e9eaa40c28c4">Clone_Handle::get_version</a></div><div class="ttdeci">uint get_version()</div><div class="ttdoc">Get clone data descriptor version. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:647</div></div>
<div class="ttc" id="classClone__Task__Manager_html"><div class="ttname"><a href="classClone__Task__Manager.html">Clone_Task_Manager</a></div><div class="ttdoc">Task manager for manging the tasks for a clone operation. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:188</div></div>
<div class="ttc" id="structClone__Task_html_a7a8d46a9287e6f7231a8d1032f69a020"><div class="ttname"><a href="structClone__Task.html#a7a8d46a9287e6f7231a8d1032f69a020">Clone_Task::m_current_buffer</a></div><div class="ttdeci">byte * m_current_buffer</div><div class="ttdoc">Allocated buffer. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:176</div></div>
<div class="ttc" id="clone0clone_8h_html_a918d2cfd2c331100c3eef1c6f123e03e"><div class="ttname"><a href="clone0clone_8h.html#a918d2cfd2c331100c3eef1c6f123e03e">CLONE_INNODB_SAVED_FILE_EXTN</a></div><div class="ttdeci">const char CLONE_INNODB_SAVED_FILE_EXTN[]</div><div class="ttdoc">Clone file extension for saved old files. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:90</div></div>
<div class="ttc" id="structClone__Desc__Locator_html"><div class="ttname"><a href="structClone__Desc__Locator.html">Clone_Desc_Locator</a></div><div class="ttdoc">CLONE_DESC_LOCATOR: Descriptor for a task for clone operation. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:358</div></div>
<div class="ttc" id="item__strfunc_8cc_html_ad354a0cf5326155e6233ae0e09593d27"><div class="ttname"><a href="item__strfunc_8cc.html#ad354a0cf5326155e6233ae0e09593d27">alloc_buffer</a></div><div class="ttdeci">String * alloc_buffer(String *res, String *str, String *tmp_value, size_t length)</div><div class="ttdef"><b>Definition:</b> item_strfunc.cc:2438</div></div>
<div class="ttc" id="clone0desc_8h_html"><div class="ttname"><a href="clone0desc_8h.html">clone0desc.h</a></div><div class="ttdoc">Innodb clone descriptors. </div></div>
<div class="ttc" id="structClone__Task__Meta_html_a68e9290b58c1d17ee9f0369b4a202022"><div class="ttname"><a href="structClone__Task__Meta.html#a68e9290b58c1d17ee9f0369b4a202022">Clone_Task_Meta::m_chunk_num</a></div><div class="ttdeci">uint m_chunk_num</div><div class="ttdoc">Current chunk number reserved by the task. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:175</div></div>
<div class="ttc" id="clone0clone_8h_html_a4cedc7060a40c680edabf5e7e2932de2"><div class="ttname"><a href="clone0clone_8h.html#a4cedc7060a40c680edabf5e7e2932de2">CLONE_INNODB_ERROR_FILE</a></div><div class="ttdeci">const char CLONE_INNODB_ERROR_FILE[]</div><div class="ttdoc">Clone error file name. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:63</div></div>
<div class="ttc" id="structClone__Task__Meta_html"><div class="ttname"><a href="structClone__Task__Meta.html">Clone_Task_Meta</a></div><div class="ttdoc">Task information in clone operation. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:170</div></div>
<div class="ttc" id="classClone__Sys_html_a5f343a6f4e86926c6242a5a7580f5761"><div class="ttname"><a href="classClone__Sys.html#a5f343a6f4e86926c6242a5a7580f5761">Clone_Sys::get_gtid_persistor</a></div><div class="ttdeci">Clone_persist_gtid &amp; get_gtid_persistor()</div><div class="ttdef"><b>Definition:</b> clone0clone.h:1097</div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="structClone__Task_html_ae7b4cf6218dc549ace2e78cc287d6bae"><div class="ttname"><a href="structClone__Task.html#ae7b4cf6218dc549ace2e78cc287d6bae">Clone_Task::m_ignore_sync</a></div><div class="ttdeci">bool m_ignore_sync</div><div class="ttdoc">Ignore debug sync point. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:169</div></div>
<div class="ttc" id="query__result_8cc_html_a1355c43f29b5a79b5a3697b79e76d051"><div class="ttname"><a href="query__result_8cc.html#a1355c43f29b5a79b5a3697b79e76d051">create_file</a></div><div class="ttdeci">static File create_file(THD *thd, char *path, sql_exchange *exchange, IO_CACHE *cache)</div><div class="ttdef"><b>Definition:</b> query_result.cc:209</div></div>
<div class="ttc" id="classClone__Handle_html"><div class="ttname"><a href="classClone__Handle.html">Clone_Handle</a></div><div class="ttdoc">Clone Handle for copying or applying data. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:548</div></div>
<div class="ttc" id="sql_2handler_8h_html"><div class="ttname"><a href="sql_2handler_8h.html">handler.h</a></div></div>
<div class="ttc" id="clone0clone_8h_html_a189689a38e3458187474a699e21a1a81"><div class="ttname"><a href="clone0clone_8h.html#a189689a38e3458187474a699e21a1a81">CLONE_ARR_SIZE</a></div><div class="ttdeci">const int CLONE_ARR_SIZE</div><div class="ttdoc">Clone system array size. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:132</div></div>
<div class="ttc" id="clone0clone_8h_html_ad457d1b9ce795e6ec06596d03cc10453"><div class="ttname"><a href="clone0clone_8h.html#ad457d1b9ce795e6ec06596d03cc10453">CLONE_INNODB_NEW_FILES</a></div><div class="ttdeci">const char CLONE_INNODB_NEW_FILES[]</div><div class="ttdoc">Clone file name for list of files cloned in place. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:75</div></div>
<div class="ttc" id="clone0clone_8h_html_a558460c584978bd35eb4dcbac37d4997a48e25d5c36fdf932e89b192cd2764028"><div class="ttname"><a href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997a48e25d5c36fdf932e89b192cd2764028">CLONE_TASK_INACTIVE</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:123</div></div>
<div class="ttc" id="classClone__Handle_html_a0916ebc0bdf431419495d4799705031c"><div class="ttname"><a href="classClone__Handle.html#a0916ebc0bdf431419495d4799705031c">Clone_Handle::match_hdl_type</a></div><div class="ttdeci">bool match_hdl_type(Clone_Handle_Type other_handle_type)</div><div class="ttdoc">Check if clone type matches. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:656</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a7eda5ce876f2ada582d4e1cc8856ea86"><div class="ttname"><a href="classClone__Task__Manager.html#a7eda5ce876f2ada582d4e1cc8856ea86">Clone_Task_Manager::m_num_tasks</a></div><div class="ttdeci">uint m_num_tasks</div><div class="ttdoc">Current number of tasks. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:508</div></div>
<div class="ttc" id="classClone__Handle_html_acef026a83bbd9f6e7053c6ebba2b986a"><div class="ttname"><a href="classClone__Handle.html#acef026a83bbd9f6e7053c6ebba2b986a">Clone_Handle::save_error</a></div><div class="ttdeci">void save_error(int err)</div><div class="ttdoc">Save current error number. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:618</div></div>
<div class="ttc" id="classClone__Handle_html_a87b05281f2214c2b7a68e1c73ef553aa"><div class="ttname"><a href="classClone__Handle.html#a87b05281f2214c2b7a68e1c73ef553aa">Clone_Handle::attach</a></div><div class="ttdeci">void attach()</div><div class="ttdoc">Attach to the clone handle. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:570</div></div>
<div class="ttc" id="clone0desc_8h_html_a0e699c209c1ac59224a4780558e57df2"><div class="ttname"><a href="clone0desc_8h.html#a0e699c209c1ac59224a4780558e57df2">CLONE_MAX_TASKS</a></div><div class="ttdeci">const int CLONE_MAX_TASKS</div><div class="ttdoc">Maximum number of concurrent tasks for each clone. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:50</div></div>
<div class="ttc" id="classClone__Sys_html_ad2ca9abb3b3012773e5fe8fe40fe8ac9"><div class="ttname"><a href="classClone__Sys.html#ad2ca9abb3b3012773e5fe8fe40fe8ac9">Clone_Sys::s_clone_sys_state</a></div><div class="ttdeci">static Clone_Sys_State s_clone_sys_state</div><div class="ttdoc">Clone System state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1018</div></div>
<div class="ttc" id="classClone__Task__Manager_html_aefcfd414a5b5b71a2ed2133f279ec336"><div class="ttname"><a href="classClone__Task__Manager.html#aefcfd414a5b5b71a2ed2133f279ec336">Clone_Task_Manager::m_state_mutex</a></div><div class="ttdeci">ib_mutex_t m_state_mutex</div><div class="ttdoc">Mutex synchronizing access by concurrent tasks. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:499</div></div>
<div class="ttc" id="classClone__Handle_html_a628523a4eeea816b4288ba7ad11c0253"><div class="ttname"><a href="classClone__Handle.html#a628523a4eeea816b4288ba7ad11c0253">Clone_Handle::set_state</a></div><div class="ttdeci">void set_state(Clone_Handle_State state)</div><div class="ttdoc">Set current clone state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:662</div></div>
<div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:38</div></div>
<div class="ttc" id="classClone__Handle_html_ab20fd15226122f3ddfbcb5801423adbc"><div class="ttname"><a href="classClone__Handle.html#ab20fd15226122f3ddfbcb5801423adbc">Clone_Handle::m_ref_count</a></div><div class="ttdeci">uint m_ref_count</div><div class="ttdoc">Reference count. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:925</div></div>
<div class="ttc" id="classClone__Handle_html_a85b61826cad8c2c465d99cf774857c6c"><div class="ttname"><a href="classClone__Handle.html#a85b61826cad8c2c465d99cf774857c6c">Clone_Handle::replace_datadir</a></div><div class="ttdeci">bool replace_datadir() const</div><div class="ttdef"><b>Definition:</b> clone0clone.h:590</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a3b237c0a0db8d13c4335594fa6f8e40e"><div class="ttname"><a href="classClone__Task__Manager.html#a3b237c0a0db8d13c4335594fa6f8e40e">Clone_Task_Manager::m_num_tasks_finished</a></div><div class="ttdeci">uint m_num_tasks_finished</div><div class="ttdoc">Number of tasks finished current state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:511</div></div>
<div class="ttc" id="classClone__Sys_html_a2c843f9683a34b5e2ed7c7cbe1629beb"><div class="ttname"><a href="classClone__Sys.html#a2c843f9683a34b5e2ed7c7cbe1629beb">Clone_Sys::s_clone_wait_count</a></div><div class="ttdeci">static uint s_clone_wait_count</div><div class="ttdoc">Number of active wait requests. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1024</div></div>
<div class="ttc" id="classClone__Handle_html_ac895433d1908e6ed277774ec4c441368"><div class="ttname"><a href="classClone__Handle.html#ac895433d1908e6ed277774ec4c441368">Clone_Handle::m_restart_loc</a></div><div class="ttdeci">byte * m_restart_loc</div><div class="ttdoc">Serialized Restart locator. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:910</div></div>
<div class="ttc" id="clone0clone_8h_html_ae84cc06a9645353fed07ab760cfed389"><div class="ttname"><a href="clone0clone_8h.html#ae84cc06a9645353fed07ab760cfed389">CLONE_INNODB_FILE_LEN</a></div><div class="ttdeci">const size_t CLONE_INNODB_FILE_LEN</div><div class="ttdoc">Clone in progress file name length. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:50</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a6d85f8c60867d0f4597aa62ef19b0f40"><div class="ttname"><a href="classClone__Task__Manager.html#a6d85f8c60867d0f4597aa62ef19b0f40">Clone_Task_Manager::m_num_tasks_transit</a></div><div class="ttdeci">uint m_num_tasks_transit</div><div class="ttdoc">Number of tasks in transit state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:514</div></div>
<div class="ttc" id="uca-dump_8cc_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> uca-dump.cc:29</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a38c4a97c67a4a7568e6b3371533be424"><div class="ttname"><a href="classClone__Task__Manager.html#a38c4a97c67a4a7568e6b3371533be424">Clone_Task_Manager::m_send_state_meta</a></div><div class="ttdeci">bool m_send_state_meta</div><div class="ttdoc">Send state metadata before starting: Used for restart. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:532</div></div>
<div class="ttc" id="sslopt-case_8h_html_ae00b773898ac853cec38cdf7a08b8e89"><div class="ttname"><a href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a></div><div class="ttdeci">case opt name</div><div class="ttdef"><b>Definition:</b> sslopt-case.h:32</div></div>
<div class="ttc" id="structClone__Desc__State_html"><div class="ttname"><a href="structClone__Desc__State.html">Clone_Desc_State</a></div><div class="ttdoc">CLONE_DESC_STATE: Descriptor for current snapshot state. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:435</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a8c51b708aa6e839ba0eb896c2ae00740"><div class="ttname"><a href="classClone__Task__Manager.html#a8c51b708aa6e839ba0eb896c2ae00740">Clone_Task_Manager::get_snapshot</a></div><div class="ttdeci">Clone_Snapshot * get_snapshot()</div><div class="ttdoc">Get attached snapshot. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:334</div></div>
<div class="ttc" id="clone0clone_8h_html_a7ce86caf0d5d2748b8e806e7d78eab03"><div class="ttname"><a href="clone0clone_8h.html#a7ce86caf0d5d2748b8e806e7d78eab03">Clone_Min</a></div><div class="ttdeci">std::chrono::minutes Clone_Min</div><div class="ttdef"><b>Definition:</b> clone0clone.h:94</div></div>
<div class="ttc" id="clone0repl_8h_html"><div class="ttname"><a href="clone0repl_8h.html">clone0repl.h</a></div><div class="ttdoc">GTID persistence interface. </div></div>
<div class="ttc" id="clone0clone_8h_html_a2bd4405b46f47473cf950e71260a5462a5992a4b64ad753ff55d5dc3199694727"><div class="ttname"><a href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a5992a4b64ad753ff55d5dc3199694727">CLONE_STATE_IDLE</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:118</div></div>
<div class="ttc" id="structClone__File__Meta_html"><div class="ttname"><a href="structClone__File__Meta.html">Clone_File_Meta</a></div><div class="ttdoc">Clone file information. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:482</div></div>
<div class="ttc" id="my__inttypes_8h_html_acbd4acd0d29e2d6c43104827f77d9cd2"><div class="ttname"><a href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a></div><div class="ttdeci">uint32_t uint32</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:66</div></div>
<div class="ttc" id="ut0dbg_8h_html_ae7aed983dfe98ac872b5a9915fa778fa"><div class="ttname"><a href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a></div><div class="ttdeci">#define ut_a(EXPR)</div><div class="ttdoc">Abort execution if EXPR does not evaluate to nonzero. </div><div class="ttdef"><b>Definition:</b> ut0dbg.h:54</div></div>
<div class="ttc" id="clone0clone_8h_html_a17bfa5d73dd386d0a76bdfcd45fa9720"><div class="ttname"><a href="clone0clone_8h.html#a17bfa5d73dd386d0a76bdfcd45fa9720">clone_sys</a></div><div class="ttdeci">Clone_Sys * clone_sys</div><div class="ttdoc">Clone system global. </div><div class="ttdef"><b>Definition:</b> clone0clone.cc:40</div></div>
<div class="ttc" id="classClone__Handle_html_ad9f463079a21d9934b3507ac26310a72"><div class="ttname"><a href="classClone__Handle.html#ad9f463079a21d9934b3507ac26310a72">Clone_Handle::m_clone_handle_state</a></div><div class="ttdeci">Clone_Handle_State m_clone_handle_state</div><div class="ttdoc">Clone handle state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:898</div></div>
<div class="ttc" id="namespacejson__binary_html_a091356787f1fe6633bc180fc2009c606"><div class="ttname"><a href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">json_binary::err</a></div><div class="ttdeci">static Value err()</div><div class="ttdoc">Create a Value object that represents an error condition. </div><div class="ttdef"><b>Definition:</b> json_binary.cc:908</div></div>
<div class="ttc" id="namespacebinary__log_1_1transaction_1_1compression_html_a22a3b5d8096f4c73ced74c0b668df0be"><div class="ttname"><a href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">binary_log::transaction::compression::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> base.h:36</div></div>
<div class="ttc" id="classClone__Handle_html_a3a6b6b6f57576c19449b660f5d168ddd"><div class="ttname"><a href="classClone__Handle.html#a3a6b6b6f57576c19449b660f5d168ddd">Clone_Handle::m_clone_desc_version</a></div><div class="ttdeci">uint m_clone_desc_version</div><div class="ttdoc">Clone descriptor version in use. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:916</div></div>
<div class="ttc" id="structClone__Task_html_ab7e8f96fd1332b3856c65a7e0920a780"><div class="ttname"><a href="structClone__Task.html#ab7e8f96fd1332b3856c65a7e0920a780">Clone_Task::m_is_master</a></div><div class="ttdeci">bool m_is_master</div><div class="ttdoc">If master task. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:162</div></div>
<div class="ttc" id="classClone__Sys_html_acfe248bd7ad1d5ec1d6b44fa2e5dd4c0"><div class="ttname"><a href="classClone__Sys.html#acfe248bd7ad1d5ec1d6b44fa2e5dd4c0">Clone_Sys::wait_default</a></div><div class="ttdeci">static int wait_default(Wait_Cond_Cbk_Func &amp;&amp;func, ib_mutex_t *mutex, bool &amp;is_timeout)</div><div class="ttdoc">Wait till the condition is satisfied or default timeout. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1084</div></div>
<div class="ttc" id="clone0clone_8h_html_a8f8308316e56d2763766022498433ee8"><div class="ttname"><a href="clone0clone_8h.html#a8f8308316e56d2763766022498433ee8">CLONE_FILES_DIR</a></div><div class="ttdeci">#define CLONE_FILES_DIR</div><div class="ttdoc">Directory under data directory for all clone status files. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:47</div></div>
<div class="ttc" id="clone0clone_8h_html_a29d8b217b62ffa5c39b1d081e82797e4"><div class="ttname"><a href="clone0clone_8h.html#a29d8b217b62ffa5c39b1d081e82797e4">CLONE_DEF_SLEEP</a></div><div class="ttdeci">const Clone_Msec CLONE_DEF_SLEEP</div><div class="ttdoc">Default sleep time while waiting: 100 ms. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:97</div></div>
<div class="ttc" id="ut0mutex_8h_html"><div class="ttname"><a href="ut0mutex_8h.html">ut0mutex.h</a></div><div class="ttdoc">Policy based mutexes. </div></div>
<div class="ttc" id="classClone__Sys_html_ac27d94779d555d48e9a137657255cc03"><div class="ttname"><a href="classClone__Sys.html#ac27d94779d555d48e9a137657255cc03">Clone_Sys::s_clone_abort_count</a></div><div class="ttdeci">static uint s_clone_abort_count</div><div class="ttdoc">Number of active abort requests. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1021</div></div>
<div class="ttc" id="structClone__Task__Meta_html_a3d3bfc9e53ab63a005793af8f9b4b62e"><div class="ttname"><a href="structClone__Task__Meta.html#a3d3bfc9e53ab63a005793af8f9b4b62e">Clone_Task_Meta::m_block_num</a></div><div class="ttdeci">uint m_block_num</div><div class="ttdoc">Current block number that is already transferred. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:178</div></div>
<div class="ttc" id="clone0desc_8h_html_ad9fa4db4462b38df011362f52da7a8f2aafabb5179c4b5d9bbf01825af998188a"><div class="ttname"><a href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2aafabb5179c4b5d9bbf01825af998188a">CLONE_SNAPSHOT_INIT</a></div><div class="ttdoc">Initialize state when snapshot object is created. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:97</div></div>
<div class="ttc" id="clone0monitor_8h_html_a2e0c5f071f51db5e1b358916807c5694"><div class="ttname"><a href="clone0monitor_8h.html#a2e0c5f071f51db5e1b358916807c5694">Clone_Alert_Func</a></div><div class="ttdeci">std::function&lt; int()&gt; Clone_Alert_Func</div><div class="ttdoc">Function to alert caller for long wait. </div><div class="ttdef"><b>Definition:</b> clone0monitor.h:42</div></div>
<div class="ttc" id="classClone__Handle_html_afb9e0074092400fd8be35b2679115508"><div class="ttname"><a href="classClone__Handle.html#afb9e0074092400fd8be35b2679115508">Clone_Handle::check_error</a></div><div class="ttdeci">int check_error(THD *thd)</div><div class="ttdoc">Check for error from other tasks and DDL. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:627</div></div>
<div class="ttc" id="clone0clone_8h_html_a9fb03aaa960c11fac23b6f6c695046a6"><div class="ttname"><a href="clone0clone_8h.html#a9fb03aaa960c11fac23b6f6c695046a6">Clone_Sec</a></div><div class="ttdeci">std::chrono::seconds Clone_Sec</div><div class="ttdef"><b>Definition:</b> clone0clone.h:93</div></div>
<div class="ttc" id="group__Replication_html_ga2fc76e97a75b02d55803a3c4aa14f5a7"><div class="ttname"><a href="group__Replication.html#ga2fc76e97a75b02d55803a3c4aa14f5a7">is_network_error</a></div><div class="ttdeci">static bool is_network_error(uint errorno)</div><div class="ttdef"><b>Definition:</b> rpl_slave.cc:2264</div></div>
<div class="ttc" id="ut0dbg_8h_html_a17113dab7f37e298e889ac8818ab13d0"><div class="ttname"><a href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a></div><div class="ttdeci">#define ut_ad(EXPR)</div><div class="ttdoc">Debug assertion. </div><div class="ttdef"><b>Definition:</b> ut0dbg.h:66</div></div>
<div class="ttc" id="ut0ut_8h_html_a3e075761a4687069aecd2e080344189b"><div class="ttname"><a href="ut0ut_8h.html#a3e075761a4687069aecd2e080344189b">ib_time_monotonic_ms_t</a></div><div class="ttdeci">int64_t ib_time_monotonic_ms_t</div><div class="ttdoc">Number of milliseconds read from the monotonic clock (returned by ut_time_monotonic_ms()). </div><div class="ttdef"><b>Definition:</b> ut0ut.h:93</div></div>
<div class="ttc" id="classClone__Task__Manager_html_ab57f9da2f713065eaf385df4b008bc40"><div class="ttname"><a href="classClone__Task__Manager.html#ab57f9da2f713065eaf385df4b008bc40">Clone_Task_Manager::m_next_state</a></div><div class="ttdeci">Snapshot_State m_next_state</div><div class="ttdoc">Next state: used during state transfer. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:526</div></div>
<div class="ttc" id="classClone__Handle_html_af89296ceff8dffcd6a4b355d742ffb52"><div class="ttname"><a href="classClone__Handle.html#af89296ceff8dffcd6a4b355d742ffb52">Clone_Handle::get_index</a></div><div class="ttdeci">uint get_index()</div><div class="ttdoc">Get clone handle index in clone array. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:643</div></div>
<div class="ttc" id="classClone__Handle_html_af9277b82873cd209907729571fe72581"><div class="ttname"><a href="classClone__Handle.html#af9277b82873cd209907729571fe72581">Clone_Handle::add_task</a></div><div class="ttdeci">int add_task(THD *thd, const byte *ref_loc, uint ref_len, uint &amp;task_id)</div><div class="ttdoc">Add a task to clone handle. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:604</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a2dbd9f81f67c3c4474cb77ec1c3e21cf"><div class="ttname"><a href="classClone__Task__Manager.html#a2dbd9f81f67c3c4474cb77ec1c3e21cf">Clone_Task_Manager::is_restarted</a></div><div class="ttdeci">bool is_restarted()</div><div class="ttdoc">Check if clone is restarted after failure. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:417</div></div>
<div class="ttc" id="classClone__Sys_html"><div class="ttname"><a href="classClone__Sys.html">Clone_Sys</a></div><div class="ttdoc">Clone System. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:938</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a76beec79d7a9a8668a699d2b3441fbd1"><div class="ttname"><a href="classClone__Task__Manager.html#a76beec79d7a9a8668a699d2b3441fbd1">Clone_Task_Manager::m_saved_error</a></div><div class="ttdeci">int m_saved_error</div><div class="ttdoc">Save any error raised by a task. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:535</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a8e5e19a8bbbee4f0a4cda7587cec1145"><div class="ttname"><a href="classClone__Task__Manager.html#a8e5e19a8bbbee4f0a4cda7587cec1145">Clone_Task_Manager::m_ack_state</a></div><div class="ttdeci">Snapshot_State m_ack_state</div><div class="ttdoc">Acknowledged state from client. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:520</div></div>
<div class="ttc" id="classClone__Task__Manager_html_af24c8dc24c80cc44d1b0c1cc31d74b15"><div class="ttname"><a href="classClone__Task__Manager.html#af24c8dc24c80cc44d1b0c1cc31d74b15">Clone_Task_Manager::reset_chunk</a></div><div class="ttdeci">void reset_chunk(Clone_Task *task)</div><div class="ttdoc">Reset chunk information for task. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:245</div></div>
<div class="ttc" id="classClone__Task__Manager_html_ac1b7b2f25ea63ad198c591a7296a0ef9"><div class="ttname"><a href="classClone__Task__Manager.html#ac1b7b2f25ea63ad198c591a7296a0ef9">Clone_Task_Manager::in_transit_state</a></div><div class="ttdeci">bool in_transit_state()</div><div class="ttdoc">Check if in state transition. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:330</div></div>
<div class="ttc" id="classClone__Task__Manager_html_ac6a0ea504bfaad967d2a665460fda742"><div class="ttname"><a href="classClone__Task__Manager.html#ac6a0ea504bfaad967d2a665460fda742">Clone_Task_Manager::m_current_state</a></div><div class="ttdeci">Snapshot_State m_current_state</div><div class="ttdoc">Current state for clone. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:523</div></div>
<div class="ttc" id="classClone__Handle_html_a32ac0815c17fa31b2d263cff6e1bbd63"><div class="ttname"><a href="classClone__Handle.html#a32ac0815c17fa31b2d263cff6e1bbd63">Clone_Handle::is_active</a></div><div class="ttdeci">bool is_active()</div><div class="ttdoc">Check if clone state is active. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:666</div></div>
<div class="ttc" id="clone0clone_8h_html_ac92bf1d56f3aa4b6528f203064caa39a"><div class="ttname"><a href="clone0clone_8h.html#ac92bf1d56f3aa4b6528f203064caa39a">CLONE_DEF_TIMEOUT</a></div><div class="ttdeci">const Clone_Min CLONE_DEF_TIMEOUT</div><div class="ttdoc">Default timeout in multiple of sleep time: 30 minutes. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:103</div></div>
<div class="ttc" id="structClone__Task_html_a47b28dcfcfd1fd9ed12ad977f4095471"><div class="ttname"><a href="structClone__Task.html#a47b28dcfcfd1fd9ed12ad977f4095471">Clone_Task::m_debug_counter</a></div><div class="ttdeci">int m_debug_counter</div><div class="ttdoc">Counter to restart in different state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:172</div></div>
<div class="ttc" id="mysql__config__editor_8cc_html_a14ba597917108e3c1937893de7c4ac0c"><div class="ttname"><a href="mysql__config__editor_8cc.html#a14ba597917108e3c1937893de7c4ac0c">file_size</a></div><div class="ttdeci">static size_t file_size</div><div class="ttdef"><b>Definition:</b> mysql_config_editor.cc:70</div></div>
<div class="ttc" id="ut0mutex_8h_html_aba9ab29617d78284418d99bc1a06865d"><div class="ttname"><a href="ut0mutex_8h.html#aba9ab29617d78284418d99bc1a06865d">mutex_enter</a></div><div class="ttdeci">#define mutex_enter(M)</div><div class="ttdef"><b>Definition:</b> ut0mutex.h:115</div></div>
<div class="ttc" id="classClone__Task__Manager_html_aac330ece7ed1d2215ae0ade7494fcbac"><div class="ttname"><a href="classClone__Task__Manager.html#aac330ece7ed1d2215ae0ade7494fcbac">Clone_Task_Manager::set_file_meta_transferred</a></div><div class="ttdeci">void set_file_meta_transferred()</div><div class="ttdoc">Set sub-state: all file metadata is transferred. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:377</div></div>
<div class="ttc" id="clone0clone_8h_html_a558460c584978bd35eb4dcbac37d4997"><div class="ttname"><a href="clone0clone_8h.html#a558460c584978bd35eb4dcbac37d4997">Clone_Task_State</a></div><div class="ttdeci">Clone_Task_State</div><div class="ttdoc">Clone task state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:123</div></div>
<div class="ttc" id="classClone__Handle_html_ae3347a0bf855789c524a0c09ded85149"><div class="ttname"><a href="classClone__Handle.html#ae3347a0bf855789c524a0c09ded85149">Clone_Handle::m_clone_handle_type</a></div><div class="ttdeci">Clone_Handle_Type m_clone_handle_type</div><div class="ttdoc">Clone handle type: Copy, Apply. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:895</div></div>
<div class="ttc" id="classClone__Sys_html_acdea68e2f1428eed261ce663d97a295a"><div class="ttname"><a href="classClone__Sys.html#acdea68e2f1428eed261ce663d97a295a">Clone_Sys::m_clone_sys_mutex</a></div><div class="ttdeci">ib_mutex_t m_clone_sys_mutex</div><div class="ttdoc">Clone system mutex. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1126</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a57e998e764bda6504e5a682676056334"><div class="ttname"><a href="classClone__Task__Manager.html#a57e998e764bda6504e5a682676056334">Clone_Task_Manager::reset_error</a></div><div class="ttdeci">void reset_error()</div><div class="ttdoc">Reset error information. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:319</div></div>
<div class="ttc" id="clone0clone_8h_html_aaf626ad1ad5ef7eb535c52f7e30b0510"><div class="ttname"><a href="clone0clone_8h.html#aaf626ad1ad5ef7eb535c52f7e30b0510">CLONE_INNODB_IN_PROGRESS_FILE</a></div><div class="ttdeci">const char CLONE_INNODB_IN_PROGRESS_FILE[]</div><div class="ttdoc">Clone in progress file name. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:59</div></div>
<div class="ttc" id="classClone__Handle_html_a4de2e1b8ff866bda65a62bed107ea5c3"><div class="ttname"><a href="classClone__Handle.html#a4de2e1b8ff866bda65a62bed107ea5c3">Clone_Handle::m_restart_loc_len</a></div><div class="ttdeci">uint m_restart_loc_len</div><div class="ttdoc">Restart locator length in bytes. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:913</div></div>
<div class="ttc" id="structpfs__os__file__t_html"><div class="ttname"><a href="structpfs__os__file__t.html">pfs_os_file_t</a></div><div class="ttdoc">Common file descriptor for file IO instrumentation with PFS on windows and other platforms. </div><div class="ttdef"><b>Definition:</b> os0file.h:152</div></div>
<div class="ttc" id="structClone__Task_html"><div class="ttname"><a href="structClone__Task.html">Clone_Task</a></div><div class="ttdoc">Task for clone operation. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:139</div></div>
<div class="ttc" id="structClone__Task_html_ad5d4e4ef93e2789b101ce18bc6bf617d"><div class="ttname"><a href="structClone__Task.html#ad5d4e4ef93e2789b101ce18bc6bf617d">Clone_Task::m_has_thd</a></div><div class="ttdeci">bool m_has_thd</div><div class="ttdoc">If task has associated session. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:165</div></div>
<div class="ttc" id="ut0mutex_8h_html_aa55ad8b49fb970ed42f72485f53e1547"><div class="ttname"><a href="ut0mutex_8h.html#aa55ad8b49fb970ed42f72485f53e1547">mutex_exit</a></div><div class="ttdeci">#define mutex_exit(M)</div><div class="ttdef"><b>Definition:</b> ut0mutex.h:122</div></div>
<div class="ttc" id="clone0clone_8h_html_abab72de7eb4f289336e3db0d14cd2121"><div class="ttname"><a href="clone0clone_8h.html#abab72de7eb4f289336e3db0d14cd2121">SNAPSHOT_ARR_SIZE</a></div><div class="ttdeci">const int SNAPSHOT_ARR_SIZE</div><div class="ttdoc">Snapshot system array size. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:135</div></div>
<div class="ttc" id="clone0clone_8h_html_ac5208dcb489ab0e88279fc85f720683c"><div class="ttname"><a href="clone0clone_8h.html#ac5208dcb489ab0e88279fc85f720683c">CLONE_INNODB_REPLACED_FILE_EXTN</a></div><div class="ttdeci">const char CLONE_INNODB_REPLACED_FILE_EXTN[]</div><div class="ttdoc">Clone file extension for files to be replaced. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:87</div></div>
<div class="ttc" id="clone0clone_8h_html_a2bd4405b46f47473cf950e71260a5462a7410d9f301e973ced01602bb530b012c"><div class="ttname"><a href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a7410d9f301e973ced01602bb530b012c">CLONE_STATE_ABORT</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:119</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a3dbbd43394883fa746354c623d764bca"><div class="ttname"><a href="classClone__Task__Manager.html#a3dbbd43394883fa746354c623d764bca">Clone_Task_Manager::is_network_error</a></div><div class="ttdeci">bool is_network_error(int err)</div><div class="ttdoc">Check if network error. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:449</div></div>
<div class="ttc" id="structClone__Task_html_afb26f530d284abe4385eab5e505934bd"><div class="ttname"><a href="structClone__Task.html#afb26f530d284abe4385eab5e505934bd">Clone_Task::m_serial_desc</a></div><div class="ttdeci">byte * m_serial_desc</div><div class="ttdoc">Serial descriptor byte string. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:147</div></div>
<div class="ttc" id="classClone__Task__Manager_html_ab71a0f3ea0720c08be084e3f5e54a3ab"><div class="ttname"><a href="classClone__Task__Manager.html#ab71a0f3ea0720c08be084e3f5e54a3ab">Clone_Task_Manager::m_err_file_name</a></div><div class="ttdeci">char * m_err_file_name</div><div class="ttdoc">File name related to the saved error. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:538</div></div>
<div class="ttc" id="structClone__Task_html_a1285b4fe5a7c97b7480521a28c49a081"><div class="ttname"><a href="structClone__Task.html#a1285b4fe5a7c97b7480521a28c49a081">Clone_Task::m_current_file_index</a></div><div class="ttdeci">uint m_current_file_index</div><div class="ttdoc">Current file index. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:156</div></div>
<div class="ttc" id="os0file_8h_html_a0f3d7d02da5476b3410e9501a8922af7"><div class="ttname"><a href="os0file_8h.html#a0f3d7d02da5476b3410e9501a8922af7">OS_FILE_PREFIX</a></div><div class="ttdeci">#define OS_FILE_PREFIX</div><div class="ttdoc">Prefix all files and directory created under data directory with special string so that it never conf...</div><div class="ttdef"><b>Definition:</b> os0file.h:67</div></div>
<div class="ttc" id="namespacefile_html"><div class="ttname"><a href="namespacefile.html">file</a></div><div class="ttdef"><b>Definition:</b> os0file.h:85</div></div>
<div class="ttc" id="clone0clone_8h_html_a2753575659d811be0d7d4f1551566d14"><div class="ttname"><a href="clone0clone_8h.html#a2753575659d811be0d7d4f1551566d14">CLONE_INNODB_OLD_FILES</a></div><div class="ttdeci">const char CLONE_INNODB_OLD_FILES[]</div><div class="ttdoc">Clone file name for list of old files to be removed. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:83</div></div>
<div class="ttc" id="classClone__Sys_html_a4fe392ee930116ab0f03ee982be2ac04"><div class="ttname"><a href="classClone__Sys.html#a4fe392ee930116ab0f03ee982be2ac04">Clone_Sys::m_num_clones</a></div><div class="ttdeci">uint m_num_clones</div><div class="ttdoc">Number of copy clones. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1111</div></div>
<div class="ttc" id="classClone__Sys_html_a5bc5cb187896ca2b81a625a575b70e2b"><div class="ttname"><a href="classClone__Sys.html#a5bc5cb187896ca2b81a625a575b70e2b">Clone_Sys::wait</a></div><div class="ttdeci">static int wait(Clone_Msec sleep_time, Clone_Sec timeout, Clone_Sec alert_interval, Wait_Cond_Cbk_Func &amp;&amp;func, ib_mutex_t *mutex, bool &amp;is_timeout)</div><div class="ttdoc">Wait till the condition is satisfied or timeout. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1040</div></div>
<div class="ttc" id="clone0clone_8h_html_a2bd4405b46f47473cf950e71260a5462a9fe408c44204945674f4441f6af7c452"><div class="ttname"><a href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a9fe408c44204945674f4441f6af7c452">CLONE_STATE_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:117</div></div>
<div class="ttc" id="clone0clone_8h_html_a2bd4405b46f47473cf950e71260a5462"><div class="ttname"><a href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462">Clone_Handle_State</a></div><div class="ttdeci">Clone_Handle_State</div><div class="ttdoc">Clone Handle State. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:115</div></div>
<div class="ttc" id="mysql__ssl__rsa__setup_8cc_html_a5f4e2d00e13f7f971e3fbce0dee76947"><div class="ttname"><a href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a></div><div class="ttdeci">Log info(cout, &quot;NOTE&quot;)</div></div>
<div class="ttc" id="namespacenet_1_1impl_1_1socket_html_af0aef40a99065320448f6e90710198cc"><div class="ttname"><a href="namespacenet_1_1impl_1_1socket.html#af0aef40a99065320448f6e90710198cc">net::impl::socket::wait</a></div><div class="ttdeci">stdx::expected&lt; void, error_type &gt; wait(native_handle_type fd, wait_type wt)</div><div class="ttdef"><b>Definition:</b> socket.h:580</div></div>
<div class="ttc" id="clone0snapshot_8h_html_a516dd8934f7b16de2ba80510120739ccad817c8c58aa8871bd6d12bcec378d2cf"><div class="ttname"><a href="clone0snapshot_8h.html#a516dd8934f7b16de2ba80510120739ccad817c8c58aa8871bd6d12bcec378d2cf">CLONE_HDL_COPY</a></div><div class="ttdoc">Clone Handle for COPY. </div><div class="ttdef"><b>Definition:</b> clone0snapshot.h:91</div></div>
<div class="ttc" id="classClone__Sys_html_a27495e75a817ce1f1f654f646bb7c267"><div class="ttname"><a href="classClone__Sys.html#a27495e75a817ce1f1f654f646bb7c267">Clone_Sys::m_num_apply_clones</a></div><div class="ttdeci">uint m_num_apply_clones</div><div class="ttdoc">Number of apply clones. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:1114</div></div>
<div class="ttc" id="ut0mutex_8h_html_a7eccf8a96f24ab7f4012bb203640cf17"><div class="ttname"><a href="ut0mutex_8h.html#a7eccf8a96f24ab7f4012bb203640cf17">mutex_own</a></div><div class="ttdeci">#define mutex_own(M)</div><div class="ttdoc">Checks that the current thread owns the mutex. </div><div class="ttdef"><b>Definition:</b> ut0mutex.h:156</div></div>
<div class="ttc" id="classClone__Handle_html_af9c1174c2bf67655aa6778e274c11783"><div class="ttname"><a href="classClone__Handle.html#af9c1174c2bf67655aa6778e274c11783">Clone_Handle::is_abort</a></div><div class="ttdeci">bool is_abort()</div><div class="ttdoc">Check if clone is aborted. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:678</div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="clone0clone_8h_html_a2bd4405b46f47473cf950e71260a5462a15a782f2367c11ca3a9ee11a3f9c4eec"><div class="ttname"><a href="clone0clone_8h.html#a2bd4405b46f47473cf950e71260a5462a15a782f2367c11ca3a9ee11a3f9c4eec">CLONE_STATE_INIT</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:116</div></div>
<div class="ttc" id="clone0snapshot_8h_html"><div class="ttname"><a href="clone0snapshot_8h.html">clone0snapshot.h</a></div><div class="ttdoc">Database Physical Snapshot. </div></div>
<div class="ttc" id="clone0desc_8h_html_ad9fa4db4462b38df011362f52da7a8f2a6a608cd2d97a992d99b5ac64e993c37a"><div class="ttname"><a href="clone0desc_8h.html#ad9fa4db4462b38df011362f52da7a8f2a6a608cd2d97a992d99b5ac64e993c37a">CLONE_SNAPSHOT_NONE</a></div><div class="ttdoc">Invalid state. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:94</div></div>
<div class="ttc" id="classClone__Handle_html_a3a20a2fd5d0b8e8c8d3954f66662e183"><div class="ttname"><a href="classClone__Handle.html#a3a20a2fd5d0b8e8c8d3954f66662e183">Clone_Handle::is_copy_clone</a></div><div class="ttdeci">bool is_copy_clone() const</div><div class="ttdoc">Check if it is copy clone. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:651</div></div>
<div class="ttc" id="clone0clone_8h_html_af30a5d3d3eb8dae128e8b06588b62944"><div class="ttname"><a href="clone0clone_8h.html#af30a5d3d3eb8dae128e8b06588b62944">CLONE_DEF_ALERT_INTERVAL</a></div><div class="ttdeci">const Clone_Sec CLONE_DEF_ALERT_INTERVAL</div><div class="ttdoc">Default alert interval in multiple of sleep time: 5 seconds. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:100</div></div>
<div class="ttc" id="structChunk__Info_html"><div class="ttname"><a href="structChunk__Info.html">Chunk_Info</a></div><div class="ttdoc">Incomplete Chunk information. </div><div class="ttdef"><b>Definition:</b> clone0desc.h:314</div></div>
<div class="ttc" id="structClone__Task_html_a4efcccea37165a8c1feb99f887678cb4"><div class="ttname"><a href="structClone__Task.html#a4efcccea37165a8c1feb99f887678cb4">Clone_Task::m_task_meta</a></div><div class="ttdeci">Clone_Task_Meta m_task_meta</div><div class="ttdoc">Task Meta data. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:141</div></div>
<div class="ttc" id="classClone__Handle_html_a86f739068ea2913e6d773fd45ead41a3"><div class="ttname"><a href="classClone__Handle.html#a86f739068ea2913e6d773fd45ead41a3">Clone_Handle::is_init</a></div><div class="ttdeci">bool is_init()</div><div class="ttdoc">Check if clone is initialized. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:670</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a2b7968d40eb39ce7503198e19590cf2e"><div class="ttname"><a href="classClone__Task__Manager.html#a2b7968d40eb39ce7503198e19590cf2e">Clone_Task_Manager::reset_transition</a></div><div class="ttdeci">void reset_transition()</div><div class="ttdoc">Reset state transition information. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:312</div></div>
<div class="ttc" id="classClone__Task__Manager_html_aa7e94c3115590567065b213ac0e4c5b1"><div class="ttname"><a href="classClone__Task__Manager.html#aa7e94c3115590567065b213ac0e4c5b1">Clone_Task_Manager::is_file_metadata_transferred</a></div><div class="ttdeci">bool is_file_metadata_transferred() const</div><div class="ttdef"><b>Definition:</b> clone0clone.h:372</div></div>
<div class="ttc" id="clone0clone_8h_html_a19914ee6be34b23b79c58a0cb0aa53a7"><div class="ttname"><a href="clone0clone_8h.html#a19914ee6be34b23b79c58a0cb0aa53a7">CLONE_INNODB_RECOVERY_FILE</a></div><div class="ttdeci">const char CLONE_INNODB_RECOVERY_FILE[]</div><div class="ttdoc">Clone recovery status. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:71</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a82a4da1c2e9f1dee43d5e76860fe84bf"><div class="ttname"><a href="classClone__Task__Manager.html#a82a4da1c2e9f1dee43d5e76860fe84bf">Clone_Task_Manager::set_error</a></div><div class="ttdeci">void set_error(int err, const char *file_name)</div><div class="ttdoc">Set error number. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:206</div></div>
<div class="ttc" id="clone0clone_8h_html_a04a51432368dca2e99c6df8bde9d0ae5aa5a1e0c77435af8ca1431a11cb5523a3"><div class="ttname"><a href="clone0clone_8h.html#a04a51432368dca2e99c6df8bde9d0ae5aa5a1e0c77435af8ca1431a11cb5523a3">CLONE_SYS_ABORT</a></div><div class="ttdef"><b>Definition:</b> clone0clone.h:109</div></div>
<div class="ttc" id="classClone__Task__Manager_html_ad822294bc58ee74007866adb43de14b3"><div class="ttname"><a href="classClone__Task__Manager.html#ad822294bc58ee74007866adb43de14b3">Clone_Task_Manager::get_state</a></div><div class="ttdeci">Snapshot_State get_state()</div><div class="ttdoc">Get current clone state. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:326</div></div>
<div class="ttc" id="namespaceCounter_html_a6129f96f99b4dc9358a7efaa40f84c30"><div class="ttname"><a href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">Counter::copy</a></div><div class="ttdeci">void copy(Shards&lt; COUNT &gt; &amp;dst, const Shards&lt; COUNT &gt; &amp;src) noexcept</div><div class="ttdoc">Copy the counters, overwrite destination. </div><div class="ttdef"><b>Definition:</b> ut0counter.h:353</div></div>
<div class="ttc" id="classClone__Handle_html_a60f4e583e81ac6189a2514811e649e5f"><div class="ttname"><a href="classClone__Handle.html#a60f4e583e81ac6189a2514811e649e5f">Clone_Handle::m_clone_arr_index</a></div><div class="ttdeci">uint m_clone_arr_index</div><div class="ttdoc">Index in global array. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:919</div></div>
<div class="ttc" id="classTHD_html"><div class="ttname"><a href="classTHD.html">THD</a></div><div class="ttdoc">For each client connection we create a separate thread with THD serving as a thread/connection descri...</div><div class="ttdef"><b>Definition:</b> sql_class.h:803</div></div>
<div class="ttc" id="classClone__Task__Manager_html_a5b60364beffdf051c32d4ac886cecac4"><div class="ttname"><a href="classClone__Task__Manager.html#a5b60364beffdf051c32d4ac886cecac4">Clone_Task_Manager::m_clone_snapshot</a></div><div class="ttdeci">Clone_Snapshot * m_clone_snapshot</div><div class="ttdoc">Attached snapshot handle. </div><div class="ttdef"><b>Definition:</b> clone0clone.h:544</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="clone0clone_8h.html">clone0clone.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
