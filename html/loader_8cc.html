<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: router/src/harness/src/loader.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('loader_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">loader.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="loader_8h_source.html">mysql/harness/loader.h</a>&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;array&gt;</code><br />
<code>#include &lt;atomic&gt;</code><br />
<code>#include &lt;cassert&gt;</code><br />
<code>#include &lt;cctype&gt;</code><br />
<code>#include &lt;cstdarg&gt;</code><br />
<code>#include &lt;cstring&gt;</code><br />
<code>#include &lt;exception&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;mutex&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;stdexcept&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;system_error&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;<a class="el" href="dlfcn_8h_source.html">dlfcn.h</a>&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="builtin__plugins_8h_source.html">builtin_plugins.h</a>&quot;</code><br />
<code>#include &quot;common.h&quot;</code><br />
<code>#include &quot;<a class="el" href="designator_8h_source.html">designator.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dim_8h_source.html">dim.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="exception_8h_source.html">exception.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="harness__assert_8h_source.html">harness_assert.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__stacktrace_8h_source.html">my_stacktrace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="router_2src_2harness_2include_2mysql_2harness_2dynamic__loader_8h_source.html">mysql/harness/dynamic_loader.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="filesystem_8h_source.html">mysql/harness/filesystem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logging_8h_source.html">mysql/harness/logging/logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="router_2src_2harness_2include_2mysql_2harness_2logging_2registry_8h_source.html">mysql/harness/logging/registry.h</a>&quot;</code><br />
<code>#include &quot;mysql/harness/plugin.h&quot;</code><br />
<code>#include &quot;<a class="el" href="router_2src_2harness_2include_2mysql_2harness_2sd__notify_8h_source.html">mysql/harness/sd_notify.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utilities_8h_source.html">utilities.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__compiler_8h_source.html">my_compiler.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacemysql__harness"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html">mysql_harness</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceunittest__backdoor"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceunittest__backdoor.html">unittest_backdoor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a764a170fe1004bce36a7334071c5da58"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a764a170fe1004bce36a7334071c5da58">MYSQL_ROUTER_LOG_DOMAIN</a>&#160;&#160;&#160;::<a class="el" href="namespacemysql__harness_1_1logging.html#a2f4456a93cd263812cba3667315efdf4">mysql_harness::logging::kMainLogger</a></td></tr>
<tr class="separator:a764a170fe1004bce36a7334071c5da58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf82b26c8e776f5826317ee13773365d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#acf82b26c8e776f5826317ee13773365d">USE_POSIX_SIGNALS</a></td></tr>
<tr class="separator:acf82b26c8e776f5826317ee13773365d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af989845e24678c452b9222afdac95e7f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#af989845e24678c452b9222afdac95e7f">__has_feature</a>(x)&#160;&#160;&#160;0</td></tr>
<tr class="separator:af989845e24678c452b9222afdac95e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac15feadddf190f5a20bdbf147b2aeb1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#ac15feadddf190f5a20bdbf147b2aeb1a">request_application_shutdown</a> (const <a class="el" href="loader_8h.html#a17fef9dd2263890ba6250d6e448ee1ac">ShutdownReason</a> reason)</td></tr>
<tr class="memdesc:ac15feadddf190f5a20bdbf147b2aeb1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">request application shutdown.  <a href="#ac15feadddf190f5a20bdbf147b2aeb1a">More...</a><br /></td></tr>
<tr class="separator:ac15feadddf190f5a20bdbf147b2aeb1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d792a4db86ff1019a0971c825095893"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a3d792a4db86ff1019a0971c825095893">request_log_reopen</a> (const std::string dst)</td></tr>
<tr class="memdesc:a3d792a4db86ff1019a0971c825095893"><td class="mdescLeft">&#160;</td><td class="mdescRight">notify a "log_reopen" is requested with optional filename for old logfile.  <a href="#a3d792a4db86ff1019a0971c825095893">More...</a><br /></td></tr>
<tr class="separator:a3d792a4db86ff1019a0971c825095893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c48f1d6aebdc3b1d85b7473337203e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a3c48f1d6aebdc3b1d85b7473337203e0">log_reopen_completed</a> ()</td></tr>
<tr class="memdesc:a3c48f1d6aebdc3b1d85b7473337203e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">check reopen completed  <a href="#a3c48f1d6aebdc3b1d85b7473337203e0">More...</a><br /></td></tr>
<tr class="separator:a3c48f1d6aebdc3b1d85b7473337203e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67e9bbd1ee5d5994f25831a339f69f0a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a67e9bbd1ee5d5994f25831a339f69f0a">log_reopen_get_error</a> ()</td></tr>
<tr class="memdesc:a67e9bbd1ee5d5994f25831a339f69f0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">get last log reopen error  <a href="#a67e9bbd1ee5d5994f25831a339f69f0a">More...</a><br /></td></tr>
<tr class="separator:a67e9bbd1ee5d5994f25831a339f69f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a53fa48686080290f67887f4bac58b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a23a53fa48686080290f67887f4bac58b">block_all_nonfatal_signals</a> ()</td></tr>
<tr class="separator:a23a53fa48686080290f67887f4bac58b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a127332b06331266f32d00f6feec341b9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a127332b06331266f32d00f6feec341b9">register_fatal_signal_handler</a> ()</td></tr>
<tr class="separator:a127332b06331266f32d00f6feec341b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dbc83c859924f1dcfcdbda55d9095ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a0dbc83c859924f1dcfcdbda55d9095ae">set_log_reopen_complete_callback</a> (<a class="el" href="loader_8h.html#ac45a88fed51b6a8380d94dcafe09c8de">log_reopen_callback</a> cb)</td></tr>
<tr class="memdesc:a0dbc83c859924f1dcfcdbda55d9095ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the log reopen completion callback function pointer.  <a href="#a0dbc83c859924f1dcfcdbda55d9095ae">More...</a><br /></td></tr>
<tr class="separator:a0dbc83c859924f1dcfcdbda55d9095ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb31c4278799f37ce9ef0ed82a68b9b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#abb31c4278799f37ce9ef0ed82a68b9b0">default_log_reopen_complete_cb</a> (const std::string errmsg)</td></tr>
<tr class="memdesc:abb31c4278799f37ce9ef0ed82a68b9b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default implementation for log reopen thread completion callback function.  <a href="#abb31c4278799f37ce9ef0ed82a68b9b0">More...</a><br /></td></tr>
<tr class="separator:abb31c4278799f37ce9ef0ed82a68b9b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a907b7d6b731faa27ce869b84d255896c"><td class="memItemLeft" align="right" valign="top">const AppInfo *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#a907b7d6b731faa27ce869b84d255896c">mysql_harness::get_app_info</a> (const PluginFuncEnv *env) noexcept</td></tr>
<tr class="separator:a907b7d6b731faa27ce869b84d255896c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6ee031fb1b87155ddfa09480d2e538f"><td class="memItemLeft" align="right" valign="top">const ConfigSection *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#ab6ee031fb1b87155ddfa09480d2e538f">mysql_harness::get_config_section</a> (const PluginFuncEnv *env) noexcept</td></tr>
<tr class="separator:ab6ee031fb1b87155ddfa09480d2e538f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae00c941138a68ea9f962cd351e7b2410"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#ae00c941138a68ea9f962cd351e7b2410">mysql_harness::is_running</a> (const PluginFuncEnv *env) noexcept</td></tr>
<tr class="separator:ae00c941138a68ea9f962cd351e7b2410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d6ce67c142c7694655e3edf25fe654"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#af3d6ce67c142c7694655e3edf25fe654">mysql_harness::wait_for_stop</a> (const PluginFuncEnv *env, uint32_t milliseconds) noexcept</td></tr>
<tr class="separator:af3d6ce67c142c7694655e3edf25fe654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6441b8f42a1e495e2005b10b3b42be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#afb6441b8f42a1e495e2005b10b3b42be">mysql_harness::clear_running</a> (PluginFuncEnv *env) noexcept</td></tr>
<tr class="separator:afb6441b8f42a1e495e2005b10b3b42be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa39704548324f048bb0e68703518278e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#aa39704548324f048bb0e68703518278e">mysql_harness::set_error</a> (PluginFuncEnv *env, ErrorType <a class="el" href="error_8h.html#a6756b9f30781ed8ca8ce938e49ad9d92">error_type</a>, const char *fmt,...) noexcept</td></tr>
<tr class="separator:aa39704548324f048bb0e68703518278e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e7e01810f4041757a9be30690eccfe6"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a6e7e01810f4041757a9be30690eccfe6"><td class="memTemplItemLeft" align="right" valign="top">T&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#a6e7e01810f4041757a9be30690eccfe6">mysql_harness::value_or</a> (T a, T b)</td></tr>
<tr class="memdesc:a6e7e01810f4041757a9be30690eccfe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a isn't set, return b.  <a href="namespacemysql__harness.html#a6e7e01810f4041757a9be30690eccfe6">More...</a><br /></td></tr>
<tr class="separator:a6e7e01810f4041757a9be30690eccfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a428d59ef97eeb67967f6b527af78ad3f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#a428d59ef97eeb67967f6b527af78ad3f">mysql_harness::call_plugin_function</a> (PluginFuncEnv *env, std::exception_ptr &amp;eptr, void(*fptr)(PluginFuncEnv *), const char *fnc_name, const char *<a class="el" href="sql__plugin__ref_8h.html#ad537e9b2cb95a53fbefddb577b32f92d">plugin_name</a>, const char *plugin_key=<a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>) noexcept</td></tr>
<tr class="separator:a428d59ef97eeb67967f6b527af78ad3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78df3b33c6c57a918a700a3765791cfa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#a78df3b33c6c57a918a700a3765791cfa">mysql_harness::on_service_ready</a> (const std::string &amp;<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="separator:a78df3b33c6c57a918a700a3765791cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3dd34f910bc29f49677bcd17834a3df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemysql__harness.html#aa3dd34f910bc29f49677bcd17834a3df">mysql_harness::on_service_ready</a> (PluginFuncEnv *plugin_env)</td></tr>
<tr class="separator:aa3dd34f910bc29f49677bcd17834a3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69ed7384cd20ca69bdde388c658a2708"><td class="memItemLeft" align="right" valign="top">HARNESS_EXPORT void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceunittest__backdoor.html#a69ed7384cd20ca69bdde388c658a2708">unittest_backdoor::set_shutdown_pending</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> shutdown_pending)</td></tr>
<tr class="separator:a69ed7384cd20ca69bdde388c658a2708"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aae9e80b6736f22d6d8bc7e5911a17121"><td class="memItemLeft" align="right" valign="top">static std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#aae9e80b6736f22d6d8bc7e5911a17121">num_of_non_ready_services</a> {0}</td></tr>
<tr class="separator:aae9e80b6736f22d6d8bc7e5911a17121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbd6e8e964b31685993da4f73eafb6ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#acbd6e8e964b31685993da4f73eafb6ac">we_might_shutdown_cond_mutex</a></td></tr>
<tr class="separator:acbd6e8e964b31685993da4f73eafb6ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a5af3df2d48ca88f7715565669645d0"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a8a5af3df2d48ca88f7715565669645d0">we_might_shutdown_cond</a></td></tr>
<tr class="separator:a8a5af3df2d48ca88f7715565669645d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e09be2189ec6743c2af92d55e42b640"><td class="memItemLeft" align="right" valign="top">static std::atomic&lt; <a class="el" href="loader_8h.html#a17fef9dd2263890ba6250d6e448ee1ac">ShutdownReason</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a3e09be2189ec6743c2af92d55e42b640">g_shutdown_pending</a> {<a class="el" href="loader_8h.html#a17fef9dd2263890ba6250d6e448ee1aca457d190da6ad9ff19972395c2ed14909">SHUTDOWN_NONE</a>}</td></tr>
<tr class="separator:a3e09be2189ec6743c2af92d55e42b640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63a98dfe95136049b403eb9a9d243872"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a63a98dfe95136049b403eb9a9d243872">shutdown_fatal_error_message</a></td></tr>
<tr class="separator:a63a98dfe95136049b403eb9a9d243872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc603327e15a70436329a52ec574844"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a0fc603327e15a70436329a52ec574844">log_reopen_cond_mutex</a></td></tr>
<tr class="separator:a0fc603327e15a70436329a52ec574844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ff2832f3004f3ff20664a0482001d5"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#ad1ff2832f3004f3ff20664a0482001d5">log_reopen_cond</a></td></tr>
<tr class="separator:ad1ff2832f3004f3ff20664a0482001d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeda7434cb3344f4126530ec07d647f83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#aeda7434cb3344f4126530ec07d647f83">g_reopen_thread_mtx</a></td></tr>
<tr class="separator:aeda7434cb3344f4126530ec07d647f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4de04b7b2c9f23d3f2700dc830dd4a34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmysql__harness_1_1LogReopenThread.html">mysql_harness::LogReopenThread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#a4de04b7b2c9f23d3f2700dc830dd4a34">g_reopen_thread</a> {<a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>}</td></tr>
<tr class="separator:a4de04b7b2c9f23d3f2700dc830dd4a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef9dc83dd81f349d6fde17db845d2342"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="loader_8h.html#ac45a88fed51b6a8380d94dcafe09c8de">log_reopen_callback</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="loader_8cc.html#aef9dc83dd81f349d6fde17db845d2342">g_log_reopen_complete_callback_fp</a></td></tr>
<tr class="separator:aef9dc83dd81f349d6fde17db845d2342"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af989845e24678c452b9222afdac95e7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af989845e24678c452b9222afdac95e7f">&#9670;&nbsp;</a></span>__has_feature</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __has_feature</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a764a170fe1004bce36a7334071c5da58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a764a170fe1004bce36a7334071c5da58">&#9670;&nbsp;</a></span>MYSQL_ROUTER_LOG_DOMAIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MYSQL_ROUTER_LOG_DOMAIN&#160;&#160;&#160;::<a class="el" href="namespacemysql__harness_1_1logging.html#a2f4456a93cd263812cba3667315efdf4">mysql_harness::logging::kMainLogger</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acf82b26c8e776f5826317ee13773365d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf82b26c8e776f5826317ee13773365d">&#9670;&nbsp;</a></span>USE_POSIX_SIGNALS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_POSIX_SIGNALS</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a23a53fa48686080290f67887f4bac58b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23a53fa48686080290f67887f4bac58b">&#9670;&nbsp;</a></span>block_all_nonfatal_signals()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void block_all_nonfatal_signals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abb31c4278799f37ce9ef0ed82a68b9b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb31c4278799f37ce9ef0ed82a68b9b0">&#9670;&nbsp;</a></span>default_log_reopen_complete_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void default_log_reopen_complete_cb </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>errmsg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The default implementation for log reopen thread completion callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errmsg</td><td>Error message. Empty string assumes successful completion. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c48f1d6aebdc3b1d85b7473337203e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c48f1d6aebdc3b1d85b7473337203e0">&#9670;&nbsp;</a></span>log_reopen_completed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> log_reopen_completed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check reopen completed </p>

</div>
</div>
<a id="a67e9bbd1ee5d5994f25831a339f69f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67e9bbd1ee5d5994f25831a339f69f0a">&#9670;&nbsp;</a></span>log_reopen_get_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string log_reopen_get_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get last log reopen error </p>

</div>
</div>
<a id="a127332b06331266f32d00f6feec341b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a127332b06331266f32d00f6feec341b9">&#9670;&nbsp;</a></span>register_fatal_signal_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void register_fatal_signal_handler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac15feadddf190f5a20bdbf147b2aeb1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac15feadddf190f5a20bdbf147b2aeb1a">&#9670;&nbsp;</a></span>request_application_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void request_application_shutdown </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="loader_8h.html#a17fef9dd2263890ba6250d6e448ee1ac">ShutdownReason</a>&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>request application shutdown. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::system_error</td><td>same as std::unique_lock::lock does </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3d792a4db86ff1019a0971c825095893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d792a4db86ff1019a0971c825095893">&#9670;&nbsp;</a></span>request_log_reopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void request_log_reopen </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>dst</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>notify a "log_reopen" is requested with optional filename for old logfile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>rename old logfile to filename before reopen </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::system_error</td><td>same as std::unique_lock::lock does </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0dbc83c859924f1dcfcdbda55d9095ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dbc83c859924f1dcfcdbda55d9095ae">&#9670;&nbsp;</a></span>set_log_reopen_complete_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_log_reopen_complete_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="loader_8h.html#ac45a88fed51b6a8380d94dcafe09c8de">log_reopen_callback</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the log reopen completion callback function pointer. </p>
<p>Setter for the log reopen thread completion callback function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>Function to call at completion. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aef9dc83dd81f349d6fde17db845d2342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef9dc83dd81f349d6fde17db845d2342">&#9670;&nbsp;</a></span>g_log_reopen_complete_callback_fp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="loader_8h.html#ac45a88fed51b6a8380d94dcafe09c8de">log_reopen_callback</a> g_log_reopen_complete_callback_fp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">    <a class="code" href="loader_8cc.html#abb31c4278799f37ce9ef0ed82a68b9b0">default_log_reopen_complete_cb</a></div><div class="ttc" id="loader_8cc_html_abb31c4278799f37ce9ef0ed82a68b9b0"><div class="ttname"><a href="loader_8cc.html#abb31c4278799f37ce9ef0ed82a68b9b0">default_log_reopen_complete_cb</a></div><div class="ttdeci">void default_log_reopen_complete_cb(const std::string errmsg)</div><div class="ttdoc">The default implementation for log reopen thread completion callback function. </div><div class="ttdef"><b>Definition:</b> loader.cc:244</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4de04b7b2c9f23d3f2700dc830dd4a34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4de04b7b2c9f23d3f2700dc830dd4a34">&#9670;&nbsp;</a></span>g_reopen_thread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmysql__harness_1_1LogReopenThread.html">mysql_harness::LogReopenThread</a>* g_reopen_thread {<a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aeda7434cb3344f4126530ec07d647f83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeda7434cb3344f4126530ec07d647f83">&#9670;&nbsp;</a></span>g_reopen_thread_mtx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> g_reopen_thread_mtx</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3e09be2189ec6743c2af92d55e42b640"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e09be2189ec6743c2af92d55e42b640">&#9670;&nbsp;</a></span>g_shutdown_pending</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="loader_8h.html#a17fef9dd2263890ba6250d6e448ee1ac">ShutdownReason</a>&gt; g_shutdown_pending {<a class="el" href="loader_8h.html#a17fef9dd2263890ba6250d6e448ee1aca457d190da6ad9ff19972395c2ed14909">SHUTDOWN_NONE</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad1ff2832f3004f3ff20664a0482001d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1ff2832f3004f3ff20664a0482001d5">&#9670;&nbsp;</a></span>log_reopen_cond</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable log_reopen_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0fc603327e15a70436329a52ec574844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fc603327e15a70436329a52ec574844">&#9670;&nbsp;</a></span>log_reopen_cond_mutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> log_reopen_cond_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aae9e80b6736f22d6d8bc7e5911a17121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae9e80b6736f22d6d8bc7e5911a17121">&#9670;&nbsp;</a></span>num_of_non_ready_services</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;size_t&gt; num_of_non_ready_services {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a63a98dfe95136049b403eb9a9d243872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63a98dfe95136049b403eb9a9d243872">&#9670;&nbsp;</a></span>shutdown_fatal_error_message</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string shutdown_fatal_error_message</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8a5af3df2d48ca88f7715565669645d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a5af3df2d48ca88f7715565669645d0">&#9670;&nbsp;</a></span>we_might_shutdown_cond</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable we_might_shutdown_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acbd6e8e964b31685993da4f73eafb6ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbd6e8e964b31685993da4f73eafb6ac">&#9670;&nbsp;</a></span>we_might_shutdown_cond_mutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">std::mutex</a> we_might_shutdown_cond_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_4070e3dcde23c4708577b59779296aa2.html">router</a></li><li class="navelem"><a class="el" href="dir_b5e597ac0f9d11d5a55729f4df6207b1.html">src</a></li><li class="navelem"><a class="el" href="dir_183101866ec878743d39b88655b53fb8.html">harness</a></li><li class="navelem"><a class="el" href="dir_1c6202864769804aa2689d3168e62b1a.html">src</a></li><li class="navelem"><a class="el" href="loader_8cc.html">loader.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
