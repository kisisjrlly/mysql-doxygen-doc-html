<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/buf0buf.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('buf0buf_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">buf0buf.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="buf0buf_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 1995, 2020, Oracle and/or its affiliates.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/buf0buf.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> The database buffer pool high-level routines</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> Created 11/5/1995 Heikki Tuuri</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *******************************************************/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifndef buf0buf_h</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define buf0buf_h</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="buf0types_8h.html">buf0types.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fil0fil_8h.html">fil0fil.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hash0hash_8h.html">hash0hash.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log0log_8h.html">log0log.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mtr0types_8h.html">mtr0types.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="os0proc_8h.html">os0proc.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="page0types_8h.html">page0types.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="srv0srv_8h.html">srv0srv.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;univ.i&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0byte_8h.html">ut0byte.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0rbt_8h.html">ut0rbt.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="buf_8h.html">buf/buf.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;ostream&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Forward declaration</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">struct </span><a class="code" href="structfil__addr__t.html">fil_addr_t</a>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/** @name Modes for buf_page_get_gen */</span><span class="comment"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/** @{ */</span></div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7">   57</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7">Page_fetch</a> {<span class="comment"></span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">  /** Get always */</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a1e23852820b9154316c7c06e2b7ba051">NORMAL</a>,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">  /** Same as NORMAL, but hint that the fetch is part of a large scan.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">  Try not to flood the buffer pool with pages that may not be accessed again</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">  any time soon. */</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7ae0740abfbc61bc2be0bfa78af61106ae">SCAN</a>,</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">  /** get if in pool */</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a3a90632a36734db3b6482458ab6197ae">IF_IN_POOL</a>,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">  /** get if in pool, do not make the block young in the LRU list */</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7aa3d31b8fe6ab7ba91ca6d2f934150826">PEEK_IF_IN_POOL</a>,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">  /** get and bufferfix, but set no latch; we have separated this case, because</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">  it is error-prone programming not to set a latch, and it  should be used with</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">  care */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a04e9d1744b4cb952e0c2021136069e86">NO_LATCH</a>,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">  /** Get the page only if it&#39;s in the buffer pool, if not then set a watch on</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">  the page. */</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a7ff1c3a50401e64e0178615f364354eb">IF_IN_POOL_OR_WATCH</a>,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">  /** Like Page_fetch::NORMAL, but do not mind if the file page has been</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">  freed. */</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7adfb541c10aa7ca324ca213508638d3f1">POSSIBLY_FREED</a></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;};<span class="comment"></span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/** @} */</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/** @name Modes for buf_page_get_known_nowait */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/** @{ */</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a0056c362020ff9e840fb48cb94c3cdba">   90</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="buf0buf_8h.html#a0056c362020ff9e840fb48cb94c3cdba">Cache_hint</a> {<span class="comment"></span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">  /** Move the block to the start of the LRU list if there is a danger that the</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">  block would drift out of the buffer  pool*/</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="buf0buf_8h.html#a0056c362020ff9e840fb48cb94c3cdbaa81e42709eb1489ed9631277fd401e145">MAKE_YOUNG</a> = 51,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">  /** Preserve the current LRU position of the block. */</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="buf0buf_8h.html#a0056c362020ff9e840fb48cb94c3cdbaaea4620022ddce35b312d7b4b01986f7a">KEEP_OLD</a> = 52</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;};</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/** @} */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">/** Number of bits to representing a buffer pool ID */</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aaa795024d029f835357042f72ee0611a">  102</a></span>&#160;constexpr ulint <a class="code" href="buf0buf_8h.html#aaa795024d029f835357042f72ee0611a">MAX_BUFFER_POOLS_BITS</a> = 6;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/** The maximum number of buffer pools that can be defined */</span></div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a93370087448a1c0e6a3054d13ca0fb81">  105</a></span>&#160;constexpr ulint <a class="code" href="buf0buf_8h.html#a93370087448a1c0e6a3054d13ca0fb81">MAX_BUFFER_POOLS</a> = (1 &lt;&lt; <a class="code" href="buf0buf_8h.html#aaa795024d029f835357042f72ee0611a">MAX_BUFFER_POOLS_BITS</a>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/** Maximum number of concurrent buffer pool watches */</span></div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a43a4f552119eafa1c0c2b71404c50ebe">  108</a></span>&#160;<span class="preprocessor">#define BUF_POOL_WATCH_SIZE (srv_n_purge_threads + 1)</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/** The maximum number of page_hash locks */</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a55ea539fcc36f30147cb4ee2f7917049">  111</a></span>&#160;constexpr ulint <a class="code" href="buf0buf_8h.html#a55ea539fcc36f30147cb4ee2f7917049">MAX_PAGE_HASH_LOCKS</a> = 1024;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/** The buffer pools of the database */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">extern</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *<a class="code" href="buf0buf_8h.html#a3fdf9e142c6096556e3722d7c91b9065">buf_pool_ptr</a>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#ifdef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/** first block, for --apply-log */</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">extern</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *back_block1;<span class="comment"></span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/** second block, for page reorganize */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keyword">extern</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *back_block2;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/** @brief States of a control block</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">@see buf_page_t</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">The enumeration values must be 0..7. */</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8a">  127</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8a">buf_page_state</a> {</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aaa5d948d8c9ee109afa2f2b05672a3930">  128</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aaa5d948d8c9ee109afa2f2b05672a3930">BUF_BLOCK_POOL_WATCH</a>, <span class="comment">/*!&lt; a sentinel for the buffer pool</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">                        watch, element of buf_pool-&gt;watch[] */</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa21e9fab74d2c9e64609dd53570bdfaec">  130</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa21e9fab74d2c9e64609dd53570bdfaec">BUF_BLOCK_ZIP_PAGE</a>,   <span class="comment">/*!&lt; contains a clean</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">                        compressed page */</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa9135ba69991c7e4a4943f289de621509">  132</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa9135ba69991c7e4a4943f289de621509">BUF_BLOCK_ZIP_DIRTY</a>,  <span class="comment">/*!&lt; contains a compressed</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">                        page that is in the</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">                        buf_pool-&gt;flush_list */</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa0d31b0fc25c2381e6f6d59e7eb671f7c">  136</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa0d31b0fc25c2381e6f6d59e7eb671f7c">BUF_BLOCK_NOT_USED</a>,      <span class="comment">/*!&lt; is in the free list;</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">                           must be after the BUF_BLOCK_ZIP_</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">                           constants for compressed-only pages</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">                           @see buf_block_state_valid() */</span></div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aad5dffb35305e497c0afd120525221d18">  140</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aad5dffb35305e497c0afd120525221d18">BUF_BLOCK_READY_FOR_USE</a>, <span class="comment">/*!&lt; when buf_LRU_get_free_block</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">                           returns a block, it is in this state */</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aaf26cdfc58e629f98cf27da284f6cf5f9">  142</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aaf26cdfc58e629f98cf27da284f6cf5f9">BUF_BLOCK_FILE_PAGE</a>,     <span class="comment">/*!&lt; contains a buffered file page */</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa7278567ff34beb6c693af5267611c4c7">  143</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa7278567ff34beb6c693af5267611c4c7">BUF_BLOCK_MEMORY</a>,        <span class="comment">/*!&lt; contains some main memory</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">                           object */</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa3eeed1a3010bb586fc0fa54581a9ef87">  145</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa3eeed1a3010bb586fc0fa54581a9ef87">BUF_BLOCK_REMOVE_HASH</a>    <span class="comment">/*!&lt; hash index should be removed</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">                           before putting to the free list */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;};</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/** This structure defines information we will fetch from each buffer pool. It</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">will be used to print table IO stats */</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html">  151</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbuf__pool__info__t.html">buf_pool_info_t</a> {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">/* General buffer pool info */</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a154fd399757c3ba651199783fd33562a">  153</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a154fd399757c3ba651199783fd33562a">pool_unique_id</a>;              <span class="comment">/*!&lt; Buffer Pool ID */</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#ac9f148ecfa80e3d53da32dc5877a6ac8">  154</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#ac9f148ecfa80e3d53da32dc5877a6ac8">pool_size</a>;                   <span class="comment">/*!&lt; Buffer Pool size in pages */</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a1a89d33fce3b5969627faceaee972c09">  155</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a1a89d33fce3b5969627faceaee972c09">lru_len</a>;                     <span class="comment">/*!&lt; Length of buf_pool-&gt;LRU */</span></div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a3ea9da225a971241f329dd7b1528c894">  156</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a3ea9da225a971241f329dd7b1528c894">old_lru_len</a>;                 <span class="comment">/*!&lt; buf_pool-&gt;LRU_old_len */</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#aa670dd955e37cd2e353de7f0374e9911">  157</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#aa670dd955e37cd2e353de7f0374e9911">free_list_len</a>;               <span class="comment">/*!&lt; Length of buf_pool-&gt;free list */</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#ad775646d7f5f4488e10b49083d028c7b">  158</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#ad775646d7f5f4488e10b49083d028c7b">flush_list_len</a>;              <span class="comment">/*!&lt; Length of buf_pool-&gt;flush_list */</span></div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#abad6fab370dbde0f2ee7b189b11f7099">  159</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#abad6fab370dbde0f2ee7b189b11f7099">n_pend_unzip</a>;                <span class="comment">/*!&lt; buf_pool-&gt;n_pend_unzip, pages</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">                                     pending decompress */</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a1897c967bfe230dd4b25163950598f2d">  161</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a1897c967bfe230dd4b25163950598f2d">n_pend_reads</a>;                <span class="comment">/*!&lt; buf_pool-&gt;n_pend_reads, pages</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">                                     pending read */</span></div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#ab1be4e0ffc5f94df411dc5b1311caa38">  163</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#ab1be4e0ffc5f94df411dc5b1311caa38">n_pending_flush_lru</a>;         <span class="comment">/*!&lt; Pages pending flush in LRU */</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#af82d47f24dd9b41bfce973f6bd8539be">  164</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#af82d47f24dd9b41bfce973f6bd8539be">n_pending_flush_single_page</a>; <span class="comment">/*!&lt; Pages pending to be</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">                                 flushed as part of single page</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">                                 flushes issued by various user</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">                                 threads */</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a6abd73782c4b487dadc2495a94867c4f">  168</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a6abd73782c4b487dadc2495a94867c4f">n_pending_flush_list</a>;        <span class="comment">/*!&lt; Pages pending flush in FLUSH</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">                                     LIST */</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a5367acd20fd992feea91ac65755207a5">  170</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a5367acd20fd992feea91ac65755207a5">n_pages_made_young</a>;          <span class="comment">/*!&lt; number of pages made young */</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a5cc06b5d70aa6a17c9193cc4efb4c7a9">  171</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a5cc06b5d70aa6a17c9193cc4efb4c7a9">n_pages_not_made_young</a>;      <span class="comment">/*!&lt; number of pages not made young */</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a140c6397453fc7696bc9737c81b901f2">  172</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a140c6397453fc7696bc9737c81b901f2">n_pages_read</a>;                <span class="comment">/*!&lt; buf_pool-&gt;n_pages_read */</span></div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a69f6d3725773165ce5e8143238b01950">  173</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a69f6d3725773165ce5e8143238b01950">n_pages_created</a>;             <span class="comment">/*!&lt; buf_pool-&gt;n_pages_created */</span></div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#af26f77901edfe22526c2fb123afcb5d3">  174</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#af26f77901edfe22526c2fb123afcb5d3">n_pages_written</a>;             <span class="comment">/*!&lt; buf_pool-&gt;n_pages_written */</span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#af0c8aa8ac470951fd2b0a90574f0a138">  175</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#af0c8aa8ac470951fd2b0a90574f0a138">n_page_gets</a>;                 <span class="comment">/*!&lt; buf_pool-&gt;n_page_gets */</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a19d0d3603bb58e612f117e092ebfddb7">  176</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a19d0d3603bb58e612f117e092ebfddb7">n_ra_pages_read_rnd</a>;         <span class="comment">/*!&lt; buf_pool-&gt;n_ra_pages_read_rnd,</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">                                     number of pages readahead */</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a59aa90a03076e1f220274100fbaa9dd3">  178</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a59aa90a03076e1f220274100fbaa9dd3">n_ra_pages_read</a>;             <span class="comment">/*!&lt; buf_pool-&gt;n_ra_pages_read, number</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">                                     of pages readahead */</span></div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a618723c1d905c2ab4a82cbe0ef6a4453">  180</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a618723c1d905c2ab4a82cbe0ef6a4453">n_ra_pages_evicted</a>;          <span class="comment">/*!&lt; buf_pool-&gt;n_ra_pages_evicted,</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">                                     number of readahead pages evicted</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">                                     without access */</span></div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a9b98295cec95aedd9630157d1c03068d">  183</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a9b98295cec95aedd9630157d1c03068d">n_page_get_delta</a>;            <span class="comment">/*!&lt; num of buffer pool page gets since</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">                                     last printout */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">/* Buffer pool access stats */</span></div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a2a94b22a3a72efec5de4a7b0110d20d3">  187</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structbuf__pool__info__t.html#a2a94b22a3a72efec5de4a7b0110d20d3">page_made_young_rate</a>;     <span class="comment">/*!&lt; page made young rate in pages</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">                                   per second */</span></div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#ae85d2719997ed84e7d475529b2144463">  189</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structbuf__pool__info__t.html#ae85d2719997ed84e7d475529b2144463">page_not_made_young_rate</a>; <span class="comment">/*!&lt; page not made young rate</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">                                  in pages per second */</span></div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#af0ce81513faf0bbc14bbed5ba865783f">  191</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structbuf__pool__info__t.html#af0ce81513faf0bbc14bbed5ba865783f">pages_read_rate</a>;          <span class="comment">/*!&lt; num of pages read per second */</span></div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a13fba060dbffaa565df26fa329e1a4a9">  192</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structbuf__pool__info__t.html#a13fba060dbffaa565df26fa329e1a4a9">pages_created_rate</a>;       <span class="comment">/*!&lt; num of pages create per second */</span></div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a29d0b194fe5a30a83bb9af60722e7c68">  193</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structbuf__pool__info__t.html#a29d0b194fe5a30a83bb9af60722e7c68">pages_written_rate</a>;       <span class="comment">/*!&lt; num of  pages written per second */</span></div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a1e9edf534f5b20f43eb377e43865fcca">  194</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a1e9edf534f5b20f43eb377e43865fcca">page_read_delta</a>;           <span class="comment">/*!&lt; num of pages read since last</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">                                   printout */</span></div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a05c60445ff6d4df2bda6c44256609dcd">  196</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a05c60445ff6d4df2bda6c44256609dcd">young_making_delta</a>;        <span class="comment">/*!&lt; num of pages made young since</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">                                   last printout */</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#ab4653da9cbf426b09069de812963d3da">  198</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#ab4653da9cbf426b09069de812963d3da">not_young_making_delta</a>;    <span class="comment">/*!&lt; num of pages not make young since</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">                                   last printout */</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">/* Statistics about read ahead algorithm.  */</span></div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a41fd60184668a4b986cbcb00f3636ef6">  202</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structbuf__pool__info__t.html#a41fd60184668a4b986cbcb00f3636ef6">pages_readahead_rnd_rate</a>; <span class="comment">/*!&lt; random readahead rate in pages per</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">                                  second */</span></div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#abd2613e5bf7e26571887f4f0fabbfa13">  204</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structbuf__pool__info__t.html#abd2613e5bf7e26571887f4f0fabbfa13">pages_readahead_rate</a>;     <span class="comment">/*!&lt; readahead rate in pages per</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">                                   second */</span></div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#ab0da56d67fb69965aca2123d1ae44e9f">  206</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="structbuf__pool__info__t.html#ab0da56d67fb69965aca2123d1ae44e9f">pages_evicted_rate</a>;       <span class="comment">/*!&lt; rate of readahead page evicted</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">                                   without access, in pages per second */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">/* Stats about LRU eviction */</span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#abe256d5c4eaf1d723da774ccc7c07ef6">  210</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#abe256d5c4eaf1d723da774ccc7c07ef6">unzip_lru_len</a>; <span class="comment">/*!&lt; length of buf_pool-&gt;unzip_LRU</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">                       list */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">/* Counters for LRU policy */</span></div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a2b0cf08534f861c1784546193a8ec3cb">  213</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a2b0cf08534f861c1784546193a8ec3cb">io_sum</a>;    <span class="comment">/*!&lt; buf_LRU_stat_sum.io */</span></div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a3a793cb5aa7fd9143ff5f18fc0b6fcd8">  214</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a3a793cb5aa7fd9143ff5f18fc0b6fcd8">io_cur</a>;    <span class="comment">/*!&lt; buf_LRU_stat_cur.io, num of IO</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">                   for current interval */</span></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a44991511f5043fa203cba98e23426cee">  216</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a44991511f5043fa203cba98e23426cee">unzip_sum</a>; <span class="comment">/*!&lt; buf_LRU_stat_sum.unzip */</span></div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="structbuf__pool__info__t.html#a1bf0de2bcade3fa6ffbadb1a5a3b2904">  217</a></span>&#160;  ulint <a class="code" href="structbuf__pool__info__t.html#a1bf0de2bcade3fa6ffbadb1a5a3b2904">unzip_cur</a>; <span class="comment">/*!&lt; buf_LRU_stat_cur.unzip, num</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">                   pages decompressed in current</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">                   interval */</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;};</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/** The occupied bytes of lists in all buffer pools */</span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="structbuf__pools__list__size__t.html">  223</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbuf__pools__list__size__t.html">buf_pools_list_size_t</a> {</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="structbuf__pools__list__size__t.html#aa7d94d29d26f796a1340cf72939750de">  224</a></span>&#160;  ulint <a class="code" href="structbuf__pools__list__size__t.html#aa7d94d29d26f796a1340cf72939750de">LRU_bytes</a>;        <span class="comment">/*!&lt; LRU size in bytes */</span></div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="structbuf__pools__list__size__t.html#aac196eec455699d85ece8256d538756c">  225</a></span>&#160;  ulint <a class="code" href="structbuf__pools__list__size__t.html#aac196eec455699d85ece8256d538756c">unzip_LRU_bytes</a>;  <span class="comment">/*!&lt; unzip_LRU size in bytes */</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="structbuf__pools__list__size__t.html#ab6c82346b6fdc2c3853a80da7a916965">  226</a></span>&#160;  ulint <a class="code" href="structbuf__pools__list__size__t.html#ab6c82346b6fdc2c3853a80da7a916965">flush_list_bytes</a>; <span class="comment">/*!&lt; flush_list size in bytes */</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;};</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/** Creates the buffer pool.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">@param[in]  total_size    Size of the total pool in bytes.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">@param[in]  n_instances   Number of buffer pool instances to create.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">@return DB_SUCCESS if success, DB_ERROR if not enough memory or error */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="buf0buf_8h.html#a0ec7d5de1f91e878e799748d903fb71b">buf_pool_init</a>(ulint total_size, ulint n_instances);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">/** Frees the buffer pool at shutdown.  This must not be invoked before</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> freeing all mutexes. */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a7f3b9b346f49593dc6d435d4a88d6d7f">buf_pool_free_all</a>();</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/** Determines if a block is intended to be withdrawn. The caller must ensure</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">that there was a sufficient memory barrier to read curr_size and old_size.</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">@param[in]      buf_pool        buffer pool instance</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">@param[in]      block           pointer to control block</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">@retval true    if will be withdrawn */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="buf0buf_8h.html#a9ca75ba503d2ad232adbff2b0585bc66">buf_block_will_withdrawn</a>(<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">/** Determines if a frame is intended to be withdrawn. The caller must ensure</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">that there was a sufficient memory barrier to read curr_size and old_size.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">@param[in]      buf_pool        buffer pool instance</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">@param[in]      ptr             pointer to a frame</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">@retval true    if will be withdrawn */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="buf0buf_8h.html#a2d4f29f5614d709fd4fceb970ebd19be">buf_frame_will_withdrawn</a>(<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">/** This is the thread for resizing buffer pool. It waits for an event and</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">when waked up either performs a resizing and sleeps again. */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a9781b154f5eb92bbc15d0c4538e46124">buf_resize_thread</a>();</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">/** Checks if innobase_should_madvise_buf_pool() value has changed since we&#39;ve</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">last check and if so, then updates buf_pool_should_madvise and calls madvise</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">for all chunks in all srv_buf_pool_instances.</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">@see buf_pool_should_madvise comment for a longer explanation. */</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a2ee39fa7dde2fd24069257650c8c73e2">buf_pool_update_madvise</a>();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">/** Clears the adaptive hash index on all pages in the buffer pool. */</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a42bed44f93d9f9850ad30d4900164174">buf_pool_clear_hash_index</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/** Gets the current size of buffer buf_pool in bytes.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"> @return size in bytes */</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a23372a7fc86173052a9bfe927c9312b4">buf_pool_get_curr_size</a>(<span class="keywordtype">void</span>);<span class="comment"></span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">/** Gets the current size of buffer buf_pool in frames.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"> @return size in pages */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;ulint <a class="code" href="buf0buf_8h.html#acff3e4e95015baaa1740ff6098e6e164">buf_pool_get_n_pages</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">/** Gets the smallest oldest_modification lsn among all of the earliest</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">added pages in flush lists. In other words - takes the last dirty page</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">from each flush list, and calculates minimum oldest_modification among</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">all of them. Does not acquire global lock for the whole process, so the</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">result might come from inconsistent view on flush lists.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">@note Note that because of the relaxed order in each flush list, this</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">functions no longer returns the smallest oldest_modification among all</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">of the dirty pages. If you wanted to have a safe lsn, which is smaller</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">than every oldest_modification, you would need to use another function:</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">        buf_pool_get_oldest_modification_lwm().</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">Returns zero if there were no dirty pages (flush lists were empty).</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">@return minimum oldest_modification of last pages from flush lists,</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">        zero if flush lists were empty */</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="buf0buf_8h.html#aa18483f39367e4be86099560cd0cb938">buf_pool_get_oldest_modification_approx</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">/** Gets a safe low watermark for oldest_modification. It&#39;s guaranteed</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">that there were no dirty pages with smaller oldest_modification in the</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">whole flush lists.</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">Returns zero if flush lists were empty, be careful in such case, because</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">taking the newest lsn is probably not a good idea. If you wanted to rely</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">on some lsn in such case, you would need to follow pattern:</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">        dpa_lsn = log_buffer_dirty_pages_added_up_to_lsn(*log_sys);</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">        lwm_lsn = buf_pool_get_oldest_modification_lwm();</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">        if (lwm_lsn == 0) lwm_lsn = dpa_lsn;</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">The order is important to avoid race conditions.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">@remarks</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">It&#39;s guaranteed that the returned value will not be smaller than the</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">last checkpoint lsn. It&#39;s not guaranteed that the returned value is</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">the maximum possible. It&#39;s just the best effort for the low cost.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">It basically takes result of buf_pool_get_oldest_modification_approx()</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">and subtracts maximum possible lag introduced by relaxed order in</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">flush lists (srv_log_recent_closed_size).</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">@return safe low watermark for oldest_modification of dirty pages,</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">        or zero if flush lists were empty; if non-zero, it is then</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">        guaranteed not to be at block boundary (and it points to lsn</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">        inside data fragment of block) */</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="buf0buf_8h.html#a274d89180ba0679ad7b31453f3dddbf6">buf_pool_get_oldest_modification_lwm</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">/** Allocates a buf_page_t descriptor. This function must succeed. In case</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> of failure we assert in this function. */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="buf0buf_8h.html#a151abcd0889ef3034dda470c29fa1da8">buf_page_alloc_descriptor</a>(<span class="keywordtype">void</span>) MY_ATTRIBUTE((<a class="code" href="fts0ast_8h.html#a038388ea4bea98fb1875936894f8a787">malloc</a>));<span class="comment"></span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">/** Free a buf_page_t descriptor. */</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a5ded0d8f7e73903ef9aeb7fe4dd9b611">buf_page_free_descriptor</a>(</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage); <span class="comment">/*!&lt; in: bpage descriptor to free. */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">/** Allocates a buffer block.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"> @return own: the allocated block, in state BUF_BLOCK_MEMORY */</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#adbbea556516137bbb04568f60d7811e3">buf_block_alloc</a>(</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool); <span class="comment">/*!&lt; in: buffer pool instance,</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">                           or NULL for round-robin selection</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">                           of the buffer pool */</span><span class="comment"></span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">/** Frees a buffer block which does not contain a file page. */</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a58d8810e5f830e55bdf31da6b88972ea">buf_block_free</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block); <span class="comment">/*!&lt; in, own: block to be freed */</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">#endif                                   </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">/** Copies contents of a buffer frame to a given buffer.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">@param[in]      buf     buffer to copy to</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">@param[in]      frame   buffer frame</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">@return buf */</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="buf0buf_8h.html#a70c8e79f9fad932a3f06f1edf84c2147">buf_frame_copy</a>(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacebuf.html">buf</a>, <span class="keyword">const</span> <a class="code" href="buf0types_8h.html#a03c346e355d639f165c311ad5946b3e2">buf_frame_t</a> *frame);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">/** NOTE! The following macros should be used instead of buf_page_get_gen,</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> to improve debugging. Only values RW_S_LATCH and RW_X_LATCH are allowed</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> in LA! */</span></div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ac94d525f40c93ef4c9e8151cc531adf1">  358</a></span>&#160;<span class="preprocessor">#define buf_page_get(ID, SIZE, LA, MTR)                                        \</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">  buf_page_get_gen(ID, SIZE, LA, NULL, Page_fetch::NORMAL, __FILE__, __LINE__, \</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="preprocessor">                   MTR)</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">/** Use these macros to bufferfix a page with no latching. Remember not to</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"> read the contents of the page unless you know it is safe. Do not modify</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"> the contents of the page! We have separated this case, because it is</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"> error-prone programming not to set a latch, and it should be used</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"> with care. */</span></div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a8a3563a2479f143e7c74c5ce14d14694">  366</a></span>&#160;<span class="preprocessor">#define buf_page_get_with_no_latch(ID, SIZE, MTR)                     \</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">  buf_page_get_gen(ID, SIZE, RW_NO_LATCH, NULL, Page_fetch::NO_LATCH, \</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">                   __FILE__, __LINE__, MTR)</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">/** This is the general function used to get optimistic access to a database</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">page.</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">@param[in]      rw_latch        RW_S_LATCH, RW_X_LATCH</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">@param[in,out]  block           Guessed block</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">@param[in]      modify_clock    Modify clock value</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">@param[in]      fetch_mode      Fetch mode</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">@param[in]      file            File name</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">@param[in]      line            Line where called</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">@param[in,out]  mtr             Mini-transaction</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">@return true if success */</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="buf0buf_8h.html#a569b18490ab03d0b30a22dfd9f9fdb07">buf_page_optimistic_get</a>(ulint rw_latch, <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block,</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                             uint64_t modify_clock, <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7">Page_fetch</a> fetch_mode,</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/** This is used to get access to a known database page, when no waiting can be</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">done.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">@param[in] rw_latch RW_S_LATCH or RW_X_LATCH.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">@param[in] block The known page.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">@param[in] hint Cache_hint::MAKE_YOUNG or Cache_hint::KEEP_OLD</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">@param[in] file File name from where it was called.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">@param[in] line Line from where it was called.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">@param[in,out] mtr Mini-transaction covering the fetch</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">@return true if success */</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="buf0buf_8h.html#ab1c9e8bd857ceefd7ea974ab65c84a85">buf_page_get_known_nowait</a>(ulint rw_latch, <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block,</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                               <a class="code" href="buf0buf_8h.html#a0056c362020ff9e840fb48cb94c3cdba">Cache_hint</a> hint, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line,</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                               <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">/** Given a tablespace id and page number tries to get that page. If the</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">page is not in the buffer pool it is not loaded and NULL is returned.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">Suitable for using when holding the lock_sys latches (as it avoids deadlock).</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">@param[in]      page_id page Id</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">@param[in]      file    File name</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">@param[in]      line    Line where called</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">@param[in]      mtr     Mini-transaction</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">@return pointer to a page or NULL */</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#aba2805ff54abe4adb4a918c41a2f9ed0">buf_page_try_get_func</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line,</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                         <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">/** Given a tablespace id and page number tries to get that page. If the</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">page is not in the buffer pool it is not loaded and NULL is returned.</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">Suitable for using when holding the lock_sys latches (as it avoids deadlock).</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">@param[in]      page_id Page identifier</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">@param[in]      mtr     Mini-transaction</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">@return the page if in buffer pool, NULL if not */</span></div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a2825012ee2e6d2e64a0337bbc39228c4">  415</a></span>&#160;<span class="preprocessor">#define buf_page_try_get(page_id, mtr) \</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">  buf_page_try_get_func((page_id), __FILE__, __LINE__, mtr);</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">/** Get read access to a compressed page (usually of type</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">FIL_PAGE_TYPE_ZBLOB or FIL_PAGE_TYPE_ZBLOB2).</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">The page must be released with buf_page_release_zip().</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">NOTE: the page is not protected by any latch.  Mutual exclusion has to</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">be implemented at a higher level.  In other words, all possible</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">accesses to a given page through this function must be protected by</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">the same set of mutexes or latches.</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">@param[in]      page_id         page id</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">@param[in]      page_size       page size</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">@return pointer to the block */</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="buf0buf_8h.html#a7a1b136191a6e34494318af4a7066b64">buf_page_get_zip</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">/** This is the general function used to get access to a database page.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">@param[in]      page_id                 Page id</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">@param[in]      page_size               Page size</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">@param[in]      rw_latch                RW_S_LATCH, RW_X_LATCH, RW_NO_LATCH</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">@param[in]      guess                     Guessed block or NULL</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">@param[in]      mode                      Fetch mode.</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">@param[in]      file                      File name</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">@param[in]      line                      Line where called</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">@param[in]      mtr                         Mini-transaction</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">@param[in]      dirty_with_no_latch     Mark page as dirty even if page is being</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">                        pinned without any latch</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">@return pointer to the block or NULL */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#a32111f6e94a1745e1750bcbfe96600f9">buf_page_get_gen</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size, ulint rw_latch,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                              <a class="code" href="structbuf__block__t.html">buf_block_t</a> *guess, <a class="code" href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7">Page_fetch</a> <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>,</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                              <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr,</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                              <span class="keywordtype">bool</span> dirty_with_no_latch = <span class="keyword">false</span>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/** Initializes a page to the buffer buf_pool. The page is usually not read</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">from a file even if it cannot be found in the buffer buf_pool. This is one</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">of the functions which perform to a block a state transition NOT_USED =&gt;</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">FILE_PAGE (the other is buf_page_get_gen). The page is latched by passed mtr.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">@param[in]      page_id         Page id</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">@param[in]      page_size       Page size</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">@param[in]      rw_latch        RW_SX_LATCH, RW_X_LATCH</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">@param[in]      mtr             Mini-transaction</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">@return pointer to the block, page bufferfixed */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#a86d8481358bda6d6826d9b997ce51c16">buf_page_create</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size,</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                             <a class="code" href="sync0rw_8h.html#ac63f6bb2316c64592a2494595132e574">rw_lock_type_t</a> rw_latch, <a class="code" href="structmtr__t.html">mtr_t</a> *mtr);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">#else  </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">/** Inits a page to the buffer buf_pool, for use in mysqlbackup --restore.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">@param[in]      page_id         page id</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">@param[in]      page_size       page size</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">@param[in,out]  block           block to init */</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="keywordtype">void</span> meb_page_init(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id, <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                   <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">/** Releases a compressed-only page acquired with buf_page_get_zip(). */</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a6ce5d2fc2911e993640a50d360670592">buf_page_release_zip</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage); <span class="comment">/*!&lt; in: buffer block */</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">/** Releases a latch, if specified.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">@param[in]      block           buffer block</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">@param[in]      rw_latch        RW_S_LATCH, RW_X_LATCH, RW_NO_LATCH */</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a5a045569a1636618f36769cc39e18c60">buf_page_release_latch</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block, ulint rw_latch);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/** Moves a page to the start of the buffer pool LRU list. This high-level</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">function can be used to prevent an important page from slipping out of</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">the buffer pool.</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">@param[in,out]  bpage   buffer block of a file page */</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a3ecef5e7084a885aa97d2aedb9a0fe6e">buf_page_make_young</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">/** Moved a page to the end of the buffer pool LRU list so that it can be</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">flushed out at the earliest.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">@param[in]      bpage   buffer block of a file page */</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a9ce975aae00f09fe4f8d97d0b5fd2d8f">buf_page_make_old</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">/** Returns TRUE if the page can be found in the buffer pool hash table.</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">NOTE that it is possible that the page is not yet read from disk,</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">though.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">@param[in]      page_id page id</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">@return true if found in the page hash table */</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;ibool <a class="code" href="buf0buf_8h.html#a7da1bc96b9a28049d874d68d0ae61bc3">buf_page_peek</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">/** Sets file_page_was_freed TRUE if the page is found in the buffer pool.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">This function should be called when we free a file page and want the</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">debug version to check that it is not accessed any more unless</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">reallocated.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">@param[in]      page_id page id</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">@return control block if found in page hash table, otherwise NULL */</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="buf0buf_8h.html#aed26a402a24afefb51d6d7945647bd30">buf_page_set_file_page_was_freed</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">/** Sets file_page_was_freed FALSE if the page is found in the buffer pool.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">This function should be called when we free a file page and want the</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">debug version to check that it is not accessed any more unless</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">reallocated.</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">@param[in]      page_id page id</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">@return control block if found in page hash table, otherwise NULL */</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="buf0buf_8h.html#ae3f64c5e7568dbfc7c7a868943f8c3f7">buf_page_reset_file_page_was_freed</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">/** Reads the freed_page_clock of a buffer block.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"> @return freed_page_clock */</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a68ddc2d256f3d1821fce3f306ee61e62">buf_page_get_freed_page_clock</a>(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="comment">/*!&lt; in: block */</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">/** Reads the freed_page_clock of a buffer block.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"> @return freed_page_clock */</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;ulint <a class="code" href="buf0buf_8h.html#af6655833718a3258748ac2298522ca5d">buf_block_get_freed_page_clock</a>(<span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block) <span class="comment">/*!&lt; in: block */</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/** Tells, for heuristics, if a block is still close enough to the MRU end of</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">the LRU list meaning that it is not in danger of getting evicted and also</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">implying that it has been accessed recently.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">The page must be either buffer-fixed, either its page hash must be locked.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">@param[in]      bpage   block</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">@return true if block is close to MRU end of LRU */</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;ibool <a class="code" href="buf0buf_8h.html#a47ffed634c26feb6e975600b553e48c5">buf_page_peek_if_young</a>(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">/** Recommends a move of a block to the start of the LRU list if there is</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">danger of dropping from the buffer pool.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">NOTE: does not reserve the LRU list mutex.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">@param[in]      bpage   block to make younger</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">@return true if should be made younger */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;ibool <a class="code" href="buf0buf_8h.html#ac8bcc2e01e4ffe6abf420008166b1062">buf_page_peek_if_too_old</a>(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">/** Gets the youngest modification log sequence number for a frame.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"> Returns zero if not file page or no modification occurred yet.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment"> @return newest modification to page */</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="buf0buf_8h.html#a5df3bda5bcc128a66ddb88607f7aa7fc">buf_page_get_newest_modification</a>(</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage); <span class="comment">/*!&lt; in: block containing the</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">                              page frame */</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">/** Increment the modify clock.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">The caller must</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">(1) own the buf_pool-&gt;mutex and block bufferfix count has to be zero,</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">(2) own X or SX latch on the block-&gt;lock, or</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">(3) operate on a thread-private temporary table</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">@param[in,out]  block   buffer block */</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#aab0fe6ab9881b94fe49c82d25dbe819a">buf_block_modify_clock_inc</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">/** Read the modify clock.</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">@param[in]      block   buffer block</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">@return modify_clock value */</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;uint64_t <a class="code" href="buf0buf_8h.html#a753ac8867abc2d85156cccf714926bc6">buf_block_get_modify_clock</a>(<span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">/** Increments the bufferfix count. */</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">@param[in]      file    file name</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">@param[in]      line    line */</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">@param[in,out]  block   block to bufferfix */</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#aac193f180fc2dea1a6daf0a133e4977b">buf_block_buf_fix_inc_func</a>(</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;#ifdef UNIV_DEBUG</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacefile.html">file</a>, ulint line,</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;#endif <span class="comment">/* UNIV_DEBUG */</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">/** Increments the bufferfix count.</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">@param[in,out]  bpage   block to bufferfix</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">@return the count */</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a4c883f056d7d3c54a5822c201d740c66">buf_block_fix</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">/** Increments the bufferfix count.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">@param[in,out]  block   block to bufferfix</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">@return the count */</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a4c883f056d7d3c54a5822c201d740c66">buf_block_fix</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">/** Decrements the bufferfix count.</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">@param[in,out]  bpage   block to bufferunfix</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">@return the remaining buffer-fix count */</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a3ab7e6bcd7b2f7b163bc40dd76b08b8c">buf_block_unfix</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">/** Decrements the bufferfix count.</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">@param[in,out]  block   block to bufferunfix</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">@return the remaining buffer-fix count */</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a3ab7e6bcd7b2f7b163bc40dd76b08b8c">buf_block_unfix</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">/** Unfixes the page, unlatches the page,</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">removes it from page_hash and removes it from LRU.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">@param[in,out]  bpage   pointer to the block */</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a753d780aa84a242710866eed7bcc32c0">buf_read_page_handle_error</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">/** Increments the bufferfix count.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">@param[in,out]  b       block to bufferfix</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">@param[in]      f       file name where requested</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">@param[in]      l       line number where requested */</span></div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ab992c7712a4353abf34bfafbe3a6431a">  622</a></span>&#160;<span class="preprocessor">#define buf_block_buf_fix_inc(b, f, l) buf_block_buf_fix_inc_func(f, l, b)</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">/** Increments the bufferfix count.</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">@param[in,out]  b       block to bufferfix</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">@param[in]      f       file name where requested</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">@param[in]      l       line number where requested */</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="preprocessor">#define buf_block_buf_fix_inc(b, f, l) buf_block_buf_fix_inc_func(b)</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="preprocessor">#else  </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="preprocessor">#define buf_block_modify_clock_inc(block) ((void)0)</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">/** Gets the space id, page offset, and byte offset within page of a pointer</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">pointing to a buffer frame containing a file page.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">@param[in]      ptr     pointer to a buffer frame</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">@param[out]     space   space id</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">@param[out]     addr    page offset and byte offset */</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#afad3db5496a7456973ce1be9ec882910">buf_ptr_get_fsp_addr</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *ptr, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> *space, <a class="code" href="structfil__addr__t.html">fil_addr_t</a> *addr);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">/** Gets the hash value of a block. This can be used in searches in the</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment"> lock hash table.</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"> @return lock hash value */</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a3c62e03b3e645bd91b960dcfcc4cabc0">buf_block_get_lock_hash_val</a>(<span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block) <span class="comment">/*!&lt; in: block */</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">/** Finds a block in the buffer pool that points to a</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">given compressed page. Used only to confirm that buffer pool does not contain a</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">given pointer, thus protected by zip_free_mutex.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">@param[in]      buf_pool        buffer pool instance</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">@param[in]      data            pointer to compressed page</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">@return buffer block pointing to the compressed page, or NULL */</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#a8239011f74f17732794942ff891bfbf3">buf_pool_contains_zip</a>(<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <span class="keyword">const</span> <span class="keywordtype">void</span> *data);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">/***********************************************************************</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">FIXME_FTS: Gets the frame the pointer is pointing to. */</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<a class="code" href="buf0types_8h.html#a03c346e355d639f165c311ad5946b3e2">buf_frame_t</a> *<a class="code" href="buf0buf_8h.html#aac0ec477ed8bba5d447e069f5ac6d31b">buf_frame_align</a>(</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">/* out: pointer to frame */</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr); <span class="comment">/* in: pointer to a frame */</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="preprocessor">#if defined UNIV_DEBUG || defined UNIV_BUF_DEBUG</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">/** Validates the buffer pool data structure.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment"> @return true */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;ibool <a class="code" href="buf0buf_8h.html#ab5fa041692f236bcd8e2fd5e0a575fbc">buf_validate</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG || UNIV_BUF_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="preprocessor">#if defined UNIV_DEBUG_PRINT || defined UNIV_DEBUG || defined UNIV_BUF_DEBUG</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">/** Prints info of the buffer pool data structure. */</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a9913c2499ec503eea58a7dbb0c6b93d8">buf_print</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG_PRINT || UNIV_DEBUG || UNIV_BUF_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46">  677</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46">buf_page_print_flags</a> {<span class="comment"></span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">  /** Do not crash at the end of buf_page_print(). */</span></div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46a4de99c6b59acbd5c2aa46fd0632cb281">  679</a></span>&#160;  <a class="code" href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46a4de99c6b59acbd5c2aa46fd0632cb281">BUF_PAGE_PRINT_NO_CRASH</a> = 1,<span class="comment"></span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">  /** Do not print the full page dump. */</span></div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46a476478124a1ec5bbf5faa153d2ff4763">  681</a></span>&#160;  <a class="code" href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46a476478124a1ec5bbf5faa153d2ff4763">BUF_PAGE_PRINT_NO_FULL</a> = 2</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;};</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">/** Prints a page to stderr.</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">@param[in]      read_buf        a database page</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">@param[in]      page_size       page size</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">@param[in]      flags           0 or BUF_PAGE_PRINT_NO_CRASH or</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">BUF_PAGE_PRINT_NO_FULL */</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a0feb3f11f6a58e81598bf92d7b435500">buf_page_print</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *read_buf, <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size,</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    ulint <a class="code" href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">/** Decompress a block.</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"> @return true if successful */</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;ibool <a class="code" href="buf0buf_8h.html#a532b24c23776dee3f4a4635e38417378">buf_zip_decompress</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block, <span class="comment">/*!&lt; in/out: block */</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                         ibool check); <span class="comment">/*!&lt; in: TRUE=verify the page checksum */</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">/** Returns the number of latched pages in the buffer pool.</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"> @return number of latched pages */</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a8bb34869722879443008e408b4ae6eb8">buf_get_latched_pages_number</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">/** Returns the number of pending buf pool read ios.</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment"> @return number of pending read I/O operations */</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a10701cd6691bc47c29bf117375fccc14">buf_get_n_pending_read_ios</a>(<span class="keywordtype">void</span>);<span class="comment"></span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">/** Prints info of the buffer i/o. */</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a940342731a901c4a6171de07be118f57">buf_print_io</a>(<a class="code" href="namespaceconsts.html#a2497d532ccb12f859b91cdaba0fb4c9a">FILE</a> *<a class="code" href="namespacefile.html">file</a>); <span class="comment">/*!&lt; in: file where to print */</span><span class="comment"></span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">/** Collect buffer pool stats information for a buffer pool. Also</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"> record aggregated stats if there are more than one buffer pool</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"> in the server */</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a94add70baf8e2ee67299e346bbb47965">buf_stats_get_pool_info</a>(</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool,            <span class="comment">/*!&lt; in: buffer pool */</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    ulint pool_id,                   <span class="comment">/*!&lt; in: buffer pool ID */</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <a class="code" href="structbuf__pool__info__t.html">buf_pool_info_t</a> *all_pool_info); <span class="comment">/*!&lt; in/out: buffer pool info</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">                                     to fill */</span><span class="comment"></span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">/** Return the ratio in percents of modified pages in the buffer pool /</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">database pages in the buffer pool.</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">@return modified page percentage ratio */</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="keywordtype">double</span> <a class="code" href="buf0buf_8h.html#adee530ab11507348f9c9e303341634b7">buf_get_modified_ratio_pct</a>(<span class="keywordtype">void</span>);<span class="comment"></span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">/** Refresh the statistics used to print per-second averages. */</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#ac5e1620a9a0c049c739b9e426bd7802e">buf_refresh_io_stats_all</a>();</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">/** Assert that all file pages in the buffer are in a replaceable state. */</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#aa4cbbcf6846efae5345f9e560e02fe1c">buf_must_be_all_freed</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment">/** Checks that there currently are no pending i/o-operations for the buffer</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">pool.</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">@return number of pending i/o */</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;ulint <a class="code" href="buf0buf_8h.html#ab0de522312135372e9204158db79f015">buf_pool_check_no_pending_io</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">/** Invalidates the file pages in the buffer pool when an archive recovery is</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"> completed. All the file pages buffered must be in a replaceable state when</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"> this function is called: not latched and not modified. */</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#ad4cee70fe0ea742c8a909aaa3bce3f59">buf_pool_invalidate</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">/*========================================================================</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">--------------------------- LOWER LEVEL ROUTINES -------------------------</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">=========================================================================*/</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">/** Adds latch level info for the rw-lock protecting the buffer frame. This</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">should be called in the debug version after a successful latching of a page if</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">we know the latching order level of the acquired latch.</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">@param[in]      block   buffer page where we have acquired latch</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">@param[in]      level   latching order level */</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a53726080a6bcf5cd75f80580f5691ecc">buf_block_dbg_add_level</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block, <a class="code" href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a> level);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="preprocessor">#else                                         </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="preprocessor">#define buf_block_dbg_add_level(block, level) </span><span class="comment">/* nothing */</span><span class="preprocessor"></span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="preprocessor">#endif                                        </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/** Gets the state of a block.</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"> @return state */</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="keyword">enum</span> <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8a">buf_page_state</a> <a class="code" href="buf0buf_8h.html#a4a99189b090a1af68ff81b98b5418a0f">buf_page_get_state</a>(</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage); <span class="comment">/*!&lt; in: pointer to the control block */</span><span class="comment"></span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">/** Gets the state of a block.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"> @return state */</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="keyword">enum</span> <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8a">buf_page_state</a> <a class="code" href="buf0buf_8h.html#a256d09dc81942591a6d51ebcb7c16214">buf_block_get_state</a>(</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block) <span class="comment">/*!&lt; in: pointer to the control block */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">/** Sets the state of a block.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">@param[in,out]  bpage   pointer to control block</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">@param[in]      state   state */</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a38ae1a9052817ce692827243ce970d3e">buf_page_set_state</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage, <span class="keyword">enum</span> <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8a">buf_page_state</a> state);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">/** Sets the state of a block.</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">@param[in,out]  block   pointer to control block</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">@param[in]      state   state */</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a542cb040a75435f73008c7009d9a908b">buf_block_set_state</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block, <span class="keyword">enum</span> <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8a">buf_page_state</a> state);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">/** Determines if a block is mapped to a tablespace.</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment"> @return true if mapped */</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;ibool <a class="code" href="buf0buf_8h.html#ae7c7553b7d927c907ca28aa41640e856">buf_page_in_file</a>(</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="comment">/*!&lt; in: pointer to control block */</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">/** Determines if a block should be on unzip_LRU list.</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment"> @return true if block belongs to unzip_LRU */</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="buf0buf_8h.html#a7098349ef19391fcdeff149b55dac652">buf_page_belongs_to_unzip_LRU</a>(</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="comment">/*!&lt; in: pointer to control block */</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">/** Gets the mutex of a block.</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment"> @return pointer to mutex protecting bpage */</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<a class="code" href="buf0types_8h.html#a728dccae958dd22a0f7ddd16cf6e4f0a">BPageMutex</a> *<a class="code" href="buf0buf_8h.html#a2fa5baa88e1ce986b7308ab72453ca0b">buf_page_get_mutex</a>(</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="comment">/*!&lt; in: pointer to control block */</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">/** Get the flush type of a page.</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment"> @return flush type */</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<a class="code" href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73c">buf_flush_t</a> <a class="code" href="buf0buf_8h.html#a9d8e9065bf85e7b6806022c563129da1">buf_page_get_flush_type</a>(</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="comment">/*!&lt; in: buffer page */</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">/** Set the flush type of a page.</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">@param[in]      bpage           buffer page</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">@param[in]      flush_type      flush type */</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a53437d54ec990de81e9644d3ee6c4337">buf_page_set_flush_type</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage, <a class="code" href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73c">buf_flush_t</a> <a class="code" href="group__MYSYS.html#gaff94a40cf049a7ffa8c8fdc46b757085">flush_type</a>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">/** Map a block to a file page.</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">@param[in,out]  block   pointer to control block</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">@param[in]      page_id page id */</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#adb15cdb046edd4db173179de22266e71">buf_block_set_file_page</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block, <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">/** Gets the io_fix state of a block.</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment"> @return io_fix state */</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="keyword">enum</span> <a class="code" href="buf0types_8h.html#a9d992d311e12fe579c419e7f98f80e27">buf_io_fix</a> <a class="code" href="buf0buf_8h.html#a66b510251a5c2ba00d420c57ff16c223">buf_page_get_io_fix</a>(</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="comment">/*!&lt; in: pointer to the control block */</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">/** Gets the io_fix state of a block.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment"> @return io_fix state */</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="keyword">enum</span> <a class="code" href="buf0types_8h.html#a9d992d311e12fe579c419e7f98f80e27">buf_io_fix</a> <a class="code" href="buf0buf_8h.html#a804b0c6399074d86f64a5db44f5e2799">buf_block_get_io_fix</a>(</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block) <span class="comment">/*!&lt; in: pointer to the control block */</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">/** Sets the io_fix state of a block.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">@param[in,out]  bpage   control block</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">@param[in]      io_fix  io_fix state */</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#ab1a8f29ac35531394d5cc6abb4e7bc2a">buf_page_set_io_fix</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage, <span class="keyword">enum</span> <a class="code" href="buf0types_8h.html#a9d992d311e12fe579c419e7f98f80e27">buf_io_fix</a> io_fix);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">/** Sets the io_fix state of a block.</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">@param[in,out]  block   control block</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">@param[in]      io_fix  io_fix state */</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a427515122e86a7b344f79896801f30cb">buf_block_set_io_fix</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block, <span class="keyword">enum</span> <a class="code" href="buf0types_8h.html#a9d992d311e12fe579c419e7f98f80e27">buf_io_fix</a> io_fix);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">/** Makes a block sticky. A sticky block implies that even after we release</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment">the buf_pool-&gt;LRU_list_mutex and the block-&gt;mutex:</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">* it cannot be removed from the flush_list</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">* the block descriptor cannot be relocated</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">* it cannot be removed from the LRU list</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">Note that:</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">* the block can still change its position in the LRU list</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">* the next and previous pointers can change.</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">@param[in,out]  bpage   control block */</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#aafc6d1173140eb14d5ca4a83a62d0f4a">buf_page_set_sticky</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">/** Removes stickiness of a block. */</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#ad9b8b75af8fa0ad4e4ebb7723ec8a215">buf_page_unset_sticky</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage); <span class="comment">/*!&lt; in/out: control block */</span><span class="comment"></span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">/** Determine if a buffer block can be relocated in memory.  The block</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment"> can be dirty, but it must not be I/O-fixed or bufferfixed. */</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;ibool <a class="code" href="buf0buf_8h.html#a35c37514bc246843091d871cea64e91a">buf_page_can_relocate</a>(</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="comment">/*!&lt; control block being relocated */</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">/** Determine if a block has been flagged old.</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">@param[in]      bpage   control block</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">@return true if old */</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;ibool <a class="code" href="buf0buf_8h.html#a8d4fc8bd9c50f18fd1a93658e94d3d87">buf_page_is_old</a>(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage)</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">/** Flag a block old.</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">@param[in,out]  bpage   control block</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">@param[in]      old     old */</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#acaf46d5fc3b73bc26bf115615fb81d0d">buf_page_set_old</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage, ibool old);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">/** Determine the time of first access of a block in the buffer pool.</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment"> @return ut_time_monotonic_ms() at the time of first access, 0 if not accessed</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="buf0buf_8h.html#a9e8fef965c556246b887497dca782d2a">buf_page_is_accessed</a>(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="comment">/*!&lt; in: control block */</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">/** Flag a block accessed. */</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a68cf52f3b3dfe8cfc91c77757b268034">buf_page_set_accessed</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage); <span class="comment">/*!&lt; in/out: control block */</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">/** Gets the buf_block_t handle of a buffered file block if an uncompressed</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">page frame exists, or NULL. page frame exists, or NULL. The caller must hold</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">either the appropriate hash lock in any mode, either the LRU list mutex. Note:</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">even though bpage is not declared a const we don&#39;t update its value. It is safe</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">to make this pure.</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">@param[in]      bpage   control block, or NULL</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">@return control block, or NULL */</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#ae275396b7f480b0bf26e0b9f400a97a3">buf_page_get_block</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage)</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">/** Gets a pointer to the memory frame of a block.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment"> @return pointer to the frame */</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<a class="code" href="buf0types_8h.html#a03c346e355d639f165c311ad5946b3e2">buf_frame_t</a> *<a class="code" href="buf0buf_8h.html#a95db363e6bf7655c69a903397199b780">buf_block_get_frame</a>(</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block) <span class="comment">/*!&lt; in: pointer to the control block */</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="preprocessor">#define buf_block_get_frame(block) (block)-&gt;frame</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">#else  </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="preprocessor">#define buf_block_get_frame(block) (block)-&gt;frame</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">/** Gets the compressed page descriptor corresponding to an uncompressed page</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment"> if applicable. */</span></div><div class="line"><a name="l00911"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a78b0bcde049a4c30e62ec696daa55dff">  911</a></span>&#160;<span class="preprocessor">#define buf_block_get_page_zip(block) \</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="preprocessor">  ((block)-&gt;page.zip.data ? &amp;(block)-&gt;page.zip : NULL)</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">/** Get a buffer block from an adaptive hash index pointer.</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">This function does not return if the block is not identified.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">@param[in]      ptr     pointer to within a page frame</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">@return pointer to block, never NULL */</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#ac2e67247bf34c56e00cfe1915c47abf0">buf_block_from_ahi</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">/** Find out if a block pointer points into one of currently used chunks of</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">the buffer pool. This is useful if you stored the pointer some time ago, and</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">want to dereference it now, and are afraid that buffer pool resize could free</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">the memory pointed by it. Thus calling this function requires holding at least</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">one of the latches which prevent freeing memory from buffer pool for the</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">duration of the call and until you pin the block in some other way, as otherwise</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">the result of this function might be obsolete by the time you dereference the</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">block (an s-latch on buf_page_hash_lock_get for any bucket is enough).</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">@param  buf_pool    The buffer pool instance to search in.</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">@param  ptr         A pointer which you want to check. This function will not</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">                    dereference it.</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">@return true iff `block` points inside one of the chunks of the `buf_pool`</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="buf0buf_8h.html#a7c0cbe211bba9dba91be1e38e584e18f">buf_is_block_in_instance</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool,</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                              <span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *ptr);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">/** Inits a page for read to the buffer buf_pool. If the page is</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">(1) already in buf_pool, or</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">(2) if we specify to read only ibuf pages and the page is not an ibuf page, or</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">(3) if the space is deleted or being deleted,</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">then this function does nothing.</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">Sets the io_fix flag to BUF_IO_READ and sets a non-recursive exclusive lock</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">on the buffer frame. The io-handler must take care that the flag is cleared</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">and the lock released later.</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">@param[out]     err                     DB_SUCCESS or DB_TABLESPACE_DELETED</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">@param[in]      mode                    BUF_READ_IBUF_PAGES_ONLY, ...</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">@param[in]      page_id                 page id</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">@param[in]      page_size               page size</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">@param[in]      unzip                   TRUE=request uncompressed page</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">@return pointer to the block or NULL */</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="buf0buf_8h.html#a2efca615726ffc1dfc6c2ed05612ccd0">buf_page_init_for_read</a>(<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> *<a class="code" href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">err</a>, ulint <a class="code" href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">mode</a>,</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classpage__size__t.html">page_size_t</a> &amp;page_size, ibool unzip);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">/** Completes an asynchronous read or write request of a file page to or from</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">the buffer pool.</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">@param[in]      bpage   pointer to the block in question</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">@param[in]      evict   whether or not to evict the page from LRU list</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">@return true if successful */</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="buf0buf_8h.html#a6fc2cc72f66548f1e67ad61e8e8769a1">buf_page_io_complete</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage, <span class="keywordtype">bool</span> evict);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">/** Calculates the index of a buffer pool to the buf_pool[] array.</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment"> @return the position of the buffer pool in buf_pool[] */</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a883be2e9c1c6795751c4b076708c7a32">buf_pool_index</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool) <span class="comment">/*!&lt; in: buffer pool */</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    MY_ATTRIBUTE((warn_unused_result));<span class="comment"></span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">/** Returns the buffer pool instance given a page instance</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment"> @return buf_pool */</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *<a class="code" href="buf0buf_8h.html#a803b791d0706583d685f7f9413da45d7">buf_pool_from_bpage</a>(</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage); <span class="comment">/*!&lt; in: buffer pool page */</span><span class="comment"></span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">/** Returns the buffer pool instance given a block instance</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment"> @return buf_pool */</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *<a class="code" href="buf0buf_8h.html#a499d41dc7d50849f883c2b06c07dbb02">buf_pool_from_block</a>(<span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block); <span class="comment">/*!&lt; in: block */</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">/** Returns the buffer pool instance given a page id.</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">@param[in]      page_id page id</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">@return buffer pool */</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *<a class="code" href="buf0buf_8h.html#acfb7f2dc1c41995e06c47526e8774c6c">buf_pool_get</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">/** Returns the buffer pool instance given its array index</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment"> @return buffer pool */</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *<a class="code" href="buf0buf_8h.html#aac71426ec4d18966a8fa309954653b5e">buf_pool_from_array</a>(ulint <a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>); <span class="comment">/*!&lt; in: array index to get</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">                                              buffer pool instance from */</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">/** Returns the control block of a file page, NULL if not found.</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">@param[in]      buf_pool        buffer pool instance</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">@param[in]      page_id         page id</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">@return block, NULL if not found */</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="buf0buf_8h.html#aa3b0eac921442eec0314115147c85a17">buf_page_hash_get_low</a>(<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool,</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">/** Returns the control block of a file page, NULL if not found.</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">If the block is found and lock is not NULL then the appropriate</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">page_hash lock is acquired in the specified lock mode. Otherwise,</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">mode value is ignored. It is up to the caller to release the</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">lock. If the block is found and the lock is NULL then the page_hash</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">lock is released by this function.</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">@param[in]      buf_pool        buffer pool instance</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">@param[in]      page_id         page id</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">@param[in,out]  lock            lock of the page hash acquired if bpage is</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">found, NULL otherwise. If NULL is passed then the hash_lock is released by</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">this function.</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">@param[in]      lock_mode       RW_LOCK_X or RW_LOCK_S. Ignored if</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">lock == NULL</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">@param[in]      watch           if true, return watch sentinel also.</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">@return pointer to the bpage or NULL; if NULL, lock is also NULL or</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">a watch sentinel. */</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;UNIV_INLINE</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="buf0buf_8h.html#ae6ee95652b3ae571a6e4274a08d9a2c7">buf_page_hash_get_locked</a>(<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool,</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id, <a class="code" href="structrw__lock__t.html">rw_lock_t</a> **lock,</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                                     ulint <a class="code" href="lock0types_8h.html#acff05fa7dd69832a04f93b92db1e0013">lock_mode</a>, <span class="keywordtype">bool</span> watch = <span class="keyword">false</span>);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">/** Returns the control block of a file page, NULL if not found.</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">If the block is found and lock is not NULL then the appropriate</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">page_hash lock is acquired in the specified lock mode. Otherwise,</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">mode value is ignored. It is up to the caller to release the</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">lock. If the block is found and the lock is NULL then the page_hash</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">lock is released by this function.</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">@param[in]      buf_pool        buffer pool instance</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">@param[in]      page_id         page id</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">@param[in,out]  lock            lock of the page hash acquired if bpage is</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">found, NULL otherwise. If NULL is passed then the hash_lock is released by</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">this function.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">@param[in]      lock_mode       RW_LOCK_X or RW_LOCK_S. Ignored if</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">lock == NULL</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">@return pointer to the block or NULL; if NULL, lock is also NULL. */</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;UNIV_INLINE</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#ab806a1ce0a4b83b733b9b97da5691f47">buf_block_hash_get_locked</a>(<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool,</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id,</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                                       <a class="code" href="structrw__lock__t.html">rw_lock_t</a> **lock, ulint <a class="code" href="lock0types_8h.html#acff05fa7dd69832a04f93b92db1e0013">lock_mode</a>);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">/* There are four different ways we can try to get a bpage or block</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">from the page hash:</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">1) Caller already holds the appropriate page hash lock: in the case call</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">buf_page_hash_get_low() function.</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">2) Caller wants to hold page hash lock in x-mode</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">3) Caller wants to hold page hash lock in s-mode</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">4) Caller doesn&#39;t want to hold page hash lock */</span></div><div class="line"><a name="l01045"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a6a5f5e8e4d9cb004c7ea5fb3c4096934"> 1045</a></span>&#160;<span class="preprocessor">#define buf_page_hash_get_s_locked(b, page_id, l) \</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="preprocessor">  buf_page_hash_get_locked(b, page_id, l, RW_LOCK_S)</span></div><div class="line"><a name="l01047"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a7388557a086d8346ccafd08e0d234e84"> 1047</a></span>&#160;<span class="preprocessor">#define buf_page_hash_get_x_locked(b, page_id, l) \</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="preprocessor">  buf_page_hash_get_locked(b, page_id, l, RW_LOCK_X)</span></div><div class="line"><a name="l01049"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ad2d78b2ce6dac6dac0bfa5b49790b422"> 1049</a></span>&#160;<span class="preprocessor">#define buf_page_hash_get(b, page_id) \</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="preprocessor">  buf_page_hash_get_locked(b, page_id, NULL, 0)</span></div><div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a17c2ac1c4618377fa1432ea64caebaef"> 1051</a></span>&#160;<span class="preprocessor">#define buf_page_get_also_watch(b, page_id) \</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="preprocessor">  buf_page_hash_get_locked(b, page_id, NULL, 0, true)</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aec1caf98837a48b5cc8cc0164946a11a"> 1054</a></span>&#160;<span class="preprocessor">#define buf_block_hash_get_s_locked(b, page_id, l) \</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="preprocessor">  buf_block_hash_get_locked(b, page_id, l, RW_LOCK_S)</span></div><div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ad2ecf00408baca2e715a13185b57643b"> 1056</a></span>&#160;<span class="preprocessor">#define buf_block_hash_get_x_locked(b, page_id, l) \</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="preprocessor">  buf_block_hash_get_locked(b, page_id, l, RW_LOCK_X)</span></div><div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a02c3e94974cac1500f78a3cb08e68ab2"> 1058</a></span>&#160;<span class="preprocessor">#define buf_block_hash_get(b, page_id) \</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="preprocessor">  buf_block_hash_get_locked(b, page_id, NULL, 0)</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">/** Gets the current length of the free list of buffer blocks.</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment"> @return length of the free list */</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a8489d00ae3045b2d4207ba0eece8e966">buf_get_free_list_len</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">/** Determine if a block is a sentinel for a buffer pool watch.</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment"> @return true if a sentinel for a buffer pool watch, false if not */</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;ibool <a class="code" href="buf0buf_8h.html#ae799641f6fffb0ac145542154be08361">buf_pool_watch_is_sentinel</a>(</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <span class="comment">/*!&lt; buffer pool instance */</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage)    <span class="comment">/*!&lt; in: block */</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">/** Stop watching if the page has been read in.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">buf_pool_watch_set(same_page_id) must have returned NULL before.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">@param[in]      page_id page id */</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a607741f6ab261487ea1e2efef4d7640e">buf_pool_watch_unset</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">/** Check if the page has been read in.</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">This may only be called after buf_pool_watch_set(same_page_id)</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">has returned NULL and before invoking buf_pool_watch_unset(same_page_id).</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">@param[in]      page_id page id</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">@return false if the given page was not read in, true if it was */</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;ibool <a class="code" href="buf0buf_8h.html#a35b6dd3b80c03a713c7f160611d00455">buf_pool_watch_occurred</a>(<span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;page_id)</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment">/** Get total buffer pool statistics.</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">@param[out] LRU_len Length of all lru lists</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">@param[out] free_len Length of all free lists</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">@param[out] flush_list_len Length of all flush lists */</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#afc7560004e8ceba1e2a2089bd67371bd">buf_get_total_list_len</a>(ulint *LRU_len, ulint *free_len,</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                            ulint *flush_list_len);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">/** Get total list size in bytes from all buffer pools. */</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#af7dd922a4f122cd1870fbc8cdec76620">buf_get_total_list_size_in_bytes</a>(</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <a class="code" href="structbuf__pools__list__size__t.html">buf_pools_list_size_t</a> *buf_pools_list_size); <span class="comment">/*!&lt; out: list sizes</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">                                                 in all buffer pools */</span><span class="comment"></span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">/** Get total buffer pool statistics. */</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a451851befdfc82765a869314cdd073e6">buf_get_total_stat</a>(</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <a class="code" href="structbuf__pool__stat__t.html">buf_pool_stat_t</a> *tot_stat); <span class="comment">/*!&lt; out: buffer pool stats */</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">/** Get the nth chunk&#39;s buffer block in the specified buffer pool.</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">@param[in]      buf_pool        buffer pool instance</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">@param[in]      n               nth chunk in the buffer pool</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">@param[in]      chunk_size      chunk_size</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">@return the nth chunk&#39;s buffer block. */</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;UNIV_INLINE</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<a class="code" href="structbuf__block__t.html">buf_block_t</a> *<a class="code" href="buf0buf_8h.html#adfcde42037dc3ee66cfe5e74fad1c015">buf_get_nth_chunk_block</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, ulint <a class="code" href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>,</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                                     ulint *chunk_size);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">/** Calculate aligned buffer pool size based on srv_buf_pool_chunk_unit,</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">if needed.</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">@param[in]      size    size in bytes</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">@return aligned size */</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;UNIV_INLINE</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a3ce21ecd74468bc2e0e2a33cf5a2ca2a">buf_pool_size_align</a>(ulint size);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">/** Adjust the proposed chunk unit size so that it satisfies all invariants</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">@param[in]      size    proposed size of buffer pool chunk unit in bytes</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">@return adjusted size which meets invariants */</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="code" href="buf0buf_8h.html#a2fdc4c9f9a04819fb962432b2c0b8e8f">buf_pool_adjust_chunk_unit</a>(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> size);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">/** Calculate the checksum of a page from compressed table and update the</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">page.</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">@param[in,out]  page              page to update</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">@param[in]      size              compressed page size</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">@param[in]      lsn               LSN to stamp on the page</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">@param[in]      skip_lsn_check    true to skip check for lsn (in DEBUG) */</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="keywordtype">void</span> <a class="code" href="buf0buf_8h.html#a1eec07edc8c41c7b8d17b0053f28ffee">buf_flush_update_zip_checksum</a>(<a class="code" href="buf0types_8h.html#a03c346e355d639f165c311ad5946b3e2">buf_frame_t</a> *<a class="code" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>, ulint size, <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="xcom__base_8cc.html#a0ce0765b958f7289d206f0c78bd105c7">lsn</a>,</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                                   <span class="keywordtype">bool</span> skip_lsn_check);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">/** Return how many more pages must be added to the withdraw list to reach the</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">withdraw target of the currently ongoing buffer pool resize.</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">@param[in]      buf_pool        buffer pool instance</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">@return page count to be withdrawn or zero if the target is already achieved or</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">if the buffer pool is not currently being resized. */</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;UNIV_INLINE</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;ulint <a class="code" href="buf0buf_8h.html#a84c4d4c43ce1afcad91d6011e73f9b32">buf_get_withdraw_depth</a>(<a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">/** Gets the io_fix state of a buffer block. Does not assert that the</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment">buf_page_get_mutex() mutex is held, to be used in the cases where it is safe</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">not to hold it.</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">@param[in]      block   pointer to the buffer block</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">@return page io_fix state */</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;UNIV_INLINE</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<a class="code" href="buf0types_8h.html#a9d992d311e12fe579c419e7f98f80e27">buf_io_fix</a> <a class="code" href="buf0buf_8h.html#abb6664a53292fe81dc48dae70f935fe7">buf_block_get_io_fix_unlocked</a>(<span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block)</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">/** Gets the io_fix state of a buffer page. Does not assert that the</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">buf_page_get_mutex() mutex is held, to be used in the cases where it is safe</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">not to hold it.</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">@param[in]      bpage   pointer to the buffer page</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">@return page io_fix state */</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;UNIV_INLINE</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="keyword">enum</span> <a class="code" href="buf0types_8h.html#a9d992d311e12fe579c419e7f98f80e27">buf_io_fix</a> <a class="code" href="buf0buf_8h.html#acb376da0136a9ced31021c6137359d6e">buf_page_get_io_fix_unlocked</a>(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage)</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">/** The common buffer control block structure</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">for compressed and uncompressed frames */</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">/** Number of bits used for buffer page states. */</span></div><div class="line"><a name="l01162"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a8164aaa09f898842fd978f6fd4797cfc"> 1162</a></span>&#160;<span class="preprocessor">#define BUF_PAGE_STATE_BITS 3</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"><a class="line" href="classbuf__page__t.html"> 1164</a></span>&#160;<span class="keyword">class </span><a class="code" href="classbuf__page__t.html">buf_page_t</a> {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">  /** Set the doublewrite buffer ID.</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">  @param[in] batch_id           Double write batch ID which flushed the page. */</span></div><div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#ae4e45eb2bf36b75fbf2c4cd4b15e887f"> 1168</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classbuf__page__t.html#ae4e45eb2bf36b75fbf2c4cd4b15e887f">set_dblwr_batch_id</a>(uint16_t batch_id) { m_dblwr_id = batch_id; }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">  /** @return the double write batch id, or uint16_t max if undefined. */</span></div><div class="line"><a name="l01171"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a794d40164f77477340b2380c131ec4da"> 1171</a></span>&#160;  uint16_t <a class="code" href="classbuf__page__t.html#a794d40164f77477340b2380c131ec4da">get_dblwr_batch_id</a>() const MY_ATTRIBUTE((warn_unused_result)) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">return</span> (m_dblwr_id);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">  /** @name General fields</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">  None of these bit-fields must be modified without holding</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">  buf_page_get_mutex() [buf_block_t::mutex or</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">  buf_pool-&gt;zip_mutex], since they can be stored in the same</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">  machine word.  */</span><span class="comment"></span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">  /** Page id. */</span></div><div class="line"><a name="l01183"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a953a2cc53ebbeeccf783e5156ae8ff02"> 1183</a></span>&#160;  <a class="code" href="classpage__id__t.html">page_id_t</a> <a class="code" href="classbuf__page__t.html#a953a2cc53ebbeeccf783e5156ae8ff02">id</a>;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">  /** Page size. */</span></div><div class="line"><a name="l01186"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#aa96e71082cde4b4849dbc827d5e8a3ea"> 1186</a></span>&#160;  <a class="code" href="classpage__size__t.html">page_size_t</a> <a class="code" href="classbuf__page__t.html#aa96e71082cde4b4849dbc827d5e8a3ea">size</a>;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment">  /** Count of how manyfold this block is currently bufferfixed. */</span></div><div class="line"><a name="l01189"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a726a13d4bcfb5ba18cee636c566cd2c5"> 1189</a></span>&#160;  uint32_t <a class="code" href="classbuf__page__t.html#a726a13d4bcfb5ba18cee636c566cd2c5">buf_fix_count</a>;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">  /** type of pending I/O operation. */</span></div><div class="line"><a name="l01192"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#aa040b8e88afece55ce1dfd1ef5042491"> 1192</a></span>&#160;  <a class="code" href="buf0types_8h.html#a9d992d311e12fe579c419e7f98f80e27">buf_io_fix</a> <a class="code" href="classbuf__page__t.html#aa040b8e88afece55ce1dfd1ef5042491">io_fix</a>;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">  /** Block state. @see buf_page_in_file */</span></div><div class="line"><a name="l01195"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#acdfb57413edcee5faf56938a2c48ecfb"> 1195</a></span>&#160;  <a class="code" href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8a">buf_page_state</a> <a class="code" href="classbuf__page__t.html#acdfb57413edcee5faf56938a2c48ecfb">state</a>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">  /** if this block is currently being flushed to disk, this tells</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">  the flush_type.  @see buf_flush_t */</span></div><div class="line"><a name="l01199"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#aee2136d1a88a6b328c5510f4f3b208be"> 1199</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="classbuf__page__t.html#aee2136d1a88a6b328c5510f4f3b208be">flush_type</a> : 2;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">  /** index number of the buffer pool that this block belongs to */</span></div><div class="line"><a name="l01202"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#ab32d7bdf770b44df9b2f22893ada9e2f"> 1202</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="classbuf__page__t.html#ab32d7bdf770b44df9b2f22893ada9e2f">buf_pool_index</a> : 6;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  static_assert(<a class="code" href="buf0buf_8h.html#a93370087448a1c0e6a3054d13ca0fb81">MAX_BUFFER_POOLS</a> &lt;= 64,</div><div class="line"><a name="l01205"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#af0a047f0e5e46768834a176d31651085"> 1205</a></span>&#160;                <span class="stringliteral">&quot;MAX_BUFFER_POOLS &gt; 64; redefine buf_pool_index&quot;</span>);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">  /** @} */</span><span class="comment"></span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">  /** compressed page; zip.data (but not the data it points to) is</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">  protected by buf_pool-&gt;zip_mutex; state == BUF_BLOCK_ZIP_PAGE and</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">  zip.data == NULL means an active buf_pool-&gt;watch */</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <a class="code" href="structpage__zip__des__t.html">page_zip_des_t</a> <a class="code" href="classbuf__page__t.html#af0a047f0e5e46768834a176d31651085">zip</a>;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">  /** node used in chaining to buf_pool-&gt;page_hash or buf_pool-&gt;zip_hash */</span></div><div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a4108f76f179daca8aa73dd0af51d433e"> 1215</a></span>&#160;  <a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="classbuf__page__t.html#a4108f76f179daca8aa73dd0af51d433e">hash</a>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">  /** TRUE if in buf_pool-&gt;page_hash */</span></div><div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#af046128dd848f31223f914b025d3f739"> 1219</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classbuf__page__t.html#af046128dd848f31223f914b025d3f739">in_page_hash</a>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">  /** TRUE if in buf_pool-&gt;zip_hash */</span></div><div class="line"><a name="l01222"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a55b0e20a982d280278d5d84a2800658b"> 1222</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classbuf__page__t.html#a55b0e20a982d280278d5d84a2800658b">in_zip_hash</a>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">  /** @name Page flushing fields</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">  All these are protected by buf_pool-&gt;mutex. */</span><span class="comment"></span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <a class="code" href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a>) <a class="code" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">list</a>;<span class="comment"></span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">  /** Based on state, this is a</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">  list node, protected by the</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment">  corresponding list mutex, in one of the</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">  following lists in buf_pool:</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment">  - BUF_BLOCK_NOT_USED: free, withdraw</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">  - BUF_BLOCK_FILE_PAGE:        flush_list</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">  - BUF_BLOCK_ZIP_DIRTY:        flush_list</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">  - BUF_BLOCK_ZIP_PAGE: zip_clean</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment">  The node pointers are protected by the</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">  corresponding list mutex.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">  The contents of the list node</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">  is undefined if !in_flush_list</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">  &amp;&amp; state == BUF_BLOCK_FILE_PAGE,</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">  or if state is one of</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">  BUF_BLOCK_MEMORY,</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">  BUF_BLOCK_REMOVE_HASH or</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">  BUF_BLOCK_READY_IN_USE. */</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">  /** TRUE if in buf_pool-&gt;flush_list; when buf_pool-&gt;flush_list_mutex is free,</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">  the following should hold:</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">  in_flush_list == (state == BUF_BLOCK_FILE_PAGE ||</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment">                    state == BUF_BLOCK_ZIP_DIRTY)</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">  Writes to this field must be covered by both block-&gt;mutex and</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">  buf_pool-&gt;flush_list_mutex. Hence reads can happen while holding any one</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment">  of the two mutexes */</span></div><div class="line"><a name="l01259"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a5c6fc7cdf889598e4900462c7bb0caca"> 1259</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classbuf__page__t.html#a5c6fc7cdf889598e4900462c7bb0caca">in_flush_list</a>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a55b9e28dcd4b2be689581e5e1b29cad6"> 1261</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classbuf__page__t.html#a55b9e28dcd4b2be689581e5e1b29cad6">in_free_list</a>;<span class="comment"></span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="comment">  /** TRUE if in buf_pool-&gt;free; when buf_pool-&gt;free_list_mutex is free, the</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment">  following should hold: in_free_list == (state == BUF_BLOCK_NOT_USED) */</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a898074966cf06c6a64a2b41e22e0ece4"> 1266</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="classbuf__page__t.html#a898074966cf06c6a64a2b41e22e0ece4">newest_modification</a>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">  /** log sequence number of the youngest modification to this block, zero</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">  if not modified. Protected by block mutex */</span></div><div class="line"><a name="l01270"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a94ddaed471d8322c8c117d5a07504842"> 1270</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="classbuf__page__t.html#a94ddaed471d8322c8c117d5a07504842">oldest_modification</a>;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">  /** log sequence number of the START of the log entry written of the oldest</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">  modification to this block which has not yet been flushed on disk; zero if all</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">  modifications are on disk.  Writes to this field must be covered by both</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">  block-&gt;mutex and buf_pool-&gt;flush_list_mutex. Hence reads can happen while</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">  holding any one of the two mutexes */</span><span class="comment"></span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">  /** @} */</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="comment">  /** @name LRU replacement algorithm fields</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">  These fields are protected by both buf_pool-&gt;LRU_list_mutex and the</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">  block mutex. */</span><span class="comment"></span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <a class="code" href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a>) LRU;<span class="comment"></span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">  /** node of the LRU list */</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment">  /** TRUE if the page is in the LRU list; used in debugging */</span></div><div class="line"><a name="l01288"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#ac96c3eee0fffce259d40af744a62f18d"> 1288</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classbuf__page__t.html#ac96c3eee0fffce259d40af744a62f18d">in_LRU_list</a>;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment">  /** true if the block is in the old blocks in buf_pool-&gt;LRU_old */</span></div><div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#aaf3a27d59c74b01dc0f86ea2407c9bf6"> 1294</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="classbuf__page__t.html#aaf3a27d59c74b01dc0f86ea2407c9bf6">old</a> : 1;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">  /** The value of buf_pool-&gt;freed_page_clock when this block was the last</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment">  time put to the head of the LRU list; a thread is allowed to read this</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">  for heuristic purposes without holding any mutex or latch */</span></div><div class="line"><a name="l01299"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#af8ff4e838ef3eee67b60933b11c91783"> 1299</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="classbuf__page__t.html#af8ff4e838ef3eee67b60933b11c91783">freed_page_clock</a> : 31;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment">  /** @} */</span><span class="comment"></span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">  /** Time of first access, or 0 if the block was never accessed in the</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">  buffer pool. Protected by block mutex */</span></div><div class="line"><a name="l01304"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a608ee8710d6c43f30e9836ee00179b01"> 1304</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="classbuf__page__t.html#a608ee8710d6c43f30e9836ee00179b01">access_time</a>;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment">  /** This is set to TRUE when fsp frees a page in buffer pool;</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment">  protected by buf_pool-&gt;zip_mutex or buf_block_t::mutex. */</span></div><div class="line"><a name="l01309"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#ae550e45232de32f59d40efdfed77b286"> 1309</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classbuf__page__t.html#ae550e45232de32f59d40efdfed77b286">file_page_was_freed</a>;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment">  /** Flush observer */</span></div><div class="line"><a name="l01313"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#a6f99a321231aeb912f49f8918b477e98"> 1313</a></span>&#160;  <a class="code" href="classFlushObserver.html">FlushObserver</a> *<a class="code" href="classbuf__page__t.html#a6f99a321231aeb912f49f8918b477e98">flush_observer</a>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">  /** Double write instance ordinal value during writes. This is used</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">  by IO completion (writes) to select the double write instance.*/</span></div><div class="line"><a name="l01319"></a><span class="lineno"><a class="line" href="classbuf__page__t.html#ab090416c7c3a1b4fe8d9e2ee1a0f301a"> 1319</a></span>&#160;  uint16_t m_dblwr_id{};</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;};</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">/** The buffer control block structure */</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"><a class="line" href="structbuf__block__t.html"> 1324</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbuf__block__t.html">buf_block_t</a> {<span class="comment"></span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">  /** @name General fields */</span><span class="comment"></span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">  /** page information; this must be the first field, so</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment">  that buf_pool-&gt;page_hash can point to buf_page_t or buf_block_t */</span></div><div class="line"><a name="l01330"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a275b67563d761a5581aa734a383f5ee2"> 1330</a></span>&#160;  <a class="code" href="classbuf__page__t.html">buf_page_t</a> <a class="code" href="structbuf__block__t.html#a275b67563d761a5581aa734a383f5ee2">page</a>;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment">  /** pointer to buffer frame which is of size UNIV_PAGE_SIZE, and aligned</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">  to an address divisible by UNIV_PAGE_SIZE */</span></div><div class="line"><a name="l01334"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a8ef8d133a86de0277832fc291bb7f081"> 1334</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structbuf__block__t.html#a8ef8d133a86de0277832fc291bb7f081">frame</a>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">  /** read-write lock of the buffer frame */</span></div><div class="line"><a name="l01338"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a0c10b800772d9306afba5350635a4e7f"> 1338</a></span>&#160;  <a class="code" href="structrw__lock__t.html">BPageLock</a> <a class="code" href="structbuf__block__t.html#a0c10b800772d9306afba5350635a4e7f">lock</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">  /** node of the decompressed LRU list; a block is in the unzip_LRU list if</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">  page.state == BUF_BLOCK_FILE_PAGE and page.zip.data != NULL. Protected by</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">  both LRU_list_mutex and the block mutex. */</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <a class="code" href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a>) unzip_LRU;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">  /** TRUE if the page is in the decompressed LRU list; used in debugging */</span></div><div class="line"><a name="l01349"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a7d009e6bec069b5e7be12b387032b23c"> 1349</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structbuf__block__t.html#a7d009e6bec069b5e7be12b387032b23c">in_unzip_LRU_list</a>;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a423fa57d7af8ae1a362d5c33a788f063"> 1351</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structbuf__block__t.html#a423fa57d7af8ae1a362d5c33a788f063">in_withdraw_list</a>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">  /** hashed value of the page address in the record lock hash table;</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">  protected by buf_block_t::lock (or buf_block_t::mutex in buf_page_get_gen(),</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">  buf_page_init_for_read() and buf_page_create()) */</span></div><div class="line"><a name="l01357"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a9a2fe504c95e66fee175149cc7943b05"> 1357</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structbuf__block__t.html#a9a2fe504c95e66fee175149cc7943b05">lock_hash_val</a> : 32;<span class="comment"></span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">  /** @} */</span><span class="comment"></span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">  /** @name Optimistic search field */</span><span class="comment"></span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">  /** This clock is incremented every time a pointer to a record on the page</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">  may become obsolete; this is used in the optimistic cursor positioning: if</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">  the modify clock has not changed, we know that the pointer is still valid;</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">  this field may be changed if the thread (1) owns the LRU list mutex and the</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">  page is not bufferfixed, or (2) the thread has an x-latch on the block,</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">  or (3) the block must belong to an intrinsic table */</span></div><div class="line"><a name="l01368"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a0b5817c9011789ee63367a3818581b12"> 1368</a></span>&#160;  uint64_t <a class="code" href="structbuf__block__t.html#a0b5817c9011789ee63367a3818581b12">modify_clock</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">  /** @} */</span><span class="comment"></span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">  /** @name Hash search fields (unprotected)</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">  NOTE that these fields are NOT protected by any semaphore! */</span><span class="comment"></span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">  /** counter which controls building of a new hash index for the page */</span></div><div class="line"><a name="l01376"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#acb908f99682168e39a9dfd69624f7954"> 1376</a></span>&#160;  ulint <a class="code" href="structbuf__block__t.html#acb908f99682168e39a9dfd69624f7954">n_hash_helps</a>;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">  /** recommended prefix length for hash search: number of bytes in an</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">  incomplete last field */</span></div><div class="line"><a name="l01380"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a972cf65b12b166a38318f5057f712c8a"> 1380</a></span>&#160;  <span class="keyword">volatile</span> ulint <a class="code" href="structbuf__block__t.html#a972cf65b12b166a38318f5057f712c8a">n_bytes</a>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">  /** recommended prefix length for hash search: number of full fields */</span></div><div class="line"><a name="l01383"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#ac28d95bdb91ffa6591f756eb1628f4e8"> 1383</a></span>&#160;  <span class="keyword">volatile</span> ulint <a class="code" href="structbuf__block__t.html#ac28d95bdb91ffa6591f756eb1628f4e8">n_fields</a>;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">  /** true or false, depending on whether the leftmost record of several</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">  records with the same prefix should be indexed in the hash index */</span></div><div class="line"><a name="l01387"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a859d0a79e91ab56e851dc8a0826abff1"> 1387</a></span>&#160;  <span class="keyword">volatile</span> <span class="keywordtype">bool</span> <a class="code" href="structbuf__block__t.html#a859d0a79e91ab56e851dc8a0826abff1">left_side</a>;<span class="comment"></span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">  /** @} */</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">  /** @name Hash search fields</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">  These 5 fields may only be modified when:</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">  we are holding the appropriate x-latch in btr_search_latches[], and</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">  one of the following holds:</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">  (1) the block state is BUF_BLOCK_FILE_PAGE, and</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">  we are holding an s-latch or x-latch on buf_block_t::lock, or</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">  (2) buf_block_t::buf_fix_count == 0, or</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">  (3) the block state is BUF_BLOCK_REMOVE_HASH.</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">  An exception to this is when we init or create a page</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment">  in the buffer pool in buf0buf.cc.</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment">  Another exception for buf_pool_clear_hash_index() is that</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">  assigning block-&gt;index = NULL (and block-&gt;n_pointers = 0)</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment">  is allowed whenever btr_search_own_all(RW_LOCK_X).</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">  Another exception is that ha_insert_for_fold_func() may</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">  decrement n_pointers without holding the appropriate latch</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">  in btr_search_latches[]. Thus, n_pointers must be</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">  protected by atomic memory access.</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">  This implies that the fields may be read without race</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">  condition whenever any of the following hold:</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">  - the btr_search_latches[] s-latch or x-latch is being held, or</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">  - the block state is not BUF_BLOCK_FILE_PAGE or BUF_BLOCK_REMOVE_HASH,</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">  and holding some latch prevents the state from changing to that.</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">  Some use of assert_block_ahi_empty() or assert_block_ahi_valid()</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">  is prone to race conditions while buf_pool_clear_hash_index() is</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">  executing (the adaptive hash index is being disabled). Such use</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">  is explicitly commented. */</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="preprocessor">#if defined UNIV_AHI_DEBUG || defined UNIV_DEBUG</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">  /** used in debugging: the number of pointers in the adaptive hash index</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">  pointing to this frame; protected by atomic memory access or</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">  btr_search_own_all(). */</span></div><div class="line"><a name="l01428"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#ac50b25d43035c9879d046f193ca7c1c3"> 1428</a></span>&#160;  ulint <a class="code" href="structbuf__block__t.html#ac50b25d43035c9879d046f193ca7c1c3">n_pointers</a>;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#affa9940137a5129ae26401fec94405b8"> 1430</a></span>&#160;<span class="preprocessor">#define assert_block_ahi_empty(block) \</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="preprocessor">  ut_a(os_atomic_increment_ulint(&amp;(block)-&gt;n_pointers, 0) == 0)</span></div><div class="line"><a name="l01432"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a53b955ddf5d5d81f383aa5224bfa0fc8"> 1432</a></span>&#160;<span class="preprocessor">#define assert_block_ahi_empty_on_init(block)                        \</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="preprocessor">  do {                                                               \</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="preprocessor">    UNIV_MEM_VALID(&amp;(block)-&gt;n_pointers, sizeof(block)-&gt;n_pointers); \</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="preprocessor">    assert_block_ahi_empty(block);                                   \</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a29568fcc4b71168849c777ddf66af1f1"> 1438</a></span>&#160;<span class="preprocessor">#define assert_block_ahi_valid(block) \</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="preprocessor">  ut_a((block)-&gt;index ||              \</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="preprocessor">       os_atomic_increment_ulint(&amp;(block)-&gt;n_pointers, 0) == 0)</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="preprocessor">#else                                         </span><span class="comment">/* UNIV_AHI_DEBUG || UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="preprocessor">#define assert_block_ahi_empty(block)         </span><span class="comment">/* nothing */</span><span class="preprocessor"></span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="preprocessor">#define assert_block_ahi_empty_on_init(block) </span><span class="comment">/* nothing */</span><span class="preprocessor"></span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="preprocessor">#define assert_block_ahi_valid(block)         </span><span class="comment">/* nothing */</span><span class="preprocessor"></span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="preprocessor">#endif                                        </span><span class="comment">/* UNIV_AHI_DEBUG || UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">  /** prefix length for hash indexing: number of full fields */</span></div><div class="line"><a name="l01448"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#abd502c27ab099e000f52980eb5320a5d"> 1448</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structbuf__block__t.html#abd502c27ab099e000f52980eb5320a5d">curr_n_fields</a> : 10;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">  /** number of bytes in hash indexing */</span></div><div class="line"><a name="l01451"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#ae1feaf77a181565201cf1e76ae69a890"> 1451</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structbuf__block__t.html#ae1feaf77a181565201cf1e76ae69a890">curr_n_bytes</a> : 15;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">  /** TRUE or FALSE in hash indexing */</span></div><div class="line"><a name="l01454"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#ab266dbdd4987a973d17481a3adda93a7"> 1454</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structbuf__block__t.html#ab266dbdd4987a973d17481a3adda93a7">curr_left_side</a> : 1;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">  /** Index for which the adaptive hash index has been created, or NULL if</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">  the page does not exist in the index. Note that it does not guarantee that</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">  the index is complete, though: there may have been hash collisions, record</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">  deletions, etc. */</span></div><div class="line"><a name="l01460"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#abe5e0c130f4eb214c713eab5cc530733"> 1460</a></span>&#160;  <a class="code" href="structdict__index__t.html">dict_index_t</a> *<a class="code" href="structbuf__block__t.html#abe5e0c130f4eb214c713eab5cc530733">index</a>;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">  /** @} */</span><span class="comment"></span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">  /** true if block has been made dirty without acquiring X/SX latch as the</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">  block belongs to temporary tablespace and block is always accessed by a</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">  single thread. */</span></div><div class="line"><a name="l01466"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#ad0299484987534038b0f7d9febdcfe86"> 1466</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structbuf__block__t.html#ad0299484987534038b0f7d9febdcfe86">made_dirty_with_no_latch</a>;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">  /** @name Debug fields */</span><span class="comment"></span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment">  /** @{ */</span><span class="comment"></span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">  /** In the debug version, each thread which bufferfixes the block acquires</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">  an s-latch here; so we can use the debug utilities in sync0rw */</span></div><div class="line"><a name="l01474"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a05158d5f9b4078d10a38e9a3edc628fa"> 1474</a></span>&#160;  <a class="code" href="structrw__lock__t.html">rw_lock_t</a> <a class="code" href="structbuf__block__t.html#a05158d5f9b4078d10a38e9a3edc628fa">debug_latch</a>;<span class="comment"></span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">  /** @} */</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">  /** mutex protecting this block: state (also protected by the buffer</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">  pool mutex), io_fix, buf_fix_count, and accessed; we introduce this</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment">  new mutex in InnoDB-5.1 to relieve contention on the buffer pool mutex */</span></div><div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a8d7b5093768acbd9bc67b1ec6a6f4c21"> 1482</a></span>&#160;  <a class="code" href="buf0types_8h.html#a728dccae958dd22a0f7ddd16cf6e4f0a">BPageMutex</a> <a class="code" href="structbuf__block__t.html#a8d7b5093768acbd9bc67b1ec6a6f4c21">mutex</a>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">  /** Get the page number and space id of the current buffer block.</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">  @return page number of the current buffer block. */</span></div><div class="line"><a name="l01486"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a155be9f1e032ea05b056b890360fc4a4"> 1486</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classpage__id__t.html">page_id_t</a> &amp;<a class="code" href="structbuf__block__t.html#a155be9f1e032ea05b056b890360fc4a4">get_page_id</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> page.<a class="code" href="classbuf__page__t.html#a953a2cc53ebbeeccf783e5156ae8ff02">id</a>; }</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment">  /** Get the page number of the current buffer block.</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">  @return page number of the current buffer block. */</span></div><div class="line"><a name="l01490"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a9cec978d7812da8c2bc0b832f1ae390e"> 1490</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structbuf__block__t.html#a9cec978d7812da8c2bc0b832f1ae390e">get_page_no</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (page.<a class="code" href="classbuf__page__t.html#a953a2cc53ebbeeccf783e5156ae8ff02">id</a>.<a class="code" href="classpage__id__t.html#ae5bfc6c97828e076a14cc8f2603476e1">page_no</a>()); }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="comment">  /** Get the next page number of the current buffer block.</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment">  @return next page number of the current buffer block. */</span></div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a28623dd39a05dc77710756e2be9f4ac0"> 1494</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structbuf__block__t.html#a28623dd39a05dc77710756e2be9f4ac0">get_next_page_no</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="mach0data_8h.html#acfbcf3ef65b1138bd0d9c3abf2594c2a">mach_read_from_4</a>(frame + <a class="code" href="fil0types_8h.html#a632708bb0d91ead54c500d7772f84ec5">FIL_PAGE_NEXT</a>));</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  }</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">  /** Get the prev page number of the current buffer block.</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">  @return prev page number of the current buffer block. */</span></div><div class="line"><a name="l01500"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a4e5ac54b3d0c1a0c5d4a950c8b9f61a9"> 1500</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structbuf__block__t.html#a4e5ac54b3d0c1a0c5d4a950c8b9f61a9">get_prev_page_no</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="mach0data_8h.html#acfbcf3ef65b1138bd0d9c3abf2594c2a">mach_read_from_4</a>(frame + <a class="code" href="fil0types_8h.html#aad2ed3fea0198513393719435d632a09">FIL_PAGE_PREV</a>));</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment">  /** Get the page type of the current buffer block.</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="comment">  @return page type of the current buffer block. */</span></div><div class="line"><a name="l01506"></a><span class="lineno"><a class="line" href="structbuf__block__t.html#a1fdae1d22204e98f3a6ae31892020e0a"> 1506</a></span>&#160;  <a class="code" href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a> <a class="code" href="structbuf__block__t.html#a1fdae1d22204e98f3a6ae31892020e0a">get_page_type</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="mach0data_8h.html#ac9eed1c0fd6bf1f7edd38bebdea3fd13">mach_read_from_2</a>(frame + <a class="code" href="fil0types_8h.html#a21e45de3e62f010649a911f8027cfa4e">FIL_PAGE_TYPE</a>));</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment">  /** Get the page type of the current buffer block as string.</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">  @return page type of the current buffer block as string. */</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *get_page_type_str() <span class="keyword">const</span>;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;};</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment">/** Check if a buf_block_t object is in a valid state</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="comment">@param block buffer block</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment">@return true if valid */</span></div><div class="line"><a name="l01518"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aa20f5c2f2899db5e3414580b07b50ed9"> 1518</a></span>&#160;<span class="preprocessor">#define buf_block_state_valid(block)                   \</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="preprocessor">  (buf_block_get_state(block) &gt;= BUF_BLOCK_NOT_USED &amp;&amp; \</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="preprocessor">   (buf_block_get_state(block) &lt;= BUF_BLOCK_REMOVE_HASH))</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="comment">/** Compute the hash fold value for blocks in buf_pool-&gt;zip_hash. */</span><span class="comment"></span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment">/** @{ */</span></div><div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#acf241fbcf516b9cd38017fbf9a7d211b"> 1524</a></span>&#160;<span class="preprocessor">#define BUF_POOL_ZIP_FOLD_PTR(ptr) ((ulint)(ptr) / UNIV_PAGE_SIZE)</span></div><div class="line"><a name="l01525"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a9c028eac069f92725d6fef2d502c33bb"> 1525</a></span>&#160;<span class="preprocessor">#define BUF_POOL_ZIP_FOLD(b) BUF_POOL_ZIP_FOLD_PTR((b)-&gt;frame)</span></div><div class="line"><a name="l01526"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a7ca27db7bba7c227b5a7b2f02ee5a8f0"> 1526</a></span>&#160;<span class="preprocessor">#define BUF_POOL_ZIP_FOLD_BPAGE(b) BUF_POOL_ZIP_FOLD((buf_block_t *)(b))</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment">/** @} */</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment">/** A &quot;Hazard Pointer&quot; class used to iterate over page lists</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment">inside the buffer pool. A hazard pointer is a buf_page_t pointer</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment">which we intend to iterate over next and we want it remain valid</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="comment">even after we release the buffer pool mutex. */</span></div><div class="line"><a name="l01533"></a><span class="lineno"><a class="line" href="classHazardPointer.html"> 1533</a></span>&#160;<span class="keyword">class </span><a class="code" href="classHazardPointer.html">HazardPointer</a> {</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment">  @param buf_pool buffer pool instance</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment">  @param mutex  mutex that is protecting the hp. */</span></div><div class="line"><a name="l01538"></a><span class="lineno"><a class="line" href="classHazardPointer.html#ae57f3755a75c2c09d82ad972f3a8abae"> 1538</a></span>&#160;  <a class="code" href="classHazardPointer.html#ae57f3755a75c2c09d82ad972f3a8abae">HazardPointer</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <span class="keyword">const</span> ib_mutex_t *<a class="code" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>)</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      : m_buf_pool(buf_pool)</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;#ifdef UNIV_DEBUG</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        ,</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        m_mutex(mutex)</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;#endif <span class="comment">/* UNIV_DEBUG */</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        ,</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        m_hp() {</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  }</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">  /** Destructor */</span></div><div class="line"><a name="l01549"></a><span class="lineno"><a class="line" href="classHazardPointer.html#adc39db9b4cc58ec5fc7b84b8be319327"> 1549</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classHazardPointer.html#adc39db9b4cc58ec5fc7b84b8be319327">~HazardPointer</a>() {}</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">  /** Get current value */</span></div><div class="line"><a name="l01552"></a><span class="lineno"><a class="line" href="classHazardPointer.html#a7ea0364edc4a3ab4b17535b65586c09b"> 1552</a></span>&#160;  <a class="code" href="classbuf__page__t.html">buf_page_t</a> *<span class="keyword">get</span>() <span class="keyword">const</span> {</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <a class="code" href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a>(<a class="code" href="ut0mutex_8h.html#a7eccf8a96f24ab7f4012bb203640cf17">mutex_own</a>(m_mutex));</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordflow">return</span> (m_hp);</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  }</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">  /** Set current value</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment">  @param bpage  buffer block to be set as hp */</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="keywordtype">void</span> <span class="keyword">set</span>(<a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment">  /** Checks if a bpage is the hp</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment">  @param bpage  buffer block to be compared</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="comment">  @return true if it is hp */</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="keywordtype">bool</span> is_hp(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment">  /** Adjust the value of hp. This happens when some</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment">  other thread working on the same list attempts to</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">  remove the hp from the list. Must be implemented</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">  by the derived classes.</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">  @param bpage  buffer block to be compared */</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> adjust(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) = 0;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment">  /** Adjust the value of hp for moving. This happens</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">  when some other thread working on the same list</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">  attempts to relocate the hp of the page.</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">  @param bpage  buffer block to be compared</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment">  @param dpage  buffer block to be moved to */</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="keywordtype">void</span> move(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage, <a class="code" href="classbuf__page__t.html">buf_page_t</a> *dpage);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160; <span class="keyword">protected</span>:<span class="comment"></span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment">  /** Disable copying */</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <a class="code" href="classHazardPointer.html">HazardPointer</a>(<span class="keyword">const</span> <a class="code" href="classHazardPointer.html">HazardPointer</a> &amp;);</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <a class="code" href="classHazardPointer.html">HazardPointer</a> &amp;operator=(<span class="keyword">const</span> <a class="code" href="classHazardPointer.html">HazardPointer</a> &amp;);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">  /** Buffer pool instance */</span></div><div class="line"><a name="l01586"></a><span class="lineno"><a class="line" href="classHazardPointer.html#a8b31ae46f20f42ff3c1eb1b1e7636c06"> 1586</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *<a class="code" href="classHazardPointer.html#a8b31ae46f20f42ff3c1eb1b1e7636c06">m_buf_pool</a>;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">  /** mutex that protects access to the m_hp. */</span></div><div class="line"><a name="l01590"></a><span class="lineno"><a class="line" href="classHazardPointer.html#a6b26c23191d6a67d9fbcd4c96b96bc01"> 1590</a></span>&#160;  <span class="keyword">const</span> ib_mutex_t *<a class="code" href="classHazardPointer.html#a6b26c23191d6a67d9fbcd4c96b96bc01">m_mutex</a>;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">  /** hazard pointer. */</span></div><div class="line"><a name="l01594"></a><span class="lineno"><a class="line" href="classHazardPointer.html#a7ce282e8d949a4d423f4f80b668361d3"> 1594</a></span>&#160;  <a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="classHazardPointer.html#a7ce282e8d949a4d423f4f80b668361d3">m_hp</a>;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;};</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment">/** Class implementing buf_pool-&gt;flush_list hazard pointer */</span></div><div class="line"><a name="l01598"></a><span class="lineno"><a class="line" href="classFlushHp.html"> 1598</a></span>&#160;<span class="keyword">class </span><a class="code" href="classFlushHp.html">FlushHp</a> : <span class="keyword">public</span> <a class="code" href="classHazardPointer.html">HazardPointer</a> {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">  @param buf_pool buffer pool instance</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment">  @param mutex  mutex that is protecting the hp. */</span></div><div class="line"><a name="l01603"></a><span class="lineno"><a class="line" href="classFlushHp.html#a45ce782180f5a4d58404795852ec9ae5"> 1603</a></span>&#160;  <a class="code" href="classFlushHp.html#a45ce782180f5a4d58404795852ec9ae5">FlushHp</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <span class="keyword">const</span> ib_mutex_t *<a class="code" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>)</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      : <a class="code" href="classHazardPointer.html">HazardPointer</a>(buf_pool, mutex) {}</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment">  /** Destructor */</span></div><div class="line"><a name="l01607"></a><span class="lineno"><a class="line" href="classFlushHp.html#a5d1614437bbe29b8e6665cee8a0b1765"> 1607</a></span>&#160;  <a class="code" href="classFlushHp.html#a5d1614437bbe29b8e6665cee8a0b1765">~FlushHp</a>()<span class="keyword"> override </span>{}</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="comment">  /** Adjust the value of hp. This happens when some</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="comment">  other thread working on the same list attempts to</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="comment">  remove the hp from the list.</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="comment">  @param bpage  buffer block to be compared */</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keywordtype">void</span> adjust(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="keyword">override</span>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;};</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">/** Class implementing buf_pool-&gt;LRU hazard pointer */</span></div><div class="line"><a name="l01617"></a><span class="lineno"><a class="line" href="classLRUHp.html"> 1617</a></span>&#160;<span class="keyword">class </span><a class="code" href="classLRUHp.html">LRUHp</a> : <span class="keyword">public</span> <a class="code" href="classHazardPointer.html">HazardPointer</a> {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment">  @param buf_pool buffer pool instance</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="comment">  @param mutex  mutex that is protecting the hp. */</span></div><div class="line"><a name="l01622"></a><span class="lineno"><a class="line" href="classLRUHp.html#ad4f334ed073fd05d0d35e4bc1d49f2ed"> 1622</a></span>&#160;  <a class="code" href="classLRUHp.html#ad4f334ed073fd05d0d35e4bc1d49f2ed">LRUHp</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <span class="keyword">const</span> ib_mutex_t *<a class="code" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>)</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      : <a class="code" href="classHazardPointer.html">HazardPointer</a>(buf_pool, mutex) {}</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="comment">  /** Destructor */</span></div><div class="line"><a name="l01626"></a><span class="lineno"><a class="line" href="classLRUHp.html#aade56d05efd97720fc2c1a10a2a87755"> 1626</a></span>&#160;  <a class="code" href="classLRUHp.html#aade56d05efd97720fc2c1a10a2a87755">~LRUHp</a>()<span class="keyword"> override </span>{}</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment">  /** Adjust the value of hp. This happens when some</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">  other thread working on the same list attempts to</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">  remove the hp from the list.</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">  @param bpage  buffer block to be compared */</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keywordtype">void</span> adjust(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *bpage) <span class="keyword">override</span>;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;};</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">/** Special purpose iterators to be used when scanning the LRU list.</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="comment">The idea is that when one thread finishes the scan it leaves the</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="comment">itr in that position and the other thread can start scan from</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="comment">there */</span></div><div class="line"><a name="l01639"></a><span class="lineno"><a class="line" href="classLRUItr.html"> 1639</a></span>&#160;<span class="keyword">class </span><a class="code" href="classLRUItr.html">LRUItr</a> : <span class="keyword">public</span> <a class="code" href="classLRUHp.html">LRUHp</a> {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">  /** Constructor</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">  @param buf_pool buffer pool instance</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">  @param mutex  mutex that is protecting the hp. */</span></div><div class="line"><a name="l01644"></a><span class="lineno"><a class="line" href="classLRUItr.html#acf8e5a869d241c48dbbd836c05f70e05"> 1644</a></span>&#160;  <a class="code" href="classLRUItr.html#acf8e5a869d241c48dbbd836c05f70e05">LRUItr</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool, <span class="keyword">const</span> ib_mutex_t *<a class="code" href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>)</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      : <a class="code" href="classLRUHp.html">LRUHp</a>(buf_pool, mutex) {}</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">  /** Destructor */</span></div><div class="line"><a name="l01648"></a><span class="lineno"><a class="line" href="classLRUItr.html#a4dc84c304498caf6b2aee64f4c83fe4b"> 1648</a></span>&#160;  <a class="code" href="classLRUItr.html#a4dc84c304498caf6b2aee64f4c83fe4b">~LRUItr</a>()<span class="keyword"> override </span>{}</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">  /** Selects from where to start a scan. If we have scanned</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment">  too deep into the LRU list it resets the value to the tail</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment">  of the LRU list.</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;<span class="comment">  @return buf_page_t from where to start scan. */</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="http__auth__backend__plugin_8cc.html#aee70c8416f705726100824ba89f1e090">start</a>();</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;};</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">/** Struct that is embedded in the free zip blocks */</span></div><div class="line"><a name="l01658"></a><span class="lineno"><a class="line" href="structbuf__buddy__free__t.html"> 1658</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a> {</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keyword">union </span>{</div><div class="line"><a name="l01660"></a><span class="lineno"><a class="line" href="structbuf__buddy__free__t.html#a4cb2a5dabd97fc8cf918f43570abf4f3"> 1660</a></span>&#160;    ulint <a class="code" href="structbuf__buddy__free__t.html#a4cb2a5dabd97fc8cf918f43570abf4f3">size</a>; <span class="comment">/*!&lt; size of the block */</span></div><div class="line"><a name="l01661"></a><span class="lineno"><a class="line" href="structbuf__buddy__free__t.html#a891fa77af9be1f1ff2b0f8c24db45c4d"> 1661</a></span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> bytes[<a class="code" href="fil0types_8h.html#aeada81e615965f1c118da2517fb72720">FIL_PAGE_DATA</a>];<span class="comment"></span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment">    /*!&lt; stamp[FIL_PAGE_ARCH_LOG_NO_OR_SPACE_ID]</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">    == BUF_BUDDY_FREE_STAMP denotes a free</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">    block. If the space_id field of buddy</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">    block != BUF_BUDDY_FREE_STAMP, the block</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment">    is not in any zip_free list. If the</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">    space_id is BUF_BUDDY_FREE_STAMP then</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment">    stamp[0] will contain the</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="comment">    buddy block size. */</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  } stamp;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"><a class="line" href="structbuf__buddy__free__t.html#aa7b46248db36de187576aa40e4ab3b77"> 1672</a></span>&#160;  <a class="code" href="classbuf__page__t.html">buf_page_t</a> <a class="code" href="structbuf__buddy__free__t.html#aa7b46248db36de187576aa40e4ab3b77">bpage</a>; <span class="comment">/*!&lt; Embedded bpage descriptor */</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <a class="code" href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a>(<a class="code" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a>) <a class="code" href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">list</a>;<span class="comment"></span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment">  /*!&lt; Node of zip_free list */</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;};</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="comment">/** @brief The buffer pool statistics structure. */</span></div><div class="line"><a name="l01678"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html"> 1678</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbuf__pool__stat__t.html">buf_pool_stat_t</a> {</div><div class="line"><a name="l01679"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#aafb5f3a8003baba5e2a100c7037d14c5"> 1679</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="structCounter_1_1Shards.html">Shards</a> = <a class="code" href="structCounter_1_1Shards.html">Counter::Shards&lt;64&gt;</a>;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment">  /** Number of page gets performed; also successful searches through the</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="comment">  adaptive hash index are counted as page gets; this field is NOT protected</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="comment">  by the buffer pool mutex */</span></div><div class="line"><a name="l01684"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#a90eff7908e42d2efccd79cacdbcf0a30"> 1684</a></span>&#160;  <a class="code" href="structCounter_1_1Shards.html">Shards</a> <a class="code" href="structbuf__pool__stat__t.html#a90eff7908e42d2efccd79cacdbcf0a30">m_n_page_gets</a>;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="comment">  /** Number of read operations. Accessed atomically. */</span></div><div class="line"><a name="l01687"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#a3e9e7df03a75b4a8575e5b86d953b346"> 1687</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#a3e9e7df03a75b4a8575e5b86d953b346">n_pages_read</a>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="comment">  /** Number of write operations. Accessed atomically. */</span></div><div class="line"><a name="l01690"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#ae3a0432079bcb317fdb0d425040d24a9"> 1690</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#ae3a0432079bcb317fdb0d425040d24a9">n_pages_written</a>;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="comment">  /**  number of pages created in the pool with no read. Accessed atomically. */</span></div><div class="line"><a name="l01693"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#a75a295b4a6804c83bd7688d59c16e1b2"> 1693</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#a75a295b4a6804c83bd7688d59c16e1b2">n_pages_created</a>;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">  /** Number of pages read in as part of random read ahead. Not protected. */</span></div><div class="line"><a name="l01696"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#a2cd33f739a82b1f8c266caf98530bbe0"> 1696</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#a2cd33f739a82b1f8c266caf98530bbe0">n_ra_pages_read_rnd</a>;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment">  /** Number of pages read in as part of read ahead. Not protected. */</span></div><div class="line"><a name="l01699"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#ae1f31d541e765c8b92a7d9a1654521e8"> 1699</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#ae1f31d541e765c8b92a7d9a1654521e8">n_ra_pages_read</a>;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment">  /** Number of read ahead pages that are evicted without being accessed.</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">  Protected by LRU_list_mutex. */</span></div><div class="line"><a name="l01703"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#a55cfde7ee75f62c78d46c969ccf475ee"> 1703</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#a55cfde7ee75f62c78d46c969ccf475ee">n_ra_pages_evicted</a>;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">  /** Number of pages made young, in calls to buf_LRU_make_block_young().</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment">  Protected by LRU_list_mutex. */</span></div><div class="line"><a name="l01707"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#a4bdb21e0d62e6c15ef459575bf91791e"> 1707</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#a4bdb21e0d62e6c15ef459575bf91791e">n_pages_made_young</a>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">  /** Number of pages not made young because the first access was not long</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment">  enough ago, in buf_page_peek_if_too_old(). Not protected. */</span></div><div class="line"><a name="l01711"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#a1da34e74533530d32d3f7e8c0d1eec20"> 1711</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#a1da34e74533530d32d3f7e8c0d1eec20">n_pages_not_made_young</a>;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="comment">  /** LRU size in bytes. Protected by LRU_list_mutex. */</span></div><div class="line"><a name="l01714"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#aa834cd29fe096570a241f2f1453763f0"> 1714</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#aa834cd29fe096570a241f2f1453763f0">LRU_bytes</a>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">  /** Flush_list size in bytes.  Protected by flush_list_mutex */</span></div><div class="line"><a name="l01717"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#a843f298ccdb6064fc44d0933d9a929c0"> 1717</a></span>&#160;  uint64_t <a class="code" href="structbuf__pool__stat__t.html#a843f298ccdb6064fc44d0933d9a929c0">flush_list_bytes</a>;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#ad91ea6b52e34b1ddca5d1b38d9d022e4"> 1719</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structbuf__pool__stat__t.html#ad91ea6b52e34b1ddca5d1b38d9d022e4">copy</a>(<a class="code" href="structbuf__pool__stat__t.html">buf_pool_stat_t</a> &amp;dst, <span class="keyword">const</span> <a class="code" href="structbuf__pool__stat__t.html">buf_pool_stat_t</a> &amp;src) noexcept {</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <a class="code" href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">Counter::copy</a>(dst.m_n_page_gets, src.m_n_page_gets);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    dst.n_pages_read = src.n_pages_read;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    dst.n_pages_written = src.n_pages_written;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    dst.n_pages_created = src.n_pages_created;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    dst.n_ra_pages_read_rnd = src.n_ra_pages_read_rnd;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    dst.n_ra_pages_read = src.n_ra_pages_read;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    dst.n_ra_pages_evicted = src.n_ra_pages_evicted;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    dst.n_pages_made_young = src.n_pages_made_young;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    dst.n_pages_not_made_young = src.n_pages_not_made_young;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    dst.LRU_bytes = src.LRU_bytes;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    dst.flush_list_bytes = src.flush_list_bytes;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  }</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;</div><div class="line"><a name="l01743"></a><span class="lineno"><a class="line" href="structbuf__pool__stat__t.html#ad2c44ef40244dac836e9d88fd396f723"> 1743</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structbuf__pool__stat__t.html#ad2c44ef40244dac836e9d88fd396f723">reset</a>() {</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <a class="code" href="namespaceCounter.html#abffd9234ba48273d835ae5cf193e3844">Counter::clear</a>(m_n_page_gets);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    n_pages_read = 0;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    n_pages_written = 0;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    n_pages_created = 0;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    n_ra_pages_read_rnd = 0;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    n_ra_pages_read = 0;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    n_ra_pages_evicted = 0;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    n_pages_made_young = 0;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    n_pages_not_made_young = 0;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    LRU_bytes = 0;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    flush_list_bytes = 0;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  }</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;};</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment">/** Statistics of buddy blocks of a given size. */</span></div><div class="line"><a name="l01760"></a><span class="lineno"><a class="line" href="structbuf__buddy__stat__t.html"> 1760</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbuf__buddy__stat__t.html">buf_buddy_stat_t</a> {<span class="comment"></span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment">  /** Number of blocks allocated from the buddy system. */</span></div><div class="line"><a name="l01762"></a><span class="lineno"><a class="line" href="structbuf__buddy__stat__t.html#ae3c5042e1440a001a8d58bb683c5e41f"> 1762</a></span>&#160;  ulint <a class="code" href="structbuf__buddy__stat__t.html#ae3c5042e1440a001a8d58bb683c5e41f">used</a>;<span class="comment"></span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment">  /** Number of blocks relocated by the buddy system. */</span></div><div class="line"><a name="l01764"></a><span class="lineno"><a class="line" href="structbuf__buddy__stat__t.html#a09ebf3091d6c4ea6de4319c7e45eef7e"> 1764</a></span>&#160;  uint64_t <a class="code" href="structbuf__buddy__stat__t.html#a09ebf3091d6c4ea6de4319c7e45eef7e">relocated</a>;<span class="comment"></span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="comment">  /** Total duration of block relocations, in microseconds. */</span></div><div class="line"><a name="l01766"></a><span class="lineno"><a class="line" href="structbuf__buddy__stat__t.html#a895b045610b5075ce26c62ffc91bd0e4"> 1766</a></span>&#160;  uint64_t <a class="code" href="structbuf__buddy__stat__t.html#a895b045610b5075ce26c62ffc91bd0e4">relocated_usec</a>;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;};</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">/** @brief The buffer pool structure.</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment">NOTE! The definition appears here only for other modules of this</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment">directory (buf) to see it. Do not use from outside! */</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div><div class="line"><a name="l01774"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html"> 1774</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structbuf__pool__t.html">buf_pool_t</a> {<span class="comment"></span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="comment">  /** @name General fields */</span><span class="comment"></span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01777"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a5a47267e7a08944d5d0c6b7d3a7d9006"> 1777</a></span>&#160;  <a class="code" href="buf0types_8h.html#a728aa61522bdb760bd9bd2914513a36c">BufListMutex</a> <a class="code" href="structbuf__pool__t.html#a5a47267e7a08944d5d0c6b7d3a7d9006">chunks_mutex</a>;    <span class="comment">/*!&lt; protects (de)allocation of chunks:</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment">                                - changes to chunks, n_chunks are performed</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">                                  while holding this latch,</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment">                                - reading buf_pool_should_madvise requires</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;<span class="comment">                                  holding this latch for any buf_pool_t</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">                                - writing to buf_pool_should_madvise requires</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="comment">                                  holding these latches for all buf_pool_t-s</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="comment">                                */</span></div><div class="line"><a name="l01785"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a9db1ee56155c14ea2870bc74b3443d9b"> 1785</a></span>&#160;  <a class="code" href="buf0types_8h.html#a728aa61522bdb760bd9bd2914513a36c">BufListMutex</a> <a class="code" href="structbuf__pool__t.html#a9db1ee56155c14ea2870bc74b3443d9b">LRU_list_mutex</a>;  <span class="comment">/*!&lt; LRU list mutex */</span></div><div class="line"><a name="l01786"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ae2a36a64c9775f590dfae2e47516b16b"> 1786</a></span>&#160;  <a class="code" href="buf0types_8h.html#a728aa61522bdb760bd9bd2914513a36c">BufListMutex</a> <a class="code" href="structbuf__pool__t.html#ae2a36a64c9775f590dfae2e47516b16b">free_list_mutex</a>; <span class="comment">/*!&lt; free and withdraw list mutex */</span></div><div class="line"><a name="l01787"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a6291c0c70a786c113c2d7c7bfe6afbb9"> 1787</a></span>&#160;  <a class="code" href="buf0types_8h.html#a728aa61522bdb760bd9bd2914513a36c">BufListMutex</a> <a class="code" href="structbuf__pool__t.html#a6291c0c70a786c113c2d7c7bfe6afbb9">zip_free_mutex</a>;  <span class="comment">/*!&lt; buddy allocator mutex */</span></div><div class="line"><a name="l01788"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#af82b0a923041e5ddad344c8f1d177c14"> 1788</a></span>&#160;  <a class="code" href="buf0types_8h.html#a728aa61522bdb760bd9bd2914513a36c">BufListMutex</a> <a class="code" href="structbuf__pool__t.html#af82b0a923041e5ddad344c8f1d177c14">zip_hash_mutex</a>;  <span class="comment">/*!&lt; zip_hash mutex */</span></div><div class="line"><a name="l01789"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a96040907b997b91c51feda9ba0b87d1f"> 1789</a></span>&#160;  ib_mutex_t <a class="code" href="structbuf__pool__t.html#a96040907b997b91c51feda9ba0b87d1f">flush_state_mutex</a>; <span class="comment">/*!&lt; Flush state protection</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment">                              mutex */</span></div><div class="line"><a name="l01791"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ae663da445248d1af7f38b75dddd4ff9b"> 1791</a></span>&#160;  <a class="code" href="buf0types_8h.html#a12e6e65b485343049745e6ec5d7513c6">BufPoolZipMutex</a> <a class="code" href="structbuf__pool__t.html#ae663da445248d1af7f38b75dddd4ff9b">zip_mutex</a>;    <span class="comment">/*!&lt; Zip mutex of this buffer</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">                                pool instance, protects compressed</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment">                                only pages (of type buf_page_t, not</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment">                                buf_block_t */</span></div><div class="line"><a name="l01795"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ac7264f647475c1a97e2aa54210750563"> 1795</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#ac7264f647475c1a97e2aa54210750563">instance_no</a>;            <span class="comment">/*!&lt; Array index of this buffer</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment">                                pool instance */</span></div><div class="line"><a name="l01797"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ab30577642b259b121117a1eb513ea1ed"> 1797</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#ab30577642b259b121117a1eb513ea1ed">curr_pool_size</a>;         <span class="comment">/*!&lt; Current pool size in bytes */</span></div><div class="line"><a name="l01798"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a5517fb979475c6b799d10dd7b294094a"> 1798</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#a5517fb979475c6b799d10dd7b294094a">LRU_old_ratio</a>;          <span class="comment">/*!&lt; Reserve this much of the buffer</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">                                pool for &quot;old&quot; blocks */</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="preprocessor">#ifdef UNIV_DEBUG</span></div><div class="line"><a name="l01801"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a261df28273a07d8e17e6236267c7dfde"> 1801</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#a261df28273a07d8e17e6236267c7dfde">buddy_n_frames</a>; <span class="comment">/*!&lt; Number of frames allocated from</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">                        the buffer pool to the buddy system.</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">                        Protected by zip_hash_mutex. */</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01805"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a0f584acf0bdd4be17836f67e4827d736"> 1805</a></span>&#160;  <a class="code" href="classut__allocator.html">ut_allocator&lt;unsigned char&gt;</a> <a class="code" href="structbuf__pool__t.html#a0f584acf0bdd4be17836f67e4827d736">allocator</a>; <span class="comment">/*!&lt; Allocator used for</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment">                         allocating memory for the the &quot;chunks&quot;</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment">                         member. */</span></div><div class="line"><a name="l01808"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a6656602570ef2b8d7f060a90daee9b9e"> 1808</a></span>&#160;  <span class="keyword">volatile</span> ulint <a class="code" href="structbuf__pool__t.html#a6656602570ef2b8d7f060a90daee9b9e">n_chunks</a>;               <span class="comment">/*!&lt; number of buffer pool chunks */</span></div><div class="line"><a name="l01809"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#aef956328cfbb74ebd474074aafc7175a"> 1809</a></span>&#160;  <span class="keyword">volatile</span> ulint <a class="code" href="structbuf__pool__t.html#aef956328cfbb74ebd474074aafc7175a">n_chunks_new</a>; <span class="comment">/*!&lt; new number of buffer pool chunks */</span></div><div class="line"><a name="l01810"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a9a0f49acd5b9e826b2fc59f60f197d78"> 1810</a></span>&#160;  buf_chunk_t *<a class="code" href="structbuf__pool__t.html#a9a0f49acd5b9e826b2fc59f60f197d78">chunks</a>;         <span class="comment">/*!&lt; buffer pool chunks */</span></div><div class="line"><a name="l01811"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a081fb5b9138e111af2d85a333f4165ac"> 1811</a></span>&#160;  buf_chunk_t *<a class="code" href="structbuf__pool__t.html#a081fb5b9138e111af2d85a333f4165ac">chunks_old</a>;     <span class="comment">/*!&lt; old buffer pool chunks to be freed</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment">                               after resizing buffer pool */</span></div><div class="line"><a name="l01813"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ac48e5a71d543c485fbc2ab315a7a4eef"> 1813</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#ac48e5a71d543c485fbc2ab315a7a4eef">curr_size</a>;             <span class="comment">/*!&lt; current pool size in pages */</span></div><div class="line"><a name="l01814"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a7a47af710b9f9e7af5354de5b23fba7a"> 1814</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#a7a47af710b9f9e7af5354de5b23fba7a">old_size</a>;              <span class="comment">/*!&lt; previous pool size in pages */</span></div><div class="line"><a name="l01815"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ab27b834468362ae6517566bc23d4db12"> 1815</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structbuf__pool__t.html#ab27b834468362ae6517566bc23d4db12">read_ahead_area</a>;   <span class="comment">/*!&lt; size in pages of the area which</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">                               the read-ahead algorithms read if</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">                               invoked */</span></div><div class="line"><a name="l01818"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#aa02ce633a1ca3d49d78df3d2ea3c9472"> 1818</a></span>&#160;  <a class="code" href="structhash__table__t.html">hash_table_t</a> *<a class="code" href="structbuf__pool__t.html#aa02ce633a1ca3d49d78df3d2ea3c9472">page_hash</a>;     <span class="comment">/*!&lt; hash table of buf_page_t or</span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">                               buf_block_t file pages,</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="comment">                               buf_page_in_file() == TRUE,</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="comment">                               indexed by (space_id, offset).</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;<span class="comment">                               page_hash is protected by an</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment">                               array of mutexes. */</span></div><div class="line"><a name="l01824"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#af5af0004d4b47625984d89f02bdc132f"> 1824</a></span>&#160;  <a class="code" href="structhash__table__t.html">hash_table_t</a> *<a class="code" href="structbuf__pool__t.html#af5af0004d4b47625984d89f02bdc132f">page_hash_old</a>; <span class="comment">/*!&lt; old pointer to page_hash to be</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="comment">                               freed after resizing buffer pool */</span></div><div class="line"><a name="l01826"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a10a16d528a553e5e4f8e11820402d9db"> 1826</a></span>&#160;  <a class="code" href="structhash__table__t.html">hash_table_t</a> *<a class="code" href="structbuf__pool__t.html#a10a16d528a553e5e4f8e11820402d9db">zip_hash</a>;      <span class="comment">/*!&lt; hash table of buf_block_t blocks</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;<span class="comment">                               whose frames are allocated to the</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">                               zip buddy system,</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">                               indexed by block-&gt;frame */</span></div><div class="line"><a name="l01830"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ab46d7942520722ff424b9f39d711ec68"> 1830</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#ab46d7942520722ff424b9f39d711ec68">n_pend_reads</a>;          <span class="comment">/*!&lt; number of pending read</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="comment">                               operations. Accessed atomically */</span></div><div class="line"><a name="l01832"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a44bf877482c603a94dd03de812a0a3fb"> 1832</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#a44bf877482c603a94dd03de812a0a3fb">n_pend_unzip</a>;          <span class="comment">/*!&lt; number of pending decompressions.</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment">                               Accessed atomically. */</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div><div class="line"><a name="l01835"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a355670cec77c64853441e307472e660a"> 1835</a></span>&#160;  <a class="code" href="ut0ut_8h.html#a3d7efb6a0ff993a01dd08a7fa914056a">ib_time_monotonic_t</a> <a class="code" href="structbuf__pool__t.html#a355670cec77c64853441e307472e660a">last_printout_time</a>;<span class="comment"></span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="comment">  /*!&lt; when buf_print_io was last time</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment">  called. Accesses not protected. */</span></div><div class="line"><a name="l01838"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a1545c7cead3e42152069f1a86e6bbbd3"> 1838</a></span>&#160;  <a class="code" href="structbuf__buddy__stat__t.html">buf_buddy_stat_t</a> buddy_stat[<a class="code" href="buf0types_8h.html#aa202293f585f6fafe890a11f6e275f82">BUF_BUDDY_SIZES_MAX</a> + 1];<span class="comment"></span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">  /*!&lt; Statistics of buddy system,</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">  indexed by block size. Protected by</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment">  zip_free mutex, except for the used</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<span class="comment">  field, which is also accessed</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="comment">  atomically */</span></div><div class="line"><a name="l01844"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#aa6b6ff232ef55a6ccfedd3b5ec94bc6d"> 1844</a></span>&#160;  <a class="code" href="structbuf__pool__stat__t.html">buf_pool_stat_t</a> <a class="code" href="structbuf__pool__t.html#aa6b6ff232ef55a6ccfedd3b5ec94bc6d">stat</a>;     <span class="comment">/*!&lt; current statistics */</span></div><div class="line"><a name="l01845"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a1d825ac141e650cd211452c45e3f394f"> 1845</a></span>&#160;  <a class="code" href="structbuf__pool__stat__t.html">buf_pool_stat_t</a> <a class="code" href="structbuf__pool__t.html#a1d825ac141e650cd211452c45e3f394f">old_stat</a>; <span class="comment">/*!&lt; old statistics */</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;<span class="comment">  /** @} */</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">  /** @name Page flushing algorithm fields */</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div><div class="line"><a name="l01853"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a8b4f8f85e5d1b1008ddf8080c6c90744"> 1853</a></span>&#160;  <a class="code" href="buf0types_8h.html#a728aa61522bdb760bd9bd2914513a36c">BufListMutex</a> <a class="code" href="structbuf__pool__t.html#a8b4f8f85e5d1b1008ddf8080c6c90744">flush_list_mutex</a>; <span class="comment">/*!&lt; mutex protecting the</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="comment">                                flush list access. This mutex</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="comment">                                protects flush_list, flush_rbt</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment">                                and bpage::list pointers when</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;<span class="comment">                                the bpage is on flush_list. It</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;<span class="comment">                                also protects writes to</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">                                bpage::oldest_modification and</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="comment">                                flush_list_hp */</span></div><div class="line"><a name="l01861"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a11c1280cf5bf44e12745e1ebe9c5897f"> 1861</a></span>&#160;  <a class="code" href="classFlushHp.html">FlushHp</a> <a class="code" href="structbuf__pool__t.html#a11c1280cf5bf44e12745e1ebe9c5897f">flush_hp</a>;              <span class="comment">/*!&lt; &quot;hazard pointer&quot;</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="comment">                                used during scan of flush_list</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;<span class="comment">                                while doing flush list batch.</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;<span class="comment">                                Protected by flush_list_mutex */</span></div><div class="line"><a name="l01865"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a7d4334d6ec9729a43095755d6f445443"> 1865</a></span>&#160;  <a class="code" href="classFlushHp.html">FlushHp</a> <a class="code" href="structbuf__pool__t.html#a7d4334d6ec9729a43095755d6f445443">oldest_hp</a>;<span class="comment"></span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment">  /*!&lt; entry pointer to scan the oldest page</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment">  except for system temporary */</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <a class="code" href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a>) flush_list;<span class="comment"></span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="comment">  /*!&lt; base node of the modified block</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;<span class="comment">  list */</span></div><div class="line"><a name="l01871"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a530c64c0638ab3422b434b02a037116b"> 1871</a></span>&#160;  ibool init_flush[<a class="code" href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73cab382ac3a7501526d7a81edcf0925be47">BUF_FLUSH_N_TYPES</a>];<span class="comment"></span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="comment">  /*!&lt; this is TRUE when a flush of the</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment">  given type is being initialized.</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<span class="comment">  Protected by flush_state_mutex. */</span></div><div class="line"><a name="l01875"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a9c8672d592d9f8260163a32461eba1f8"> 1875</a></span>&#160;  ulint n_flush[<a class="code" href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73cab382ac3a7501526d7a81edcf0925be47">BUF_FLUSH_N_TYPES</a>];<span class="comment"></span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">  /*!&lt; this is the number of pending</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">  writes in the given flush type.</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">  Protected by flush_state_mutex. */</span></div><div class="line"><a name="l01879"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#aa41261b7d8bccfb6771b679c58648d6d"> 1879</a></span>&#160;  <a class="code" href="structos__event.html">os_event_t</a> no_flush[<a class="code" href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73cab382ac3a7501526d7a81edcf0925be47">BUF_FLUSH_N_TYPES</a>];<span class="comment"></span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<span class="comment">  /*!&lt; this is in the set state</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment">  when there is no flush batch</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment">  of the given type running. Protected by</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">  flush_state_mutex. */</span></div><div class="line"><a name="l01884"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a9885e7719ec8de34ee9860ee1a662f54"> 1884</a></span>&#160;  <a class="code" href="structib__rbt__t.html">ib_rbt_t</a> *<a class="code" href="structbuf__pool__t.html#a9885e7719ec8de34ee9860ee1a662f54">flush_rbt</a>;    <span class="comment">/*!&lt; a red-black tree is used</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment">                          exclusively during recovery to</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment">                          speed up insertions in the</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment">                          flush_list. This tree contains</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">                          blocks in order of</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">                          oldest_modification LSN and is</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment">                          kept in sync with the</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="comment">                          flush_list.</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">                          Each member of the tree MUST</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment">                          also be on the flush_list.</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment">                          This tree is relevant only in</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">                          recovery and is set to NULL</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment">                          once the recovery is over.</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="comment">                          Protected by flush_list_mutex */</span></div><div class="line"><a name="l01898"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ae0aed6254f53462f6e6c406dae78c1f2"> 1898</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#ae0aed6254f53462f6e6c406dae78c1f2">freed_page_clock</a>; <span class="comment">/*!&lt; a sequence number used</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment">                         to count the number of buffer</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment">                         blocks removed from the end of</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;<span class="comment">                         the LRU list; NOTE that this</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment">                         counter may wrap around at 4</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment">                         billion! A thread is allowed</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="comment">                         to read this for heuristic</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<span class="comment">                         purposes without holding any</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="comment">                         mutex or latch. For non-heuristic</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="comment">                         purposes protected by LRU_list_mutex */</span></div><div class="line"><a name="l01908"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#accaedf5345e73786752c837141f44b6f"> 1908</a></span>&#160;  ibool <a class="code" href="structbuf__pool__t.html#accaedf5345e73786752c837141f44b6f">try_LRU_scan</a>;     <span class="comment">/*!&lt; Set to FALSE when an LRU</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="comment">                          scan for free block fails. This</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<span class="comment">                          flag is used to avoid repeated</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment">                          scans of LRU list when we know</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment">                          that there is no free block</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="comment">                          available in the scan depth for</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="comment">                          eviction. Set to TRUE whenever</span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="comment">                          we flush a batch from the</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="comment">                          buffer pool. Accessed protected by</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">                          memory barriers. */</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div><div class="line"><a name="l01919"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a61ec626b6766fbf8dd21843c46a9e702"> 1919</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structbuf__pool__t.html#a61ec626b6766fbf8dd21843c46a9e702">track_page_lsn</a>; <span class="comment">/* Pagge Tracking start LSN. */</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#adbd2d13b530b284242790ee3b1c1f639"> 1921</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structbuf__pool__t.html#adbd2d13b530b284242790ee3b1c1f639">max_lsn_io</a>; <span class="comment">/* Maximum LSN for which write io</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="comment">                    has already started. */</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="comment">  /** @} */</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment">  /** @name LRU replacement algorithm fields */</span><span class="comment"></span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <a class="code" href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a>) <a class="code" href="fts0ast_8h.html#ab2d959f7fd0a704078b7e2d78a4d116d">free</a>;<span class="comment"></span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="comment">  /*!&lt; base node of the free</span></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="comment">  block list */</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <a class="code" href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a>) withdraw;<span class="comment"></span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">  /*!&lt; base node of the withdraw</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment">  block list. It is only used during</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment">  shrinking buffer pool size, not to</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment">  reuse the blocks will be removed.</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment">  Protected by free_list_mutex */</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div><div class="line"><a name="l01940"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#aa359723790414b5ba219540c76ac91cd"> 1940</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#aa359723790414b5ba219540c76ac91cd">withdraw_target</a>; <span class="comment">/*!&lt; target length of withdraw</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;<span class="comment">                         block list, when withdrawing */</span></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">  /** &quot;hazard pointer&quot; used during scan of LRU while doing</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">  LRU list batch.  Protected by buf_pool::LRU_list_mutex */</span></div><div class="line"><a name="l01945"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a37cb8d5f5c4dd23c8717943daa751a7b"> 1945</a></span>&#160;  <a class="code" href="classLRUHp.html">LRUHp</a> <a class="code" href="structbuf__pool__t.html#a37cb8d5f5c4dd23c8717943daa751a7b">lru_hp</a>;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">  /** Iterator used to scan the LRU list when searching for</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment">  replacable victim. Protected by buf_pool::LRU_list_mutex. */</span></div><div class="line"><a name="l01949"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a755a098537ebd743d59aab402cece965"> 1949</a></span>&#160;  <a class="code" href="classLRUItr.html">LRUItr</a> <a class="code" href="structbuf__pool__t.html#a755a098537ebd743d59aab402cece965">lru_scan_itr</a>;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment">  /** Iterator used to scan the LRU list when searching for</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment">  single page flushing victim.  Protected by buf_pool::LRU_list_mutex. */</span></div><div class="line"><a name="l01953"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a1bdae3322515ebcad8439bcf0bbac9dd"> 1953</a></span>&#160;  <a class="code" href="classLRUItr.html">LRUItr</a> <a class="code" href="structbuf__pool__t.html#a1bdae3322515ebcad8439bcf0bbac9dd">single_scan_itr</a>;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <a class="code" href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a>) LRU;<span class="comment"></span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="comment">  /*!&lt; base node of the LRU list */</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div><div class="line"><a name="l01958"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a7f98404f9e6016d7c78bafbb01d89657"> 1958</a></span>&#160;  <a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="structbuf__pool__t.html#a7f98404f9e6016d7c78bafbb01d89657">LRU_old</a>; <span class="comment">/*!&lt; pointer to the about</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">                       LRU_old_ratio/BUF_LRU_OLD_RATIO_DIV</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment">                       oldest blocks in the LRU list;</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment">                       NULL if LRU length less than</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="comment">                       BUF_LRU_OLD_MIN_LEN;</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="comment">                       NOTE: when LRU_old != NULL, its length</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment">                       should always equal LRU_old_len */</span></div><div class="line"><a name="l01965"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#ac8a49e54a5249cf5cef9c55c3221241f"> 1965</a></span>&#160;  ulint <a class="code" href="structbuf__pool__t.html#ac8a49e54a5249cf5cef9c55c3221241f">LRU_old_len</a>;   <span class="comment">/*!&lt; length of the LRU list from</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="comment">                       the block to which LRU_old points</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="comment">                       onward, including that block;</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="comment">                       see buf0lru.cc for the restrictions</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;<span class="comment">                       on this value; 0 if LRU_old == NULL;</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;<span class="comment">                       NOTE: LRU_old_len must be adjusted</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="comment">                       whenever LRU_old shrinks or grows! */</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <a class="code" href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a>) unzip_LRU;<span class="comment"></span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment">  /*!&lt; base node of the</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment">  unzip_LRU list. The list is protected</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment">  by LRU_list_mutex. */</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="comment">  /** @} */</span><span class="comment"></span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment">  /** @name Buddy allocator fields</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment">  The buddy allocator is used for allocating compressed page</span></div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="comment">  frames and buf_page_t descriptors of blocks that exist</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;<span class="comment">  in the buffer pool only in compressed form. */</span><span class="comment"></span></div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="comment">  /** @{ */</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="preprocessor">#if defined UNIV_DEBUG || defined UNIV_BUF_DEBUG</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <a class="code" href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a>(<a class="code" href="classbuf__page__t.html">buf_page_t</a>) zip_clean;<span class="comment"></span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">  /*!&lt; unmodified compressed pages */</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG || UNIV_BUF_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  <a class="code" href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a>(<a class="code" href="structbuf__buddy__free__t.html">buf_buddy_free_t</a>) zip_free[<a class="code" href="buf0types_8h.html#aa202293f585f6fafe890a11f6e275f82">BUF_BUDDY_SIZES_MAX</a>];<span class="comment"></span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="comment">  /*!&lt; buddy free lists */</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"><a class="line" href="structbuf__pool__t.html#a85b353f8c15266560701a4e4577c4940"> 1991</a></span>&#160;  <a class="code" href="classbuf__page__t.html">buf_page_t</a> *<a class="code" href="structbuf__pool__t.html#a85b353f8c15266560701a4e4577c4940">watch</a>;<span class="comment"></span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="comment">  /*!&lt; Sentinel records for buffer</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="comment">  pool watches. Scanning the array is</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="comment">  protected by taking all page_hash</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="comment">  latches in X. Updating or reading an</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment">  individual watch page is protected by</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="comment">  a corresponding individual page_hash</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="comment">  latch. */</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="comment">  /** A wrapper for buf_pool_t::allocator.alocate_large which also advices the</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;<span class="comment">  OS that this chunk should not be dumped to a core file if that was requested.</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment">  Emits a warning to the log and disables @@global.core_file if advising was</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">  requested but could not be performed, but still return true as the allocation</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;<span class="comment">  itself succeeded.</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="comment">  @param[in]      mem_size  number of bytes to allocate</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="comment">  @param[in,out]  chunk     mem and mem_pfx fields of this chunk will be updated</span></div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<span class="comment">                            to contain information about allocated memory region</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment">  @return true iff allocated successfully */</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="keywordtype">bool</span> allocate_chunk(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> mem_size, buf_chunk_t *chunk);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="comment">  /** A wrapper for buf_pool_t::allocator.deallocate_large which also advices</span></div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="comment">  the OS that this chunk can be dumped to a core file.</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">  Emits a warning to the log and disables @@global.core_file if advising was</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment">  requested but could not be performed.</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment">  @param[in]  chunk   mem and mem_pfx fields of this chunk will be used to</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="comment">                      locate the memory region to free */</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="keywordtype">void</span> deallocate_chunk(buf_chunk_t *chunk);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="comment">  /** Advices the OS that all chunks in this buffer pool instance can be dumped</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="comment">  to a core file.</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="comment">  Emits a warning to the log if could not succeed.</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="comment">  @return true iff succeeded, false if no OS support or failed */</span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="keywordtype">bool</span> madvise_dump();</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="comment">  /** Advices the OS that all chunks in this buffer pool instance should not</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="comment">  be dumped to a core file.</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;<span class="comment">  Emits a warning to the log if could not succeed.</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;<span class="comment">  @return true iff succeeded, false if no OS support or failed */</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="keywordtype">bool</span> madvise_dont_dump();</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="preprocessor">#if BUF_BUDDY_LOW &gt; UNIV_ZIP_SIZE_MIN</span></div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="preprocessor">#error &quot;BUF_BUDDY_LOW &gt; UNIV_ZIP_SIZE_MIN&quot;</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment">  /** @} */</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;};</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="comment">/** Print the given buf_pool_t object.</span></div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;<span class="comment">@param[in,out]  out             the output stream</span></div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="comment">@param[in]      buf_pool        the buf_pool_t object to be printed</span></div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="comment">@return the output stream */</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;std::ostream &amp;<a class="code" href="buf0buf_8h.html#aa7fefbabeb6b422a2baeae7758d16a7d">operator&lt;&lt;</a>(std::ostream &amp;out, <span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> &amp;buf_pool);</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="comment">/** @name Accessors for buffer pool mutexes</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment">Use these instead of accessing buffer pool mutexes directly. */</span><span class="comment"></span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">/** @{ */</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment">/** Test if flush list mutex is owned. */</span></div><div class="line"><a name="l02049"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a7134f85ae33367e8860b6814c0866ff5"> 2049</a></span>&#160;<span class="preprocessor">#define buf_flush_list_mutex_own(b) mutex_own(&amp;(b)-&gt;flush_list_mutex)</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">/** Acquire the flush list mutex. */</span></div><div class="line"><a name="l02052"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a095adbc797576159cfc092fb6bdedeb2"> 2052</a></span>&#160;<span class="preprocessor">#define buf_flush_list_mutex_enter(b)    \</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="preprocessor">  do {                                   \</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;<span class="preprocessor">    mutex_enter(&amp;(b)-&gt;flush_list_mutex); \</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="comment">/** Release the flush list mutex. */</span></div><div class="line"><a name="l02057"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aaefd70716bf3351e09b6e52ea9ca6783"> 2057</a></span>&#160;<span class="preprocessor">#define buf_flush_list_mutex_exit(b)    \</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="preprocessor">  do {                                  \</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="preprocessor">    mutex_exit(&amp;(b)-&gt;flush_list_mutex); \</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="comment">/** Test if block-&gt;mutex is owned. */</span></div><div class="line"><a name="l02063"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a9aea2e675f73b98f3b0bd94736801400"> 2063</a></span>&#160;<span class="preprocessor">#define buf_page_mutex_own(b) (b)-&gt;mutex.is_owned()</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment">/** Acquire the block-&gt;mutex. */</span></div><div class="line"><a name="l02066"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a21b68e3f5394838fecf6b6b30ab96002"> 2066</a></span>&#160;<span class="preprocessor">#define buf_page_mutex_enter(b) \</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="preprocessor">  do {                          \</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="preprocessor">    mutex_enter(&amp;(b)-&gt;mutex);   \</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment">/** Release the block-&gt;mutex. */</span></div><div class="line"><a name="l02072"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aff4f35eac88b4c16f4c2afab52f4d814"> 2072</a></span>&#160;<span class="preprocessor">#define buf_page_mutex_exit(b) \</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="preprocessor">  do {                         \</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="preprocessor">    (b)-&gt;mutex.exit();         \</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment">/** Get appropriate page_hash_lock. */</span></div><div class="line"><a name="l02078"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#adfc687dbb182eb08cbea2596d9396bbc"> 2078</a></span>&#160;<span class="preprocessor">#define buf_page_hash_lock_get(buf_pool, page_id) \</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="preprocessor">  hash_get_lock((buf_pool)-&gt;page_hash, (page_id).fold())</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">/** If not appropriate page_hash_lock, relock until appropriate. */</span></div><div class="line"><a name="l02082"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a1a6d4151775f37fd5f6ef62eacd50a82"> 2082</a></span>&#160;<span class="preprocessor">#define buf_page_hash_lock_s_confirm(hash_lock, buf_pool, page_id) \</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="preprocessor">  hash_lock_s_confirm(hash_lock, (buf_pool)-&gt;page_hash, (page_id).fold())</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;</div><div class="line"><a name="l02085"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ad45032de9143fd6341267a268c615883"> 2085</a></span>&#160;<span class="preprocessor">#define buf_page_hash_lock_x_confirm(hash_lock, buf_pool, page_id) \</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="preprocessor">  hash_lock_x_confirm(hash_lock, (buf_pool)-&gt;page_hash, (page_id).fold())</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="preprocessor">#if defined(UNIV_DEBUG) &amp;&amp; !defined(UNIV_HOTBACKUP)</span></div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;<span class="comment">/** Test if page_hash lock is held in s-mode. */</span></div><div class="line"><a name="l02091"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#aad18c67b8b4469a4aab76260b0131750"> 2091</a></span>&#160;<span class="preprocessor">#define buf_page_hash_lock_held_s(buf_pool, bpage) \</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;<span class="preprocessor">  rw_lock_own(buf_page_hash_lock_get((buf_pool), (bpage)-&gt;id), RW_LOCK_S)</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment">/** Test if page_hash lock is held in x-mode. */</span></div><div class="line"><a name="l02095"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a53f3b5c2625e8affaf21f10882e8a396"> 2095</a></span>&#160;<span class="preprocessor">#define buf_page_hash_lock_held_x(buf_pool, bpage) \</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="preprocessor">  rw_lock_own(buf_page_hash_lock_get((buf_pool), (bpage)-&gt;id), RW_LOCK_X)</span></div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">/** Test if page_hash lock is held in x or s-mode. */</span></div><div class="line"><a name="l02099"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#ad955654caf86aaf4a515844c1efc46e3"> 2099</a></span>&#160;<span class="preprocessor">#define buf_page_hash_lock_held_s_or_x(buf_pool, bpage) \</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="preprocessor">  (buf_page_hash_lock_held_s((buf_pool), (bpage)) ||    \</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="preprocessor">   buf_page_hash_lock_held_x((buf_pool), (bpage)))</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div><div class="line"><a name="l02103"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a487b81cbd6e10fa77bc6be4975787aee"> 2103</a></span>&#160;<span class="preprocessor">#define buf_block_hash_lock_held_s(buf_pool, block) \</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="preprocessor">  buf_page_hash_lock_held_s((buf_pool), &amp;(block)-&gt;page)</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#a2d960d20e005f2e97129dfc594a30ca0"> 2106</a></span>&#160;<span class="preprocessor">#define buf_block_hash_lock_held_x(buf_pool, block) \</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="preprocessor">  buf_page_hash_lock_held_x((buf_pool), &amp;(block)-&gt;page)</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"><a class="line" href="buf0buf_8h.html#adb5ae7c089b73c806b1a2f99527ef8f9"> 2109</a></span>&#160;<span class="preprocessor">#define buf_block_hash_lock_held_s_or_x(buf_pool, block) \</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="preprocessor">  buf_page_hash_lock_held_s_or_x((buf_pool), &amp;(block)-&gt;page)</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* UNIV_DEBUG &amp;&amp; !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="preprocessor">#define buf_page_hash_lock_held_s(b, p) (TRUE)</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="preprocessor">#define buf_page_hash_lock_held_x(b, p) (TRUE)</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="preprocessor">#define buf_page_hash_lock_held_s_or_x(b, p) (TRUE)</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;<span class="preprocessor">#define buf_block_hash_lock_held_s(b, p) (TRUE)</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<span class="preprocessor">#define buf_block_hash_lock_held_x(b, p) (TRUE)</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="preprocessor">#define buf_block_hash_lock_held_s_or_x(b, p) (TRUE)</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG &amp;&amp; !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment">/** @} */</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="comment">/**********************************************************************</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;<span class="comment">Let us list the consistency conditions for different control block states.</span></div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="comment">NOT_USED:       is in free list, not in LRU list, not in flush list, nor</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment">                page hash table</span></div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="comment">READY_FOR_USE:  is not in free list, LRU list, or flush list, nor page</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;<span class="comment">                hash table</span></div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;<span class="comment">MEMORY:         is not in free list, LRU list, or flush list, nor page</span></div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;<span class="comment">                hash table</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;<span class="comment">FILE_PAGE:      space and offset are defined, is in page hash table</span></div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;<span class="comment">                if io_fix == BUF_IO_WRITE,</span></div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;<span class="comment">                        pool: no_flush[flush_type] is in reset state,</span></div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;<span class="comment">                        pool: n_flush[flush_type] &gt; 0</span></div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="comment">                (1) if buf_fix_count == 0, then</span></div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="comment">                        is in LRU list, not in free list</span></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">                        is in flush list,</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="comment">                                if and only if oldest_modification &gt; 0</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="comment">                        is x-locked,</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="comment">                                if and only if io_fix == BUF_IO_READ</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;<span class="comment">                        is s-locked,</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="comment">                                if and only if io_fix == BUF_IO_WRITE</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="comment">                (2) if buf_fix_count &gt; 0, then</span></div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="comment">                        is not in LRU list, not in free list</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="comment">                        is in flush list,</span></div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="comment">                                if and only if oldest_modification &gt; 0</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="comment">                        if io_fix == BUF_IO_READ,</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="comment">                                is x-locked</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="comment">                        if io_fix == BUF_IO_WRITE,</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="comment">                                is s-locked</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="comment">State transitions:</span></div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment">NOT_USED =&gt; READY_FOR_USE</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">READY_FOR_USE =&gt; MEMORY</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;<span class="comment">READY_FOR_USE =&gt; FILE_PAGE</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">MEMORY =&gt; NOT_USED</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">FILE_PAGE =&gt; NOT_USED   NOTE: This transition is allowed if and only if</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment">                                (1) buf_fix_count == 0,</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment">                                (2) oldest_modification == 0, and</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment">                                (3) io_fix == 0.</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;<span class="preprocessor">#if defined UNIV_DEBUG || defined UNIV_BUF_DEBUG</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="comment">/** Functor to validate the LRU list. */</span></div><div class="line"><a name="l02169"></a><span class="lineno"><a class="line" href="structCheckInLRUList.html"> 2169</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structCheckInLRUList.html">CheckInLRUList</a> {</div><div class="line"><a name="l02170"></a><span class="lineno"><a class="line" href="structCheckInLRUList.html#a3febc0d6ea7af6ff35f7b127d72159ad"> 2170</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structCheckInLRUList.html#a3febc0d6ea7af6ff35f7b127d72159ad">operator()</a>(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *elem)<span class="keyword"> const </span>{ <a class="code" href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a>(elem-&gt;<a class="code" href="classbuf__page__t.html#ac96c3eee0fffce259d40af744a62f18d">in_LRU_list</a>); }</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"><a class="line" href="structCheckInLRUList.html#aff5b372bdada79ce291581c91fbf1bdf"> 2172</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structCheckInLRUList.html#aff5b372bdada79ce291581c91fbf1bdf">validate</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool) {</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <a class="code" href="structCheckInLRUList.html">CheckInLRUList</a> check;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <a class="code" href="ut0lst_8h.html#a2d5d1dcc12a50df96f27807cf5c3bf20">ut_list_validate</a>(buf_pool-&gt;LRU, check);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  }</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;};</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;<span class="comment">/** Functor to validate the LRU list. */</span></div><div class="line"><a name="l02179"></a><span class="lineno"><a class="line" href="structCheckInFreeList.html"> 2179</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structCheckInFreeList.html">CheckInFreeList</a> {</div><div class="line"><a name="l02180"></a><span class="lineno"><a class="line" href="structCheckInFreeList.html#af98eebbeca800a9f93108d5413f37c2d"> 2180</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structCheckInFreeList.html#af98eebbeca800a9f93108d5413f37c2d">operator()</a>(<span class="keyword">const</span> <a class="code" href="classbuf__page__t.html">buf_page_t</a> *elem)<span class="keyword"> const </span>{ <a class="code" href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a>(elem-&gt;<a class="code" href="classbuf__page__t.html#a55b9e28dcd4b2be689581e5e1b29cad6">in_free_list</a>); }</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"><a class="line" href="structCheckInFreeList.html#a5c0558417125222f5a059f795938cf84"> 2182</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structCheckInFreeList.html#a5c0558417125222f5a059f795938cf84">validate</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool) {</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="structCheckInFreeList.html">CheckInFreeList</a> check;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <a class="code" href="ut0lst_8h.html#a2d5d1dcc12a50df96f27807cf5c3bf20">ut_list_validate</a>(buf_pool-&gt;free, check);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  }</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;};</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;</div><div class="line"><a name="l02188"></a><span class="lineno"><a class="line" href="structCheckUnzipLRUAndLRUList.html"> 2188</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structCheckUnzipLRUAndLRUList.html">CheckUnzipLRUAndLRUList</a> {</div><div class="line"><a name="l02189"></a><span class="lineno"><a class="line" href="structCheckUnzipLRUAndLRUList.html#ae69094a5b1a58037dde2c90de0dbb01a"> 2189</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structCheckUnzipLRUAndLRUList.html#ae69094a5b1a58037dde2c90de0dbb01a">operator()</a>(<span class="keyword">const</span> <a class="code" href="structbuf__block__t.html">buf_block_t</a> *elem)<span class="keyword"> const </span>{</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <a class="code" href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a>(elem-&gt;<a class="code" href="structbuf__block__t.html#a275b67563d761a5581aa734a383f5ee2">page</a>.<a class="code" href="classbuf__page__t.html#ac96c3eee0fffce259d40af744a62f18d">in_LRU_list</a>);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <a class="code" href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a>(elem-&gt;<a class="code" href="structbuf__block__t.html#a7d009e6bec069b5e7be12b387032b23c">in_unzip_LRU_list</a>);</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  }</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"><a class="line" href="structCheckUnzipLRUAndLRUList.html#a78f5efde5cb410ae0f3303614dd5b1ff"> 2194</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="structCheckUnzipLRUAndLRUList.html#a78f5efde5cb410ae0f3303614dd5b1ff">validate</a>(<span class="keyword">const</span> <a class="code" href="structbuf__pool__t.html">buf_pool_t</a> *buf_pool) {</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <a class="code" href="structCheckUnzipLRUAndLRUList.html">CheckUnzipLRUAndLRUList</a> check;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <a class="code" href="ut0lst_8h.html#a2d5d1dcc12a50df96f27807cf5c3bf20">ut_list_validate</a>(buf_pool-&gt;unzip_LRU, check);</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  }</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;};</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG || defined UNIV_BUF_DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<span class="preprocessor">#include &quot;buf0buf.ic&quot;</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !buf0buf_h */</span><span class="preprocessor"></span></div><div class="ttc" id="buf0buf_8h_html_afad3db5496a7456973ce1be9ec882910"><div class="ttname"><a href="buf0buf_8h.html#afad3db5496a7456973ce1be9ec882910">buf_ptr_get_fsp_addr</a></div><div class="ttdeci">UNIV_INLINE void buf_ptr_get_fsp_addr(const void *ptr, space_id_t *space, fil_addr_t *addr)</div><div class="ttdoc">Gets the space id, page offset, and byte offset within page of a pointer pointing to a buffer frame c...</div></div>
<div class="ttc" id="structbuf__block__t_html_ac50b25d43035c9879d046f193ca7c1c3"><div class="ttname"><a href="structbuf__block__t.html#ac50b25d43035c9879d046f193ca7c1c3">buf_block_t::n_pointers</a></div><div class="ttdeci">ulint n_pointers</div><div class="ttdoc">used in debugging: the number of pointers in the adaptive hash index pointing to this frame; protecte...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1428</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a13fba060dbffaa565df26fa329e1a4a9"><div class="ttname"><a href="structbuf__pool__info__t.html#a13fba060dbffaa565df26fa329e1a4a9">buf_pool_info_t::pages_created_rate</a></div><div class="ttdeci">double pages_created_rate</div><div class="ttdoc">num of pages create per second </div><div class="ttdef"><b>Definition:</b> buf0buf.h:192</div></div>
<div class="ttc" id="structbuf__pool__t_html_a6291c0c70a786c113c2d7c7bfe6afbb9"><div class="ttname"><a href="structbuf__pool__t.html#a6291c0c70a786c113c2d7c7bfe6afbb9">buf_pool_t::zip_free_mutex</a></div><div class="ttdeci">BufListMutex zip_free_mutex</div><div class="ttdoc">buddy allocator mutex </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1787</div></div>
<div class="ttc" id="classut__allocator_html"><div class="ttname"><a href="classut__allocator.html">ut_allocator&lt; unsigned char &gt;</a></div></div>
<div class="ttc" id="buf0buf_8h_html_a274d89180ba0679ad7b31453f3dddbf6"><div class="ttname"><a href="buf0buf_8h.html#a274d89180ba0679ad7b31453f3dddbf6">buf_pool_get_oldest_modification_lwm</a></div><div class="ttdeci">lsn_t buf_pool_get_oldest_modification_lwm(void)</div><div class="ttdoc">Gets a safe low watermark for oldest_modification. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:408</div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7a7ff1c3a50401e64e0178615f364354eb"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a7ff1c3a50401e64e0178615f364354eb">Page_fetch::IF_IN_POOL_OR_WATCH</a></div><div class="ttdoc">Get the page only if it&amp;#39;s in the buffer pool, if not then set a watch on the page. </div></div>
<div class="ttc" id="structbuf__block__t_html_ab266dbdd4987a973d17481a3adda93a7"><div class="ttname"><a href="structbuf__block__t.html#ab266dbdd4987a973d17481a3adda93a7">buf_block_t::curr_left_side</a></div><div class="ttdeci">unsigned curr_left_side</div><div class="ttdoc">TRUE or FALSE in hash indexing. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1454</div></div>
<div class="ttc" id="sync0types_8h_html_a90b80adb6be14e0e67189518b5185e89"><div class="ttname"><a href="sync0types_8h.html#a90b80adb6be14e0e67189518b5185e89">latch_level_t</a></div><div class="ttdeci">latch_level_t</div><div class="ttdoc">Latching order levels. </div><div class="ttdef"><b>Definition:</b> sync0types.h:217</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_af0c8aa8ac470951fd2b0a90574f0a138"><div class="ttname"><a href="structbuf__pool__info__t.html#af0c8aa8ac470951fd2b0a90574f0a138">buf_pool_info_t::n_page_gets</a></div><div class="ttdeci">ulint n_page_gets</div><div class="ttdoc">buf_pool-&gt;n_page_gets </div><div class="ttdef"><b>Definition:</b> buf0buf.h:175</div></div>
<div class="ttc" id="classLRUHp_html"><div class="ttname"><a href="classLRUHp.html">LRUHp</a></div><div class="ttdoc">Class implementing buf_pool-&gt;LRU hazard pointer. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1617</div></div>
<div class="ttc" id="structbuf__pool__t_html_accaedf5345e73786752c837141f44b6f"><div class="ttname"><a href="structbuf__pool__t.html#accaedf5345e73786752c837141f44b6f">buf_pool_t::try_LRU_scan</a></div><div class="ttdeci">ibool try_LRU_scan</div><div class="ttdoc">Set to FALSE when an LRU scan for free block fails. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1908</div></div>
<div class="ttc" id="my__inttypes_8h_html_a22152088aba12c47e916b7f0ffee0f51"><div class="ttname"><a href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a></div><div class="ttdeci">unsigned long long int ulonglong</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:55</div></div>
<div class="ttc" id="structCheckUnzipLRUAndLRUList_html_ae69094a5b1a58037dde2c90de0dbb01a"><div class="ttname"><a href="structCheckUnzipLRUAndLRUList.html#ae69094a5b1a58037dde2c90de0dbb01a">CheckUnzipLRUAndLRUList::operator()</a></div><div class="ttdeci">void operator()(const buf_block_t *elem) const</div><div class="ttdef"><b>Definition:</b> buf0buf.h:2189</div></div>
<div class="ttc" id="namespaceCounter_html_abffd9234ba48273d835ae5cf193e3844"><div class="ttname"><a href="namespaceCounter.html#abffd9234ba48273d835ae5cf193e3844">Counter::clear</a></div><div class="ttdeci">void clear(Shards&lt; COUNT &gt; &amp;shards) noexcept</div><div class="ttdoc">Clear the counter - reset to 0. </div><div class="ttdef"><b>Definition:</b> ut0counter.h:343</div></div>
<div class="ttc" id="buf0buf_8h_html_a6ce5d2fc2911e993640a50d360670592"><div class="ttname"><a href="buf0buf_8h.html#a6ce5d2fc2911e993640a50d360670592">buf_page_release_zip</a></div><div class="ttdeci">UNIV_INLINE void buf_page_release_zip(buf_page_t *bpage)</div><div class="ttdoc">Releases a compressed-only page acquired with buf_page_get_zip(). </div></div>
<div class="ttc" id="structCheckInFreeList_html"><div class="ttname"><a href="structCheckInFreeList.html">CheckInFreeList</a></div><div class="ttdoc">Functor to validate the LRU list. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:2179</div></div>
<div class="ttc" id="structpage__zip__des__t_html"><div class="ttname"><a href="structpage__zip__des__t.html">page_zip_des_t</a></div><div class="ttdoc">Compressed page descriptor. </div><div class="ttdef"><b>Definition:</b> page0types.h:197</div></div>
<div class="ttc" id="structbuf__block__t_html_a275b67563d761a5581aa734a383f5ee2"><div class="ttname"><a href="structbuf__block__t.html#a275b67563d761a5581aa734a383f5ee2">buf_block_t::page</a></div><div class="ttdeci">buf_page_t page</div><div class="ttdoc">page information; this must be the first field, so that buf_pool-&gt;page_hash can point to buf_page_t o...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1330</div></div>
<div class="ttc" id="buf0buf_8h_html_a7f3b9b346f49593dc6d435d4a88d6d7f"><div class="ttname"><a href="buf0buf_8h.html#a7f3b9b346f49593dc6d435d4a88d6d7f">buf_pool_free_all</a></div><div class="ttdeci">void buf_pool_free_all()</div><div class="ttdoc">Frees the buffer pool at shutdown. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:6380</div></div>
<div class="ttc" id="buf0buf_8h_html_a94add70baf8e2ee67299e346bbb47965"><div class="ttname"><a href="buf0buf_8h.html#a94add70baf8e2ee67299e346bbb47965">buf_stats_get_pool_info</a></div><div class="ttdeci">void buf_stats_get_pool_info(buf_pool_t *buf_pool, ulint pool_id, buf_pool_info_t *all_pool_info)</div><div class="ttdoc">Collect buffer pool stats information for a buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5948</div></div>
<div class="ttc" id="classHazardPointer_html_ae57f3755a75c2c09d82ad972f3a8abae"><div class="ttname"><a href="classHazardPointer.html#ae57f3755a75c2c09d82ad972f3a8abae">HazardPointer::HazardPointer</a></div><div class="ttdeci">HazardPointer(const buf_pool_t *buf_pool, const ib_mutex_t *mutex)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1538</div></div>
<div class="ttc" id="buf0buf_8h_html_aa6098ccc0d0f4a65b3bdfcb0d430ba46a476478124a1ec5bbf5faa153d2ff4763"><div class="ttname"><a href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46a476478124a1ec5bbf5faa153d2ff4763">BUF_PAGE_PRINT_NO_FULL</a></div><div class="ttdoc">Do not print the full page dump. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:681</div></div>
<div class="ttc" id="structbuf__pool__t_html_a355670cec77c64853441e307472e660a"><div class="ttname"><a href="structbuf__pool__t.html#a355670cec77c64853441e307472e660a">buf_pool_t::last_printout_time</a></div><div class="ttdeci">ib_time_monotonic_t last_printout_time</div><div class="ttdoc">when buf_print_io was last time called. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1835</div></div>
<div class="ttc" id="fts0ast_8h_html_ab2d959f7fd0a704078b7e2d78a4d116d"><div class="ttname"><a href="fts0ast_8h.html#ab2d959f7fd0a704078b7e2d78a4d116d">free</a></div><div class="ttdeci">#define free(A)</div><div class="ttdef"><b>Definition:</b> fts0ast.h:42</div></div>
<div class="ttc" id="structbuf__block__t_html_a8d7b5093768acbd9bc67b1ec6a6f4c21"><div class="ttname"><a href="structbuf__block__t.html#a8d7b5093768acbd9bc67b1ec6a6f4c21">buf_block_t::mutex</a></div><div class="ttdeci">BPageMutex mutex</div><div class="ttdoc">mutex protecting this block: state (also protected by the buffer pool mutex), io_fix, buf_fix_count, and accessed; we introduce this new mutex in InnoDB-5.1 to relieve contention on the buffer pool mutex </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1482</div></div>
<div class="ttc" id="structbuf__pool__t_html_a44bf877482c603a94dd03de812a0a3fb"><div class="ttname"><a href="structbuf__pool__t.html#a44bf877482c603a94dd03de812a0a3fb">buf_pool_t::n_pend_unzip</a></div><div class="ttdeci">ulint n_pend_unzip</div><div class="ttdoc">number of pending decompressions. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1832</div></div>
<div class="ttc" id="structbuf__pool__t_html_ac7264f647475c1a97e2aa54210750563"><div class="ttname"><a href="structbuf__pool__t.html#ac7264f647475c1a97e2aa54210750563">buf_pool_t::instance_no</a></div><div class="ttdeci">ulint instance_no</div><div class="ttdoc">Array index of this buffer pool instance. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1795</div></div>
<div class="ttc" id="structbuf__block__t_html_a0b5817c9011789ee63367a3818581b12"><div class="ttname"><a href="structbuf__block__t.html#a0b5817c9011789ee63367a3818581b12">buf_block_t::modify_clock</a></div><div class="ttdeci">uint64_t modify_clock</div><div class="ttdoc">This clock is incremented every time a pointer to a record on the page may become obsolete; this is u...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1368</div></div>
<div class="ttc" id="classLRUItr_html_a4dc84c304498caf6b2aee64f4c83fe4b"><div class="ttname"><a href="classLRUItr.html#a4dc84c304498caf6b2aee64f4c83fe4b">LRUItr::~LRUItr</a></div><div class="ttdeci">~LRUItr() override</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1648</div></div>
<div class="ttc" id="api0api_8h_html_a3a920291a017c14a72331c818adf2265"><div class="ttname"><a href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a></div><div class="ttdeci">uint32 page_no_t</div><div class="ttdoc">Page number. </div><div class="ttdef"><b>Definition:</b> api0api.h:57</div></div>
<div class="ttc" id="structrw__lock__t_html"><div class="ttname"><a href="structrw__lock__t.html">rw_lock_t</a></div><div class="ttdoc">The structure used in the spin lock implementation of a read-write lock. </div><div class="ttdef"><b>Definition:</b> sync0rw.h:564</div></div>
<div class="ttc" id="buf0buf_8h_html_a2efca615726ffc1dfc6c2ed05612ccd0"><div class="ttname"><a href="buf0buf_8h.html#a2efca615726ffc1dfc6c2ed05612ccd0">buf_page_init_for_read</a></div><div class="ttdeci">buf_page_t * buf_page_init_for_read(dberr_t *err, ulint mode, const page_id_t &amp;page_id, const page_size_t &amp;page_size, ibool unzip)</div><div class="ttdoc">Inits a page for read to the buffer buf_pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:4585</div></div>
<div class="ttc" id="buf0buf_8h_html_a9781b154f5eb92bbc15d0c4538e46124"><div class="ttname"><a href="buf0buf_8h.html#a9781b154f5eb92bbc15d0c4538e46124">buf_resize_thread</a></div><div class="ttdeci">void buf_resize_thread()</div><div class="ttdoc">This is the thread for resizing buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:2494</div></div>
<div class="ttc" id="buf0buf_8h_html_a2ee39fa7dde2fd24069257650c8c73e2"><div class="ttname"><a href="buf0buf_8h.html#a2ee39fa7dde2fd24069257650c8c73e2">buf_pool_update_madvise</a></div><div class="ttdeci">void buf_pool_update_madvise()</div><div class="ttdoc">Checks if innobase_should_madvise_buf_pool() value has changed since we&amp;#39;ve last check and if so...</div><div class="ttdef"><b>Definition:</b> buf0buf.cc:937</div></div>
<div class="ttc" id="structbuf__pool__t_html_ae663da445248d1af7f38b75dddd4ff9b"><div class="ttname"><a href="structbuf__pool__t.html#ae663da445248d1af7f38b75dddd4ff9b">buf_pool_t::zip_mutex</a></div><div class="ttdeci">BufPoolZipMutex zip_mutex</div><div class="ttdoc">Zip mutex of this buffer pool instance, protects compressed only pages (of type buf_page_t, not buf_block_t. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1791</div></div>
<div class="ttc" id="structbuf__pool__t_html_a1bdae3322515ebcad8439bcf0bbac9dd"><div class="ttname"><a href="structbuf__pool__t.html#a1bdae3322515ebcad8439bcf0bbac9dd">buf_pool_t::single_scan_itr</a></div><div class="ttdeci">LRUItr single_scan_itr</div><div class="ttdoc">Iterator used to scan the LRU list when searching for single page flushing victim. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1953</div></div>
<div class="ttc" id="log0types_8h_html_aa7401e3081ffb8ee7e8fb182647f475c"><div class="ttname"><a href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a></div><div class="ttdeci">uint64_t lsn_t</div><div class="ttdoc">Type used for all log sequence number storage and arithmetics. </div><div class="ttdef"><b>Definition:</b> log0types.h:60</div></div>
<div class="ttc" id="classbuf__page__t_html_a6f99a321231aeb912f49f8918b477e98"><div class="ttname"><a href="classbuf__page__t.html#a6f99a321231aeb912f49f8918b477e98">buf_page_t::flush_observer</a></div><div class="ttdeci">FlushObserver * flush_observer</div><div class="ttdoc">Flush observer. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1313</div></div>
<div class="ttc" id="classbuf__page__t_html_a898074966cf06c6a64a2b41e22e0ece4"><div class="ttname"><a href="classbuf__page__t.html#a898074966cf06c6a64a2b41e22e0ece4">buf_page_t::newest_modification</a></div><div class="ttdeci">lsn_t newest_modification</div><div class="ttdoc">TRUE if in buf_pool-&gt;free; when buf_pool-&gt;free_list_mutex is free, the following should hold: in_free...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1266</div></div>
<div class="ttc" id="buf0buf_8h_html_a3ce21ecd74468bc2e0e2a33cf5a2ca2a"><div class="ttname"><a href="buf0buf_8h.html#a3ce21ecd74468bc2e0e2a33cf5a2ca2a">buf_pool_size_align</a></div><div class="ttdeci">UNIV_INLINE ulint buf_pool_size_align(ulint size)</div><div class="ttdoc">Calculate aligned buffer pool size based on srv_buf_pool_chunk_unit, if needed. </div></div>
<div class="ttc" id="structbuf__pool__t_html_a755a098537ebd743d59aab402cece965"><div class="ttname"><a href="structbuf__pool__t.html#a755a098537ebd743d59aab402cece965">buf_pool_t::lru_scan_itr</a></div><div class="ttdeci">LRUItr lru_scan_itr</div><div class="ttdoc">Iterator used to scan the LRU list when searching for replacable victim. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1949</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a3a793cb5aa7fd9143ff5f18fc0b6fcd8"><div class="ttname"><a href="structbuf__pool__info__t.html#a3a793cb5aa7fd9143ff5f18fc0b6fcd8">buf_pool_info_t::io_cur</a></div><div class="ttdeci">ulint io_cur</div><div class="ttdoc">buf_LRU_stat_cur.io, num of IO for current interval </div><div class="ttdef"><b>Definition:</b> buf0buf.h:214</div></div>
<div class="ttc" id="buf0types_8h_html_a7b34944f1921a4bf7c1a28abfb86d73cab382ac3a7501526d7a81edcf0925be47"><div class="ttname"><a href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73cab382ac3a7501526d7a81edcf0925be47">BUF_FLUSH_N_TYPES</a></div><div class="ttdoc">index of last element + 1 </div><div class="ttdef"><b>Definition:</b> buf0types.h:71</div></div>
<div class="ttc" id="buf0buf_8h_html_a47ffed634c26feb6e975600b553e48c5"><div class="ttname"><a href="buf0buf_8h.html#a47ffed634c26feb6e975600b553e48c5">buf_page_peek_if_young</a></div><div class="ttdeci">UNIV_INLINE ibool buf_page_peek_if_young(const buf_page_t *bpage)</div><div class="ttdoc">Tells, for heuristics, if a block is still close enough to the MRU end of the LRU list meaning that i...</div></div>
<div class="ttc" id="structbuf__pool__t_html_a5a47267e7a08944d5d0c6b7d3a7d9006"><div class="ttname"><a href="structbuf__pool__t.html#a5a47267e7a08944d5d0c6b7d3a7d9006">buf_pool_t::chunks_mutex</a></div><div class="ttdeci">BufListMutex chunks_mutex</div><div class="ttdoc">protects (de)allocation of chunks: </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1777</div></div>
<div class="ttc" id="classbuf__page__t_html_af046128dd848f31223f914b025d3f739"><div class="ttname"><a href="classbuf__page__t.html#af046128dd848f31223f914b025d3f739">buf_page_t::in_page_hash</a></div><div class="ttdeci">bool in_page_hash</div><div class="ttdoc">TRUE if in buf_pool-&gt;page_hash. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1219</div></div>
<div class="ttc" id="buf0buf_8h_html_a4c883f056d7d3c54a5822c201d740c66"><div class="ttname"><a href="buf0buf_8h.html#a4c883f056d7d3c54a5822c201d740c66">buf_block_fix</a></div><div class="ttdeci">UNIV_INLINE ulint buf_block_fix(buf_page_t *bpage)</div><div class="ttdoc">Increments the bufferfix count. </div></div>
<div class="ttc" id="structbuf__pool__t_html_a8b4f8f85e5d1b1008ddf8080c6c90744"><div class="ttname"><a href="structbuf__pool__t.html#a8b4f8f85e5d1b1008ddf8080c6c90744">buf_pool_t::flush_list_mutex</a></div><div class="ttdeci">BufListMutex flush_list_mutex</div><div class="ttdoc">mutex protecting the flush list access. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1853</div></div>
<div class="ttc" id="fil0fil_8h_html"><div class="ttname"><a href="fil0fil_8h.html">fil0fil.h</a></div><div class="ttdoc">The low-level file system. </div></div>
<div class="ttc" id="buf0buf_8h_html_a8d4fc8bd9c50f18fd1a93658e94d3d87"><div class="ttname"><a href="buf0buf_8h.html#a8d4fc8bd9c50f18fd1a93658e94d3d87">buf_page_is_old</a></div><div class="ttdeci">UNIV_INLINE ibool buf_page_is_old(const buf_page_t *bpage)</div><div class="ttdoc">Determine if a block has been flagged old. </div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7aa3d31b8fe6ab7ba91ca6d2f934150826"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7aa3d31b8fe6ab7ba91ca6d2f934150826">Page_fetch::PEEK_IF_IN_POOL</a></div><div class="ttdoc">get if in pool, do not make the block young in the LRU list </div></div>
<div class="ttc" id="classbuf__page__t_html_ae550e45232de32f59d40efdfed77b286"><div class="ttname"><a href="classbuf__page__t.html#ae550e45232de32f59d40efdfed77b286">buf_page_t::file_page_was_freed</a></div><div class="ttdeci">bool file_page_was_freed</div><div class="ttdoc">This is set to TRUE when fsp frees a page in buffer pool; protected by buf_pool-&gt;zip_mutex or buf_blo...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1309</div></div>
<div class="ttc" id="structbuf__pool__t_html_a5517fb979475c6b799d10dd7b294094a"><div class="ttname"><a href="structbuf__pool__t.html#a5517fb979475c6b799d10dd7b294094a">buf_pool_t::LRU_old_ratio</a></div><div class="ttdeci">ulint LRU_old_ratio</div><div class="ttdoc">Reserve this much of the buffer pool for &quot;old&quot; blocks. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1798</div></div>
<div class="ttc" id="buf0buf_8h_html_ab0de522312135372e9204158db79f015"><div class="ttname"><a href="buf0buf_8h.html#ab0de522312135372e9204158db79f015">buf_pool_check_no_pending_io</a></div><div class="ttdeci">ulint buf_pool_check_no_pending_io(void)</div><div class="ttdoc">Checks that there currently are no pending i/o-operations for the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:6231</div></div>
<div class="ttc" id="buf0buf_8h_html_a66b510251a5c2ba00d420c57ff16c223"><div class="ttname"><a href="buf0buf_8h.html#a66b510251a5c2ba00d420c57ff16c223">buf_page_get_io_fix</a></div><div class="ttdeci">UNIV_INLINE enum buf_io_fix buf_page_get_io_fix(const buf_page_t *bpage)</div><div class="ttdoc">Gets the io_fix state of a block. </div></div>
<div class="ttc" id="buf0buf_8h_html_a542cb040a75435f73008c7009d9a908b"><div class="ttname"><a href="buf0buf_8h.html#a542cb040a75435f73008c7009d9a908b">buf_block_set_state</a></div><div class="ttdeci">UNIV_INLINE void buf_block_set_state(buf_block_t *block, enum buf_page_state state)</div><div class="ttdoc">Sets the state of a block. </div></div>
<div class="ttc" id="memcached_8c_html_a4acff8232e4aec9cd5c6dc200ac55ef3"><div class="ttname"><a href="memcached_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> memcached.c:384</div></div>
<div class="ttc" id="structbuf__block__t_html"><div class="ttname"><a href="structbuf__block__t.html">buf_block_t</a></div><div class="ttdoc">The buffer control block structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1324</div></div>
<div class="ttc" id="structCheckInLRUList_html_aff5b372bdada79ce291581c91fbf1bdf"><div class="ttname"><a href="structCheckInLRUList.html#aff5b372bdada79ce291581c91fbf1bdf">CheckInLRUList::validate</a></div><div class="ttdeci">static void validate(const buf_pool_t *buf_pool)</div><div class="ttdef"><b>Definition:</b> buf0buf.h:2172</div></div>
<div class="ttc" id="classpage__id__t_html"><div class="ttname"><a href="classpage__id__t.html">page_id_t</a></div><div class="ttdoc">Page identifier. </div><div class="ttdef"><b>Definition:</b> buf0types.h:158</div></div>
<div class="ttc" id="buf0buf_8h_html_aed26a402a24afefb51d6d7945647bd30"><div class="ttname"><a href="buf0buf_8h.html#aed26a402a24afefb51d6d7945647bd30">buf_page_set_file_page_was_freed</a></div><div class="ttdeci">buf_page_t * buf_page_set_file_page_was_freed(const page_id_t &amp;page_id)</div><div class="ttdoc">Sets file_page_was_freed TRUE if the page is found in the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:2996</div></div>
<div class="ttc" id="buf0buf_8h_html_a86d8481358bda6d6826d9b997ce51c16"><div class="ttname"><a href="buf0buf_8h.html#a86d8481358bda6d6826d9b997ce51c16">buf_page_create</a></div><div class="ttdeci">buf_block_t * buf_page_create(const page_id_t &amp;page_id, const page_size_t &amp;page_size, rw_lock_type_t rw_latch, mtr_t *mtr)</div><div class="ttdoc">Initializes a page to the buffer buf_pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:4787</div></div>
<div class="ttc" id="structbuf__pool__t_html_a0f584acf0bdd4be17836f67e4827d736"><div class="ttname"><a href="structbuf__pool__t.html#a0f584acf0bdd4be17836f67e4827d736">buf_pool_t::allocator</a></div><div class="ttdeci">ut_allocator&lt; unsigned char &gt; allocator</div><div class="ttdoc">Allocator used for allocating memory for the the &quot;chunks&quot; member. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1805</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a1e9edf534f5b20f43eb377e43865fcca"><div class="ttname"><a href="structbuf__pool__info__t.html#a1e9edf534f5b20f43eb377e43865fcca">buf_pool_info_t::page_read_delta</a></div><div class="ttdeci">ulint page_read_delta</div><div class="ttdoc">num of pages read since last printout </div><div class="ttdef"><b>Definition:</b> buf0buf.h:194</div></div>
<div class="ttc" id="buf0buf_8h_html_a7098349ef19391fcdeff149b55dac652"><div class="ttname"><a href="buf0buf_8h.html#a7098349ef19391fcdeff149b55dac652">buf_page_belongs_to_unzip_LRU</a></div><div class="ttdeci">UNIV_INLINE bool buf_page_belongs_to_unzip_LRU(const buf_page_t *bpage)</div><div class="ttdoc">Determines if a block should be on unzip_LRU list. </div></div>
<div class="ttc" id="fil0types_8h_html_a632708bb0d91ead54c500d7772f84ec5"><div class="ttname"><a href="fil0types_8h.html#a632708bb0d91ead54c500d7772f84ec5">FIL_PAGE_NEXT</a></div><div class="ttdeci">#define FIL_PAGE_NEXT</div><div class="ttdoc">if there is a &amp;#39;natural&amp;#39; successor of the page, its offset. </div><div class="ttdef"><b>Definition:</b> fil0types.h:60</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a1a89d33fce3b5969627faceaee972c09"><div class="ttname"><a href="structbuf__pool__info__t.html#a1a89d33fce3b5969627faceaee972c09">buf_pool_info_t::lru_len</a></div><div class="ttdeci">ulint lru_len</div><div class="ttdoc">Length of buf_pool-&gt;LRU. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:155</div></div>
<div class="ttc" id="classbuf__page__t_html_ae4e45eb2bf36b75fbf2c4cd4b15e887f"><div class="ttname"><a href="classbuf__page__t.html#ae4e45eb2bf36b75fbf2c4cd4b15e887f">buf_page_t::set_dblwr_batch_id</a></div><div class="ttdeci">void set_dblwr_batch_id(uint16_t batch_id)</div><div class="ttdoc">Set the doublewrite buffer ID. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1168</div></div>
<div class="ttc" id="buf0buf_8h_html_ae6ee95652b3ae571a6e4274a08d9a2c7"><div class="ttname"><a href="buf0buf_8h.html#ae6ee95652b3ae571a6e4274a08d9a2c7">buf_page_hash_get_locked</a></div><div class="ttdeci">UNIV_INLINE buf_page_t * buf_page_hash_get_locked(buf_pool_t *buf_pool, const page_id_t &amp;page_id, rw_lock_t **lock, ulint lock_mode, bool watch=false)</div><div class="ttdoc">Returns the control block of a file page, NULL if not found. </div></div>
<div class="ttc" id="structbuf__pool__t_html_aa359723790414b5ba219540c76ac91cd"><div class="ttname"><a href="structbuf__pool__t.html#aa359723790414b5ba219540c76ac91cd">buf_pool_t::withdraw_target</a></div><div class="ttdeci">ulint withdraw_target</div><div class="ttdoc">target length of withdraw block list, when withdrawing </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1940</div></div>
<div class="ttc" id="classbuf__page__t_html_a953a2cc53ebbeeccf783e5156ae8ff02"><div class="ttname"><a href="classbuf__page__t.html#a953a2cc53ebbeeccf783e5156ae8ff02">buf_page_t::id</a></div><div class="ttdeci">page_id_t id</div><div class="ttdoc">Page id. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1183</div></div>
<div class="ttc" id="structbuf__pools__list__size__t_html_aa7d94d29d26f796a1340cf72939750de"><div class="ttname"><a href="structbuf__pools__list__size__t.html#aa7d94d29d26f796a1340cf72939750de">buf_pools_list_size_t::LRU_bytes</a></div><div class="ttdeci">ulint LRU_bytes</div><div class="ttdoc">LRU size in bytes. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:224</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_aa670dd955e37cd2e353de7f0374e9911"><div class="ttname"><a href="structbuf__pool__info__t.html#aa670dd955e37cd2e353de7f0374e9911">buf_pool_info_t::free_list_len</a></div><div class="ttdeci">ulint free_list_len</div><div class="ttdoc">Length of buf_pool-&gt;free list. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:157</div></div>
<div class="ttc" id="buf0types_8h_html_a728aa61522bdb760bd9bd2914513a36c"><div class="ttname"><a href="buf0types_8h.html#a728aa61522bdb760bd9bd2914513a36c">BufListMutex</a></div><div class="ttdeci">ib_mutex_t BufListMutex</div><div class="ttdef"><b>Definition:</b> buf0types.h:150</div></div>
<div class="ttc" id="structbuf__pool__t_html_a7d4334d6ec9729a43095755d6f445443"><div class="ttname"><a href="structbuf__pool__t.html#a7d4334d6ec9729a43095755d6f445443">buf_pool_t::oldest_hp</a></div><div class="ttdeci">FlushHp oldest_hp</div><div class="ttdoc">entry pointer to scan the oldest page except for system temporary </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1865</div></div>
<div class="ttc" id="buf0buf_8h_html_ad4cee70fe0ea742c8a909aaa3bce3f59"><div class="ttname"><a href="buf0buf_8h.html#ad4cee70fe0ea742c8a909aaa3bce3f59">buf_pool_invalidate</a></div><div class="ttdeci">void buf_pool_invalidate(void)</div><div class="ttdoc">Invalidates the file pages in the buffer pool when an archive recovery is completed. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5429</div></div>
<div class="ttc" id="buf0buf_8h_html_a607741f6ab261487ea1e2efef4d7640e"><div class="ttname"><a href="buf0buf_8h.html#a607741f6ab261487ea1e2efef4d7640e">buf_pool_watch_unset</a></div><div class="ttdeci">void buf_pool_watch_unset(const page_id_t &amp;page_id)</div><div class="ttdoc">Stop watching if the page has been read in. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:2898</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_ad91ea6b52e34b1ddca5d1b38d9d022e4"><div class="ttname"><a href="structbuf__pool__stat__t.html#ad91ea6b52e34b1ddca5d1b38d9d022e4">buf_pool_stat_t::copy</a></div><div class="ttdeci">static void copy(buf_pool_stat_t &amp;dst, const buf_pool_stat_t &amp;src) noexcept</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1719</div></div>
<div class="ttc" id="structbuf__pool__t_html_ae2a36a64c9775f590dfae2e47516b16b"><div class="ttname"><a href="structbuf__pool__t.html#ae2a36a64c9775f590dfae2e47516b16b">buf_pool_t::free_list_mutex</a></div><div class="ttdeci">BufListMutex free_list_mutex</div><div class="ttdoc">free and withdraw list mutex </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1786</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a5367acd20fd992feea91ac65755207a5"><div class="ttname"><a href="structbuf__pool__info__t.html#a5367acd20fd992feea91ac65755207a5">buf_pool_info_t::n_pages_made_young</a></div><div class="ttdeci">ulint n_pages_made_young</div><div class="ttdoc">number of pages made young </div><div class="ttdef"><b>Definition:</b> buf0buf.h:170</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_a75a295b4a6804c83bd7688d59c16e1b2"><div class="ttname"><a href="structbuf__pool__stat__t.html#a75a295b4a6804c83bd7688d59c16e1b2">buf_pool_stat_t::n_pages_created</a></div><div class="ttdeci">uint64_t n_pages_created</div><div class="ttdoc">number of pages created in the pool with no read. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1693</div></div>
<div class="ttc" id="buf0buf_8h_html_a68ddc2d256f3d1821fce3f306ee61e62"><div class="ttname"><a href="buf0buf_8h.html#a68ddc2d256f3d1821fce3f306ee61e62">buf_page_get_freed_page_clock</a></div><div class="ttdeci">UNIV_INLINE ulint buf_page_get_freed_page_clock(const buf_page_t *bpage)</div><div class="ttdoc">Reads the freed_page_clock of a buffer block. </div></div>
<div class="ttc" id="buf0buf_8h_html_a9ca75ba503d2ad232adbff2b0585bc66"><div class="ttname"><a href="buf0buf_8h.html#a9ca75ba503d2ad232adbff2b0585bc66">buf_block_will_withdrawn</a></div><div class="ttdeci">bool buf_block_will_withdrawn(buf_pool_t *buf_pool, const buf_block_t *block)</div><div class="ttdoc">Determines if a block is intended to be withdrawn. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:1690</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a05c60445ff6d4df2bda6c44256609dcd"><div class="ttname"><a href="structbuf__pool__info__t.html#a05c60445ff6d4df2bda6c44256609dcd">buf_pool_info_t::young_making_delta</a></div><div class="ttdeci">ulint young_making_delta</div><div class="ttdoc">num of pages made young since last printout </div><div class="ttdef"><b>Definition:</b> buf0buf.h:196</div></div>
<div class="ttc" id="classLRUItr_html"><div class="ttname"><a href="classLRUItr.html">LRUItr</a></div><div class="ttdoc">Special purpose iterators to be used when scanning the LRU list. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1639</div></div>
<div class="ttc" id="buf0buf_8h_html_a5a045569a1636618f36769cc39e18c60"><div class="ttname"><a href="buf0buf_8h.html#a5a045569a1636618f36769cc39e18c60">buf_page_release_latch</a></div><div class="ttdeci">UNIV_INLINE void buf_page_release_latch(buf_block_t *block, ulint rw_latch)</div><div class="ttdoc">Releases a latch, if specified. </div></div>
<div class="ttc" id="namespacestdx_1_1io_html_a2c9b563b772005f7960909d0d12186f5"><div class="ttname"><a href="namespacestdx_1_1io.html#a2c9b563b772005f7960909d0d12186f5">stdx::io::mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> file_handle.h:59</div></div>
<div class="ttc" id="structCheckInLRUList_html_a3febc0d6ea7af6ff35f7b127d72159ad"><div class="ttname"><a href="structCheckInLRUList.html#a3febc0d6ea7af6ff35f7b127d72159ad">CheckInLRUList::operator()</a></div><div class="ttdeci">void operator()(const buf_page_t *elem) const</div><div class="ttdef"><b>Definition:</b> buf0buf.h:2170</div></div>
<div class="ttc" id="buf0buf_8h_html_a0056c362020ff9e840fb48cb94c3cdbaa81e42709eb1489ed9631277fd401e145"><div class="ttname"><a href="buf0buf_8h.html#a0056c362020ff9e840fb48cb94c3cdbaa81e42709eb1489ed9631277fd401e145">Cache_hint::MAKE_YOUNG</a></div><div class="ttdoc">Move the block to the start of the LRU list if there is a danger that the block would drift out of th...</div></div>
<div class="ttc" id="buf0buf_8h_html_adee530ab11507348f9c9e303341634b7"><div class="ttname"><a href="buf0buf_8h.html#adee530ab11507348f9c9e303341634b7">buf_get_modified_ratio_pct</a></div><div class="ttdeci">double buf_get_modified_ratio_pct(void)</div><div class="ttdoc">Return the ratio in percents of modified pages in the buffer pool / database pages in the buffer pool...</div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5879</div></div>
<div class="ttc" id="fts0ast_8h_html_a038388ea4bea98fb1875936894f8a787"><div class="ttname"><a href="fts0ast_8h.html#a038388ea4bea98fb1875936894f8a787">malloc</a></div><div class="ttdeci">#define malloc(A)</div><div class="ttdef"><b>Definition:</b> fts0ast.h:41</div></div>
<div class="ttc" id="structbuf__pools__list__size__t_html_ab6c82346b6fdc2c3853a80da7a916965"><div class="ttname"><a href="structbuf__pools__list__size__t.html#ab6c82346b6fdc2c3853a80da7a916965">buf_pools_list_size_t::flush_list_bytes</a></div><div class="ttdeci">ulint flush_list_bytes</div><div class="ttdoc">flush_list size in bytes </div><div class="ttdef"><b>Definition:</b> buf0buf.h:226</div></div>
<div class="ttc" id="classbuf__page__t_html_a608ee8710d6c43f30e9836ee00179b01"><div class="ttname"><a href="classbuf__page__t.html#a608ee8710d6c43f30e9836ee00179b01">buf_page_t::access_time</a></div><div class="ttdeci">unsigned access_time</div><div class="ttdoc">Time of first access, or 0 if the block was never accessed in the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1304</div></div>
<div class="ttc" id="structbuf__pool__t_html_ab30577642b259b121117a1eb513ea1ed"><div class="ttname"><a href="structbuf__pool__t.html#ab30577642b259b121117a1eb513ea1ed">buf_pool_t::curr_pool_size</a></div><div class="ttdeci">ulint curr_pool_size</div><div class="ttdoc">Current pool size in bytes. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1797</div></div>
<div class="ttc" id="classbuf__page__t_html_aaf3a27d59c74b01dc0f86ea2407c9bf6"><div class="ttname"><a href="classbuf__page__t.html#aaf3a27d59c74b01dc0f86ea2407c9bf6">buf_page_t::old</a></div><div class="ttdeci">unsigned old</div><div class="ttdoc">true if the block is in the old blocks in buf_pool-&gt;LRU_old </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1294</div></div>
<div class="ttc" id="buf0buf_8h_html_a55ea539fcc36f30147cb4ee2f7917049"><div class="ttname"><a href="buf0buf_8h.html#a55ea539fcc36f30147cb4ee2f7917049">MAX_PAGE_HASH_LOCKS</a></div><div class="ttdeci">constexpr ulint MAX_PAGE_HASH_LOCKS</div><div class="ttdoc">The maximum number of page_hash locks. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:111</div></div>
<div class="ttc" id="buf0buf_8h_html_aa3b0eac921442eec0314115147c85a17"><div class="ttname"><a href="buf0buf_8h.html#aa3b0eac921442eec0314115147c85a17">buf_page_hash_get_low</a></div><div class="ttdeci">UNIV_INLINE buf_page_t * buf_page_hash_get_low(buf_pool_t *buf_pool, const page_id_t &amp;page_id)</div><div class="ttdoc">Returns the control block of a file page, NULL if not found. </div></div>
<div class="ttc" id="structbuf__pool__info__t_html_ae85d2719997ed84e7d475529b2144463"><div class="ttname"><a href="structbuf__pool__info__t.html#ae85d2719997ed84e7d475529b2144463">buf_pool_info_t::page_not_made_young_rate</a></div><div class="ttdeci">double page_not_made_young_rate</div><div class="ttdoc">page not made young rate in pages per second </div><div class="ttdef"><b>Definition:</b> buf0buf.h:189</div></div>
<div class="ttc" id="buf0buf_8h_html_a569b18490ab03d0b30a22dfd9f9fdb07"><div class="ttname"><a href="buf0buf_8h.html#a569b18490ab03d0b30a22dfd9f9fdb07">buf_page_optimistic_get</a></div><div class="ttdeci">bool buf_page_optimistic_get(ulint rw_latch, buf_block_t *block, uint64_t modify_clock, Page_fetch fetch_mode, const char *file, ulint line, mtr_t *mtr)</div><div class="ttdoc">This is the general function used to get optimistic access to a database page. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:4215</div></div>
<div class="ttc" id="buf0buf_8h_html_a753d780aa84a242710866eed7bcc32c0"><div class="ttname"><a href="buf0buf_8h.html#a753d780aa84a242710866eed7bcc32c0">buf_read_page_handle_error</a></div><div class="ttdeci">void buf_read_page_handle_error(buf_page_t *bpage)</div><div class="ttdoc">Unfixes the page, unlatches the page, removes it from page_hash and removes it from LRU...</div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5043</div></div>
<div class="ttc" id="classbuf__page__t_html_aa96e71082cde4b4849dbc827d5e8a3ea"><div class="ttname"><a href="classbuf__page__t.html#aa96e71082cde4b4849dbc827d5e8a3ea">buf_page_t::size</a></div><div class="ttdeci">page_size_t size</div><div class="ttdoc">Page size. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1186</div></div>
<div class="ttc" id="structbuf__block__t_html_abe5e0c130f4eb214c713eab5cc530733"><div class="ttname"><a href="structbuf__block__t.html#abe5e0c130f4eb214c713eab5cc530733">buf_block_t::index</a></div><div class="ttdeci">dict_index_t * index</div><div class="ttdoc">Index for which the adaptive hash index has been created, or NULL if the page does not exist in the i...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1460</div></div>
<div class="ttc" id="structbuf__pool__t_html_a6656602570ef2b8d7f060a90daee9b9e"><div class="ttname"><a href="structbuf__pool__t.html#a6656602570ef2b8d7f060a90daee9b9e">buf_pool_t::n_chunks</a></div><div class="ttdeci">volatile ulint n_chunks</div><div class="ttdoc">number of buffer pool chunks </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1808</div></div>
<div class="ttc" id="buf0buf_8h_html_aab0fe6ab9881b94fe49c82d25dbe819a"><div class="ttname"><a href="buf0buf_8h.html#aab0fe6ab9881b94fe49c82d25dbe819a">buf_block_modify_clock_inc</a></div><div class="ttdeci">UNIV_INLINE void buf_block_modify_clock_inc(buf_block_t *block)</div><div class="ttdoc">Increment the modify clock. </div></div>
<div class="ttc" id="structbuf__pool__t_html_a61ec626b6766fbf8dd21843c46a9e702"><div class="ttname"><a href="structbuf__pool__t.html#a61ec626b6766fbf8dd21843c46a9e702">buf_pool_t::track_page_lsn</a></div><div class="ttdeci">lsn_t track_page_lsn</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1919</div></div>
<div class="ttc" id="test__udf__registration_8cc_html_a96e3cff2f3e1d8eda47115215d03ff32"><div class="ttname"><a href="test__udf__registration_8cc.html#a96e3cff2f3e1d8eda47115215d03ff32">list</a></div><div class="ttdeci">class udf_list * list</div></div>
<div class="ttc" id="structbuf__buddy__free__t_html_a4cb2a5dabd97fc8cf918f43570abf4f3"><div class="ttname"><a href="structbuf__buddy__free__t.html#a4cb2a5dabd97fc8cf918f43570abf4f3">buf_buddy_free_t::size</a></div><div class="ttdeci">ulint size</div><div class="ttdoc">size of the block </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1660</div></div>
<div class="ttc" id="structCheckUnzipLRUAndLRUList_html_a78f5efde5cb410ae0f3303614dd5b1ff"><div class="ttname"><a href="structCheckUnzipLRUAndLRUList.html#a78f5efde5cb410ae0f3303614dd5b1ff">CheckUnzipLRUAndLRUList::validate</a></div><div class="ttdeci">static void validate(const buf_pool_t *buf_pool)</div><div class="ttdef"><b>Definition:</b> buf0buf.h:2194</div></div>
<div class="ttc" id="buf0buf_8h_html_a0ec7d5de1f91e878e799748d903fb71b"><div class="ttname"><a href="buf0buf_8h.html#a0ec7d5de1f91e878e799748d903fb71b">buf_pool_init</a></div><div class="ttdeci">dberr_t buf_pool_init(ulint total_size, ulint n_instances)</div><div class="ttdoc">Creates the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:1439</div></div>
<div class="ttc" id="ut0ut_8h_html_a3d7efb6a0ff993a01dd08a7fa914056a"><div class="ttname"><a href="ut0ut_8h.html#a3d7efb6a0ff993a01dd08a7fa914056a">ib_time_monotonic_t</a></div><div class="ttdeci">int64_t ib_time_monotonic_t</div><div class="ttdoc">Time stamp read from the monotonic clock (returned by ut_time_monotonic()). </div><div class="ttdef"><b>Definition:</b> ut0ut.h:89</div></div>
<div class="ttc" id="structCounter_1_1Shards_html"><div class="ttname"><a href="structCounter_1_1Shards.html">Counter::Shards&lt; 64 &gt;</a></div></div>
<div class="ttc" id="structbuf__pool__t_html_aa02ce633a1ca3d49d78df3d2ea3c9472"><div class="ttname"><a href="structbuf__pool__t.html#aa02ce633a1ca3d49d78df3d2ea3c9472">buf_pool_t::page_hash</a></div><div class="ttdeci">hash_table_t * page_hash</div><div class="ttdoc">hash table of buf_page_t or buf_block_t file pages, buf_page_in_file() == TRUE, indexed by (space_id...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1818</div></div>
<div class="ttc" id="structbuf__pool__t_html_aef956328cfbb74ebd474074aafc7175a"><div class="ttname"><a href="structbuf__pool__t.html#aef956328cfbb74ebd474074aafc7175a">buf_pool_t::n_chunks_new</a></div><div class="ttdeci">volatile ulint n_chunks_new</div><div class="ttdoc">new number of buffer pool chunks </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1809</div></div>
<div class="ttc" id="structbuf__block__t_html_a155be9f1e032ea05b056b890360fc4a4"><div class="ttname"><a href="structbuf__block__t.html#a155be9f1e032ea05b056b890360fc4a4">buf_block_t::get_page_id</a></div><div class="ttdeci">const page_id_t &amp; get_page_id() const</div><div class="ttdoc">Get the page number and space id of the current buffer block. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1486</div></div>
<div class="ttc" id="structbuf__pool__t_html_a7a47af710b9f9e7af5354de5b23fba7a"><div class="ttname"><a href="structbuf__pool__t.html#a7a47af710b9f9e7af5354de5b23fba7a">buf_pool_t::old_size</a></div><div class="ttdeci">ulint old_size</div><div class="ttdoc">previous pool size in pages </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1814</div></div>
<div class="ttc" id="buf0buf_8h_html_afc7560004e8ceba1e2a2089bd67371bd"><div class="ttname"><a href="buf0buf_8h.html#afc7560004e8ceba1e2a2089bd67371bd">buf_get_total_list_len</a></div><div class="ttdeci">void buf_get_total_list_len(ulint *LRU_len, ulint *free_len, ulint *flush_list_len)</div><div class="ttdoc">Get total buffer pool statistics. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:439</div></div>
<div class="ttc" id="structbuf__block__t_html_a28623dd39a05dc77710756e2be9f4ac0"><div class="ttname"><a href="structbuf__block__t.html#a28623dd39a05dc77710756e2be9f4ac0">buf_block_t::get_next_page_no</a></div><div class="ttdeci">page_no_t get_next_page_no() const</div><div class="ttdoc">Get the next page number of the current buffer block. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1494</div></div>
<div class="ttc" id="structbuf__pool__t_html_a11c1280cf5bf44e12745e1ebe9c5897f"><div class="ttname"><a href="structbuf__pool__t.html#a11c1280cf5bf44e12745e1ebe9c5897f">buf_pool_t::flush_hp</a></div><div class="ttdeci">FlushHp flush_hp</div><div class="ttdoc">&quot;hazard pointer&quot; used during scan of flush_list while doing flush list batch. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1861</div></div>
<div class="ttc" id="structbuf__block__t_html_ac28d95bdb91ffa6591f756eb1628f4e8"><div class="ttname"><a href="structbuf__block__t.html#ac28d95bdb91ffa6591f756eb1628f4e8">buf_block_t::n_fields</a></div><div class="ttdeci">volatile ulint n_fields</div><div class="ttdoc">recommended prefix length for hash search: number of full fields </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1383</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_a843f298ccdb6064fc44d0933d9a929c0"><div class="ttname"><a href="structbuf__pool__stat__t.html#a843f298ccdb6064fc44d0933d9a929c0">buf_pool_stat_t::flush_list_bytes</a></div><div class="ttdeci">uint64_t flush_list_bytes</div><div class="ttdoc">Flush_list size in bytes. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1717</div></div>
<div class="ttc" id="buf0buf_8h_html_a32111f6e94a1745e1750bcbfe96600f9"><div class="ttname"><a href="buf0buf_8h.html#a32111f6e94a1745e1750bcbfe96600f9">buf_page_get_gen</a></div><div class="ttdeci">buf_block_t * buf_page_get_gen(const page_id_t &amp;page_id, const page_size_t &amp;page_size, ulint rw_latch, buf_block_t *guess, Page_fetch mode, const char *file, ulint line, mtr_t *mtr, bool dirty_with_no_latch=false)</div><div class="ttdoc">This is the general function used to get access to a database page. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:4149</div></div>
<div class="ttc" id="classFlushHp_html_a45ce782180f5a4d58404795852ec9ae5"><div class="ttname"><a href="classFlushHp.html#a45ce782180f5a4d58404795852ec9ae5">FlushHp::FlushHp</a></div><div class="ttdeci">FlushHp(const buf_pool_t *buf_pool, const ib_mutex_t *mutex)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1603</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_a90eff7908e42d2efccd79cacdbcf0a30"><div class="ttname"><a href="structbuf__pool__stat__t.html#a90eff7908e42d2efccd79cacdbcf0a30">buf_pool_stat_t::m_n_page_gets</a></div><div class="ttdeci">Shards m_n_page_gets</div><div class="ttdoc">Number of page gets performed; also successful searches through the adaptive hash index are counted a...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1684</div></div>
<div class="ttc" id="namespacebuf_html"><div class="ttname"><a href="namespacebuf.html">buf</a></div><div class="ttdef"><b>Definition:</b> buf0block_hint.cc:29</div></div>
<div class="ttc" id="namespaceconsts_html_a2497d532ccb12f859b91cdaba0fb4c9a"><div class="ttname"><a href="namespaceconsts.html#a2497d532ccb12f859b91cdaba0fb4c9a">consts::FILE</a></div><div class="ttdeci">const std::string FILE(&quot;FILE&quot;)</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a1897c967bfe230dd4b25163950598f2d"><div class="ttname"><a href="structbuf__pool__info__t.html#a1897c967bfe230dd4b25163950598f2d">buf_pool_info_t::n_pend_reads</a></div><div class="ttdeci">ulint n_pend_reads</div><div class="ttdoc">buf_pool-&gt;n_pend_reads, pages pending read </div><div class="ttdef"><b>Definition:</b> buf0buf.h:161</div></div>
<div class="ttc" id="page0types_8h_html"><div class="ttname"><a href="page0types_8h.html">page0types.h</a></div><div class="ttdoc">Index page routines. </div></div>
<div class="ttc" id="buf0buf_8h_html_acaf46d5fc3b73bc26bf115615fb81d0d"><div class="ttname"><a href="buf0buf_8h.html#acaf46d5fc3b73bc26bf115615fb81d0d">buf_page_set_old</a></div><div class="ttdeci">UNIV_INLINE void buf_page_set_old(buf_page_t *bpage, ibool old)</div><div class="ttdoc">Flag a block old. </div></div>
<div class="ttc" id="buf0buf_8h_html_a2fdc4c9f9a04819fb962432b2c0b8e8f"><div class="ttname"><a href="buf0buf_8h.html#a2fdc4c9f9a04819fb962432b2c0b8e8f">buf_pool_adjust_chunk_unit</a></div><div class="ttdeci">ulonglong buf_pool_adjust_chunk_unit(ulonglong size)</div><div class="ttdoc">Adjust the proposed chunk unit size so that it satisfies all invariants. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:1985</div></div>
<div class="ttc" id="structbuf__pool__t_html"><div class="ttname"><a href="structbuf__pool__t.html">buf_pool_t</a></div><div class="ttdoc">The buffer pool structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1774</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_a3e9e7df03a75b4a8575e5b86d953b346"><div class="ttname"><a href="structbuf__pool__stat__t.html#a3e9e7df03a75b4a8575e5b86d953b346">buf_pool_stat_t::n_pages_read</a></div><div class="ttdeci">uint64_t n_pages_read</div><div class="ttdoc">Number of read operations. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1687</div></div>
<div class="ttc" id="log0log_8h_html"><div class="ttname"><a href="log0log_8h.html">log0log.h</a></div><div class="ttdoc">Redo log constants and functions. </div></div>
<div class="ttc" id="buf0buf_8h_html_ae3f64c5e7568dbfc7c7a868943f8c3f7"><div class="ttname"><a href="buf0buf_8h.html#ae3f64c5e7568dbfc7c7a868943f8c3f7">buf_page_reset_file_page_was_freed</a></div><div class="ttdeci">buf_page_t * buf_page_reset_file_page_was_freed(const page_id_t &amp;page_id)</div><div class="ttdoc">Sets file_page_was_freed FALSE if the page is found in the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:3022</div></div>
<div class="ttc" id="ut0rbt_8h_html"><div class="ttname"><a href="ut0rbt_8h.html">ut0rbt.h</a></div><div class="ttdoc">Various utilities. </div></div>
<div class="ttc" id="structbuf__pool__info__t_html_abe256d5c4eaf1d723da774ccc7c07ef6"><div class="ttname"><a href="structbuf__pool__info__t.html#abe256d5c4eaf1d723da774ccc7c07ef6">buf_pool_info_t::unzip_lru_len</a></div><div class="ttdeci">ulint unzip_lru_len</div><div class="ttdoc">length of buf_pool-&gt;unzip_LRU list </div><div class="ttdef"><b>Definition:</b> buf0buf.h:210</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_a1da34e74533530d32d3f7e8c0d1eec20"><div class="ttname"><a href="structbuf__pool__stat__t.html#a1da34e74533530d32d3f7e8c0d1eec20">buf_pool_stat_t::n_pages_not_made_young</a></div><div class="ttdeci">uint64_t n_pages_not_made_young</div><div class="ttdoc">Number of pages not made young because the first access was not long enough ago, in buf_page_peek_if_...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1711</div></div>
<div class="ttc" id="buf0types_8h_html_a728dccae958dd22a0f7ddd16cf6e4f0a"><div class="ttname"><a href="buf0types_8h.html#a728dccae958dd22a0f7ddd16cf6e4f0a">BPageMutex</a></div><div class="ttdeci">ib_bpmutex_t BPageMutex</div><div class="ttdef"><b>Definition:</b> buf0types.h:149</div></div>
<div class="ttc" id="buf0buf_8h_html_a151abcd0889ef3034dda470c29fa1da8"><div class="ttname"><a href="buf0buf_8h.html#a151abcd0889ef3034dda470c29fa1da8">buf_page_alloc_descriptor</a></div><div class="ttdeci">UNIV_INLINE buf_page_t * buf_page_alloc_descriptor(void)</div><div class="ttdoc">Allocates a buf_page_t descriptor. </div></div>
<div class="ttc" id="structCheckUnzipLRUAndLRUList_html"><div class="ttname"><a href="structCheckUnzipLRUAndLRUList.html">CheckUnzipLRUAndLRUList</a></div><div class="ttdef"><b>Definition:</b> buf0buf.h:2188</div></div>
<div class="ttc" id="srv0srv_8h_html"><div class="ttname"><a href="srv0srv_8h.html">srv0srv.h</a></div><div class="ttdoc">The server main program. </div></div>
<div class="ttc" id="structbuf__buddy__stat__t_html_a895b045610b5075ce26c62ffc91bd0e4"><div class="ttname"><a href="structbuf__buddy__stat__t.html#a895b045610b5075ce26c62ffc91bd0e4">buf_buddy_stat_t::relocated_usec</a></div><div class="ttdeci">uint64_t relocated_usec</div><div class="ttdoc">Total duration of block relocations, in microseconds. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1766</div></div>
<div class="ttc" id="structbuf__block__t_html_a0c10b800772d9306afba5350635a4e7f"><div class="ttname"><a href="structbuf__block__t.html#a0c10b800772d9306afba5350635a4e7f">buf_block_t::lock</a></div><div class="ttdeci">BPageLock lock</div><div class="ttdoc">read-write lock of the buffer frame </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1338</div></div>
<div class="ttc" id="buf0buf_8h_html_ab1c9e8bd857ceefd7ea974ab65c84a85"><div class="ttname"><a href="buf0buf_8h.html#ab1c9e8bd857ceefd7ea974ab65c84a85">buf_page_get_known_nowait</a></div><div class="ttdeci">bool buf_page_get_known_nowait(ulint rw_latch, buf_block_t *block, Cache_hint hint, const char *file, ulint line, mtr_t *mtr)</div><div class="ttdoc">This is used to get access to a known database page, when no waiting can be done. ...</div><div class="ttdef"><b>Definition:</b> buf0buf.cc:4311</div></div>
<div class="ttc" id="fil0types_8h_html_aad2ed3fea0198513393719435d632a09"><div class="ttname"><a href="fil0types_8h.html#aad2ed3fea0198513393719435d632a09">FIL_PAGE_PREV</a></div><div class="ttdeci">#define FIL_PAGE_PREV</div><div class="ttdoc">if there is a &amp;#39;natural&amp;#39; predecessor of the page, its offset. </div><div class="ttdef"><b>Definition:</b> fil0types.h:50</div></div>
<div class="ttc" id="classHazardPointer_html_a6b26c23191d6a67d9fbcd4c96b96bc01"><div class="ttname"><a href="classHazardPointer.html#a6b26c23191d6a67d9fbcd4c96b96bc01">HazardPointer::m_mutex</a></div><div class="ttdeci">const ib_mutex_t * m_mutex</div><div class="ttdoc">mutex that protects access to the m_hp. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1590</div></div>
<div class="ttc" id="xcom__base_8cc_html_a0ce0765b958f7289d206f0c78bd105c7"><div class="ttname"><a href="xcom__base_8cc.html#a0ce0765b958f7289d206f0c78bd105c7">lsn</a></div><div class="ttdeci">static uint64_t lsn</div><div class="ttdef"><b>Definition:</b> xcom_base.cc:426</div></div>
<div class="ttc" id="buf0buf_8h_html_aac193f180fc2dea1a6daf0a133e4977b"><div class="ttname"><a href="buf0buf_8h.html#aac193f180fc2dea1a6daf0a133e4977b">buf_block_buf_fix_inc_func</a></div><div class="ttdeci">UNIV_INLINE void buf_block_buf_fix_inc_func(const char *file, ulint line, buf_block_t *block)</div><div class="ttdoc">Increments the bufferfix count. </div></div>
<div class="ttc" id="buf0buf_8h_html_a8239011f74f17732794942ff891bfbf3"><div class="ttname"><a href="buf0buf_8h.html#a8239011f74f17732794942ff891bfbf3">buf_pool_contains_zip</a></div><div class="ttdeci">buf_block_t * buf_pool_contains_zip(buf_pool_t *buf_pool, const void *data)</div><div class="ttdoc">Finds a block in the buffer pool that points to a given compressed page. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:1104</div></div>
<div class="ttc" id="buf0buf_8h_html_a753ac8867abc2d85156cccf714926bc6"><div class="ttname"><a href="buf0buf_8h.html#a753ac8867abc2d85156cccf714926bc6">buf_block_get_modify_clock</a></div><div class="ttdeci">UNIV_INLINE uint64_t buf_block_get_modify_clock(const buf_block_t *block)</div><div class="ttdoc">Read the modify clock. </div></div>
<div class="ttc" id="classFlushHp_html_a5d1614437bbe29b8e6665cee8a0b1765"><div class="ttname"><a href="classFlushHp.html#a5d1614437bbe29b8e6665cee8a0b1765">FlushHp::~FlushHp</a></div><div class="ttdeci">~FlushHp() override</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1607</div></div>
<div class="ttc" id="buf0types_8h_html_aa202293f585f6fafe890a11f6e275f82"><div class="ttname"><a href="buf0types_8h.html#aa202293f585f6fafe890a11f6e275f82">BUF_BUDDY_SIZES_MAX</a></div><div class="ttdeci">#define BUF_BUDDY_SIZES_MAX</div><div class="ttdoc">Maximum number of buddy sizes based on the max page size. </div><div class="ttdef"><b>Definition:</b> buf0types.h:141</div></div>
<div class="ttc" id="buf0buf_8h_html_a68cf52f3b3dfe8cfc91c77757b268034"><div class="ttname"><a href="buf0buf_8h.html#a68cf52f3b3dfe8cfc91c77757b268034">buf_page_set_accessed</a></div><div class="ttdeci">UNIV_INLINE void buf_page_set_accessed(buf_page_t *bpage)</div><div class="ttdoc">Flag a block accessed. </div></div>
<div class="ttc" id="ut0lst_8h_html_a2d5d1dcc12a50df96f27807cf5c3bf20"><div class="ttname"><a href="ut0lst_8h.html#a2d5d1dcc12a50df96f27807cf5c3bf20">ut_list_validate</a></div><div class="ttdeci">void ut_list_validate(const List &amp;list, Functor &amp;functor)</div><div class="ttdoc">Checks the consistency of a two-way list. </div><div class="ttdef"><b>Definition:</b> ut0lst.h:377</div></div>
<div class="ttc" id="buf0buf_8h_html_aa18483f39367e4be86099560cd0cb938"><div class="ttname"><a href="buf0buf_8h.html#aa18483f39367e4be86099560cd0cb938">buf_pool_get_oldest_modification_approx</a></div><div class="ttdeci">lsn_t buf_pool_get_oldest_modification_approx(void)</div><div class="ttdoc">Gets the smallest oldest_modification lsn among all of the earliest added pages in flush lists...</div><div class="ttdef"><b>Definition:</b> buf0buf.cc:355</div></div>
<div class="ttc" id="classHazardPointer_html_a8b31ae46f20f42ff3c1eb1b1e7636c06"><div class="ttname"><a href="classHazardPointer.html#a8b31ae46f20f42ff3c1eb1b1e7636c06">HazardPointer::m_buf_pool</a></div><div class="ttdeci">const buf_pool_t * m_buf_pool</div><div class="ttdoc">Buffer pool instance. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1586</div></div>
<div class="ttc" id="structbuf__pool__info__t_html"><div class="ttname"><a href="structbuf__pool__info__t.html">buf_pool_info_t</a></div><div class="ttdoc">This structure defines information we will fetch from each buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:151</div></div>
<div class="ttc" id="classbuf__page__t_html_aa040b8e88afece55ce1dfd1ef5042491"><div class="ttname"><a href="classbuf__page__t.html#aa040b8e88afece55ce1dfd1ef5042491">buf_page_t::io_fix</a></div><div class="ttdeci">buf_io_fix io_fix</div><div class="ttdoc">type of pending I/O operation. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1192</div></div>
<div class="ttc" id="buf0buf_8h_html_adb15cdb046edd4db173179de22266e71"><div class="ttname"><a href="buf0buf_8h.html#adb15cdb046edd4db173179de22266e71">buf_block_set_file_page</a></div><div class="ttdeci">UNIV_INLINE void buf_block_set_file_page(buf_block_t *block, const page_id_t &amp;page_id)</div><div class="ttdoc">Map a block to a file page. </div></div>
<div class="ttc" id="buf0buf_8h_html_ac2e67247bf34c56e00cfe1915c47abf0"><div class="ttname"><a href="buf0buf_8h.html#ac2e67247bf34c56e00cfe1915c47abf0">buf_block_from_ahi</a></div><div class="ttdeci">buf_block_t * buf_block_from_ahi(const byte *ptr)</div><div class="ttdoc">Get a buffer block from an adaptive hash index pointer. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:3295</div></div>
<div class="ttc" id="structCheckInFreeList_html_a5c0558417125222f5a059f795938cf84"><div class="ttname"><a href="structCheckInFreeList.html#a5c0558417125222f5a059f795938cf84">CheckInFreeList::validate</a></div><div class="ttdeci">static void validate(const buf_pool_t *buf_pool)</div><div class="ttdef"><b>Definition:</b> buf0buf.h:2182</div></div>
<div class="ttc" id="structhash__table__t_html"><div class="ttname"><a href="structhash__table__t.html">hash_table_t</a></div><div class="ttdef"><b>Definition:</b> hash0hash.h:405</div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7a3a90632a36734db3b6482458ab6197ae"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a3a90632a36734db3b6482458ab6197ae">Page_fetch::IF_IN_POOL</a></div><div class="ttdoc">get if in pool </div></div>
<div class="ttc" id="buf0buf_8h_html_acfb7f2dc1c41995e06c47526e8774c6c"><div class="ttname"><a href="buf0buf_8h.html#acfb7f2dc1c41995e06c47526e8774c6c">buf_pool_get</a></div><div class="ttdeci">UNIV_INLINE buf_pool_t * buf_pool_get(const page_id_t &amp;page_id)</div><div class="ttdoc">Returns the buffer pool instance given a page id. </div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7">Page_fetch</a></div><div class="ttdeci">Page_fetch</div><div class="ttdef"><b>Definition:</b> buf0buf.h:57</div></div>
<div class="ttc" id="ctype-mb_8cc_html_adf406aa6822ceac22d62ef63cc2879c0"><div class="ttname"><a href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a></div><div class="ttdeci">int page</div><div class="ttdef"><b>Definition:</b> ctype-mb.cc:1234</div></div>
<div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_aa834cd29fe096570a241f2f1453763f0"><div class="ttname"><a href="structbuf__pool__stat__t.html#aa834cd29fe096570a241f2f1453763f0">buf_pool_stat_t::LRU_bytes</a></div><div class="ttdeci">uint64_t LRU_bytes</div><div class="ttdoc">LRU size in bytes. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1714</div></div>
<div class="ttc" id="structbuf__block__t_html_a859d0a79e91ab56e851dc8a0826abff1"><div class="ttname"><a href="structbuf__block__t.html#a859d0a79e91ab56e851dc8a0826abff1">buf_block_t::left_side</a></div><div class="ttdeci">volatile bool left_side</div><div class="ttdoc">true or false, depending on whether the leftmost record of several records with the same prefix shoul...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1387</div></div>
<div class="ttc" id="buf0buf_8h_html_ac8bcc2e01e4ffe6abf420008166b1062"><div class="ttname"><a href="buf0buf_8h.html#ac8bcc2e01e4ffe6abf420008166b1062">buf_page_peek_if_too_old</a></div><div class="ttdeci">UNIV_INLINE ibool buf_page_peek_if_too_old(const buf_page_t *bpage)</div><div class="ttdoc">Recommends a move of a block to the start of the LRU list if there is danger of dropping from the buf...</div></div>
<div class="ttc" id="buf0buf_8h_html_ad9b8b75af8fa0ad4e4ebb7723ec8a215"><div class="ttname"><a href="buf0buf_8h.html#ad9b8b75af8fa0ad4e4ebb7723ec8a215">buf_page_unset_sticky</a></div><div class="ttdeci">UNIV_INLINE void buf_page_unset_sticky(buf_page_t *bpage)</div><div class="ttdoc">Removes stickiness of a block. </div></div>
<div class="ttc" id="buf0buf_8h_html_ae275396b7f480b0bf26e0b9f400a97a3"><div class="ttname"><a href="buf0buf_8h.html#ae275396b7f480b0bf26e0b9f400a97a3">buf_page_get_block</a></div><div class="ttdeci">UNIV_INLINE buf_block_t * buf_page_get_block(buf_page_t *bpage)</div><div class="ttdoc">Gets the buf_block_t handle of a buffered file block if an uncompressed page frame exists...</div></div>
<div class="ttc" id="buf0buf_8h_html_a38ae1a9052817ce692827243ce970d3e"><div class="ttname"><a href="buf0buf_8h.html#a38ae1a9052817ce692827243ce970d3e">buf_page_set_state</a></div><div class="ttdeci">UNIV_INLINE void buf_page_set_state(buf_page_t *bpage, enum buf_page_state state)</div><div class="ttdoc">Sets the state of a block. </div></div>
<div class="ttc" id="classHazardPointer_html_adc39db9b4cc58ec5fc7b84b8be319327"><div class="ttname"><a href="classHazardPointer.html#adc39db9b4cc58ec5fc7b84b8be319327">HazardPointer::~HazardPointer</a></div><div class="ttdeci">virtual ~HazardPointer()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1549</div></div>
<div class="ttc" id="buf0buf_8h_html_a6fc2cc72f66548f1e67ad61e8e8769a1"><div class="ttname"><a href="buf0buf_8h.html#a6fc2cc72f66548f1e67ad61e8e8769a1">buf_page_io_complete</a></div><div class="ttdeci">bool buf_page_io_complete(buf_page_t *bpage, bool evict)</div><div class="ttdoc">Completes an asynchronous read or write request of a file page to or from the buffer pool...</div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5083</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a6abd73782c4b487dadc2495a94867c4f"><div class="ttname"><a href="structbuf__pool__info__t.html#a6abd73782c4b487dadc2495a94867c4f">buf_pool_info_t::n_pending_flush_list</a></div><div class="ttdeci">ulint n_pending_flush_list</div><div class="ttdoc">Pages pending flush in FLUSH LIST. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:168</div></div>
<div class="ttc" id="structbuf__pool__t_html_a37cb8d5f5c4dd23c8717943daa751a7b"><div class="ttname"><a href="structbuf__pool__t.html#a37cb8d5f5c4dd23c8717943daa751a7b">buf_pool_t::lru_hp</a></div><div class="ttdeci">LRUHp lru_hp</div><div class="ttdoc">&quot;hazard pointer&quot; used during scan of LRU while doing LRU list batch. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1945</div></div>
<div class="ttc" id="classFlushHp_html"><div class="ttname"><a href="classFlushHp.html">FlushHp</a></div><div class="ttdoc">Class implementing buf_pool-&gt;flush_list hazard pointer. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1598</div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8aaa5d948d8c9ee109afa2f2b05672a3930"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aaa5d948d8c9ee109afa2f2b05672a3930">BUF_BLOCK_POOL_WATCH</a></div><div class="ttdoc">a sentinel for the buffer pool watch, element of buf_pool-&gt;watch[] </div><div class="ttdef"><b>Definition:</b> buf0buf.h:128</div></div>
<div class="ttc" id="buf0types_8h_html_a9d992d311e12fe579c419e7f98f80e27"><div class="ttname"><a href="buf0types_8h.html#a9d992d311e12fe579c419e7f98f80e27">buf_io_fix</a></div><div class="ttdeci">buf_io_fix</div><div class="ttdoc">Flags for io_fix types. </div><div class="ttdef"><b>Definition:</b> buf0types.h:91</div></div>
<div class="ttc" id="classbuf__page__t_html_af8ff4e838ef3eee67b60933b11c91783"><div class="ttname"><a href="classbuf__page__t.html#af8ff4e838ef3eee67b60933b11c91783">buf_page_t::freed_page_clock</a></div><div class="ttdeci">unsigned freed_page_clock</div><div class="ttdoc">The value of buf_pool-&gt;freed_page_clock when this block was the last time put to the head of the LRU ...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1299</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a59aa90a03076e1f220274100fbaa9dd3"><div class="ttname"><a href="structbuf__pool__info__t.html#a59aa90a03076e1f220274100fbaa9dd3">buf_pool_info_t::n_ra_pages_read</a></div><div class="ttdeci">ulint n_ra_pages_read</div><div class="ttdoc">buf_pool-&gt;n_ra_pages_read, number of pages readahead </div><div class="ttdef"><b>Definition:</b> buf0buf.h:178</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a19d0d3603bb58e612f117e092ebfddb7"><div class="ttname"><a href="structbuf__pool__info__t.html#a19d0d3603bb58e612f117e092ebfddb7">buf_pool_info_t::n_ra_pages_read_rnd</a></div><div class="ttdeci">ulint n_ra_pages_read_rnd</div><div class="ttdoc">buf_pool-&gt;n_ra_pages_read_rnd, number of pages readahead </div><div class="ttdef"><b>Definition:</b> buf0buf.h:176</div></div>
<div class="ttc" id="buf0types_8h_html_a03c346e355d639f165c311ad5946b3e2"><div class="ttname"><a href="buf0types_8h.html#a03c346e355d639f165c311ad5946b3e2">buf_frame_t</a></div><div class="ttdeci">byte buf_frame_t</div><div class="ttdoc">A buffer frame. </div><div class="ttdef"><b>Definition:</b> buf0types.h:59</div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8aad5dffb35305e497c0afd120525221d18"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aad5dffb35305e497c0afd120525221d18">BUF_BLOCK_READY_FOR_USE</a></div><div class="ttdoc">when buf_LRU_get_free_block returns a block, it is in this state </div><div class="ttdef"><b>Definition:</b> buf0buf.h:140</div></div>
<div class="ttc" id="structbuf__pool__t_html_a9db1ee56155c14ea2870bc74b3443d9b"><div class="ttname"><a href="structbuf__pool__t.html#a9db1ee56155c14ea2870bc74b3443d9b">buf_pool_t::LRU_list_mutex</a></div><div class="ttdeci">BufListMutex LRU_list_mutex</div><div class="ttdoc">LRU list mutex. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1785</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a154fd399757c3ba651199783fd33562a"><div class="ttname"><a href="structbuf__pool__info__t.html#a154fd399757c3ba651199783fd33562a">buf_pool_info_t::pool_unique_id</a></div><div class="ttdeci">ulint pool_unique_id</div><div class="ttdoc">Buffer Pool ID. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:153</div></div>
<div class="ttc" id="structbuf__pool__t_html_adbd2d13b530b284242790ee3b1c1f639"><div class="ttname"><a href="structbuf__pool__t.html#adbd2d13b530b284242790ee3b1c1f639">buf_pool_t::max_lsn_io</a></div><div class="ttdeci">lsn_t max_lsn_io</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1921</div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8a"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8a">buf_page_state</a></div><div class="ttdeci">buf_page_state</div><div class="ttdoc">States of a control block. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:127</div></div>
<div class="ttc" id="http__auth__backend__plugin_8cc_html_aee70c8416f705726100824ba89f1e090"><div class="ttname"><a href="http__auth__backend__plugin_8cc.html#aee70c8416f705726100824ba89f1e090">start</a></div><div class="ttdeci">static void start(mysql_harness::PluginFuncEnv *env)</div><div class="ttdef"><b>Definition:</b> http_auth_backend_plugin.cc:161</div></div>
<div class="ttc" id="buf0buf_8h_html_aac71426ec4d18966a8fa309954653b5e"><div class="ttname"><a href="buf0buf_8h.html#aac71426ec4d18966a8fa309954653b5e">buf_pool_from_array</a></div><div class="ttdeci">UNIV_INLINE buf_pool_t * buf_pool_from_array(ulint index)</div><div class="ttdoc">Returns the buffer pool instance given its array index. </div></div>
<div class="ttc" id="buf0buf_8h_html_a8bb34869722879443008e408b4ae6eb8"><div class="ttname"><a href="buf0buf_8h.html#a8bb34869722879443008e408b4ae6eb8">buf_get_latched_pages_number</a></div><div class="ttdeci">ulint buf_get_latched_pages_number(void)</div><div class="ttdoc">Returns the number of latched pages in the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5846</div></div>
<div class="ttc" id="buf_8h_html"><div class="ttname"><a href="buf_8h.html">buf.h</a></div><div class="ttdoc">The database buffer pool high-level routines. </div></div>
<div class="ttc" id="classbuf__page__t_html_a4108f76f179daca8aa73dd0af51d433e"><div class="ttname"><a href="classbuf__page__t.html#a4108f76f179daca8aa73dd0af51d433e">buf_page_t::hash</a></div><div class="ttdeci">buf_page_t * hash</div><div class="ttdoc">node used in chaining to buf_pool-&gt;page_hash or buf_pool-&gt;zip_hash </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1215</div></div>
<div class="ttc" id="buf0buf_8h_html_aaa795024d029f835357042f72ee0611a"><div class="ttname"><a href="buf0buf_8h.html#aaa795024d029f835357042f72ee0611a">MAX_BUFFER_POOLS_BITS</a></div><div class="ttdeci">constexpr ulint MAX_BUFFER_POOLS_BITS</div><div class="ttdoc">Number of bits to representing a buffer pool ID. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:102</div></div>
<div class="ttc" id="buf0buf_8h_html_a804b0c6399074d86f64a5db44f5e2799"><div class="ttname"><a href="buf0buf_8h.html#a804b0c6399074d86f64a5db44f5e2799">buf_block_get_io_fix</a></div><div class="ttdeci">UNIV_INLINE enum buf_io_fix buf_block_get_io_fix(const buf_block_t *block)</div><div class="ttdoc">Gets the io_fix state of a block. </div></div>
<div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:38</div></div>
<div class="ttc" id="buf0buf_8h_html_a5ded0d8f7e73903ef9aeb7fe4dd9b611"><div class="ttname"><a href="buf0buf_8h.html#a5ded0d8f7e73903ef9aeb7fe4dd9b611">buf_page_free_descriptor</a></div><div class="ttdeci">UNIV_INLINE void buf_page_free_descriptor(buf_page_t *bpage)</div><div class="ttdoc">Free a buf_page_t descriptor. </div></div>
<div class="ttc" id="buf0buf_8h_html_a53437d54ec990de81e9644d3ee6c4337"><div class="ttname"><a href="buf0buf_8h.html#a53437d54ec990de81e9644d3ee6c4337">buf_page_set_flush_type</a></div><div class="ttdeci">UNIV_INLINE void buf_page_set_flush_type(buf_page_t *bpage, buf_flush_t flush_type)</div><div class="ttdoc">Set the flush type of a page. </div></div>
<div class="ttc" id="classbuf__page__t_html_a794d40164f77477340b2380c131ec4da"><div class="ttname"><a href="classbuf__page__t.html#a794d40164f77477340b2380c131ec4da">buf_page_t::get_dblwr_batch_id</a></div><div class="ttdeci">uint16_t get_dblwr_batch_id() const</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1171</div></div>
<div class="ttc" id="buf0types_8h_html"><div class="ttname"><a href="buf0types_8h.html">buf0types.h</a></div><div class="ttdoc">The database buffer pool global types for the directory. </div></div>
<div class="ttc" id="buf0buf_8h_html_ae799641f6fffb0ac145542154be08361"><div class="ttname"><a href="buf0buf_8h.html#ae799641f6fffb0ac145542154be08361">buf_pool_watch_is_sentinel</a></div><div class="ttdeci">ibool buf_pool_watch_is_sentinel(const buf_pool_t *buf_pool, const buf_page_t *bpage)</div><div class="ttdoc">Determine if a block is a sentinel for a buffer pool watch. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:2744</div></div>
<div class="ttc" id="structbuf__pool__t_html_a9a0f49acd5b9e826b2fc59f60f197d78"><div class="ttname"><a href="structbuf__pool__t.html#a9a0f49acd5b9e826b2fc59f60f197d78">buf_pool_t::chunks</a></div><div class="ttdeci">buf_chunk_t * chunks</div><div class="ttdoc">buffer pool chunks </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1810</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_abad6fab370dbde0f2ee7b189b11f7099"><div class="ttname"><a href="structbuf__pool__info__t.html#abad6fab370dbde0f2ee7b189b11f7099">buf_pool_info_t::n_pend_unzip</a></div><div class="ttdeci">ulint n_pend_unzip</div><div class="ttdoc">buf_pool-&gt;n_pend_unzip, pages pending decompress </div><div class="ttdef"><b>Definition:</b> buf0buf.h:159</div></div>
<div class="ttc" id="structbuf__buddy__free__t_html_aa7b46248db36de187576aa40e4ab3b77"><div class="ttname"><a href="structbuf__buddy__free__t.html#aa7b46248db36de187576aa40e4ab3b77">buf_buddy_free_t::bpage</a></div><div class="ttdeci">buf_page_t bpage</div><div class="ttdoc">Embedded bpage descriptor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1672</div></div>
<div class="ttc" id="classFlushObserver_html"><div class="ttname"><a href="classFlushObserver.html">FlushObserver</a></div><div class="ttdoc">We use FlushObserver to track flushing of non-redo logged pages in bulk create index(BtrBulk.cc).Since we disable redo logging during a index build, we need to make sure that all dirty pages modifed by the index build are flushed to disk before any redo logged operations go to the index. </div><div class="ttdef"><b>Definition:</b> buf0flu.h:275</div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8aa7278567ff34beb6c693af5267611c4c7"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa7278567ff34beb6c693af5267611c4c7">BUF_BLOCK_MEMORY</a></div><div class="ttdoc">contains some main memory object </div><div class="ttdef"><b>Definition:</b> buf0buf.h:143</div></div>
<div class="ttc" id="fil0fil_8h_html_a28736d878c89fb4395c9bc86f4530dfc"><div class="ttname"><a href="fil0fil_8h.html#a28736d878c89fb4395c9bc86f4530dfc">page_type_t</a></div><div class="ttdeci">uint16_t page_type_t</div><div class="ttdef"><b>Definition:</b> fil0fil.h:990</div></div>
<div class="ttc" id="structbuf__pool__t_html_af5af0004d4b47625984d89f02bdc132f"><div class="ttname"><a href="structbuf__pool__t.html#af5af0004d4b47625984d89f02bdc132f">buf_pool_t::page_hash_old</a></div><div class="ttdeci">hash_table_t * page_hash_old</div><div class="ttdoc">old pointer to page_hash to be freed after resizing buffer pool </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1824</div></div>
<div class="ttc" id="buf0buf_8h_html_a7da1bc96b9a28049d874d68d0ae61bc3"><div class="ttname"><a href="buf0buf_8h.html#a7da1bc96b9a28049d874d68d0ae61bc3">buf_page_peek</a></div><div class="ttdeci">UNIV_INLINE ibool buf_page_peek(const page_id_t &amp;page_id)</div><div class="ttdoc">Returns TRUE if the page can be found in the buffer pool hash table. </div></div>
<div class="ttc" id="buf0buf_8h_html_a256d09dc81942591a6d51ebcb7c16214"><div class="ttname"><a href="buf0buf_8h.html#a256d09dc81942591a6d51ebcb7c16214">buf_block_get_state</a></div><div class="ttdeci">UNIV_INLINE enum buf_page_state buf_block_get_state(const buf_block_t *block)</div><div class="ttdoc">Gets the state of a block. </div></div>
<div class="ttc" id="structbuf__buddy__stat__t_html_ae3c5042e1440a001a8d58bb683c5e41f"><div class="ttname"><a href="structbuf__buddy__stat__t.html#ae3c5042e1440a001a8d58bb683c5e41f">buf_buddy_stat_t::used</a></div><div class="ttdeci">ulint used</div><div class="ttdoc">Number of blocks allocated from the buddy system. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1762</div></div>
<div class="ttc" id="buf0buf_8h_html_a4a99189b090a1af68ff81b98b5418a0f"><div class="ttname"><a href="buf0buf_8h.html#a4a99189b090a1af68ff81b98b5418a0f">buf_page_get_state</a></div><div class="ttdeci">UNIV_INLINE enum buf_page_state buf_page_get_state(const buf_page_t *bpage)</div><div class="ttdoc">Gets the state of a block. </div></div>
<div class="ttc" id="structfil__addr__t_html"><div class="ttname"><a href="structfil__addr__t.html">fil_addr_t</a></div><div class="ttdoc">File space address. </div><div class="ttdef"><b>Definition:</b> fil0fil.h:945</div></div>
<div class="ttc" id="structbuf__block__t_html_acb908f99682168e39a9dfd69624f7954"><div class="ttname"><a href="structbuf__block__t.html#acb908f99682168e39a9dfd69624f7954">buf_block_t::n_hash_helps</a></div><div class="ttdeci">ulint n_hash_helps</div><div class="ttdoc">counter which controls building of a new hash index for the page </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1376</div></div>
<div class="ttc" id="buf0buf_8h_html_a427515122e86a7b344f79896801f30cb"><div class="ttname"><a href="buf0buf_8h.html#a427515122e86a7b344f79896801f30cb">buf_block_set_io_fix</a></div><div class="ttdeci">UNIV_INLINE void buf_block_set_io_fix(buf_block_t *block, enum buf_io_fix io_fix)</div><div class="ttdoc">Sets the io_fix state of a block. </div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a5cc06b5d70aa6a17c9193cc4efb4c7a9"><div class="ttname"><a href="structbuf__pool__info__t.html#a5cc06b5d70aa6a17c9193cc4efb4c7a9">buf_pool_info_t::n_pages_not_made_young</a></div><div class="ttdeci">ulint n_pages_not_made_young</div><div class="ttdoc">number of pages not made young </div><div class="ttdef"><b>Definition:</b> buf0buf.h:171</div></div>
<div class="ttc" id="buf0buf_8h_html_a3ecef5e7084a885aa97d2aedb9a0fe6e"><div class="ttname"><a href="buf0buf_8h.html#a3ecef5e7084a885aa97d2aedb9a0fe6e">buf_page_make_young</a></div><div class="ttdeci">void buf_page_make_young(buf_page_t *bpage)</div><div class="ttdoc">Moves a page to the start of the buffer pool LRU list. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:2950</div></div>
<div class="ttc" id="ut0dbg_8h_html_ae7aed983dfe98ac872b5a9915fa778fa"><div class="ttname"><a href="ut0dbg_8h.html#ae7aed983dfe98ac872b5a9915fa778fa">ut_a</a></div><div class="ttdeci">#define ut_a(EXPR)</div><div class="ttdoc">Abort execution if EXPR does not evaluate to nonzero. </div><div class="ttdef"><b>Definition:</b> ut0dbg.h:54</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_a2cd33f739a82b1f8c266caf98530bbe0"><div class="ttname"><a href="structbuf__pool__stat__t.html#a2cd33f739a82b1f8c266caf98530bbe0">buf_pool_stat_t::n_ra_pages_read_rnd</a></div><div class="ttdeci">uint64_t n_ra_pages_read_rnd</div><div class="ttdoc">Number of pages read in as part of random read ahead. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1696</div></div>
<div class="ttc" id="classLRUHp_html_aade56d05efd97720fc2c1a10a2a87755"><div class="ttname"><a href="classLRUHp.html#aade56d05efd97720fc2c1a10a2a87755">LRUHp::~LRUHp</a></div><div class="ttdeci">~LRUHp() override</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1626</div></div>
<div class="ttc" id="namespacejson__binary_html_a091356787f1fe6633bc180fc2009c606"><div class="ttname"><a href="namespacejson__binary.html#a091356787f1fe6633bc180fc2009c606">json_binary::err</a></div><div class="ttdeci">static Value err()</div><div class="ttdoc">Create a Value object that represents an error condition. </div><div class="ttdef"><b>Definition:</b> json_binary.cc:908</div></div>
<div class="ttc" id="buf0buf_8h_html_acff3e4e95015baaa1740ff6098e6e164"><div class="ttname"><a href="buf0buf_8h.html#acff3e4e95015baaa1740ff6098e6e164">buf_pool_get_n_pages</a></div><div class="ttdeci">UNIV_INLINE ulint buf_pool_get_n_pages(void)</div><div class="ttdoc">Gets the current size of buffer buf_pool in frames. </div></div>
<div class="ttc" id="buf0buf_8h_html_a3fdf9e142c6096556e3722d7c91b9065"><div class="ttname"><a href="buf0buf_8h.html#a3fdf9e142c6096556e3722d7c91b9065">buf_pool_ptr</a></div><div class="ttdeci">buf_pool_t * buf_pool_ptr</div><div class="ttdoc">The buffer pools of the database. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:293</div></div>
<div class="ttc" id="fil0types_8h_html_aeada81e615965f1c118da2517fb72720"><div class="ttname"><a href="fil0types_8h.html#aeada81e615965f1c118da2517fb72720">FIL_PAGE_DATA</a></div><div class="ttdeci">constexpr ulint FIL_PAGE_DATA</div><div class="ttdoc">start of the data on the page </div><div class="ttdef"><b>Definition:</b> fil0types.h:110</div></div>
<div class="ttc" id="structbuf__block__t_html_a972cf65b12b166a38318f5057f712c8a"><div class="ttname"><a href="structbuf__block__t.html#a972cf65b12b166a38318f5057f712c8a">buf_block_t::n_bytes</a></div><div class="ttdeci">volatile ulint n_bytes</div><div class="ttdoc">recommended prefix length for hash search: number of bytes in an incomplete last field ...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1380</div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8aa9135ba69991c7e4a4943f289de621509"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa9135ba69991c7e4a4943f289de621509">BUF_BLOCK_ZIP_DIRTY</a></div><div class="ttdoc">contains a compressed page that is in the buf_pool-&gt;flush_list </div><div class="ttdef"><b>Definition:</b> buf0buf.h:132</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_a4bdb21e0d62e6c15ef459575bf91791e"><div class="ttname"><a href="structbuf__pool__stat__t.html#a4bdb21e0d62e6c15ef459575bf91791e">buf_pool_stat_t::n_pages_made_young</a></div><div class="ttdeci">uint64_t n_pages_made_young</div><div class="ttdoc">Number of pages made young, in calls to buf_LRU_make_block_young(). </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1707</div></div>
<div class="ttc" id="ut0byte_8h_html"><div class="ttname"><a href="ut0byte_8h.html">ut0byte.h</a></div><div class="ttdoc">Utilities for byte operations. </div></div>
<div class="ttc" id="buf0buf_8h_html_af7dd922a4f122cd1870fbc8cdec76620"><div class="ttname"><a href="buf0buf_8h.html#af7dd922a4f122cd1870fbc8cdec76620">buf_get_total_list_size_in_bytes</a></div><div class="ttdeci">void buf_get_total_list_size_in_bytes(buf_pools_list_size_t *buf_pools_list_size)</div><div class="ttdoc">Get total list size in bytes from all buffer pools. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:459</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_ab0da56d67fb69965aca2123d1ae44e9f"><div class="ttname"><a href="structbuf__pool__info__t.html#ab0da56d67fb69965aca2123d1ae44e9f">buf_pool_info_t::pages_evicted_rate</a></div><div class="ttdeci">double pages_evicted_rate</div><div class="ttdoc">rate of readahead page evicted without access, in pages per second </div><div class="ttdef"><b>Definition:</b> buf0buf.h:206</div></div>
<div class="ttc" id="sync0rw_8h_html_ac63f6bb2316c64592a2494595132e574"><div class="ttname"><a href="sync0rw_8h.html#ac63f6bb2316c64592a2494595132e574">rw_lock_type_t</a></div><div class="ttdeci">rw_lock_type_t</div><div class="ttdef"><b>Definition:</b> sync0rw.h:135</div></div>
<div class="ttc" id="buf0buf_8h_html_adfcde42037dc3ee66cfe5e74fad1c015"><div class="ttname"><a href="buf0buf_8h.html#adfcde42037dc3ee66cfe5e74fad1c015">buf_get_nth_chunk_block</a></div><div class="ttdeci">UNIV_INLINE buf_block_t * buf_get_nth_chunk_block(const buf_pool_t *buf_pool, ulint n, ulint *chunk_size)</div><div class="ttdoc">Get the nth chunk&amp;#39;s buffer block in the specified buffer pool. </div></div>
<div class="ttc" id="classHazardPointer_html_a7ce282e8d949a4d423f4f80b668361d3"><div class="ttname"><a href="classHazardPointer.html#a7ce282e8d949a4d423f4f80b668361d3">HazardPointer::m_hp</a></div><div class="ttdeci">buf_page_t * m_hp</div><div class="ttdoc">hazard pointer. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1594</div></div>
<div class="ttc" id="structbuf__pool__t_html_ac8a49e54a5249cf5cef9c55c3221241f"><div class="ttname"><a href="structbuf__pool__t.html#ac8a49e54a5249cf5cef9c55c3221241f">buf_pool_t::LRU_old_len</a></div><div class="ttdeci">ulint LRU_old_len</div><div class="ttdoc">length of the LRU list from the block to which LRU_old points onward, including that block; see buf0l...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1965</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a2b0cf08534f861c1784546193a8ec3cb"><div class="ttname"><a href="structbuf__pool__info__t.html#a2b0cf08534f861c1784546193a8ec3cb">buf_pool_info_t::io_sum</a></div><div class="ttdeci">ulint io_sum</div><div class="ttdoc">buf_LRU_stat_sum.io </div><div class="ttdef"><b>Definition:</b> buf0buf.h:213</div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8aaf26cdfc58e629f98cf27da284f6cf5f9"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aaf26cdfc58e629f98cf27da284f6cf5f9">BUF_BLOCK_FILE_PAGE</a></div><div class="ttdoc">contains a buffered file page </div><div class="ttdef"><b>Definition:</b> buf0buf.h:142</div></div>
<div class="ttc" id="buf0buf_8h_html_a2d4f29f5614d709fd4fceb970ebd19be"><div class="ttname"><a href="buf0buf_8h.html#a2d4f29f5614d709fd4fceb970ebd19be">buf_frame_will_withdrawn</a></div><div class="ttdeci">bool buf_frame_will_withdrawn(buf_pool_t *buf_pool, const byte *ptr)</div><div class="ttdoc">Determines if a frame is intended to be withdrawn. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:1711</div></div>
<div class="ttc" id="classbuf__page__t_html_a5c6fc7cdf889598e4900462c7bb0caca"><div class="ttname"><a href="classbuf__page__t.html#a5c6fc7cdf889598e4900462c7bb0caca">buf_page_t::in_flush_list</a></div><div class="ttdeci">bool in_flush_list</div><div class="ttdoc">Based on state, this is a list node, protected by the corresponding list mutex, in one of the followi...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1259</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_ae3a0432079bcb317fdb0d425040d24a9"><div class="ttname"><a href="structbuf__pool__stat__t.html#ae3a0432079bcb317fdb0d425040d24a9">buf_pool_stat_t::n_pages_written</a></div><div class="ttdeci">uint64_t n_pages_written</div><div class="ttdoc">Number of write operations. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1690</div></div>
<div class="ttc" id="structbuf__block__t_html_a4e5ac54b3d0c1a0c5d4a950c8b9f61a9"><div class="ttname"><a href="structbuf__block__t.html#a4e5ac54b3d0c1a0c5d4a950c8b9f61a9">buf_block_t::get_prev_page_no</a></div><div class="ttdeci">page_no_t get_prev_page_no() const</div><div class="ttdoc">Get the prev page number of the current buffer block. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1500</div></div>
<div class="ttc" id="structbuf__pool__t_html_a081fb5b9138e111af2d85a333f4165ac"><div class="ttname"><a href="structbuf__pool__t.html#a081fb5b9138e111af2d85a333f4165ac">buf_pool_t::chunks_old</a></div><div class="ttdeci">buf_chunk_t * chunks_old</div><div class="ttdoc">old buffer pool chunks to be freed after resizing buffer pool </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1811</div></div>
<div class="ttc" id="structbuf__block__t_html_ad0299484987534038b0f7d9febdcfe86"><div class="ttname"><a href="structbuf__block__t.html#ad0299484987534038b0f7d9febdcfe86">buf_block_t::made_dirty_with_no_latch</a></div><div class="ttdeci">bool made_dirty_with_no_latch</div><div class="ttdoc">true if block has been made dirty without acquiring X/SX latch as the block belongs to temporary tabl...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1466</div></div>
<div class="ttc" id="classLRUHp_html_ad4f334ed073fd05d0d35e4bc1d49f2ed"><div class="ttname"><a href="classLRUHp.html#ad4f334ed073fd05d0d35e4bc1d49f2ed">LRUHp::LRUHp</a></div><div class="ttdeci">LRUHp(const buf_pool_t *buf_pool, const ib_mutex_t *mutex)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1622</div></div>
<div class="ttc" id="structbuf__buddy__stat__t_html_a09ebf3091d6c4ea6de4319c7e45eef7e"><div class="ttname"><a href="structbuf__buddy__stat__t.html#a09ebf3091d6c4ea6de4319c7e45eef7e">buf_buddy_stat_t::relocated</a></div><div class="ttdeci">uint64_t relocated</div><div class="ttdoc">Number of blocks relocated by the buddy system. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1764</div></div>
<div class="ttc" id="os0proc_8h_html"><div class="ttname"><a href="os0proc_8h.html">os0proc.h</a></div><div class="ttdoc">The interface to the operating system process control primitives. </div></div>
<div class="ttc" id="classHazardPointer_html"><div class="ttname"><a href="classHazardPointer.html">HazardPointer</a></div><div class="ttdoc">A &quot;Hazard Pointer&quot; class used to iterate over page lists inside the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1533</div></div>
<div class="ttc" id="classbuf__page__t_html_a94ddaed471d8322c8c117d5a07504842"><div class="ttname"><a href="classbuf__page__t.html#a94ddaed471d8322c8c117d5a07504842">buf_page_t::oldest_modification</a></div><div class="ttdeci">lsn_t oldest_modification</div><div class="ttdoc">log sequence number of the youngest modification to this block, zero if not modified. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1270</div></div>
<div class="ttc" id="buf0buf_8h_html_a2fa5baa88e1ce986b7308ab72453ca0b"><div class="ttname"><a href="buf0buf_8h.html#a2fa5baa88e1ce986b7308ab72453ca0b">buf_page_get_mutex</a></div><div class="ttdeci">UNIV_INLINE BPageMutex * buf_page_get_mutex(const buf_page_t *bpage)</div><div class="ttdoc">Gets the mutex of a block. </div></div>
<div class="ttc" id="group__MYSYS_html_gaff94a40cf049a7ffa8c8fdc46b757085"><div class="ttname"><a href="group__MYSYS.html#gaff94a40cf049a7ffa8c8fdc46b757085">flush_type</a></div><div class="ttdeci">flush_type</div><div class="ttdef"><b>Definition:</b> my_sys.h:290</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a2a94b22a3a72efec5de4a7b0110d20d3"><div class="ttname"><a href="structbuf__pool__info__t.html#a2a94b22a3a72efec5de4a7b0110d20d3">buf_pool_info_t::page_made_young_rate</a></div><div class="ttdeci">double page_made_young_rate</div><div class="ttdoc">page made young rate in pages per second </div><div class="ttdef"><b>Definition:</b> buf0buf.h:187</div></div>
<div class="ttc" id="buf0buf_8h_html_a35c37514bc246843091d871cea64e91a"><div class="ttname"><a href="buf0buf_8h.html#a35c37514bc246843091d871cea64e91a">buf_page_can_relocate</a></div><div class="ttdeci">UNIV_INLINE ibool buf_page_can_relocate(const buf_page_t *bpage)</div><div class="ttdoc">Determine if a buffer block can be relocated in memory. </div></div>
<div class="ttc" id="structbuf__pool__info__t_html_af82d47f24dd9b41bfce973f6bd8539be"><div class="ttname"><a href="structbuf__pool__info__t.html#af82d47f24dd9b41bfce973f6bd8539be">buf_pool_info_t::n_pending_flush_single_page</a></div><div class="ttdeci">ulint n_pending_flush_single_page</div><div class="ttdoc">Pages pending to be flushed as part of single page flushes issued by various user threads...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:164</div></div>
<div class="ttc" id="buf0buf_8h_html_ab806a1ce0a4b83b733b9b97da5691f47"><div class="ttname"><a href="buf0buf_8h.html#ab806a1ce0a4b83b733b9b97da5691f47">buf_block_hash_get_locked</a></div><div class="ttdeci">UNIV_INLINE buf_block_t * buf_block_hash_get_locked(buf_pool_t *buf_pool, const page_id_t &amp;page_id, rw_lock_t **lock, ulint lock_mode)</div><div class="ttdoc">Returns the control block of a file page, NULL if not found. </div></div>
<div class="ttc" id="classbuf__page__t_html"><div class="ttname"><a href="classbuf__page__t.html">buf_page_t</a></div><div class="ttdef"><b>Definition:</b> buf0buf.h:1164</div></div>
<div class="ttc" id="buf0buf_8h_html_a9913c2499ec503eea58a7dbb0c6b93d8"><div class="ttname"><a href="buf0buf_8h.html#a9913c2499ec503eea58a7dbb0c6b93d8">buf_print</a></div><div class="ttdeci">void buf_print(void)</div><div class="ttdoc">Prints info of the buffer pool data structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5749</div></div>
<div class="ttc" id="buf0buf_8h_html_a93370087448a1c0e6a3054d13ca0fb81"><div class="ttname"><a href="buf0buf_8h.html#a93370087448a1c0e6a3054d13ca0fb81">MAX_BUFFER_POOLS</a></div><div class="ttdeci">constexpr ulint MAX_BUFFER_POOLS</div><div class="ttdoc">The maximum number of buffer pools that can be defined. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:105</div></div>
<div class="ttc" id="api0api_8h_html_a02e9c11b4a9783f4b0b89fcf060f8f28"><div class="ttname"><a href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a></div><div class="ttdeci">uint32 space_id_t</div><div class="ttdoc">Tablespace identifier. </div><div class="ttdef"><b>Definition:</b> api0api.h:59</div></div>
<div class="ttc" id="structbuf__block__t_html_a8ef8d133a86de0277832fc291bb7f081"><div class="ttname"><a href="structbuf__block__t.html#a8ef8d133a86de0277832fc291bb7f081">buf_block_t::frame</a></div><div class="ttdeci">byte * frame</div><div class="ttdoc">pointer to buffer frame which is of size UNIV_PAGE_SIZE, and aligned to an address divisible by UNIV_...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1334</div></div>
<div class="ttc" id="structbuf__block__t_html_abd502c27ab099e000f52980eb5320a5d"><div class="ttname"><a href="structbuf__block__t.html#abd502c27ab099e000f52980eb5320a5d">buf_block_t::curr_n_fields</a></div><div class="ttdeci">unsigned curr_n_fields</div><div class="ttdoc">prefix length for hash indexing: number of full fields </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1448</div></div>
<div class="ttc" id="structCheckInLRUList_html"><div class="ttname"><a href="structCheckInLRUList.html">CheckInLRUList</a></div><div class="ttdoc">Functor to validate the LRU list. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:2169</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_a55cfde7ee75f62c78d46c969ccf475ee"><div class="ttname"><a href="structbuf__pool__stat__t.html#a55cfde7ee75f62c78d46c969ccf475ee">buf_pool_stat_t::n_ra_pages_evicted</a></div><div class="ttdeci">uint64_t n_ra_pages_evicted</div><div class="ttdoc">Number of read ahead pages that are evicted without being accessed. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1703</div></div>
<div class="ttc" id="buf0buf_8h_html_a8489d00ae3045b2d4207ba0eece8e966"><div class="ttname"><a href="buf0buf_8h.html#a8489d00ae3045b2d4207ba0eece8e966">buf_get_free_list_len</a></div><div class="ttdeci">ulint buf_get_free_list_len(void)</div><div class="ttdoc">Gets the current length of the free list of buffer blocks. </div></div>
<div class="ttc" id="buf0buf_8h_html_acb376da0136a9ced31021c6137359d6e"><div class="ttname"><a href="buf0buf_8h.html#acb376da0136a9ced31021c6137359d6e">buf_page_get_io_fix_unlocked</a></div><div class="ttdeci">UNIV_INLINE enum buf_io_fix buf_page_get_io_fix_unlocked(const buf_page_t *bpage)</div><div class="ttdoc">Gets the io_fix state of a buffer page. </div></div>
<div class="ttc" id="buf0buf_8h_html_a532b24c23776dee3f4a4635e38417378"><div class="ttname"><a href="buf0buf_8h.html#a532b24c23776dee3f4a4635e38417378">buf_zip_decompress</a></div><div class="ttdeci">ibool buf_zip_decompress(buf_block_t *block, ibool check)</div><div class="ttdoc">Decompress a block. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:3226</div></div>
<div class="ttc" id="buf0buf_8h_html_af6655833718a3258748ac2298522ca5d"><div class="ttname"><a href="buf0buf_8h.html#af6655833718a3258748ac2298522ca5d">buf_block_get_freed_page_clock</a></div><div class="ttdeci">UNIV_INLINE ulint buf_block_get_freed_page_clock(const buf_block_t *block)</div><div class="ttdoc">Reads the freed_page_clock of a buffer block. </div></div>
<div class="ttc" id="structbuf__pool__info__t_html_ab1be4e0ffc5f94df411dc5b1311caa38"><div class="ttname"><a href="structbuf__pool__info__t.html#ab1be4e0ffc5f94df411dc5b1311caa38">buf_pool_info_t::n_pending_flush_lru</a></div><div class="ttdeci">ulint n_pending_flush_lru</div><div class="ttdoc">Pages pending flush in LRU. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:163</div></div>
<div class="ttc" id="ut0dbg_8h_html_a17113dab7f37e298e889ac8818ab13d0"><div class="ttname"><a href="ut0dbg_8h.html#a17113dab7f37e298e889ac8818ab13d0">ut_ad</a></div><div class="ttdeci">#define ut_ad(EXPR)</div><div class="ttdoc">Debug assertion. </div><div class="ttdef"><b>Definition:</b> ut0dbg.h:66</div></div>
<div class="ttc" id="buf0buf_8h_html_a940342731a901c4a6171de07be118f57"><div class="ttname"><a href="buf0buf_8h.html#a940342731a901c4a6171de07be118f57">buf_print_io</a></div><div class="ttdeci">void buf_print_io(FILE *file)</div><div class="ttdoc">Prints info of the buffer i/o. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:6146</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a44991511f5043fa203cba98e23426cee"><div class="ttname"><a href="structbuf__pool__info__t.html#a44991511f5043fa203cba98e23426cee">buf_pool_info_t::unzip_sum</a></div><div class="ttdeci">ulint unzip_sum</div><div class="ttdoc">buf_LRU_stat_sum.unzip </div><div class="ttdef"><b>Definition:</b> buf0buf.h:216</div></div>
<div class="ttc" id="buf0buf_8h_html_ae7c7553b7d927c907ca28aa41640e856"><div class="ttname"><a href="buf0buf_8h.html#ae7c7553b7d927c907ca28aa41640e856">buf_page_in_file</a></div><div class="ttdeci">UNIV_INLINE ibool buf_page_in_file(const buf_page_t *bpage)</div><div class="ttdoc">Determines if a block is mapped to a tablespace. </div></div>
<div class="ttc" id="classbuf__page__t_html_ac96c3eee0fffce259d40af744a62f18d"><div class="ttname"><a href="classbuf__page__t.html#ac96c3eee0fffce259d40af744a62f18d">buf_page_t::in_LRU_list</a></div><div class="ttdeci">bool in_LRU_list</div><div class="ttdoc">node of the LRU list </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1288</div></div>
<div class="ttc" id="buf0buf_8h_html_a803b791d0706583d685f7f9413da45d7"><div class="ttname"><a href="buf0buf_8h.html#a803b791d0706583d685f7f9413da45d7">buf_pool_from_bpage</a></div><div class="ttdeci">UNIV_INLINE buf_pool_t * buf_pool_from_bpage(const buf_page_t *bpage)</div><div class="ttdoc">Returns the buffer pool instance given a page instance. </div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8aa3eeed1a3010bb586fc0fa54581a9ef87"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa3eeed1a3010bb586fc0fa54581a9ef87">BUF_BLOCK_REMOVE_HASH</a></div><div class="ttdoc">hash index should be removed before putting to the free list </div><div class="ttdef"><b>Definition:</b> buf0buf.h:145</div></div>
<div class="ttc" id="classpage__size__t_html"><div class="ttname"><a href="classpage__size__t.html">page_size_t</a></div><div class="ttdoc">Page size descriptor. </div><div class="ttdef"><b>Definition:</b> page0size.h:49</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a41fd60184668a4b986cbcb00f3636ef6"><div class="ttname"><a href="structbuf__pool__info__t.html#a41fd60184668a4b986cbcb00f3636ef6">buf_pool_info_t::pages_readahead_rnd_rate</a></div><div class="ttdeci">double pages_readahead_rnd_rate</div><div class="ttdoc">random readahead rate in pages per second </div><div class="ttdef"><b>Definition:</b> buf0buf.h:202</div></div>
<div class="ttc" id="buf0buf_8h_html_a883be2e9c1c6795751c4b076708c7a32"><div class="ttname"><a href="buf0buf_8h.html#a883be2e9c1c6795751c4b076708c7a32">buf_pool_index</a></div><div class="ttdeci">UNIV_INLINE ulint buf_pool_index(const buf_pool_t *buf_pool)</div><div class="ttdoc">Calculates the index of a buffer pool to the buf_pool[] array. </div></div>
<div class="ttc" id="buf0buf_8h_html_ac5e1620a9a0c049c739b9e426bd7802e"><div class="ttname"><a href="buf0buf_8h.html#ac5e1620a9a0c049c739b9e426bd7802e">buf_refresh_io_stats_all</a></div><div class="ttdeci">void buf_refresh_io_stats_all()</div><div class="ttdoc">Refresh the statistics used to print per-second averages. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:6207</div></div>
<div class="ttc" id="buf0buf_8h_html_a95db363e6bf7655c69a903397199b780"><div class="ttname"><a href="buf0buf_8h.html#a95db363e6bf7655c69a903397199b780">buf_block_get_frame</a></div><div class="ttdeci">UNIV_INLINE buf_frame_t * buf_block_get_frame(const buf_block_t *block)</div><div class="ttdoc">Gets a pointer to the memory frame of a block. </div></div>
<div class="ttc" id="innodb__utility_8h_html_af8087cee2d41561b30b9d1903cebfb3d"><div class="ttname"><a href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a></div><div class="ttdeci">#define UT_LIST_BASE_NODE_T(TYPE)</div><div class="ttdef"><b>Definition:</b> innodb_utility.h:47</div></div>
<div class="ttc" id="buf0buf_8h_html_a70c8e79f9fad932a3f06f1edf84c2147"><div class="ttname"><a href="buf0buf_8h.html#a70c8e79f9fad932a3f06f1edf84c2147">buf_frame_copy</a></div><div class="ttdeci">UNIV_INLINE byte * buf_frame_copy(byte *buf, const buf_frame_t *frame)</div><div class="ttdoc">Copies contents of a buffer frame to a given buffer. </div></div>
<div class="ttc" id="buf0buf_8h_html_ab1a8f29ac35531394d5cc6abb4e7bc2a"><div class="ttname"><a href="buf0buf_8h.html#ab1a8f29ac35531394d5cc6abb4e7bc2a">buf_page_set_io_fix</a></div><div class="ttdeci">UNIV_INLINE void buf_page_set_io_fix(buf_page_t *bpage, enum buf_io_fix io_fix)</div><div class="ttdoc">Sets the io_fix state of a block. </div></div>
<div class="ttc" id="structbuf__buddy__free__t_html"><div class="ttname"><a href="structbuf__buddy__free__t.html">buf_buddy_free_t</a></div><div class="ttdoc">Struct that is embedded in the free zip blocks. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1658</div></div>
<div class="ttc" id="classbuf__page__t_html_aee2136d1a88a6b328c5510f4f3b208be"><div class="ttname"><a href="classbuf__page__t.html#aee2136d1a88a6b328c5510f4f3b208be">buf_page_t::flush_type</a></div><div class="ttdeci">unsigned flush_type</div><div class="ttdoc">if this block is currently being flushed to disk, this tells the flush_type. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1199</div></div>
<div class="ttc" id="buf0buf_8h_html_aac0ec477ed8bba5d447e069f5ac6d31b"><div class="ttname"><a href="buf0buf_8h.html#aac0ec477ed8bba5d447e069f5ac6d31b">buf_frame_align</a></div><div class="ttdeci">UNIV_INLINE buf_frame_t * buf_frame_align(byte *ptr)</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a69f6d3725773165ce5e8143238b01950"><div class="ttname"><a href="structbuf__pool__info__t.html#a69f6d3725773165ce5e8143238b01950">buf_pool_info_t::n_pages_created</a></div><div class="ttdeci">ulint n_pages_created</div><div class="ttdoc">buf_pool-&gt;n_pages_created </div><div class="ttdef"><b>Definition:</b> buf0buf.h:173</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_abd2613e5bf7e26571887f4f0fabbfa13"><div class="ttname"><a href="structbuf__pool__info__t.html#abd2613e5bf7e26571887f4f0fabbfa13">buf_pool_info_t::pages_readahead_rate</a></div><div class="ttdeci">double pages_readahead_rate</div><div class="ttdoc">readahead rate in pages per second </div><div class="ttdef"><b>Definition:</b> buf0buf.h:204</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_ac9f148ecfa80e3d53da32dc5877a6ac8"><div class="ttname"><a href="structbuf__pool__info__t.html#ac9f148ecfa80e3d53da32dc5877a6ac8">buf_pool_info_t::pool_size</a></div><div class="ttdeci">ulint pool_size</div><div class="ttdoc">Buffer Pool size in pages. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:154</div></div>
<div class="ttc" id="buf0buf_8h_html_a35b6dd3b80c03a713c7f160611d00455"><div class="ttname"><a href="buf0buf_8h.html#a35b6dd3b80c03a713c7f160611d00455">buf_pool_watch_occurred</a></div><div class="ttdeci">ibool buf_pool_watch_occurred(const page_id_t &amp;page_id)</div><div class="ttdoc">Check if the page has been read in. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:2925</div></div>
<div class="ttc" id="buf0buf_8h_html_aba2805ff54abe4adb4a918c41a2f9ed0"><div class="ttname"><a href="buf0buf_8h.html#aba2805ff54abe4adb4a918c41a2f9ed0">buf_page_try_get_func</a></div><div class="ttdeci">const buf_block_t * buf_page_try_get_func(const page_id_t &amp;page_id, const char *file, ulint line, mtr_t *mtr)</div><div class="ttdoc">Given a tablespace id and page number tries to get that page. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:4403</div></div>
<div class="ttc" id="buf0buf_8h_html_a0056c362020ff9e840fb48cb94c3cdba"><div class="ttname"><a href="buf0buf_8h.html#a0056c362020ff9e840fb48cb94c3cdba">Cache_hint</a></div><div class="ttdeci">Cache_hint</div><div class="ttdef"><b>Definition:</b> buf0buf.h:90</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a9b98295cec95aedd9630157d1c03068d"><div class="ttname"><a href="structbuf__pool__info__t.html#a9b98295cec95aedd9630157d1c03068d">buf_pool_info_t::n_page_get_delta</a></div><div class="ttdeci">ulint n_page_get_delta</div><div class="ttdoc">num of buffer pool page gets since last printout </div><div class="ttdef"><b>Definition:</b> buf0buf.h:183</div></div>
<div class="ttc" id="buf0buf_8h_html_a1eec07edc8c41c7b8d17b0053f28ffee"><div class="ttname"><a href="buf0buf_8h.html#a1eec07edc8c41c7b8d17b0053f28ffee">buf_flush_update_zip_checksum</a></div><div class="ttdeci">void buf_flush_update_zip_checksum(buf_frame_t *page, ulint size, lsn_t lsn, bool skip_lsn_check)</div><div class="ttdoc">Calculate the checksum of a page from compressed table and update the page. </div><div class="ttdef"><b>Definition:</b> buf0flu.cc:919</div></div>
<div class="ttc" id="buf0buf_8h_html_a53726080a6bcf5cd75f80580f5691ecc"><div class="ttname"><a href="buf0buf_8h.html#a53726080a6bcf5cd75f80580f5691ecc">buf_block_dbg_add_level</a></div><div class="ttdeci">UNIV_INLINE void buf_block_dbg_add_level(buf_block_t *block, latch_level_t level)</div><div class="ttdoc">Adds latch level info for the rw-lock protecting the buffer frame. </div></div>
<div class="ttc" id="buf0buf_8h_html_aa7fefbabeb6b422a2baeae7758d16a7d"><div class="ttname"><a href="buf0buf_8h.html#aa7fefbabeb6b422a2baeae7758d16a7d">operator&lt;&lt;</a></div><div class="ttdeci">std::ostream &amp; operator&lt;&lt;(std::ostream &amp;out, const buf_pool_t &amp;buf_pool)</div><div class="ttdoc">Print the given buf_pool_t object. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:6306</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_ad2c44ef40244dac836e9d88fd396f723"><div class="ttname"><a href="structbuf__pool__stat__t.html#ad2c44ef40244dac836e9d88fd396f723">buf_pool_stat_t::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1743</div></div>
<div class="ttc" id="buf0buf_8h_html_a9d8e9065bf85e7b6806022c563129da1"><div class="ttname"><a href="buf0buf_8h.html#a9d8e9065bf85e7b6806022c563129da1">buf_page_get_flush_type</a></div><div class="ttdeci">UNIV_INLINE buf_flush_t buf_page_get_flush_type(const buf_page_t *bpage)</div><div class="ttdoc">Get the flush type of a page. </div></div>
<div class="ttc" id="xcom__base_8cc_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="xcom__base_8cc.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> xcom_base.cc:442</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a140c6397453fc7696bc9737c81b901f2"><div class="ttname"><a href="structbuf__pool__info__t.html#a140c6397453fc7696bc9737c81b901f2">buf_pool_info_t::n_pages_read</a></div><div class="ttdeci">ulint n_pages_read</div><div class="ttdoc">buf_pool-&gt;n_pages_read </div><div class="ttdef"><b>Definition:</b> buf0buf.h:172</div></div>
<div class="ttc" id="buf0buf_8h_html_a3ab7e6bcd7b2f7b163bc40dd76b08b8c"><div class="ttname"><a href="buf0buf_8h.html#a3ab7e6bcd7b2f7b163bc40dd76b08b8c">buf_block_unfix</a></div><div class="ttdeci">UNIV_INLINE ulint buf_block_unfix(buf_page_t *bpage)</div><div class="ttdoc">Decrements the bufferfix count. </div></div>
<div class="ttc" id="buf0buf_8h_html_a7a1b136191a6e34494318af4a7066b64"><div class="ttname"><a href="buf0buf_8h.html#a7a1b136191a6e34494318af4a7066b64">buf_page_get_zip</a></div><div class="ttdeci">buf_page_t * buf_page_get_zip(const page_id_t &amp;page_id, const page_size_t &amp;page_size)</div><div class="ttdoc">Get read access to a compressed page (usually of type FIL_PAGE_TYPE_ZBLOB or FIL_PAGE_TYPE_ZBLOB2). </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:3083</div></div>
<div class="ttc" id="structbuf__pool__t_html_a10a16d528a553e5e4f8e11820402d9db"><div class="ttname"><a href="structbuf__pool__t.html#a10a16d528a553e5e4f8e11820402d9db">buf_pool_t::zip_hash</a></div><div class="ttdeci">hash_table_t * zip_hash</div><div class="ttdoc">hash table of buf_block_t blocks whose frames are allocated to the zip buddy system, indexed by block-&gt;frame </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1826</div></div>
<div class="ttc" id="buf0buf_8h_html_a0feb3f11f6a58e81598bf92d7b435500"><div class="ttname"><a href="buf0buf_8h.html#a0feb3f11f6a58e81598bf92d7b435500">buf_page_print</a></div><div class="ttdeci">void buf_page_print(const byte *read_buf, const page_size_t &amp;page_size, ulint flags)</div><div class="ttdoc">Prints a page to stderr. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:535</div></div>
<div class="ttc" id="structos__event_html"><div class="ttname"><a href="structos__event.html">os_event</a></div><div class="ttdoc">InnoDB condition variable. </div><div class="ttdef"><b>Definition:</b> os0event.cc:66</div></div>
<div class="ttc" id="classbuf__page__t_html_af0a047f0e5e46768834a176d31651085"><div class="ttname"><a href="classbuf__page__t.html#af0a047f0e5e46768834a176d31651085">buf_page_t::zip</a></div><div class="ttdeci">page_zip_des_t zip</div><div class="ttdoc">compressed page; zip.data (but not the data it points to) is protected by buf_pool-&gt;zip_mutex; state ...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1205</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html"><div class="ttname"><a href="structbuf__pool__stat__t.html">buf_pool_stat_t</a></div><div class="ttdoc">The buffer pool statistics structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1678</div></div>
<div class="ttc" id="buf0buf_8h_html_a84c4d4c43ce1afcad91d6011e73f9b32"><div class="ttname"><a href="buf0buf_8h.html#a84c4d4c43ce1afcad91d6011e73f9b32">buf_get_withdraw_depth</a></div><div class="ttdeci">UNIV_INLINE ulint buf_get_withdraw_depth(buf_pool_t *buf_pool)</div><div class="ttdoc">Return how many more pages must be added to the withdraw list to reach the withdraw target of the cur...</div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8aa0d31b0fc25c2381e6f6d59e7eb671f7c"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa0d31b0fc25c2381e6f6d59e7eb671f7c">BUF_BLOCK_NOT_USED</a></div><div class="ttdoc">is in the free list; must be after the BUF_BLOCK_ZIP_ constants for compressed-only pages ...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:136</div></div>
<div class="ttc" id="mach0data_8h_html_acfbcf3ef65b1138bd0d9c3abf2594c2a"><div class="ttname"><a href="mach0data_8h.html#acfbcf3ef65b1138bd0d9c3abf2594c2a">mach_read_from_4</a></div><div class="ttdeci">UNIV_INLINE uint32_t mach_read_from_4(const byte *b)</div><div class="ttdoc">The following function is used to fetch data from 4 consecutive bytes. </div></div>
<div class="ttc" id="buf0types_8h_html_a7b34944f1921a4bf7c1a28abfb86d73c"><div class="ttname"><a href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73c">buf_flush_t</a></div><div class="ttdeci">buf_flush_t</div><div class="ttdoc">Flags for flush types. </div><div class="ttdef"><b>Definition:</b> buf0types.h:65</div></div>
<div class="ttc" id="structbuf__pool__t_html_a1d825ac141e650cd211452c45e3f394f"><div class="ttname"><a href="structbuf__pool__t.html#a1d825ac141e650cd211452c45e3f394f">buf_pool_t::old_stat</a></div><div class="ttdeci">buf_pool_stat_t old_stat</div><div class="ttdoc">old statistics </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1845</div></div>
<div class="ttc" id="buf0buf_8h_html_a5df3bda5bcc128a66ddb88607f7aa7fc"><div class="ttname"><a href="buf0buf_8h.html#a5df3bda5bcc128a66ddb88607f7aa7fc">buf_page_get_newest_modification</a></div><div class="ttdeci">UNIV_INLINE lsn_t buf_page_get_newest_modification(const buf_page_t *bpage)</div><div class="ttdoc">Gets the youngest modification log sequence number for a frame. </div></div>
<div class="ttc" id="structCheckInFreeList_html_af98eebbeca800a9f93108d5413f37c2d"><div class="ttname"><a href="structCheckInFreeList.html#af98eebbeca800a9f93108d5413f37c2d">CheckInFreeList::operator()</a></div><div class="ttdeci">void operator()(const buf_page_t *elem) const</div><div class="ttdef"><b>Definition:</b> buf0buf.h:2180</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a618723c1d905c2ab4a82cbe0ef6a4453"><div class="ttname"><a href="structbuf__pool__info__t.html#a618723c1d905c2ab4a82cbe0ef6a4453">buf_pool_info_t::n_ra_pages_evicted</a></div><div class="ttdeci">ulint n_ra_pages_evicted</div><div class="ttdoc">buf_pool-&gt;n_ra_pages_evicted, number of readahead pages evicted without access </div><div class="ttdef"><b>Definition:</b> buf0buf.h:180</div></div>
<div class="ttc" id="buf0buf_8h_html_a3c62e03b3e645bd91b960dcfcc4cabc0"><div class="ttname"><a href="buf0buf_8h.html#a3c62e03b3e645bd91b960dcfcc4cabc0">buf_block_get_lock_hash_val</a></div><div class="ttdeci">UNIV_INLINE ulint buf_block_get_lock_hash_val(const buf_block_t *block)</div><div class="ttdoc">Gets the hash value of a block. </div></div>
<div class="ttc" id="buf0buf_8h_html_a499d41dc7d50849f883c2b06c07dbb02"><div class="ttname"><a href="buf0buf_8h.html#a499d41dc7d50849f883c2b06c07dbb02">buf_pool_from_block</a></div><div class="ttdeci">UNIV_INLINE buf_pool_t * buf_pool_from_block(const buf_block_t *block)</div><div class="ttdoc">Returns the buffer pool instance given a block instance. </div></div>
<div class="ttc" id="buf0buf_8h_html_a7c0cbe211bba9dba91be1e38e584e18f"><div class="ttname"><a href="buf0buf_8h.html#a7c0cbe211bba9dba91be1e38e584e18f">buf_is_block_in_instance</a></div><div class="ttdeci">bool buf_is_block_in_instance(const buf_pool_t *buf_pool, const buf_block_t *ptr)</div><div class="ttdoc">Find out if a block pointer points into one of currently used chunks of the buffer pool...</div><div class="ttdef"><b>Definition:</b> buf0buf.cc:3331</div></div>
<div class="ttc" id="structbuf__pool__stat__t_html_ae1f31d541e765c8b92a7d9a1654521e8"><div class="ttname"><a href="structbuf__pool__stat__t.html#ae1f31d541e765c8b92a7d9a1654521e8">buf_pool_stat_t::n_ra_pages_read</a></div><div class="ttdeci">uint64_t n_ra_pages_read</div><div class="ttdoc">Number of pages read in as part of read ahead. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1699</div></div>
<div class="ttc" id="buf0buf_8h_html_ab5fa041692f236bcd8e2fd5e0a575fbc"><div class="ttname"><a href="buf0buf_8h.html#ab5fa041692f236bcd8e2fd5e0a575fbc">buf_validate</a></div><div class="ttdeci">ibool buf_validate(void)</div><div class="ttdoc">Validates the buffer pool data structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5649</div></div>
<div class="ttc" id="fil0types_8h_html_a21e45de3e62f010649a911f8027cfa4e"><div class="ttname"><a href="fil0types_8h.html#a21e45de3e62f010649a911f8027cfa4e">FIL_PAGE_TYPE</a></div><div class="ttdeci">#define FIL_PAGE_TYPE</div><div class="ttdoc">file page type: FIL_PAGE_INDEX,..., 2 bytes. </div><div class="ttdef"><b>Definition:</b> fil0types.h:75</div></div>
<div class="ttc" id="namespacefile_html"><div class="ttname"><a href="namespacefile.html">file</a></div><div class="ttdef"><b>Definition:</b> os0file.h:85</div></div>
<div class="ttc" id="classbuf__page__t_html_a55b0e20a982d280278d5d84a2800658b"><div class="ttname"><a href="classbuf__page__t.html#a55b0e20a982d280278d5d84a2800658b">buf_page_t::in_zip_hash</a></div><div class="ttdeci">bool in_zip_hash</div><div class="ttdoc">TRUE if in buf_pool-&gt;zip_hash. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1222</div></div>
<div class="ttc" id="structbuf__pool__t_html_ab46d7942520722ff424b9f39d711ec68"><div class="ttname"><a href="structbuf__pool__t.html#ab46d7942520722ff424b9f39d711ec68">buf_pool_t::n_pend_reads</a></div><div class="ttdeci">ulint n_pend_reads</div><div class="ttdoc">number of pending read operations. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1830</div></div>
<div class="ttc" id="classpage__id__t_html_ae5bfc6c97828e076a14cc8f2603476e1"><div class="ttname"><a href="classpage__id__t.html#ae5bfc6c97828e076a14cc8f2603476e1">page_id_t::page_no</a></div><div class="ttdeci">page_no_t page_no() const</div><div class="ttdoc">Retrieve the page number. </div><div class="ttdef"><b>Definition:</b> buf0types.h:194</div></div>
<div class="ttc" id="classLRUItr_html_acf8e5a869d241c48dbbd836c05f70e05"><div class="ttname"><a href="classLRUItr.html#acf8e5a869d241c48dbbd836c05f70e05">LRUItr::LRUItr</a></div><div class="ttdeci">LRUItr(const buf_pool_t *buf_pool, const ib_mutex_t *mutex)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1644</div></div>
<div class="ttc" id="buf0buf_8h_html_aa6098ccc0d0f4a65b3bdfcb0d430ba46"><div class="ttname"><a href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46">buf_page_print_flags</a></div><div class="ttdeci">buf_page_print_flags</div><div class="ttdef"><b>Definition:</b> buf0buf.h:677</div></div>
<div class="ttc" id="buf0buf_8h_html_adbbea556516137bbb04568f60d7811e3"><div class="ttname"><a href="buf0buf_8h.html#adbbea556516137bbb04568f60d7811e3">buf_block_alloc</a></div><div class="ttdeci">buf_block_t * buf_block_alloc(buf_pool_t *buf_pool)</div><div class="ttdoc">Allocates a buffer block. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:506</div></div>
<div class="ttc" id="structbuf__block__t_html_a9a2fe504c95e66fee175149cc7943b05"><div class="ttname"><a href="structbuf__block__t.html#a9a2fe504c95e66fee175149cc7943b05">buf_block_t::lock_hash_val</a></div><div class="ttdeci">unsigned lock_hash_val</div><div class="ttdoc">hashed value of the page address in the record lock hash table; protected by buf_block_t::lock (or bu...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1357</div></div>
<div class="ttc" id="structib__rbt__t_html"><div class="ttname"><a href="structib__rbt__t.html">ib_rbt_t</a></div><div class="ttdoc">Red black tree instance. </div><div class="ttdef"><b>Definition:</b> ut0rbt.h:74</div></div>
<div class="ttc" id="buf0buf_8h_html_abb6664a53292fe81dc48dae70f935fe7"><div class="ttname"><a href="buf0buf_8h.html#abb6664a53292fe81dc48dae70f935fe7">buf_block_get_io_fix_unlocked</a></div><div class="ttdeci">UNIV_INLINE buf_io_fix buf_block_get_io_fix_unlocked(const buf_block_t *block)</div><div class="ttdoc">Gets the io_fix state of a buffer block. </div></div>
<div class="ttc" id="classbuf__page__t_html_a55b9e28dcd4b2be689581e5e1b29cad6"><div class="ttname"><a href="classbuf__page__t.html#a55b9e28dcd4b2be689581e5e1b29cad6">buf_page_t::in_free_list</a></div><div class="ttdeci">bool in_free_list</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1261</div></div>
<div class="ttc" id="buf0buf_8h_html_a10701cd6691bc47c29bf117375fccc14"><div class="ttname"><a href="buf0buf_8h.html#a10701cd6691bc47c29bf117375fccc14">buf_get_n_pending_read_ios</a></div><div class="ttdeci">ulint buf_get_n_pending_read_ios(void)</div><div class="ttdoc">Returns the number of pending buf pool read ios. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:5865</div></div>
<div class="ttc" id="structbuf__pool__t_html_ac48e5a71d543c485fbc2ab315a7a4eef"><div class="ttname"><a href="structbuf__pool__t.html#ac48e5a71d543c485fbc2ab315a7a4eef">buf_pool_t::curr_size</a></div><div class="ttdeci">ulint curr_size</div><div class="ttdoc">current pool size in pages </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1813</div></div>
<div class="ttc" id="structbuf__block__t_html_a1fdae1d22204e98f3a6ae31892020e0a"><div class="ttname"><a href="structbuf__block__t.html#a1fdae1d22204e98f3a6ae31892020e0a">buf_block_t::get_page_type</a></div><div class="ttdeci">page_type_t get_page_type() const</div><div class="ttdoc">Get the page type of the current buffer block. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1506</div></div>
<div class="ttc" id="structbuf__block__t_html_a7d009e6bec069b5e7be12b387032b23c"><div class="ttname"><a href="structbuf__block__t.html#a7d009e6bec069b5e7be12b387032b23c">buf_block_t::in_unzip_LRU_list</a></div><div class="ttdeci">bool in_unzip_LRU_list</div><div class="ttdoc">TRUE if the page is in the decompressed LRU list; used in debugging. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1349</div></div>
<div class="ttc" id="ut0mutex_8h_html_a7eccf8a96f24ab7f4012bb203640cf17"><div class="ttname"><a href="ut0mutex_8h.html#a7eccf8a96f24ab7f4012bb203640cf17">mutex_own</a></div><div class="ttdeci">#define mutex_own(M)</div><div class="ttdoc">Checks that the current thread owns the mutex. </div><div class="ttdef"><b>Definition:</b> ut0mutex.h:156</div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7a1e23852820b9154316c7c06e2b7ba051"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a1e23852820b9154316c7c06e2b7ba051">Page_fetch::NORMAL</a></div><div class="ttdoc">Get always. </div></div>
<div class="ttc" id="buf0buf_8h_html_a9ce975aae00f09fe4f8d97d0b5fd2d8f"><div class="ttname"><a href="buf0buf_8h.html#a9ce975aae00f09fe4f8d97d0b5fd2d8f">buf_page_make_old</a></div><div class="ttdeci">void buf_page_make_old(buf_page_t *bpage)</div><div class="ttdoc">Moved a page to the end of the buffer pool LRU list so that it can be flushed out at the earliest...</div><div class="ttdef"><b>Definition:</b> buf0buf.cc:2962</div></div>
<div class="ttc" id="hp__test1_8cc_html_a6eec09a91807e20d7b3d6ef3da594067"><div class="ttname"><a href="hp__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a></div><div class="ttdeci">static int flags[50]</div><div class="ttdef"><b>Definition:</b> hp_test1.cc:39</div></div>
<div class="ttc" id="hash0hash_8h_html"><div class="ttname"><a href="hash0hash_8h.html">hash0hash.h</a></div><div class="ttdoc">The simple hash table utility. </div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="structbuf__pools__list__size__t_html_aac196eec455699d85ece8256d538756c"><div class="ttname"><a href="structbuf__pools__list__size__t.html#aac196eec455699d85ece8256d538756c">buf_pools_list_size_t::unzip_LRU_bytes</a></div><div class="ttdeci">ulint unzip_LRU_bytes</div><div class="ttdoc">unzip_LRU size in bytes </div><div class="ttdef"><b>Definition:</b> buf0buf.h:225</div></div>
<div class="ttc" id="buf0buf_8h_html_aa6098ccc0d0f4a65b3bdfcb0d430ba46a4de99c6b59acbd5c2aa46fd0632cb281"><div class="ttname"><a href="buf0buf_8h.html#aa6098ccc0d0f4a65b3bdfcb0d430ba46a4de99c6b59acbd5c2aa46fd0632cb281">BUF_PAGE_PRINT_NO_CRASH</a></div><div class="ttdoc">Do not crash at the end of buf_page_print(). </div><div class="ttdef"><b>Definition:</b> buf0buf.h:679</div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7adfb541c10aa7ca324ca213508638d3f1"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7adfb541c10aa7ca324ca213508638d3f1">Page_fetch::POSSIBLY_FREED</a></div><div class="ttdoc">Like Page_fetch::NORMAL, but do not mind if the file page has been freed. </div></div>
<div class="ttc" id="structmtr__t_html"><div class="ttname"><a href="structmtr__t.html">mtr_t</a></div><div class="ttdoc">Mini-transaction handle and buffer. </div><div class="ttdef"><b>Definition:</b> mtr0mtr.h:169</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_af26f77901edfe22526c2fb123afcb5d3"><div class="ttname"><a href="structbuf__pool__info__t.html#af26f77901edfe22526c2fb123afcb5d3">buf_pool_info_t::n_pages_written</a></div><div class="ttdeci">ulint n_pages_written</div><div class="ttdoc">buf_pool-&gt;n_pages_written </div><div class="ttdef"><b>Definition:</b> buf0buf.h:174</div></div>
<div class="ttc" id="lock0types_8h_html_acff05fa7dd69832a04f93b92db1e0013"><div class="ttname"><a href="lock0types_8h.html#acff05fa7dd69832a04f93b92db1e0013">lock_mode</a></div><div class="ttdeci">lock_mode</div><div class="ttdef"><b>Definition:</b> lock0types.h:51</div></div>
<div class="ttc" id="buf0buf_8h_html_a9e8fef965c556246b887497dca782d2a"><div class="ttname"><a href="buf0buf_8h.html#a9e8fef965c556246b887497dca782d2a">buf_page_is_accessed</a></div><div class="ttdeci">UNIV_INLINE unsigned buf_page_is_accessed(const buf_page_t *bpage)</div><div class="ttdoc">Determine the time of first access of a block in the buffer pool. </div></div>
<div class="ttc" id="structbuf__block__t_html_a9cec978d7812da8c2bc0b832f1ae390e"><div class="ttname"><a href="structbuf__block__t.html#a9cec978d7812da8c2bc0b832f1ae390e">buf_block_t::get_page_no</a></div><div class="ttdeci">page_no_t get_page_no() const</div><div class="ttdoc">Get the page number of the current buffer block. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1490</div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7ae0740abfbc61bc2be0bfa78af61106ae"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7ae0740abfbc61bc2be0bfa78af61106ae">Page_fetch::SCAN</a></div><div class="ttdoc">Same as NORMAL, but hint that the fetch is part of a large scan. </div></div>
<div class="ttc" id="structbuf__pool__t_html_ae0aed6254f53462f6e6c406dae78c1f2"><div class="ttname"><a href="structbuf__pool__t.html#ae0aed6254f53462f6e6c406dae78c1f2">buf_pool_t::freed_page_clock</a></div><div class="ttdeci">ulint freed_page_clock</div><div class="ttdoc">a sequence number used to count the number of buffer blocks removed from the end of the LRU list; NOT...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1898</div></div>
<div class="ttc" id="classbuf__page__t_html_a726a13d4bcfb5ba18cee636c566cd2c5"><div class="ttname"><a href="classbuf__page__t.html#a726a13d4bcfb5ba18cee636c566cd2c5">buf_page_t::buf_fix_count</a></div><div class="ttdeci">uint32_t buf_fix_count</div><div class="ttdoc">Count of how manyfold this block is currently bufferfixed. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1189</div></div>
<div class="ttc" id="buf0buf_8h_html_a451851befdfc82765a869314cdd073e6"><div class="ttname"><a href="buf0buf_8h.html#a451851befdfc82765a869314cdd073e6">buf_get_total_stat</a></div><div class="ttdeci">void buf_get_total_stat(buf_pool_stat_t *tot_stat)</div><div class="ttdoc">Get total buffer pool statistics. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:480</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a29d0b194fe5a30a83bb9af60722e7c68"><div class="ttname"><a href="structbuf__pool__info__t.html#a29d0b194fe5a30a83bb9af60722e7c68">buf_pool_info_t::pages_written_rate</a></div><div class="ttdeci">double pages_written_rate</div><div class="ttdoc">num of pages written per second </div><div class="ttdef"><b>Definition:</b> buf0buf.h:193</div></div>
<div class="ttc" id="buf0buf_8h_html_ab8edfb8ad98167f82518879ade67dc8aa21e9fab74d2c9e64609dd53570bdfaec"><div class="ttname"><a href="buf0buf_8h.html#ab8edfb8ad98167f82518879ade67dc8aa21e9fab74d2c9e64609dd53570bdfaec">BUF_BLOCK_ZIP_PAGE</a></div><div class="ttdoc">contains a clean compressed page </div><div class="ttdef"><b>Definition:</b> buf0buf.h:130</div></div>
<div class="ttc" id="structbuf__pool__t_html_a7f98404f9e6016d7c78bafbb01d89657"><div class="ttname"><a href="structbuf__pool__t.html#a7f98404f9e6016d7c78bafbb01d89657">buf_pool_t::LRU_old</a></div><div class="ttdeci">buf_page_t * LRU_old</div><div class="ttdoc">pointer to the about LRU_old_ratio/BUF_LRU_OLD_RATIO_DIV oldest blocks in the LRU list; NULL if LRU l...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1958</div></div>
<div class="ttc" id="structbuf__pool__t_html_aa6b6ff232ef55a6ccfedd3b5ec94bc6d"><div class="ttname"><a href="structbuf__pool__t.html#aa6b6ff232ef55a6ccfedd3b5ec94bc6d">buf_pool_t::stat</a></div><div class="ttdeci">buf_pool_stat_t stat</div><div class="ttdoc">current statistics </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1844</div></div>
<div class="ttc" id="innodb__utility_8h_html_a496a8f8646bff5c74c18ee0c04134b6d"><div class="ttname"><a href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a></div><div class="ttdeci">#define UT_LIST_NODE_T(TYPE)</div><div class="ttdef"><b>Definition:</b> innodb_utility.h:40</div></div>
<div class="ttc" id="structbuf__block__t_html_a05158d5f9b4078d10a38e9a3edc628fa"><div class="ttname"><a href="structbuf__block__t.html#a05158d5f9b4078d10a38e9a3edc628fa">buf_block_t::debug_latch</a></div><div class="ttdeci">rw_lock_t debug_latch</div><div class="ttdoc">In the debug version, each thread which bufferfixes the block acquires an s-latch here; so we can use...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1474</div></div>
<div class="ttc" id="structbuf__block__t_html_a423fa57d7af8ae1a362d5c33a788f063"><div class="ttname"><a href="structbuf__block__t.html#a423fa57d7af8ae1a362d5c33a788f063">buf_block_t::in_withdraw_list</a></div><div class="ttdeci">bool in_withdraw_list</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1351</div></div>
<div class="ttc" id="buf0buf_8h_html_a58d8810e5f830e55bdf31da6b88972ea"><div class="ttname"><a href="buf0buf_8h.html#a58d8810e5f830e55bdf31da6b88972ea">buf_block_free</a></div><div class="ttdeci">UNIV_INLINE void buf_block_free(buf_block_t *block)</div><div class="ttdoc">Frees a buffer block which does not contain a file page. </div></div>
<div class="ttc" id="structbuf__pool__t_html_a9885e7719ec8de34ee9860ee1a662f54"><div class="ttname"><a href="structbuf__pool__t.html#a9885e7719ec8de34ee9860ee1a662f54">buf_pool_t::flush_rbt</a></div><div class="ttdeci">ib_rbt_t * flush_rbt</div><div class="ttdoc">a red-black tree is used exclusively during recovery to speed up insertions in the flush_list...</div><div class="ttdef"><b>Definition:</b> buf0buf.h:1884</div></div>
<div class="ttc" id="buf0types_8h_html_a12e6e65b485343049745e6ec5d7513c6"><div class="ttname"><a href="buf0types_8h.html#a12e6e65b485343049745e6ec5d7513c6">BufPoolZipMutex</a></div><div class="ttdeci">BPageMutex BufPoolZipMutex</div><div class="ttdef"><b>Definition:</b> buf0types.h:152</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a3ea9da225a971241f329dd7b1528c894"><div class="ttname"><a href="structbuf__pool__info__t.html#a3ea9da225a971241f329dd7b1528c894">buf_pool_info_t::old_lru_len</a></div><div class="ttdeci">ulint old_lru_len</div><div class="ttdoc">buf_pool-&gt;LRU_old_len </div><div class="ttdef"><b>Definition:</b> buf0buf.h:156</div></div>
<div class="ttc" id="mach0data_8h_html_ac9eed1c0fd6bf1f7edd38bebdea3fd13"><div class="ttname"><a href="mach0data_8h.html#ac9eed1c0fd6bf1f7edd38bebdea3fd13">mach_read_from_2</a></div><div class="ttdeci">UNIV_INLINE uint16_t mach_read_from_2(const byte *b)</div><div class="ttdoc">The following function is used to fetch data from 2 consecutive bytes. </div></div>
<div class="ttc" id="classbuf__page__t_html_ab32d7bdf770b44df9b2f22893ada9e2f"><div class="ttname"><a href="classbuf__page__t.html#ab32d7bdf770b44df9b2f22893ada9e2f">buf_page_t::buf_pool_index</a></div><div class="ttdeci">unsigned buf_pool_index</div><div class="ttdoc">index number of the buffer pool that this block belongs to </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1202</div></div>
<div class="ttc" id="buf0buf_8h_html_aa4cbbcf6846efae5345f9e560e02fe1c"><div class="ttname"><a href="buf0buf_8h.html#aa4cbbcf6846efae5345f9e560e02fe1c">buf_must_be_all_freed</a></div><div class="ttdeci">void buf_must_be_all_freed(void)</div><div class="ttdoc">Assert that all file pages in the buffer are in a replaceable state. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:6218</div></div>
<div class="ttc" id="buf0buf_8h_html_a0056c362020ff9e840fb48cb94c3cdbaaea4620022ddce35b312d7b4b01986f7a"><div class="ttname"><a href="buf0buf_8h.html#a0056c362020ff9e840fb48cb94c3cdbaaea4620022ddce35b312d7b4b01986f7a">Cache_hint::KEEP_OLD</a></div><div class="ttdoc">Preserve the current LRU position of the block. </div></div>
<div class="ttc" id="structbuf__pool__info__t_html_ad775646d7f5f4488e10b49083d028c7b"><div class="ttname"><a href="structbuf__pool__info__t.html#ad775646d7f5f4488e10b49083d028c7b">buf_pool_info_t::flush_list_len</a></div><div class="ttdeci">ulint flush_list_len</div><div class="ttdoc">Length of buf_pool-&gt;flush_list. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:158</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_ab4653da9cbf426b09069de812963d3da"><div class="ttname"><a href="structbuf__pool__info__t.html#ab4653da9cbf426b09069de812963d3da">buf_pool_info_t::not_young_making_delta</a></div><div class="ttdeci">ulint not_young_making_delta</div><div class="ttdoc">num of pages not make young since last printout </div><div class="ttdef"><b>Definition:</b> buf0buf.h:198</div></div>
<div class="ttc" id="structbuf__pool__t_html_a261df28273a07d8e17e6236267c7dfde"><div class="ttname"><a href="structbuf__pool__t.html#a261df28273a07d8e17e6236267c7dfde">buf_pool_t::buddy_n_frames</a></div><div class="ttdeci">ulint buddy_n_frames</div><div class="ttdoc">Number of frames allocated from the buffer pool to the buddy system. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1801</div></div>
<div class="ttc" id="structbuf__pool__info__t_html_a1bf0de2bcade3fa6ffbadb1a5a3b2904"><div class="ttname"><a href="structbuf__pool__info__t.html#a1bf0de2bcade3fa6ffbadb1a5a3b2904">buf_pool_info_t::unzip_cur</a></div><div class="ttdeci">ulint unzip_cur</div><div class="ttdoc">buf_LRU_stat_cur.unzip, num pages decompressed in current interval </div><div class="ttdef"><b>Definition:</b> buf0buf.h:217</div></div>
<div class="ttc" id="buf0buf_8h_html_aa4ef74186b9c9937976a7d022cfa12c7a04e9d1744b4cb952e0c2021136069e86"><div class="ttname"><a href="buf0buf_8h.html#aa4ef74186b9c9937976a7d022cfa12c7a04e9d1744b4cb952e0c2021136069e86">Page_fetch::NO_LATCH</a></div><div class="ttdoc">get and bufferfix, but set no latch; we have separated this case, because it is error-prone programmi...</div></div>
<div class="ttc" id="classbuf__page__t_html_acdfb57413edcee5faf56938a2c48ecfb"><div class="ttname"><a href="classbuf__page__t.html#acdfb57413edcee5faf56938a2c48ecfb">buf_page_t::state</a></div><div class="ttdeci">buf_page_state state</div><div class="ttdoc">Block state. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1195</div></div>
<div class="ttc" id="buf0buf_8h_html_a23372a7fc86173052a9bfe927c9312b4"><div class="ttname"><a href="buf0buf_8h.html#a23372a7fc86173052a9bfe927c9312b4">buf_pool_get_curr_size</a></div><div class="ttdeci">UNIV_INLINE ulint buf_pool_get_curr_size(void)</div><div class="ttdoc">Gets the current size of buffer buf_pool in bytes. </div></div>
<div class="ttc" id="structbuf__pool__info__t_html_af0ce81513faf0bbc14bbed5ba865783f"><div class="ttname"><a href="structbuf__pool__info__t.html#af0ce81513faf0bbc14bbed5ba865783f">buf_pool_info_t::pages_read_rate</a></div><div class="ttdeci">double pages_read_rate</div><div class="ttdoc">num of pages read per second </div><div class="ttdef"><b>Definition:</b> buf0buf.h:191</div></div>
<div class="ttc" id="structbuf__pool__t_html_ab27b834468362ae6517566bc23d4db12"><div class="ttname"><a href="structbuf__pool__t.html#ab27b834468362ae6517566bc23d4db12">buf_pool_t::read_ahead_area</a></div><div class="ttdeci">page_no_t read_ahead_area</div><div class="ttdoc">size in pages of the area which the read-ahead algorithms read if invoked </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1815</div></div>
<div class="ttc" id="namespaceCounter_html_a6129f96f99b4dc9358a7efaa40f84c30"><div class="ttname"><a href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">Counter::copy</a></div><div class="ttdeci">void copy(Shards&lt; COUNT &gt; &amp;dst, const Shards&lt; COUNT &gt; &amp;src) noexcept</div><div class="ttdoc">Copy the counters, overwrite destination. </div><div class="ttdef"><b>Definition:</b> ut0counter.h:353</div></div>
<div class="ttc" id="mtr0types_8h_html"><div class="ttname"><a href="mtr0types_8h.html">mtr0types.h</a></div><div class="ttdoc">Mini-transaction buffer global types. </div></div>
<div class="ttc" id="structbuf__block__t_html_ae1feaf77a181565201cf1e76ae69a890"><div class="ttname"><a href="structbuf__block__t.html#ae1feaf77a181565201cf1e76ae69a890">buf_block_t::curr_n_bytes</a></div><div class="ttdeci">unsigned curr_n_bytes</div><div class="ttdoc">number of bytes in hash indexing </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1451</div></div>
<div class="ttc" id="structbuf__pool__t_html_a85b353f8c15266560701a4e4577c4940"><div class="ttname"><a href="structbuf__pool__t.html#a85b353f8c15266560701a4e4577c4940">buf_pool_t::watch</a></div><div class="ttdeci">buf_page_t * watch</div><div class="ttdoc">Sentinel records for buffer pool watches. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1991</div></div>
<div class="ttc" id="structbuf__pools__list__size__t_html"><div class="ttname"><a href="structbuf__pools__list__size__t.html">buf_pools_list_size_t</a></div><div class="ttdoc">The occupied bytes of lists in all buffer pools. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:223</div></div>
<div class="ttc" id="buf0buf_8h_html_aafc6d1173140eb14d5ca4a83a62d0f4a"><div class="ttname"><a href="buf0buf_8h.html#aafc6d1173140eb14d5ca4a83a62d0f4a">buf_page_set_sticky</a></div><div class="ttdeci">UNIV_INLINE void buf_page_set_sticky(buf_page_t *bpage)</div><div class="ttdoc">Makes a block sticky. </div></div>
<div class="ttc" id="structbuf__pool__t_html_af82b0a923041e5ddad344c8f1d177c14"><div class="ttname"><a href="structbuf__pool__t.html#af82b0a923041e5ddad344c8f1d177c14">buf_pool_t::zip_hash_mutex</a></div><div class="ttdeci">BufListMutex zip_hash_mutex</div><div class="ttdoc">zip_hash mutex </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1788</div></div>
<div class="ttc" id="buf0buf_8h_html_a42bed44f93d9f9850ad30d4900164174"><div class="ttname"><a href="buf0buf_8h.html#a42bed44f93d9f9850ad30d4900164174">buf_pool_clear_hash_index</a></div><div class="ttdeci">void buf_pool_clear_hash_index(void)</div><div class="ttdoc">Clears the adaptive hash index on all pages in the buffer pool. </div><div class="ttdef"><b>Definition:</b> buf0buf.cc:2519</div></div>
<div class="ttc" id="structbuf__pool__t_html_a96040907b997b91c51feda9ba0b87d1f"><div class="ttname"><a href="structbuf__pool__t.html#a96040907b997b91c51feda9ba0b87d1f">buf_pool_t::flush_state_mutex</a></div><div class="ttdeci">ib_mutex_t flush_state_mutex</div><div class="ttdoc">Flush state protection mutex. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1789</div></div>
<div class="ttc" id="structdict__index__t_html"><div class="ttname"><a href="structdict__index__t.html">dict_index_t</a></div><div class="ttdoc">Data structure for an index. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:886</div></div>
<div class="ttc" id="structbuf__buddy__stat__t_html"><div class="ttname"><a href="structbuf__buddy__stat__t.html">buf_buddy_stat_t</a></div><div class="ttdoc">Statistics of buddy blocks of a given size. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1760</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="buf0buf_8h.html">buf0buf.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
