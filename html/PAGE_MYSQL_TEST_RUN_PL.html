<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: mysql-test-run.pl — Run MySQL Test Suite</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('PAGE_MYSQL_TEST_RUN_PL.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">mysql-test-run.pl — Run MySQL Test Suite </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> Perl script is the main application used to run the MySQL test suite.</p>
<p>It invokes <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> to run individual test cases.</p>
<p>Invoke <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> in the <b>mysql-test</b> directory like this:</p>
<pre class="fragment">shell&gt; mysql-test-run.pl [options] [test_name] ...
</pre><p>Each <b>test_name</b> argument names a test case. The test case file that corresponds to the test name is <b>t/<em>test_name</em>.test</b>.</p>
<p>For each <b>test_name</b> argument, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> runs the named test case. With no <b>test_name</b> arguments, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> runs all <b>.test</b> files in the <b>t</b> subdirectory.</p>
<p>If no suffix is given for the test name, a suffix of <b>.test</b> is assumed. Any leading path name is ignored. These commands are equivalent:</p>
<pre class="fragment">shell&gt; mysql-test-run.pl mytest
shell&gt; mysql-test-run.pl mytest.test
shell&gt; mysql-test-run.pl t/mytest.test
</pre><p>A suite name can be given as part of the test name. That is, the syntax for naming a test is:</p>
<pre class="fragment">[suite_name.]test_name[.suffix]
</pre><p>If a suite name is given, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> looks in that suite for the test. The test file corresponding to a test named <b>suite_name.test_name</b> is found in <b>suite/<em>suite_name</em>/t/<em>test_name</em>.test</b>. There is also an implicit suite name <b>main</b> for the tests in the top <b>t</b> directory. With no suite name, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> looks in the default list of suites for a match and runs the test in any suites where it finds the test. Suppose that the default suite list is <b>main</b>, <b>binlog</b>, <b>rpl</b>, and that a test <b>mytest.test</b> exists in the <b>main</b> and <b>rpl</b> suites. With an argument of <b>mytest</b> or <b>mytest.test</b>, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> will run <b>mytest.test</b> from the <b>main</b> and <b>rpl</b> suites.</p>
<p>To run a family of test cases for which the names share a common prefix, use the <b><code>--do-test</code>=<em>prefix</em></b> option. For example, <b><code>--do-test</code>=rpl</b> runs the replication tests (test cases that have names beginning with <b>rpl</b>). <b><code>--skip-test</code></b> has the opposite effect of skipping test cases for which the names share a common prefix.</p>
<p>The argument for the <b><code>--do-test</code></b> and <b><code>--skip-test</code></b> options also allows more flexible specification of which tests to perform or skip. If the argument contains a pattern metacharacter other than a lone period, it is interpreted as a Perl regular expression and applies to test names that match the pattern. If the argument contains a lone period or does not contain any pattern metacharacters, it is interpreted the same way as previously and matches test names that begin with the argument value. For example, <b><code>--do-test</code>=testa</b> matches tests that begin with testa, <b><code>--do-test</code>=main.testa</b> matches tests in the <b>main</b> test suite that begin with <b>testa</b>, and <b><code>--do-test</code>=main.*testa</b> matches test names that contain <b>main</b> followed by <b>testa</b> with anything in between. In the latter case, the pattern match is not anchored to the beginning of the test name, so it also matches names such as <b>xmainytesta</b>.</p>
<p>It is also possible to put a list of test names in a file and have <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> run those tests, using the option <b><code>--do-test-list</code>=file</b>. The tests should be listed one per line in the file. A line beginning with <b>#</b> indicates a comment and is ignored. Similary an empty line in the file is also ignored.</p>
<p><a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> also supports a <b><code>--do-suite</code></b> option, which is similar to <b><code>--do-test</code></b> but permits specifying entire suites of tests to run.</p>
<p>To perform setup prior to running tests, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> needs to invoke <b>mysqld</b> with the <b><code>--initialize</code></b> and <b><code>--skip-grant-tables</code></b> options. If MySQL was built with the compiler flag <b>-DDISABLE_GRANT_OPTIONS</b>, then <b><code>--initialize</code></b>, <b><code>--skip-grant-tables</code></b>, and <b><code>--init-file</code></b> will be disabled. To handle this, set the <b>MYSQLD_BOOTSTRAP</b> environment variable to the full path name of a server that has all options enabled. <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> will use that server to perform setup; it is not used to run the tests.</p>
<p>The <b>init_file</b> test will fail if <b><code>--init-file</code></b> is disabled. This is an expected failure in this case.</p>
<p>To run <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> on Windows, you'll need either Cygwin or ActiveState Perl to run it. You may also need to install the modules required by the script. To run the test script, change location into the <b>mysql-test</b> directory, set the <b>MTR_VS_CONFIG</b> environment variable to the configuration you selected earlier (or use the <b><code>--vs-config</code></b> option), and invoke <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a>. For example (using <b>Cygwin</b> and the <b>bash</b> shell):</p>
<pre class="fragment">shell&gt; cd mysql-test
shell&gt; export MTR_VS_CONFIG=debug
shell&gt; ./mysqltest-run.pl --force --timer
shell&gt; ./mysqltest-run.pl --force --timer --ps-protocol
</pre><p><a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> uses several environment variables. Some of them are listed in the following table. Some of these are set from the outside and used by <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a>, others are set by <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> instead, and may be referred to in tests.</p>
<table class="doxtable">
<tr>
<th>Variable </th><th>Description  </th></tr>
<tr>
<td><code>MTR_BUILD_THREAD</code> </td><td>If set, defines which port number range is used for the server   </td></tr>
<tr>
<td><code>MTR_MAX_PARALLEL</code> </td><td>If set, defines maximum number of parallel threads if <b><code>--parallel</code>=auto</b> is given   </td></tr>
<tr>
<td><code>MTR_MEM</code> </td><td>If set to anything, will run tests with files in "memory" using tmpfs or ramdisk. Not available on Windows. Same as <b><code>--mem</code></b> option   </td></tr>
<tr>
<td><code>MTR_<b>NAME</b>_TIMEOUT</code> </td><td>Setting of a timeout in minutes or seconds, corresponding to command line option <b><code>--name-timeout</code></b>. Avaliable timeout names are <b>TESTCASE</b>, <b>SUITE</b> (both in minutes) and <b>START</b>, <b>SHUTDOWN</b>, <b>CTEST</b> (all in seconds). <b>MTR_CTEST_TIMEOUT</b> is for <b>ctest</b> unit tests.   </td></tr>
<tr>
<td><code>MTR_PARALLEL</code> </td><td>If set, defines number of parallel threads executing tests. Same as <code><code>--parallel</code></code> option   </td></tr>
<tr>
<td><code>MTR_PORT_BASE</code> </td><td>If set, defines which port number range is used for the server   </td></tr>
<tr>
<td><code>MTR_RECORD</code> </td><td>Set to 1 if a MTR run is started with <b><code>--record</code></b> option, 0 otherwise.   </td></tr>
<tr>
<td><code>MTR_UNIQUE_IDS_DIR</code> </td><td>The method in which the free ports are allocated is by maintaining a list under the unique ids directory. In case there are multiple chroot environments on the same host, then the same set of ports may get allocated for all environments, because there will be multiple unique ids directories in different physical locations, but MTR assumes it is the same directory. This will lead to a conflict while reserving ports for the different MTR runs. To avoid this problem, when using chroot environments, <b>MTR_UNIQUE_IDS_DIR</b> environment variable can be set to a common location, so that all the MTR processes will use the same unique ids directory. Users have to make sure this variable is set to the same path on all environments, and that this common path is mounted on all the environments. </td></tr>
<tr>
<td><code>MYSQL_CONFIG_EDITOR</code> </td><td>Path name to <b>mysql_config_editor</b> binary.   </td></tr>
<tr>
<td><code>MYSQL_TEST</code> </td><td>Path name to <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> binary   </td></tr>
<tr>
<td><code>MYSQL_TEST_DIR</code> </td><td>Full path to the <code>mysql-test</code> directory where tests are being run from   </td></tr>
<tr>
<td><code>MYSQL_TEST_LOGIN_FILE</code> </td><td>Path name to login file used by <b>mysql_config_editor</b>. If not set, the default is <b>$HOME/.mylogin.cnf</b>, or <b>%APPDATA%\MySQL\.mylogin.cnf</b> on Windows.   </td></tr>
<tr>
<td><code>MYSQL_TMP_DIR</code> </td><td>Path to temp directory used for temporary files during tests   </td></tr>
<tr>
<td><code>MYSQLD</code> </td><td>Full path to server executable used in tests.   </td></tr>
<tr>
<td><code>MYSQLD_BOOTSTRAP</code> </td><td>Full path name to <b>mysqld</b> that has all options enabled   </td></tr>
<tr>
<td><code>MYSQLD_BOOTSTRAP_CMD</code> </td><td>Full command line used for initial database setup for this test batch   </td></tr>
<tr>
<td><code>MYSQLD_CMD</code> </td><td>Command line for starting server as used in tests, with the minimum set of required arguments.   </td></tr>
<tr>
<td><code>MYSQLTEST_VARDIR</code> </td><td>Path name to the <b>var</b> directory that is used for logs, temporary files, and so forth   </td></tr>
<tr>
<td><code>NUMBER_OF_CPUS</code> </td><td>Defines number of processors.   </td></tr>
<tr>
<td><code>TSAN_OPTIONS</code> </td><td>Path name to a file containing ThreadSanitizer suppressions.   </td></tr>
</table>
<p>The variable <b>MTR_PORT_BASE</b> is a more logical replacement for the original variable <b>MTR_BUILD_THREAD</b>. It gives the actual port number directly (will be rounded down to a multiple of 10). If you use <b>MTR_BUILD_THREAD</b>, the port number is found by multiplying this by 10 and adding 10000.</p>
<p>Tests sometimes rely on certain environment variables being defined. For example, certain tests assume that <b>MYSQL_TEST</b> is defined so that <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> can invoke itself with <b>exec $MYSQL_TEST</b>.</p>
<p>Other tests may refer to the last three variables listed in the preceding table, to locate files to read or write. For example, tests that need to create files will typically put them in <b>$MYSQL_TMP_DIR/file_name</b>.</p>
<p>The variable <b>$MYSQLD_CMD</b> will include any server options added with the <b><code>--mysqld</code></b> option to <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a>, but will not include server options added specifically for the currently running test.</p>
<p><a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> supports the options in the following list. An argument of &ndash; tells <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> not to process any following arguments as options.</p>
<ul>
<li>
<p class="startli"><code><code>--help, -h</code></code></p>
<p>Display a help message and exit. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--big-test</code></code></p>
<p>Allow tests marked as "big" to run. Tests can be thus marked by including the line <b><code>--source</code> include/big_test.inc</b>, and they will only be run if this option is given, or if the environment variable <b>BIG_TEST</b> is set to 1.</p>
<p>This is typically done for tests that take very long to run, or that use very much resources, so that they are not suitable for running as part of a normal test suite run.</p>
<p>If both <b><code>--big-test</code></b> and <b><code>--only-big-tests</code></b> are given, <b><code>--only-big-tests</code></b> is ignored.</p>
<dl class="section note"><dt>Note</dt><dd>This option is enabled by default when test cases are specified on command line. </dd></dl>
</li>
<li>
<p class="startli"><code><code>--boot-dbx</code></code></p>
<p>Run the <b>mysqld</b> server used for bootstrapping the database through the <b>dbx</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--boot-ddd</code></code></p>
<p>Run the <b>mysqld</b> server used for bootstrapping the database through the <b>ddd</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--boot-gdb</code></code></p>
<p>Run the <b>mysqld</b> server used for bootstrapping the database through the <b>gdb</b> debugger.</p>
<p>See also the <b><code>--manual-boot-gdb</code></b> option. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--build-thread</code>=<b>number</b></code></p>
<p>Specify a number to calculate port numbers from. The formula is <b>10 * build_thread + 10000</b>. Instead of a number, it can be set to <b>auto</b>, which is also the default value, in which case <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> will allocate a number unique to this host.</p>
<p>The value (number or <b>auto</b>) can also be set with the <b>MTR_BUILD_THREAD</b> environment variable.</p>
<p>This option is kept for backward compatibility. The more logical <b><code>--port-base</code></b> is recommended instead. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--callgrind</code></code></p>
<p>Instructs <b>valgrind</b> to use <b>callgrind</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--charset-for-testdb</code>=<b>charset_name</b></code></p>
<p>Specify the default character set for the test database. The default value is latin1. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--check-testcases</code></code></p>
<p>Check test cases for side effects. This is done by checking the system state before and after each test case. If there is any difference, the test case is marked as failed because of it.</p>
<p>Similarly, when <b><code>--check-testcases</code></b> option is enabled, MTR does additional check for missing <b>.result</b> file and a test case not having its corresponding <b>.result</b> file is marked as failed.</p>
<p>This check is enabled by default. To disable it, use the <b><code>--nocheck-testcases</code></b> option. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--clean-vardir</code></code></p>
<p>Clean up the <b>var</b> directory with logs and test results etc. after the test run, but only if there were no test failures. This option only has effect if also running with option <b><code>--mem</code></b>. The intent is to alleviate the problem of using up memory for test results, in cases where many different test runs are being done on the same host. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--client-bindir</code>=<b>path</b></code></p>
<p>The path to the directory where client binaries are located. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--client-dbx</code></code></p>
<p>Start <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> in the <b>dbx</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--client-ddd</code></code></p>
<p>Start <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> in the <b>ddd</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--client-debugger</code>=<b>debugger</b></code></p>
<p>Start <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> in the named debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--client-gdb</code></code></p>
<p>Start <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> in the <b>gdb</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--client-libdir</code>=<b>path</b></code></p>
<p>The path to the directory where client libraries are located. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--colored-diff</code></code></p>
<p>Colorize the diff part of the output.</p>
<p>When this option is enabled, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> passes <b><code>--colored-diff</code></b> option to <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>. If colored diff is enabled, <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> uses <b>diff</b> command with <b><code>--color</code>='always'</b> option to print the colored diff.</p>
<dl class="section note"><dt>Note</dt><dd><b><code>--color</code></b> option for <b>diff</b> command is available from <b>GNU diffutils</b> version <b>3.4</b>. </dd></dl>
</li>
<li>
<p class="startli"><code><code>--combination</code>=<b>value</b></code></p>
<p>Extra option to pass to <b>mysqld</b>. The value should consist of a single <b>mysqld</b> option including dashes. This option is similar to <b><code>--mysqld</code></b> but has a different effect. <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> executes multiple test runs, using the options for each instance of <b><code>--combination</code></b> in successive runs. If <b><code>--combination</code></b> is given only once, it has no effect and behaves similar to <b><code>--mysqld</code></b> option.</p>
<p>If a test being run, passes the same <b><code>--mysqld</code></b> option from an opt file which is also passed from <b><code>--combination</code></b>, then that <b><code>--combination</code></b> run is skipped because opt file always takes higher precedence over command line options. The test will just run once using the options provided in the opt file.</p>
<p>For test runs specific to a given test suite, an alternative to the use of <b><code>--combination</code></b> is to create a <b>combinations</b> file in the suite directory. The file should contain a section of options for each test run. See <a class="el" href="PAGE_PASSING_OPTIONS.html">Passing Options from mysql-test-run.pl to mysqld or mysqltest</a>.</p>
<p>For test specific combinations, onc can use <b><em>test_name</em>.combinations</b> file in the test directory. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--comment</code>=<b>str</b></code></p>
<p>Write <b><em>str</em></b> to the output within lines filled with #, as a form of banner. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--compress</code></code></p>
<p>Compress all information sent between the client and the server if both support compression. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--cursor-protocol</code></code></p>
<p>Pass the <b><code>--cursor-protocol</code></b> option to <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> (implies <b><code>--ps-protocol</code></b>). </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--dbx</code></code></p>
<p>Start <b>mysqld</b> in the <b>dbx</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--ddd</code></code></p>
<p>Start <b>mysqld</b> in the <b>ddd</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--debug</code></code></p>
<p>Dump trace output for all clients and servers. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--debugger</code>=<b>debugger</b></code></p>
<p>Start <b>mysqld</b> using the named debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--debug-common</code></code></p>
<p>This option works similar to <b><code>--debug</code></b> but turns on debug only for the debug macro keywords <b>query</b>, <b>info</b>, <b>error</b>, <b>enter</b>, <b>exit</b> which are considered the most commonly used. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--debug-server</code></code></p>
<p>Runs <b>mysqld.debug</b> (if available) instead of <b>mysqld</b> as server. If it does find <b>mysqld.debug</b>, it will search for plugin libraries in a subdirectory <b>debug</b> under the directory where it's normally located. This option does not turn on trace output and is independent of the <b>debug</b> option. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--debug-sync-timeout</code>=<b>seconds</b></code></p>
<p>Controls whether the Debug Sync facility for testing and debugging is enabled. The option value is a timeout in seconds. The default value is 300. A value of 0 disables Debug Sync. The value of this option also becomes the default timeout for individual synchronization points.</p>
<p><a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> passes <b><code>--loose-debug-sync-timeout</code>=<em>seconds</em></b> to <b>mysqld</b>. The <b><code>--loose</code></b> prefix is used so that <b>mysqld</b> does not fail if Debug Sync is not compiled in.</p>
<p>For information about using the Debug Sync facility for testing, see <a class="el" href="PAGE_THREAD_SYNCHRONIZATION.html">Thread Synchronization in Test Cases</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--default-myisam</code></code></p>
<p>Use <b>MyISAM</b> as the default storage engine for all except <b>InnoDB</b>-specific tests. This option is off by default. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--defaults-file</code>=<b>file_name</b></code></p>
<p>Use the named file as fixed config file template for all tests. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--defaults_extra_file</code>=<b>file_name</b></code></p>
<p>Add setting from the named file to all generated configs. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--do-suite</code>=<b>prefix or regex</b></code></p>
<p>Run all test cases from suites having a name that begins with the given <b><em>prefix</em></b> value or matches the regular expression. If the argument matches no existing suite, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> aborts.</p>
<p>The argument for the <b><code>--do-suite</code></b> option allows more flexible specification of which tests to perform. See the description of the <b><code>--do-test</code></b> option for details.</p>
<p>In case a suite or a list of suites is specified using the <b><code>--suite</code></b> option along with a pattern or regular expression given through <b><code>--do-suite</code></b>, only suite(s) from the list which match the prefix or regular expression are picked up.</p>
<p>When the <b><code>--do-suite</code></b> option is specified more than once on the command line, only the last occurrence is considered. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--do-test</code>=<b>prefix or regex</b></code></p>
<p>Run all test cases having a name that begins with the given <b><em>prefix</em></b> value or matches the regular expression. This option provides a convenient way to run a family of similarly named tests.</p>
<p>The argument for the <b><code>--do-test</code></b> option allows more flexible specification of which tests to perform. If the argument contains a pattern metacharacter other than a lone period, it is interpreted as a Perl regular expression and applies to test names that match the pattern. If the argument contains a lone period or does not contain any pattern metacharacters, it is interpreted the same way as previously and matches test names that begin with the argument value. For example, <b><code>--do-test</code>=testa</b> matches tests that begin with <b>testa</b>, <b><code>--do-test</code>=main.testa</b> matches tests in the <b>main</b> test suite that begin with <b>testa</b>, and <b><code>--do-test</code>=main.*testa</b> matches test names that contain <b>main</b> followed by <b>testa</b> with anything in between. In the latter case, the pattern match is not anchored to the beginning of the test name, so it also matches names such as <b>xmainytestz</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--do-test-list</code>=<b>file</b></code></p>
<p>Run all tests listed in the file <b><em>file</em></b>. In this file, tests should be listed one per line in any of the following forms.</p>
<pre class="fragment">&lt;test_name&gt;
&lt;test_name&gt;.test
&lt;suite_name&gt;.&lt;test_name&gt;
&lt;suite_name&gt;.&lt;test_name&gt;.test
path_to_the_test_file</pre><p>Path to the test file should either be an absolute path or a relative path from base directory.</p>
<p>To run a test present in a non-default test suite, either the test name qualified with the suite name i.e <b>suite_name.test_name[.test]</b> or a <b>path</b> to the test file should be mentioned.</p>
<p>A line beginning with <b>#</b> will be ignored and is considered as a comment. Similarly an empty line in the file is also ignored.</p>
<p>For example, consider a test list file <b>test_list</b> containing following tests.</p>
<pre class="fragment"># Main suite test '1st.test'
1st
1st.test
main.1st
main.1st.test
mysql-test/t/1st.test

# GIS suite test 'geohash_functions.test'
gis.geohash_functions
mysql-test/suite/gis/t/geohash_functions.test

# Non-default suite 'test_services'
test_services.test_services
mysql-test/suite/test_services/t/test_services.test

# Internal suite test 'i_main.user_var'
i_main.user_var
internal/mysql-test/suite/i_main/t/user_var.test</pre><p>Following command runs the list of tests mentioned in the file.</p>
<pre class="fragment">./mysql-test-run.pl --do-test-list=test_list</pre><p>If both <b><code>--suite</code></b> and <b><code>--do-test-list</code></b> are given, and if suite name is <em>not</em> part of the test names listed in the file, then those tests are searched only in the suites mentioned in <b><code>--suite</code></b> option. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--enable-disabled</code></code></p>
<p>Ignore any <b>disabled.def</b> file, and run also tests marked as disbaled. Success or failure of those tests will be reported the same way as other tests.</p>
<dl class="section note"><dt>Note</dt><dd>This option is enabled by default when test cases are specified on command line. </dd></dl>
</li>
<li>
<p class="startli"><code><code>--explain-protocol</code></code></p>
<p>Run <b>EXPLAIN EXTENDED</b> on all <b>SELECT</b>, <b>INSERT</b>, <b>REPLACE</b>, <b>UPDATE</b> and <b>DELETE</b> queries. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--extern</code> <b>option=value</b></code></p>
<p>Use an already running server. The option/value pair is what is needed by the <b>mysql</b> client to connect to the server. Each <b><code>--extern</code></b> can only take one option/value pair as argument, so it you need more you need to repeat <b><code>--extern</code></b> for each of them.</p>
<pre class="fragment">./mysql-test-run.pl --extern socket=var/tmp/mysqld.1.sock main.1st</pre><p>During server initialization, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> creates a default database <b>test</b> which is used while establishing an initial connection with the server. When running a test case with <b>&ndash;extern</b> option, if <b>test</b> database doesn't exist on an already running server, then the test case will fail with following error.</p>
<pre class="fragment">mysqltest: Could not open connection 'default': 1049 Unknown database 'test'</pre><p>So if you're running a test case on an already running server using <b>&ndash;extern</b> option, it is necessary to create <b>test</b> database on the server before running the test case if it doesn't exist.</p>
<p>Similarly, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> creates <b>mtr</b> database during server initialization which contains tables and procedures used to suppress global or test specific warnings. If a test case refers to this database and the database doesn't exist on running server, then the test case will fail.</p>
<dl class="section note"><dt>Note</dt><dd>If a test case has an <b>.opt</b> file that requires the server to be restarted with specific options, the file will not be used. The test case likely will fail as a result. </dd></dl>
</li>
<li>
<p class="startli"><code><code>--fast</code></code></p>
<p>Do not perform controlled shutdown when servers need to be restarted or at the end of the test run. This is equivalent to using <b><code>--shutdown-timeout</code>=0</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--force</code></code></p>
<p>Normally, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> exits if a test case fails. <b><code>--force</code></b> causes execution to continue regardless of test case failure. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--force-restart</code></code></p>
<p>Always restart the server(s) between each tast case, whether it's needed or not. Will also restart between repeated runs of the same test case. This may be useful e.g. when looking for the source of a memory leak, as there will only have been one test run before the server exits.</p>
<p>Enabling this option will cause <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> to restart the server(s) on a newly intialized data directory.</p>
<p>This option can also be mentioned in <b><em>test-name</em>-master.opt</b> file for a test case to restart the server(s) before it runs. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--gcov</code></code></p>
<p>Run tests with the <b>gcov</b> test coverage tool. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--gdb</code></code></p>
<p>Start <b>mysqld</b> in the <b>gdb</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--gprof</code></code></p>
<p>Run tests with the <b>gprof</b> profiling tool. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--include-ndbcluster</code>, <code>--include-ndb</code></code></p>
<p>Run also tests that need Cluster. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--initialize</code>=<b>value</b></code></p>
<p>Extra bootstrap options that need be to be passed during the server initialization process can be passed as a value to <b><code>--initialize</code></b>. The server is then started with the specified value. Only one option may be specified in <b>value</b>; to specify more than one, use additional <b><code>--initialize</code></b> options.</p>
<p>Options passed as a value to <b><code>--mysqld</code></b> will have precedence over the options passed to <b><code>--initialize</code></b>, regardless of the order in which they passed on the command line. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--json-explain-protocol</code></code></p>
<p>Run <b>EXPLAIN FORMAT=JSON</b> on all <b>SELECT</b>, <b>INSERT</b>, <b>REPLACE</b>, <b>UPDATE</b> and <b>DELETE</b> queries. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--manual-boot-gdb</code></code></p>
<p>This option is similar to <b><code>--boot-gdb</code></b> but attaches the debugger to the server during the bootstrapping process, permitting the use of a remote debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--manual-dbx</code></code></p>
<p>Use a server that has already been started by the user in the <b>dbx</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--manual-ddd</code></code></p>
<p>Use a server that has already been started by the user in the <b>ddd</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--manual-debug</code></code></p>
<p>Use a server that has already been started by the user in a debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--manual-gdb</code></code></p>
<p>Use a server that has already been started by the user in the <b>gdb</b> debugger. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--mark-progress</code></code></p>
<p>Marks progress with timing (in milliseconds) and line number in <b>var/log/<em>testname</em>.progress</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--max-connections</code>=<b>num</b></code></p>
<p>The maximum number of simultaneous server connections that may be used per test. If not set, the maximum is 128. Minimum allowed limit is 8, maximum is 5120. Corresponds to the same option for <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--max-save-core</code>=<b>N</b></code></p>
<p>Limit the number of core files saved, to avoid filling up disks in case of a frequently crashing server. Defaults to 5, set to 0 for no limit. May also be set with the environment variable <code>MTR_MAX_SAVE_CORE</code>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--max-save-datadir</code>=<b>N</b></code></p>
<p>Limit the number of data directories saved after failed tests, to avoid filling up disks in case of frequent failures. Defaults to 20, set to 0 for no limit. May also be set with the environment variable <b>MTR_MAX_SAVE_DATADIR</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--max-test-fail</code>=<b>N</b></code></p>
<p>Stop execution after the specified number of tests have failed, to avoid using up resources (and time) in case of massive failures. retries are noe counted. Defaults to 10, set to 0 for no limit. May also be set with the environment variable <b>MTR_MAX_TEST_FAIL</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--mem</code></code></p>
<p>This option is not supported on Windows and on MacOS.</p>
<p>Run the test suite in memory, using tmpfs or ramdisk. This can decrease test times significantly, in particular if you would otherwise be running over a remote file system. <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> attempts to find a suitable location using a built-in list of standard locations for tmpfs and puts the <b>var</b> directory there. This option also affects placement of temporary files, which are created in <b>var/tmp</b>.</p>
<p>The default list includes <b>/dev/shm</b>, <b>/run/shm</b> and <b>/tmp</b>. You can also enable this option by setting the environment variable <b>MTR_MEM[=<em>dir_name</em>]</b>. If <b><em>dir_name</em></b> is given, it is added to the beginning of the list of locations to search, so it takes precedence over any built-in locations.</p>
<p>Once you have run tests with <b><code>--mem</code></b> within a <b>mysql-test</b> directory, a soflink <b>var</b> will have been set up to the temporary directory, and this will be re-used the next time, until the soflink is deleted. Thus, you do not have to repeat the <b><code>--mem</code></b> option next time. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--mysqld</code>=<b>value</b></code></p>
<p>Extra option to pass to <b>mysqld</b>. Only one option may be specified in <b>value</b>; to specify more than one, use additional <b>&ndash;mysqld</b> options. See <a class="el" href="PAGE_PASSING_OPTIONS.html">Passing Options from mysql-test-run.pl to mysqld or mysqltest</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--mysqld-env</code>=<b>variable</b>=<b>value</b></code></p>
<p>Sets (or changes) an environment variable before starting <b>mysqld</b>. Varibles set in the environment from which you run <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> will normally also be propagated to <b>mysqld</b>, but there may be cases where you want a setting just for a single run, or you may not want the setting to affect other programs. You may use additional <b><code>--mysqld-env</code></b> options to set more than one variable. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--mysqltest</code>=<b>options</b></code></p>
<p>Extra options to pass to <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--ndb-connectstring</code>=<b>str</b></code></p>
<p>Pass <b><code>--ndb-connectstring</code>=<em>str</em></b> to the master MySQL server. This option also prevents <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> from starting a cluster. It is assumed that there is already a cluster running to which the server can connect with the given connectstring. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--no-skip</code></code></p>
<p>This option forces all tests to run, ignoring any <b><code>--skip</code></b> commands used in the test. This ensures that all tests are run. An excluded list (<b>excludenoskip.list</b>) is maintained to track which tests should continue to be skipped. The <b><code>--no-skip</code></b> option continues to skip the tests that are named in the excluded list. The default value of <b>&ndash;no-skip</b> introduced variable is OFF, which implies users are not forced to run all tests unless the <b>&ndash;no-skip</b> is explicitly used.</p>
<pre class="fragment">shell&gt; mysql-test-run.pl --suite=innodb --no-skip</pre> <p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--nocheck-testcases</code></code></p>
<p>Disable the check for test case side effects. For additional information, see the description of the <b><code>--check-testcases</code></b> option. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--noreorder</code></code></p>
<p>Do not reorder tests to reduce number of restarts, but run them in exactly the order given. If a whole suite is to be run, the tests are run in alphabetic order, though similiar combinations will be grouped together. If more than one suite is listed, the tests are run one suite at a time, in the order listed. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--notimer</code></code></p>
<p>Cause <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> not to generate a timing file. The effect of this is that the report from each test case does not include the timing in milliseconds as it normally does. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--nounit-tests</code></code></p>
<p>Do not run unit tests, overriding default behavior or setting of the <b>MTR_UNIT_TESTS</b> variable. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--nowarnings</code></code></p>
<p>Do not look for and report errors and warning in the server logs.</p>
<dl class="section note"><dt>Note</dt><dd>In addition to being passed as a command-line option, <b><code>--nowarnings</code></b> can also be passed in the <b>.opt</b> file of a test case. </dd></dl>
</li>
<li>
<p class="startli"><code><code>--only-big-tests</code></code></p>
<p>This option causes only big tests to run. Normal (non-big) tests are skipped. If both <b><code>--big-test</code></b> and <b><code>--only-big-tests</code></b> are given, <b><code>--only-big-tests</code></b> is ignored. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--opt-trace-protocol</code></code></p>
<p>Prints the <a class="el" href="PAGE_OPT_TRACE.html">optimizer trace</a> of SQL statements in a test. Running any MTR test with this option executes the following SQL statement after every <b>DML statement</b> that it encounters:</p>
<pre class="fragment">SELECT trace FROM information_schema.optimizer_trace /* injected by --opt-trace-protocol */;</pre> <p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--parallel</code>={<b>N</b>|auto}</code></p>
<p>Run tests using <b><em>N</em></b> parallel threads. By default, 1 thread is used. Use <b><code>--parallel</code>=auto</b> to set <b><em>N</em></b> automatically.</p>
<p>Setting the <b>MTR_PARALLEL</b> environment variable to <b><em>N</em></b> has the same effect as specifying <b><code>--parallel</code>=<em>N</em></b>.</p>
<p>The <b>MTR_MAX_PARALLEL</b> environment variable, if set, specifies the maximum number of parallel workers that can be spawned when the <b><code>--parallel</code>=auto</b> option is specified. If <b><code>--parallel</code>=auto</b> is not specified, <b>MTR_MAX_PARALLEL</b> variable has no effect. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--port-base</code>=<b>P</b></code></p>
<p>Specify base of port numbers to be used; a block of 10 will be allocated. <b><em>P</em></b> should be divisible by 10; if it is not, it will be rounded down. If running with more than one parallel test thread, thread 2 will use the next block of 10 and so on.</p>
<p>If the port number is given as <b>auto</b>, which is also the default, <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> will allocate a number unique to this host. The value may also be given with the environment variable <b>MTR_PORT_BASE</b>.</p>
<p><b><code>--port-base</code></b> was added as a more logical alternative to <b><code>--build-thread</code></b>. If both are used, <b><code>--port-base</code></b> takes precedence. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--print-testcases</code></code></p>
<p>Do not run any tests, but print details about all tests, in the order they would have been run. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--ps-protocol</code></code></p>
<p>Pass the <b><code>--ps-protocol</code></b> option to <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--quiet</code></code></p>
<p>Reuse the output buffer and maintain a single line for reporting successful tests, skipped tests and disabled tests. Failed tests and the necessary information about the failure will be printed on a separate line.</p>
<p>When <b><code>--quiet</code></b> option is enabled, MTR prints only the test name and result of the test run. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--record</code></code></p>
<p>Pass the <b><code>--record</code></b> option to <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>. This option requires a specific test case to be named on the command line. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--reorder</code></code></p>
<p>Reorder tests to minimize the number of server restarts needed. This is the default behavior. There is no guarantee that a particular set of tests will always end up in the same order. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--repeat</code>=<b>N</b></code></p>
<p>Run each test <b><em>N</em></b> number of times, in parallel if <b><code>--parallel</code></b> option value is greater than 1. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--report-features</code></code></p>
<p>Display the output of <b>SHOW ENGINES</b> and <b>SHOW VARIABLES</b>. This can be used to verify that binaries are built with all required features. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--report-times</code></code></p>
<p>At the end of the test run, write a summary of how much time was spent in various phases of execution. If you run with <b><code>--parallel</code></b>, the total will exceed the wall clock time passed, since it will be summed over all threads.</p>
<p>The times reported should only be treated as approximations, and the exact points where the time is taken may also change between releases. If the test run is aborted, including if a test fails and <b><code>--force</code></b> is not in use, the time report will not be produced. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--report-unstable-tests</code></code></p>
<p>The option can be used to distinguish unstable tests which pass on at least one retry attempt from hard failing ones. Unstable tests are reported separately in the end summary in the format: <b>test_name(num_of_failures/num_of_attempts)</b>.</p>
<p>In case all failures encountered are due to unstable tests, MTR will print the below warning and exit with a zero status code.</p>
<pre class="fragment">mysql-test-run: WARNING: There are failures due to unstable test cases.
However, the tests are not hard-failing.</pre><p>This option has no effect unless <b><code>--force</code></b> is used and both <b><code>--retry</code></b> and <b><code>--retry-failure</code></b> are set to values greater than 1. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--retry</code>=<b>N</b></code></p>
<p>If a test fails, it is retried up to a maximum of <b><em>N</em></b> runs, but will terminate after 2 failures. Default is 3, set to 1 or 0 for no retries. This option has no effect unless <b><code>--force</code></b> is also used; without it, test execution will terminate after the first failure.</p>
<p>The <b><code>--retry</code></b> and <b><code>--retry-failure</code></b> options do not affect how many times a test repeated with <b><code>--repeat</code></b> may fail in total, as each repetition is considered a new test case, which may in turn be retried if it fails. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--retry-failure</code>=<b>N</b></code></p>
<p>Allow a failed and retried test to fail more than the default 2 times before giving it up. Setting it to 0 or 1 effectively turns off retries </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--sanitize</code></code></p>
<p>Scan the server log files for warnings from various sanitizers. Use of this option assumes that MySQL was configured with <a href="https://dev.mysql.com/doc/refman/8.0/en/source-configuration-options.html#option_cmake_with_asan">-DWITH_ASAN</a> or <a href="https://dev.mysql.com/doc/refman/8.0/en/source-configuration-options.html#option_cmake_with_ubsan">-DWITH_UBSAN</a>.</p>
<p>The <b>TSAN_OPTIONS</b> environment variable can be set to specify the path name of a file containing ThreadSanitizer suppressions. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--shutdown-timeout</code>=<b>seconds</b></code></p>
<p>Max number of seconds to wait for servers to do controlled shutdown before killing them. Default is 10. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--skip-combinations</code></code></p>
<p>Do not apply combinations; ignore combinations file or option. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--skip-ndbcluster</code>, <code>--skip-ndb</code></code></p>
<p>Do not start NDB Cluster; skip Cluster test cases. This option only has effect if you do have NDB, if not it will have no effect as it cannot run those tests anyway. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--skip-ndbcluster-slave</code>, <code>--skip-ndb-slave</code></code></p>
<p>Do not start an NDB Cluster slave. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--skip-rpl</code></code></p>
<p>Skip replication test cases. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--skip-test</code>=<b>regex</b></code></p>
<p>Specify a regular expression to be applied to test case names. Cases with names that match the expression are skipped. tests to skip.</p>
<p>The argument for the <b><code>--skip-test</code></b> option allows more flexible specification of which tests to skip. If the argument contains a pattern metacharacter other than a lone period, it is interpreted as a Perl regular expression and applies to test names that match the pattern. See the description of the <b><code>--do-test</code></b> option for details. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--skip-test-list</code>=<b>file</b></code></p>
<p>Specify a file listing tests that should be skipped (disabled).</p>
<p>The file has the same format as the <b>disabled.def</b> file listing disabled tests. With this option, disabling can be done on a case by case basis. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--skip-*</code></code></p>
<p><b><code>--skip-*</code></b> options not otherwise recognized by <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> are passed to the master server. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--sp-protocol</code></code></p>
<p>Pass the <b><code>--sp-protocol</code></b> option to <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--start</code></code></p>
<p>Initialize and start servers with the startup settings for the specified test case. You can use this option to start a server to which you can connect later. For example, after building a source distribution you can start a server and connect to it with the <b>mysql</b> client like this:</p>
<pre class="fragment">shell&gt; cd mysql-test
shell&gt; ./mysql-test-run.pl --start alias &amp;
shell&gt; ../mysql -S ./var/tmp/master.sock -h localhost -u root</pre><p>If no tests are named on the command line, the server(s) will be started with settings for the first test that would have been run without the <b><code>--start</code></b> option.</p>
<p><a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> will stop once the server has been started, but will terminate if the server dies. If killed, it will also shut down the server. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--start-and-exit</code></code></p>
<p>This is similar to <b><code>--start</code></b>, but <a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> terminates once the server has been started, leaving just the server process running. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--start-dirty</code></code></p>
<p>This is similar to <b><code>--start</code></b>, but will skip the database initialization phase and assume that database files are already available. Usually this means you must have run another test first. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--start-from</code>=<b>test_name</b></code></p>
<p><a class="el" href="PAGE_MYSQL_TEST_RUN_PL.html">mysql-test-run.pl</a> sorts the list of names of the test cases to be run, and then begins with <b><em>test_name</em></b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--strace-client</code></code></p>
<p>Create <b>strace</b> output for <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>. Will produce default <b>strace</b> output as <b>mysqltest.strace</b>. Note that this will be overwritten for each new test case, so it's most useful for running only one test.</p>
<p>The <b>strace-client</b> option is only supported on Linux. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--strace-server</code></code></p>
<p>Create <b>strace</b> output for the server. Will produce default <b>strace</b> output as <b>mysqld.1.strace</b>. Note that this will be overwritten each time the server is restarted, so it's most useful for running a single test, or if you want trace from the first test that fails.</p>
<p>The <b>strace-server</b> option is available on Linux only. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--stress</code>=<b>stress options</b></code></p>
<p>Start a server, but instead of running a test, run <a class="el" href="PAGE_MYSQLTEST.html">mysql-stress-test.pl</a> with the supplied arguments. Arguments needed to communicate with the server will be automatically provided, the rest should be given as arguments to this option. Command line options for <a class="el" href="PAGE_MYSQLTEST.html">mysql-stress-test.pl</a> should be separeted by a comma. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--suite(s)</code>=<b>{suite_name|suite_list|suite_set}</b></code></p>
<p>Run a suite or a comma separated list of suites or those suites which fall under the specified suite set. If the option is not specified explicitly, MTR assumes that it needs to use the default suite set for the test run.</p>
<p>The suite set's MTR can use are case insensitive and take the below values: </p><pre class="fragment">default     - To run the default list of suites.
all         - To scan the mysql directory and run all available suites.
non-default - To scan the mysql directory for available suites and
              collect only the non-default suites.</pre><p>The suite set 'all' is used implicitly if neither a suite nor a suite list is specified and<br />
 (i) There are tests given on the MTR command line <b>or</b><br />
 (ii) Any of the following options are used: <b>&ndash;do-suite</b>, <b>&ndash;do-test</b>, <b>&ndash;do-test-list</b>.</p>
<p>Note that suite sets 'all' and 'non-default' do not include ndb test suites in case ndb cluster is not enabled.</p>
<p>If a suite set is specified in the suite list, MTR does not treat it as a suite set and considers it as the name of a suite to be run. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--suite-timeout</code>=<b>minutes</b></code></p>
<p>Specify the maximum test suite runtime in minutes. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--summary-report</code>=<b>file_name</b></code></p>
<p>Generate a plain text version of the test summary only and write it to the file named as the option argument. The file is suitable for sending by email. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--test-progress</code>[={0|1}]</code></p>
<p>Print the percentage of tests completed. This option is enabled by default. The argument to <b><code>--test-progress</code></b> is optional. To disable it, set the value to <b>0</b>.</p>
<p>For example, consider a test suite <b>sample_test_suite</b> containing 3 tests.</p>
<pre class="fragment">./mysql-test-run.pl --suite=sample_test_suite [--test-progress]</pre><p>Running the suite with <b><code>--test-progress</code></b> option enabled will print the percentage of tests completed.</p>
<pre class="fragment">[ 33%] sample_test_suite.1st                           [ pass ]      1
[ 66%] sample_test_suite.2nd                           [ pass ]      1
[100%] sample_test_suite.3rd                           [ pass ]      1</pre> <p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--testcase-timeout</code>=<b>minutes</b></code></p>
<p>Specify the maximum test case runtime in minutes.</p>
<dl class="section note"><dt>Note</dt><dd>When a test case is run with <b>valgrind</b> option enabled, the test case timeout value becomes 10 times the specified value. For example, running a test case with timeout value <b>1 minute</b> and <b>valgrind</b> enabled will increase the timeout value to <b>10 minutes</b>. </dd></dl>
</li>
<li>
<p class="startli"><code><code>--timediff</code></code></p>
<p>Adds to each test report for a test case, the total time in seconds and milliseconds passed since the preceding test ended. This option can only be used together with <b><code>--timestamp</code></b>, and has no effect without it. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--timer</code></code></p>
<p>Cause <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> to generate a timing file. The default file is named <b>./var/log/timer</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--timestamp</code></code></p>
<p>Prints a timestamp before the test case name in each test report line, showing when the test ended. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--tmpdir</code>=<b>path</b></code></p>
<p>The directory where temporary file are stored. The default location is <b>./var/tmp</b>. The environment variable <b>MYSQL_TMP_DIR</b> will be set to the path for this directory, whether it has the default value or has been set explicitly. This may be referred to in tests. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--unit-tests</code></code></p>
<p>Force running of unit tests, overriding default behavior or setting of the <b>MTR_UNIT_TESTS</b> variable. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--unit-tests-report</code></code></p>
<p>Extend the unit test run by also outputting the log from the test run, independently of whether it succeeded or not. This option implies <b><code>--unit-tests</code></b> so it is not necessary to specify both. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--user</code>=<b>user_name</b></code></p>
<p>The MySQL user name to use when connecting to the server. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--user-args</code></code></p>
<p>Drops all non-essential command line arguments to the <b>mysqld</b> server, except those supplied with <b><code>--mysqld</code></b> arguemnts, if any. Only works in combination with <b><code>--start</code></b>, <b><code>--start-and-exit</code></b> or <b><code>--start-dirty</code></b>, and only if no test name is given. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--valgrind</code></code></p>
<p>Run <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> and <b>mysqld</b> with <b>valgrind</b>. This and the following <b><code>--valgrind</code></b> options require that the executables have been build with <b>valgrind</b> support.</p>
<p>When the server is run with valgrind, an extra pass over the server log file(s) will be performed after all tests are run, and any report with problems that have been reported at server shutdown will be extracted and printed. The most common warnings are memory leaks. With each report will also be listed all tests that were run since previous server restart; one of these is likely to have caused the problem.</p>
<p>A final "pseudo" test named <b>valgrind_report</b> is added to the list of tests when the server is run in valgrind. This test is reported as failed if any such shutdown warnings were produced by valgrind. Pass or failure of this test is also added to the total test count reported.</p>
<dl class="section note"><dt>Note</dt><dd>When a test case is run with <b>valgrind</b> option enabled, the test case timeout value becomes 10 times the specified value. For example, running a test case with timeout value <b>1 minute</b> and <b>valgrind</b> enabled will increase the timeout value to <b>10 minutes</b>. </dd></dl>
</li>
<li>
<p class="startli"><code><code>--valgrind-clients</code></code></p>
<p>Run all clients started by <b>.test</b> files with <b>valgrind</b>. This option requires <b>valgrind 3.9</b> or later. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--valgrind-mysqld</code></code></p>
<p>Run the <b>mysqld</b> server with <b>valgrind</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--valgrind-mysqltest</code></code></p>
<p>Run <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a> with <b>valgrind</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--valgrind-option</code>=<b>str</b></code></p>
<p>Extra options to pass to <b>valgrind</b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--valgrind-path</code>=<b>path</b></code></p>
<p>Specify the path name to the valgrind executable. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--vardir</code>=<b>path</b></code></p>
<p>Specify the path where files generated during the test run are stored. The default location is <b>./var</b>. The environment variable <b>MYSQLTEST_VARDIR</b> will be set to the path for this directory, whether it has the default value or has been set explicitly. This may be referred to in tests. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--verbose</code></code></p>
<p>Give more verbose output regarding test execution. Note that the output generated within each test case is not affected. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--verbose-restart</code></code></p>
<p>Write when and why servers are restarted between test cases. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--view-protocol</code></code></p>
<p>Pass the <b><code>--view-protocol</code></b> option to <a class="el" href="PAGE_MYSQLTEST.html">mysqltest</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--vs-config</code>=<b>config_val</b></code></p>
<p>Specify the configuration used to build MySQL (for example, <b>&ndash;vs-config=debug &ndash;vs-config=release</b>). This option is for Windows only. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--wait-all</code></code></p>
<p>If <b><code>--start</code></b> or <b><code>--start-dirty</code></b> is used, wait for all servers to exit before termination. Otherise, it will terminate if one (of several) servers is restarted. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--warnings</code></code></p>
<p>Search the server log for errors or warning after each test and report any suspicious ones; if any are found, the test will be marked as failed. This is the default behavior, it may be turned off with <b><code>--nowarnings</code></b>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--with-ndbcluster-only</code></code></p>
<p>Run only test cases that have <b>ndb</b> in their name. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code><code>--xml-report</code>=<b>file_name</b></code></p>
<p>Generate an xml file containing result of the test run and write it to the file named as the option argument. It includes suite-wise and overall statistics like the number of tests run, number of failures, number of disabled and skipped tests along with information about each individual test according to its outcome.</p>
<p>The xml report's structure can be found below :</p>
<pre class="fragment">&lt;testsuites ... &gt;
  &lt;testsuite ... &gt;
     &lt;testcase ... /&gt;
     &lt;testcase ... &gt;
         &lt;failure ... &gt; ... &lt;/failure&gt;
     &lt;/testcase&gt;
  &lt;/testsuite&gt;
&lt;/testsuites&gt;</pre>  </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The hostname resolves to 127.0.0.1 and not to the actual IP address. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="PAGE_TESTING_TOOLS.html">Testing Tools</a></li><li class="navelem"><a class="el" href="PAGE_MYSQL_TEST_RUN.html">The MySQL Test Framework</a></li><li class="navelem"><a class="el" href="PAGE_MYSQLTEST_PROGRAMS.html">MySQL Test Programs</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
