<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: alter_part Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classalter__part.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classalter__part-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">alter_part Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class(interface) which manages the operations for partitions of states in different categories during ALTER PARTITION.  
 <a href="classalter__part.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for alter_part:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classalter__part.png" usemap="#alter_5Fpart_map" alt=""/>
  <map id="alter_5Fpart_map" name="alter_5Fpart_map">
<area href="classalter__part__add.html" title="Class which handles the partition of the state PART_TO_BE_ADDED. " alt="alter_part_add" shape="rect" coords="0,56,115,80"/>
<area href="classalter__part__change.html" title="Class which handles the partition of the state PART_CHANGED. " alt="alter_part_change" shape="rect" coords="125,56,240,80"/>
<area href="classalter__part__drop.html" title="Class which handles the partition of states PART_TO_BE_DROPPED, PART_TO_BE_REORGED and PART_REORGED_D..." alt="alter_part_drop" shape="rect" coords="250,56,365,80"/>
<area href="classalter__part__normal.html" title="Class which handles the partition of state PART_NORMAL. " alt="alter_part_normal" shape="rect" coords="375,56,490,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a67de1752a78200f02c4fd00d129d894e"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a67de1752a78200f02c4fd00d129d894e">~alter_part</a> ()</td></tr>
<tr class="memdesc:a67de1752a78200f02c4fd00d129d894e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor.  <a href="#a67de1752a78200f02c4fd00d129d894e">More...</a><br /></td></tr>
<tr class="separator:a67de1752a78200f02c4fd00d129d894e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75dcbc5292d7d3bf346b0c0688a63a6c"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a75dcbc5292d7d3bf346b0c0688a63a6c">part_id</a> () const</td></tr>
<tr class="memdesc:a75dcbc5292d7d3bf346b0c0688a63a6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the partition id.  <a href="#a75dcbc5292d7d3bf346b0c0688a63a6c">More...</a><br /></td></tr>
<tr class="separator:a75dcbc5292d7d3bf346b0c0688a63a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7efe75422c216ace36ca010bee5e16d4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="partition__element_8h.html#a8e92adad4824dfcc0d76f041f23f62f7">partition_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a7efe75422c216ace36ca010bee5e16d4">state</a> () const</td></tr>
<tr class="memdesc:a7efe75422c216ace36ca010bee5e16d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the partition state.  <a href="#a7efe75422c216ace36ca010bee5e16d4">More...</a><br /></td></tr>
<tr class="separator:a7efe75422c216ace36ca010bee5e16d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a261f7e244ed3a9136af02d561a44d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a3a261f7e244ed3a9136af02d561a44d6">new_table</a> ()</td></tr>
<tr class="memdesc:a3a261f7e244ed3a9136af02d561a44d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the InnoDB table object for newly created partition if applicable.  <a href="#a3a261f7e244ed3a9136af02d561a44d6">More...</a><br /></td></tr>
<tr class="separator:a3a261f7e244ed3a9136af02d561a44d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df2d9dcd3cd603f541c1c8c4037f93f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a5df2d9dcd3cd603f541c1c8c4037f93f">free_old_part</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> check_in_cache, const char *part_name)</td></tr>
<tr class="memdesc:a5df2d9dcd3cd603f541c1c8c4037f93f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the freed old partition to nullptr to avoid dangling pointer.  <a href="#a5df2d9dcd3cd603f541c1c8c4037f93f">More...</a><br /></td></tr>
<tr class="separator:a5df2d9dcd3cd603f541c1c8c4037f93f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb388ac6f423afae9594d885c20c9956"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#aeb388ac6f423afae9594d885c20c9956">prepare</a> (<a class="el" href="structTABLE.html">TABLE</a> *altered_table, const <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *old_part, <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *new_part)</td></tr>
<tr class="memdesc:aeb388ac6f423afae9594d885c20c9956"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare.  <a href="#aeb388ac6f423afae9594d885c20c9956">More...</a><br /></td></tr>
<tr class="separator:aeb388ac6f423afae9594d885c20c9956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a330e158b50375e312947bcc9864e1549"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a330e158b50375e312947bcc9864e1549">try_commit</a> (const <a class="el" href="structTABLE.html">TABLE</a> *table, <a class="el" href="structTABLE.html">TABLE</a> *altered_table, const <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *old_part, <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *new_part)</td></tr>
<tr class="memdesc:a330e158b50375e312947bcc9864e1549"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to commit.  <a href="#a330e158b50375e312947bcc9864e1549">More...</a><br /></td></tr>
<tr class="separator:a330e158b50375e312947bcc9864e1549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a426476be6b079c16d458641a55396c6e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a426476be6b079c16d458641a55396c6e">rollback</a> ()</td></tr>
<tr class="memdesc:a426476be6b079c16d458641a55396c6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback.  <a href="#a426476be6b079c16d458641a55396c6e">More...</a><br /></td></tr>
<tr class="separator:a426476be6b079c16d458641a55396c6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3025222fc10e5697c764727c5c3da6ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a3025222fc10e5697c764727c5c3da6ba">alter_part</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="classalter__part.html#a75dcbc5292d7d3bf346b0c0688a63a6c">part_id</a>, <a class="el" href="partition__element_8h.html#a8e92adad4824dfcc0d76f041f23f62f7">partition_state</a> <a class="el" href="classalter__part.html#a7efe75422c216ace36ca010bee5e16d4">state</a>, const char *table_name, <a class="el" href="structdict__table__t.html">dict_table_t</a> **old)</td></tr>
<tr class="memdesc:a3025222fc10e5697c764727c5c3da6ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a3025222fc10e5697c764727c5c3da6ba">More...</a><br /></td></tr>
<tr class="separator:a3025222fc10e5697c764727c5c3da6ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98e1bd3f6993b7cc1d5ed7ce8ce0d78d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a98e1bd3f6993b7cc1d5ed7ce8ce0d78d">build_partition_name</a> (const <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *dd_part, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> temp, char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="memdesc:a98e1bd3f6993b7cc1d5ed7ce8ce0d78d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build the partition name for specified partition.  <a href="#a98e1bd3f6993b7cc1d5ed7ce8ce0d78d">More...</a><br /></td></tr>
<tr class="separator:a98e1bd3f6993b7cc1d5ed7ce8ce0d78d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36987a3594db20fe12b7ee60f2453dd5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a36987a3594db20fe12b7ee60f2453dd5">create</a> (const char *part_name, <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *dd_part, <a class="el" href="structTABLE.html">TABLE</a> *table, const char *tablespace, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> file_per_table, ib_uint64_t autoinc)</td></tr>
<tr class="memdesc:a36987a3594db20fe12b7ee60f2453dd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new partition.  <a href="#a36987a3594db20fe12b7ee60f2453dd5">More...</a><br /></td></tr>
<tr class="separator:a36987a3594db20fe12b7ee60f2453dd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7aaf57e2f2fbf9c112a515413786fea4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtrx__t.html">trx_t</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a7aaf57e2f2fbf9c112a515413786fea4">m_trx</a></td></tr>
<tr class="memdesc:a7aaf57e2f2fbf9c112a515413786fea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">InnoDB transaction, nullptr if not used.  <a href="#a7aaf57e2f2fbf9c112a515413786fea4">More...</a><br /></td></tr>
<tr class="separator:a7aaf57e2f2fbf9c112a515413786fea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfc6b8317e4675963affe2e4fdee261"><td class="memItemLeft" align="right" valign="top"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a7dfc6b8317e4675963affe2e4fdee261">m_part_id</a></td></tr>
<tr class="memdesc:a7dfc6b8317e4675963affe2e4fdee261"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition id in the table.  <a href="#a7dfc6b8317e4675963affe2e4fdee261">More...</a><br /></td></tr>
<tr class="separator:a7dfc6b8317e4675963affe2e4fdee261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41bfa4e1f3daf7162be75d8ac4ea3a8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="partition__element_8h.html#a8e92adad4824dfcc0d76f041f23f62f7">partition_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a41bfa4e1f3daf7162be75d8ac4ea3a8b">m_state</a></td></tr>
<tr class="memdesc:a41bfa4e1f3daf7162be75d8ac4ea3a8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition state of the partition on which this class will do operations.  <a href="#a41bfa4e1f3daf7162be75d8ac4ea3a8b">More...</a><br /></td></tr>
<tr class="separator:a41bfa4e1f3daf7162be75d8ac4ea3a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaab3bd06133df5ee8c3e6dcd51b2e08"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#abaab3bd06133df5ee8c3e6dcd51b2e08">m_table_name</a></td></tr>
<tr class="memdesc:abaab3bd06133df5ee8c3e6dcd51b2e08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partitioned table name, in form of .  <a href="#abaab3bd06133df5ee8c3e6dcd51b2e08">More...</a><br /></td></tr>
<tr class="separator:abaab3bd06133df5ee8c3e6dcd51b2e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad112cefa4926a6e656cd5a51f436108"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdict__table__t.html">dict_table_t</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#aad112cefa4926a6e656cd5a51f436108">m_old</a></td></tr>
<tr class="memdesc:aad112cefa4926a6e656cd5a51f436108"><td class="mdescLeft">&#160;</td><td class="mdescRight">The InnoDB table object for old partition.  <a href="#aad112cefa4926a6e656cd5a51f436108">More...</a><br /></td></tr>
<tr class="separator:aad112cefa4926a6e656cd5a51f436108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47fef3e3222fe7d214aa081cbeda18fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classalter__part.html#a47fef3e3222fe7d214aa081cbeda18fb">m_new</a></td></tr>
<tr class="memdesc:a47fef3e3222fe7d214aa081cbeda18fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The InnoDB table object for newly created partition.  <a href="#a47fef3e3222fe7d214aa081cbeda18fb">More...</a><br /></td></tr>
<tr class="separator:a47fef3e3222fe7d214aa081cbeda18fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class(interface) which manages the operations for partitions of states in different categories during ALTER PARTITION. </p>
<p>There are four categories for now:</p><ol type="1">
<li>normal: mapping to PART_NORMAL, which means the partition is not changed</li>
<li>add: mapping to PART_TO_BE_ADDED</li>
<li>drop: mapping to PART_TO_BE_DROPPED, PART_TO_BE_REORGED and PART_REORGED_DROPPED</li>
<li>change: mapping to PART_CHANGED </li>
</ol>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a67de1752a78200f02c4fd00d129d894e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67de1752a78200f02c4fd00d129d894e">&#9670;&nbsp;</a></span>~alter_part()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual alter_part::~alter_part </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Virtual destructor. </p>

</div>
</div>
<a id="a3025222fc10e5697c764727c5c3da6ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3025222fc10e5697c764727c5c3da6ba">&#9670;&nbsp;</a></span>alter_part()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">alter_part::alter_part </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>part_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="partition__element_8h.html#a8e92adad4824dfcc0d76f041f23f62f7">partition_state</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> **&#160;</td>
          <td class="paramname"><em>old</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>InnoDB transaction, nullptr if not used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">part_id</td><td>Partition id in the table. This could be partition id for either old table or new table, callers should remember which one is applicable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>Partition state of the partition on which this class will do operations. If this is for one partition in new table, the partition state is the same for both the new partition and the corresponding old partition </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table_name</td><td>Partitioned table name, in the form of db/table, which considers the charset </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">old</td><td>InnoDB table object for old partition, default is nullptr, which means there is no corresponding object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a98e1bd3f6993b7cc1d5ed7ce8ce0d78d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98e1bd3f6993b7cc1d5ed7ce8ce0d78d">&#9670;&nbsp;</a></span>build_partition_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> alter_part::build_partition_name </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *&#160;</td>
          <td class="paramname"><em>dd_part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>temp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build the partition name for specified partition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dd_part</td><td>dd::Partition </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">temp</td><td>True if this is a temporary name </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">name</td><td>Partition name buffer of length FN_REFLEN </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful. </dd></dl>

</div>
</div>
<a id="a36987a3594db20fe12b7ee60f2453dd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36987a3594db20fe12b7ee60f2453dd5">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int alter_part::create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>part_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *&#160;</td>
          <td class="paramname"><em>dd_part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tablespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>file_per_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t&#160;</td>
          <td class="paramname"><em>autoinc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new partition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">part_name</td><td>Partition name, including db/table </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">dd_part</td><td>dd::Partition </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>Table format </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tablespace</td><td>Tablespace of this partition, if length is 0, it means no tablespace specified </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">file_per_table</td><td>Current value of innodb_file_per_table </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">autoinc</td><td>Next AUTOINC value to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 or error number </dd></dl>

</div>
</div>
<a id="a5df2d9dcd3cd603f541c1c8c4037f93f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df2d9dcd3cd603f541c1c8c4037f93f">&#9670;&nbsp;</a></span>free_old_part()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void alter_part::free_old_part </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>check_in_cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>part_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the freed old partition to nullptr to avoid dangling pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">check_in_cache</td><td>whether we need to check table in cache </td></tr>
    <tr><td class="paramname">part_name</td><td>Partiioned table name . </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3a261f7e244ed3a9136af02d561a44d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a261f7e244ed3a9136af02d561a44d6">&#9670;&nbsp;</a></span>new_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdict__table__t.html">dict_table_t</a>* alter_part::new_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the InnoDB table object for newly created partition if applicable. </p>
<dl class="section return"><dt>Returns</dt><dd>the InnoDB table object or nullptr if not applicable </dd></dl>

</div>
</div>
<a id="a75dcbc5292d7d3bf346b0c0688a63a6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75dcbc5292d7d3bf346b0c0688a63a6c">&#9670;&nbsp;</a></span>part_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> alter_part::part_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the partition id. </p>

</div>
</div>
<a id="aeb388ac6f423afae9594d885c20c9956"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb388ac6f423afae9594d885c20c9956">&#9670;&nbsp;</a></span>prepare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int alter_part::prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>altered_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *&#160;</td>
          <td class="paramname"><em>old_part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *&#160;</td>
          <td class="paramname"><em>new_part</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">altered_table</td><td>Table definition after the ALTER </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_part</td><td>the stored old partition or nullptr if no corresponding one exists </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">new_part</td><td>the stored new partition or nullptr if no corresponding one exists </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 or error number </dd></dl>

<p>Reimplemented in <a class="el" href="classalter__part__change.html#a34c025f9be646b23fbb799eae4b865f0">alter_part_change</a>, <a class="el" href="classalter__part__add.html#ad65258e63b8749fc0583f1bc8106115d">alter_part_add</a>, and <a class="el" href="classalter__part__normal.html#a40e52b48a4e9a873a141d198e43c2466">alter_part_normal</a>.</p>

</div>
</div>
<a id="a426476be6b079c16d458641a55396c6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a426476be6b079c16d458641a55396c6e">&#9670;&nbsp;</a></span>rollback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void alter_part::rollback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rollback. </p>

<p>Reimplemented in <a class="el" href="classalter__part__change.html#a664cf3c770d4fe3d1a2e26735fa7e42b">alter_part_change</a>, and <a class="el" href="classalter__part__add.html#a02b41f5befd9f64891d4c5c107199077">alter_part_add</a>.</p>

</div>
</div>
<a id="a7efe75422c216ace36ca010bee5e16d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7efe75422c216ace36ca010bee5e16d4">&#9670;&nbsp;</a></span>state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="partition__element_8h.html#a8e92adad4824dfcc0d76f041f23f62f7">partition_state</a> alter_part::state </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the partition state. </p>

</div>
</div>
<a id="a330e158b50375e312947bcc9864e1549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a330e158b50375e312947bcc9864e1549">&#9670;&nbsp;</a></span>try_commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int alter_part::try_commit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>altered_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *&#160;</td>
          <td class="paramname"><em>old_part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdd_1_1Partition.html">dd::Partition</a> *&#160;</td>
          <td class="paramname"><em>new_part</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to commit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>Table definition before the ALTER </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">altered_table</td><td>Table definition after the ALTER </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_part</td><td>the stored old partition or nullptr if no corresponding one exists </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">new_part</td><td>the stored new partition or nullptr if no corresponding one exists </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 or error number </dd></dl>

<p>Reimplemented in <a class="el" href="classalter__part__change.html#ac8f87cb710d771f9e04f00cb34270162">alter_part_change</a>, <a class="el" href="classalter__part__drop.html#af04143e0e5907ab21b0fa6d4c80e577a">alter_part_drop</a>, <a class="el" href="classalter__part__add.html#ab184d53e662673dbe2f8cd91aad9ece6">alter_part_add</a>, and <a class="el" href="classalter__part__normal.html#ab6f283e0708ddb37676cc31a31ab7afd">alter_part_normal</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a47fef3e3222fe7d214aa081cbeda18fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47fef3e3222fe7d214aa081cbeda18fb">&#9670;&nbsp;</a></span>m_new</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdict__table__t.html">dict_table_t</a>* alter_part::m_new</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The InnoDB table object for newly created partition. </p>

</div>
</div>
<a id="aad112cefa4926a6e656cd5a51f436108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad112cefa4926a6e656cd5a51f436108">&#9670;&nbsp;</a></span>m_old</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdict__table__t.html">dict_table_t</a>** alter_part::m_old</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The InnoDB table object for old partition. </p>

</div>
</div>
<a id="a7dfc6b8317e4675963affe2e4fdee261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dfc6b8317e4675963affe2e4fdee261">&#9670;&nbsp;</a></span>m_part_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> alter_part::m_part_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Partition id in the table. </p>
<p>This could be partition id for either old table or new table, callers should remember which one is applicable </p>

</div>
</div>
<a id="a41bfa4e1f3daf7162be75d8ac4ea3a8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41bfa4e1f3daf7162be75d8ac4ea3a8b">&#9670;&nbsp;</a></span>m_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="partition__element_8h.html#a8e92adad4824dfcc0d76f041f23f62f7">partition_state</a> alter_part::m_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Partition state of the partition on which this class will do operations. </p>
<p>If this is for one partition in new table, the partition state is the same for both the new partition and the corresponding old partition </p>

</div>
</div>
<a id="abaab3bd06133df5ee8c3e6dcd51b2e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaab3bd06133df5ee8c3e6dcd51b2e08">&#9670;&nbsp;</a></span>m_table_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* alter_part::m_table_name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Partitioned table name, in form of . </p>
<p>/db/table, which already considers the charset </p>

</div>
</div>
<a id="a7aaf57e2f2fbf9c112a515413786fea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aaf57e2f2fbf9c112a515413786fea4">&#9670;&nbsp;</a></span>m_trx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrx__t.html">trx_t</a>* const alter_part::m_trx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>InnoDB transaction, nullptr if not used. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>storage/innobase/handler/<a class="el" href="handler0alter_8cc.html">handler0alter.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classalter__part.html">alter_part</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
