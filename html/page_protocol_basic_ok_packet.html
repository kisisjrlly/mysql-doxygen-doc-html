<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: OK_Packet</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_protocol_basic_ok_packet.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">OK_Packet </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>An OK packet is sent from the server to the client to signal successful completion of a command.</p>
<p>As of MySQL 5.7.5, OK packets are also used to indicate EOF, and EOF packets are deprecated.</p>
<p>if CLIENT_PROTOCOL_41 is set, the packet contains a warning count.</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>The Payload of an OK Packet</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int1">int&lt;1&gt;</a> </td><td>header </td><td><code>0x00</code> or <code>0xFE</code> the OK packet header </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#sect_protocol_basic_dt_int_le">int&lt;lenenc&gt;</a> </td><td>affected_rows </td><td>affected rows </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#sect_protocol_basic_dt_int_le">int&lt;lenenc&gt;</a> </td><td>last_insert_id </td><td>last insert-id </td></tr>
<tr>
<td colspan="3">if capabilities &amp; CLIENT_PROTOCOL_41 { </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>status_flags </td><td><a class="el" href="mysql__com_8h.html#a1d854e841086925be1883e4d7b4e8cad">SERVER_STATUS_flags_enum</a> </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>warnings </td><td>number of warnings </td></tr>
<tr>
<td colspan="3">} else if capabilities &amp; CLIENT_TRANSACTIONS { </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int2">int&lt;2&gt;</a> </td><td>status_flags </td><td><a class="el" href="mysql__com_8h.html#a1d854e841086925be1883e4d7b4e8cad">SERVER_STATUS_flags_enum</a> </td></tr>
<tr>
<td colspan="3">} </td></tr>
<tr>
<td colspan="3">if capabilities &amp; CLIENT_SESSION_TRACK </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_le">string&lt;lenenc&gt;</a> </td><td>info </td><td>human readable status information </td></tr>
<tr>
<td colspan="3">if status_flags &amp; SERVER_SESSION_STATE_CHANGED { </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_le">string&lt;lenenc&gt;</a> </td><td>session state info </td><td><a class="anchor" id="a_protocol_basic_ok_packet_sessinfo"></a> <a class="el" href="page_protocol_basic_ok_packet.html#sect_protocol_basic_ok_packet_sessinfo">Session State Information</a> </td></tr>
<tr>
<td colspan="3">} </td></tr>
<tr>
<td colspan="3">} else { </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_eof">string&lt;EOF&gt;</a> </td><td>info </td><td>human readable status information </td></tr>
<tr>
<td colspan="3">} </td></tr>
</table>
<p>These rules distinguish whether the packet represents OK or EOF:</p><ul>
<li>OK: header = 0 and length of packet &gt; 7</li>
<li>EOF: header = 0xfe and length of packet &lt; 9</li>
</ul>
<p>To ensure backward compatibility between old (prior to 5.7.5) and new (5.7.5 and up) versions of MySQL, new clients advertise the CLIENT_DEPRECATE_EOF flag:</p><ul>
<li>Old clients do not know about this flag and do not advertise it. Consequently, the server does not send OK packets that represent EOF. (Old servers never do this, anyway. New servers recognize the absence of the flag to mean they should not.)</li>
<li>New clients advertise this flag. Old servers do not know this flag and do not send OK packets that represent EOF. New servers recognize the flag and can send OK packets that represent EOF.</li>
</ul>
<h1>Example </h1>
<p>OK with CLIENT_PROTOCOL_41. 0 affected rows, last-insert-id was 0, AUTOCOMMIT enabled, 0 warnings. No further info.</p>
<div class="fragment"><div class="line">07 00 00 02 00 00 00 02    00 00 00</div></div><!-- fragment --><h1><a class="anchor" id="sect_protocol_basic_ok_packet_sessinfo"></a>
Session State Information</h1>
<p>State-change information is sent in the OK packet as a array of state-change blocks which are made up of:</p>
<a class="anchor" id=""></a>
<table class="doxtable">
<caption>Layout of Session State Information</caption>
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_integers.html#a_protocol_type_int1">int&lt;1&gt;</a> </td><td>type </td><td>type of data. See enum_session_state_type </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_le">string&lt;lenenc&gt;</a> </td><td>data </td><td>data of the changed session info </td></tr>
</table>
<p>Interpretation of the data field depends on the type value:</p>
<h2><a class="anchor" id="sect_protocol_basic_ok_packet_sessinfo_SESSION_TRACK_SYSTEM_VARIABLES"></a>
SESSION_TRACK_SYSTEM_VARIABLES</h2>
<table class="doxtable">
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_le">string&lt;lenenc&gt;</a> </td><td>name </td><td>name of the changed system variable </td></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_le">string&lt;lenenc&gt;</a> </td><td>value </td><td>value of the changed system variable </td></tr>
</table>
<p>Example:</p>
<p>After a SET autocommit = OFF statement: </p><table class="doxtable">
<tr>
<td><div class="fragment"><div class="line">00 0f1 0a 61 75 74 6f 63   6f 6d 6d 69 74 03 4f 46 46</div></div><!-- fragment --> </td><td><div class="fragment"><div class="line">....autocommit.OFF</div></div><!-- fragment --> </td></tr>
</table>
<h2><a class="anchor" id="sect_protocol_basic_ok_packet_sessinfo_SESSION_TRACK_SCHEMA"></a>
SESSION_TRACK_SCHEMA</h2>
<table class="doxtable">
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_le">string&lt;lenenc&gt;</a> </td><td>name </td><td>name of the changed schema </td></tr>
</table>
<p>Example:</p>
<p>After a USE test statement:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><div class="line">01 05 04 74 65 73 74</div></div><!-- fragment --> </td><td><div class="fragment"><div class="line">...test</div></div><!-- fragment --> </td></tr>
</table>
<h2><a class="anchor" id="sect_protocol_basic_ok_packet_sessinfo_SESSION_TRACK_STATE_CHANGE"></a>
SESSION_TRACK_STATE_CHANGE</h2>
<p>A flag byte that indicates whether session state changes occurred. This flag is represented as an ASCII value.</p>
<table class="doxtable">
<tr>
<th>Type</th><th>Name</th><th>Description </th></tr>
<tr>
<td><a class="el" href="page_protocol_basic_dt_strings.html#sect_protocol_basic_dt_string_le">string&lt;lenenc&gt;</a> </td><td>is_tracked </td><td><code>0x31</code> ("1") if state tracking got enabled. </td></tr>
</table>
<p>Example:</p>
<p>After a SET SESSION session_track_state_change = 1 statement:</p>
<table class="doxtable">
<tr>
<td><div class="fragment"><div class="line">03 02 01 31</div></div><!-- fragment --> </td><td><div class="fragment"><div class="line">...1</div></div><!-- fragment --> </td></tr>
</table>
<p>See also net_send_ok() </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="PAGE_PROTOCOL.html">Client/Server Protocol</a></li><li class="navelem"><a class="el" href="page_protocol_basics.html">Protocol Basics</a></li><li class="navelem"><a class="el" href="page_protocol_basic_response_packets.html">Generic Response Packets</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
