<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/row0log.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('row0log_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">row0log.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Modification log for online index creation and online table rebuild.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="my__psi__config_8h_source.html">my_psi_config.h</a>&quot;</code><br />
<code>#include &quot;univ.i&quot;</code><br />
<code>#include &quot;<a class="el" href="data0types_8h_source.html">data0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0types_8h_source.html">dict0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mtr0types_8h_source.html">mtr0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0types_8h_source.html">que0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rem0types_8h_source.html">rem0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0types_8h_source.html">row0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0types_8h_source.html">trx0types.h</a>&quot;</code><br />
<code>#include &quot;row0log.ic&quot;</code><br />
</div>
<p><a href="row0log_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab8bf777f7ec7258ca8ad818c07b8b507"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#ab8bf777f7ec7258ca8ad818c07b8b507">row_log_allocate</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> same_pk, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *add_cols, const ulint *col_map, const char *<a class="el" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>)</td></tr>
<tr class="memdesc:ab8bf777f7ec7258ca8ad818c07b8b507"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the row log for an index and flag the index for online creation.  <a href="#ab8bf777f7ec7258ca8ad818c07b8b507">More...</a><br /></td></tr>
<tr class="separator:ab8bf777f7ec7258ca8ad818c07b8b507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfbfbdb0b35bb7009854f6262d1f9e20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#acfbfbdb0b35bb7009854f6262d1f9e20">row_log_free</a> (<a class="el" href="structrow__log__t.html">row_log_t</a> *&amp;log)</td></tr>
<tr class="memdesc:acfbfbdb0b35bb7009854f6262d1f9e20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the row log for an index that was being created online.  <a href="#acfbfbdb0b35bb7009854f6262d1f9e20">More...</a><br /></td></tr>
<tr class="separator:acfbfbdb0b35bb7009854f6262d1f9e20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a664b8f93041997e0e3bdbc269ac0c5ce"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a664b8f93041997e0e3bdbc269ac0c5ce">row_log_abort_sec</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a664b8f93041997e0e3bdbc269ac0c5ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the row log for an index on which online creation was aborted.  <a href="#a664b8f93041997e0e3bdbc269ac0c5ce">More...</a><br /></td></tr>
<tr class="separator:a664b8f93041997e0e3bdbc269ac0c5ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee3b0b349281d969f375e0e93ddb0cc"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a2ee3b0b349281d969f375e0e93ddb0cc">row_log_online_op_try</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *tuple, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id)</td></tr>
<tr class="memdesc:a2ee3b0b349281d969f375e0e93ddb0cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to log an operation to a secondary index that is (or was) being created.  <a href="#a2ee3b0b349281d969f375e0e93ddb0cc">More...</a><br /></td></tr>
<tr class="separator:a2ee3b0b349281d969f375e0e93ddb0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a740bd576e272727a73f1f4692ac38021"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a740bd576e272727a73f1f4692ac38021">row_log_online_op</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *tuple, <a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> trx_id) UNIV_COLD</td></tr>
<tr class="memdesc:a740bd576e272727a73f1f4692ac38021"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an operation to a secondary index that is (or was) being created.  <a href="#a740bd576e272727a73f1f4692ac38021">More...</a><br /></td></tr>
<tr class="separator:a740bd576e272727a73f1f4692ac38021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea190d63dea39c8e2810b70bfb158579"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#aea190d63dea39c8e2810b70bfb158579">row_log_table_get_error</a> (const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:aea190d63dea39c8e2810b70bfb158579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the error status of the online index rebuild log.  <a href="#aea190d63dea39c8e2810b70bfb158579">More...</a><br /></td></tr>
<tr class="separator:aea190d63dea39c8e2810b70bfb158579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ad8187dc3885e246650df2ea1c3555"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a89ad8187dc3885e246650df2ea1c3555">row_log_col_is_indexed</a> (const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint v_no)</td></tr>
<tr class="memdesc:a89ad8187dc3885e246650df2ea1c3555"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a virtual column is indexed in the new table being created during alter table.  <a href="#a89ad8187dc3885e246650df2ea1c3555">More...</a><br /></td></tr>
<tr class="separator:a89ad8187dc3885e246650df2ea1c3555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52761cd4ac7d3a30189487d132937095"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a52761cd4ac7d3a30189487d132937095">row_log_table_delete</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *ventry, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets, const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *sys) UNIV_COLD</td></tr>
<tr class="memdesc:a52761cd4ac7d3a30189487d132937095"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs a delete operation to a table that is being rebuilt.  <a href="#a52761cd4ac7d3a30189487d132937095">More...</a><br /></td></tr>
<tr class="separator:a52761cd4ac7d3a30189487d132937095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12165cb9333fd639110852572f480dc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a12165cb9333fd639110852572f480dc8">row_log_table_update</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *old_pk, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *new_v_row, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *old_v_row) UNIV_COLD</td></tr>
<tr class="memdesc:a12165cb9333fd639110852572f480dc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an update operation to a table that is being rebuilt.  <a href="#a12165cb9333fd639110852572f480dc8">More...</a><br /></td></tr>
<tr class="separator:a12165cb9333fd639110852572f480dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8bed3280da8ebd861f9db5f7099579a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#ac8bed3280da8ebd861f9db5f7099579a">row_log_table_get_pk</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *sys, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> **heap) UNIV_COLD</td></tr>
<tr class="memdesc:ac8bed3280da8ebd861f9db5f7099579a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs the old PRIMARY KEY and DB_TRX_ID,DB_ROLL_PTR of a table that is being rebuilt.  <a href="#ac8bed3280da8ebd861f9db5f7099579a">More...</a><br /></td></tr>
<tr class="separator:ac8bed3280da8ebd861f9db5f7099579a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aabd002cb042102b2ea403c00db6f6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a5aabd002cb042102b2ea403c00db6f6d">row_log_table_insert</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *rec, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *ventry, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const ulint *offsets) UNIV_COLD</td></tr>
<tr class="memdesc:a5aabd002cb042102b2ea403c00db6f6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an insert to a table that is being rebuilt.  <a href="#a5aabd002cb042102b2ea403c00db6f6d">More...</a><br /></td></tr>
<tr class="separator:a5aabd002cb042102b2ea403c00db6f6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d59edd5e228af05681e1df877a117e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a7d59edd5e228af05681e1df877a117e1">row_log_table_blob_free</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no) UNIV_COLD</td></tr>
<tr class="memdesc:a7d59edd5e228af05681e1df877a117e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notes that a BLOB is being freed during online ALTER TABLE.  <a href="#a7d59edd5e228af05681e1df877a117e1">More...</a><br /></td></tr>
<tr class="separator:a7d59edd5e228af05681e1df877a117e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f3d85e4d05c5245f82467480ea64ed5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a4f3d85e4d05c5245f82467480ea64ed5">row_log_table_blob_alloc</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> page_no) UNIV_COLD</td></tr>
<tr class="memdesc:a4f3d85e4d05c5245f82467480ea64ed5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notes that a BLOB is being allocated during online ALTER TABLE.  <a href="#a4f3d85e4d05c5245f82467480ea64ed5">More...</a><br /></td></tr>
<tr class="separator:a4f3d85e4d05c5245f82467480ea64ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b57238888b207ec11e0acf7cd33c9b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a16b57238888b207ec11e0acf7cd33c9b">row_log_table_apply</a> (<a class="el" href="structque__thr__t.html">que_thr_t</a> *thr, <a class="el" href="structdict__table__t.html">dict_table_t</a> *old_table, struct <a class="el" href="structTABLE.html">TABLE</a> *table, <a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *stage)</td></tr>
<tr class="memdesc:a16b57238888b207ec11e0acf7cd33c9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the row_log_table log to a table upon completing rebuild.  <a href="#a16b57238888b207ec11e0acf7cd33c9b">More...</a><br /></td></tr>
<tr class="separator:a16b57238888b207ec11e0acf7cd33c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33639b4cd00f60dec3dfd9659ec1f601"><td class="memItemLeft" align="right" valign="top"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a33639b4cd00f60dec3dfd9659ec1f601">row_log_get_max_trx</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a33639b4cd00f60dec3dfd9659ec1f601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the latest transaction ID that has invoked row_log_online_op() during online creation.  <a href="#a33639b4cd00f60dec3dfd9659ec1f601">More...</a><br /></td></tr>
<tr class="separator:a33639b4cd00f60dec3dfd9659ec1f601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7757cbe09a71a3ae798140d20d1464e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#a7757cbe09a71a3ae798140d20d1464e9">row_log_apply</a> (const <a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, struct <a class="el" href="structTABLE.html">TABLE</a> *table, <a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *stage)</td></tr>
<tr class="memdesc:a7757cbe09a71a3ae798140d20d1464e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the row log to the index upon completing index creation.  <a href="#a7757cbe09a71a3ae798140d20d1464e9">More...</a><br /></td></tr>
<tr class="separator:a7757cbe09a71a3ae798140d20d1464e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add17d64291bce70ca0fceaee83c1c321"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="row0log_8h.html#add17d64291bce70ca0fceaee83c1c321">row_log_estimate_work</a> (const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:add17d64291bce70ca0fceaee83c1c321"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate how much work is to be done by the log apply phase of an ALTER TABLE for this index.  <a href="#add17d64291bce70ca0fceaee83c1c321">More...</a><br /></td></tr>
<tr class="separator:add17d64291bce70ca0fceaee83c1c321"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Modification log for online index creation and online table rebuild. </p>
<p>Created 2011-05-26 Marko Makela </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a664b8f93041997e0e3bdbc269ac0c5ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a664b8f93041997e0e3bdbc269ac0c5ce">&#9670;&nbsp;</a></span>row_log_abort_sec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void row_log_abort_sec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free the row log for an index on which online creation was aborted. </p>
<p>in/out: index (x-latched) </p>

</div>
</div>
<a id="ab8bf777f7ec7258ca8ad818c07b8b507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8bf777f7ec7258ca8ad818c07b8b507">&#9670;&nbsp;</a></span>row_log_allocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> row_log_allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>same_pk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>add_cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>col_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate the row log for an index and flag the index for online creation. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if success, false if not </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index </td></tr>
    <tr><td class="paramname">table</td><td>in/out: new table being rebuilt, or NULL when creating a secondary index </td></tr>
    <tr><td class="paramname">same_pk</td><td>in: whether the definition of the PRIMARY KEY has remained the same </td></tr>
    <tr><td class="paramname">add_cols</td><td>in: default values of added columns, or NULL </td></tr>
    <tr><td class="paramname">col_map</td><td>in: mapping of old column numbers to new ones, or NULL if !table </td></tr>
    <tr><td class="paramname">path</td><td>in: where to create temporary file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7757cbe09a71a3ae798140d20d1464e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7757cbe09a71a3ae798140d20d1464e9">&#9670;&nbsp;</a></span>row_log_apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_apply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply the row log to the index upon completing index creation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trx</td><td>transaction (for checking if the operation was interrupted) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>secondary index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>MySQL table (for reporting duplicates) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">stage</td><td>performance schema accounting object, used by ALTER TABLE. stage-&gt;begin_phase_log_index() will be called initially and then stage-&gt;inc() will be called for each block of log that is applied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, or error code on failure </dd></dl>

</div>
</div>
<a id="a89ad8187dc3885e246650df2ea1c3555"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89ad8187dc3885e246650df2ea1c3555">&#9670;&nbsp;</a></span>row_log_col_is_indexed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> row_log_col_is_indexed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>v_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether a virtual column is indexed in the new table being created during alter table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>cluster index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">v_no</td><td>virtual column number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if it is indexed, else false </dd></dl>

</div>
</div>
<a id="add17d64291bce70ca0fceaee83c1c321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add17d64291bce70ca0fceaee83c1c321">&#9670;&nbsp;</a></span>row_log_estimate_work()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint row_log_estimate_work </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Estimate how much work is to be done by the log apply phase of an ALTER TABLE for this index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index whose log to assess </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>work to be done by log-apply in abstract units </dd></dl>

</div>
</div>
<a id="acfbfbdb0b35bb7009854f6262d1f9e20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfbfbdb0b35bb7009854f6262d1f9e20">&#9670;&nbsp;</a></span>row_log_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrow__log__t.html">row_log_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free the row log for an index that was being created online. </p>
<p>in,own: row log</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log</td><td>in,own: row log </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a33639b4cd00f60dec3dfd9659ec1f601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33639b4cd00f60dec3dfd9659ec1f601">&#9670;&nbsp;</a></span>row_log_get_max_trx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a> row_log_get_max_trx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the latest transaction ID that has invoked row_log_online_op() during online creation. </p>
<dl class="section return"><dt>Returns</dt><dd>latest transaction ID, or 0 if nothing was logged </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index, must be locked </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a740bd576e272727a73f1f4692ac38021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a740bd576e272727a73f1f4692ac38021">&#9670;&nbsp;</a></span>row_log_online_op()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_online_op </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>tuple</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs an operation to a secondary index that is (or was) being created. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index, S or X latched </td></tr>
    <tr><td class="paramname">tuple</td><td>in: index tuple </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction ID for insert, or 0 for delete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2ee3b0b349281d969f375e0e93ddb0cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ee3b0b349281d969f375e0e93ddb0cc">&#9670;&nbsp;</a></span>row_log_online_op_try()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> row_log_online_op_try </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>tuple</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="trx0types_8h.html#a91afca43a639c098efe14a9069a1d4ec">trx_id_t</a>&#160;</td>
          <td class="paramname"><em>trx_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to log an operation to a secondary index that is (or was) being created. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if the operation was logged or can be ignored </td></tr>
    <tr><td class="paramname">false</td><td>if online index creation is not taking place </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index, S or X latched </td></tr>
    <tr><td class="paramname">tuple</td><td>in: index tuple </td></tr>
    <tr><td class="paramname">trx_id</td><td>in: transaction ID for insert, or 0 for delete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a16b57238888b207ec11e0acf7cd33c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b57238888b207ec11e0acf7cd33c9b">&#9670;&nbsp;</a></span>row_log_table_apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structque__thr__t.html">que_thr_t</a> *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>old_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classut__stage__alter__t.html">ut_stage_alter_t</a> *&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply the row_log_table log to a table upon completing rebuild. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thr</td><td>query graph </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_table</td><td>old table </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>MySQL table (for reporting duplicates) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">stage</td><td>performance schema accounting object, used by ALTER TABLE. stage-&gt;begin_phase_log_table() will be called initially and then stage-&gt;inc() will be called for each block of log that is applied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, or error code on failure </dd></dl>

</div>
</div>
<a id="a4f3d85e4d05c5245f82467480ea64ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f3d85e4d05c5245f82467480ea64ed5">&#9670;&nbsp;</a></span>row_log_table_blob_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_blob_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notes that a BLOB is being allocated during online ALTER TABLE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: clustered index, X-latched </td></tr>
    <tr><td class="paramname">page_no</td><td>in: starting page number of the BLOB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7d59edd5e228af05681e1df877a117e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d59edd5e228af05681e1df877a117e1">&#9670;&nbsp;</a></span>row_log_table_blob_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_blob_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>page_no</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notes that a BLOB is being freed during online ALTER TABLE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: clustered index, X-latched </td></tr>
    <tr><td class="paramname">page_no</td><td>in: starting page number of the BLOB </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a52761cd4ac7d3a30189487d132937095"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52761cd4ac7d3a30189487d132937095">&#9670;&nbsp;</a></span>row_log_table_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>sys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs a delete operation to a table that is being rebuilt. </p>
<p>This will be merged in row_log_table_apply_delete(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: current transaction </td></tr>
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">ventry</td><td>in: dtuple holding virtual column info </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
    <tr><td class="paramname">sys</td><td>in: DB_TRX_ID,DB_ROLL_PTR that should be logged, or NULL to use those in rec </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea190d63dea39c8e2810b70bfb158579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea190d63dea39c8e2810b70bfb158579">&#9670;&nbsp;</a></span>row_log_table_get_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> row_log_table_get_error </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the error status of the online index rebuild log. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: clustered index of a table that is being rebuilt online </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac8bed3280da8ebd861f9db5f7099579a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8bed3280da8ebd861f9db5f7099579a">&#9670;&nbsp;</a></span>row_log_table_get_pk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structdtuple__t.html">dtuple_t</a>* row_log_table_get_pk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>sys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> **&#160;</td>
          <td class="paramname"><em>heap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs the old PRIMARY KEY and DB_TRX_ID,DB_ROLL_PTR of a table that is being rebuilt. </p>
<dl class="section return"><dt>Returns</dt><dd>tuple of PRIMARY KEY,DB_TRX_ID,DB_ROLL_PTR in the rebuilt table, or NULL if the PRIMARY KEY definition does not change </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: current transaction </td></tr>
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
    <tr><td class="paramname">sys</td><td>out: DB_TRX_ID,DB_ROLL_PTR for row_log_table_delete(), or NULL </td></tr>
    <tr><td class="paramname">heap</td><td>in/out: memory heap where allocated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5aabd002cb042102b2ea403c00db6f6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aabd002cb042102b2ea403c00db6f6d">&#9670;&nbsp;</a></span>row_log_table_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_insert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>ventry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs an insert to a table that is being rebuilt. </p>
<p>This will be merged in row_log_table_apply_insert(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">ventry</td><td>in: dtuple holding virtual column info </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a12165cb9333fd639110852572f480dc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12165cb9333fd639110852572f480dc8">&#9670;&nbsp;</a></span>row_log_table_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void row_log_table_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ulint *&#160;</td>
          <td class="paramname"><em>offsets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>old_pk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>new_v_row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>old_v_row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs an update operation to a table that is being rebuilt. </p>
<p>This will be merged in row_log_table_apply_update().</p>
<p>Logs an update operation to a table that is being rebuilt.</p>
<p>This will be merged in row_log_table_apply_update(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>in: clustered index leaf page record, page X-latched </td></tr>
    <tr><td class="paramname">index</td><td>in/out: clustered index, S-latched or X-latched </td></tr>
    <tr><td class="paramname">offsets</td><td>in: rec_get_offsets(rec,index) </td></tr>
    <tr><td class="paramname">old_pk</td><td>in: row_log_table_get_pk() before the update </td></tr>
    <tr><td class="paramname">new_v_row</td><td>in: dtuple contains the new virtual columns </td></tr>
    <tr><td class="paramname">old_v_row</td><td>in: dtuple contains the old virtual columns </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="row0log_8h.html">row0log.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
