<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Fil_shard Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classFil__shard.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classFil__shard-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Fil_shard Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7ae0bdd41a3c8148a54fd5fc87bfb8b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a7ae0bdd41a3c8148a54fd5fc87bfb8b2">Fil_shard</a> (size_t shard_id)</td></tr>
<tr class="memdesc:a7ae0bdd41a3c8148a54fd5fc87bfb8b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a7ae0bdd41a3c8148a54fd5fc87bfb8b2">More...</a><br /></td></tr>
<tr class="separator:a7ae0bdd41a3c8148a54fd5fc87bfb8b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae4f79994dfe6237b556e2b1d8bc896"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#acae4f79994dfe6237b556e2b1d8bc896">~Fil_shard</a> ()</td></tr>
<tr class="memdesc:acae4f79994dfe6237b556e2b1d8bc896"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#acae4f79994dfe6237b556e2b1d8bc896">More...</a><br /></td></tr>
<tr class="separator:acae4f79994dfe6237b556e2b1d8bc896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee081766f4ea19fd256619a14e9399a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a3ee081766f4ea19fd256619a14e9399a">id</a> () const</td></tr>
<tr class="separator:a3ee081766f4ea19fd256619a14e9399a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b05f13f6d5bc94e670d1fe10411803"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a52b05f13f6d5bc94e670d1fe10411803">acquire</a> (int line) const</td></tr>
<tr class="memdesc:a52b05f13f6d5bc94e670d1fe10411803"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire the mutex.  <a href="#a52b05f13f6d5bc94e670d1fe10411803">More...</a><br /></td></tr>
<tr class="separator:a52b05f13f6d5bc94e670d1fe10411803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29068a23107f47b12f267e98d3980be2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a29068a23107f47b12f267e98d3980be2">mutex_release</a> () const</td></tr>
<tr class="memdesc:a29068a23107f47b12f267e98d3980be2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the mutex.  <a href="#a29068a23107f47b12f267e98d3980be2">More...</a><br /></td></tr>
<tr class="separator:a29068a23107f47b12f267e98d3980be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c9a1953dfc1e9327933799a6fa04641"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a7c9a1953dfc1e9327933799a6fa04641">mutex_owned</a> () const</td></tr>
<tr class="separator:a7c9a1953dfc1e9327933799a6fa04641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1568ddec8503cb4e1d087a6a57ca1214"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a1568ddec8503cb4e1d087a6a57ca1214">space_acquire</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a1568ddec8503cb4e1d087a6a57ca1214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire a tablespace to prevent it from being dropped concurrently.  <a href="#a1568ddec8503cb4e1d087a6a57ca1214">More...</a><br /></td></tr>
<tr class="separator:a1568ddec8503cb4e1d087a6a57ca1214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b76d4a477d272c5fa8e370b5e2df868"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a7b76d4a477d272c5fa8e370b5e2df868">space_release</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a7b76d4a477d272c5fa8e370b5e2df868"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a tablespace acquired with Fil_shard::space_acquire().  <a href="#a7b76d4a477d272c5fa8e370b5e2df868">More...</a><br /></td></tr>
<tr class="separator:a7b76d4a477d272c5fa8e370b5e2df868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bedc3bce08655ff7c46fe3388bdc04b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a6bedc3bce08655ff7c46fe3388bdc04b">get_space_by_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id) const</td></tr>
<tr class="memdesc:a6bedc3bce08655ff7c46fe3388bdc04b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the fil_space_t instance that maps to space_id.  <a href="#a6bedc3bce08655ff7c46fe3388bdc04b">More...</a><br /></td></tr>
<tr class="separator:a6bedc3bce08655ff7c46fe3388bdc04b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb9a046cc2c8e3d1546bcd5ea2313d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a1eb9a046cc2c8e3d1546bcd5ea2313d3">get_space_by_name</a> (const char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>) const</td></tr>
<tr class="memdesc:a1eb9a046cc2c8e3d1546bcd5ea2313d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the fil_space_t instance that maps to the name.  <a href="#a1eb9a046cc2c8e3d1546bcd5ea2313d3">More...</a><br /></td></tr>
<tr class="separator:a1eb9a046cc2c8e3d1546bcd5ea2313d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac74454336a5d86981da141169a4f9564"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ac74454336a5d86981da141169a4f9564">close_files_in_LRU</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> print_info)</td></tr>
<tr class="memdesc:ac74454336a5d86981da141169a4f9564"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to close a file in the shard LRU list.  <a href="#ac74454336a5d86981da141169a4f9564">More...</a><br /></td></tr>
<tr class="separator:ac74454336a5d86981da141169a4f9564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f976033eb8360a68223b190d9e9f4ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a5f976033eb8360a68223b190d9e9f4ae">remove_from_LRU</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file)</td></tr>
<tr class="memdesc:a5f976033eb8360a68223b190d9e9f4ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the file node from the LRU list.  <a href="#a5f976033eb8360a68223b190d9e9f4ae">More...</a><br /></td></tr>
<tr class="separator:a5f976033eb8360a68223b190d9e9f4ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf55e72d23ff5f87f1b7bca1a5654af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a0bf55e72d23ff5f87f1b7bca1a5654af">file_opened</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file)</td></tr>
<tr class="memdesc:a0bf55e72d23ff5f87f1b7bca1a5654af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the file node to the LRU list if required.  <a href="#a0bf55e72d23ff5f87f1b7bca1a5654af">More...</a><br /></td></tr>
<tr class="separator:a0bf55e72d23ff5f87f1b7bca1a5654af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925aa6cc266965f057b665be00fa0aff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a925aa6cc266965f057b665be00fa0aff">open_system_tablespaces</a> (size_t max_n_open, size_t *n_open)</td></tr>
<tr class="memdesc:a925aa6cc266965f057b665be00fa0aff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open all the system files.  <a href="#a925aa6cc266965f057b665be00fa0aff">More...</a><br /></td></tr>
<tr class="separator:a925aa6cc266965f057b665be00fa0aff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0d7f7014ca425bff8a145cb77d3b429"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#aa0d7f7014ca425bff8a145cb77d3b429">close_file</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> LRU_close)</td></tr>
<tr class="memdesc:aa0d7f7014ca425bff8a145cb77d3b429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a tablespace file.  <a href="#aa0d7f7014ca425bff8a145cb77d3b429">More...</a><br /></td></tr>
<tr class="separator:aa0d7f7014ca425bff8a145cb77d3b429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad684a74752e4a706a543d53b5f848cfa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ad684a74752e4a706a543d53b5f848cfa">close_file</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:ad684a74752e4a706a543d53b5f848cfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close a tablespace file based on tablespace ID.  <a href="#ad684a74752e4a706a543d53b5f848cfa">More...</a><br /></td></tr>
<tr class="separator:ad684a74752e4a706a543d53b5f848cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b932e5031973d8959afb581c90e45f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a7b932e5031973d8959afb581c90e45f3">file_close_to_free</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file, <a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a7b932e5031973d8959afb581c90e45f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare to free a file object from a tablespace memory cache.  <a href="#a7b932e5031973d8959afb581c90e45f3">More...</a><br /></td></tr>
<tr class="separator:a7b932e5031973d8959afb581c90e45f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d0a4b398947496f4ab9a060fcb75fab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a0d0a4b398947496f4ab9a060fcb75fab">close_log_files</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> free_all)</td></tr>
<tr class="memdesc:a0d0a4b398947496f4ab9a060fcb75fab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close log files.  <a href="#a0d0a4b398947496f4ab9a060fcb75fab">More...</a><br /></td></tr>
<tr class="separator:a0d0a4b398947496f4ab9a060fcb75fab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff9043cef534a9ad8e4da036ea87c9d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#aff9043cef534a9ad8e4da036ea87c9d9">close_all_files</a> ()</td></tr>
<tr class="memdesc:aff9043cef534a9ad8e4da036ea87c9d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close all open files.  <a href="#aff9043cef534a9ad8e4da036ea87c9d9">More...</a><br /></td></tr>
<tr class="separator:aff9043cef534a9ad8e4da036ea87c9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2e382c008e4489588878337069279d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a6b2e382c008e4489588878337069279d">needs_encryption_rotate</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a6b2e382c008e4489588878337069279d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the tablespace needs encryption rotation.  <a href="#a6b2e382c008e4489588878337069279d">More...</a><br /></td></tr>
<tr class="separator:a6b2e382c008e4489588878337069279d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf45ec0451857e1a659568c64ca6e939"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#adf45ec0451857e1a659568c64ca6e939">encryption_rotate</a> (size_t *rotate_count)</td></tr>
<tr class="memdesc:adf45ec0451857e1a659568c64ca6e939"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotate the tablespace keys by new master key.  <a href="#adf45ec0451857e1a659568c64ca6e939">More...</a><br /></td></tr>
<tr class="separator:adf45ec0451857e1a659568c64ca6e939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30623e2a927558e4f498c6fb8aeb6811"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a30623e2a927558e4f498c6fb8aeb6811">space_detach</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a30623e2a927558e4f498c6fb8aeb6811"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach a space object from the tablespace memory cache and closes the tablespace files but does not delete them.  <a href="#a30623e2a927558e4f498c6fb8aeb6811">More...</a><br /></td></tr>
<tr class="separator:a30623e2a927558e4f498c6fb8aeb6811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa16da33bccf28e8a8a71bf7b8b5589e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#aa16da33bccf28e8a8a71bf7b8b5589e7">space_delete</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:aa16da33bccf28e8a8a71bf7b8b5589e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the instance that maps to space_id.  <a href="#aa16da33bccf28e8a8a71bf7b8b5589e7">More...</a><br /></td></tr>
<tr class="separator:aa16da33bccf28e8a8a71bf7b8b5589e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0e1fca0fb2f03b0df325d0c844e54b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a1c0e1fca0fb2f03b0df325d0c844e54b">checkpoint</a> (<a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> lwm)</td></tr>
<tr class="memdesc:a1c0e1fca0fb2f03b0df325d0c844e54b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purge entries from m_deleted that are lower than LWM.  <a href="#a1c0e1fca0fb2f03b0df325d0c844e54b">More...</a><br /></td></tr>
<tr class="separator:a1c0e1fca0fb2f03b0df325d0c844e54b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bc2522256548274985753ea5da17d61"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a8bc2522256548274985753ea5da17d61">count_deleted</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo_num)</td></tr>
<tr class="separator:a8bc2522256548274985753ea5da17d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b8ec6b5e1a8d9d67c5bb9b4084a47e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a34b8ec6b5e1a8d9d67c5bb9b4084a47e">is_deleted</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a34b8ec6b5e1a8d9d67c5bb9b4084a47e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a particular undo space_id for a page in the buffer pool has been deleted recently.  <a href="#a34b8ec6b5e1a8d9d67c5bb9b4084a47e">More...</a><br /></td></tr>
<tr class="separator:a34b8ec6b5e1a8d9d67c5bb9b4084a47e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72eecc35cd0788b9b199a2ef805ee365"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a72eecc35cd0788b9b199a2ef805ee365">space_free</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a72eecc35cd0788b9b199a2ef805ee365"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a space object from the tablespace memory cache.  <a href="#a72eecc35cd0788b9b199a2ef805ee365">More...</a><br /></td></tr>
<tr class="separator:a72eecc35cd0788b9b199a2ef805ee365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bf263b8bca9d60ed62941934d6208a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a7bf263b8bca9d60ed62941934d6208a2">space_add</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a7bf263b8bca9d60ed62941934d6208a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map the space ID and name to the tablespace instance.  <a href="#a7bf263b8bca9d60ed62941934d6208a2">More...</a><br /></td></tr>
<tr class="separator:a7bf263b8bca9d60ed62941934d6208a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c2c795cc6175f01b4e69628ad9a8e54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a8c2c795cc6175f01b4e69628ad9a8e54">prepare_to_free_file</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file)</td></tr>
<tr class="memdesc:a8c2c795cc6175f01b4e69628ad9a8e54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare to free a file.  <a href="#a8c2c795cc6175f01b4e69628ad9a8e54">More...</a><br /></td></tr>
<tr class="separator:a8c2c795cc6175f01b4e69628ad9a8e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a338ca14d3abee7397209a56baa634c22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a338ca14d3abee7397209a56baa634c22">remove_from_unflushed_list</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a338ca14d3abee7397209a56baa634c22"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the tablespace is on the unflushed list and there are no pending flushes then remove from the unflushed list.  <a href="#a338ca14d3abee7397209a56baa634c22">More...</a><br /></td></tr>
<tr class="separator:a338ca14d3abee7397209a56baa634c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7793e5e94023dd9988b7dc18fafbda88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a7793e5e94023dd9988b7dc18fafbda88">complete_io</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file, const <a class="el" href="classIORequest.html">IORequest</a> &amp;type)</td></tr>
<tr class="memdesc:a7793e5e94023dd9988b7dc18fafbda88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the data structures when an I/O operation finishes.  <a href="#a7793e5e94023dd9988b7dc18fafbda88">More...</a><br /></td></tr>
<tr class="separator:a7793e5e94023dd9988b7dc18fafbda88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2729429145fc159c003caa83fe604f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a0d2729429145fc159c003caa83fe604f">prepare_file_for_io</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> extend)</td></tr>
<tr class="memdesc:a0d2729429145fc159c003caa83fe604f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares a file for I/O.  <a href="#a0d2729429145fc159c003caa83fe604f">More...</a><br /></td></tr>
<tr class="separator:a0d2729429145fc159c003caa83fe604f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa518f598fb0cf671913692bf7e2f139c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#aa518f598fb0cf671913692bf7e2f139c">mutex_acquire_and_get_space</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;space)</td></tr>
<tr class="memdesc:aa518f598fb0cf671913692bf7e2f139c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserves the mutex and tries to make sure we can open at least one file while holding it.  <a href="#aa518f598fb0cf671913692bf7e2f139c">More...</a><br /></td></tr>
<tr class="separator:aa518f598fb0cf671913692bf7e2f139c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0c8bcf77c8695f3d92598cd8b5328cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ae0c8bcf77c8695f3d92598cd8b5328cc">update_space_name_map</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space, const char *new_name)</td></tr>
<tr class="memdesc:ae0c8bcf77c8695f3d92598cd8b5328cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remap the tablespace to the new name.  <a href="#ae0c8bcf77c8695f3d92598cd8b5328cc">More...</a><br /></td></tr>
<tr class="separator:ae0c8bcf77c8695f3d92598cd8b5328cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e2142dcac84441f383beea05c0471c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a6e2142dcac84441f383beea05c0471c7">flush_file_redo</a> ()</td></tr>
<tr class="memdesc:a6e2142dcac84441f383beea05c0471c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the redo log writes to disk, possibly cached by the OS.  <a href="#a6e2142dcac84441f383beea05c0471c7">More...</a><br /></td></tr>
<tr class="separator:a6e2142dcac84441f383beea05c0471c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98ecbe430c539e2173e3bdd2e9967a9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a98ecbe430c539e2173e3bdd2e9967a9d">flush_file_spaces</a> (uint8_t purpose)</td></tr>
<tr class="memdesc:a98ecbe430c539e2173e3bdd2e9967a9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect the tablespace IDs of unflushed tablespaces in space_ids.  <a href="#a98ecbe430c539e2173e3bdd2e9967a9d">More...</a><br /></td></tr>
<tr class="separator:a98ecbe430c539e2173e3bdd2e9967a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac711f0c6d820f22776851ce902e3ff9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ac711f0c6d820f22776851ce902e3ff9e">space_extend</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size)</td></tr>
<tr class="memdesc:ac711f0c6d820f22776851ce902e3ff9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to extend a tablespace if it is smaller than the specified size.  <a href="#ac711f0c6d820f22776851ce902e3ff9e">More...</a><br /></td></tr>
<tr class="separator:ac711f0c6d820f22776851ce902e3ff9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a1874343bbdfdf4cee462929b248628"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a5a1874343bbdfdf4cee462929b248628">space_flush</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a5a1874343bbdfdf4cee462929b248628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes to disk possible writes cached by the OS.  <a href="#a5a1874343bbdfdf4cee462929b248628">More...</a><br /></td></tr>
<tr class="separator:a5a1874343bbdfdf4cee462929b248628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a285ed2a8b90565a86b368dc0b4de7648"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a285ed2a8b90565a86b368dc0b4de7648">open_file</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> extend)</td></tr>
<tr class="memdesc:a285ed2a8b90565a86b368dc0b4de7648"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file of a tablespace.  <a href="#a285ed2a8b90565a86b368dc0b4de7648">More...</a><br /></td></tr>
<tr class="separator:a285ed2a8b90565a86b368dc0b4de7648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c282d6bf595cbc75d7566bc5e3a1fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a37c282d6bf595cbc75d7566bc5e3a1fa">space_is_flushed</a> (const <a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a37c282d6bf595cbc75d7566bc5e3a1fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if all the file nodes in a space are flushed.  <a href="#a37c282d6bf595cbc75d7566bc5e3a1fa">More...</a><br /></td></tr>
<tr class="separator:a37c282d6bf595cbc75d7566bc5e3a1fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a151055e58cc2032634a2cb14c1f1086a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a151055e58cc2032634a2cb14c1f1086a">space_open</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a151055e58cc2032634a2cb14c1f1086a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open each file of a tablespace if not already open.  <a href="#a151055e58cc2032634a2cb14c1f1086a">More...</a><br /></td></tr>
<tr class="separator:a151055e58cc2032634a2cb14c1f1086a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5231cd717dcd1b7063e9a16290238028"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a5231cd717dcd1b7063e9a16290238028">space_load</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a5231cd717dcd1b7063e9a16290238028"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the files associated with a tablespace and returns a pointer to the fil_space_t that is in the memory cache associated with a space id.  <a href="#a5231cd717dcd1b7063e9a16290238028">More...</a><br /></td></tr>
<tr class="separator:a5231cd717dcd1b7063e9a16290238028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3d77a38a89774b9c2dc65dc8097fd2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#abc3d77a38a89774b9c2dc65dc8097fd2">wait_for_pending_operations</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;space, char **<a class="el" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>) const</td></tr>
<tr class="memdesc:abc3d77a38a89774b9c2dc65dc8097fd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for pending operations on a tablespace to stop.  <a href="#abc3d77a38a89774b9c2dc65dc8097fd2">More...</a><br /></td></tr>
<tr class="separator:abc3d77a38a89774b9c2dc65dc8097fd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18874986b322fc56bd5e22791e90865"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ad18874986b322fc56bd5e22791e90865">space_rename</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, const char *old_path, const char *new_name, const char *new_path_in)</td></tr>
<tr class="memdesc:ad18874986b322fc56bd5e22791e90865"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename a single-table tablespace.  <a href="#ad18874986b322fc56bd5e22791e90865">More...</a><br /></td></tr>
<tr class="separator:ad18874986b322fc56bd5e22791e90865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799c6637bfad718816cc73e87b36571f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a799c6637bfad718816cc73e87b36571f">space_delete</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="el" href="buf0types_8h.html#a64b07ecd8aec364fe56a54bcd279b3b3">buf_remove_t</a> buf_remove)</td></tr>
<tr class="memdesc:a799c6637bfad718816cc73e87b36571f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an IBD or IBU tablespace.  <a href="#a799c6637bfad718816cc73e87b36571f">More...</a><br /></td></tr>
<tr class="separator:a799c6637bfad718816cc73e87b36571f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87eaa4e846eb2ed551258920cabdb51e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a87eaa4e846eb2ed551258920cabdb51e">space_truncate</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size_in_pages)</td></tr>
<tr class="memdesc:a87eaa4e846eb2ed551258920cabdb51e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate the tablespace to needed size.  <a href="#a87eaa4e846eb2ed551258920cabdb51e">More...</a><br /></td></tr>
<tr class="separator:a87eaa4e846eb2ed551258920cabdb51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf66de75fbe396ea09dba074ca49d0c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#adbf66de75fbe396ea09dba074ca49d0c">space_create</a> (const char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>, <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, uint32_t <a class="el" href="mi__test1_8cc.html#a6eec09a91807e20d7b3d6ef3da594067">flags</a>, <a class="el" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a> purpose)</td></tr>
<tr class="memdesc:adbf66de75fbe396ea09dba074ca49d0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a space memory object and put it to the fil_system hash table.  <a href="#adbf66de75fbe396ea09dba074ca49d0c">More...</a><br /></td></tr>
<tr class="separator:adbf66de75fbe396ea09dba074ca49d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4ecb00f7cc8d8597b2aaf7bd922a23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#acd4ecb00f7cc8d8597b2aaf7bd922a23">adjust_space_name</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space, const char *dd_space_name)</td></tr>
<tr class="memdesc:acd4ecb00f7cc8d8597b2aaf7bd922a23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust temporary auto-generated names created during file discovery with correct tablespace names from the DD.  <a href="#acd4ecb00f7cc8d8597b2aaf7bd922a23">More...</a><br /></td></tr>
<tr class="separator:acd4ecb00f7cc8d8597b2aaf7bd922a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b634c4c06d0dc455e613d1167ffe89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a95b634c4c06d0dc455e613d1167ffe89">space_check_exists</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, const char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> print_err, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> adjust_space, <a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, <a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> table_id)</td></tr>
<tr class="memdesc:a95b634c4c06d0dc455e613d1167ffe89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if a matching tablespace exists in the InnoDB tablespace memory cache.  <a href="#a95b634c4c06d0dc455e613d1167ffe89">More...</a><br /></td></tr>
<tr class="separator:a95b634c4c06d0dc455e613d1167ffe89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc0a6762da49d34cb59e90d55624f88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a7bc0a6762da49d34cb59e90d55624f88">do_redo_io</a> (const <a class="el" href="classIORequest.html">IORequest</a> &amp;type, const <a class="el" href="classpage__id__t.html">page_id_t</a> &amp;page_id, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, ulint byte_offset, ulint len, void *buf)</td></tr>
<tr class="memdesc:a7bc0a6762da49d34cb59e90d55624f88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read or write log file data synchronously.  <a href="#a7bc0a6762da49d34cb59e90d55624f88">More...</a><br /></td></tr>
<tr class="separator:a7bc0a6762da49d34cb59e90d55624f88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd85d977ab859774dc5c06fd680e2c34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#abd85d977ab859774dc5c06fd680e2c34">do_io</a> (const <a class="el" href="classIORequest.html">IORequest</a> &amp;type, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> sync, const <a class="el" href="classpage__id__t.html">page_id_t</a> &amp;page_id, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size, ulint byte_offset, ulint len, void *buf, void *message)</td></tr>
<tr class="memdesc:abd85d977ab859774dc5c06fd680e2c34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read or write data.  <a href="#abd85d977ab859774dc5c06fd680e2c34">More...</a><br /></td></tr>
<tr class="separator:abd85d977ab859774dc5c06fd680e2c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b44d5b52d76487fb0956e6d5799cfe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a34b44d5b52d76487fb0956e6d5799cfe">iterate</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> include_log, <a class="el" href="classFil__iterator.html#a6fb530c9ad8ad86eaba80d8d4aa044b5">Fil_iterator::Function</a> &amp;f)</td></tr>
<tr class="memdesc:a34b44d5b52d76487fb0956e6d5799cfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate through all persistent tablespace files (FIL_TYPE_TABLESPACE) returning the nodes via callback function cbk.  <a href="#a34b44d5b52d76487fb0956e6d5799cfe">More...</a><br /></td></tr>
<tr class="separator:a34b44d5b52d76487fb0956e6d5799cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b43f1465bbc99ed7a624097fa3d1fb8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fil0fil_8cc.html#ad9f02bcccb7b9a3e9a30e39d697d0316">fil_load_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a7b43f1465bbc99ed7a624097fa3d1fb8">ibd_open_for_recovery</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, const std::string &amp;<a class="el" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>, <a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;space)</td></tr>
<tr class="memdesc:a7b43f1465bbc99ed7a624097fa3d1fb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an ibd tablespace and add it to the InnoDB data structures.  <a href="#a7b43f1465bbc99ed7a624097fa3d1fb8">More...</a><br /></td></tr>
<tr class="separator:a7b43f1465bbc99ed7a624097fa3d1fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bbfd29996307e02f353e9be1d8a8c05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a3bbfd29996307e02f353e9be1d8a8c05">create_node</a> (const char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> size, <a class="el" href="structfil__space__t.html">fil_space_t</a> *space, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_raw, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> punch_hole, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> atomic_write, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> max_pages=<a class="el" href="fil0fil_8h.html#a156ce94a40e1c03eafdc50ae6835ddbe">PAGE_NO_MAX</a>)</td></tr>
<tr class="memdesc:a3bbfd29996307e02f353e9be1d8a8c05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attach a file to a tablespace.  <a href="#a3bbfd29996307e02f353e9be1d8a8c05">More...</a><br /></td></tr>
<tr class="separator:a3bbfd29996307e02f353e9be1d8a8c05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ef7e4de96fb4cff952260e41592e92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a42ef7e4de96fb4cff952260e41592e92">validate</a> () const</td></tr>
<tr class="memdesc:a42ef7e4de96fb4cff952260e41592e92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate a shard.  <a href="#a42ef7e4de96fb4cff952260e41592e92">More...</a><br /></td></tr>
<tr class="separator:a42ef7e4de96fb4cff952260e41592e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4d00c71e7fe8812f08b098024e3603c1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a4d00c71e7fe8812f08b098024e3603c1">space_free_low</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;space)</td></tr>
<tr class="memdesc:a4d00c71e7fe8812f08b098024e3603c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a tablespace object on which fil_space_detach() was invoked.  <a href="#a4d00c71e7fe8812f08b098024e3603c1">More...</a><br /></td></tr>
<tr class="separator:a4d00c71e7fe8812f08b098024e3603c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71457e74e9ffd3e0c74758e70a48bf37"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a71457e74e9ffd3e0c74758e70a48bf37">reserve_open_slot</a> (size_t shard_id)</td></tr>
<tr class="memdesc:a71457e74e9ffd3e0c74758e70a48bf37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for an empty slot to reserve for opening a file.  <a href="#a71457e74e9ffd3e0c74758e70a48bf37">More...</a><br /></td></tr>
<tr class="separator:a71457e74e9ffd3e0c74758e70a48bf37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a437836229ea4013fc20c7e0d1127ebcd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a437836229ea4013fc20c7e0d1127ebcd">release_open_slot</a> (size_t shard_id)</td></tr>
<tr class="memdesc:a437836229ea4013fc20c7e0d1127ebcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the slot reserved for opening a file.  <a href="#a437836229ea4013fc20c7e0d1127ebcd">More...</a><br /></td></tr>
<tr class="separator:a437836229ea4013fc20c7e0d1127ebcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e501cbda0ba8a72640029b2c83dbfd6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a1e501cbda0ba8a72640029b2c83dbfd6">wait_for_io_to_stop</a> (const <a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a1e501cbda0ba8a72640029b2c83dbfd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">We are going to do a rename file and want to stop new I/O for a while.  <a href="#a1e501cbda0ba8a72640029b2c83dbfd6">More...</a><br /></td></tr>
<tr class="separator:a1e501cbda0ba8a72640029b2c83dbfd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a5d3642c54947669d602e4ac76c119f17"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a5d3642c54947669d602e4ac76c119f17">File_list</a> = <a class="el" href="row0mysql_8cc.html#aa70fd829bdc7a3b8160bef3726810973">UT_LIST_BASE_NODE_T</a>(<a class="el" href="structfil__node__t.html">fil_node_t</a>)</td></tr>
<tr class="separator:a5d3642c54947669d602e4ac76c119f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1733874cf4207031a72dda24b1e6b41a"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a1733874cf4207031a72dda24b1e6b41a">Space_list</a> = <a class="el" href="row0mysql_8cc.html#aa70fd829bdc7a3b8160bef3726810973">UT_LIST_BASE_NODE_T</a>(<a class="el" href="structfil__space__t.html">fil_space_t</a>)</td></tr>
<tr class="separator:a1733874cf4207031a72dda24b1e6b41a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a980599f235ac96b570c63107a2baedfb"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a980599f235ac96b570c63107a2baedfb">Spaces</a> = std::unordered_map&lt; <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>, <a class="el" href="structfil__space__t.html">fil_space_t</a> * &gt;</td></tr>
<tr class="separator:a980599f235ac96b570c63107a2baedfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03c3735499b4833673bcbccb28d52d31"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a03c3735499b4833673bcbccb28d52d31">Names</a> = std::unordered_map&lt; const char *, <a class="el" href="structfil__space__t.html">fil_space_t</a> *, <a class="el" href="structChar__Ptr__Hash.html">Char_Ptr_Hash</a>, <a class="el" href="structChar__Ptr__Compare.html">Char_Ptr_Compare</a> &gt;</td></tr>
<tr class="separator:a03c3735499b4833673bcbccb28d52d31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a08ed1b80d5b3a1ecef3bb46fdf4971e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a08ed1b80d5b3a1ecef3bb46fdf4971e5">get_reserved_space</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a08ed1b80d5b3a1ecef3bb46fdf4971e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">We keep log files and system tablespace files always open; this is important in preventing deadlocks in this module, as a page read completion often performs another read from the insert buffer.  <a href="#a08ed1b80d5b3a1ecef3bb46fdf4971e5">More...</a><br /></td></tr>
<tr class="separator:a08ed1b80d5b3a1ecef3bb46fdf4971e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9037d5e866d1afa2f05a7d832ddea46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ae9037d5e866d1afa2f05a7d832ddea46">space_prepare_for_truncate</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:ae9037d5e866d1afa2f05a7d832ddea46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare for truncating a single-table tablespace.  <a href="#ae9037d5e866d1afa2f05a7d832ddea46">More...</a><br /></td></tr>
<tr class="separator:ae9037d5e866d1afa2f05a7d832ddea46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06565d48ebfa59deadc30cef094c2218"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a06565d48ebfa59deadc30cef094c2218">write_completed</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file)</td></tr>
<tr class="memdesc:a06565d48ebfa59deadc30cef094c2218"><td class="mdescLeft">&#160;</td><td class="mdescRight">Note that a write IO has completed.  <a href="#a06565d48ebfa59deadc30cef094c2218">More...</a><br /></td></tr>
<tr class="separator:a06565d48ebfa59deadc30cef094c2218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aabdf271ca62e510e1dc7ce3d3f5fb3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a9aabdf271ca62e510e1dc7ce3d3f5fb3">add_to_unflushed_list</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a9aabdf271ca62e510e1dc7ce3d3f5fb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the tablespace is not on the unflushed list, add it.  <a href="#a9aabdf271ca62e510e1dc7ce3d3f5fb3">More...</a><br /></td></tr>
<tr class="separator:a9aabdf271ca62e510e1dc7ce3d3f5fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98702759198ef16fdce6a0e7c25c38dc"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a98702759198ef16fdce6a0e7c25c38dc">space_check_pending_operations</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space, ulint <a class="el" href="myisam__ftdump_8cc.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>) const</td></tr>
<tr class="memdesc:a98702759198ef16fdce6a0e7c25c38dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for pending operations.  <a href="#a98702759198ef16fdce6a0e7c25c38dc">More...</a><br /></td></tr>
<tr class="separator:a98702759198ef16fdce6a0e7c25c38dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90956656ef2908fe2310f0a10b3acda5"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a90956656ef2908fe2310f0a10b3acda5">check_pending_io</a> (const <a class="el" href="structfil__space__t.html">fil_space_t</a> *space, const <a class="el" href="structfil__node__t.html">fil_node_t</a> &amp;file, ulint <a class="el" href="myisam__ftdump_8cc.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>) const</td></tr>
<tr class="memdesc:a90956656ef2908fe2310f0a10b3acda5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for pending IO.  <a href="#a90956656ef2908fe2310f0a10b3acda5">More...</a><br /></td></tr>
<tr class="separator:a90956656ef2908fe2310f0a10b3acda5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae13d5587c164322cef34a78c55cf4ca7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ae13d5587c164322cef34a78c55cf4ca7">redo_space_flush</a> ()</td></tr>
<tr class="memdesc:ae13d5587c164322cef34a78c55cf4ca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flushes to disk possible writes cached by the OS.  <a href="#ae13d5587c164322cef34a78c55cf4ca7">More...</a><br /></td></tr>
<tr class="separator:ae13d5587c164322cef34a78c55cf4ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c83425a35f15164aa9d5f202fdec45e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a8c83425a35f15164aa9d5f202fdec45e">get_file_size</a> (<a class="el" href="structfil__node__t.html">fil_node_t</a> *file, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> read_only_mode)</td></tr>
<tr class="memdesc:a8c83425a35f15164aa9d5f202fdec45e"><td class="mdescLeft">&#160;</td><td class="mdescRight">First we open the file in the normal mode, no async I/O here, for simplicity.  <a href="#a8c83425a35f15164aa9d5f202fdec45e">More...</a><br /></td></tr>
<tr class="separator:a8c83425a35f15164aa9d5f202fdec45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3690eb23e1ee09789fd7c81b966d8ac7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a3690eb23e1ee09789fd7c81b966d8ac7">Fil_shard</a> (<a class="el" href="classFil__shard.html">Fil_shard</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a3690eb23e1ee09789fd7c81b966d8ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5c2b89a724e55fd056c9e013a4827d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ae5c2b89a724e55fd056c9e013a4827d2">Fil_shard</a> (const <a class="el" href="classFil__shard.html">Fil_shard</a> &amp;)=delete</td></tr>
<tr class="separator:ae5c2b89a724e55fd056c9e013a4827d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9df684226dee8d2d5c7b05303a66160"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFil__shard.html">Fil_shard</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ae9df684226dee8d2d5c7b05303a66160">operator=</a> (const <a class="el" href="classFil__shard.html">Fil_shard</a> &amp;)=delete</td></tr>
<tr class="separator:ae9df684226dee8d2d5c7b05303a66160"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:afa32987236349b2d9a2531bff9065131"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="os0file_8h.html#a24a26d93ca575ffd20984d2c7bfe6f82">AIO_mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#afa32987236349b2d9a2531bff9065131">get_AIO_mode</a> (const <a class="el" href="classIORequest.html">IORequest</a> &amp;req_type, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> sync)</td></tr>
<tr class="memdesc:afa32987236349b2d9a2531bff9065131"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the AIO mode.  <a href="#afa32987236349b2d9a2531bff9065131">More...</a><br /></td></tr>
<tr class="separator:afa32987236349b2d9a2531bff9065131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ad0f366f12448f74cfcdae10273626b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a9ad0f366f12448f74cfcdae10273626b">get_file_for_io</a> (const <a class="el" href="classIORequest.html">IORequest</a> &amp;req_type, <a class="el" href="structfil__space__t.html">fil_space_t</a> *space, <a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> *page_no, <a class="el" href="structfil__node__t.html">fil_node_t</a> *&amp;file)</td></tr>
<tr class="memdesc:a9ad0f366f12448f74cfcdae10273626b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the file name for IO and the local offset within that file.  <a href="#a9ad0f366f12448f74cfcdae10273626b">More...</a><br /></td></tr>
<tr class="separator:a9ad0f366f12448f74cfcdae10273626b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a18dce5d790e0b01433ae88d8a6d87971"><td class="memItemLeft" align="right" valign="top">const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a18dce5d790e0b01433ae88d8a6d87971">m_id</a></td></tr>
<tr class="memdesc:a18dce5d790e0b01433ae88d8a6d87971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fil_shard ID.  <a href="#a18dce5d790e0b01433ae88d8a6d87971">More...</a><br /></td></tr>
<tr class="separator:a18dce5d790e0b01433ae88d8a6d87971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b47b3b1b2616371de890e8365e30281"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFil__shard.html#a980599f235ac96b570c63107a2baedfb">Spaces</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a8b47b3b1b2616371de890e8365e30281">m_spaces</a></td></tr>
<tr class="memdesc:a8b47b3b1b2616371de890e8365e30281"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tablespace instances hashed on the space id.  <a href="#a8b47b3b1b2616371de890e8365e30281">More...</a><br /></td></tr>
<tr class="separator:a8b47b3b1b2616371de890e8365e30281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34ca0a9a13259d582af585e88616ac80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFil__shard.html#a03c3735499b4833673bcbccb28d52d31">Names</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a34ca0a9a13259d582af585e88616ac80">m_names</a></td></tr>
<tr class="memdesc:a34ca0a9a13259d582af585e88616ac80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tablespace instances hashed on the space name.  <a href="#a34ca0a9a13259d582af585e88616ac80">More...</a><br /></td></tr>
<tr class="separator:a34ca0a9a13259d582af585e88616ac80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae90167996be105749fc34802d5f848e5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>, <a class="el" href="structfil__space__t.html">fil_space_t</a> * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ae90167996be105749fc34802d5f848e5">m_deleted</a></td></tr>
<tr class="memdesc:ae90167996be105749fc34802d5f848e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted space IDs, ignore writes to these tablespaces.  <a href="#ae90167996be105749fc34802d5f848e5">More...</a><br /></td></tr>
<tr class="separator:ae90167996be105749fc34802d5f848e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7698d72ae8aaec5a8b4e25f7a57efea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFil__shard.html#a5d3642c54947669d602e4ac76c119f17">File_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#ae7698d72ae8aaec5a8b4e25f7a57efea">m_LRU</a></td></tr>
<tr class="memdesc:ae7698d72ae8aaec5a8b4e25f7a57efea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base node for the LRU list of the most recently used open files with no pending I/O's; if we start an I/O on the file, we first remove it from this list, and return it to the start of the list when the I/O ends; log files and the system tablespace are not put to this list: they are opened after the startup, and kept open until shutdown.  <a href="#ae7698d72ae8aaec5a8b4e25f7a57efea">More...</a><br /></td></tr>
<tr class="separator:ae7698d72ae8aaec5a8b4e25f7a57efea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb8124d442cc326e0e74558b7f18cfa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFil__shard.html#a1733874cf4207031a72dda24b1e6b41a">Space_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a4cb8124d442cc326e0e74558b7f18cfa">m_unflushed_spaces</a></td></tr>
<tr class="memdesc:a4cb8124d442cc326e0e74558b7f18cfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base node for the list of those tablespaces whose files contain unflushed writes; those spaces have at least one file where modification_counter &gt; flush_counter.  <a href="#a4cb8124d442cc326e0e74558b7f18cfa">More...</a><br /></td></tr>
<tr class="separator:a4cb8124d442cc326e0e74558b7f18cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac53d2b7962dcf588fd8ba88f4ee08a"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a0ac53d2b7962dcf588fd8ba88f4ee08a">m_modification_counter</a></td></tr>
<tr class="memdesc:a0ac53d2b7962dcf588fd8ba88f4ee08a"><td class="mdescLeft">&#160;</td><td class="mdescRight">When we write to a file we increment this by one.  <a href="#a0ac53d2b7962dcf588fd8ba88f4ee08a">More...</a><br /></td></tr>
<tr class="separator:a0ac53d2b7962dcf588fd8ba88f4ee08a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa20f8987e1d843a14f83a282779dd573"><td class="memItemLeft" align="right" valign="top">ib_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#aa20f8987e1d843a14f83a282779dd573">m_mutex</a></td></tr>
<tr class="memdesc:aa20f8987e1d843a14f83a282779dd573"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex protecting this shard.  <a href="#aa20f8987e1d843a14f83a282779dd573">More...</a><br /></td></tr>
<tr class="separator:aa20f8987e1d843a14f83a282779dd573"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a0cc3d45a46250956f13477a5c284204a"><td class="memItemLeft" align="right" valign="top">static std::atomic_size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a0cc3d45a46250956f13477a5c284204a">s_n_open</a></td></tr>
<tr class="memdesc:a0cc3d45a46250956f13477a5c284204a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of files currently open.  <a href="#a0cc3d45a46250956f13477a5c284204a">More...</a><br /></td></tr>
<tr class="separator:a0cc3d45a46250956f13477a5c284204a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a827c5e18fde0b3f9bad4471c0ccaf3ec"><td class="memItemLeft" align="right" valign="top">static std::atomic_size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a827c5e18fde0b3f9bad4471c0ccaf3ec">s_open_slot</a></td></tr>
<tr class="memdesc:a827c5e18fde0b3f9bad4471c0ccaf3ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">ID of shard that has reserved the open slot.  <a href="#a827c5e18fde0b3f9bad4471c0ccaf3ec">More...</a><br /></td></tr>
<tr class="separator:a827c5e18fde0b3f9bad4471c0ccaf3ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a3d5e39d4ffe9a0d39c9dde4346bb117c"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__shard.html#a3d5e39d4ffe9a0d39c9dde4346bb117c">Fil_system</a></td></tr>
<tr class="separator:a3d5e39d4ffe9a0d39c9dde4346bb117c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a5d3642c54947669d602e4ac76c119f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d3642c54947669d602e4ac76c119f17">&#9670;&nbsp;</a></span>File_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classFil__shard.html#a5d3642c54947669d602e4ac76c119f17">Fil_shard::File_list</a> =  <a class="el" href="row0mysql_8cc.html#aa70fd829bdc7a3b8160bef3726810973">UT_LIST_BASE_NODE_T</a>(<a class="el" href="structfil__node__t.html">fil_node_t</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a03c3735499b4833673bcbccb28d52d31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03c3735499b4833673bcbccb28d52d31">&#9670;&nbsp;</a></span>Names</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classFil__shard.html#a03c3735499b4833673bcbccb28d52d31">Fil_shard::Names</a> =  std::unordered_map&lt;const char *, <a class="el" href="structfil__space__t.html">fil_space_t</a> *, <a class="el" href="structChar__Ptr__Hash.html">Char_Ptr_Hash</a>, <a class="el" href="structChar__Ptr__Compare.html">Char_Ptr_Compare</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1733874cf4207031a72dda24b1e6b41a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1733874cf4207031a72dda24b1e6b41a">&#9670;&nbsp;</a></span>Space_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classFil__shard.html#a1733874cf4207031a72dda24b1e6b41a">Fil_shard::Space_list</a> =  <a class="el" href="row0mysql_8cc.html#aa70fd829bdc7a3b8160bef3726810973">UT_LIST_BASE_NODE_T</a>(<a class="el" href="structfil__space__t.html">fil_space_t</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a980599f235ac96b570c63107a2baedfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a980599f235ac96b570c63107a2baedfb">&#9670;&nbsp;</a></span>Spaces</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classFil__shard.html#a980599f235ac96b570c63107a2baedfb">Fil_shard::Spaces</a> =  std::unordered_map&lt;<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>, <a class="el" href="structfil__space__t.html">fil_space_t</a> *&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7ae0bdd41a3c8148a54fd5fc87bfb8b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ae0bdd41a3c8148a54fd5fc87bfb8b2">&#9670;&nbsp;</a></span>Fil_shard() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Fil_shard::Fil_shard </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>shard_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">shard_id</td><td>Shard ID </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acae4f79994dfe6237b556e2b1d8bc896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae4f79994dfe6237b556e2b1d8bc896">&#9670;&nbsp;</a></span>~Fil_shard()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Fil_shard::~Fil_shard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<a id="a3690eb23e1ee09789fd7c81b966d8ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3690eb23e1ee09789fd7c81b966d8ac7">&#9670;&nbsp;</a></span>Fil_shard() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Fil_shard::Fil_shard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFil__shard.html">Fil_shard</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae5c2b89a724e55fd056c9e013a4827d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5c2b89a724e55fd056c9e013a4827d2">&#9670;&nbsp;</a></span>Fil_shard() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Fil_shard::Fil_shard </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFil__shard.html">Fil_shard</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a52b05f13f6d5bc94e670d1fe10411803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52b05f13f6d5bc94e670d1fe10411803">&#9670;&nbsp;</a></span>acquire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::acquire </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire the mutex. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">line</td><td>Line number from where it was called </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9aabdf271ca62e510e1dc7ce3d3f5fb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aabdf271ca62e510e1dc7ce3d3f5fb3">&#9670;&nbsp;</a></span>add_to_unflushed_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::add_to_unflushed_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the tablespace is not on the unflushed list, add it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>Tablespace to add </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acd4ecb00f7cc8d8597b2aaf7bd922a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd4ecb00f7cc8d8597b2aaf7bd922a23">&#9670;&nbsp;</a></span>adjust_space_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::adjust_space_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dd_space_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust temporary auto-generated names created during file discovery with correct tablespace names from the DD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>Tablespace </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dd_space_name</td><td>Tablespace name from the DD </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the tablespace is a general or undo tablespace. </dd></dl>

</div>
</div>
<a id="a90956656ef2908fe2310f0a10b3acda5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90956656ef2908fe2310f0a10b3acda5">&#9670;&nbsp;</a></span>check_pending_io()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint Fil_shard::check_pending_io </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfil__node__t.html">fil_node_t</a> &amp;&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for pending IO. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Tablespace to check </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">file</td><td>File in space list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>number of attempts so far </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no pending else count + 1. </dd></dl>

</div>
</div>
<a id="a1c0e1fca0fb2f03b0df325d0c844e54b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c0e1fca0fb2f03b0df325d0c844e54b">&#9670;&nbsp;</a></span>checkpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>lwm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Purge entries from m_deleted that are lower than LWM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lwm</td><td>No dirty pages in the buffer pool less than this LSN. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aff9043cef534a9ad8e4da036ea87c9d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff9043cef534a9ad8e4da036ea87c9d9">&#9670;&nbsp;</a></span>close_all_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::close_all_files </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close all open files. </p>

</div>
</div>
<a id="aa0d7f7014ca425bff8a145cb77d3b429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0d7f7014ca425bff8a145cb77d3b429">&#9670;&nbsp;</a></span>close_file() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::close_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>LRU_close</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a tablespace file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">file</td><td>Tablespace file to close </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">LRU_close</td><td>true if called from LRU close </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad684a74752e4a706a543d53b5f848cfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad684a74752e4a706a543d53b5f848cfa">&#9670;&nbsp;</a></span>close_file() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::close_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close a tablespace file based on tablespace ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if space_id was not found. </dd></dl>

</div>
</div>
<a id="ac74454336a5d86981da141169a4f9564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac74454336a5d86981da141169a4f9564">&#9670;&nbsp;</a></span>close_files_in_LRU()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::close_files_in_LRU </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>print_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to close a file in the shard LRU list. </p>
<p>The caller must hold the Fil_shard::m_mutex. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">print_info</td><td>if true, prints information why it cannot close a file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if success, false if should retry later </dd></dl>

</div>
</div>
<a id="a0d0a4b398947496f4ab9a060fcb75fab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d0a4b398947496f4ab9a060fcb75fab">&#9670;&nbsp;</a></span>close_log_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::close_log_files </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>free_all</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close log files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">free_all</td><td>If set then free all instances </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7793e5e94023dd9988b7dc18fafbda88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7793e5e94023dd9988b7dc18fafbda88">&#9670;&nbsp;</a></span>complete_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::complete_io </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIORequest.html">IORequest</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the data structures when an I/O operation finishes. </p>
<p>Updates the pending I/O's field in the file appropriately. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">file</td><td>Tablespace file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>Marks the file as modified type == WRITE </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8bc2522256548274985753ea5da17d61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bc2522256548274985753ea5da17d61">&#9670;&nbsp;</a></span>count_deleted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Fil_shard::count_deleted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>undo_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3bbfd29996307e02f353e9be1d8a8c05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bbfd29996307e02f353e9be1d8a8c05">&#9670;&nbsp;</a></span>create_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__node__t.html">fil_node_t</a> * Fil_shard::create_node </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>punch_hole</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>atomic_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>max_pages</em> = <code><a class="el" href="fil0fil_8h.html#a156ce94a40e1c03eafdc50ae6835ddbe">PAGE_NO_MAX</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attach a file to a tablespace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>file name of a file that is not open </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>file size in entire database blocks </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>tablespace from fil_space_create() </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_raw</td><td>whether this is a raw device or partition </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">punch_hole</td><td>true if supported for this file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">atomic_write</td><td>true if the file has atomic write enabled </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_pages</td><td>maximum number of pages in file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the file name </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">nullptr</td><td>if error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abd85d977ab859774dc5c06fd680e2c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd85d977ab859774dc5c06fd680e2c34">&#9670;&nbsp;</a></span>do_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::do_io </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIORequest.html">IORequest</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>sync</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__id__t.html">page_id_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>byte_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read or write data. </p>
<p>This operation could be asynchronous (aio). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>IO context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sync</td><td>whether synchronous aio is desired </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_id</td><td>page id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>page size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">byte_offset</td><td>remainder of offset in bytes; in AIO this must be divisible by the OS block size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>how many bytes to read or write; this must not cross a file boundary; in AIO this must be a block size multiple </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>buffer where to store read data or from where to write; in AIO this must be appropriately aligned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>message for AIO handler if !sync, else ignored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DB_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">DB_TABLESPACE_DELETED</td><td>if the tablespace does not exist </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7bc0a6762da49d34cb59e90d55624f88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bc0a6762da49d34cb59e90d55624f88">&#9670;&nbsp;</a></span>do_redo_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::do_redo_io </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIORequest.html">IORequest</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__id__t.html">page_id_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>byte_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read or write log file data synchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>IO context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_id</td><td>page id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>page size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">byte_offset</td><td>remainder of offset in bytes; in AIO this must be divisible by the OS block size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>how many bytes to read or write; this must not cross a file boundary; in AIO this must be a block size multiple </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>buffer where to store read data or from where to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DB_SUCCESS</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf45ec0451857e1a659568c64ca6e939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf45ec0451857e1a659568c64ca6e939">&#9670;&nbsp;</a></span>encryption_rotate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t Fil_shard::encryption_rotate </td>
          <td>(</td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>rotate_count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rotate the tablespace keys by new master key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">rotate_count</td><td>A cumulative count of all tablespaces rotated in the Fil_system. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of tablespaces that failed to rotate. </dd></dl>

</div>
</div>
<a id="a7b932e5031973d8959afb581c90e45f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b932e5031973d8959afb581c90e45f3">&#9670;&nbsp;</a></span>file_close_to_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::file_close_to_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare to free a file object from a tablespace memory cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">file</td><td>Tablespace file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>tablespace </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0bf55e72d23ff5f87f1b7bca1a5654af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bf55e72d23ff5f87f1b7bca1a5654af">&#9670;&nbsp;</a></span>file_opened()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::file_opened </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the file node to the LRU list if required. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">file</td><td>File for the tablespace </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6e2142dcac84441f383beea05c0471c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e2142dcac84441f383beea05c0471c7">&#9670;&nbsp;</a></span>flush_file_redo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::flush_file_redo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush the redo log writes to disk, possibly cached by the OS. </p>
<p>Flush any pending writes to disk for the redo log.</p>

</div>
</div>
<a id="a98ecbe430c539e2173e3bdd2e9967a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98ecbe430c539e2173e3bdd2e9967a9d">&#9670;&nbsp;</a></span>flush_file_spaces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::flush_file_spaces </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>purpose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Collect the tablespace IDs of unflushed tablespaces in space_ids. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">purpose</td><td>FIL_TYPE_TABLESPACE or FIL_TYPE_LOG, can be ORred </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afa32987236349b2d9a2531bff9065131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa32987236349b2d9a2531bff9065131">&#9670;&nbsp;</a></span>get_AIO_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="os0file_8h.html#a24a26d93ca575ffd20984d2c7bfe6f82">AIO_mode</a> Fil_shard::get_AIO_mode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIORequest.html">IORequest</a> &amp;&#160;</td>
          <td class="paramname"><em>req_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the AIO mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">req_type</td><td>IO request type </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sync</td><td>true if Synchronous IO return the AIO mode </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9ad0f366f12448f74cfcdae10273626b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad0f366f12448f74cfcdae10273626b">&#9670;&nbsp;</a></span>get_file_for_io()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::get_file_for_io </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIORequest.html">IORequest</a> &amp;&#160;</td>
          <td class="paramname"><em>req_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> *&#160;</td>
          <td class="paramname"><em>page_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the file name for IO and the local offset within that file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">req_type</td><td>IO context </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>Tablespace for IO </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">page_no</td><td>The relative page number in the file </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">file</td><td>File node if DB_SUCCESS, NULL if not </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">DB_SUCCESS</td><td>if the file is found with the page_no </td></tr>
    <tr><td class="paramname">DB_ERROR</td><td>if the file is not found or does not contain the page. in this case file == nullptr </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8c83425a35f15164aa9d5f202fdec45e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c83425a35f15164aa9d5f202fdec45e">&#9670;&nbsp;</a></span>get_file_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::get_file_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>read_only_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>First we open the file in the normal mode, no async I/O here, for simplicity. </p>
<p>Then do some checks, and close the file again. NOTE that we could not use the simple file read function os_file_read() in Windows to read from a file opened for async I/O! </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">file</td><td>Get the size of this file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">read_only_mode</td><td>true if read only mode set </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error </dd></dl>
<p>Add some tolerance when the tablespace is upgraded. If an empty general tablespace is created in 5.7, and then upgraded to 8.0, then its size changes from FIL_IBD_FILE_INITIAL_SIZE_5_7 pages to FIL_IBD_FILE_INITIAL_SIZE-1. </p>

</div>
</div>
<a id="a08ed1b80d5b3a1ecef3bb46fdf4971e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08ed1b80d5b3a1ecef3bb46fdf4971e5">&#9670;&nbsp;</a></span>get_reserved_space()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__space__t.html">fil_space_t</a> * Fil_shard::get_reserved_space </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We keep log files and system tablespace files always open; this is important in preventing deadlocks in this module, as a page read completion often performs another read from the insert buffer. </p>
<p>The insert buffer is in tablespace TRX_SYS_SPACE, and we cannot end up waiting in this function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID to look up </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tablespace instance </dd></dl>

</div>
</div>
<a id="a6bedc3bce08655ff7c46fe3388bdc04b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bedc3bce08655ff7c46fe3388bdc04b">&#9670;&nbsp;</a></span>get_space_by_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__space__t.html">fil_space_t</a>* Fil_shard::get_space_by_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch the fil_space_t instance that maps to space_id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tablespace instance or nullptr if not found. </dd></dl>

</div>
</div>
<a id="a1eb9a046cc2c8e3d1546bcd5ea2313d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eb9a046cc2c8e3d1546bcd5ea2313d3">&#9670;&nbsp;</a></span>get_space_by_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__space__t.html">fil_space_t</a>* Fil_shard::get_space_by_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch the fil_space_t instance that maps to the name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Tablespace name to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tablespace instance or nullptr if not found. </dd></dl>

</div>
</div>
<a id="a7b43f1465bbc99ed7a624097fa3d1fb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b43f1465bbc99ed7a624097fa3d1fb8">&#9670;&nbsp;</a></span>ibd_open_for_recovery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fil0fil_8cc.html#ad9f02bcccb7b9a3e9a30e39d697d0316">fil_load_status</a> Fil_shard::ibd_open_for_recovery </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>space</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an ibd tablespace and add it to the InnoDB data structures. </p>
<p>This is similar to fil_ibd_open() except that it is used while processing the redo and DDL log, so the data dictionary is not available and very little validation is done. The tablespace name is extracted from the dbname/tablename.ibd portion of the filename, which assumes that the file is a file-per-table tablespace. Any name will do for now. General tablespace names will be read from the dictionary after it has been recovered. The tablespace flags are read at this time from the first page of the file in validate_for_recovery(). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>path/to/databasename/tablename.ibd </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">space</td><td>the tablespace, or nullptr on error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status of the operation </dd></dl>

</div>
</div>
<a id="a3ee081766f4ea19fd256619a14e9399a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee081766f4ea19fd256619a14e9399a">&#9670;&nbsp;</a></span>id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Fil_shard::id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the shard ID </dd></dl>

</div>
</div>
<a id="a34b8ec6b5e1a8d9d67c5bb9b4084a47e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b8ec6b5e1a8d9d67c5bb9b4084a47e">&#9670;&nbsp;</a></span>is_deleted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::is_deleted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a particular undo space_id for a page in the buffer pool has been deleted recently. </p>
<p>Its space_id will be found in m_deleted until Fil:shard::checkpoint removes all its pages from the buffer pool and the fil_space_t from Fil_system. </p><dl class="section return"><dt>Returns</dt><dd>true if this space_id is in the list of recently deleted spaces. </dd></dl>

</div>
</div>
<a id="a34b44d5b52d76487fb0956e6d5799cfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b44d5b52d76487fb0956e6d5799cfe">&#9670;&nbsp;</a></span>iterate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::iterate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>include_log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFil__iterator.html#a6fb530c9ad8ad86eaba80d8d4aa044b5">Fil_iterator::Function</a> &amp;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate through all persistent tablespace files (FIL_TYPE_TABLESPACE) returning the nodes via callback function cbk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">include_log</td><td>Include log files, if true </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>Callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>any error returned by the callback function. </dd></dl>

</div>
</div>
<a id="aa518f598fb0cf671913692bf7e2f139c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa518f598fb0cf671913692bf7e2f139c">&#9670;&nbsp;</a></span>mutex_acquire_and_get_space()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::mutex_acquire_and_get_space </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>space</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserves the mutex and tries to make sure we can open at least one file while holding it. </p>
<p>This should be called before calling prepare_file_for_io(), because that function may need to open a file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">space</td><td>Tablespace instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a slot was reserved. </dd></dl>

</div>
</div>
<a id="a7c9a1953dfc1e9327933799a6fa04641"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c9a1953dfc1e9327933799a6fa04641">&#9670;&nbsp;</a></span>mutex_owned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::mutex_owned </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>true if the mutex is owned. </dd></dl>

</div>
</div>
<a id="a29068a23107f47b12f267e98d3980be2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29068a23107f47b12f267e98d3980be2">&#9670;&nbsp;</a></span>mutex_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::mutex_release </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release the mutex. </p>

</div>
</div>
<a id="a6b2e382c008e4489588878337069279d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b2e382c008e4489588878337069279d">&#9670;&nbsp;</a></span>needs_encryption_rotate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::needs_encryption_rotate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if the tablespace needs encryption rotation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>tablespace to rotate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the tablespace needs to be rotated, false if not. </dd></dl>

</div>
</div>
<a id="a285ed2a8b90565a86b368dc0b4de7648"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a285ed2a8b90565a86b368dc0b4de7648">&#9670;&nbsp;</a></span>open_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::open_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>extend</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file of a tablespace. </p>
<p>The caller must own the shard mutex. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">file</td><td>Tablespace file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">extend</td><td>true if the file is being extended </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if the file can't be opened, otherwise true </dd></dl>

</div>
</div>
<a id="a925aa6cc266965f057b665be00fa0aff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a925aa6cc266965f057b665be00fa0aff">&#9670;&nbsp;</a></span>open_system_tablespaces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::open_system_tablespaces </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_n_open</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>n_open</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open all the system files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">max_n_open</td><td>Maximum number of open files allowed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">n_open</td><td>Current number of open files </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae9df684226dee8d2d5c7b05303a66160"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9df684226dee8d2d5c7b05303a66160">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFil__shard.html">Fil_shard</a>&amp; Fil_shard::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFil__shard.html">Fil_shard</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0d2729429145fc159c003caa83fe604f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d2729429145fc159c003caa83fe604f">&#9670;&nbsp;</a></span>prepare_file_for_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::prepare_file_for_io </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>extend</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares a file for I/O. </p>
<p>Opens the file if it is closed. Updates the pending I/O's field in the file and the system appropriately. Takes the file off the LRU list if it is in the LRU list. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">file</td><td>Tablespace file for IO </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">extend</td><td>true if file is being extended </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if the file can't be opened, otherwise true </dd></dl>

</div>
</div>
<a id="a8c2c795cc6175f01b4e69628ad9a8e54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c2c795cc6175f01b4e69628ad9a8e54">&#9670;&nbsp;</a></span>prepare_to_free_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::prepare_to_free_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare to free a file. </p>
<p>Remove from the unflushed list if there are no pending flushes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">file</td><td>File instance to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae13d5587c164322cef34a78c55cf4ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae13d5587c164322cef34a78c55cf4ca7">&#9670;&nbsp;</a></span>redo_space_flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::redo_space_flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flushes to disk possible writes cached by the OS. </p>

</div>
</div>
<a id="a437836229ea4013fc20c7e0d1127ebcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a437836229ea4013fc20c7e0d1127ebcd">&#9670;&nbsp;</a></span>release_open_slot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::release_open_slot </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>shard_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release the slot reserved for opening a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">shard_id</td><td>ID of shard relasing the slot </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5f976033eb8360a68223b190d9e9f4ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f976033eb8360a68223b190d9e9f4ae">&#9670;&nbsp;</a></span>remove_from_LRU()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::remove_from_LRU </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the file node from the LRU list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">file</td><td>File for the tablespace </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a338ca14d3abee7397209a56baa634c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a338ca14d3abee7397209a56baa634c22">&#9670;&nbsp;</a></span>remove_from_unflushed_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::remove_from_unflushed_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the tablespace is on the unflushed list and there are no pending flushes then remove from the unflushed list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>Tablespace to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a71457e74e9ffd3e0c74758e70a48bf37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71457e74e9ffd3e0c74758e70a48bf37">&#9670;&nbsp;</a></span>reserve_open_slot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::reserve_open_slot </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>shard_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for an empty slot to reserve for opening a file. </p>
<dl class="section return"><dt>Returns</dt><dd>true on success. </dd></dl>

</div>
</div>
<a id="a1568ddec8503cb4e1d087a6a57ca1214"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1568ddec8503cb4e1d087a6a57ca1214">&#9670;&nbsp;</a></span>space_acquire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::space_acquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire a tablespace to prevent it from being dropped concurrently. </p>
<p>The thread must call Fil_shard::fil_space_release() when the operation is done. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>tablespace to acquire </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if not space-&gt;stop_new_ops </dd></dl>

</div>
</div>
<a id="a7bf263b8bca9d60ed62941934d6208a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bf263b8bca9d60ed62941934d6208a2">&#9670;&nbsp;</a></span>space_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::space_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map the space ID and name to the tablespace instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Tablespace instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a95b634c4c06d0dc455e613d1167ffe89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b634c4c06d0dc455e613d1167ffe89">&#9670;&nbsp;</a></span>space_check_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::space_check_exists </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>print_err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>adjust_space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a>&#160;</td>
          <td class="paramname"><em>table_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if a matching tablespace exists in the InnoDB tablespace memory cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Tablespace name used in fil_space_create(). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">print_err</td><td>Print detailed error information to the error log if a matching tablespace is not found from memory. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">adjust_space</td><td>Whether to adjust space id on mismatch </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">heap</td><td>Heap memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">table_id</td><td>table id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a matching tablespace exists in the memory cache </dd></dl>

</div>
</div>
<a id="a98702759198ef16fdce6a0e7c25c38dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98702759198ef16fdce6a0e7c25c38dc">&#9670;&nbsp;</a></span>space_check_pending_operations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint Fil_shard::space_check_pending_operations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for pending operations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>tablespace </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>number of attempts so far </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no pending operations else count + 1. </dd></dl>

</div>
</div>
<a id="adbf66de75fbe396ea09dba074ca49d0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbf66de75fbe396ea09dba074ca49d0c">&#9670;&nbsp;</a></span>space_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__space__t.html">fil_space_t</a> * Fil_shard::space_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fil0fil_8h.html#a93968a4e96491426198f9eeb83e56726">fil_type_t</a>&#160;</td>
          <td class="paramname"><em>purpose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a space memory object and put it to the fil_system hash table. </p>
<p>The tablespace name is independent from the tablespace file-name. Error messages are issued to the server log. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Tablespace name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace identifier </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Tablespace flags </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">purpose</td><td>Tablespace purpose </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to created tablespace, to be filled in with fil_node_create() </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">nullptr</td><td>on failure (such as when the same tablespace exists) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa16da33bccf28e8a8a71bf7b8b5589e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa16da33bccf28e8a8a71bf7b8b5589e7">&#9670;&nbsp;</a></span>space_delete() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::space_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete the instance that maps to space_id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID to delete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a799c6637bfad718816cc73e87b36571f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799c6637bfad718816cc73e87b36571f">&#9670;&nbsp;</a></span>space_delete() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::space_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="buf0types_8h.html#a64b07ecd8aec364fe56a54bcd279b3b3">buf_remove_t</a>&#160;</td>
          <td class="paramname"><em>buf_remove</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes an IBD or IBU tablespace. </p>
<p>The tablespace must be cached in the memory cache. This will delete the datafile, fil_space_t &amp; fil_node_t entries from the file_system_t cache. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf_remove</td><td>Specify the action to take on the pages for this table in the buffer pool. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS, DB_TABLESPCE_NOT_FOUND or DB_IO_ERROR </dd></dl>

</div>
</div>
<a id="a30623e2a927558e4f498c6fb8aeb6811"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30623e2a927558e4f498c6fb8aeb6811">&#9670;&nbsp;</a></span>space_detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::space_detach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detach a space object from the tablespace memory cache and closes the tablespace files but does not delete them. </p>
<p>There must not be any pending I/O's or flushes on the files. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>tablespace </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac711f0c6d820f22776851ce902e3ff9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac711f0c6d820f22776851ce902e3ff9e">&#9670;&nbsp;</a></span>space_extend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::space_extend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to extend a tablespace if it is smaller than the specified size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>tablespace </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>desired size in pages </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the tablespace is at least as big as requested </dd></dl>

</div>
</div>
<a id="a5a1874343bbdfdf4cee462929b248628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a1874343bbdfdf4cee462929b248628">&#9670;&nbsp;</a></span>space_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::space_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flushes to disk possible writes cached by the OS. </p>
<p>If the space does not exist or is being dropped, does not do anything. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>File space ID (this can be a group of log files or a tablespace of the database) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a72eecc35cd0788b9b199a2ef805ee365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72eecc35cd0788b9b199a2ef805ee365">&#9670;&nbsp;</a></span>space_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__space__t.html">fil_space_t</a> * Fil_shard::space_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees a space object from the tablespace memory cache. </p>
<p>Closes a tablespaces' files but does not delete them. There must not be any pending I/O's or flushes on the files. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fil_space_t instance on success or nullptr </dd></dl>

</div>
</div>
<a id="a4d00c71e7fe8812f08b098024e3603c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d00c71e7fe8812f08b098024e3603c1">&#9670;&nbsp;</a></span>space_free_low()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::space_free_low </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free a tablespace object on which fil_space_detach() was invoked. </p>
<p>There must not be any pending I/O's or flushes on the files. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>tablespace </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a37c282d6bf595cbc75d7566bc5e3a1fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37c282d6bf595cbc75d7566bc5e3a1fa">&#9670;&nbsp;</a></span>space_is_flushed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::space_is_flushed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if all the file nodes in a space are flushed. </p>
<p>The caller must hold the fil_system mutex. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Tablespace to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if all are flushed </dd></dl>

</div>
</div>
<a id="a5231cd717dcd1b7063e9a16290238028"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5231cd717dcd1b7063e9a16290238028">&#9670;&nbsp;</a></span>space_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__space__t.html">fil_space_t</a> * Fil_shard::space_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the files associated with a tablespace and returns a pointer to the fil_space_t that is in the memory cache associated with a space id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Get the tablespace instance or this ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>file_space_t pointer, nullptr if space not found </dd></dl>

</div>
</div>
<a id="a151055e58cc2032634a2cb14c1f1086a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a151055e58cc2032634a2cb14c1f1086a">&#9670;&nbsp;</a></span>space_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::space_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open each file of a tablespace if not already open. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>tablespace identifier </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if all file nodes were opened </td></tr>
    <tr><td class="paramname">false</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae9037d5e866d1afa2f05a7d832ddea46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9037d5e866d1afa2f05a7d832ddea46">&#9670;&nbsp;</a></span>space_prepare_for_truncate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::space_prepare_for_truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare for truncating a single-table tablespace. </p>
<p>1) Wait for pending operations on the tablespace to stop; 2) Remove all insert buffer entries for the tablespace; </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error </dd></dl>

</div>
</div>
<a id="a7b76d4a477d272c5fa8e370b5e2df868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b76d4a477d272c5fa8e370b5e2df868">&#9670;&nbsp;</a></span>space_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::space_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release a tablespace acquired with Fil_shard::space_acquire(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>tablespace to release </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad18874986b322fc56bd5e22791e90865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad18874986b322fc56bd5e22791e90865">&#9670;&nbsp;</a></span>space_rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::space_rename </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_path_in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rename a single-table tablespace. </p>
<p>The tablespace must exist in the memory cache. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_path</td><td>Old file name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_name</td><td>New tablespace name in the schema/space </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_path_in</td><td>New file name, or nullptr if it is located in the normal data directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>InnoDB error code </dd></dl>

</div>
</div>
<a id="a87eaa4e846eb2ed551258920cabdb51e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87eaa4e846eb2ed551258920cabdb51e">&#9670;&nbsp;</a></span>space_truncate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_shard::space_truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a>&#160;</td>
          <td class="paramname"><em>size_in_pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncate the tablespace to needed size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID to truncate </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size_in_pages</td><td>Truncate size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if truncate was successful. </dd></dl>

</div>
</div>
<a id="ae0c8bcf77c8695f3d92598cd8b5328cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0c8bcf77c8695f3d92598cd8b5328cc">&#9670;&nbsp;</a></span>update_space_name_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::update_space_name_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remap the tablespace to the new name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Tablespace instance, with old name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_name</td><td>New tablespace name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a42ef7e4de96fb4cff952260e41592e92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42ef7e4de96fb4cff952260e41592e92">&#9670;&nbsp;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::validate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validate a shard. </p>

</div>
</div>
<a id="a1e501cbda0ba8a72640029b2c83dbfd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e501cbda0ba8a72640029b2c83dbfd6">&#9670;&nbsp;</a></span>wait_for_io_to_stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::wait_for_io_to_stop </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>We are going to do a rename file and want to stop new I/O for a while. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Tablespace for which we want to wait for IO to stop </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abc3d77a38a89774b9c2dc65dc8097fd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc3d77a38a89774b9c2dc65dc8097fd2">&#9670;&nbsp;</a></span>wait_for_pending_operations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_shard::wait_for_pending_operations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for pending operations on a tablespace to stop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">space</td><td>tablespace instance in memory </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">path</td><td>tablespace path </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or DB_TABLESPACE_NOT_FOUND. </dd></dl>

</div>
</div>
<a id="a06565d48ebfa59deadc30cef094c2218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06565d48ebfa59deadc30cef094c2218">&#9670;&nbsp;</a></span>write_completed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_shard::write_completed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__node__t.html">fil_node_t</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Note that a write IO has completed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">file</td><td>File on which a write was completed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a3d5e39d4ffe9a0d39c9dde4346bb117c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d5e39d4ffe9a0d39c9dde4346bb117c">&#9670;&nbsp;</a></span>Fil_system</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classFil__system.html">Fil_system</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae90167996be105749fc34802d5f848e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae90167996be105749fc34802d5f848e5">&#9670;&nbsp;</a></span>m_deleted</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::pair&lt;<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>, <a class="el" href="structfil__space__t.html">fil_space_t</a> *&gt; &gt; Fil_shard::m_deleted</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deleted space IDs, ignore writes to these tablespaces. </p>
<p>Note the LSN at which the tablespace was deleted. All pages before this LSN should not be flushed to disk. Once the LWM is &gt;= the recorded LSN we can delete the entry from m_deleted. </p>

</div>
</div>
<a id="a18dce5d790e0b01433ae88d8a6d87971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18dce5d790e0b01433ae88d8a6d87971">&#9670;&nbsp;</a></span>m_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t Fil_shard::m_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fil_shard ID. </p>

</div>
</div>
<a id="ae7698d72ae8aaec5a8b4e25f7a57efea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7698d72ae8aaec5a8b4e25f7a57efea">&#9670;&nbsp;</a></span>m_LRU</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFil__shard.html#a5d3642c54947669d602e4ac76c119f17">File_list</a> Fil_shard::m_LRU</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Base node for the LRU list of the most recently used open files with no pending I/O's; if we start an I/O on the file, we first remove it from this list, and return it to the start of the list when the I/O ends; log files and the system tablespace are not put to this list: they are opened after the startup, and kept open until shutdown. </p>

</div>
</div>
<a id="a0ac53d2b7962dcf588fd8ba88f4ee08a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ac53d2b7962dcf588fd8ba88f4ee08a">&#9670;&nbsp;</a></span>m_modification_counter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t Fil_shard::m_modification_counter</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When we write to a file we increment this by one. </p>

</div>
</div>
<a id="aa20f8987e1d843a14f83a282779dd573"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa20f8987e1d843a14f83a282779dd573">&#9670;&nbsp;</a></span>m_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ib_mutex_t Fil_shard::m_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex protecting this shard. </p>

</div>
</div>
<a id="a34ca0a9a13259d582af585e88616ac80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ca0a9a13259d582af585e88616ac80">&#9670;&nbsp;</a></span>m_names</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFil__shard.html#a03c3735499b4833673bcbccb28d52d31">Names</a> Fil_shard::m_names</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tablespace instances hashed on the space name. </p>

</div>
</div>
<a id="a8b47b3b1b2616371de890e8365e30281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b47b3b1b2616371de890e8365e30281">&#9670;&nbsp;</a></span>m_spaces</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFil__shard.html#a980599f235ac96b570c63107a2baedfb">Spaces</a> Fil_shard::m_spaces</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tablespace instances hashed on the space id. </p>

</div>
</div>
<a id="a4cb8124d442cc326e0e74558b7f18cfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cb8124d442cc326e0e74558b7f18cfa">&#9670;&nbsp;</a></span>m_unflushed_spaces</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFil__shard.html#a1733874cf4207031a72dda24b1e6b41a">Space_list</a> Fil_shard::m_unflushed_spaces</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Base node for the list of those tablespaces whose files contain unflushed writes; those spaces have at least one file where modification_counter &gt; flush_counter. </p>

</div>
</div>
<a id="a0cc3d45a46250956f13477a5c284204a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cc3d45a46250956f13477a5c284204a">&#9670;&nbsp;</a></span>s_n_open</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_size_t Fil_shard::s_n_open</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of files currently open. </p>
<p>Total number of open files.</p>

</div>
</div>
<a id="a827c5e18fde0b3f9bad4471c0ccaf3ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a827c5e18fde0b3f9bad4471c0ccaf3ec">&#9670;&nbsp;</a></span>s_open_slot</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_size_t Fil_shard::s_open_slot</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ID of shard that has reserved the open slot. </p>
<p>Slot reserved for opening a file.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>storage/innobase/fil/<a class="el" href="fil0fil_8cc.html">fil0fil.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classFil__shard.html">Fil_shard</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
