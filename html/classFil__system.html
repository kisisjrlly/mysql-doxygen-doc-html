<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Fil_system Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classFil__system.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classFil__system-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Fil_system Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The tablespace memory cache; also the totality of logs (the log data space) is stored here; below we talk about tablespaces, but also the ib_logfiles form a 'space' and it is handled here.  
 <a href="classFil__system.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a5423c6ff493aedebad335c63aeca55ff"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a5423c6ff493aedebad335c63aeca55ff">Fil_shards</a> = std::vector&lt; <a class="el" href="classFil__shard.html">Fil_shard</a> * &gt;</td></tr>
<tr class="separator:a5423c6ff493aedebad335c63aeca55ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a949c1de778e98311ddafed8396988769"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a949c1de778e98311ddafed8396988769">Fil_system</a> (size_t n_shards, size_t max_open)</td></tr>
<tr class="memdesc:a949c1de778e98311ddafed8396988769"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a949c1de778e98311ddafed8396988769">More...</a><br /></td></tr>
<tr class="separator:a949c1de778e98311ddafed8396988769"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3c4ed01f8cc05072f2b5ddade2bb83"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#aac3c4ed01f8cc05072f2b5ddade2bb83">~Fil_system</a> ()</td></tr>
<tr class="memdesc:aac3c4ed01f8cc05072f2b5ddade2bb83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#aac3c4ed01f8cc05072f2b5ddade2bb83">More...</a><br /></td></tr>
<tr class="separator:aac3c4ed01f8cc05072f2b5ddade2bb83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd496ba9228d43abe2a7a21f968b2cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a6cd496ba9228d43abe2a7a21f968b2cd">space_acquire</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> <a class="el" href="myisampack_8cc.html#a582e2ef9670c974c00e00ad10af0e629">silent</a>)</td></tr>
<tr class="memdesc:a6cd496ba9228d43abe2a7a21f968b2cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire a tablespace when it could be dropped concurrently.  <a href="#a6cd496ba9228d43abe2a7a21f968b2cd">More...</a><br /></td></tr>
<tr class="separator:a6cd496ba9228d43abe2a7a21f968b2cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad943a797ea35c867749899f8fa427977"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTablespace__dirs.html#a5deb94bf601384954a1495a2ce35f5eb">Tablespace_dirs::Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ad943a797ea35c867749899f8fa427977">get_scanned_filename_by_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:ad943a797ea35c867749899f8fa427977"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the file names opened for a space_id during recovery.  <a href="#ad943a797ea35c867749899f8fa427977">More...</a><br /></td></tr>
<tr class="separator:ad943a797ea35c867749899f8fa427977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a662d63d3020e6963661e3f9d7b8f2216"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTablespace__dirs.html#a5deb94bf601384954a1495a2ce35f5eb">Tablespace_dirs::Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a662d63d3020e6963661e3f9d7b8f2216">get_scanned_filename_by_space_num</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num, <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> &amp;space_id)</td></tr>
<tr class="memdesc:a662d63d3020e6963661e3f9d7b8f2216"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the file name opened for an undo space number.  <a href="#a662d63d3020e6963661e3f9d7b8f2216">More...</a><br /></td></tr>
<tr class="separator:a662d63d3020e6963661e3f9d7b8f2216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a416b9a11da9a8c2d60fe69ea9d20a787"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a416b9a11da9a8c2d60fe69ea9d20a787">get_file_by_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, std::string &amp;<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="memdesc:a416b9a11da9a8c2d60fe69ea9d20a787"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the file name opened for a space_id from the file map.  <a href="#a416b9a11da9a8c2d60fe69ea9d20a787">More...</a><br /></td></tr>
<tr class="separator:a416b9a11da9a8c2d60fe69ea9d20a787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c4bd425bf69f6f6e17746dd2306a26f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a3c4bd425bf69f6f6e17746dd2306a26f">get_file_by_space_num</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num, <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> &amp;space_id, std::string &amp;<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="memdesc:a3c4bd425bf69f6f6e17746dd2306a26f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the file name opened for an undo space number.  <a href="#a3c4bd425bf69f6f6e17746dd2306a26f">More...</a><br /></td></tr>
<tr class="separator:a3c4bd425bf69f6f6e17746dd2306a26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6426968f2677e829d1949b8830267365"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a6426968f2677e829d1949b8830267365">erase_path</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a6426968f2677e829d1949b8830267365"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase a tablespace ID and its mapping from the scanned files.  <a href="#a6426968f2677e829d1949b8830267365">More...</a><br /></td></tr>
<tr class="separator:a6426968f2677e829d1949b8830267365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cdd184c0e686e922f0044a21cd36b64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a3cdd184c0e686e922f0044a21cd36b64">add_old_file</a> (const std::string &amp;file_path)</td></tr>
<tr class="memdesc:a3cdd184c0e686e922f0044a21cd36b64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add file to old file list.  <a href="#a3cdd184c0e686e922f0044a21cd36b64">More...</a><br /></td></tr>
<tr class="separator:a3cdd184c0e686e922f0044a21cd36b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95408075c47fcc60bfc78e3d642c5a9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a95408075c47fcc60bfc78e3d642c5a9a">rename_partition_files</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> revert)</td></tr>
<tr class="memdesc:a95408075c47fcc60bfc78e3d642c5a9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename partition files during upgrade.  <a href="#a95408075c47fcc60bfc78e3d642c5a9a">More...</a><br /></td></tr>
<tr class="separator:a95408075c47fcc60bfc78e3d642c5a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e2dadf4636df9ab60c1857e99738c75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a3e2dadf4636df9ab60c1857e99738c75">clear_old_files</a> ()</td></tr>
<tr class="memdesc:a3e2dadf4636df9ab60c1857e99738c75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all accumulated old files.  <a href="#a3e2dadf4636df9ab60c1857e99738c75">More...</a><br /></td></tr>
<tr class="separator:a3e2dadf4636df9ab60c1857e99738c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92e3c66ec1eebd5c2f3398edc9a41afc"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a92e3c66ec1eebd5c2f3398edc9a41afc">get_root</a> (const std::string &amp;<a class="el" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>) const</td></tr>
<tr class="memdesc:a92e3c66ec1eebd5c2f3398edc9a41afc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the top level directory where this filename was found.  <a href="#a92e3c66ec1eebd5c2f3398edc9a41afc">More...</a><br /></td></tr>
<tr class="separator:a92e3c66ec1eebd5c2f3398edc9a41afc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e4b5802a914e7e02a2539667575819"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a72e4b5802a914e7e02a2539667575819">prepare_open_for_business</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> read_only_mode)</td></tr>
<tr class="memdesc:a72e4b5802a914e7e02a2539667575819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the DD if any files were moved to a new location.  <a href="#a72e4b5802a914e7e02a2539667575819">More...</a><br /></td></tr>
<tr class="separator:a72e4b5802a914e7e02a2539667575819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e307c36bdc8b8c09f9f7ff01bd1006"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ae1e307c36bdc8b8c09f9f7ff01bd1006">flush_file_redo</a> ()</td></tr>
<tr class="memdesc:ae1e307c36bdc8b8c09f9f7ff01bd1006"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the redo log writes to disk, possibly cached by the OS.  <a href="#ae1e307c36bdc8b8c09f9f7ff01bd1006">More...</a><br /></td></tr>
<tr class="separator:ae1e307c36bdc8b8c09f9f7ff01bd1006"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6c3c65cb0bdda5ba77291f35c6832b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ad6c3c65cb0bdda5ba77291f35c6832b4">flush_file_spaces</a> (uint8_t purpose)</td></tr>
<tr class="memdesc:ad6c3c65cb0bdda5ba77291f35c6832b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush to disk the writes in file spaces of the given type possibly cached by the OS.  <a href="#ad6c3c65cb0bdda5ba77291f35c6832b4">More...</a><br /></td></tr>
<tr class="separator:ad6c3c65cb0bdda5ba77291f35c6832b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac872b469aaf293f7e4555af76948bf9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ac872b469aaf293f7e4555af76948bf9b">checkpoint</a> (<a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> lwm)</td></tr>
<tr class="memdesc:ac872b469aaf293f7e4555af76948bf9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up the shards.  <a href="#ac872b469aaf293f7e4555af76948bf9b">More...</a><br /></td></tr>
<tr class="separator:ac872b469aaf293f7e4555af76948bf9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2189ee25a0c30267dba7d21f4f56573c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a2189ee25a0c30267dba7d21f4f56573c">count_deleted</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo_num)</td></tr>
<tr class="memdesc:a2189ee25a0c30267dba7d21f4f56573c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count how many truncated undo space IDs are still tracked in the buffer pool and the file_system cache.  <a href="#a2189ee25a0c30267dba7d21f4f56573c">More...</a><br /></td></tr>
<tr class="separator:a2189ee25a0c30267dba7d21f4f56573c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb173db3e0b969b771fd587f3c7f42c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#acb173db3e0b969b771fd587f3c7f42c7">is_deleted</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:acb173db3e0b969b771fd587f3c7f42c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a particular undo space_id for a page in the buffer pool has been deleted recently.  <a href="#acb173db3e0b969b771fd587f3c7f42c7">More...</a><br /></td></tr>
<tr class="separator:acb173db3e0b969b771fd587f3c7f42c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa04835b0dd9de51dafc260f0882aa79e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#aa04835b0dd9de51dafc260f0882aa79e">get_space_by_name</a> (const char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>)</td></tr>
<tr class="memdesc:aa04835b0dd9de51dafc260f0882aa79e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the fil_space_t instance that maps to the name.  <a href="#aa04835b0dd9de51dafc260f0882aa79e">More...</a><br /></td></tr>
<tr class="separator:aa04835b0dd9de51dafc260f0882aa79e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81ccc90f8a2963ac8ce9423e113a3f14"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a81ccc90f8a2963ac8ce9423e113a3f14">is_greater_than_max_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id) const</td></tr>
<tr class="memdesc:a81ccc90f8a2963ac8ce9423e113a3f14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check a space ID against the maximum known tablespace ID.  <a href="#a81ccc90f8a2963ac8ce9423e113a3f14">More...</a><br /></td></tr>
<tr class="separator:a81ccc90f8a2963ac8ce9423e113a3f14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaa9910e86063a6cffe451236285a784"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#afaa9910e86063a6cffe451236285a784">set_maximum_space_id</a> (const <a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:afaa9910e86063a6cffe451236285a784"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the maximum known tablespace ID.  <a href="#afaa9910e86063a6cffe451236285a784">More...</a><br /></td></tr>
<tr class="separator:afaa9910e86063a6cffe451236285a784"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26016d2c114852cf6fb457accc109764"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a26016d2c114852cf6fb457accc109764">update_maximum_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a26016d2c114852cf6fb457accc109764"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the maximim known space ID if it's smaller than max_id.  <a href="#a26016d2c114852cf6fb457accc109764">More...</a><br /></td></tr>
<tr class="separator:a26016d2c114852cf6fb457accc109764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f68d39d36c0c2c2d8b12618cd9d87fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a1f68d39d36c0c2c2d8b12618cd9d87fd">assign_new_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> *space_id)</td></tr>
<tr class="memdesc:a1f68d39d36c0c2c2d8b12618cd9d87fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns a new space id for a new single-table tablespace.  <a href="#a1f68d39d36c0c2c2d8b12618cd9d87fd">More...</a><br /></td></tr>
<tr class="separator:a1f68d39d36c0c2c2d8b12618cd9d87fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a516a849cddc42065e909b43f9a4a79f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a516a849cddc42065e909b43f9a4a79f3">close_file_in_all_LRU</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> print_info)</td></tr>
<tr class="memdesc:a516a849cddc42065e909b43f9a4a79f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to close a file in all the LRU lists.  <a href="#a516a849cddc42065e909b43f9a4a79f3">More...</a><br /></td></tr>
<tr class="separator:a516a849cddc42065e909b43f9a4a79f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2cd1affc34510c79cae23e4db51b467"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ac2cd1affc34510c79cae23e4db51b467">open_all_system_tablespaces</a> ()</td></tr>
<tr class="memdesc:ac2cd1affc34510c79cae23e4db51b467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens all log files and system tablespace data files in all shards.  <a href="#ac2cd1affc34510c79cae23e4db51b467">More...</a><br /></td></tr>
<tr class="separator:ac2cd1affc34510c79cae23e4db51b467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd24478d03656916c689b89ada26791d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#abd24478d03656916c689b89ada26791d">close_files_in_a_shard</a> (<a class="el" href="classFil__shard.html">Fil_shard</a> *shard)</td></tr>
<tr class="memdesc:abd24478d03656916c689b89ada26791d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close all open files in a shard.  <a href="#abd24478d03656916c689b89ada26791d">More...</a><br /></td></tr>
<tr class="separator:abd24478d03656916c689b89ada26791d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42db916445d542965523a180eee44597"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a42db916445d542965523a180eee44597">close_all_files</a> ()</td></tr>
<tr class="memdesc:a42db916445d542965523a180eee44597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close all open files.  <a href="#a42db916445d542965523a180eee44597">More...</a><br /></td></tr>
<tr class="separator:a42db916445d542965523a180eee44597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2931d9e68762a2f79b68d429e6fa34ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a2931d9e68762a2f79b68d429e6fa34ef">close_all_log_files</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> free_all)</td></tr>
<tr class="memdesc:a2931d9e68762a2f79b68d429e6fa34ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close all the log files in all shards.  <a href="#a2931d9e68762a2f79b68d429e6fa34ef">More...</a><br /></td></tr>
<tr class="separator:a2931d9e68762a2f79b68d429e6fa34ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0efdcb234d7199d3149891a76e8e1c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#af0efdcb234d7199d3149891a76e8e1c5">iterate</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> include_log, <a class="el" href="classFil__iterator.html#a6fb530c9ad8ad86eaba80d8d4aa044b5">Fil_iterator::Function</a> &amp;f)</td></tr>
<tr class="memdesc:af0efdcb234d7199d3149891a76e8e1c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate through all persistent tablespace files (FIL_TYPE_TABLESPACE) returning the nodes via callback function cbk.  <a href="#af0efdcb234d7199d3149891a76e8e1c5">More...</a><br /></td></tr>
<tr class="separator:af0efdcb234d7199d3149891a76e8e1c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9d79ce23cb25ad4da7f9aae1d49393"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a5e9d79ce23cb25ad4da7f9aae1d49393">encryption_rotate</a> ()</td></tr>
<tr class="memdesc:a5e9d79ce23cb25ad4da7f9aae1d49393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotate the tablespace keys by new master key.  <a href="#a5e9d79ce23cb25ad4da7f9aae1d49393">More...</a><br /></td></tr>
<tr class="separator:a5e9d79ce23cb25ad4da7f9aae1d49393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b7160e05f79300a970fa32b80cc3c20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a7b7160e05f79300a970fa32b80cc3c20">space_detach</a> (<a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:a7b7160e05f79300a970fa32b80cc3c20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detach a space object from the tablespace memory cache.  <a href="#a7b7160e05f79300a970fa32b80cc3c20">More...</a><br /></td></tr>
<tr class="separator:a7b7160e05f79300a970fa32b80cc3c20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84040a068f5a7bc5d0f0f65bea6f7c8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a84040a068f5a7bc5d0f0f65bea6f7c8e">get_max_space_id</a> () const</td></tr>
<tr class="separator:a84040a068f5a7bc5d0f0f65bea6f7c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce35251d22fcf9bc0e719321b917c53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#afce35251d22fcf9bc0e719321b917c53">lookup_for_recovery</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:afce35251d22fcf9bc0e719321b917c53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup the tablespace ID.  <a href="#afce35251d22fcf9bc0e719321b917c53">More...</a><br /></td></tr>
<tr class="separator:afce35251d22fcf9bc0e719321b917c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55e2ad47891c616510578e67642ea971"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a55e2ad47891c616510578e67642ea971">open_for_recovery</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a55e2ad47891c616510578e67642ea971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a tablespace that has a redo log record to apply.  <a href="#a55e2ad47891c616510578e67642ea971">More...</a><br /></td></tr>
<tr class="separator:a55e2ad47891c616510578e67642ea971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeb162842dbead3b4e7d7d9e36a23b93"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#aeeb162842dbead3b4e7d7d9e36a23b93">check_missing_tablespaces</a> ()</td></tr>
<tr class="memdesc:aeeb162842dbead3b4e7d7d9e36a23b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function should be called after recovery has completed.  <a href="#aeeb162842dbead3b4e7d7d9e36a23b93">More...</a><br /></td></tr>
<tr class="separator:aeeb162842dbead3b4e7d7d9e36a23b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25db8fe151f538d88c3db481c695bc5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#af25db8fe151f538d88c3db481c695bc5">moved</a> (<a class="el" href="namespacedd.html#a0b4cee5d24960e48c74e25ae29222757">dd::Object_id</a> object_id, <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, const char *space_name, const std::string &amp;old_path, const std::string &amp;new_path)</td></tr>
<tr class="memdesc:af25db8fe151f538d88c3db481c695bc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Note that a file has been relocated.  <a href="#af25db8fe151f538d88c3db481c695bc5">More...</a><br /></td></tr>
<tr class="separator:af25db8fe151f538d88c3db481c695bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07ed27486c5540734e7b0744663e9a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#af07ed27486c5540734e7b0744663e9a1">check_path</a> (const std::string &amp;<a class="el" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>) const</td></tr>
<tr class="memdesc:af07ed27486c5540734e7b0744663e9a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a path is known to InnoDB.  <a href="#af07ed27486c5540734e7b0744663e9a1">More...</a><br /></td></tr>
<tr class="separator:af07ed27486c5540734e7b0744663e9a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac28235520cc84f2d4d5889f7fe9da2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a3ac28235520cc84f2d4d5889f7fe9da2">get_dirs</a> () const</td></tr>
<tr class="memdesc:a3ac28235520cc84f2d4d5889f7fe9da2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the list of directories that InnoDB knows about.  <a href="#a3ac28235520cc84f2d4d5889f7fe9da2">More...</a><br /></td></tr>
<tr class="separator:a3ac28235520cc84f2d4d5889f7fe9da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ff78e819c4a2141d5462cfd62cf888"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a47ff78e819c4a2141d5462cfd62cf888">set_scan_dir</a> (const std::string &amp;directory, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_undo_dir)</td></tr>
<tr class="memdesc:a47ff78e819c4a2141d5462cfd62cf888"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalize and save a directory to scan for IBD and IBU datafiles before recovery.  <a href="#a47ff78e819c4a2141d5462cfd62cf888">More...</a><br /></td></tr>
<tr class="separator:a47ff78e819c4a2141d5462cfd62cf888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96eb5a659c729e9c4a764b0aba0df6c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a96eb5a659c729e9c4a764b0aba0df6c8">set_scan_dirs</a> (const std::string &amp;directories)</td></tr>
<tr class="memdesc:a96eb5a659c729e9c4a764b0aba0df6c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalize and save a list of directories to scan for IBD and IBU datafiles before recovery.  <a href="#a96eb5a659c729e9c4a764b0aba0df6c8">More...</a><br /></td></tr>
<tr class="separator:a96eb5a659c729e9c4a764b0aba0df6c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9064cc639009bdaa26ffed5d42f95cfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a9064cc639009bdaa26ffed5d42f95cfb">scan</a> ()</td></tr>
<tr class="memdesc:a9064cc639009bdaa26ffed5d42f95cfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scan the directories to build the tablespace ID to file name mapping table.  <a href="#a9064cc639009bdaa26ffed5d42f95cfb">More...</a><br /></td></tr>
<tr class="separator:a9064cc639009bdaa26ffed5d42f95cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b7228115de05bdefe230fb2c8d76d24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFil__shard.html">Fil_shard</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a8b7228115de05bdefe230fb2c8d76d24">shard_by_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id) const</td></tr>
<tr class="memdesc:a8b7228115de05bdefe230fb2c8d76d24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fil_shard by space ID.  <a href="#a8b7228115de05bdefe230fb2c8d76d24">More...</a><br /></td></tr>
<tr class="separator:a8b7228115de05bdefe230fb2c8d76d24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dddf814b1be44ae1ab7b93b98e39c7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a3dddf814b1be44ae1ab7b93b98e39c7b">mutex_acquire_all</a> () const</td></tr>
<tr class="memdesc:a3dddf814b1be44ae1ab7b93b98e39c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire all the mutexes.  <a href="#a3dddf814b1be44ae1ab7b93b98e39c7b">More...</a><br /></td></tr>
<tr class="separator:a3dddf814b1be44ae1ab7b93b98e39c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0af64a9e00a59fd8176baee41e13bbf4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a0af64a9e00a59fd8176baee41e13bbf4">mutex_release_all</a> () const</td></tr>
<tr class="memdesc:a0af64a9e00a59fd8176baee41e13bbf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release all the mutexes.  <a href="#a0af64a9e00a59fd8176baee41e13bbf4">More...</a><br /></td></tr>
<tr class="separator:a0af64a9e00a59fd8176baee41e13bbf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab60f1d087e8073b03bdacd7dc7da81b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ab60f1d087e8073b03bdacd7dc7da81b2">validate</a> () const</td></tr>
<tr class="memdesc:ab60f1d087e8073b03bdacd7dc7da81b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the consistency of the tablespace cache.  <a href="#ab60f1d087e8073b03bdacd7dc7da81b2">More...</a><br /></td></tr>
<tr class="separator:ab60f1d087e8073b03bdacd7dc7da81b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a722d02bbb0e06c1937872312b281b96d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a722d02bbb0e06c1937872312b281b96d">mutex_owned_all</a> () const</td></tr>
<tr class="memdesc:a722d02bbb0e06c1937872312b281b96d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if all mutexes are owned.  <a href="#a722d02bbb0e06c1937872312b281b96d">More...</a><br /></td></tr>
<tr class="separator:a722d02bbb0e06c1937872312b281b96d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7cc9b2b59eaabff1b2888be9cf51abd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ad7cc9b2b59eaabff1b2888be9cf51abd">rename_tablespace_name</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, const char *old_name, const char *new_name)</td></tr>
<tr class="memdesc:ad7cc9b2b59eaabff1b2888be9cf51abd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rename a tablespace.  <a href="#ad7cc9b2b59eaabff1b2888be9cf51abd">More...</a><br /></td></tr>
<tr class="separator:ad7cc9b2b59eaabff1b2888be9cf51abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab153d6b976b21b23df02b7d81150276e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ab153d6b976b21b23df02b7d81150276e">free_scanned_files</a> ()</td></tr>
<tr class="memdesc:ab153d6b976b21b23df02b7d81150276e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the data structures required for recovery.  <a href="#ab153d6b976b21b23df02b7d81150276e">More...</a><br /></td></tr>
<tr class="separator:ab153d6b976b21b23df02b7d81150276e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad1428ec289598612840ebd1d7d2eff40"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ad1428ec289598612840ebd1d7d2eff40">space_belongs_in_LRU</a> (const <a class="el" href="structfil__space__t.html">fil_space_t</a> *space)</td></tr>
<tr class="memdesc:ad1428ec289598612840ebd1d7d2eff40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if a file belongs to the least-recently-used list.  <a href="#ad1428ec289598612840ebd1d7d2eff40">More...</a><br /></td></tr>
<tr class="separator:ad1428ec289598612840ebd1d7d2eff40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2de872b231216b3e1e50748d6568f33"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ad2de872b231216b3e1e50748d6568f33">get_tablespace_id</a> (const std::string &amp;<a class="el" href="mi__test3_8cc.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>)</td></tr>
<tr class="memdesc:ad2de872b231216b3e1e50748d6568f33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the tablespace ID from an .ibd and/or an undo tablespace.  <a href="#ad2de872b231216b3e1e50748d6568f33">More...</a><br /></td></tr>
<tr class="separator:ad2de872b231216b3e1e50748d6568f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a16b06d778102a8069df2638fa84af466"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fil0fil_8cc.html#ad9f02bcccb7b9a3e9a30e39d697d0316">fil_load_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a16b06d778102a8069df2638fa84af466">ibd_open_for_recovery</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, const std::string &amp;<a class="el" href="mysqldump_8cc.html#a38dcf0baefa35c1961c23cf3e06002b5">path</a>, <a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;space)</td></tr>
<tr class="memdesc:a16b06d778102a8069df2638fa84af466"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an ibd tablespace and add it to the InnoDB data structures.  <a href="#a16b06d778102a8069df2638fa84af466">More...</a><br /></td></tr>
<tr class="separator:a16b06d778102a8069df2638fa84af466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0dc711423a5deab7ac6d8d70c54ee45"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ad0dc711423a5deab7ac6d8d70c54ee45">Fil_system</a> (<a class="el" href="classFil__system.html">Fil_system</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:ad0dc711423a5deab7ac6d8d70c54ee45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52a47ed2fe1260ed62824542229d39d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ad52a47ed2fe1260ed62824542229d39d">Fil_system</a> (const <a class="el" href="classFil__system.html">Fil_system</a> &amp;)=delete</td></tr>
<tr class="separator:ad52a47ed2fe1260ed62824542229d39d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a038325973e001a89e1d6022ada8308b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFil__system.html">Fil_system</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a038325973e001a89e1d6022ada8308b3">operator=</a> (const <a class="el" href="classFil__system.html">Fil_system</a> &amp;)=delete</td></tr>
<tr class="separator:a038325973e001a89e1d6022ada8308b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a997e3132e7bfd2f6b05e206ccab0c599"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classFil__system.html#a5423c6ff493aedebad335c63aeca55ff">Fil_shards</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#a997e3132e7bfd2f6b05e206ccab0c599">m_shards</a></td></tr>
<tr class="memdesc:a997e3132e7bfd2f6b05e206ccab0c599"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fil_shards managed.  <a href="#a997e3132e7bfd2f6b05e206ccab0c599">More...</a><br /></td></tr>
<tr class="separator:a997e3132e7bfd2f6b05e206ccab0c599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1cd7f56e6f776554ee6de1d87cc239b"><td class="memItemLeft" align="right" valign="top">const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ab1cd7f56e6f776554ee6de1d87cc239b">m_max_n_open</a></td></tr>
<tr class="memdesc:ab1cd7f56e6f776554ee6de1d87cc239b"><td class="mdescLeft">&#160;</td><td class="mdescRight">n_open is not allowed to exceed this  <a href="#ab1cd7f56e6f776554ee6de1d87cc239b">More...</a><br /></td></tr>
<tr class="separator:ab1cd7f56e6f776554ee6de1d87cc239b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affe01f6d42a1e280bf88aeb5fea31444"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#affe01f6d42a1e280bf88aeb5fea31444">m_max_assigned_id</a></td></tr>
<tr class="memdesc:affe01f6d42a1e280bf88aeb5fea31444"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum space id in the existing tables, or assigned during the time mysqld has been up; at an InnoDB startup we scan the data dictionary and set here the maximum of the space id's of the tables there.  <a href="#affe01f6d42a1e280bf88aeb5fea31444">More...</a><br /></td></tr>
<tr class="separator:affe01f6d42a1e280bf88aeb5fea31444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb7125d60be5c63774561b41a8f2a3c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#aadb7125d60be5c63774561b41a8f2a3c">m_space_id_reuse_warned</a></td></tr>
<tr class="memdesc:aadb7125d60be5c63774561b41a8f2a3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">true if fil_space_create() has issued a warning about potential space_id reuse  <a href="#aadb7125d60be5c63774561b41a8f2a3c">More...</a><br /></td></tr>
<tr class="separator:aadb7125d60be5c63774561b41a8f2a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf021b64d0b6f8a89c46d425b022d4ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacedd__fil.html#ac6ba17406aa75eb41ef41c646064be94">dd_fil::Tablespaces</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#adf021b64d0b6f8a89c46d425b022d4ff">m_moved</a></td></tr>
<tr class="memdesc:adf021b64d0b6f8a89c46d425b022d4ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of tablespaces that have been relocated.  <a href="#adf021b64d0b6f8a89c46d425b022d4ff">More...</a><br /></td></tr>
<tr class="separator:adf021b64d0b6f8a89c46d425b022d4ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac05d517ad3f0b7feb9b1d78f0c808505"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTablespace__dirs.html">Tablespace_dirs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#ac05d517ad3f0b7feb9b1d78f0c808505">m_dirs</a></td></tr>
<tr class="memdesc:ac05d517ad3f0b7feb9b1d78f0c808505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tablespace directories scanned at startup.  <a href="#ac05d517ad3f0b7feb9b1d78f0c808505">More...</a><br /></td></tr>
<tr class="separator:ac05d517ad3f0b7feb9b1d78f0c808505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbfe6a079f45eafe39ea22da96783950"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#abbfe6a079f45eafe39ea22da96783950">m_old_paths</a></td></tr>
<tr class="memdesc:abbfe6a079f45eafe39ea22da96783950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old file paths during 5.7 upgrade.  <a href="#abbfe6a079f45eafe39ea22da96783950">More...</a><br /></td></tr>
<tr class="separator:abbfe6a079f45eafe39ea22da96783950"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:afead6b55d27d02d8c32d6ed027fd6576"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFil__system.html#afead6b55d27d02d8c32d6ed027fd6576">Fil_shard</a></td></tr>
<tr class="separator:afead6b55d27d02d8c32d6ed027fd6576"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The tablespace memory cache; also the totality of logs (the log data space) is stored here; below we talk about tablespaces, but also the ib_logfiles form a 'space' and it is handled here. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a5423c6ff493aedebad335c63aeca55ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5423c6ff493aedebad335c63aeca55ff">&#9670;&nbsp;</a></span>Fil_shards</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classFil__system.html#a5423c6ff493aedebad335c63aeca55ff">Fil_system::Fil_shards</a> =  std::vector&lt;<a class="el" href="classFil__shard.html">Fil_shard</a> *&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a949c1de778e98311ddafed8396988769"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a949c1de778e98311ddafed8396988769">&#9670;&nbsp;</a></span>Fil_system() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Fil_system::Fil_system </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n_shards</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_open</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_shards</td><td>Number of shards to create </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_open</td><td>Maximum number of open files </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aac3c4ed01f8cc05072f2b5ddade2bb83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac3c4ed01f8cc05072f2b5ddade2bb83">&#9670;&nbsp;</a></span>~Fil_system()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Fil_system::~Fil_system </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<a id="ad0dc711423a5deab7ac6d8d70c54ee45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0dc711423a5deab7ac6d8d70c54ee45">&#9670;&nbsp;</a></span>Fil_system() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Fil_system::Fil_system </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFil__system.html">Fil_system</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad52a47ed2fe1260ed62824542229d39d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52a47ed2fe1260ed62824542229d39d">&#9670;&nbsp;</a></span>Fil_system() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Fil_system::Fil_system </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFil__system.html">Fil_system</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3cdd184c0e686e922f0044a21cd36b64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cdd184c0e686e922f0044a21cd36b64">&#9670;&nbsp;</a></span>add_old_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::add_old_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>file_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add file to old file list. </p>
<p>The list is used during 5.7 upgrade failure to revert back the modified file names. We modify partitioned file names to lower case. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">file_path</td><td>old file name with path </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1f68d39d36c0c2c2d8b12618cd9d87fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f68d39d36c0c2c2d8b12618cd9d87fd">&#9670;&nbsp;</a></span>assign_new_space_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::assign_new_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> *&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assigns a new space id for a new single-table tablespace. </p>
<p>This works simply by incrementing the global counter. If 4 billion ids is not enough, we may need to recycle ids. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">space_id</td><td>Set this to the new tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if assigned, false if not </dd></dl>

</div>
</div>
<a id="aeeb162842dbead3b4e7d7d9e36a23b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeb162842dbead3b4e7d7d9e36a23b93">&#9670;&nbsp;</a></span>check_missing_tablespaces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::check_missing_tablespaces </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function should be called after recovery has completed. </p>
<p>Check for tablespace files for which we did not see any MLOG_FILE_DELETE or MLOG_FILE_RENAME record. These could not be recovered. </p><dl class="section return"><dt>Returns</dt><dd>true if there were some filenames missing for which we had to ignore redo log records during the apply phase </dd></dl>

</div>
</div>
<a id="af07ed27486c5540734e7b0744663e9a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af07ed27486c5540734e7b0744663e9a1">&#9670;&nbsp;</a></span>check_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::check_path </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a path is known to InnoDB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Path to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if path is known to InnoDB </dd></dl>

</div>
</div>
<a id="ac872b469aaf293f7e4555af76948bf9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac872b469aaf293f7e4555af76948bf9b">&#9670;&nbsp;</a></span>checkpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::checkpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a>&#160;</td>
          <td class="paramname"><em>lwm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean up the shards. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lwm</td><td>No dirty pages less than this LSN in the buffer pool. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3e2dadf4636df9ab60c1857e99738c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e2dadf4636df9ab60c1857e99738c75">&#9670;&nbsp;</a></span>clear_old_files()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::clear_old_files </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear all accumulated old files. </p>

</div>
</div>
<a id="a42db916445d542965523a180eee44597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42db916445d542965523a180eee44597">&#9670;&nbsp;</a></span>close_all_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::close_all_files </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close all open files. </p>

</div>
</div>
<a id="a2931d9e68762a2f79b68d429e6fa34ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2931d9e68762a2f79b68d429e6fa34ef">&#9670;&nbsp;</a></span>close_all_log_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::close_all_log_files </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>free_all</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close all the log files in all shards. </p>
<p>Close all log files in all shards.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">free_all</td><td>If set then free all instances </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a516a849cddc42065e909b43f9a4a79f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a516a849cddc42065e909b43f9a4a79f3">&#9670;&nbsp;</a></span>close_file_in_all_LRU()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::close_file_in_all_LRU </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>print_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to close a file in all the LRU lists. </p>
<p>The caller must hold the mutex. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">print_info</td><td>if true, prints information why it close a file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if success, false if should retry later </dd></dl>

</div>
</div>
<a id="abd24478d03656916c689b89ada26791d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd24478d03656916c689b89ada26791d">&#9670;&nbsp;</a></span>close_files_in_a_shard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::close_files_in_a_shard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFil__shard.html">Fil_shard</a> *&#160;</td>
          <td class="paramname"><em>shard</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close all open files in a shard. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">shard</td><td>Close files of this shard </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2189ee25a0c30267dba7d21f4f56573c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2189ee25a0c30267dba7d21f4f56573c">&#9670;&nbsp;</a></span>count_deleted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Fil_system::count_deleted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>undo_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Count how many truncated undo space IDs are still tracked in the buffer pool and the file_system cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_num</td><td>undo tablespace number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of undo tablespaces that are still in memory. </dd></dl>

</div>
</div>
<a id="a5e9d79ce23cb25ad4da7f9aae1d49393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9d79ce23cb25ad4da7f9aae1d49393">&#9670;&nbsp;</a></span>encryption_rotate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t Fil_system::encryption_rotate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rotate the tablespace keys by new master key. </p>
<dl class="section return"><dt>Returns</dt><dd>the number of tablespaces that failed to rotate. </dd></dl>

</div>
</div>
<a id="a6426968f2677e829d1949b8830267365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6426968f2677e829d1949b8830267365">&#9670;&nbsp;</a></span>erase_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::erase_path </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Erase a tablespace ID and its mapping from the scanned files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID to erase </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful </dd></dl>

</div>
</div>
<a id="ae1e307c36bdc8b8c09f9f7ff01bd1006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1e307c36bdc8b8c09f9f7ff01bd1006">&#9670;&nbsp;</a></span>flush_file_redo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::flush_file_redo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush the redo log writes to disk, possibly cached by the OS. </p>

</div>
</div>
<a id="ad6c3c65cb0bdda5ba77291f35c6832b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6c3c65cb0bdda5ba77291f35c6832b4">&#9670;&nbsp;</a></span>flush_file_spaces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::flush_file_spaces </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>purpose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush to disk the writes in file spaces of the given type possibly cached by the OS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">purpose</td><td>FIL_TYPE_TABLESPACE or FIL_TYPE_LOG, can be ORred </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab153d6b976b21b23df02b7d81150276e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab153d6b976b21b23df02b7d81150276e">&#9670;&nbsp;</a></span>free_scanned_files()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::free_scanned_files </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free the data structures required for recovery. </p>

</div>
</div>
<a id="a3ac28235520cc84f2d4d5889f7fe9da2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ac28235520cc84f2d4d5889f7fe9da2">&#9670;&nbsp;</a></span>get_dirs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Fil_system::get_dirs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the list of directories that InnoDB knows about. </p>
<dl class="section return"><dt>Returns</dt><dd>the list of directories 'dir1;dir2;....;dirN' </dd></dl>

</div>
</div>
<a id="a416b9a11da9a8c2d60fe69ea9d20a787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a416b9a11da9a8c2d60fe69ea9d20a787">&#9670;&nbsp;</a></span>get_file_by_space_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::get_file_by_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch the file name opened for a space_id from the file map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>tablespace ID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">name</td><td>the scanned filename </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the space_id is found. The name is set to an empty string if the space_id is not found. </dd></dl>

</div>
</div>
<a id="a3c4bd425bf69f6f6e17746dd2306a26f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c4bd425bf69f6f6e17746dd2306a26f">&#9670;&nbsp;</a></span>get_file_by_space_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::get_file_by_space_num </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> &amp;&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch the file name opened for an undo space number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_num</td><td>undo tablespace number </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">space_id</td><td>tablespace ID </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">name</td><td>the scanned filename </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the space_id is found. The name is set to an empty string if the space_id is not found. </dd></dl>

</div>
</div>
<a id="a84040a068f5a7bc5d0f0f65bea6f7c8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84040a068f5a7bc5d0f0f65bea6f7c8e">&#9670;&nbsp;</a></span>get_max_space_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> Fil_system::get_max_space_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the maximum assigned ID so far </dd></dl>

</div>
</div>
<a id="a92e3c66ec1eebd5c2f3398edc9a41afc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92e3c66ec1eebd5c2f3398edc9a41afc">&#9670;&nbsp;</a></span>get_root()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; Fil_system::get_root </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the top level directory where this filename was found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>Path to look for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the top level directory under which this file was found. </dd></dl>

</div>
</div>
<a id="ad943a797ea35c867749899f8fa427977"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad943a797ea35c867749899f8fa427977">&#9670;&nbsp;</a></span>get_scanned_filename_by_space_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTablespace__dirs.html#a5deb94bf601384954a1495a2ce35f5eb">Tablespace_dirs::Result</a> Fil_system::get_scanned_filename_by_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch the file names opened for a space_id during recovery. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pair of top level directory scanned and names that map to space_id or nullptr if not found. </dd></dl>

</div>
</div>
<a id="a662d63d3020e6963661e3f9d7b8f2216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a662d63d3020e6963661e3f9d7b8f2216">&#9670;&nbsp;</a></span>get_scanned_filename_by_space_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTablespace__dirs.html#a5deb94bf601384954a1495a2ce35f5eb">Tablespace_dirs::Result</a> Fil_system::get_scanned_filename_by_space_num </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> &amp;&#160;</td>
          <td class="paramname"><em>space_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch the file name opened for an undo space number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_num</td><td>undo tablespace numb er to lookup </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">space_id</td><td>Tablespace ID found </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pair of top level directory scanned and name that maps to the space_num or nullptr if not found. </dd></dl>

</div>
</div>
<a id="aa04835b0dd9de51dafc260f0882aa79e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa04835b0dd9de51dafc260f0882aa79e">&#9670;&nbsp;</a></span>get_space_by_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__space__t.html">fil_space_t</a>* Fil_system::get_space_by_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch the fil_space_t instance that maps to the name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Tablespace name to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tablespace instance or nullptr if not found. </dd></dl>

</div>
</div>
<a id="ad2de872b231216b3e1e50748d6568f33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2de872b231216b3e1e50748d6568f33">&#9670;&nbsp;</a></span>get_tablespace_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> Fil_system::get_tablespace_id </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the tablespace ID from an .ibd and/or an undo tablespace. </p>
<p>If the ID is 0 on the first page then try finding the ID with Datafile::find_space_id(). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>File name to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>s_invalid_space_id if not found, otherwise the space ID </dd></dl>

</div>
</div>
<a id="a16b06d778102a8069df2638fa84af466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16b06d778102a8069df2638fa84af466">&#9670;&nbsp;</a></span>ibd_open_for_recovery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fil0fil_8cc.html#ad9f02bcccb7b9a3e9a30e39d697d0316">fil_load_status</a> Fil_system::ibd_open_for_recovery </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&amp;&#160;</td>
          <td class="paramname"><em>space</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Open an ibd tablespace and add it to the InnoDB data structures. </p>
<p>This is similar to fil_ibd_open() except that it is used while processing the redo log, so the data dictionary is not available and very little validation is done. The tablespace name is extracted from the dbname/tablename.ibd portion of the filename, which assumes that the file is a file-per-table tablespace. Any name will do for now. General tablespace names will be read from the dictionary after it has been recovered. The tablespace flags are read at this time from the first page of the file in validate_for_recovery(). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>path/to/databasename/tablename.ibd </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">space</td><td>the tablespace, or nullptr on error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status of the operation </dd></dl>

</div>
</div>
<a id="acb173db3e0b969b771fd587f3c7f42c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb173db3e0b969b771fd587f3c7f42c7">&#9670;&nbsp;</a></span>is_deleted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::is_deleted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a particular undo space_id for a page in the buffer pool has been deleted recently. </p>
<p>Its space_id will be found in Fil_shard::m_deleted until Fil:shard::checkpoint removes all its pages from the buffer pool and the fil_space_t from Fil_system. </p><dl class="section return"><dt>Returns</dt><dd>true if this space_id is in the list of recently deleted spaces. </dd></dl>

</div>
</div>
<a id="a81ccc90f8a2963ac8ce9423e113a3f14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81ccc90f8a2963ac8ce9423e113a3f14">&#9670;&nbsp;</a></span>is_greater_than_max_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::is_greater_than_max_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check a space ID against the maximum known tablespace ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if it is &gt; than maximum known tablespace ID. </dd></dl>

</div>
</div>
<a id="af0efdcb234d7199d3149891a76e8e1c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0efdcb234d7199d3149891a76e8e1c5">&#9670;&nbsp;</a></span>iterate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_system::iterate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>include_log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFil__iterator.html#a6fb530c9ad8ad86eaba80d8d4aa044b5">Fil_iterator::Function</a> &amp;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate through all persistent tablespace files (FIL_TYPE_TABLESPACE) returning the nodes via callback function cbk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">include_log</td><td>Include log files, if true </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>Callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>any error returned by the callback function. </dd></dl>

</div>
</div>
<a id="afce35251d22fcf9bc0e719321b917c53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afce35251d22fcf9bc0e719321b917c53">&#9670;&nbsp;</a></span>lookup_for_recovery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::lookup_for_recovery </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lookup the tablespace ID. </p>
<p>Lookup the tablespace ID for recovery and DDL log apply.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID to lookup </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the space ID is known. </dd></dl>

</div>
</div>
<a id="af25db8fe151f538d88c3db481c695bc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af25db8fe151f538d88c3db481c695bc5">&#9670;&nbsp;</a></span>moved()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::moved </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacedd.html#a0b4cee5d24960e48c74e25ae29222757">dd::Object_id</a>&#160;</td>
          <td class="paramname"><em>object_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>space_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>old_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>new_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Note that a file has been relocated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">object_id</td><td>Server DD tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>InnoDB tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">space_name</td><td>Tablespace name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_path</td><td>Path to the old location </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_path</td><td>Path scanned from disk </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3dddf814b1be44ae1ab7b93b98e39c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dddf814b1be44ae1ab7b93b98e39c7b">&#9670;&nbsp;</a></span>mutex_acquire_all()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::mutex_acquire_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire all the mutexes. </p>

</div>
</div>
<a id="a722d02bbb0e06c1937872312b281b96d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a722d02bbb0e06c1937872312b281b96d">&#9670;&nbsp;</a></span>mutex_owned_all()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::mutex_owned_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if all mutexes are owned. </p>
<dl class="section return"><dt>Returns</dt><dd>true if all owned. </dd></dl>

</div>
</div>
<a id="a0af64a9e00a59fd8176baee41e13bbf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0af64a9e00a59fd8176baee41e13bbf4">&#9670;&nbsp;</a></span>mutex_release_all()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::mutex_release_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release all the mutexes. </p>

</div>
</div>
<a id="ac2cd1affc34510c79cae23e4db51b467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2cd1affc34510c79cae23e4db51b467">&#9670;&nbsp;</a></span>open_all_system_tablespaces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::open_all_system_tablespaces </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens all log files and system tablespace data files in all shards. </p>

</div>
</div>
<a id="a55e2ad47891c616510578e67642ea971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55e2ad47891c616510578e67642ea971">&#9670;&nbsp;</a></span>open_for_recovery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::open_for_recovery </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a tablespace that has a redo log record to apply. </p>
<p>Open a tablespace that has a redo/DDL log record to apply.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the open was successful </dd></dl>

</div>
</div>
<a id="a038325973e001a89e1d6022ada8308b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a038325973e001a89e1d6022ada8308b3">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFil__system.html">Fil_system</a>&amp; Fil_system::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFil__system.html">Fil_system</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a72e4b5802a914e7e02a2539667575819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72e4b5802a914e7e02a2539667575819">&#9670;&nbsp;</a></span>prepare_open_for_business()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_system::prepare_open_for_business </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>read_only_mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the DD if any files were moved to a new location. </p>
<p>Free the Tablespace_files instance. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">read_only_mode</td><td>true if InnoDB is started in read only mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>

</div>
</div>
<a id="a95408075c47fcc60bfc78e3d642c5a9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95408075c47fcc60bfc78e3d642c5a9a">&#9670;&nbsp;</a></span>rename_partition_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::rename_partition_files </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>revert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rename partition files during upgrade. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">revert</td><td>if true, revert to old names </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad7cc9b2b59eaabff1b2888be9cf51abd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7cc9b2b59eaabff1b2888be9cf51abd">&#9670;&nbsp;</a></span>rename_tablespace_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_system::rename_tablespace_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rename a tablespace. </p>
<p>Use the space_id to find the shard. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old_name</td><td>old tablespace name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_name</td><td>new tablespace name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS on success </dd></dl>

</div>
</div>
<a id="a9064cc639009bdaa26ffed5d42f95cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9064cc639009bdaa26ffed5d42f95cfb">&#9670;&nbsp;</a></span>scan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> Fil_system::scan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scan the directories to build the tablespace ID to file name mapping table. </p>

</div>
</div>
<a id="afaa9910e86063a6cffe451236285a784"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaa9910e86063a6cffe451236285a784">&#9670;&nbsp;</a></span>set_maximum_space_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::set_maximum_space_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the maximum known tablespace ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Tablespace instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a47ff78e819c4a2141d5462cfd62cf888"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47ff78e819c4a2141d5462cfd62cf888">&#9670;&nbsp;</a></span>set_scan_dir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::set_scan_dir </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_undo_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Normalize and save a directory to scan for IBD and IBU datafiles before recovery. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>Directory to scan </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_undo_dir</td><td>true for an undo directory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a96eb5a659c729e9c4a764b0aba0df6c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96eb5a659c729e9c4a764b0aba0df6c8">&#9670;&nbsp;</a></span>set_scan_dirs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::set_scan_dirs </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>directories</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Normalize and save a list of directories to scan for IBD and IBU datafiles before recovery. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">directories</td><td>Directories to scan </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8b7228115de05bdefe230fb2c8d76d24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b7228115de05bdefe230fb2c8d76d24">&#9670;&nbsp;</a></span>shard_by_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFil__shard.html">Fil_shard</a>* Fil_system::shard_by_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fil_shard by space ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>reference to the shard </dd></dl>

</div>
</div>
<a id="a6cd496ba9228d43abe2a7a21f968b2cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cd496ba9228d43abe2a7a21f968b2cd">&#9670;&nbsp;</a></span>space_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfil__space__t.html">fil_space_t</a> * Fil_system::space_acquire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>silent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquire a tablespace when it could be dropped concurrently. </p>
<p>Used by background threads that do not necessarily hold proper locks for concurrency control. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">silent</td><td>Whether to silently ignore missing tablespaces </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the tablespace, or nullptr if missing or being deleted </dd></dl>

</div>
</div>
<a id="ad1428ec289598612840ebd1d7d2eff40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1428ec289598612840ebd1d7d2eff40">&#9670;&nbsp;</a></span>space_belongs_in_LRU()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::space_belongs_in_LRU </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines if a file belongs to the least-recently-used list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space</td><td>Tablespace to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the file belongs to fil_system-&gt;m_LRU mutex. </dd></dl>

</div>
</div>
<a id="a7b7160e05f79300a970fa32b80cc3c20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b7160e05f79300a970fa32b80cc3c20">&#9670;&nbsp;</a></span>space_detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::space_detach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfil__space__t.html">fil_space_t</a> *&#160;</td>
          <td class="paramname"><em>space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detach a space object from the tablespace memory cache. </p>
<p>Closes the tablespace files but does not delete them. There must not be any pending I/O's or flushes on the files. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">space</td><td>tablespace </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26016d2c114852cf6fb457accc109764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26016d2c114852cf6fb457accc109764">&#9670;&nbsp;</a></span>update_maximum_space_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Fil_system::update_maximum_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the maximim known space ID if it's smaller than max_id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Value to set if it's greater </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab60f1d087e8073b03bdacd7dc7da81b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab60f1d087e8073b03bdacd7dc7da81b2">&#9670;&nbsp;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::validate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the consistency of the tablespace cache. </p>
<dl class="section return"><dt>Returns</dt><dd>true if ok </dd></dl>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="afead6b55d27d02d8c32d6ed027fd6576"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afead6b55d27d02d8c32d6ed027fd6576">&#9670;&nbsp;</a></span>Fil_shard</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classFil__shard.html">Fil_shard</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac05d517ad3f0b7feb9b1d78f0c808505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac05d517ad3f0b7feb9b1d78f0c808505">&#9670;&nbsp;</a></span>m_dirs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTablespace__dirs.html">Tablespace_dirs</a> Fil_system::m_dirs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tablespace directories scanned at startup. </p>

</div>
</div>
<a id="affe01f6d42a1e280bf88aeb5fea31444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affe01f6d42a1e280bf88aeb5fea31444">&#9670;&nbsp;</a></span>m_max_assigned_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> Fil_system::m_max_assigned_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maximum space id in the existing tables, or assigned during the time mysqld has been up; at an InnoDB startup we scan the data dictionary and set here the maximum of the space id's of the tables there. </p>

</div>
</div>
<a id="ab1cd7f56e6f776554ee6de1d87cc239b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1cd7f56e6f776554ee6de1d87cc239b">&#9670;&nbsp;</a></span>m_max_n_open</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t Fil_system::m_max_n_open</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>n_open is not allowed to exceed this </p>

</div>
</div>
<a id="adf021b64d0b6f8a89c46d425b022d4ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf021b64d0b6f8a89c46d425b022d4ff">&#9670;&nbsp;</a></span>m_moved</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacedd__fil.html#ac6ba17406aa75eb41ef41c646064be94">dd_fil::Tablespaces</a> Fil_system::m_moved</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List of tablespaces that have been relocated. </p>
<p>We need to update the DD when it is safe to do so. </p>

</div>
</div>
<a id="abbfe6a079f45eafe39ea22da96783950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbfe6a079f45eafe39ea22da96783950">&#9670;&nbsp;</a></span>m_old_paths</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; Fil_system::m_old_paths</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Old file paths during 5.7 upgrade. </p>

</div>
</div>
<a id="a997e3132e7bfd2f6b05e206ccab0c599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a997e3132e7bfd2f6b05e206ccab0c599">&#9670;&nbsp;</a></span>m_shards</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classFil__system.html#a5423c6ff493aedebad335c63aeca55ff">Fil_shards</a> Fil_system::m_shards</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fil_shards managed. </p>

</div>
</div>
<a id="aadb7125d60be5c63774561b41a8f2a3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadb7125d60be5c63774561b41a8f2a3c">&#9670;&nbsp;</a></span>m_space_id_reuse_warned</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Fil_system::m_space_id_reuse_warned</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>true if fil_space_create() has issued a warning about potential space_id reuse </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>storage/innobase/fil/<a class="el" href="fil0fil_8cc.html">fil0fil.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classFil__system.html">Fil_system</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
