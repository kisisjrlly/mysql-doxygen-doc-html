<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: sql/sql_prepare.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sql__prepare_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sql_prepare.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;new&gt;</code><br />
<code>#include &quot;<a class="el" href="lex__string_8h_source.html">lex_string.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__alloc_8h_source.html">my_alloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__command_8h_source.html">my_command.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__inttypes_8h_source.html">my_inttypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="my__psi__config_8h_source.html">my_psi_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="psi__statement__bits_8h_source.html">mysql/components/services/psi_statement_bits.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mysql__com_8h_source.html">mysql_com.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__class_8h_source.html">sql/sql_class.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__error_8h_source.html">sql/sql_error.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__list_8h_source.html">sql/sql_list.h</a>&quot;</code><br />
</div>
<p><a href="sql__prepare_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classReprepare__observer.html">Reprepare_observer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An interface that is used to take an action when the locking module notices that a table version has changed since the last execution.  <a href="classReprepare__observer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classServer__runnable.html">Server_runnable</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute a fragment of server code in an isolated context, so that it doesn't leave any effect on THD.  <a href="classServer__runnable.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEd__result__set.html">Ed_result_set</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ed_result_set &ndash; a container with result set rows.  <a href="classEd__result__set.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEd__connection.html">Ed_connection</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEd__column.html">Ed_column</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">One result set column.  <a href="structEd__column.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEd__row.html">Ed_row</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">One result set record.  <a href="classEd__row.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrepared__statement.html">Prepared_statement</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepared_statement: a statement that can contain placeholders.  <a href="classPrepared__statement.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a49d32a7baf4e7ed81e9114c752e7b681"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a49d32a7baf4e7ed81e9114c752e7b681">ask_to_reprepare</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a49d32a7baf4e7ed81e9114c752e7b681"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests for repreparation of statement.  <a href="#a49d32a7baf4e7ed81e9114c752e7b681">More...</a><br /></td></tr>
<tr class="separator:a49d32a7baf4e7ed81e9114c752e7b681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f246707a5a4b215f434480159941071"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a3f246707a5a4b215f434480159941071">mysql_stmt_precheck</a> (<a class="el" href="classTHD.html">THD</a> *thd, const <a class="el" href="unionCOM__DATA.html">COM_DATA</a> *com_data, enum <a class="el" href="my__command_8h.html#ae2ff1badf13d2b8099af8b47831281e1">enum_server_command</a> <a class="el" href="test__sql__9__sessions_8cc.html#a93f1c5a856331f0b0082389b47f4ef32">cmd</a>, <a class="el" href="classPrepared__statement.html">Prepared_statement</a> **stmt)</td></tr>
<tr class="memdesc:a3f246707a5a4b215f434480159941071"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for the statement with the specified id and validates it.  <a href="#a3f246707a5a4b215f434480159941071">More...</a><br /></td></tr>
<tr class="separator:a3f246707a5a4b215f434480159941071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a027c65401da9025a8bd2866c6b0245bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a027c65401da9025a8bd2866c6b0245bb">mysqld_stmt_prepare</a> (<a class="el" href="classTHD.html">THD</a> *thd, const char *<a class="el" href="myisam__ftdump_8cc.html#af26982218484ec3fdcb8f7d92e864a9b">query</a>, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> length, <a class="el" href="classPrepared__statement.html">Prepared_statement</a> *stmt)</td></tr>
<tr class="memdesc:a027c65401da9025a8bd2866c6b0245bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">COM_STMT_PREPARE handler.  <a href="#a027c65401da9025a8bd2866c6b0245bb">More...</a><br /></td></tr>
<tr class="separator:a027c65401da9025a8bd2866c6b0245bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac927675bec131f27a4593030a2bbc43b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#ac927675bec131f27a4593030a2bbc43b">mysqld_stmt_execute</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classPrepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> has_new_types, <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> execute_flags, <a class="el" href="structPS__PARAM.html">PS_PARAM</a> *parameters)</td></tr>
<tr class="memdesc:ac927675bec131f27a4593030a2bbc43b"><td class="mdescLeft">&#160;</td><td class="mdescRight">COM_STMT_EXECUTE handler: execute a previously prepared statement.  <a href="#ac927675bec131f27a4593030a2bbc43b">More...</a><br /></td></tr>
<tr class="separator:ac927675bec131f27a4593030a2bbc43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40d1eee5700a0fb2e0e0aff21c2e5e0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a40d1eee5700a0fb2e0e0aff21c2e5e0f">mysqld_stmt_close</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classPrepared__statement.html">Prepared_statement</a> *stmt)</td></tr>
<tr class="memdesc:a40d1eee5700a0fb2e0e0aff21c2e5e0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a prepared statement from memory.  <a href="#a40d1eee5700a0fb2e0e0aff21c2e5e0f">More...</a><br /></td></tr>
<tr class="separator:a40d1eee5700a0fb2e0e0aff21c2e5e0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb51d4335dea1c2ec4f9ceb80469b235"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#afb51d4335dea1c2ec4f9ceb80469b235">mysql_sql_stmt_prepare</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:afb51d4335dea1c2ec4f9ceb80469b235"><td class="mdescLeft">&#160;</td><td class="mdescRight">SQLCOM_PREPARE implementation.  <a href="#afb51d4335dea1c2ec4f9ceb80469b235">More...</a><br /></td></tr>
<tr class="separator:afb51d4335dea1c2ec4f9ceb80469b235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a00244c38838cd10623212a4eb67bc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a7a00244c38838cd10623212a4eb67bc4">mysql_sql_stmt_execute</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a7a00244c38838cd10623212a4eb67bc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">SQLCOM_EXECUTE implementation.  <a href="#a7a00244c38838cd10623212a4eb67bc4">More...</a><br /></td></tr>
<tr class="separator:a7a00244c38838cd10623212a4eb67bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02971e8a15a4e21d5291eb5c3d67fab9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a02971e8a15a4e21d5291eb5c3d67fab9">mysql_sql_stmt_close</a> (<a class="el" href="classTHD.html">THD</a> *thd)</td></tr>
<tr class="memdesc:a02971e8a15a4e21d5291eb5c3d67fab9"><td class="mdescLeft">&#160;</td><td class="mdescRight">SQLCOM_DEALLOCATE implementation.  <a href="#a02971e8a15a4e21d5291eb5c3d67fab9">More...</a><br /></td></tr>
<tr class="separator:a02971e8a15a4e21d5291eb5c3d67fab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3cbb0ed386a5054745690630481c31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a0b3cbb0ed386a5054745690630481c31">mysqld_stmt_fetch</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classPrepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> num_rows)</td></tr>
<tr class="memdesc:a0b3cbb0ed386a5054745690630481c31"><td class="mdescLeft">&#160;</td><td class="mdescRight">COM_STMT_FETCH handler: fetches requested amount of rows from cursor.  <a href="#a0b3cbb0ed386a5054745690630481c31">More...</a><br /></td></tr>
<tr class="separator:a0b3cbb0ed386a5054745690630481c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaed57133941ddfae2dd480afdbbc31f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#acaed57133941ddfae2dd480afdbbc31f">mysqld_stmt_reset</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classPrepared__statement.html">Prepared_statement</a> *stmt)</td></tr>
<tr class="memdesc:acaed57133941ddfae2dd480afdbbc31f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset a prepared statement in case there was a recoverable error.  <a href="#acaed57133941ddfae2dd480afdbbc31f">More...</a><br /></td></tr>
<tr class="separator:acaed57133941ddfae2dd480afdbbc31f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a210f51d0f8a74f43d06797fb9211c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a1a210f51d0f8a74f43d06797fb9211c6">mysql_stmt_get_longdata</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classPrepared__statement.html">Prepared_statement</a> *stmt, <a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> param_number, <a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *longdata, <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> length)</td></tr>
<tr class="memdesc:a1a210f51d0f8a74f43d06797fb9211c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle long data in pieces from client.  <a href="#a1a210f51d0f8a74f43d06797fb9211c6">More...</a><br /></td></tr>
<tr class="separator:a1a210f51d0f8a74f43d06797fb9211c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4357822c2532edfefd054ab5430f0db4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sql__prepare_8h.html#a4357822c2532edfefd054ab5430f0db4">select_like_stmt_cmd_test</a> (<a class="el" href="classTHD.html">THD</a> *thd, class <a class="el" href="classSql__cmd__dml.html">Sql_cmd_dml</a> *<a class="el" href="test__sql__9__sessions_8cc.html#a93f1c5a856331f0b0082389b47f4ef32">cmd</a>, <a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> setup_tables_done_option)</td></tr>
<tr class="separator:a4357822c2532edfefd054ab5430f0db4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a49d32a7baf4e7ed81e9114c752e7b681"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49d32a7baf4e7ed81e9114c752e7b681">&#9670;&nbsp;</a></span>ask_to_reprepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> ask_to_reprepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests for repreparation of statement. </p>
<dl class="section return"><dt>Returns</dt><dd>true if request has been placed. </dd></dl>

</div>
</div>
<a id="a02971e8a15a4e21d5291eb5c3d67fab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02971e8a15a4e21d5291eb5c3d67fab9">&#9670;&nbsp;</a></span>mysql_sql_stmt_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysql_sql_stmt_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SQLCOM_DEALLOCATE implementation. </p>
<p>Close an SQL prepared statement. As this can be called from Dynamic SQL, we should be careful to not close a statement that is currently being executed.</p>
<p>OK packet is sent in case of success, otherwise an error message is set in THD. </p>

</div>
</div>
<a id="a7a00244c38838cd10623212a4eb67bc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a00244c38838cd10623212a4eb67bc4">&#9670;&nbsp;</a></span>mysql_sql_stmt_execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysql_sql_stmt_execute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SQLCOM_EXECUTE implementation. </p>
<p>Execute prepared statement using parameter values from lex-&gt;prepared_stmt_params and send result to the client using text protocol. This is called from mysql_execute_command and therefore should behave like an ordinary query (e.g. not change global THD data, such as warning count, server status, etc). This function uses text protocol to send a possible result set.</p>
<p>In case of success, OK (or result set) packet is sent to the client, otherwise an error is set in THD.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afb51d4335dea1c2ec4f9ceb80469b235"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb51d4335dea1c2ec4f9ceb80469b235">&#9670;&nbsp;</a></span>mysql_sql_stmt_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysql_sql_stmt_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SQLCOM_PREPARE implementation. </p>
<p>Prepare an SQL prepared statement. This is called from mysql_execute_command and should therefore behave like an ordinary query (e.g. should not reset any global THD data).</p>
<p>In case of success, OK packet is sent to the client, otherwise an error message is set in THD.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1a210f51d0f8a74f43d06797fb9211c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a210f51d0f8a74f43d06797fb9211c6">&#9670;&nbsp;</a></span>mysql_stmt_get_longdata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysql_stmt_get_longdata </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPrepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>param_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle long data in pieces from client. </p>
<p>Get a part of a long data. To make the protocol efficient, we are not sending any return packets here. If something goes wrong, then we will send the error on 'execute' We assume that the client takes care of checking that all parts are sent to the server. (No checking that we get a 'end of column' in the server is performed).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle </td></tr>
    <tr><td class="paramname">stmt</td><td>Pointer to Prepared_statement </td></tr>
    <tr><td class="paramname">param_number</td><td>Number of parameters </td></tr>
    <tr><td class="paramname">str</td><td>String to append </td></tr>
    <tr><td class="paramname">length</td><td>Length of string (including end \0) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3f246707a5a4b215f434480159941071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f246707a5a4b215f434480159941071">&#9670;&nbsp;</a></span>mysql_stmt_precheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> mysql_stmt_precheck </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="unionCOM__DATA.html">COM_DATA</a> *&#160;</td>
          <td class="paramname"><em>com_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="my__command_8h.html#ae2ff1badf13d2b8099af8b47831281e1">enum_server_command</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPrepared__statement.html">Prepared_statement</a> **&#160;</td>
          <td class="paramname"><em>stmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches for the statement with the specified id and validates it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>[in] thread handle </td></tr>
    <tr><td class="paramname">com_data</td><td>[in] command data </td></tr>
    <tr><td class="paramname">cmd</td><td>[in] command type to be executed </td></tr>
    <tr><td class="paramname">stmt</td><td>[out] pointer to Prepared_statement to store it if found </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a40d1eee5700a0fb2e0e0aff21c2e5e0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40d1eee5700a0fb2e0e0aff21c2e5e0f">&#9670;&nbsp;</a></span>mysqld_stmt_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPrepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a prepared statement from memory. </p>
<dl class="section note"><dt>Note</dt><dd>we don't send any reply to this command. </dd></dl>

</div>
</div>
<a id="ac927675bec131f27a4593030a2bbc43b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac927675bec131f27a4593030a2bbc43b">&#9670;&nbsp;</a></span>mysqld_stmt_execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_execute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPrepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>has_new_types</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>execute_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPS__PARAM.html">PS_PARAM</a> *&#160;</td>
          <td class="paramname"><em>parameters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>COM_STMT_EXECUTE handler: execute a previously prepared statement. </p>
<p>If there are any parameters, then replace parameter markers with the data supplied from the client, and then execute the statement. This function uses binary protocol to send a possible result set to the client.</p>
<p>In case of success OK packet or a result set is sent to the client, otherwise an error message is set in THD.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>current thread </td></tr>
    <tr><td class="paramname">stmt</td><td>prepared statement </td></tr>
    <tr><td class="paramname">has_new_types</td><td>true if parsed parameters have data types defined </td></tr>
    <tr><td class="paramname">execute_flags</td><td>flag used to decide if a cursor should be used </td></tr>
    <tr><td class="paramname">parameters</td><td>prepared statement's parsed parameters </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0b3cbb0ed386a5054745690630481c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b3cbb0ed386a5054745690630481c31">&#9670;&nbsp;</a></span>mysqld_stmt_fetch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_fetch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPrepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>num_rows</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>COM_STMT_FETCH handler: fetches requested amount of rows from cursor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle. </td></tr>
    <tr><td class="paramname">stmt</td><td>Pointer to the prepared statement. </td></tr>
    <tr><td class="paramname">num_rows</td><td>Number of rows to fetch. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a027c65401da9025a8bd2866c6b0245bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a027c65401da9025a8bd2866c6b0245bb">&#9670;&nbsp;</a></span>mysqld_stmt_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPrepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>COM_STMT_PREPARE handler. </p>
<p>Given a query string with parameter markers, create a prepared statement from it and send PS info back to the client.</p>
<p>If parameter markers are found in the query, then store the information using Item_param along with maintaining a list in lex-&gt;param_array, so that a fast and direct retrieval can be made without going through all field items.</p>
<p>In case of success a new statement id and metadata is sent to the client, otherwise an error message is set in THD.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle </td></tr>
    <tr><td class="paramname">query</td><td>query to be prepared </td></tr>
    <tr><td class="paramname">length</td><td>query string length, including ignored trailing NULL or quote char. </td></tr>
    <tr><td class="paramname">stmt</td><td>Prepared_statement to be used for preparation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function parses the query and sends the total number of parameters and resultset metadata information back to client (if any), without executing the query i.e. without any log/disk writes. This allows the queries to be re-executed without re-parsing during execute. </dd></dl>

</div>
</div>
<a id="acaed57133941ddfae2dd480afdbbc31f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaed57133941ddfae2dd480afdbbc31f">&#9670;&nbsp;</a></span>mysqld_stmt_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mysqld_stmt_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPrepared__statement.html">Prepared_statement</a> *&#160;</td>
          <td class="paramname"><em>stmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset a prepared statement in case there was a recoverable error. </p>
<p>This function resets statement to the state it was right after prepare. It can be used to:</p><ul>
<li>clear an error happened during mysqld_stmt_send_long_data</li>
<li>cancel long data stream for all placeholders without having to call mysqld_stmt_execute.</li>
<li>close an open cursor Sends 'OK' packet in case of success (statement was reset) or 'ERROR' packet (unrecoverable error/statement not found/etc).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>Thread handle </td></tr>
    <tr><td class="paramname">stmt</td><td>Pointer to the Prepared_statement </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4357822c2532edfefd054ab5430f0db4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4357822c2532edfefd054ab5430f0db4">&#9670;&nbsp;</a></span>select_like_stmt_cmd_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> select_like_stmt_cmd_test </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">class <a class="el" href="classSql__cmd__dml.html">Sql_cmd_dml</a> *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td>
          <td class="paramname"><em>setup_tables_done_option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li><li class="navelem"><a class="el" href="sql__prepare_8h.html">sql_prepare.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
