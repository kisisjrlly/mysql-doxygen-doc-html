<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/dict/dict0stats.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dict0stats_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dict0stats.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Code used for calculating and manipulating table statistics.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="my__dbug_8h_source.html">my_dbug.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="mysql__com_8h_source.html">mysql_com.h</a>&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;<a class="el" href="dict0stats_8h_source.html">dict0stats.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dyn0buf_8h_source.html">dyn0buf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ha__prototypes_8h_source.html">ha_prototypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lob0lob_8h_source.html">lob0lob.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pars0pars_8h_source.html">pars0pars.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0sel_8h_source.html">row0sel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="trx0trx_8h_source.html">trx0trx.h</a>&quot;</code><br />
<code>#include &quot;univ.i&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0new_8h_source.html">ut0new.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0rnd_8h_source.html">ut0rnd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0ut_8h_source.html">ut0ut.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structn__diff__data__t.html">n_diff_data_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Input data that is used to calculate dict_index_t::stat_n_diff_key_vals[] for each n-columns prefix (n from 1 to n_uniq).  <a href="structn__diff__data__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structindex__fetch__t.html">index_fetch_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aux struct used to pass a table and a boolean to dict_stats_fetch_index_stats_step().  <a href="structindex__fetch__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aea70038a17d55ae3eb98cf1f53eacabf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aea70038a17d55ae3eb98cf1f53eacabf">TABLE_STATS_NAME</a>&#160;&#160;&#160;&quot;mysql/innodb_table_stats&quot;</td></tr>
<tr class="separator:aea70038a17d55ae3eb98cf1f53eacabf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2b999b2783632008d27c085873d78cd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#ae2b999b2783632008d27c085873d78cd">TABLE_STATS_NAME_PRINT</a>&#160;&#160;&#160;&quot;mysql.innodb_table_stats&quot;</td></tr>
<tr class="separator:ae2b999b2783632008d27c085873d78cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeb535816078cb0bfdb6fd0efb88b02e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aeeb535816078cb0bfdb6fd0efb88b02e">INDEX_STATS_NAME</a>&#160;&#160;&#160;&quot;mysql/innodb_index_stats&quot;</td></tr>
<tr class="separator:aeeb535816078cb0bfdb6fd0efb88b02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab72c2a67b3a392c0d34e33bd6be6732"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aab72c2a67b3a392c0d34e33bd6be6732">INDEX_STATS_NAME_PRINT</a>&#160;&#160;&#160;&quot;mysql.innodb_index_stats&quot;</td></tr>
<tr class="separator:aab72c2a67b3a392c0d34e33bd6be6732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa97e8dc28005a1241103bef65128944b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aa97e8dc28005a1241103bef65128944b">DEBUG_PRINTF</a>(fmt, ...)&#160;&#160;&#160;/* noop */</td></tr>
<tr class="separator:aa97e8dc28005a1241103bef65128944b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17389f00743f9ac52e96556bf869ef5f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a17389f00743f9ac52e96556bf869ef5f">N_SAMPLE_PAGES</a>(<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="separator:a17389f00743f9ac52e96556bf869ef5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31bdda071e21e180b7b203ff9438ccd3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a31bdda071e21e180b7b203ff9438ccd3">N_DIFF_REQUIRED</a>(<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)&#160;&#160;&#160;(<a class="el" href="dict0stats_8cc.html#a17389f00743f9ac52e96556bf869ef5f">N_SAMPLE_PAGES</a>(<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) * 10)</td></tr>
<tr class="separator:a31bdda071e21e180b7b203ff9438ccd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf25b41551628ad267a96858f1ba4bfb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#abf25b41551628ad267a96858f1ba4bfb">INDEX_EQ</a>(i1,  i2)</td></tr>
<tr class="separator:abf25b41551628ad267a96858f1ba4bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176e4c39a833f4d01f0ecd322c0f4343"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a176e4c39a833f4d01f0ecd322c0f4343">PFX</a>&#160;&#160;&#160;&quot;n_diff_pfx&quot;</td></tr>
<tr class="separator:a176e4c39a833f4d01f0ecd322c0f4343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeed694bb32afe3b423581e9bf390f0c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aeed694bb32afe3b423581e9bf390f0c0">PFX_LEN</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:aeed694bb32afe3b423581e9bf390f0c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:acff4a68e01a2a395913f066c1451e6c9"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; ib_uint64_t, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt; ib_uint64_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#acff4a68e01a2a395913f066c1451e6c9">boundaries_t</a></td></tr>
<tr class="separator:acff4a68e01a2a395913f066c1451e6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8068d8778d3860a0763523fb3366ca"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classut__allocator.html">ut_allocator</a>&lt; std::pair&lt; const char *const, <a class="el" href="structdict__index__t.html">dict_index_t</a> * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#adb8068d8778d3860a0763523fb3366ca">index_map_t_allocator</a></td></tr>
<tr class="memdesc:adb8068d8778d3860a0763523fb3366ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocator type used for index_map_t.  <a href="#adb8068d8778d3860a0763523fb3366ca">More...</a><br /></td></tr>
<tr class="separator:adb8068d8778d3860a0763523fb3366ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9feb7c2e7780b121edf6f2d63f23bcd3"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; const char *, <a class="el" href="structdict__index__t.html">dict_index_t</a> *, <a class="el" href="structut__strcmp__functor.html">ut_strcmp_functor</a>, <a class="el" href="dict0stats_8cc.html#adb8068d8778d3860a0763523fb3366ca">index_map_t_allocator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a9feb7c2e7780b121edf6f2d63f23bcd3">index_map_t</a></td></tr>
<tr class="memdesc:a9feb7c2e7780b121edf6f2d63f23bcd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliary map used for sorting indexes by name in dict_stats_save().  <a href="#a9feb7c2e7780b121edf6f2d63f23bcd3">More...</a><br /></td></tr>
<tr class="separator:a9feb7c2e7780b121edf6f2d63f23bcd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4362310ecf77f0db13b003058469f78c"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a4362310ecf77f0db13b003058469f78c">dict_stats_should_ignore_index</a> (const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a4362310ecf77f0db13b003058469f78c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether an index should be ignored in stats manipulations: stats fetch stats recalc stats save.  <a href="#a4362310ecf77f0db13b003058469f78c">More...</a><br /></td></tr>
<tr class="separator:a4362310ecf77f0db13b003058469f78c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9470a7defc82199961bc0611588883b6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a9470a7defc82199961bc0611588883b6">dict_stats_exec_sql</a> (<a class="el" href="structpars__info__t.html">pars_info_t</a> *pinfo, const char *sql, <a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:a9470a7defc82199961bc0611588883b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a given SQL statement using the InnoDB internal SQL parser.  <a href="#a9470a7defc82199961bc0611588883b6">More...</a><br /></td></tr>
<tr class="separator:a9470a7defc82199961bc0611588883b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dab34808abcb08193d55d13682dd5e6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a2dab34808abcb08193d55d13682dd5e6">dict_stats_table_clone_create</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a2dab34808abcb08193d55d13682dd5e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate a table object and its indexes.  <a href="#a2dab34808abcb08193d55d13682dd5e6">More...</a><br /></td></tr>
<tr class="separator:a2dab34808abcb08193d55d13682dd5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112a88d49c40becfe979d160c202e77e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a112a88d49c40becfe979d160c202e77e">dict_stats_table_clone_free</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *t)</td></tr>
<tr class="memdesc:a112a88d49c40becfe979d160c202e77e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the resources occupied by an object returned by dict_stats_table_clone_create().  <a href="#a112a88d49c40becfe979d160c202e77e">More...</a><br /></td></tr>
<tr class="separator:a112a88d49c40becfe979d160c202e77e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54be91479ecf39b0ecf70a422a1e845"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aa54be91479ecf39b0ecf70a422a1e845">dict_stats_empty_index</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:aa54be91479ecf39b0ecf70a422a1e845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write all zeros (or 1 where it makes sense) into an index statistics members.  <a href="#aa54be91479ecf39b0ecf70a422a1e845">More...</a><br /></td></tr>
<tr class="separator:aa54be91479ecf39b0ecf70a422a1e845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b29178b2e10527df46e776f399a2941"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a1b29178b2e10527df46e776f399a2941">dict_stats_empty_table</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a1b29178b2e10527df46e776f399a2941"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write all zeros (or 1 where it makes sense) into a table and its indexes' statistics members.  <a href="#a1b29178b2e10527df46e776f399a2941">More...</a><br /></td></tr>
<tr class="separator:a1b29178b2e10527df46e776f399a2941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24aa5a00b840e4c9268d51b172263bdd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a24aa5a00b840e4c9268d51b172263bdd">dict_stats_assert_initialized_index</a> (const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a24aa5a00b840e4c9268d51b172263bdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether index's stats are initialized (assert if they are not).  <a href="#a24aa5a00b840e4c9268d51b172263bdd">More...</a><br /></td></tr>
<tr class="separator:a24aa5a00b840e4c9268d51b172263bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2f33f662449dbc20b42af32e133f71b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aa2f33f662449dbc20b42af32e133f71b">dict_stats_assert_initialized</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:aa2f33f662449dbc20b42af32e133f71b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether table's stats are initialized (assert if they are not).  <a href="#aa2f33f662449dbc20b42af32e133f71b">More...</a><br /></td></tr>
<tr class="separator:aa2f33f662449dbc20b42af32e133f71b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98eaeca6d9bd9291c380b0d048ac3b93"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a98eaeca6d9bd9291c380b0d048ac3b93">dict_stats_copy</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *dst, const <a class="el" href="structdict__table__t.html">dict_table_t</a> *src)</td></tr>
<tr class="memdesc:a98eaeca6d9bd9291c380b0d048ac3b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy table and index statistics from one table to another, including index stats.  <a href="#a98eaeca6d9bd9291c380b0d048ac3b93">More...</a><br /></td></tr>
<tr class="separator:a98eaeca6d9bd9291c380b0d048ac3b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a196b733124afd8bd7db8c6818939b70d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a196b733124afd8bd7db8c6818939b70d">dict_stats_snapshot_create</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a196b733124afd8bd7db8c6818939b70d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate the stats of a table and its indexes.  <a href="#a196b733124afd8bd7db8c6818939b70d">More...</a><br /></td></tr>
<tr class="separator:a196b733124afd8bd7db8c6818939b70d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c3716bbf484a15dfb94ef2eb1064cf4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a2c3716bbf484a15dfb94ef2eb1064cf4">dict_stats_snapshot_free</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *t)</td></tr>
<tr class="memdesc:a2c3716bbf484a15dfb94ef2eb1064cf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the resources occupied by an object returned by dict_stats_snapshot_create().  <a href="#a2c3716bbf484a15dfb94ef2eb1064cf4">More...</a><br /></td></tr>
<tr class="separator:a2c3716bbf484a15dfb94ef2eb1064cf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea3c67367649f992995760148b983a4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#acea3c67367649f992995760148b983a4">dict_stats_update_transient_for_index</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:acea3c67367649f992995760148b983a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates new estimates for index statistics.  <a href="#acea3c67367649f992995760148b983a4">More...</a><br /></td></tr>
<tr class="separator:acea3c67367649f992995760148b983a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad150445900cb7658e117ec4e11d7913b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#ad150445900cb7658e117ec4e11d7913b">dict_stats_update_transient</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:ad150445900cb7658e117ec4e11d7913b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates new estimates for table and index statistics.  <a href="#ad150445900cb7658e117ec4e11d7913b">More...</a><br /></td></tr>
<tr class="separator:ad150445900cb7658e117ec4e11d7913b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3787b89ee0a5a9303166c5116bd28950"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE ulint *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a3787b89ee0a5a9303166c5116bd28950">dict_stats_scan_page</a> (const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> **out_rec, ulint *offsets1, ulint *offsets2, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *<a class="el" href="ctype-mb_8cc.html#adf406aa6822ceac22d62ef63cc2879c0">page</a>, ulint n_prefix, <a class="el" href="dict0stats_8cc.html#a75f003395590eff92c30ec603e53ca62">page_scan_method_t</a> scan_method, ib_uint64_t *n_diff, ib_uint64_t *n_external_pages)</td></tr>
<tr class="memdesc:a3787b89ee0a5a9303166c5116bd28950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scan a page, reading records from left to right and counting the number of distinct records (looking only at the first n_prefix columns) and the number of external pages pointed by records from this page.  <a href="#a3787b89ee0a5a9303166c5116bd28950">More...</a><br /></td></tr>
<tr class="separator:a3787b89ee0a5a9303166c5116bd28950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6da114613564c6b5592fb4dfabdae780"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a6da114613564c6b5592fb4dfabdae780">dict_stats_analyze_index_below_cur</a> (const <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cur, ulint n_prefix, ib_uint64_t *n_diff, ib_uint64_t *n_external_pages)</td></tr>
<tr class="memdesc:a6da114613564c6b5592fb4dfabdae780"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dive below the current position of a cursor and calculate the number of distinct records on the leaf page, when looking at the fist n_prefix columns.  <a href="#a6da114613564c6b5592fb4dfabdae780">More...</a><br /></td></tr>
<tr class="separator:a6da114613564c6b5592fb4dfabdae780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02dc0f00aa70b0eb2c66becbcd34f55"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#ac02dc0f00aa70b0eb2c66becbcd34f55">dict_stats_analyze_index_for_n_prefix</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint n_prefix, const <a class="el" href="dict0stats_8cc.html#acff4a68e01a2a395913f066c1451e6c9">boundaries_t</a> *boundaries, <a class="el" href="structn__diff__data__t.html">n_diff_data_t</a> *n_diff_data, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ac02dc0f00aa70b0eb2c66becbcd34f55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate the number of different key values in an index when looking at the first n_prefix columns.  <a href="#ac02dc0f00aa70b0eb2c66becbcd34f55">More...</a><br /></td></tr>
<tr class="separator:ac02dc0f00aa70b0eb2c66becbcd34f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3e623a111622183b996c10b5d10ca0e"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#ae3e623a111622183b996c10b5d10ca0e">dict_stats_index_set_n_diff</a> (const <a class="el" href="structn__diff__data__t.html">n_diff_data_t</a> *n_diff_data, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:ae3e623a111622183b996c10b5d10ca0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set dict_index_t::stat_n_diff_key_vals[] and stat_n_sample_sizes[].  <a href="#ae3e623a111622183b996c10b5d10ca0e">More...</a><br /></td></tr>
<tr class="separator:ae3e623a111622183b996c10b5d10ca0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85773e70398d999c73b3be72d0511a16"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a85773e70398d999c73b3be72d0511a16">dict_stats_analyze_index</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a85773e70398d999c73b3be72d0511a16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates new statistics for a given index and saves them to the index members stat_n_diff_key_vals[], stat_n_sample_sizes[], stat_index_size and stat_n_leaf_pages.  <a href="#a85773e70398d999c73b3be72d0511a16">More...</a><br /></td></tr>
<tr class="separator:a85773e70398d999c73b3be72d0511a16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a562e9573887650dadb044721386b996f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a562e9573887650dadb044721386b996f">dict_stats_update_persistent</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a562e9573887650dadb044721386b996f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates new estimates for table and index statistics.  <a href="#a562e9573887650dadb044721386b996f">More...</a><br /></td></tr>
<tr class="separator:a562e9573887650dadb044721386b996f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2645a68b2cef93a72c8b5c7c12d025b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aa2645a68b2cef93a72c8b5c7c12d025b">dict_stats_save_index_stat</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, lint last_update, const char *stat_name, ib_uint64_t stat_value, ib_uint64_t *sample_size, const char *stat_description, <a class="el" href="structtrx__t.html">trx_t</a> *trx)</td></tr>
<tr class="memdesc:aa2645a68b2cef93a72c8b5c7c12d025b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save an individual index's statistic into the persistent statistics storage.  <a href="#aa2645a68b2cef93a72c8b5c7c12d025b">More...</a><br /></td></tr>
<tr class="separator:aa2645a68b2cef93a72c8b5c7c12d025b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e0d729e38a08f7cc2868332e78c1b57"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a3e0d729e38a08f7cc2868332e78c1b57">dict_stats_save</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table_orig, const <a class="el" href="classindex__id__t.html">index_id_t</a> *only_for_index)</td></tr>
<tr class="memdesc:a3e0d729e38a08f7cc2868332e78c1b57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the table's statistics into the persistent statistics storage.  <a href="#a3e0d729e38a08f7cc2868332e78c1b57">More...</a><br /></td></tr>
<tr class="separator:a3e0d729e38a08f7cc2868332e78c1b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d483853138c6ff97ea4eebf3d3f3db1"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a8d483853138c6ff97ea4eebf3d3f3db1">dict_stats_fetch_table_stats_step</a> (void *node_void, void *table_void)</td></tr>
<tr class="memdesc:a8d483853138c6ff97ea4eebf3d3f3db1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called for the row that is selected by SELECT ...  <a href="#a8d483853138c6ff97ea4eebf3d3f3db1">More...</a><br /></td></tr>
<tr class="separator:a8d483853138c6ff97ea4eebf3d3f3db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac61abc6e83d9d1e1d5451ec74f24a02"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aac61abc6e83d9d1e1d5451ec74f24a02">dict_stats_fetch_index_stats_step</a> (void *node_void, void *arg_void)</td></tr>
<tr class="memdesc:aac61abc6e83d9d1e1d5451ec74f24a02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called for the rows that are selected by SELECT ...  <a href="#aac61abc6e83d9d1e1d5451ec74f24a02">More...</a><br /></td></tr>
<tr class="separator:aac61abc6e83d9d1e1d5451ec74f24a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae90bdccd2a0c8281a204a5f1827f2d41"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#ae90bdccd2a0c8281a204a5f1827f2d41">dict_stats_fetch_from_ps</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:ae90bdccd2a0c8281a204a5f1827f2d41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read table's statistics from the persistent statistics storage.  <a href="#ae90bdccd2a0c8281a204a5f1827f2d41">More...</a><br /></td></tr>
<tr class="separator:ae90bdccd2a0c8281a204a5f1827f2d41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1ec528959596a472a7374ba116dc98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a7b1ec528959596a472a7374ba116dc98">dict_stats_update_for_index</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a7b1ec528959596a472a7374ba116dc98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches or calculates new estimates for index statistics.  <a href="#a7b1ec528959596a472a7374ba116dc98">More...</a><br /></td></tr>
<tr class="separator:a7b1ec528959596a472a7374ba116dc98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa88a532ba8ddc058552774b2c5f266"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a9fa88a532ba8ddc058552774b2c5f266">dict_stats_update</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table, <a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57">dict_stats_upd_option_t</a> stats_upd_option)</td></tr>
<tr class="memdesc:a9fa88a532ba8ddc058552774b2c5f266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates new estimates for table and index statistics.  <a href="#a9fa88a532ba8ddc058552774b2c5f266">More...</a><br /></td></tr>
<tr class="separator:a9fa88a532ba8ddc058552774b2c5f266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039fe23b8c6508ac42e70d24276929b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a039fe23b8c6508ac42e70d24276929b4">dict_stats_drop_index</a> (const char *db_and_table, const char *iname, char *errstr, ulint errstr_sz)</td></tr>
<tr class="memdesc:a039fe23b8c6508ac42e70d24276929b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the information for a particular index's stats from the persistent storage if it exists and if there is data stored for this index.  <a href="#a039fe23b8c6508ac42e70d24276929b4">More...</a><br /></td></tr>
<tr class="separator:a039fe23b8c6508ac42e70d24276929b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2238ec54050c0624ac69b4a535722360"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a2238ec54050c0624ac69b4a535722360">dict_stats_delete_from_table_stats</a> (const char *database_name, const char *table_name)</td></tr>
<tr class="memdesc:a2238ec54050c0624ac69b4a535722360"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes DELETE FROM mysql.innodb_table_stats WHERE database_name = '...' AND table_name = '...'; Creates its own transaction and commits it.  <a href="#a2238ec54050c0624ac69b4a535722360">More...</a><br /></td></tr>
<tr class="separator:a2238ec54050c0624ac69b4a535722360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88f603f7bf1f381f29914e8d8d70fbeb"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a88f603f7bf1f381f29914e8d8d70fbeb">dict_stats_delete_from_index_stats</a> (const char *database_name, const char *table_name)</td></tr>
<tr class="memdesc:a88f603f7bf1f381f29914e8d8d70fbeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes DELETE FROM mysql.innodb_index_stats WHERE database_name = '...' AND table_name = '...'; Creates its own transaction and commits it.  <a href="#a88f603f7bf1f381f29914e8d8d70fbeb">More...</a><br /></td></tr>
<tr class="separator:a88f603f7bf1f381f29914e8d8d70fbeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80c41f13ba29916460fa753d954f7484"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a80c41f13ba29916460fa753d954f7484">dict_stats_drop_table</a> (const char *db_and_table, char *errstr, ulint errstr_sz)</td></tr>
<tr class="memdesc:a80c41f13ba29916460fa753d954f7484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the statistics for a table and all of its indexes from the persistent statistics storage if it exists and if there is data stored for the table.  <a href="#a80c41f13ba29916460fa753d954f7484">More...</a><br /></td></tr>
<tr class="separator:a80c41f13ba29916460fa753d954f7484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68080ed26d697d9abdae217ae7cf3de3"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a68080ed26d697d9abdae217ae7cf3de3">dict_stats_rename_table_in_table_stats</a> (const char *old_dbname_utf8, const char *old_tablename_utf8, const char *new_dbname_utf8, const char *new_tablename_utf8)</td></tr>
<tr class="memdesc:a68080ed26d697d9abdae217ae7cf3de3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes UPDATE mysql.innodb_table_stats SET database_name = '...', table_name = '...' WHERE database_name = '...' AND table_name = '...'; Creates its own transaction and commits it.  <a href="#a68080ed26d697d9abdae217ae7cf3de3">More...</a><br /></td></tr>
<tr class="separator:a68080ed26d697d9abdae217ae7cf3de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8a007546843e29f6a21fde66a8db2c"><td class="memItemLeft" align="right" valign="top">UNIV_INLINE <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a0f8a007546843e29f6a21fde66a8db2c">dict_stats_rename_table_in_index_stats</a> (const char *old_dbname_utf8, const char *old_tablename_utf8, const char *new_dbname_utf8, const char *new_tablename_utf8)</td></tr>
<tr class="memdesc:a0f8a007546843e29f6a21fde66a8db2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes UPDATE mysql.innodb_index_stats SET database_name = '...', table_name = '...' WHERE database_name = '...' AND table_name = '...'; Creates its own transaction and commits it.  <a href="#a0f8a007546843e29f6a21fde66a8db2c">More...</a><br /></td></tr>
<tr class="separator:a0f8a007546843e29f6a21fde66a8db2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d6e96bb860057a9d91520e4ca8a4a8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a3d6e96bb860057a9d91520e4ca8a4a8c">dict_stats_rename_table</a> (const char *old_name, const char *new_name, char *errstr, size_t errstr_sz)</td></tr>
<tr class="memdesc:a3d6e96bb860057a9d91520e4ca8a4a8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames a table in InnoDB persistent stats storage.  <a href="#a3d6e96bb860057a9d91520e4ca8a4a8c">More...</a><br /></td></tr>
<tr class="separator:a3d6e96bb860057a9d91520e4ca8a4a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb04d42df8e81737a044c10685ffb633"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#aeb04d42df8e81737a044c10685ffb633">dict_stats_rename_index</a> (const <a class="el" href="structdict__table__t.html">dict_table_t</a> *table, const char *old_index_name, const char *new_index_name)</td></tr>
<tr class="memdesc:aeb04d42df8e81737a044c10685ffb633"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames an index in InnoDB persistent stats storage.  <a href="#aeb04d42df8e81737a044c10685ffb633">More...</a><br /></td></tr>
<tr class="separator:aeb04d42df8e81737a044c10685ffb633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae6b2364480e0ec168b1053c660cd89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a2ae6b2364480e0ec168b1053c660cd89">dict_stats_evict_tablespaces</a> ()</td></tr>
<tr class="memdesc:a2ae6b2364480e0ec168b1053c660cd89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evict the stats tables if they loaded in tablespace cache and also close the stats .ibd files.  <a href="#a2ae6b2364480e0ec168b1053c660cd89">More...</a><br /></td></tr>
<tr class="separator:a2ae6b2364480e0ec168b1053c660cd89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75f003395590eff92c30ec603e53ca62"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a75f003395590eff92c30ec603e53ca62">page_scan_method_t</a> { <a class="el" href="dict0stats_8cc.html#a75f003395590eff92c30ec603e53ca62af5a855225da462b871295276da0f6c00">COUNT_ALL_NON_BORING_AND_SKIP_DEL_MARKED</a>, 
<a class="el" href="dict0stats_8cc.html#a75f003395590eff92c30ec603e53ca62aa7bafc8a3bc6520ba81fc21bdf36a4d6">QUIT_ON_FIRST_NON_BORING</a>, 
<a class="el" href="dict0stats_8cc.html#a75f003395590eff92c30ec603e53ca62a67f74d201161f4d846026cb1460145d9">COUNT_ALL_NON_BORING_INCLUDE_DEL_MARKED</a>
 }<tr class="memdesc:a75f003395590eff92c30ec603e53ca62"><td class="mdescLeft">&#160;</td><td class="mdescRight">aux enum for controlling the behavior of dict_stats_scan_page()  <a href="dict0stats_8cc.html#a75f003395590eff92c30ec603e53ca62">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a75f003395590eff92c30ec603e53ca62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c89866b4d8520e95b2832400cd2c0a3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dict0stats_8cc.html#a0c89866b4d8520e95b2832400cd2c0a3">dict_stats_analyze_index_level</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, ulint level, ib_uint64_t *n_diff, ib_uint64_t *total_recs, ib_uint64_t *total_pages, <a class="el" href="dict0stats_8cc.html#acff4a68e01a2a395913f066c1451e6c9">boundaries_t</a> *n_diff_boundaries, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:a0c89866b4d8520e95b2832400cd2c0a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the total number and the number of distinct keys on a given level in an index.  <a href="#a0c89866b4d8520e95b2832400cd2c0a3">More...</a><br /></td></tr>
<tr class="separator:a0c89866b4d8520e95b2832400cd2c0a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Code used for calculating and manipulating table statistics. </p>
<p>Created Jan 06, 2010 Vasil Dimov </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa97e8dc28005a1241103bef65128944b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa97e8dc28005a1241103bef65128944b">&#9670;&nbsp;</a></span>DEBUG_PRINTF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_PRINTF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;/* noop */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abf25b41551628ad267a96858f1ba4bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf25b41551628ad267a96858f1ba4bfb">&#9670;&nbsp;</a></span>INDEX_EQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INDEX_EQ</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">i2&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((i1) != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; (i2) != <a class="code" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; (i1)-&gt;space == (i2)-&gt;space &amp;&amp; \</div><div class="line">   (i1)-&gt;<span class="keywordtype">id</span> == (i2)-&gt;id &amp;&amp; strcmp((i1)-&gt;<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>, (i2)-&gt;<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>) == 0)</div><div class="ttc" id="sslopt-case_8h_html_ae00b773898ac853cec38cdf7a08b8e89"><div class="ttname"><a href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a></div><div class="ttdeci">case opt name</div><div class="ttdef"><b>Definition:</b> sslopt-case.h:32</div></div>
<div class="ttc" id="types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> types.h:54</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeeb535816078cb0bfdb6fd0efb88b02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeb535816078cb0bfdb6fd0efb88b02e">&#9670;&nbsp;</a></span>INDEX_STATS_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INDEX_STATS_NAME&#160;&#160;&#160;&quot;mysql/innodb_index_stats&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aab72c2a67b3a392c0d34e33bd6be6732"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab72c2a67b3a392c0d34e33bd6be6732">&#9670;&nbsp;</a></span>INDEX_STATS_NAME_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INDEX_STATS_NAME_PRINT&#160;&#160;&#160;&quot;mysql.innodb_index_stats&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a31bdda071e21e180b7b203ff9438ccd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31bdda071e21e180b7b203ff9438ccd3">&#9670;&nbsp;</a></span>N_DIFF_REQUIRED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_DIFF_REQUIRED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="dict0stats_8cc.html#a17389f00743f9ac52e96556bf869ef5f">N_SAMPLE_PAGES</a>(<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>) * 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a17389f00743f9ac52e96556bf869ef5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17389f00743f9ac52e96556bf869ef5f">&#9670;&nbsp;</a></span>N_SAMPLE_PAGES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_SAMPLE_PAGES</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">static_cast&lt;</span>ib_uint64_t<span class="keyword">&gt;</span>((<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)-&gt;table-&gt;stats_sample_pages != 0  \</div><div class="line">                               ? (<a class="code" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)-&gt;table-&gt;stats_sample_pages \</div><div class="line">                               : <a class="code" href="srv0srv_8h.html#a6286129417a7aadb423e084a9ae86f10">srv_stats_persistent_sample_pages</a>)</div><div class="ttc" id="mysql_8cc_html_adfa69ae672499b1037123a1f17c5552b"><div class="ttname"><a href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a></div><div class="ttdeci">char * index(const char *, int c)</div><div class="ttdef"><b>Definition:</b> mysql.cc:2928</div></div>
<div class="ttc" id="srv0srv_8h_html_a6286129417a7aadb423e084a9ae86f10"><div class="ttname"><a href="srv0srv_8h.html#a6286129417a7aadb423e084a9ae86f10">srv_stats_persistent_sample_pages</a></div><div class="ttdeci">unsigned long long srv_stats_persistent_sample_pages</div><div class="ttdef"><b>Definition:</b> srv0srv.cc:545</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a176e4c39a833f4d01f0ecd322c0f4343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176e4c39a833f4d01f0ecd322c0f4343">&#9670;&nbsp;</a></span>PFX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PFX&#160;&#160;&#160;&quot;n_diff_pfx&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aeed694bb32afe3b423581e9bf390f0c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeed694bb32afe3b423581e9bf390f0c0">&#9670;&nbsp;</a></span>PFX_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PFX_LEN&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aea70038a17d55ae3eb98cf1f53eacabf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea70038a17d55ae3eb98cf1f53eacabf">&#9670;&nbsp;</a></span>TABLE_STATS_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TABLE_STATS_NAME&#160;&#160;&#160;&quot;mysql/innodb_table_stats&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae2b999b2783632008d27c085873d78cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2b999b2783632008d27c085873d78cd">&#9670;&nbsp;</a></span>TABLE_STATS_NAME_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TABLE_STATS_NAME_PRINT&#160;&#160;&#160;&quot;mysql.innodb_table_stats&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="acff4a68e01a2a395913f066c1451e6c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acff4a68e01a2a395913f066c1451e6c9">&#9670;&nbsp;</a></span>boundaries_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;ib_uint64_t, <a class="el" href="classut__allocator.html">ut_allocator</a>&lt;ib_uint64_t&gt; &gt; <a class="el" href="dict0stats_8cc.html#acff4a68e01a2a395913f066c1451e6c9">boundaries_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9feb7c2e7780b121edf6f2d63f23bcd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9feb7c2e7780b121edf6f2d63f23bcd3">&#9670;&nbsp;</a></span>index_map_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;const char *, <a class="el" href="structdict__index__t.html">dict_index_t</a> *, <a class="el" href="structut__strcmp__functor.html">ut_strcmp_functor</a>, <a class="el" href="dict0stats_8cc.html#adb8068d8778d3860a0763523fb3366ca">index_map_t_allocator</a>&gt; <a class="el" href="dict0stats_8cc.html#a9feb7c2e7780b121edf6f2d63f23bcd3">index_map_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auxiliary map used for sorting indexes by name in dict_stats_save(). </p>

</div>
</div>
<a id="adb8068d8778d3860a0763523fb3366ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb8068d8778d3860a0763523fb3366ca">&#9670;&nbsp;</a></span>index_map_t_allocator</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classut__allocator.html">ut_allocator</a>&lt;std::pair&lt;const char *const, <a class="el" href="structdict__index__t.html">dict_index_t</a> *&gt; &gt; <a class="el" href="dict0stats_8cc.html#adb8068d8778d3860a0763523fb3366ca">index_map_t_allocator</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocator type used for index_map_t. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a75f003395590eff92c30ec603e53ca62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75f003395590eff92c30ec603e53ca62">&#9670;&nbsp;</a></span>page_scan_method_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dict0stats_8cc.html#a75f003395590eff92c30ec603e53ca62">page_scan_method_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>aux enum for controlling the behavior of dict_stats_scan_page() </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a75f003395590eff92c30ec603e53ca62af5a855225da462b871295276da0f6c00"></a>COUNT_ALL_NON_BORING_AND_SKIP_DEL_MARKED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a75f003395590eff92c30ec603e53ca62aa7bafc8a3bc6520ba81fc21bdf36a4d6"></a>QUIT_ON_FIRST_NON_BORING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a75f003395590eff92c30ec603e53ca62a67f74d201161f4d846026cb1460145d9"></a>COUNT_ALL_NON_BORING_INCLUDE_DEL_MARKED&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a85773e70398d999c73b3be72d0511a16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85773e70398d999c73b3be72d0511a16">&#9670;&nbsp;</a></span>dict_stats_analyze_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_analyze_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates new statistics for a given index and saves them to the index members stat_n_diff_key_vals[], stat_n_sample_sizes[], stat_index_size and stat_n_leaf_pages. </p>
<p>This function could be slow. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index to analyze </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6da114613564c6b5592fb4dfabdae780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6da114613564c6b5592fb4dfabdae780">&#9670;&nbsp;</a></span>dict_stats_analyze_index_below_cur()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_analyze_index_below_cur </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t *&#160;</td>
          <td class="paramname"><em>n_diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t *&#160;</td>
          <td class="paramname"><em>n_external_pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dive below the current position of a cursor and calculate the number of distinct records on the leaf page, when looking at the fist n_prefix columns. </p>
<p>Also calculate the number of external pages pointed by records on the leaf page. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cur</td><td>cursor </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_prefix</td><td>look at the first n_prefix columns when comparing records </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">n_diff</td><td>number of distinct records </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">n_external_pages</td><td>number of external pages </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac02dc0f00aa70b0eb2c66becbcd34f55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac02dc0f00aa70b0eb2c66becbcd34f55">&#9670;&nbsp;</a></span>dict_stats_analyze_index_for_n_prefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_analyze_index_for_n_prefix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="dict0stats_8cc.html#acff4a68e01a2a395913f066c1451e6c9">boundaries_t</a> *&#160;</td>
          <td class="paramname"><em>boundaries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structn__diff__data__t.html">n_diff_data_t</a> *&#160;</td>
          <td class="paramname"><em>n_diff_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Estimate the number of different key values in an index when looking at the first n_prefix columns. </p>
<p>For a given level in an index select n_diff_data-&gt;n_leaf_pages_to_analyze records from that level and dive below them to the corresponding leaf pages, then scan those leaf pages and save the sampling results in n_diff_data-&gt;n_diff_all_analyzed_pages. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_prefix</td><td>Look at first 'n_prefix' columns when comparing records </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">boundaries</td><td>A vector that contains n_diff_data-&gt;n_diff_on_level integers each of which represents the index (on level 'level', counting from left/smallest to right/biggest from 0) of the last record from each group of distinct keys </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">n_diff_data</td><td>n_diff_all_analyzed_pages and n_external_pages_sum in this structure will be set by this function. The members level, n_diff_on_level and n_leaf_pages_to_analyze must be set by the caller in advance - they are used by some calculations inside this function </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0c89866b4d8520e95b2832400cd2c0a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c89866b4d8520e95b2832400cd2c0a3">&#9670;&nbsp;</a></span>dict_stats_analyze_index_level()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_analyze_index_level </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t *&#160;</td>
          <td class="paramname"><em>n_diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t *&#160;</td>
          <td class="paramname"><em>total_recs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t *&#160;</td>
          <td class="paramname"><em>total_pages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0stats_8cc.html#acff4a68e01a2a395913f066c1451e6c9">boundaries_t</a> *&#160;</td>
          <td class="paramname"><em>n_diff_boundaries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the total number and the number of distinct keys on a given level in an index. </p>
<p>Each of the 1..n_uniq prefixes are looked up and the results are saved in the array n_diff[0] .. n_diff[n_uniq - 1]. The total number of records on the level is saved in total_recs. Also, the index of the last record in each group of equal records is saved in n_diff_boundaries[0..n_uniq - 1], records indexing starts from the leftmost record on the level and continues cross pages boundaries, counting from 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index </td></tr>
    <tr><td class="paramname">level</td><td>in: level </td></tr>
    <tr><td class="paramname">n_diff</td><td>out: array for number of distinct keys for all prefixes </td></tr>
    <tr><td class="paramname">total_recs</td><td>out: total number of records </td></tr>
    <tr><td class="paramname">total_pages</td><td>out: total number of pages </td></tr>
    <tr><td class="paramname">n_diff_boundaries</td><td>out: boundaries of the groups of distinct keys </td></tr>
    <tr><td class="paramname">mtr</td><td>in/out: mini-transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa2f33f662449dbc20b42af32e133f71b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2f33f662449dbc20b42af32e133f71b">&#9670;&nbsp;</a></span>dict_stats_assert_initialized()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_assert_initialized </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether table's stats are initialized (assert if they are not). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a24aa5a00b840e4c9268d51b172263bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24aa5a00b840e4c9268d51b172263bdd">&#9670;&nbsp;</a></span>dict_stats_assert_initialized_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_assert_initialized_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether index's stats are initialized (assert if they are not). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a98eaeca6d9bd9291c380b0d048ac3b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98eaeca6d9bd9291c380b0d048ac3b93">&#9670;&nbsp;</a></span>dict_stats_copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy table and index statistics from one table to another, including index stats. </p>
<p>Extra indexes in src are ignored and extra indexes in dst are initialized to correspond to an empty index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>in/out: destination table </td></tr>
    <tr><td class="paramname">src</td><td>in: source table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a88f603f7bf1f381f29914e8d8d70fbeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88f603f7bf1f381f29914e8d8d70fbeb">&#9670;&nbsp;</a></span>dict_stats_delete_from_index_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_delete_from_index_stats </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes DELETE FROM mysql.innodb_index_stats WHERE database_name = '...' AND table_name = '...'; Creates its own transaction and commits it. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database_name</td><td>in: database name, e.g. 'db' </td></tr>
    <tr><td class="paramname">table_name</td><td>in: table name, e.g. 'table' </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2238ec54050c0624ac69b4a535722360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2238ec54050c0624ac69b4a535722360">&#9670;&nbsp;</a></span>dict_stats_delete_from_table_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_delete_from_table_stats </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes DELETE FROM mysql.innodb_table_stats WHERE database_name = '...' AND table_name = '...'; Creates its own transaction and commits it. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database_name</td><td>in: database name, e.g. 'db' </td></tr>
    <tr><td class="paramname">table_name</td><td>in: table name, e.g. 'table' </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a039fe23b8c6508ac42e70d24276929b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a039fe23b8c6508ac42e70d24276929b4">&#9670;&nbsp;</a></span>dict_stats_drop_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_drop_index </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db_and_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>iname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>errstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>errstr_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the information for a particular index's stats from the persistent storage if it exists and if there is data stored for this index. </p>
<p>This function creates its own trx and commits it. A note from Marko why we cannot edit user and sys_* tables in one trx: marko: The problem is that ibuf merges should be disabled while we are rolling back dict transactions. marko: If ibuf merges are not disabled, we need to scan the *.ibd files. But we shouldn't open *.ibd files before we have rolled back dict transactions and opened the SYS_* records for the *.ibd files. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db_and_table</td><td>in: db and table, e.g. 'db/table' </td></tr>
    <tr><td class="paramname">iname</td><td>in: index name </td></tr>
    <tr><td class="paramname">errstr</td><td>out: error message if != DB_SUCCESS is returned </td></tr>
    <tr><td class="paramname">errstr_sz</td><td>in: size of the errstr buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a80c41f13ba29916460fa753d954f7484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80c41f13ba29916460fa753d954f7484">&#9670;&nbsp;</a></span>dict_stats_drop_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_drop_table </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db_and_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>errstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>errstr_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the statistics for a table and all of its indexes from the persistent statistics storage if it exists and if there is data stored for the table. </p>
<p>Removes the statistics for a table and all of its indexes from the persistent storage if it exists and if there is data stored for the table.</p>
<p>This function creates its own transaction and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db_and_table</td><td>in: db and table, e.g. 'db/table' </td></tr>
    <tr><td class="paramname">errstr</td><td>out: error message if != DB_SUCCESS is returned </td></tr>
    <tr><td class="paramname">errstr_sz</td><td>in: size of errstr buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa54be91479ecf39b0ecf70a422a1e845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa54be91479ecf39b0ecf70a422a1e845">&#9670;&nbsp;</a></span>dict_stats_empty_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_empty_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write all zeros (or 1 where it makes sense) into an index statistics members. </p>
<p>The resulting stats correspond to an empty index. The caller must own index's table stats latch in X mode (dict_table_stats_lock(table, RW_X_LATCH)) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b29178b2e10527df46e776f399a2941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b29178b2e10527df46e776f399a2941">&#9670;&nbsp;</a></span>dict_stats_empty_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_empty_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write all zeros (or 1 where it makes sense) into a table and its indexes' statistics members. </p>
<p>The resulting stats correspond to an empty table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in/out: table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2ae6b2364480e0ec168b1053c660cd89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ae6b2364480e0ec168b1053c660cd89">&#9670;&nbsp;</a></span>dict_stats_evict_tablespaces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dict_stats_evict_tablespaces </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evict the stats tables if they loaded in tablespace cache and also close the stats .ibd files. </p>
<p>We have to close stats tables because 8.0 stats tables will use the same name. We load the stats from 5.7 with a suffix "_backup57" and migrate the statistics. </p>

</div>
</div>
<a id="a9470a7defc82199961bc0611588883b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9470a7defc82199961bc0611588883b6">&#9670;&nbsp;</a></span>dict_stats_exec_sql()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_exec_sql </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpars__info__t.html">pars_info_t</a> *&#160;</td>
          <td class="paramname"><em>pinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sql</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes a given SQL statement using the InnoDB internal SQL parser. </p>
<p>This function will free the pinfo object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pinfo</td><td>pinfo to pass to que_eval_sql() must already have any literals bound to it </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sql</td><td>SQL string to execute </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>in case of NULL the function will allocate and free the trx object. If it is not NULL then it will be rolled back only in the case of error, but not freed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>

</div>
</div>
<a id="ae90bdccd2a0c8281a204a5f1827f2d41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae90bdccd2a0c8281a204a5f1827f2d41">&#9670;&nbsp;</a></span>dict_stats_fetch_from_ps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_fetch_from_ps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read table's statistics from the persistent statistics storage. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in/out: table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aac61abc6e83d9d1e1d5451ec74f24a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac61abc6e83d9d1e1d5451ec74f24a02">&#9670;&nbsp;</a></span>dict_stats_fetch_index_stats_step()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool dict_stats_fetch_index_stats_step </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>node_void</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg_void</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called for the rows that are selected by SELECT ... </p>
<p>FROM mysql.innodb_index_stats WHERE table='...' The second argument is a pointer to the table and the fetched stats are written to its indexes. Let a table has N indexes and each index has Ui unique columns for i=1..N, then mysql.innodb_index_stats will have SUM(Ui) i=1..N rows for that table. So this function will be called SUM(Ui) times where SUM(Ui) is of magnitude N*AVG(Ui). In each call it searches for the currently fetched index into table-&gt;indexes linearly, assuming this list is not sorted. Thus, overall, fetching all indexes' stats from mysql.innodb_index_stats is O(N^2) where N is the number of indexes. This can be improved if we sort table-&gt;indexes in a temporary area just once and then search in that sorted list. Then the complexity will be O(N*log(N)). We assume a table will not have more than 100 indexes, so we go with the simpler N^2 algorithm. </p><dl class="section return"><dt>Returns</dt><dd>non-NULL dummy </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node_void</td><td>in: select node </td></tr>
    <tr><td class="paramname">arg_void</td><td>out: table + a flag that tells if we modified anything </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8d483853138c6ff97ea4eebf3d3f3db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d483853138c6ff97ea4eebf3d3f3db1">&#9670;&nbsp;</a></span>dict_stats_fetch_table_stats_step()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool dict_stats_fetch_table_stats_step </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>node_void</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>table_void</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called for the row that is selected by SELECT ... </p>
<p>FROM mysql.innodb_table_stats WHERE table='...' The second argument is a pointer to the table and the fetched stats are written to it. </p><dl class="section return"><dt>Returns</dt><dd>non-NULL dummy </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node_void</td><td>in: select node </td></tr>
    <tr><td class="paramname">table_void</td><td>out: table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae3e623a111622183b996c10b5d10ca0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3e623a111622183b996c10b5d10ca0e">&#9670;&nbsp;</a></span>dict_stats_index_set_n_diff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE void dict_stats_index_set_n_diff </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structn__diff__data__t.html">n_diff_data_t</a> *&#160;</td>
          <td class="paramname"><em>n_diff_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set dict_index_t::stat_n_diff_key_vals[] and stat_n_sample_sizes[]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_diff_data</td><td>input data to use to derive the results </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>index whose stat_n_diff_key_vals[] to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeb04d42df8e81737a044c10685ffb633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb04d42df8e81737a044c10685ffb633">&#9670;&nbsp;</a></span>dict_stats_rename_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_rename_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_index_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_index_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renames an index in InnoDB persistent stats storage. </p>
<p>This function creates its own transaction and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code. DB_STATS_DO_NOT_EXIST will be returned if the persistent stats do not exist. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table whose index is renamed </td></tr>
    <tr><td class="paramname">old_index_name</td><td>in: old index name </td></tr>
    <tr><td class="paramname">new_index_name</td><td>in: new index name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3d6e96bb860057a9d91520e4ca8a4a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d6e96bb860057a9d91520e4ca8a4a8c">&#9670;&nbsp;</a></span>dict_stats_rename_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_rename_table </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>errstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>errstr_sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renames a table in InnoDB persistent stats storage. </p>
<p>This function creates its own transaction and commits it. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_name</td><td>in: old name, e.g. 'db/table' </td></tr>
    <tr><td class="paramname">new_name</td><td>in: new name, e.g. 'db/table' </td></tr>
    <tr><td class="paramname">errstr</td><td>out: error string if != DB_SUCCESS is returned </td></tr>
    <tr><td class="paramname">errstr_sz</td><td>in: errstr size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0f8a007546843e29f6a21fde66a8db2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f8a007546843e29f6a21fde66a8db2c">&#9670;&nbsp;</a></span>dict_stats_rename_table_in_index_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_rename_table_in_index_stats </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_dbname_utf8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_tablename_utf8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_dbname_utf8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_tablename_utf8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes UPDATE mysql.innodb_index_stats SET database_name = '...', table_name = '...' WHERE database_name = '...' AND table_name = '...'; Creates its own transaction and commits it. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_dbname_utf8</td><td>in: database name, e.g. 'olddb' </td></tr>
    <tr><td class="paramname">old_tablename_utf8</td><td>in: table name, e.g. 'oldtable' </td></tr>
    <tr><td class="paramname">new_dbname_utf8</td><td>in: database name, e.g. 'newdb' </td></tr>
    <tr><td class="paramname">new_tablename_utf8</td><td>in: table name, e.g. 'newtable' </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a68080ed26d697d9abdae217ae7cf3de3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68080ed26d697d9abdae217ae7cf3de3">&#9670;&nbsp;</a></span>dict_stats_rename_table_in_table_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_rename_table_in_table_stats </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_dbname_utf8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_tablename_utf8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_dbname_utf8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_tablename_utf8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes UPDATE mysql.innodb_table_stats SET database_name = '...', table_name = '...' WHERE database_name = '...' AND table_name = '...'; Creates its own transaction and commits it. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_dbname_utf8</td><td>in: database name, e.g. 'olddb' </td></tr>
    <tr><td class="paramname">old_tablename_utf8</td><td>in: table name, e.g. 'oldtable' </td></tr>
    <tr><td class="paramname">new_dbname_utf8</td><td>in: database name, e.g. 'newdb' </td></tr>
    <tr><td class="paramname">new_tablename_utf8</td><td>in: table name, e.g. 'newtable' </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3e0d729e38a08f7cc2868332e78c1b57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e0d729e38a08f7cc2868332e78c1b57">&#9670;&nbsp;</a></span>dict_stats_save()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classindex__id__t.html">index_id_t</a> *&#160;</td>
          <td class="paramname"><em>only_for_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save the table's statistics into the persistent statistics storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table_orig</td><td>table whose stats to save </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">only_for_index</td><td>if this is non-NULL, then stats for indexes that are not equal to it will not be saved, if NULL, then all indexes' stats are saved </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>

</div>
</div>
<a id="aa2645a68b2cef93a72c8b5c7c12d025b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2645a68b2cef93a72c8b5c7c12d025b">&#9670;&nbsp;</a></span>dict_stats_save_index_stat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_save_index_stat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lint&#160;</td>
          <td class="paramname"><em>last_update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stat_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t&#160;</td>
          <td class="paramname"><em>stat_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t *&#160;</td>
          <td class="paramname"><em>sample_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stat_description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save an individual index's statistic into the persistent statistics storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index to be updated </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">last_update</td><td>timestamp of the stat </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stat_name</td><td>name of the stat </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stat_value</td><td>value of the stat </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sample_size</td><td>n pages sampled or NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stat_description</td><td>description of the stat </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">trx</td><td>in case of NULL the function will allocate and free the trx object. If it is not NULL then it will be rolled back only in the case of error, but not freed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>

</div>
</div>
<a id="a3787b89ee0a5a9303166c5116bd28950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3787b89ee0a5a9303166c5116bd28950">&#9670;&nbsp;</a></span>dict_stats_scan_page()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE ulint* dict_stats_scan_page </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="rem0types_8h.html#a92caeffe2dc2fbe825a54aef9a163435">rec_t</a> **&#160;</td>
          <td class="paramname"><em>out_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint *&#160;</td>
          <td class="paramname"><em>offsets2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="page0types_8h.html#ac84908ddc97c37107986280aa8f37897">page_t</a> *&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0stats_8cc.html#a75f003395590eff92c30ec603e53ca62">page_scan_method_t</a>&#160;</td>
          <td class="paramname"><em>scan_method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t *&#160;</td>
          <td class="paramname"><em>n_diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ib_uint64_t *&#160;</td>
          <td class="paramname"><em>n_external_pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scan a page, reading records from left to right and counting the number of distinct records (looking only at the first n_prefix columns) and the number of external pages pointed by records from this page. </p>
<p>If scan_method is QUIT_ON_FIRST_NON_BORING then the function will return as soon as it finds a record that does not match its neighbor to the right, which means that in the case of QUIT_ON_FIRST_NON_BORING the returned n_diff can either be 0 (empty page), 1 (the whole page has all keys equal) or 2 (the function found a non-boring record and returned). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">out_rec</td><td>record, or NULL </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">offsets1</td><td>rec_get_offsets() working space (must be big enough) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">offsets2</td><td>rec_get_offsets() working space (must be big enough) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index of the page </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page</td><td>the page to scan </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_prefix</td><td>look at the first n_prefix columns </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scan_method</td><td>scan to the end of the page or not </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">n_diff</td><td>number of distinct records encountered </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">n_external_pages</td><td>if this is non-NULL then it will be set to the number of externally stored pages which were encountered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>offsets1 or offsets2 (the offsets of *out_rec), or NULL if the page is empty and does not contain user records. </dd></dl>

</div>
</div>
<a id="a4362310ecf77f0db13b003058469f78c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4362310ecf77f0db13b003058469f78c">&#9670;&nbsp;</a></span>dict_stats_should_ignore_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UNIV_INLINE <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> dict_stats_should_ignore_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether an index should be ignored in stats manipulations: stats fetch stats recalc stats save. </p>
<dl class="section return"><dt>Returns</dt><dd>true if exists and all tables are ok </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in: index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a196b733124afd8bd7db8c6818939b70d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a196b733124afd8bd7db8c6818939b70d">&#9670;&nbsp;</a></span>dict_stats_snapshot_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdict__table__t.html">dict_table_t</a>* dict_stats_snapshot_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duplicate the stats of a table and its indexes. </p>
<p>This function creates a dummy dict_table_t object and copies the input table's stats into it. The returned table object is not in the dictionary cache and cannot be accessed by any other threads. In addition to the members copied in dict_stats_table_clone_create() this function initializes the following: dict_table_t::stat_initialized dict_table_t::stat_persistent dict_table_t::stat_n_rows dict_table_t::stat_clustered_index_size dict_table_t::stat_sum_of_other_index_sizes dict_table_t::stat_modified_counter dict_index_t::stat_n_diff_key_vals[] dict_index_t::stat_n_sample_sizes[] dict_index_t::stat_n_non_null_key_vals[] dict_index_t::stat_index_size dict_index_t::stat_n_leaf_pages The returned object should be freed with dict_stats_snapshot_free() when no longer needed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>table whose stats to copy </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>incomplete table object </dd></dl>

</div>
</div>
<a id="a2c3716bbf484a15dfb94ef2eb1064cf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c3716bbf484a15dfb94ef2eb1064cf4">&#9670;&nbsp;</a></span>dict_stats_snapshot_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_snapshot_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free the resources occupied by an object returned by dict_stats_snapshot_create(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>in: dummy table object to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2dab34808abcb08193d55d13682dd5e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dab34808abcb08193d55d13682dd5e6">&#9670;&nbsp;</a></span>dict_stats_table_clone_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structdict__table__t.html">dict_table_t</a>* dict_stats_table_clone_create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duplicate a table object and its indexes. </p>
<p>This function creates a dummy dict_table_t object and initializes the following table and index members: dict_table_t::id (copied) dict_table_t::heap (newly created) dict_table_t::name (copied) dict_table_t::corrupted (copied) dict_table_t::indexes&lt;&gt; (newly created) dict_table_t::magic_n for each entry in dict_table_t::indexes, the following are initialized: (indexes that have DICT_FTS set in index-&gt;type are skipped) dict_index_t::id (copied) dict_index_t::name (copied) dict_index_t::table_name (points to the copied table name) dict_index_t::table (points to the above semi-initialized object) dict_index_t::type (copied) dict_index_t::to_be_dropped (copied) dict_index_t::online_status (copied) dict_index_t::n_uniq (copied) dict_index_t::fields[] (newly created, only first n_uniq, only fields[i].name) dict_index_t::indexes&lt;&gt; (newly created) dict_index_t::stat_n_diff_key_vals[] (only allocated, left uninitialized) dict_index_t::stat_n_sample_sizes[] (only allocated, left uninitialized) dict_index_t::stat_n_non_null_key_vals[] (only allocated, left uninitialized) dict_index_t::magic_n The returned object should be freed with dict_stats_table_clone_free() when no longer needed. </p><dl class="section return"><dt>Returns</dt><dd>incomplete table object </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table whose stats to copy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a112a88d49c40becfe979d160c202e77e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a112a88d49c40becfe979d160c202e77e">&#9670;&nbsp;</a></span>dict_stats_table_clone_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_table_clone_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free the resources occupied by an object returned by dict_stats_table_clone_create(). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>in: dummy table object to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9fa88a532ba8ddc058552774b2c5f266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fa88a532ba8ddc058552774b2c5f266">&#9670;&nbsp;</a></span>dict_stats_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0stats_8h.html#a440278fb245556fdd3ac4bdd5ee75b57">dict_stats_upd_option_t</a>&#160;</td>
          <td class="paramname"><em>stats_upd_option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates new estimates for table and index statistics. </p>
<p>The statistics are used in query optimization. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in/out: table </td></tr>
    <tr><td class="paramname">stats_upd_option</td><td>in: whether to (re) calc the stats or to fetch them from the persistent statistics storage </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b1ec528959596a472a7374ba116dc98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b1ec528959596a472a7374ba116dc98">&#9670;&nbsp;</a></span>dict_stats_update_for_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dict_stats_update_for_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches or calculates new estimates for index statistics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a562e9573887650dadb044721386b996f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a562e9573887650dadb044721386b996f">&#9670;&nbsp;</a></span>dict_stats_update_persistent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> dict_stats_update_persistent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates new estimates for table and index statistics. </p>
<p>This function is relatively slow and is used to calculate persistent statistics that will be saved on disk. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in/out: table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad150445900cb7658e117ec4e11d7913b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad150445900cb7658e117ec4e11d7913b">&#9670;&nbsp;</a></span>dict_stats_update_transient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_update_transient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates new estimates for table and index statistics. </p>
<p>This function is relatively quick and is used to calculate transient statistics that are not saved on disk. This was the only way to calculate statistics before the Persistent Statistics feature was introduced. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in/out: table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acea3c67367649f992995760148b983a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acea3c67367649f992995760148b983a4">&#9670;&nbsp;</a></span>dict_stats_update_transient_for_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dict_stats_update_transient_for_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates new estimates for index statistics. </p>
<p>This function is relatively quick and is used to calculate transient statistics that are not saved on disk. This was the only way to calculate statistics before the Persistent Statistics feature was introduced. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>in/out: index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_c831b130efbf9169b51e663499b9ee52.html">dict</a></li><li class="navelem"><a class="el" href="dict0stats_8cc.html">dict0stats.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
