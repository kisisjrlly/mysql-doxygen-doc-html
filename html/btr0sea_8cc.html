<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/btr/btr0sea.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('btr0sea_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">btr0sea.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The index tree adaptive search.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="btr0sea_8h_source.html">btr0sea.h</a>&quot;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &quot;<a class="el" href="btr0btr_8h_source.html">btr0btr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="btr0cur_8h_source.html">btr0cur.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="btr0pcur_8h_source.html">btr0pcur.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buf0buf_8h_source.html">buf0buf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ha0ha_8h_source.html">ha0ha.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="page0cur_8h_source.html">page0cur.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="page0page_8h_source.html">page0page.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0mon_8h_source.html">srv0mon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sync0sync_8h_source.html">sync0sync.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0fd390dc9999c8e5cb9a1c8aad8a82bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a0fd390dc9999c8e5cb9a1c8aad8a82bd">BTR_SEARCH_PAGE_BUILD_LIMIT</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:a0fd390dc9999c8e5cb9a1c8aad8a82bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the number of records on the page divided by this parameter would have been successfully accessed using a hash index, the index is then built on the page, assuming the global limit has been reached.  <a href="#a0fd390dc9999c8e5cb9a1c8aad8a82bd">More...</a><br /></td></tr>
<tr class="separator:a0fd390dc9999c8e5cb9a1c8aad8a82bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a215610cf6902258f236d650e3a1d5799"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a215610cf6902258f236d650e3a1d5799">BTR_SEARCH_BUILD_LIMIT</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:a215610cf6902258f236d650e3a1d5799"><td class="mdescLeft">&#160;</td><td class="mdescRight">The global limit for consecutive potentially successful hash searches, before hash index building is started.  <a href="#a215610cf6902258f236d650e3a1d5799">More...</a><br /></td></tr>
<tr class="separator:a215610cf6902258f236d650e3a1d5799"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a954f5aafa897dca290ae2521b29db7c2"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a954f5aafa897dca290ae2521b29db7c2">btr_search_fold_index_id</a> (uint32_t space_id, <a class="el" href="dict0types_8h.html#a00c394837dddc950522d91155514e7de">space_index_t</a> index_id)</td></tr>
<tr class="memdesc:a954f5aafa897dca290ae2521b29db7c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the hash value of an index identifier.  <a href="#a954f5aafa897dca290ae2521b29db7c2">More...</a><br /></td></tr>
<tr class="separator:a954f5aafa897dca290ae2521b29db7c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c8959d57b0fd15d77e2202069228c4"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a09c8959d57b0fd15d77e2202069228c4">btr_search_fold_index_id</a> (const <a class="el" href="classindex__id__t.html">index_id_t</a> &amp;<a class="el" href="xcom__base_8cc.html#a7307f729d2752bdbe1d32d9fda65f30a">id</a>)</td></tr>
<tr class="memdesc:a09c8959d57b0fd15d77e2202069228c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the hash value of an index identifier.  <a href="#a09c8959d57b0fd15d77e2202069228c4">More...</a><br /></td></tr>
<tr class="separator:a09c8959d57b0fd15d77e2202069228c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f5f2da08132e68eb1ed89b33d46ee1"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a86f5f2da08132e68eb1ed89b33d46ee1">btr_search_get_n_fields</a> (ulint n_fields, ulint n_bytes)</td></tr>
<tr class="memdesc:a86f5f2da08132e68eb1ed89b33d46ee1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the number of accessed key fields.  <a href="#a86f5f2da08132e68eb1ed89b33d46ee1">More...</a><br /></td></tr>
<tr class="separator:a86f5f2da08132e68eb1ed89b33d46ee1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b25e2c07e80bea200a7d51cd451f0d2"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a5b25e2c07e80bea200a7d51cd451f0d2">btr_search_get_n_fields</a> (const <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="memdesc:a5b25e2c07e80bea200a7d51cd451f0d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the number of accessed key fields.  <a href="#a5b25e2c07e80bea200a7d51cd451f0d2">More...</a><br /></td></tr>
<tr class="separator:a5b25e2c07e80bea200a7d51cd451f0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2706205f14a999f2e1c72c9c4fbfca7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#aa2706205f14a999f2e1c72c9c4fbfca7">btr_search_build_page_hash_index</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structbuf__block__t.html">buf_block_t</a> *block, ulint n_fields, ulint n_bytes, ibool left_side)</td></tr>
<tr class="memdesc:aa2706205f14a999f2e1c72c9c4fbfca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a hash index on a page with the given parameters.  <a href="#aa2706205f14a999f2e1c72c9c4fbfca7">More...</a><br /></td></tr>
<tr class="separator:aa2706205f14a999f2e1c72c9c4fbfca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2637f1112899bb0028b615c53e06da20"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a2637f1112899bb0028b615c53e06da20">btr_search_check_free_space_in_heap</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a2637f1112899bb0028b615c53e06da20"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function should be called before reserving any btr search mutex, if the intended operation might add nodes to the search system hash table.  <a href="#a2637f1112899bb0028b615c53e06da20">More...</a><br /></td></tr>
<tr class="separator:a2637f1112899bb0028b615c53e06da20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab978894ba96e9edfb7097c2973e78ea3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#ab978894ba96e9edfb7097c2973e78ea3">btr_search_sys_create</a> (ulint hash_size)</td></tr>
<tr class="memdesc:ab978894ba96e9edfb7097c2973e78ea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and initializes the adaptive search system at a database start.  <a href="#ab978894ba96e9edfb7097c2973e78ea3">More...</a><br /></td></tr>
<tr class="separator:ab978894ba96e9edfb7097c2973e78ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae5afff4ab34f3a949fa400fef17d74b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#aae5afff4ab34f3a949fa400fef17d74b">btr_search_sys_resize</a> (ulint hash_size)</td></tr>
<tr class="memdesc:aae5afff4ab34f3a949fa400fef17d74b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resize hash index hash table.  <a href="#aae5afff4ab34f3a949fa400fef17d74b">More...</a><br /></td></tr>
<tr class="separator:aae5afff4ab34f3a949fa400fef17d74b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aeee1c109d4f24433611280240eca24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a5aeee1c109d4f24433611280240eca24">btr_search_sys_free</a> ()</td></tr>
<tr class="memdesc:a5aeee1c109d4f24433611280240eca24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the adaptive search system at a database shutdown.  <a href="#a5aeee1c109d4f24433611280240eca24">More...</a><br /></td></tr>
<tr class="separator:a5aeee1c109d4f24433611280240eca24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad123c65cc521709b8de09e84cead6951"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#ad123c65cc521709b8de09e84cead6951">btr_search_disable_ref_count</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:ad123c65cc521709b8de09e84cead6951"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set index-&gt;ref_count = 0 on all indexes of a table.  <a href="#ad123c65cc521709b8de09e84cead6951">More...</a><br /></td></tr>
<tr class="separator:ad123c65cc521709b8de09e84cead6951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a888c563e815dc38cb86bc5505e6283d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a888c563e815dc38cb86bc5505e6283d9">btr_search_disable</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> need_mutex)</td></tr>
<tr class="memdesc:a888c563e815dc38cb86bc5505e6283d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the adaptive hash search system and empty the index.  <a href="#a888c563e815dc38cb86bc5505e6283d9">More...</a><br /></td></tr>
<tr class="separator:a888c563e815dc38cb86bc5505e6283d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b9a64291047300e38c456a881f750c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#af1b9a64291047300e38c456a881f750c">btr_search_enable</a> ()</td></tr>
<tr class="memdesc:af1b9a64291047300e38c456a881f750c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the adaptive hash search system.  <a href="#af1b9a64291047300e38c456a881f750c">More...</a><br /></td></tr>
<tr class="separator:af1b9a64291047300e38c456a881f750c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c01f670ee3f67f8dc42c0a44b40379"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#aa8c01f670ee3f67f8dc42c0a44b40379">btr_search_info_create</a> (<a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap)</td></tr>
<tr class="memdesc:aa8c01f670ee3f67f8dc42c0a44b40379"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and initializes a search info struct.  <a href="#aa8c01f670ee3f67f8dc42c0a44b40379">More...</a><br /></td></tr>
<tr class="separator:aa8c01f670ee3f67f8dc42c0a44b40379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756846481bf82101fdb3c13e1e650020"><td class="memItemLeft" align="right" valign="top">ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a756846481bf82101fdb3c13e1e650020">btr_search_info_get_ref_count</a> (const <a class="el" href="structbtr__search__t.html">btr_search_t</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, const <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a756846481bf82101fdb3c13e1e650020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value of ref_count.  <a href="#a756846481bf82101fdb3c13e1e650020">More...</a><br /></td></tr>
<tr class="separator:a756846481bf82101fdb3c13e1e650020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb49172aedff1ca4fd17223e40d826c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#aecb49172aedff1ca4fd17223e40d826c">btr_search_info_update_hash</a> (<a class="el" href="structbtr__search__t.html">btr_search_t</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="memdesc:aecb49172aedff1ca4fd17223e40d826c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the search info of an index about hash successes.  <a href="#aecb49172aedff1ca4fd17223e40d826c">More...</a><br /></td></tr>
<tr class="separator:aecb49172aedff1ca4fd17223e40d826c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32feab05fa69faac0abcf2fd1fc81831"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a32feab05fa69faac0abcf2fd1fc81831">btr_search_update_block_hash_info</a> (<a class="el" href="structbtr__search__t.html">btr_search_t</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="structbuf__block__t.html">buf_block_t</a> *block, const <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="memdesc:a32feab05fa69faac0abcf2fd1fc81831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the block search info on hash successes.  <a href="#a32feab05fa69faac0abcf2fd1fc81831">More...</a><br /></td></tr>
<tr class="separator:a32feab05fa69faac0abcf2fd1fc81831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad440733170e718e8d8a606b7245877ec"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#ad440733170e718e8d8a606b7245877ec">btr_search_update_hash_ref</a> (const <a class="el" href="structbtr__search__t.html">btr_search_t</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="structbuf__block__t.html">buf_block_t</a> *block, const <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="memdesc:ad440733170e718e8d8a606b7245877ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates a hash node reference when it has been unsuccessfully used in a search which could have succeeded with the used hash parameters.  <a href="#ad440733170e718e8d8a606b7245877ec">More...</a><br /></td></tr>
<tr class="separator:ad440733170e718e8d8a606b7245877ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a98d82326fec19b0ebb02e4c338c6ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a4a98d82326fec19b0ebb02e4c338c6ae">btr_search_info_update_slow</a> (<a class="el" href="structbtr__search__t.html">btr_search_t</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="memdesc:a4a98d82326fec19b0ebb02e4c338c6ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the search info.  <a href="#a4a98d82326fec19b0ebb02e4c338c6ae">More...</a><br /></td></tr>
<tr class="separator:a4a98d82326fec19b0ebb02e4c338c6ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad54cfcece5869be6970336ef92db976b"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#ad54cfcece5869be6970336ef92db976b">btr_search_check_guess</a> (<a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, ibool can_only_compare_to_cursor_rec, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *tuple, ulint mode, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ad54cfcece5869be6970336ef92db976b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a guessed position for a tree cursor is right.  <a href="#ad54cfcece5869be6970336ef92db976b">More...</a><br /></td></tr>
<tr class="separator:ad54cfcece5869be6970336ef92db976b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dfbbc5ab82f92572e0d88ff6c79fe26"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a8dfbbc5ab82f92572e0d88ff6c79fe26">btr_search_failure</a> (<a class="el" href="structbtr__search__t.html">btr_search_t</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="separator:a8dfbbc5ab82f92572e0d88ff6c79fe26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2078f620596010d2d1a078635f58bfa"><td class="memItemLeft" align="right" valign="top">ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#ae2078f620596010d2d1a078635f58bfa">btr_search_guess_on_hash</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structbtr__search__t.html">btr_search_t</a> *<a class="el" href="mysql__ssl__rsa__setup_8cc.html#a5f4e2d00e13f7f971e3fbce0dee76947">info</a>, const <a class="el" href="structdtuple__t.html">dtuple_t</a> *tuple, ulint mode, ulint latch_mode, <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor, ulint has_search_latch, <a class="el" href="structmtr__t.html">mtr_t</a> *mtr)</td></tr>
<tr class="memdesc:ae2078f620596010d2d1a078635f58bfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to guess the right search position based on the hash search info of the index.  <a href="#ae2078f620596010d2d1a078635f58bfa">More...</a><br /></td></tr>
<tr class="separator:ae2078f620596010d2d1a078635f58bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39702c67c70b79fda87632a6c275ef6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#ab39702c67c70b79fda87632a6c275ef6">btr_search_drop_page_hash_index</a> (<a class="el" href="structbuf__block__t.html">buf_block_t</a> *block)</td></tr>
<tr class="memdesc:ab39702c67c70b79fda87632a6c275ef6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop any adaptive hash index entries that point to an index page.  <a href="#ab39702c67c70b79fda87632a6c275ef6">More...</a><br /></td></tr>
<tr class="separator:ab39702c67c70b79fda87632a6c275ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaff45b572509cfee812d29b6bff70ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#adaff45b572509cfee812d29b6bff70ae">btr_search_drop_page_hash_when_freed</a> (const <a class="el" href="classpage__id__t.html">page_id_t</a> &amp;page_id, const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;page_size)</td></tr>
<tr class="memdesc:adaff45b572509cfee812d29b6bff70ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop any adaptive hash index entries that may point to an index page that may be in the buffer pool, when a page is evicted from the buffer pool or freed in a file segment.  <a href="#adaff45b572509cfee812d29b6bff70ae">More...</a><br /></td></tr>
<tr class="separator:adaff45b572509cfee812d29b6bff70ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac818315fb97b5d54d297cf412099c539"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#ac818315fb97b5d54d297cf412099c539">btr_drop_ahi_for_table</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:ac818315fb97b5d54d297cf412099c539"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop any adaptive hash index entries for a table.  <a href="#ac818315fb97b5d54d297cf412099c539">More...</a><br /></td></tr>
<tr class="separator:ac818315fb97b5d54d297cf412099c539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd22a606d71c0a3c3f16e44c4ca762d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#acd22a606d71c0a3c3f16e44c4ca762d3">btr_drop_ahi_for_index</a> (<a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:acd22a606d71c0a3c3f16e44c4ca762d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop any adaptive hash index entries for a index.  <a href="#acd22a606d71c0a3c3f16e44c4ca762d3">More...</a><br /></td></tr>
<tr class="separator:acd22a606d71c0a3c3f16e44c4ca762d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e1819915b9d3ea4cc7bc68099c8c197"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a0e1819915b9d3ea4cc7bc68099c8c197">btr_search_move_or_delete_hash_entries</a> (<a class="el" href="structbuf__block__t.html">buf_block_t</a> *new_block, <a class="el" href="structbuf__block__t.html">buf_block_t</a> *block, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a0e1819915b9d3ea4cc7bc68099c8c197"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves or deletes hash entries for moved records.  <a href="#a0e1819915b9d3ea4cc7bc68099c8c197">More...</a><br /></td></tr>
<tr class="separator:a0e1819915b9d3ea4cc7bc68099c8c197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60642dc094d4d5e7a543931b9208a193"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a60642dc094d4d5e7a543931b9208a193">btr_search_update_hash_on_delete</a> (<a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="memdesc:a60642dc094d4d5e7a543931b9208a193"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the page hash index when a single record is deleted from a page.  <a href="#a60642dc094d4d5e7a543931b9208a193">More...</a><br /></td></tr>
<tr class="separator:a60642dc094d4d5e7a543931b9208a193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6127ad9f7dc94470ae793678a142733"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#af6127ad9f7dc94470ae793678a142733">btr_search_update_hash_node_on_insert</a> (<a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="memdesc:af6127ad9f7dc94470ae793678a142733"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the page hash index when a single record is inserted on a page.  <a href="#af6127ad9f7dc94470ae793678a142733">More...</a><br /></td></tr>
<tr class="separator:af6127ad9f7dc94470ae793678a142733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db029db26ac3aebf644f8fddab1291a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a3db029db26ac3aebf644f8fddab1291a">btr_search_update_hash_on_insert</a> (<a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *cursor)</td></tr>
<tr class="memdesc:a3db029db26ac3aebf644f8fddab1291a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the page hash index when a single record is inserted on a page.  <a href="#a3db029db26ac3aebf644f8fddab1291a">More...</a><br /></td></tr>
<tr class="separator:a3db029db26ac3aebf644f8fddab1291a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8416783e2bcace8e780006666db13a5a"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a8416783e2bcace8e780006666db13a5a">btr_search_hash_table_validate</a> (ulint hash_table_id)</td></tr>
<tr class="memdesc:a8416783e2bcace8e780006666db13a5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates the search system for given hash table.  <a href="#a8416783e2bcace8e780006666db13a5a">More...</a><br /></td></tr>
<tr class="separator:a8416783e2bcace8e780006666db13a5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f95d30143774139cb7a348a98d05b50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a2f95d30143774139cb7a348a98d05b50">btr_search_validate</a> ()</td></tr>
<tr class="memdesc:a2f95d30143774139cb7a348a98d05b50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate the search system.  <a href="#a2f95d30143774139cb7a348a98d05b50">More...</a><br /></td></tr>
<tr class="separator:a2f95d30143774139cb7a348a98d05b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a443ec3705756623f0ac79fd1186bd2bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a443ec3705756623f0ac79fd1186bd2bd">btr_search_enabled</a> = <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></td></tr>
<tr class="memdesc:a443ec3705756623f0ac79fd1186bd2bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is search system enabled.  <a href="#a443ec3705756623f0ac79fd1186bd2bd">More...</a><br /></td></tr>
<tr class="separator:a443ec3705756623f0ac79fd1186bd2bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba81b202f008db57bb1abf6be84a5a32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#aba81b202f008db57bb1abf6be84a5a32">btr_ahi_parts</a> = 8</td></tr>
<tr class="memdesc:aba81b202f008db57bb1abf6be84a5a32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of adaptive hash index partition.  <a href="#aba81b202f008db57bb1abf6be84a5a32">More...</a><br /></td></tr>
<tr class="separator:aba81b202f008db57bb1abf6be84a5a32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56fdf24b137021b0c5d9d7969aea8949"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a56fdf24b137021b0c5d9d7969aea8949">btr_sea_pad1</a> [64]</td></tr>
<tr class="memdesc:a56fdf24b137021b0c5d9d7969aea8949"><td class="mdescLeft">&#160;</td><td class="mdescRight">padding to prevent other memory update hotspots from residing on the same memory cache line as btr_search_latches  <a href="#a56fdf24b137021b0c5d9d7969aea8949">More...</a><br /></td></tr>
<tr class="separator:a56fdf24b137021b0c5d9d7969aea8949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a769f54cf6b0504b3890aca75005c1232"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrw__lock__t.html">rw_lock_t</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a769f54cf6b0504b3890aca75005c1232">btr_search_latches</a></td></tr>
<tr class="memdesc:a769f54cf6b0504b3890aca75005c1232"><td class="mdescLeft">&#160;</td><td class="mdescRight">The latches protecting the adaptive search system: this latches protects the (1) positions of records on those pages where a hash index has been built.  <a href="#a769f54cf6b0504b3890aca75005c1232">More...</a><br /></td></tr>
<tr class="separator:a769f54cf6b0504b3890aca75005c1232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a909ef63eff3f9e5a15c96ea005273b8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#a909ef63eff3f9e5a15c96ea005273b8c">btr_sea_pad2</a> [64]</td></tr>
<tr class="memdesc:a909ef63eff3f9e5a15c96ea005273b8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">padding to prevent other memory update hotspots from residing on the same memory cache line  <a href="#a909ef63eff3f9e5a15c96ea005273b8c">More...</a><br /></td></tr>
<tr class="separator:a909ef63eff3f9e5a15c96ea005273b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0e4dd1c1cef9ea852db235d0f6aa959"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbtr__search__sys__t.html">btr_search_sys_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="btr0sea_8cc.html#ad0e4dd1c1cef9ea852db235d0f6aa959">btr_search_sys</a></td></tr>
<tr class="memdesc:ad0e4dd1c1cef9ea852db235d0f6aa959"><td class="mdescLeft">&#160;</td><td class="mdescRight">The adaptive hash index.  <a href="#ad0e4dd1c1cef9ea852db235d0f6aa959">More...</a><br /></td></tr>
<tr class="separator:ad0e4dd1c1cef9ea852db235d0f6aa959"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The index tree adaptive search. </p>
<p>Created 2/17/1996 Heikki Tuuri </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a215610cf6902258f236d650e3a1d5799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a215610cf6902258f236d650e3a1d5799">&#9670;&nbsp;</a></span>BTR_SEARCH_BUILD_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BTR_SEARCH_BUILD_LIMIT&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The global limit for consecutive potentially successful hash searches, before hash index building is started. </p>

</div>
</div>
<a id="a0fd390dc9999c8e5cb9a1c8aad8a82bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fd390dc9999c8e5cb9a1c8aad8a82bd">&#9670;&nbsp;</a></span>BTR_SEARCH_PAGE_BUILD_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BTR_SEARCH_PAGE_BUILD_LIMIT&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the number of records on the page divided by this parameter would have been successfully accessed using a hash index, the index is then built on the page, assuming the global limit has been reached. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acd22a606d71c0a3c3f16e44c4ca762d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd22a606d71c0a3c3f16e44c4ca762d3">&#9670;&nbsp;</a></span>btr_drop_ahi_for_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_drop_ahi_for_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop any adaptive hash index entries for a index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>to drop hash indexes for this index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac818315fb97b5d54d297cf412099c539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac818315fb97b5d54d297cf412099c539">&#9670;&nbsp;</a></span>btr_drop_ahi_for_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_drop_ahi_for_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop any adaptive hash index entries for a table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>to drop indexes of this table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa2706205f14a999f2e1c72c9c4fbfca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2706205f14a999f2e1c72c9c4fbfca7">&#9670;&nbsp;</a></span>btr_search_build_page_hash_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void btr_search_build_page_hash_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>left_side</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds a hash index on a page with the given parameters. </p>
<p>If the page already has a hash index with different parameters, the old hash index is removed. If index is non-NULL, this function checks if n_fields and n_bytes are sensible, and does not build a hash index if not. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>index for which to build, or NULL if not known </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">block</td><td>index page, s-/x- latched. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_fields</td><td>hash this many full fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_bytes</td><td>hash this many bytes of the next field </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">left_side</td><td>hash for searches from left side </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2637f1112899bb0028b615c53e06da20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2637f1112899bb0028b615c53e06da20">&#9670;&nbsp;</a></span>btr_search_check_free_space_in_heap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void btr_search_check_free_space_in_heap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function should be called before reserving any btr search mutex, if the intended operation might add nodes to the search system hash table. </p>
<p>Because of the latching order, once we have reserved the btr search system latch, we cannot allocate a free frame from the buffer pool. Checks that there is a free buffer frame allocated for hash table heap in the btr search system. If not, allocates a free frames for the heap. This check makes it probable that, when have reserved the btr search system latch and we need to allocate a new node to the hash table, it will succeed. However, the check will not guarantee success. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index handler </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad54cfcece5869be6970336ef92db976b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad54cfcece5869be6970336ef92db976b">&#9670;&nbsp;</a></span>btr_search_check_guess()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool btr_search_check_guess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ibool&#160;</td>
          <td class="paramname"><em>can_only_compare_to_cursor_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>tuple</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if a guessed position for a tree cursor is right. </p>
<p>Note that if mode is PAGE_CUR_LE, which is used in inserts, and the function returns TRUE, then cursor-&gt;up_match and cursor-&gt;low_match both have sensible values. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cursor</td><td>Guess cursor position </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">can_only_compare_to_cursor_rec</td><td>If we do not have a latch on the page of cursor, but a latch corresponding search system, then ONLY the columns of the record UNDER the cursor are protected, not the next or previous record in the chain: we cannot look at the next or previous record to check our guess! </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tuple</td><td>Data tuple </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>PAGE_CUR_L, PAGE_CUR_LE, PAGE_CUR_G, PAGE_CUR_GE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if success </dd></dl>

</div>
</div>
<a id="a888c563e815dc38cb86bc5505e6283d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a888c563e815dc38cb86bc5505e6283d9">&#9670;&nbsp;</a></span>btr_search_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_disable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>need_mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable the adaptive hash search system and empty the index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">need_mutex</td><td>Need to acquire dict_sys-&gt;mutex </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad123c65cc521709b8de09e84cead6951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad123c65cc521709b8de09e84cead6951">&#9670;&nbsp;</a></span>btr_search_disable_ref_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void btr_search_disable_ref_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set index-&gt;ref_count = 0 on all indexes of a table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">table</td><td>table handler </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab39702c67c70b79fda87632a6c275ef6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab39702c67c70b79fda87632a6c275ef6">&#9670;&nbsp;</a></span>btr_search_drop_page_hash_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_drop_page_hash_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop any adaptive hash index entries that point to an index page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">block</td><td>block containing index page, s- or x-latched, or an index page for which we know that block-&gt;buf_fix_count == 0 or it is an index page which has already been removed from the buf_pool-&gt;page_hash i.e.: it is in state BUF_BLOCK_REMOVE_HASH </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adaff45b572509cfee812d29b6bff70ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaff45b572509cfee812d29b6bff70ae">&#9670;&nbsp;</a></span>btr_search_drop_page_hash_when_freed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_drop_page_hash_when_freed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classpage__id__t.html">page_id_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classpage__size__t.html">page_size_t</a> &amp;&#160;</td>
          <td class="paramname"><em>page_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drop any adaptive hash index entries that may point to an index page that may be in the buffer pool, when a page is evicted from the buffer pool or freed in a file segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page_id</td><td>page id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>page size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af1b9a64291047300e38c456a881f750c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b9a64291047300e38c456a881f750c">&#9670;&nbsp;</a></span>btr_search_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the adaptive hash search system. </p>

</div>
</div>
<a id="a8dfbbc5ab82f92572e0d88ff6c79fe26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dfbbc5ab82f92572e0d88ff6c79fe26">&#9670;&nbsp;</a></span>btr_search_failure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void btr_search_failure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a954f5aafa897dca290ae2521b29db7c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954f5aafa897dca290ae2521b29db7c2">&#9670;&nbsp;</a></span>btr_search_fold_index_id() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint btr_search_fold_index_id </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0types_8h.html#a00c394837dddc950522d91155514e7de">space_index_t</a>&#160;</td>
          <td class="paramname"><em>index_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the hash value of an index identifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>tablespace identifier </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index_id</td><td>index identifier </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>hash value </dd></dl>

</div>
</div>
<a id="a09c8959d57b0fd15d77e2202069228c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c8959d57b0fd15d77e2202069228c4">&#9670;&nbsp;</a></span>btr_search_fold_index_id() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint btr_search_fold_index_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classindex__id__t.html">index_id_t</a> &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the hash value of an index identifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>index identifier </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>hash value </dd></dl>

</div>
</div>
<a id="a86f5f2da08132e68eb1ed89b33d46ee1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86f5f2da08132e68eb1ed89b33d46ee1">&#9670;&nbsp;</a></span>btr_search_get_n_fields() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint btr_search_get_n_fields </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the number of accessed key fields. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n_fields</td><td>number of complete fields </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n_bytes</td><td>number of bytes in an incomplete last field </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of complete or incomplete fields </dd></dl>

</div>
</div>
<a id="a5b25e2c07e80bea200a7d51cd451f0d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b25e2c07e80bea200a7d51cd451f0d2">&#9670;&nbsp;</a></span>btr_search_get_n_fields() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint btr_search_get_n_fields </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the number of accessed key fields. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cursor</td><td>b-tree cursor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of complete or incomplete fields </dd></dl>

</div>
</div>
<a id="ae2078f620596010d2d1a078635f58bfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2078f620596010d2d1a078635f58bfa">&#9670;&nbsp;</a></span>btr_search_guess_on_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibool btr_search_guess_on_hash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdtuple__t.html">dtuple_t</a> *&#160;</td>
          <td class="paramname"><em>tuple</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>latch_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>has_search_latch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmtr__t.html">mtr_t</a> *&#160;</td>
          <td class="paramname"><em>mtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to guess the right search position based on the hash search info of the index. </p>
<p>Note that if mode is PAGE_CUR_LE, which is used in inserts, and the function returns TRUE, then cursor-&gt;up_match and cursor-&gt;low_match both have sensible values. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>Index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">info</td><td>Index search info </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tuple</td><td>Logical record </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>PAGE_CUR_L, .... </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">latch_mode</td><td>BTR_SEARCH_LEAF, ...; NOTE that only if has_search_latch is 0, we will have a latch set on the cursor page, otherwise we assume the caller uses his search latch to protect the record! </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cursor</td><td>Tree cursor </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">has_search_latch</td><td>Latch mode the caller currently has on search system: RW_S/X_LATCH or 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mtr</td><td>Mini-transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if succeeded </dd></dl>

</div>
</div>
<a id="a8416783e2bcace8e780006666db13a5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8416783e2bcace8e780006666db13a5a">&#9670;&nbsp;</a></span>btr_search_hash_table_validate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool btr_search_hash_table_validate </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>hash_table_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validates the search system for given hash table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hash_table_id</td><td>hash table to validate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if ok </dd></dl>

</div>
</div>
<a id="aa8c01f670ee3f67f8dc42c0a44b40379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c01f670ee3f67f8dc42c0a44b40379">&#9670;&nbsp;</a></span>btr_search_info_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbtr__search__t.html">btr_search_t</a>* btr_search_info_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and initializes a search info struct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">heap</td><td>heap where created. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>own: search info struct </dd></dl>

</div>
</div>
<a id="a756846481bf82101fdb3c13e1e650020"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a756846481bf82101fdb3c13e1e650020">&#9670;&nbsp;</a></span>btr_search_info_get_ref_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ulint btr_search_info_get_ref_count </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the value of ref_count. </p>
<p>The value is protected by latch. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>search info </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index identifier </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ref_count value. </dd></dl>

</div>
</div>
<a id="aecb49172aedff1ca4fd17223e40d826c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecb49172aedff1ca4fd17223e40d826c">&#9670;&nbsp;</a></span>btr_search_info_update_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void btr_search_info_update_hash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the search info of an index about hash successes. </p>
<p>NOTE that info is NOT protected by any semaphore, to save CPU time! Do not assume its fields are consistent. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">info</td><td>search info </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursor</td><td>cursor which was just positioned </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4a98d82326fec19b0ebb02e4c338c6ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a98d82326fec19b0ebb02e4c338c6ae">&#9670;&nbsp;</a></span>btr_search_info_update_slow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_info_update_slow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the search info. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">info</td><td>search info </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursor</td><td>cursor which was just positioned </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0e1819915b9d3ea4cc7bc68099c8c197"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e1819915b9d3ea4cc7bc68099c8c197">&#9670;&nbsp;</a></span>btr_search_move_or_delete_hash_entries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_move_or_delete_hash_entries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>new_block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Moves or deletes hash entries for moved records. </p>
<p>If new_page is already hashed, then the hash index for page, if any, is dropped. If new_page is not hashed, and page is hashed, then a new hash index is built to new_page with the same parameters as page (this often happens when a page is split). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">new_block</td><td>records are copied to this page. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">block</td><td>index page from which record are copied, and the copied records will be deleted from this page. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>record descriptor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab978894ba96e9edfb7097c2973e78ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab978894ba96e9edfb7097c2973e78ea3">&#9670;&nbsp;</a></span>btr_search_sys_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_sys_create </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>hash_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and initializes the adaptive search system at a database start. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hash_size</td><td>hash table size. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5aeee1c109d4f24433611280240eca24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aeee1c109d4f24433611280240eca24">&#9670;&nbsp;</a></span>btr_search_sys_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_sys_free </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the adaptive search system at a database shutdown. </p>

</div>
</div>
<a id="aae5afff4ab34f3a949fa400fef17d74b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae5afff4ab34f3a949fa400fef17d74b">&#9670;&nbsp;</a></span>btr_search_sys_resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_sys_resize </td>
          <td>(</td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>hash_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resize hash index hash table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hash_size</td><td>hash index hash table size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a32feab05fa69faac0abcf2fd1fc81831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32feab05fa69faac0abcf2fd1fc81831">&#9670;&nbsp;</a></span>btr_search_update_block_hash_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool btr_search_update_block_hash_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the block search info on hash successes. </p>
<p>NOTE that info and block-&gt;n_hash_helps, n_fields, n_bytes, left_side are NOT protected by any semaphore, to save CPU time! Do not assume the fields are consistent. </p><dl class="section return"><dt>Returns</dt><dd>true if building a (new) hash index on the block is recommended </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">info</td><td>search info </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">block</td><td>buffer block </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursor</td><td>cursor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af6127ad9f7dc94470ae793678a142733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6127ad9f7dc94470ae793678a142733">&#9670;&nbsp;</a></span>btr_search_update_hash_node_on_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_update_hash_node_on_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the page hash index when a single record is inserted on a page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cursor</td><td>cursor which was positioned to the place to insert using btr_cur_search_, and the new record has been inserted next to the cursor. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a60642dc094d4d5e7a543931b9208a193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60642dc094d4d5e7a543931b9208a193">&#9670;&nbsp;</a></span>btr_search_update_hash_on_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_update_hash_on_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the page hash index when a single record is deleted from a page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cursor</td><td>cursor which was positioned on the record to delete using btr_cur_search_, the record is not yet deleted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3db029db26ac3aebf644f8fddab1291a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db029db26ac3aebf644f8fddab1291a">&#9670;&nbsp;</a></span>btr_search_update_hash_on_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void btr_search_update_hash_on_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the page hash index when a single record is inserted on a page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cursor</td><td>cursor which was positioned to the place to insert using btr_cur_search_..., and the new record has been inserted next to the cursor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad440733170e718e8d8a606b7245877ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad440733170e718e8d8a606b7245877ec">&#9670;&nbsp;</a></span>btr_search_update_hash_ref()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void btr_search_update_hash_ref </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbtr__search__t.html">btr_search_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbuf__block__t.html">buf_block_t</a> *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structbtr__cur__t.html">btr_cur_t</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates a hash node reference when it has been unsuccessfully used in a search which could have succeeded with the used hash parameters. </p>
<p>This can happen because when building a hash index for a page, we do not check what happens at page boundaries, and therefore there can be misleading hash nodes. Also, collisions in the fold value can lead to misleading references. This function lazily fixes these imperfections in the hash index. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">info</td><td>search info </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">block</td><td>buffer block where cursor positioned </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursor</td><td>cursor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2f95d30143774139cb7a348a98d05b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f95d30143774139cb7a348a98d05b50">&#9670;&nbsp;</a></span>btr_search_validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> btr_search_validate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validate the search system. </p>
<p>Validates the search system.</p>
<dl class="section return"><dt>Returns</dt><dd>true if ok. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aba81b202f008db57bb1abf6be84a5a32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba81b202f008db57bb1abf6be84a5a32">&#9670;&nbsp;</a></span>btr_ahi_parts</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> btr_ahi_parts = 8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of adaptive hash index partition. </p>

</div>
</div>
<a id="a56fdf24b137021b0c5d9d7969aea8949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56fdf24b137021b0c5d9d7969aea8949">&#9670;&nbsp;</a></span>btr_sea_pad1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> btr_sea_pad1[64]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>padding to prevent other memory update hotspots from residing on the same memory cache line as btr_search_latches </p>

</div>
</div>
<a id="a909ef63eff3f9e5a15c96ea005273b8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a909ef63eff3f9e5a15c96ea005273b8c">&#9670;&nbsp;</a></span>btr_sea_pad2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> btr_sea_pad2[64]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>padding to prevent other memory update hotspots from residing on the same memory cache line </p>

</div>
</div>
<a id="a443ec3705756623f0ac79fd1186bd2bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a443ec3705756623f0ac79fd1186bd2bd">&#9670;&nbsp;</a></span>btr_search_enabled</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> btr_search_enabled = <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is search system enabled. </p>
<p>Search system is protected by array of latches. </p>

</div>
</div>
<a id="a769f54cf6b0504b3890aca75005c1232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a769f54cf6b0504b3890aca75005c1232">&#9670;&nbsp;</a></span>btr_search_latches</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrw__lock__t.html">rw_lock_t</a>** btr_search_latches</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The latches protecting the adaptive search system: this latches protects the (1) positions of records on those pages where a hash index has been built. </p>
<p>Latches protecting access to adaptive hash index.</p>
<p>NOTE: It does not protect values of non-ordering fields within a record from being updated in-place! We can use fact (1) to perform unique searches to indexes. We will allocate the latches from dynamic memory to get it to the same DRAM page as other hotspot semaphores </p>

</div>
</div>
<a id="ad0e4dd1c1cef9ea852db235d0f6aa959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0e4dd1c1cef9ea852db235d0f6aa959">&#9670;&nbsp;</a></span>btr_search_sys</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbtr__search__sys__t.html">btr_search_sys_t</a>* btr_search_sys</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The adaptive hash index. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_f48f5f24c3af6e5b48618127168756b9.html">btr</a></li><li class="navelem"><a class="el" href="btr0sea_8cc.html">btr0sea.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
