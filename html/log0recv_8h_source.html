<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/include/log0recv.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('log0recv_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">log0recv.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="log0recv_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright (c) 1997, 2020, Oracle and/or its affiliates.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">This program is free software; you can redistribute it and/or modify it under</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">the terms of the GNU General Public License, version 2.0, as published by the</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">Free Software Foundation.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">This program is also distributed with certain software (including but not</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">limited to OpenSSL) that is licensed under separate terms, as designated in a</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">particular file or component or in included license documentation. The authors</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">of MySQL hereby grant you an additional permission to link the program and</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">your derivative works with the separately licensed software that they have</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">included with MySQL.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">This program is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">FOR A PARTICULAR PURPOSE. See the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License along with</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">this program; if not, write to the Free Software Foundation, Inc.,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">*****************************************************************************/</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/** @file include/log0recv.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> Recovery</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> Created 9/20/1997 Heikki Tuuri</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *******************************************************/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#ifndef log0recv_h</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define log0recv_h</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="buf0types_8h.html">buf0types.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict0types_8h.html">dict0types.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hash0hash_8h.html">hash0hash.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log0types_8h.html">log0types.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mtr0types_8h.html">mtr0types.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="os0file_8h.html">os0file.h</a>&quot;</span> <span class="comment">/* OS_FILE_LOG_BLOCK_SIZE */</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;univ.i&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0byte_8h.html">ut0byte.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ut0new_8h.html">ut0new.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">class </span><a class="code" href="classMetadataRecover.html">MetadataRecover</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">class </span><a class="code" href="classPersistentTableMetadata.html">PersistentTableMetadata</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#ifdef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">struct </span><a class="code" href="structrecv__addr__t.html">recv_addr_t</a>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/** list of tablespaces, that experienced an inplace DDL during a backup op */</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">extern</span> std::list&lt;std::pair&lt;space_id_t, lsn_t&gt;&gt; index_load_list;<span class="comment"></span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/** the last redo log flush len as seen by MEB */</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> backup_redo_log_flushed_lsn;<span class="comment"></span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/** TRUE when the redo log is being backed up */</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="log0recv_8cc.html#a217d5b6f6c48401e2196abf5f8b3a532">recv_is_making_a_backup</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/** Scans the log segment and n_bytes_scanned is set to the length of valid</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">log scanned.</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">@param[in]      buf                     buffer containing log data</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">@param[in]      buf_len                 data length in that buffer</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">@param[in,out]  scanned_lsn             lsn of buffer start, we return scanned</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">lsn</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">@param[in,out]  scanned_checkpoint_no   4 lowest bytes of the highest scanned</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">@param[out]     block_no        highest block no in scanned buffer.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">checkpoint number so far</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">@param[out]     n_bytes_scanned         how much we were able to scan, smaller</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">than buf_len if log data ended here</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">@param[out]     has_encrypted_log       set true, if buffer contains encrypted</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">redo log, set false otherwise */</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keywordtype">void</span> meb_scan_log_seg(<a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacebuf.html">buf</a>, ulint buf_len, <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> *scanned_lsn,</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                      uint32_t *scanned_checkpoint_no, uint32_t *block_no,</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                      ulint *n_bytes_scanned, <span class="keywordtype">bool</span> *has_encrypted_log);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/** Applies the hashed log records to the page, if the page lsn is less than the</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">lsn of a log record. This can be called when a buffer page has just been</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">read in, or also for a page already in the buffer pool.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">@param[in,out]  block           buffer block */</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/* TODO(Bug#31173032): Remove SUPPRESS_UBSAN_CLANG10. */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keywordtype">void</span> <a class="code" href="log0recv_8h.html#a58d1011ac6e208fb2892c6796de25bb5">recv_recover_page_func</a>(<a class="code" href="structbuf__block__t.html">buf_block_t</a> *block) <a class="code" href="my__compiler_8h.html#afee3bd053b6683211b4bb61cd713d1b9">SUPPRESS_UBSAN_CLANG10</a>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/** Wrapper for recv_recover_page_func().</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">Applies the hashed log records to the page, if the page lsn is less than the</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">lsn of a log record. This can be called when a buffer page has just been</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">read in, or also for a page already in the buffer pool.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">@param jri in: TRUE if just read in (the i/o handler calls this for</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">a freshly read page)</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">@param block in,out: the buffer block</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#define recv_recover_page(jri, block) recv_recover_page_func(block)</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">/** Applies log records in the hash table to a backup. */</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keywordtype">void</span> meb_apply_log_recs(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">/** Applies log records in the hash table to a backup using a callback</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">functions.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">@param[in]      apply_log_record_function  function for apply</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">@param[in]      wait_till_done_function    function for wait */</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keywordtype">void</span> meb_apply_log_recs_via_callback(</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">void</span> (*apply_log_record_function)(<a class="code" href="structrecv__addr__t.html">recv_addr_t</a> *),</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">void</span> (*wait_till_done_function)());</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">/** Applies a log record in the hash table to a backup.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">@param[in]      recv_addr       chain of log records</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">@param[in,out]  block           buffer block to apply the records to */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keywordtype">void</span> meb_apply_log_record(<a class="code" href="structrecv__addr__t.html">recv_addr_t</a> *recv_addr, <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/** Process a file name passed as an input</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">@param[in]      name            absolute path of tablespace file</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">@param[in]      space_id        the tablespace ID</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">@retval         true            if able to process file successfully.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">@retval         false           if unable to process the file */</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">void</span> meb_fil_name_process(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>, <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/** Scans log from a buffer and stores new log data to the parsing buffer.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">Parses and hashes the log records if new data found.  Unless</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">UNIV_HOTBACKUP is defined, this function will apply log records</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">automatically when the hash table becomes full.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">@param[in]      available_memory        we let the hash table of recs</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">to grow to this size, at the maximum</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">@param[in]      buf                     buffer containing a log</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">segment or garbage</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">@param[in]      len                     buffer length</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">@param[in]      checkpoint_lsn          latest checkpoint LSN</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">@param[in]      start_lsn               buffer start lsn</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">@param[in]      contiguous_lsn          it is known that all log</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">groups contain contiguous log data up to this lsn</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">@param[out]     group_scanned_lsn       scanning succeeded up to this lsn</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">@retval true    if limit_lsn has been reached, or not able to scan any</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">more in this log group</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">@retval false   otherwise */</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keywordtype">bool</span> meb_scan_log_recs(ulint available_memory, <span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacebuf.html">buf</a>, ulint len,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                       <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> checkpoint_lsn, <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> start_lsn,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                       <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> *contiguous_lsn, <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> *group_scanned_lsn);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">/** Creates an IORequest object for decrypting redo log with</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">Encryption::decrypt_log() method. If the encryption_info parameter is</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">a null pointer, then encryption information is read from</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">&quot;ib_logfile0&quot;. If the encryption_info parameter is not null, then it</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">should contain a copy of the encryption info stored in the header of</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">&quot;ib_logfile0&quot;.</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">@param[in,out]  encryption_request      an IORequest object</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">@param[in]      encryption_info         a copy of the encryption info in</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">the header of &quot;ib_logfile0&quot;, or a null pointer</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">@retval true    if the call succeeded</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">@retval false   otherwise */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keywordtype">bool</span> meb_read_log_encryption(<a class="code" href="classIORequest.html">IORequest</a> &amp;encryption_request,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                             <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *encryption_info = <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="log0recv_8cc.html#aefc150bb6e43114ad983c512d0a1847a">recv_check_log_header_checksum</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacebuf.html">buf</a>);<span class="comment"></span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">/** Check the 4-byte checksum to the trailer checksum field of a log</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">block.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">@param[in]      block   pointer to a log block</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">@return whether the checksum matches */</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="log0recv_8cc.html#a293f74bfcacf450499e91607238fdaec">log_block_checksum_is_ok</a>(<span class="keyword">const</span> <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *block);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/** Applies the hashed log records to the page, if the page lsn is less than the</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">lsn of a log record. This can be called when a buffer page has just been</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">read in, or also for a page already in the buffer pool.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">@param[in]      just_read_in    true if the IO handler calls this for a freshly</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">                                read page</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">@param[in,out]  block           buffer block */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">/* TODO(fix Bug#31173032): Remove SUPPRESS_UBSAN_CLANG10. */</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="keywordtype">void</span> <a class="code" href="log0recv_8h.html#a58d1011ac6e208fb2892c6796de25bb5">recv_recover_page_func</a>(<span class="keywordtype">bool</span> just_read_in,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                            <a class="code" href="structbuf__block__t.html">buf_block_t</a> *block) <a class="code" href="my__compiler_8h.html#afee3bd053b6683211b4bb61cd713d1b9">SUPPRESS_UBSAN_CLANG10</a>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">/** Wrapper for recv_recover_page_func().</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">Applies the hashed log records to the page, if the page lsn is less than the</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">lsn of a log record. This can be called when a buffer page has just been</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">read in, or also for a page already in the buffer pool.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">@param jri in: TRUE if just read in (the i/o handler calls this for</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">a freshly read page)</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">@param[in,out]  block   buffer block */</span></div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="log0recv_8h.html#acfba28514ab74f04842e7c79174a5754">  185</a></span>&#160;<span class="preprocessor">#define recv_recover_page(jri, block) recv_recover_page_func(jri, block)</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/** Frees the recovery system. */</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keywordtype">void</span> <a class="code" href="log0recv_8h.html#a1c01030420e934cac68e4e1d30f7eacb">recv_sys_free</a>();</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">/** Reset the state of the recovery system variables. */</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">void</span> <a class="code" href="log0recv_8h.html#a668254bd717009fed78b712dd36dd288">recv_sys_var_init</a>();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="preprocessor">#ifdef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/** Get the number of bytes used by all the heaps</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">@return number of bytes used */</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keywordtype">size_t</span> meb_heap_used();</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/** Returns true if recovery is currently running.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">@return recv_recovery_on */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;UNIV_INLINE</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="log0recv_8h.html#aae4ba022bb3d67e4bfe32fb12787d105">recv_recovery_is_on</a>() MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/** Start recovering from a redo log checkpoint.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">@see recv_recovery_from_checkpoint_finish</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">@param[in,out]  log             redo log</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">@param[in]      flush_lsn       FIL_PAGE_FILE_FLUSH_LSN</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">                                of first system tablespace page</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">@return error code or DB_SUCCESS */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<a class="code" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> <a class="code" href="log0recv_8h.html#abf7d2e23988548f8383f557ba01622cc">recv_recovery_from_checkpoint_start</a>(<a class="code" href="structlog__t.html">log_t</a> &amp;log, <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> flush_lsn)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/** Complete the recovery from the latest checkpoint.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">@param[in,out]  log             redo log</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">@param[in]      aborting        true if the server has to abort due to an error</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">@return recovered persistent metadata or nullptr if aborting*/</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<a class="code" href="classMetadataRecover.html">MetadataRecover</a> *<a class="code" href="log0recv_8h.html#ae98e757760774ff818b18826c7903e65">recv_recovery_from_checkpoint_finish</a>(<a class="code" href="structlog__t.html">log_t</a> &amp;log, <span class="keywordtype">bool</span> aborting)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    MY_ATTRIBUTE((warn_unused_result));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/** Creates the recovery system. */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="keywordtype">void</span> <a class="code" href="log0recv_8h.html#aa8deff3aaa827eaf79277aa37e8d68a2">recv_sys_create</a>();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/** Release recovery system mutexes. */</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keywordtype">void</span> <a class="code" href="log0recv_8h.html#a4b7fdec36562ed96ce3a591b253a0d14">recv_sys_close</a>();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">/** Inits the recovery system for a recovery operation.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">@param[in]      max_mem         Available memory in bytes */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keywordtype">void</span> <a class="code" href="log0recv_8h.html#a90fe9e72c81812fc8b1e204f0f88868e">recv_sys_init</a>(ulint max_mem);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/** Calculates the new value for lsn when more data is added to the log.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">@param[in]      lsn             Old LSN</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">@param[in]      len             This many bytes of data is added, log block</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">                                headers not included</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">@return LSN after data addition */</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="log0recv_8h.html#afcb7a7734fada63fe47a0e0ad91078f2">recv_calc_lsn_on_data_add</a>(<a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="xcom__base_8cc.html#a0ce0765b958f7289d206f0c78bd105c7">lsn</a>, uint64_t len);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">/** Empties the hash table of stored log records, applying them to appropriate</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">pages.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">@param[in,out]  log             Redo log</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">@param[in]      allow_ibuf      if true, ibuf operations are allowed during</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">                                the application; if false, no ibuf operations</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">                                are allowed, and after the application all</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">                                file pages are flushed to disk and invalidated</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">                                in buffer pool: this alternative means that</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">                                no new log records can be generated during</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">                                the application; the caller must in this case</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">                                own the log mutex */</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keywordtype">void</span> <a class="code" href="log0recv_8h.html#a7e3f94ecf3a90e95a61407134aa8d937">recv_apply_hashed_log_recs</a>(<a class="code" href="structlog__t.html">log_t</a> &amp;log, <span class="keywordtype">bool</span> allow_ibuf);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#if defined(UNIV_DEBUG) || defined(UNIV_HOTBACKUP)</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">/** Return string name of the redo log record type.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">@param[in]      type    record log record enum</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">@return string name of record log record */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="log0recv_8h.html#a163e6e1126f5cce54807617f782fdce5">get_mlog_string</a>(<a class="code" href="mtr0types_8h.html#a11a0f116bed9e1c33900d379901595d1">mlog_id_t</a> <a class="code" href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">type</a>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* UNIV_DEBUG || UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">/** Block of log record data */</span></div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="structrecv__data__t.html">  260</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structrecv__data__t.html">recv_data_t</a> {<span class="comment"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">  /** pointer to the next block or NULL.  The log record data</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">  is stored physically immediately after this struct, max amount</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">  RECV_DATA_BLOCK_SIZE bytes of it */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="structrecv__data__t.html#ab6a015c411be61e8ae16b19d94f56eb6">  265</a></span>&#160;  <a class="code" href="structrecv__data__t.html">recv_data_t</a> *<a class="code" href="structrecv__data__t.html#ab6a015c411be61e8ae16b19d94f56eb6">next</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;};</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">/** Stored log record struct */</span></div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="structrecv__t.html">  269</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structrecv__t.html">recv_t</a> {</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="structrecv__t.html#a65181b8a62cef55be9e35fbcfb93f3f6">  270</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="structrecv__t.html#a65181b8a62cef55be9e35fbcfb93f3f6">Node</a> = <a class="code" href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a>(<a class="code" href="structrecv__t.html">recv_t</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">  /** Log record type */</span></div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="structrecv__t.html#ae1bb14cf9117dd8d0da93e57b73e1a76">  273</a></span>&#160;  <a class="code" href="mtr0types_8h.html#a11a0f116bed9e1c33900d379901595d1">mlog_id_t</a> <a class="code" href="structrecv__t.html#ae1bb14cf9117dd8d0da93e57b73e1a76">type</a>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">  /** Log record body length in bytes */</span></div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structrecv__t.html#a69d0237899a01e7ea9fab13f64b2e0e0">  276</a></span>&#160;  ulint <a class="code" href="structrecv__t.html#a69d0237899a01e7ea9fab13f64b2e0e0">len</a>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">  /** Chain of blocks containing the log record body */</span></div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="structrecv__t.html#a17829561bf2b67145b22f4d39bcefce0">  279</a></span>&#160;  <a class="code" href="structrecv__data__t.html">recv_data_t</a> *<a class="code" href="structrecv__t.html#a17829561bf2b67145b22f4d39bcefce0">data</a>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">  /** Start lsn of the log segment written by the mtr which generated</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">  this log record: NOTE that this is not necessarily the start lsn of</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">  this log record */</span></div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="structrecv__t.html#a606bb2a4f5d1da08c6ef3cb68a793dd8">  284</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structrecv__t.html#a606bb2a4f5d1da08c6ef3cb68a793dd8">start_lsn</a>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">  /** End lsn of the log segment written by the mtr which generated</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">  this log record: NOTE that this is not necessarily the end LSN of</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">  this log record */</span></div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="structrecv__t.html#a6d9c2d059d014e6de06de716499731a3">  289</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structrecv__t.html#a6d9c2d059d014e6de06de716499731a3">end_lsn</a>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">  /** List node, list anchored in recv_addr_t */</span></div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="structrecv__t.html#ab302bb6caaa645d38e936416dd201f71">  292</a></span>&#160;  <a class="code" href="structrecv__t.html#a65181b8a62cef55be9e35fbcfb93f3f6">Node</a> <a class="code" href="structrecv__t.html#ab302bb6caaa645d38e936416dd201f71">rec_list</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;};</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">/** States of recv_addr_t */</span></div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23">  296</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23">recv_addr_state</a> {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">  /** not yet processed */</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a8a687e630d4e57fc748070019093dec8">  299</a></span>&#160;  <a class="code" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a8a687e630d4e57fc748070019093dec8">RECV_NOT_PROCESSED</a>,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">  /** page is being read */</span></div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a0a458a804a1684b65ea4b3e8e22dbd5c">  302</a></span>&#160;  <a class="code" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a0a458a804a1684b65ea4b3e8e22dbd5c">RECV_BEING_READ</a>,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">  /** log records are being applied on the page */</span></div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a7c0771bb68a174a932be6f9a89f1cafe">  305</a></span>&#160;  <a class="code" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a7c0771bb68a174a932be6f9a89f1cafe">RECV_BEING_PROCESSED</a>,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">  /** log records have been applied on the page */</span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23acb50921c1c4973d7607e5f3b623d5213">  308</a></span>&#160;  <a class="code" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23acb50921c1c4973d7607e5f3b623d5213">RECV_PROCESSED</a>,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">  /** log records have been discarded because the tablespace</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">  does not exist */</span></div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a0ae034d49b5d1503de1423c685b08964">  312</a></span>&#160;  <a class="code" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a0ae034d49b5d1503de1423c685b08964">RECV_DISCARDED</a></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;};</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">/** Hashed page file address struct */</span></div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="structrecv__addr__t.html">  316</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structrecv__addr__t.html">recv_addr_t</a> {</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="structrecv__addr__t.html#ab5c02dd498932c6b23f0a1160c81b95a">  317</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classList.html">List</a> = <a class="code" href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a>(<a class="code" href="structrecv__t.html">recv_t</a>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">  /** recovery state of the page */</span></div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="structrecv__addr__t.html#a0eaa1990f23976546dab58ab2ce76b4d">  320</a></span>&#160;  <a class="code" href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23">recv_addr_state</a> <a class="code" href="structrecv__addr__t.html#a0eaa1990f23976546dab58ab2ce76b4d">state</a>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">  /** Space ID */</span></div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="structrecv__addr__t.html#a3f01776486daaa8e77949f47e4b175cd">  323</a></span>&#160;  <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> <a class="code" href="structrecv__addr__t.html#a3f01776486daaa8e77949f47e4b175cd">space</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">  /** Page number */</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="structrecv__addr__t.html#a08a06d26d0a6b330717dbcc1afe78cac">  326</a></span>&#160;  <a class="code" href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a> <a class="code" href="structrecv__addr__t.html#a08a06d26d0a6b330717dbcc1afe78cac">page_no</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">  /** List of log records for this page */</span></div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="structrecv__addr__t.html#a51b76807fb5ac3a4d30a63ea17994034">  329</a></span>&#160;  <a class="code" href="classList.html">List</a> <a class="code" href="structrecv__addr__t.html#a51b76807fb5ac3a4d30a63ea17994034">rec_list</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;};</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">// Forward declaration</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacedblwr.html">dblwr</a> {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keyword">namespace </span><a class="code" href="gr__message__service__example_8cc.html#a5f6952c4cd6aa54a9e3093ab06b7eaed">recv</a> {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="keyword">class </span>DBLWR;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}  <span class="comment">// namespace dblwr</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/** Class to parse persistent dynamic metadata redo log, store and</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">merge them and apply them to in-memory table objects finally */</span></div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classMetadataRecover.html">  341</a></span>&#160;<span class="keyword">class </span><a class="code" href="classMetadataRecover.html">MetadataRecover</a> {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keyword">using</span> <a class="code" href="classMetadataRecover.html#a745bee131cd6b11e7aa2c46157c572e2">PersistentTables</a> = std::map&lt;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a>, <a class="code" href="classPersistentTableMetadata.html">PersistentTableMetadata</a> *, std::less&lt;table_id_t&gt;,</div><div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classMetadataRecover.html#a745bee131cd6b11e7aa2c46157c572e2">  344</a></span>&#160;      <a class="code" href="classut__allocator.html">ut_allocator&lt;std::pair&lt;const table_id_t, PersistentTableMetadata *&gt;</a>&gt;&gt;;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">  /** Default constructor */</span></div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="classMetadataRecover.html#a2a65fe67e279ada42f5dc54c61de5bdd">  348</a></span>&#160;  <a class="code" href="classMetadataRecover.html#a2a65fe67e279ada42f5dc54c61de5bdd">MetadataRecover</a>() UNIV_NOTHROW {}</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">  /** Destructor */</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  ~<a class="code" href="classMetadataRecover.html">MetadataRecover</a>();</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">  /** Parse a dynamic metadata redo log of a table and store</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">  the metadata locally</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">  @param[in]    id      table id</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">  @param[in]    version table dynamic metadata version</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">  @param[in]    ptr     redo log start</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">  @param[in]    end     end of redo log</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">  @retval ptr to next redo log record, nullptr if this log record</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">  was truncated */</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *parseMetadataLog(table_id_t <span class="keywordtype">id</span>, uint64_t <a class="code" href="persisted__variable_8cc.html#a7b9a5d15d5aee3e2250719b5fcd930cc">version</a>, <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *ptr, <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">  /** Apply the collected persistent dynamic metadata to in-memory</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">  table objects */</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordtype">void</span> apply();</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">  /** Store the collected persistent dynamic metadata to</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">  mysql.innodb_dynamic_metadata */</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="group__sdi__storage__ops.html#gaf429fe9590395a37eae49c761b8ccd5d">store</a>();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">  /** If there is any metadata to be applied</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">  @return       true if any metadata to be applied, otherwise false */</span></div><div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="classMetadataRecover.html#a0e0b89a360602d9a788d4f532cbc0dc5">  373</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classMetadataRecover.html#a0e0b89a360602d9a788d4f532cbc0dc5">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (m_tables.empty()); }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">  /** Get the dynamic metadata of a specified table,</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">  create a new one if not exist</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">  @param[in]    id      table id</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">  @return the metadata of the specified table */</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  PersistentTableMetadata *getMetadata(table_id_t <span class="keywordtype">id</span>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">  /** Map used to store and merge persistent dynamic metadata */</span></div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="classMetadataRecover.html#ac3bbc402839705639d7d88ee60329e81">  384</a></span>&#160;  <a class="code" href="classMetadataRecover.html#a745bee131cd6b11e7aa2c46157c572e2">PersistentTables</a> <a class="code" href="classMetadataRecover.html#ac3bbc402839705639d7d88ee60329e81">m_tables</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;};</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">/** Recovery system data structure */</span></div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html">  388</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structrecv__sys__t.html">recv_sys_t</a> {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keyword">using</span> <a class="code" href="structrecv__sys__t.html#a7f9bbbb623f03d1fc2e31631c00bcea3">Pages</a> =</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      std::unordered_map&lt;page_no_t, recv_addr_t *, std::hash&lt;page_no_t&gt;,</div><div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a7f9bbbb623f03d1fc2e31631c00bcea3">  391</a></span>&#160;                         std::equal_to&lt;page_no_t&gt;&gt;;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">  /** Every space has its own heap and pages that belong to it. */</span></div><div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Space.html">  394</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structrecv__sys__t_1_1Space.html">Space</a> {<span class="comment"></span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">    /** Constructor</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">    @param[in,out]      heap    Heap to use for the log records. */</span></div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Space.html#ad1294eeb4c5dea72476639829652327f">  397</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="structrecv__sys__t_1_1Space.html#ad1294eeb4c5dea72476639829652327f">Space</a>(<a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *heap) : m_heap(heap), m_pages() {}</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">    /** Default constructor */</span></div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Space.html#ae9f3aee69c96e20400721dc2d48bb125">  400</a></span>&#160;    <a class="code" href="structrecv__sys__t_1_1Space.html#ae9f3aee69c96e20400721dc2d48bb125">Space</a>() : m_heap(), m_pages() {}</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">    /** Memory heap of log records and file addresses */</span></div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Space.html#a951ef2dcf40323cb72a04fc56a5f0d70">  403</a></span>&#160;    <a class="code" href="structmem__block__info__t.html">mem_heap_t</a> *<a class="code" href="structrecv__sys__t_1_1Space.html#a951ef2dcf40323cb72a04fc56a5f0d70">m_heap</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">    /** Pages that need to be recovered */</span></div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Space.html#a2120acc0760a0db2921f478b3452cacf">  406</a></span>&#160;    <a class="code" href="structrecv__sys__t.html#a7f9bbbb623f03d1fc2e31631c00bcea3">Pages</a> <a class="code" href="structrecv__sys__t_1_1Space.html#a2120acc0760a0db2921f478b3452cacf">m_pages</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  };</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a500b34cddb668735f531d693bc5822dc">  409</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="structrecv__sys__t.html#a500b34cddb668735f531d693bc5822dc">Missing_Ids</a> = std::set&lt;space_id_t&gt;;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keyword">using</span> <a class="code" href="structrecv__sys__t.html#a84b8af4dad05799c4f0a2c5a147651f4">Spaces</a> = std::unordered_map&lt;space_id_t, Space, std::hash&lt;space_id_t&gt;,</div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a84b8af4dad05799c4f0a2c5a147651f4">  412</a></span>&#160;                                    std::equal_to&lt;space_id_t&gt;&gt;;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">/* Recovery encryption information */</span></div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Encryption__Key.html">  415</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structrecv__sys__t_1_1Encryption__Key.html">Encryption_Key</a> {<span class="comment"></span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">    /** Tablespace ID */</span></div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Encryption__Key.html#a2790276559fa2a6a7fad3a456ad6e2cd">  417</a></span>&#160;    <a class="code" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> <a class="code" href="structrecv__sys__t_1_1Encryption__Key.html#a2790276559fa2a6a7fad3a456ad6e2cd">space_id</a>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">    /** Encryption key */</span></div><div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Encryption__Key.html#a16e1a72a45f32409bf6fcb584e1d5839">  420</a></span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structrecv__sys__t_1_1Encryption__Key.html#a16e1a72a45f32409bf6fcb584e1d5839">ptr</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">    /** Encryption IV */</span></div><div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="structrecv__sys__t_1_1Encryption__Key.html#ab983d2a844a688b329cda150a633e11d">  423</a></span>&#160;    <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structrecv__sys__t_1_1Encryption__Key.html#ab983d2a844a688b329cda150a633e11d">iv</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  };</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keyword">using</span> <a class="code" href="structrecv__sys__t.html#a0aa844a4283cffb3de3654cb96dfbf4a">Encryption_Keys</a> = std::vector&lt;Encryption_Key&gt;;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#ifndef UNIV_HOTBACKUP</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">  /*!&lt; mutex protecting the fields apply_log_recs, n_addrs, and the</span></div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a0aa844a4283cffb3de3654cb96dfbf4a">  431</a></span>&#160;<span class="comment">  state field in each recv_addr struct */</span></div><div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a2830f474cfc53aaacc975e006e383477">  432</a></span>&#160;  ib_mutex_t <a class="code" href="structrecv__sys__t.html#a2830f474cfc53aaacc975e006e383477">mutex</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">  /** mutex coordinating flushing between recv_writer_thread and</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">  the recovery thread. */</span></div><div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a86ed00c2d4d35daa171820cdd683d234">  436</a></span>&#160;  ib_mutex_t <a class="code" href="structrecv__sys__t.html#a86ed00c2d4d35daa171820cdd683d234">writer_mutex</a>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">  /** event to activate page cleaner threads */</span></div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a9245b7ccd3edeed7969cd3aa5a2ae38a">  439</a></span>&#160;  <a class="code" href="structos__event.html">os_event_t</a> <a class="code" href="structrecv__sys__t.html#a9245b7ccd3edeed7969cd3aa5a2ae38a">flush_start</a>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">  /** event to signal that the page cleaner has finished the request */</span></div><div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a48e1dd85aa0821f6563a1b0d2304e9e4">  442</a></span>&#160;  <a class="code" href="structos__event.html">os_event_t</a> <a class="code" href="structrecv__sys__t.html#a48e1dd85aa0821f6563a1b0d2304e9e4">flush_end</a>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">  /** type of the flush request. BUF_FLUSH_LRU: flush end of LRU,</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">  keeping free blocks.  BUF_FLUSH_LIST: flush all of blocks. */</span></div><div class="line"><a name="l00446"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#ac2ea71e716921ba7ba65f6812b6dc242">  446</a></span>&#160;  <a class="code" href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73c">buf_flush_t</a> <a class="code" href="structrecv__sys__t.html#ac2ea71e716921ba7ba65f6812b6dc242">flush_type</a>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#else  </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordtype">bool</span> apply_file_operations;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !UNIV_HOTBACKUP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">  /** This is true when log rec application to pages is allowed;</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">  this flag tells the i/o-handler if it should do log record</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">  application */</span></div><div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#af407d086ded931112aef0885980d8753">  455</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structrecv__sys__t.html#af407d086ded931112aef0885980d8753">apply_log_recs</a>;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">  /** This is true when a log rec application batch is running */</span></div><div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a68f674d8c4615763dae31b62892d4cc1">  458</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structrecv__sys__t.html#a68f674d8c4615763dae31b62892d4cc1">apply_batch_on</a>;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">  /** Possible incomplete last recovered log block */</span></div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#ae82126b4a52c0381af095de9e7b221df">  461</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structrecv__sys__t.html#ae82126b4a52c0381af095de9e7b221df">last_block</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">  /** The nonaligned start address of the preceding buffer */</span></div><div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a519ec5cfe5b184e0a20669f3053ddc80">  464</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structrecv__sys__t.html#a519ec5cfe5b184e0a20669f3053ddc80">last_block_buf_start</a>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  /** Buffer for parsing log records */</span></div><div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#ae77e60974deb261cce14b0a23e22a462">  467</a></span>&#160;  <a class="code" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *<a class="code" href="structrecv__sys__t.html#ae77e60974deb261cce14b0a23e22a462">buf</a>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">  /** Size of the parsing buffer */</span></div><div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#abc72c7464d252005373339b45c76c69c">  470</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structrecv__sys__t.html#abc72c7464d252005373339b45c76c69c">buf_len</a>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">  /** Amount of data in buf */</span></div><div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a191c40abd684db003545a20fbd09f8a3">  473</a></span>&#160;  ulint <a class="code" href="structrecv__sys__t.html#a191c40abd684db003545a20fbd09f8a3">len</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">  /** This is the lsn from which we were able to start parsing</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">  log records and adding them to the hash table; zero if a suitable</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">  start point not found yet */</span></div><div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#ad67b8de775623f5f34b1de2e1ba33a5d">  478</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structrecv__sys__t.html#ad67b8de775623f5f34b1de2e1ba33a5d">parse_start_lsn</a>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">  /** Checkpoint lsn that was used during recovery (read from file). */</span></div><div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#aaea4303af6dafd50d2a3552741ccb947">  481</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structrecv__sys__t.html#aaea4303af6dafd50d2a3552741ccb947">checkpoint_lsn</a>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">  /** Number of data bytes to ignore until we reach checkpoint_lsn. */</span></div><div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a4014836dab620b430b0ee5290f10fdee">  484</a></span>&#160;  ulint <a class="code" href="structrecv__sys__t.html#a4014836dab620b430b0ee5290f10fdee">bytes_to_ignore_before_checkpoint</a>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">  /** The log data has been scanned up to this lsn */</span></div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#adb4cfc8ab10b6afd88a073f95b0a2400">  487</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structrecv__sys__t.html#adb4cfc8ab10b6afd88a073f95b0a2400">scanned_lsn</a>;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">  /** The log data has been scanned up to this checkpoint</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">  number (lowest 4 bytes) */</span></div><div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#ad4409688f2484ffaf75aa412a08cd700">  491</a></span>&#160;  ulint <a class="code" href="structrecv__sys__t.html#ad4409688f2484ffaf75aa412a08cd700">scanned_checkpoint_no</a>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">  /** Start offset of non-parsed log records in buf */</span></div><div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a751b651315d1d80514465ea1981ea661">  494</a></span>&#160;  ulint <a class="code" href="structrecv__sys__t.html#a751b651315d1d80514465ea1981ea661">recovered_offset</a>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">  /** The log records have been parsed up to this lsn */</span></div><div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a649e1638724016bb8c99df1dc7d2d4b5">  497</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structrecv__sys__t.html#a649e1638724016bb8c99df1dc7d2d4b5">recovered_lsn</a>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">  /** The previous value of recovered_lsn - before we parsed the last mtr.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">  It is equal to recovered_lsn before we parsed any mtr. This is used to</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">  find moments in which recovered_lsn moves to the next block in which case</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">  we should update the last_block_first_rec_group (described below). */</span></div><div class="line"><a name="l00503"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a3f2589ac148b87cd187acc23228c8936">  503</a></span>&#160;  <a class="code" href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a> <a class="code" href="structrecv__sys__t.html#a3f2589ac148b87cd187acc23228c8936">previous_recovered_lsn</a>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">  /** Tracks what should be the proper value of first_rec_group field in the</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">  header of the block to which recovered_lsn belongs. It might be also zero,</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">  in which case it means we do not know. */</span></div><div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#afcad5df4717f73d1f5bd8646ac5704f4">  508</a></span>&#160;  uint32_t <a class="code" href="structrecv__sys__t.html#afcad5df4717f73d1f5bd8646ac5704f4">last_block_first_rec_group</a>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">  /** Set when finding a corrupt log block or record, or there</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">  is a log parsing buffer overflow */</span></div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#ad26d80cbdb01b8a8c0d86874d51a1937">  512</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structrecv__sys__t.html#ad26d80cbdb01b8a8c0d86874d51a1937">found_corrupt_log</a>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">  /** Set when an inconsistency with the file system contents</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">  is detected during log scan or apply */</span></div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a1b91895324f75d36a3e02033fb7d714c">  516</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structrecv__sys__t.html#a1b91895324f75d36a3e02033fb7d714c">found_corrupt_fs</a>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">  /** If the recovery is from a cloned database. */</span></div><div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a91ff6c3ca04ecb2f52bd7052fb4a3452">  519</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structrecv__sys__t.html#a91ff6c3ca04ecb2f52bd7052fb4a3452">is_cloned_db</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">  /** Recovering from MEB. */</span></div><div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a6a75daa2753ef5ada6fa6569c77d4119">  522</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structrecv__sys__t.html#a6a75daa2753ef5ada6fa6569c77d4119">is_meb_recovery</a>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">  /** Doublewrite buffer state before MEB recovery starts. We restore to this</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">  state after MEB recovery completes and disable the doublewrite buffer during</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">  MEB recovery. */</span></div><div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#acb0107dfa00d2f181e9d7f21d0c9a80d">  527</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structrecv__sys__t.html#acb0107dfa00d2f181e9d7f21d0c9a80d">dblwr_state</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">  /** Hash table of pages, indexed by SpaceID. */</span></div><div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a5da0b8cf297b9d1135dd6a1c1e5a580e">  530</a></span>&#160;  <a class="code" href="structrecv__sys__t.html#a84b8af4dad05799c4f0a2c5a147651f4">Spaces</a> *<a class="code" href="structrecv__sys__t.html#a5da0b8cf297b9d1135dd6a1c1e5a580e">spaces</a>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">  /** Number of not processed hashed file addresses in the hash table */</span></div><div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a1642c85182586110d5673477bc7e3e57">  533</a></span>&#160;  ulint <a class="code" href="structrecv__sys__t.html#a1642c85182586110d5673477bc7e3e57">n_addrs</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">  /** Doublewrite buffer pages, destroyed after recovery completes */</span></div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a4bc39543dc4fb920a0494d10522d3aa7">  536</a></span>&#160;  <a class="code" href="classdblwr_1_1recv_1_1DBLWR.html">dblwr::recv::DBLWR</a> *<a class="code" href="structrecv__sys__t.html#a4bc39543dc4fb920a0494d10522d3aa7">dblwr</a>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">  /** We store and merge all table persistent data here during</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">  scanning redo logs */</span></div><div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#af7a9f0ce81f8cc765b5e05327d0801f1">  540</a></span>&#160;  <a class="code" href="classMetadataRecover.html">MetadataRecover</a> *<a class="code" href="structrecv__sys__t.html#af7a9f0ce81f8cc765b5e05327d0801f1">metadata_recover</a>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">  /** Encryption Key information per tablespace ID */</span></div><div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#acaeb29c6eb002b2dfe934e56bbd9f843">  543</a></span>&#160;  <a class="code" href="structrecv__sys__t.html#a0aa844a4283cffb3de3654cb96dfbf4a">Encryption_Keys</a> *<a class="code" href="structrecv__sys__t.html#acaeb29c6eb002b2dfe934e56bbd9f843">keys</a>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">  /** Tablespace IDs that were ignored during redo log apply. */</span></div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#aa97db6225b4da13620de81115ae6db49">  546</a></span>&#160;  <a class="code" href="structrecv__sys__t.html#a500b34cddb668735f531d693bc5822dc">Missing_Ids</a> <a class="code" href="structrecv__sys__t.html#aa97db6225b4da13620de81115ae6db49">missing_ids</a>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">  /** Tablespace IDs that were explicitly deleted. */</span></div><div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="structrecv__sys__t.html#a0d71e31a81ccd4ef287edee400c95759">  549</a></span>&#160;  <a class="code" href="structrecv__sys__t.html#a500b34cddb668735f531d693bc5822dc">Missing_Ids</a> <a class="code" href="structrecv__sys__t.html#a0d71e31a81ccd4ef287edee400c95759">deleted</a>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;};</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">/** The recovery system */</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="keyword">extern</span> <a class="code" href="structrecv__sys__t.html">recv_sys_t</a> *<a class="code" href="log0recv_8h.html#a933290104831a9ad6f97c2952b420963">recv_sys</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">/** TRUE when applying redo log records during crash recovery; FALSE</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">otherwise.  Note that this is FALSE while a background thread is</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">rolling back incomplete transactions. */</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">bool</span> <a class="code" href="log0recv_8h.html#aac7270d128627843f3e29fcbb6ad2efc">recv_recovery_on</a>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">/** If the following is TRUE, the buffer pool file pages must be invalidated</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">after recovery and no ibuf operations are allowed; this becomes TRUE if</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">the log record hash table becomes too full, and log records must be merged</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">to file pages already before the recovery is finished: in this case no</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">ibuf operations are allowed, as they could modify the pages read in the</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">buffer pool before the pages have been recovered to the up-to-date state.</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">TRUE means that recovery is running and no operations on the log files</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">are allowed yet: the variable name is misleading. */</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="log0recv_8h.html#a01f1d73d69c48b660fad6bb70845d585">recv_no_ibuf_operations</a>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">/** TRUE when recv_init_crash_recovery() has been called. */</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="log0recv_8h.html#a9d324462617f012dd12af8878c664d25">recv_needed_recovery</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">/** TRUE if buf_page_is_corrupted() should check if the log sequence</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">number (FIL_PAGE_LSN) is in the future.  Initially FALSE, and set by</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">recv_recovery_from_checkpoint_start(). */</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="log0recv_8h.html#ab1318c168c3d867990f89363ac2b584f">recv_lsn_checks_on</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">/** Size of the parsing buffer; it must accommodate RECV_SCAN_SIZE many</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">times! */</span></div><div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="log0recv_8h.html#a3bd85278988f4344ef4d339eb491ec18">  581</a></span>&#160;<span class="preprocessor">#define RECV_PARSING_BUF_SIZE (2 * 1024 * 1024)</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">/** Size of block reads when the log groups are scanned forward to do a</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">roll-forward */</span></div><div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="log0recv_8h.html#ab45e229060b2dd637a566107fc7806c7">  585</a></span>&#160;<span class="preprocessor">#define RECV_SCAN_SIZE (4 * UNIV_PAGE_SIZE)</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">/** This many frames must be left free in the buffer pool when we scan</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">the log and store the scanned log records in the buffer pool: we will</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">use these free frames to read in pages when we start applying the</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">log records to the database. */</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="keyword">extern</span> ulint <a class="code" href="log0recv_8h.html#ab67bbbbc46b800ca54edf37d35f2cc60">recv_n_pool_free_frames</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">/** A list of tablespaces for which (un)encryption process was not</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">completed before crash. */</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="keyword">extern</span> std::list&lt;space_id_t&gt; <a class="code" href="log0recv_8h.html#ad9ba418e575659f066cb0c099ce73196">recv_encr_ts_list</a>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="preprocessor">#include &quot;log0recv.ic&quot;</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classut__allocator_html"><div class="ttname"><a href="classut__allocator.html">ut_allocator</a></div><div class="ttdoc">Allocator class for allocating memory from inside std::* containers. </div><div class="ttdef"><b>Definition:</b> ut0new.h:572</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Encryption__Key_html_ab983d2a844a688b329cda150a633e11d"><div class="ttname"><a href="structrecv__sys__t_1_1Encryption__Key.html#ab983d2a844a688b329cda150a633e11d">recv_sys_t::Encryption_Key::iv</a></div><div class="ttdeci">byte * iv</div><div class="ttdoc">Encryption IV. </div><div class="ttdef"><b>Definition:</b> log0recv.h:423</div></div>
<div class="ttc" id="structrecv__sys__t_html_af407d086ded931112aef0885980d8753"><div class="ttname"><a href="structrecv__sys__t.html#af407d086ded931112aef0885980d8753">recv_sys_t::apply_log_recs</a></div><div class="ttdeci">bool apply_log_recs</div><div class="ttdoc">This is true when log rec application to pages is allowed; this flag tells the i/o-handler if it shou...</div><div class="ttdef"><b>Definition:</b> log0recv.h:455</div></div>
<div class="ttc" id="structrecv__t_html_a69d0237899a01e7ea9fab13f64b2e0e0"><div class="ttname"><a href="structrecv__t.html#a69d0237899a01e7ea9fab13f64b2e0e0">recv_t::len</a></div><div class="ttdeci">ulint len</div><div class="ttdoc">Log record body length in bytes. </div><div class="ttdef"><b>Definition:</b> log0recv.h:276</div></div>
<div class="ttc" id="log0recv_8h_html_a933290104831a9ad6f97c2952b420963"><div class="ttname"><a href="log0recv_8h.html#a933290104831a9ad6f97c2952b420963">recv_sys</a></div><div class="ttdeci">recv_sys_t * recv_sys</div><div class="ttdoc">The recovery system. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:91</div></div>
<div class="ttc" id="structrecv__addr__t_html_a0eaa1990f23976546dab58ab2ce76b4d"><div class="ttname"><a href="structrecv__addr__t.html#a0eaa1990f23976546dab58ab2ce76b4d">recv_addr_t::state</a></div><div class="ttdeci">recv_addr_state state</div><div class="ttdoc">recovery state of the page </div><div class="ttdef"><b>Definition:</b> log0recv.h:320</div></div>
<div class="ttc" id="structrecv__sys__t_html_a68f674d8c4615763dae31b62892d4cc1"><div class="ttname"><a href="structrecv__sys__t.html#a68f674d8c4615763dae31b62892d4cc1">recv_sys_t::apply_batch_on</a></div><div class="ttdeci">bool apply_batch_on</div><div class="ttdoc">This is true when a log rec application batch is running. </div><div class="ttdef"><b>Definition:</b> log0recv.h:458</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Space_html_a951ef2dcf40323cb72a04fc56a5f0d70"><div class="ttname"><a href="structrecv__sys__t_1_1Space.html#a951ef2dcf40323cb72a04fc56a5f0d70">recv_sys_t::Space::m_heap</a></div><div class="ttdeci">mem_heap_t * m_heap</div><div class="ttdoc">Memory heap of log records and file addresses. </div><div class="ttdef"><b>Definition:</b> log0recv.h:403</div></div>
<div class="ttc" id="log0recv_8h_html_a90fe9e72c81812fc8b1e204f0f88868e"><div class="ttname"><a href="log0recv_8h.html#a90fe9e72c81812fc8b1e204f0f88868e">recv_sys_init</a></div><div class="ttdeci">void recv_sys_init(ulint max_mem)</div><div class="ttdoc">Inits the recovery system for a recovery operation. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:584</div></div>
<div class="ttc" id="classPersistentTableMetadata_html"><div class="ttname"><a href="classPersistentTableMetadata.html">PersistentTableMetadata</a></div><div class="ttdoc">Persistent dynamic metadata for a table. </div><div class="ttdef"><b>Definition:</b> dict0mem.h:2260</div></div>
<div class="ttc" id="api0api_8h_html_a3a920291a017c14a72331c818adf2265"><div class="ttname"><a href="api0api_8h.html#a3a920291a017c14a72331c818adf2265">page_no_t</a></div><div class="ttdeci">uint32 page_no_t</div><div class="ttdoc">Page number. </div><div class="ttdef"><b>Definition:</b> api0api.h:57</div></div>
<div class="ttc" id="log0types_8h_html_aa7401e3081ffb8ee7e8fb182647f475c"><div class="ttname"><a href="log0types_8h.html#aa7401e3081ffb8ee7e8fb182647f475c">lsn_t</a></div><div class="ttdeci">uint64_t lsn_t</div><div class="ttdoc">Type used for all log sequence number storage and arithmetics. </div><div class="ttdef"><b>Definition:</b> log0types.h:60</div></div>
<div class="ttc" id="log0recv_8h_html_a01f1d73d69c48b660fad6bb70845d585"><div class="ttname"><a href="log0recv_8h.html#a01f1d73d69c48b660fad6bb70845d585">recv_no_ibuf_operations</a></div><div class="ttdeci">bool recv_no_ibuf_operations</div><div class="ttdoc">If the following is TRUE, the buffer pool file pages must be invalidated after recovery and no ibuf o...</div><div class="ttdef"><b>Definition:</b> log0recv.cc:165</div></div>
<div class="ttc" id="group__sdi__storage__ops_html_gaf429fe9590395a37eae49c761b8ccd5d"><div class="ttname"><a href="group__sdi__storage__ops.html#gaf429fe9590395a37eae49c761b8ccd5d">dd::sdi::store</a></div><div class="ttdeci">bool store(THD *thd, const Table *tp)</div><div class="ttdoc">Stores the SDI for a table. </div><div class="ttdef"><b>Definition:</b> sdi.cc:606</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Space_html_ad1294eeb4c5dea72476639829652327f"><div class="ttname"><a href="structrecv__sys__t_1_1Space.html#ad1294eeb4c5dea72476639829652327f">recv_sys_t::Space::Space</a></div><div class="ttdeci">Space(mem_heap_t *heap)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> log0recv.h:397</div></div>
<div class="ttc" id="structrecv__sys__t_html_a4bc39543dc4fb920a0494d10522d3aa7"><div class="ttname"><a href="structrecv__sys__t.html#a4bc39543dc4fb920a0494d10522d3aa7">recv_sys_t::dblwr</a></div><div class="ttdeci">dblwr::recv::DBLWR * dblwr</div><div class="ttdoc">Doublewrite buffer pages, destroyed after recovery completes. </div><div class="ttdef"><b>Definition:</b> log0recv.h:536</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Encryption__Key_html"><div class="ttname"><a href="structrecv__sys__t_1_1Encryption__Key.html">recv_sys_t::Encryption_Key</a></div><div class="ttdef"><b>Definition:</b> log0recv.h:415</div></div>
<div class="ttc" id="structrecv__sys__t_html_a86ed00c2d4d35daa171820cdd683d234"><div class="ttname"><a href="structrecv__sys__t.html#a86ed00c2d4d35daa171820cdd683d234">recv_sys_t::writer_mutex</a></div><div class="ttdeci">ib_mutex_t writer_mutex</div><div class="ttdoc">mutex coordinating flushing between recv_writer_thread and the recovery thread. </div><div class="ttdef"><b>Definition:</b> log0recv.h:436</div></div>
<div class="ttc" id="log0recv_8h_html_a7e3f94ecf3a90e95a61407134aa8d937"><div class="ttname"><a href="log0recv_8h.html#a7e3f94ecf3a90e95a61407134aa8d937">recv_apply_hashed_log_recs</a></div><div class="ttdeci">void recv_apply_hashed_log_recs(log_t &amp;log, bool allow_ibuf)</div><div class="ttdoc">Empties the hash table of stored log records, applying them to appropriate pages. ...</div><div class="ttdef"><b>Definition:</b> log0recv.cc:1217</div></div>
<div class="ttc" id="structbuf__block__t_html"><div class="ttname"><a href="structbuf__block__t.html">buf_block_t</a></div><div class="ttdoc">The buffer control block structure. </div><div class="ttdef"><b>Definition:</b> buf0buf.h:1324</div></div>
<div class="ttc" id="structrecv__sys__t_html_a6a75daa2753ef5ada6fa6569c77d4119"><div class="ttname"><a href="structrecv__sys__t.html#a6a75daa2753ef5ada6fa6569c77d4119">recv_sys_t::is_meb_recovery</a></div><div class="ttdeci">bool is_meb_recovery</div><div class="ttdoc">Recovering from MEB. </div><div class="ttdef"><b>Definition:</b> log0recv.h:522</div></div>
<div class="ttc" id="structrecv__sys__t_html_ae77e60974deb261cce14b0a23e22a462"><div class="ttname"><a href="structrecv__sys__t.html#ae77e60974deb261cce14b0a23e22a462">recv_sys_t::buf</a></div><div class="ttdeci">byte * buf</div><div class="ttdoc">Buffer for parsing log records. </div><div class="ttdef"><b>Definition:</b> log0recv.h:467</div></div>
<div class="ttc" id="structrecv__addr__t_html_a51b76807fb5ac3a4d30a63ea17994034"><div class="ttname"><a href="structrecv__addr__t.html#a51b76807fb5ac3a4d30a63ea17994034">recv_addr_t::rec_list</a></div><div class="ttdeci">List rec_list</div><div class="ttdoc">List of log records for this page. </div><div class="ttdef"><b>Definition:</b> log0recv.h:329</div></div>
<div class="ttc" id="mtr0types_8h_html_a11a0f116bed9e1c33900d379901595d1"><div class="ttname"><a href="mtr0types_8h.html#a11a0f116bed9e1c33900d379901595d1">mlog_id_t</a></div><div class="ttdeci">mlog_id_t</div><div class="ttdef"><b>Definition:</b> mtr0types.h:62</div></div>
<div class="ttc" id="structrecv__sys__t_html_adb4cfc8ab10b6afd88a073f95b0a2400"><div class="ttname"><a href="structrecv__sys__t.html#adb4cfc8ab10b6afd88a073f95b0a2400">recv_sys_t::scanned_lsn</a></div><div class="ttdeci">lsn_t scanned_lsn</div><div class="ttdoc">The log data has been scanned up to this lsn. </div><div class="ttdef"><b>Definition:</b> log0recv.h:487</div></div>
<div class="ttc" id="classMetadataRecover_html_ac3bbc402839705639d7d88ee60329e81"><div class="ttname"><a href="classMetadataRecover.html#ac3bbc402839705639d7d88ee60329e81">MetadataRecover::m_tables</a></div><div class="ttdeci">PersistentTables m_tables</div><div class="ttdoc">Map used to store and merge persistent dynamic metadata. </div><div class="ttdef"><b>Definition:</b> log0recv.h:384</div></div>
<div class="ttc" id="my__compiler_8h_html_afee3bd053b6683211b4bb61cd713d1b9"><div class="ttname"><a href="my__compiler_8h.html#afee3bd053b6683211b4bb61cd713d1b9">SUPPRESS_UBSAN_CLANG10</a></div><div class="ttdeci">#define SUPPRESS_UBSAN_CLANG10</div><div class="ttdef"><b>Definition:</b> my_compiler.h:139</div></div>
<div class="ttc" id="structlog__t_html"><div class="ttname"><a href="structlog__t.html">log_t</a></div><div class="ttdoc">Redo log - single data structure with state of the redo log system. </div><div class="ttdef"><b>Definition:</b> log0types.h:133</div></div>
<div class="ttc" id="os0file_8h_html"><div class="ttname"><a href="os0file_8h.html">os0file.h</a></div><div class="ttdoc">The interface to the operating system file io. </div></div>
<div class="ttc" id="structrecv__data__t_html_ab6a015c411be61e8ae16b19d94f56eb6"><div class="ttname"><a href="structrecv__data__t.html#ab6a015c411be61e8ae16b19d94f56eb6">recv_data_t::next</a></div><div class="ttdeci">recv_data_t * next</div><div class="ttdoc">pointer to the next block or NULL. </div><div class="ttdef"><b>Definition:</b> log0recv.h:265</div></div>
<div class="ttc" id="structrecv__sys__t_html_afcad5df4717f73d1f5bd8646ac5704f4"><div class="ttname"><a href="structrecv__sys__t.html#afcad5df4717f73d1f5bd8646ac5704f4">recv_sys_t::last_block_first_rec_group</a></div><div class="ttdeci">uint32_t last_block_first_rec_group</div><div class="ttdoc">Tracks what should be the proper value of first_rec_group field in the header of the block to which r...</div><div class="ttdef"><b>Definition:</b> log0recv.h:508</div></div>
<div class="ttc" id="log0recv_8h_html_ae98e757760774ff818b18826c7903e65"><div class="ttname"><a href="log0recv_8h.html#ae98e757760774ff818b18826c7903e65">recv_recovery_from_checkpoint_finish</a></div><div class="ttdeci">MetadataRecover * recv_recovery_from_checkpoint_finish(log_t &amp;log, bool aborting)</div><div class="ttdoc">Complete the recovery from the latest checkpoint. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:3951</div></div>
<div class="ttc" id="log0recv_8h_html_ab1318c168c3d867990f89363ac2b584f"><div class="ttname"><a href="log0recv_8h.html#ab1318c168c3d867990f89363ac2b584f">recv_lsn_checks_on</a></div><div class="ttdeci">bool recv_lsn_checks_on</div><div class="ttdoc">TRUE if buf_page_is_corrupted() should check if the log sequence number (FIL_PAGE_LSN) is in the futu...</div><div class="ttdef"><b>Definition:</b> log0recv.cc:154</div></div>
<div class="ttc" id="structrecv__sys__t_html_a3f2589ac148b87cd187acc23228c8936"><div class="ttname"><a href="structrecv__sys__t.html#a3f2589ac148b87cd187acc23228c8936">recv_sys_t::previous_recovered_lsn</a></div><div class="ttdeci">lsn_t previous_recovered_lsn</div><div class="ttdoc">The previous value of recovered_lsn - before we parsed the last mtr. </div><div class="ttdef"><b>Definition:</b> log0recv.h:503</div></div>
<div class="ttc" id="log0recv_8h_html_ab67bbbbc46b800ca54edf37d35f2cc60"><div class="ttname"><a href="log0recv_8h.html#ab67bbbbc46b800ca54edf37d35f2cc60">recv_n_pool_free_frames</a></div><div class="ttdeci">ulint recv_n_pool_free_frames</div><div class="ttdoc">This many frames must be left free in the buffer pool when we scan the log and store the scanned log ...</div><div class="ttdef"><b>Definition:</b> log0recv.cc:194</div></div>
<div class="ttc" id="classdblwr_1_1recv_1_1DBLWR_html"><div class="ttname"><a href="classdblwr_1_1recv_1_1DBLWR.html">dblwr::recv::DBLWR</a></div><div class="ttdoc">Redo recovery configuration. </div><div class="ttdef"><b>Definition:</b> buf0dblwr.h:270</div></div>
<div class="ttc" id="namespacebuf_html"><div class="ttname"><a href="namespacebuf.html">buf</a></div><div class="ttdef"><b>Definition:</b> buf0block_hint.cc:29</div></div>
<div class="ttc" id="structrecv__t_html_a65181b8a62cef55be9e35fbcfb93f3f6"><div class="ttname"><a href="structrecv__t.html#a65181b8a62cef55be9e35fbcfb93f3f6">recv_t::Node</a></div><div class="ttdeci">UT_LIST_NODE_T(recv_t) Node</div><div class="ttdef"><b>Definition:</b> log0recv.h:270</div></div>
<div class="ttc" id="structrecv__sys__t_html_a191c40abd684db003545a20fbd09f8a3"><div class="ttname"><a href="structrecv__sys__t.html#a191c40abd684db003545a20fbd09f8a3">recv_sys_t::len</a></div><div class="ttdeci">ulint len</div><div class="ttdoc">Amount of data in buf. </div><div class="ttdef"><b>Definition:</b> log0recv.h:473</div></div>
<div class="ttc" id="structrecv__addr__t_html_a3f01776486daaa8e77949f47e4b175cd"><div class="ttname"><a href="structrecv__addr__t.html#a3f01776486daaa8e77949f47e4b175cd">recv_addr_t::space</a></div><div class="ttdeci">space_id_t space</div><div class="ttdoc">Space ID. </div><div class="ttdef"><b>Definition:</b> log0recv.h:323</div></div>
<div class="ttc" id="structmem__block__info__t_html"><div class="ttname"><a href="structmem__block__info__t.html">mem_block_info_t</a></div><div class="ttdoc">The info structure stored at the beginning of a heap block. </div><div class="ttdef"><b>Definition:</b> mem0mem.h:349</div></div>
<div class="ttc" id="log0recv_8h_html_ad9ba418e575659f066cb0c099ce73196"><div class="ttname"><a href="log0recv_8h.html#ad9ba418e575659f066cb0c099ce73196">recv_encr_ts_list</a></div><div class="ttdeci">std::list&lt; space_id_t &gt; recv_encr_ts_list</div><div class="ttdoc">A list of tablespaces for which (un)encryption process was not completed before crash. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:81</div></div>
<div class="ttc" id="structrecv__sys__t_html_ad67b8de775623f5f34b1de2e1ba33a5d"><div class="ttname"><a href="structrecv__sys__t.html#ad67b8de775623f5f34b1de2e1ba33a5d">recv_sys_t::parse_start_lsn</a></div><div class="ttdeci">lsn_t parse_start_lsn</div><div class="ttdoc">This is the lsn from which we were able to start parsing log records and adding them to the hash tabl...</div><div class="ttdef"><b>Definition:</b> log0recv.h:478</div></div>
<div class="ttc" id="classMetadataRecover_html_a0e0b89a360602d9a788d4f532cbc0dc5"><div class="ttname"><a href="classMetadataRecover.html#a0e0b89a360602d9a788d4f532cbc0dc5">MetadataRecover::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">If there is any metadata to be applied. </div><div class="ttdef"><b>Definition:</b> log0recv.h:373</div></div>
<div class="ttc" id="xcom__base_8cc_html_a0ce0765b958f7289d206f0c78bd105c7"><div class="ttname"><a href="xcom__base_8cc.html#a0ce0765b958f7289d206f0c78bd105c7">lsn</a></div><div class="ttdeci">static uint64_t lsn</div><div class="ttdef"><b>Definition:</b> xcom_base.cc:426</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Encryption__Key_html_a2790276559fa2a6a7fad3a456ad6e2cd"><div class="ttname"><a href="structrecv__sys__t_1_1Encryption__Key.html#a2790276559fa2a6a7fad3a456ad6e2cd">recv_sys_t::Encryption_Key::space_id</a></div><div class="ttdeci">space_id_t space_id</div><div class="ttdoc">Tablespace ID. </div><div class="ttdef"><b>Definition:</b> log0recv.h:417</div></div>
<div class="ttc" id="structrecv__sys__t_html_a9245b7ccd3edeed7969cd3aa5a2ae38a"><div class="ttname"><a href="structrecv__sys__t.html#a9245b7ccd3edeed7969cd3aa5a2ae38a">recv_sys_t::flush_start</a></div><div class="ttdeci">os_event_t flush_start</div><div class="ttdoc">event to activate page cleaner threads </div><div class="ttdef"><b>Definition:</b> log0recv.h:439</div></div>
<div class="ttc" id="classIORequest_html"><div class="ttname"><a href="classIORequest.html">IORequest</a></div><div class="ttdoc">The IO Context that is passed down to the low level IO code. </div><div class="ttdef"><b>Definition:</b> os0file.h:256</div></div>
<div class="ttc" id="structrecv__sys__t_html_a84b8af4dad05799c4f0a2c5a147651f4"><div class="ttname"><a href="structrecv__sys__t.html#a84b8af4dad05799c4f0a2c5a147651f4">recv_sys_t::Spaces</a></div><div class="ttdeci">std::unordered_map&lt; space_id_t, Space, std::hash&lt; space_id_t &gt;, std::equal_to&lt; space_id_t &gt; &gt; Spaces</div><div class="ttdef"><b>Definition:</b> log0recv.h:412</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Encryption__Key_html_a16e1a72a45f32409bf6fcb584e1d5839"><div class="ttname"><a href="structrecv__sys__t_1_1Encryption__Key.html#a16e1a72a45f32409bf6fcb584e1d5839">recv_sys_t::Encryption_Key::ptr</a></div><div class="ttdeci">byte * ptr</div><div class="ttdoc">Encryption key. </div><div class="ttdef"><b>Definition:</b> log0recv.h:420</div></div>
<div class="ttc" id="structrecv__sys__t_html_a7f9bbbb623f03d1fc2e31631c00bcea3"><div class="ttname"><a href="structrecv__sys__t.html#a7f9bbbb623f03d1fc2e31631c00bcea3">recv_sys_t::Pages</a></div><div class="ttdeci">std::unordered_map&lt; page_no_t, recv_addr_t *, std::hash&lt; page_no_t &gt;, std::equal_to&lt; page_no_t &gt; &gt; Pages</div><div class="ttdef"><b>Definition:</b> log0recv.h:391</div></div>
<div class="ttc" id="structrecv__sys__t_html_a48e1dd85aa0821f6563a1b0d2304e9e4"><div class="ttname"><a href="structrecv__sys__t.html#a48e1dd85aa0821f6563a1b0d2304e9e4">recv_sys_t::flush_end</a></div><div class="ttdeci">os_event_t flush_end</div><div class="ttdoc">event to signal that the page cleaner has finished the request </div><div class="ttdef"><b>Definition:</b> log0recv.h:442</div></div>
<div class="ttc" id="structrecv__t_html_ab302bb6caaa645d38e936416dd201f71"><div class="ttname"><a href="structrecv__t.html#ab302bb6caaa645d38e936416dd201f71">recv_t::rec_list</a></div><div class="ttdeci">Node rec_list</div><div class="ttdoc">List node, list anchored in recv_addr_t. </div><div class="ttdef"><b>Definition:</b> log0recv.h:292</div></div>
<div class="ttc" id="log0recv_8h_html_a3f5aa2ca6270b43214c955cb53517e23a0ae034d49b5d1503de1423c685b08964"><div class="ttname"><a href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a0ae034d49b5d1503de1423c685b08964">RECV_DISCARDED</a></div><div class="ttdoc">log records have been discarded because the tablespace does not exist </div><div class="ttdef"><b>Definition:</b> log0recv.h:312</div></div>
<div class="ttc" id="dict0types_8h_html"><div class="ttname"><a href="dict0types_8h.html">dict0types.h</a></div><div class="ttdoc">Data dictionary global types. </div></div>
<div class="ttc" id="structrecv__sys__t_html_abc72c7464d252005373339b45c76c69c"><div class="ttname"><a href="structrecv__sys__t.html#abc72c7464d252005373339b45c76c69c">recv_sys_t::buf_len</a></div><div class="ttdeci">size_t buf_len</div><div class="ttdoc">Size of the parsing buffer. </div><div class="ttdef"><b>Definition:</b> log0recv.h:470</div></div>
<div class="ttc" id="log0types_8h_html"><div class="ttname"><a href="log0types_8h.html">log0types.h</a></div><div class="ttdoc">Redo log types. </div></div>
<div class="ttc" id="log0recv_8h_html_a163e6e1126f5cce54807617f782fdce5"><div class="ttname"><a href="log0recv_8h.html#a163e6e1126f5cce54807617f782fdce5">get_mlog_string</a></div><div class="ttdeci">const char * get_mlog_string(mlog_id_t type)</div><div class="ttdoc">Return string name of the redo log record type. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:4044</div></div>
<div class="ttc" id="log0recv_8h_html_a3f5aa2ca6270b43214c955cb53517e23acb50921c1c4973d7607e5f3b623d5213"><div class="ttname"><a href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23acb50921c1c4973d7607e5f3b623d5213">RECV_PROCESSED</a></div><div class="ttdoc">log records have been applied on the page </div><div class="ttdef"><b>Definition:</b> log0recv.h:308</div></div>
<div class="ttc" id="structrecv__sys__t_html_a649e1638724016bb8c99df1dc7d2d4b5"><div class="ttname"><a href="structrecv__sys__t.html#a649e1638724016bb8c99df1dc7d2d4b5">recv_sys_t::recovered_lsn</a></div><div class="ttdeci">lsn_t recovered_lsn</div><div class="ttdoc">The log records have been parsed up to this lsn. </div><div class="ttdef"><b>Definition:</b> log0recv.h:497</div></div>
<div class="ttc" id="classList_html"><div class="ttname"><a href="classList.html">List</a></div><div class="ttdef"><b>Definition:</b> auth_common.h:57</div></div>
<div class="ttc" id="structrecv__data__t_html"><div class="ttname"><a href="structrecv__data__t.html">recv_data_t</a></div><div class="ttdoc">Block of log record data. </div><div class="ttdef"><b>Definition:</b> log0recv.h:260</div></div>
<div class="ttc" id="namespacerules__table__service_html_a71d6ca457fe4ae5d5151f92c06cc3fd3"><div class="ttname"><a href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">rules_table_service::end</a></div><div class="ttdeci">Cursor end()</div><div class="ttdoc">A past-the-end Cursor. </div><div class="ttdef"><b>Definition:</b> rules_table_service.cc:188</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Space_html_ae9f3aee69c96e20400721dc2d48bb125"><div class="ttname"><a href="structrecv__sys__t_1_1Space.html#ae9f3aee69c96e20400721dc2d48bb125">recv_sys_t::Space::Space</a></div><div class="ttdeci">Space()</div><div class="ttdoc">Default constructor. </div><div class="ttdef"><b>Definition:</b> log0recv.h:400</div></div>
<div class="ttc" id="structrecv__t_html_a606bb2a4f5d1da08c6ef3cb68a793dd8"><div class="ttname"><a href="structrecv__t.html#a606bb2a4f5d1da08c6ef3cb68a793dd8">recv_t::start_lsn</a></div><div class="ttdeci">lsn_t start_lsn</div><div class="ttdoc">Start lsn of the log segment written by the mtr which generated this log record: NOTE that this is no...</div><div class="ttdef"><b>Definition:</b> log0recv.h:284</div></div>
<div class="ttc" id="log0recv_8h_html_a3f5aa2ca6270b43214c955cb53517e23a0a458a804a1684b65ea4b3e8e22dbd5c"><div class="ttname"><a href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a0a458a804a1684b65ea4b3e8e22dbd5c">RECV_BEING_READ</a></div><div class="ttdoc">page is being read </div><div class="ttdef"><b>Definition:</b> log0recv.h:302</div></div>
<div class="ttc" id="log0recv_8h_html_abf7d2e23988548f8383f557ba01622cc"><div class="ttname"><a href="log0recv_8h.html#abf7d2e23988548f8383f557ba01622cc">recv_recovery_from_checkpoint_start</a></div><div class="ttdeci">dberr_t recv_recovery_from_checkpoint_start(log_t &amp;log, lsn_t flush_lsn)</div><div class="ttdoc">Start recovering from a redo log checkpoint. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:3666</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Space_html"><div class="ttname"><a href="structrecv__sys__t_1_1Space.html">recv_sys_t::Space</a></div><div class="ttdoc">Every space has its own heap and pages that belong to it. </div><div class="ttdef"><b>Definition:</b> log0recv.h:394</div></div>
<div class="ttc" id="db0err_8h_html_a6fdd08971b32ee513b20967238f1654d"><div class="ttname"><a href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a></div><div class="ttdeci">dberr_t</div><div class="ttdef"><b>Definition:</b> db0err.h:38</div></div>
<div class="ttc" id="buf0types_8h_html"><div class="ttname"><a href="buf0types_8h.html">buf0types.h</a></div><div class="ttdoc">The database buffer pool global types for the directory. </div></div>
<div class="ttc" id="structrecv__sys__t_html_a1b91895324f75d36a3e02033fb7d714c"><div class="ttname"><a href="structrecv__sys__t.html#a1b91895324f75d36a3e02033fb7d714c">recv_sys_t::found_corrupt_fs</a></div><div class="ttdeci">bool found_corrupt_fs</div><div class="ttdoc">Set when an inconsistency with the file system contents is detected during log scan or apply...</div><div class="ttdef"><b>Definition:</b> log0recv.h:516</div></div>
<div class="ttc" id="structrecv__sys__t_html_ac2ea71e716921ba7ba65f6812b6dc242"><div class="ttname"><a href="structrecv__sys__t.html#ac2ea71e716921ba7ba65f6812b6dc242">recv_sys_t::flush_type</a></div><div class="ttdeci">buf_flush_t flush_type</div><div class="ttdoc">type of the flush request. </div><div class="ttdef"><b>Definition:</b> log0recv.h:446</div></div>
<div class="ttc" id="ut0new_8h_html"><div class="ttname"><a href="ut0new_8h.html">ut0new.h</a></div><div class="ttdoc">Instrumented memory allocator. </div></div>
<div class="ttc" id="log0recv_8h_html_a668254bd717009fed78b712dd36dd288"><div class="ttname"><a href="log0recv_8h.html#a668254bd717009fed78b712dd36dd288">recv_sys_var_init</a></div><div class="ttdeci">void recv_sys_var_init()</div><div class="ttdoc">Reset the state of the recovery system variables. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:506</div></div>
<div class="ttc" id="log0recv_8h_html_afcb7a7734fada63fe47a0e0ad91078f2"><div class="ttname"><a href="log0recv_8h.html#afcb7a7734fada63fe47a0e0ad91078f2">recv_calc_lsn_on_data_add</a></div><div class="ttdeci">lsn_t recv_calc_lsn_on_data_add(lsn_t lsn, uint64_t len)</div><div class="ttdoc">Calculates the new value for lsn when more data is added to the log. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:234</div></div>
<div class="ttc" id="log0recv_8h_html_a3f5aa2ca6270b43214c955cb53517e23"><div class="ttname"><a href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23">recv_addr_state</a></div><div class="ttdeci">recv_addr_state</div><div class="ttdoc">States of recv_addr_t. </div><div class="ttdef"><b>Definition:</b> log0recv.h:296</div></div>
<div class="ttc" id="sslopt-case_8h_html_ae00b773898ac853cec38cdf7a08b8e89"><div class="ttname"><a href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a></div><div class="ttdeci">case opt name</div><div class="ttdef"><b>Definition:</b> sslopt-case.h:32</div></div>
<div class="ttc" id="gr__message__service__example_8cc_html_a5f6952c4cd6aa54a9e3093ab06b7eaed"><div class="ttname"><a href="gr__message__service__example_8cc.html#a5f6952c4cd6aa54a9e3093ab06b7eaed">recv</a></div><div class="ttdeci">mysql_service_status_t recv(const char *tag, const unsigned char *data, size_t data_length) noexcept</div><div class="ttdef"><b>Definition:</b> gr_message_service_example.cc:38</div></div>
<div class="ttc" id="structrecv__t_html_a6d9c2d059d014e6de06de716499731a3"><div class="ttname"><a href="structrecv__t.html#a6d9c2d059d014e6de06de716499731a3">recv_t::end_lsn</a></div><div class="ttdeci">lsn_t end_lsn</div><div class="ttdoc">End lsn of the log segment written by the mtr which generated this log record: NOTE that this is not ...</div><div class="ttdef"><b>Definition:</b> log0recv.h:289</div></div>
<div class="ttc" id="log0recv_8h_html_a9d324462617f012dd12af8878c664d25"><div class="ttname"><a href="log0recv_8h.html#a9d324462617f012dd12af8878c664d25">recv_needed_recovery</a></div><div class="ttdeci">bool recv_needed_recovery</div><div class="ttdoc">TRUE when recv_init_crash_recovery() has been called. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:149</div></div>
<div class="ttc" id="structrecv__sys__t_html_aaea4303af6dafd50d2a3552741ccb947"><div class="ttname"><a href="structrecv__sys__t.html#aaea4303af6dafd50d2a3552741ccb947">recv_sys_t::checkpoint_lsn</a></div><div class="ttdeci">lsn_t checkpoint_lsn</div><div class="ttdoc">Checkpoint lsn that was used during recovery (read from file). </div><div class="ttdef"><b>Definition:</b> log0recv.h:481</div></div>
<div class="ttc" id="structrecv__sys__t_html_a0d71e31a81ccd4ef287edee400c95759"><div class="ttname"><a href="structrecv__sys__t.html#a0d71e31a81ccd4ef287edee400c95759">recv_sys_t::deleted</a></div><div class="ttdeci">Missing_Ids deleted</div><div class="ttdoc">Tablespace IDs that were explicitly deleted. </div><div class="ttdef"><b>Definition:</b> log0recv.h:549</div></div>
<div class="ttc" id="ut0byte_8h_html"><div class="ttname"><a href="ut0byte_8h.html">ut0byte.h</a></div><div class="ttdoc">Utilities for byte operations. </div></div>
<div class="ttc" id="structrecv__sys__t_html_ad4409688f2484ffaf75aa412a08cd700"><div class="ttname"><a href="structrecv__sys__t.html#ad4409688f2484ffaf75aa412a08cd700">recv_sys_t::scanned_checkpoint_no</a></div><div class="ttdeci">ulint scanned_checkpoint_no</div><div class="ttdoc">The log data has been scanned up to this checkpoint number (lowest 4 bytes) </div><div class="ttdef"><b>Definition:</b> log0recv.h:491</div></div>
<div class="ttc" id="namespacebinary__log_1_1transaction_1_1compression_html_a22a3b5d8096f4c73ced74c0b668df0be"><div class="ttname"><a href="namespacebinary__log_1_1transaction_1_1compression.html#a22a3b5d8096f4c73ced74c0b668df0be">binary_log::transaction::compression::type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> base.h:36</div></div>
<div class="ttc" id="log0recv_8h_html_a3f5aa2ca6270b43214c955cb53517e23a7c0771bb68a174a932be6f9a89f1cafe"><div class="ttname"><a href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a7c0771bb68a174a932be6f9a89f1cafe">RECV_BEING_PROCESSED</a></div><div class="ttdoc">log records are being applied on the page </div><div class="ttdef"><b>Definition:</b> log0recv.h:305</div></div>
<div class="ttc" id="log0recv_8cc_html_a217d5b6f6c48401e2196abf5f8b3a532"><div class="ttname"><a href="log0recv_8cc.html#a217d5b6f6c48401e2196abf5f8b3a532">recv_is_making_a_backup</a></div><div class="ttdeci">bool recv_is_making_a_backup</div><div class="ttdoc">true When the redo log is being backed up </div><div class="ttdef"><b>Definition:</b> log0recv.cc:168</div></div>
<div class="ttc" id="persisted__variable_8cc_html_a7b9a5d15d5aee3e2250719b5fcd930cc"><div class="ttname"><a href="persisted__variable_8cc.html#a7b9a5d15d5aee3e2250719b5fcd930cc">version</a></div><div class="ttdeci">const string version(&quot;\ersion\)</div></div>
<div class="ttc" id="dict0types_8h_html_ac877e05c194a7c04fa5921c88cdcb1f7"><div class="ttname"><a href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a></div><div class="ttdeci">ib_id_t table_id_t</div><div class="ttdoc">Table or partition identifier (unique within an InnoDB instance). </div><div class="ttdef"><b>Definition:</b> dict0types.h:215</div></div>
<div class="ttc" id="structrecv__addr__t_html_a08a06d26d0a6b330717dbcc1afe78cac"><div class="ttname"><a href="structrecv__addr__t.html#a08a06d26d0a6b330717dbcc1afe78cac">recv_addr_t::page_no</a></div><div class="ttdeci">page_no_t page_no</div><div class="ttdoc">Page number. </div><div class="ttdef"><b>Definition:</b> log0recv.h:326</div></div>
<div class="ttc" id="structrecv__t_html_a17829561bf2b67145b22f4d39bcefce0"><div class="ttname"><a href="structrecv__t.html#a17829561bf2b67145b22f4d39bcefce0">recv_t::data</a></div><div class="ttdeci">recv_data_t * data</div><div class="ttdoc">Chain of blocks containing the log record body. </div><div class="ttdef"><b>Definition:</b> log0recv.h:279</div></div>
<div class="ttc" id="api0api_8h_html_a02e9c11b4a9783f4b0b89fcf060f8f28"><div class="ttname"><a href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a></div><div class="ttdeci">uint32 space_id_t</div><div class="ttdoc">Tablespace identifier. </div><div class="ttdef"><b>Definition:</b> api0api.h:59</div></div>
<div class="ttc" id="structrecv__sys__t_html_af7a9f0ce81f8cc765b5e05327d0801f1"><div class="ttname"><a href="structrecv__sys__t.html#af7a9f0ce81f8cc765b5e05327d0801f1">recv_sys_t::metadata_recover</a></div><div class="ttdeci">MetadataRecover * metadata_recover</div><div class="ttdoc">We store and merge all table persistent data here during scanning redo logs. </div><div class="ttdef"><b>Definition:</b> log0recv.h:540</div></div>
<div class="ttc" id="structrecv__sys__t_html_a4014836dab620b430b0ee5290f10fdee"><div class="ttname"><a href="structrecv__sys__t.html#a4014836dab620b430b0ee5290f10fdee">recv_sys_t::bytes_to_ignore_before_checkpoint</a></div><div class="ttdeci">ulint bytes_to_ignore_before_checkpoint</div><div class="ttdoc">Number of data bytes to ignore until we reach checkpoint_lsn. </div><div class="ttdef"><b>Definition:</b> log0recv.h:484</div></div>
<div class="ttc" id="namespacedblwr_html"><div class="ttname"><a href="namespacedblwr.html">dblwr</a></div><div class="ttdef"><b>Definition:</b> buf0dblwr.cc:70</div></div>
<div class="ttc" id="structrecv__sys__t_html_a5da0b8cf297b9d1135dd6a1c1e5a580e"><div class="ttname"><a href="structrecv__sys__t.html#a5da0b8cf297b9d1135dd6a1c1e5a580e">recv_sys_t::spaces</a></div><div class="ttdeci">Spaces * spaces</div><div class="ttdoc">Hash table of pages, indexed by SpaceID. </div><div class="ttdef"><b>Definition:</b> log0recv.h:530</div></div>
<div class="ttc" id="structrecv__sys__t_html_acaeb29c6eb002b2dfe934e56bbd9f843"><div class="ttname"><a href="structrecv__sys__t.html#acaeb29c6eb002b2dfe934e56bbd9f843">recv_sys_t::keys</a></div><div class="ttdeci">Encryption_Keys * keys</div><div class="ttdoc">Encryption Key information per tablespace ID. </div><div class="ttdef"><b>Definition:</b> log0recv.h:543</div></div>
<div class="ttc" id="structrecv__sys__t_html_ae82126b4a52c0381af095de9e7b221df"><div class="ttname"><a href="structrecv__sys__t.html#ae82126b4a52c0381af095de9e7b221df">recv_sys_t::last_block</a></div><div class="ttdeci">byte * last_block</div><div class="ttdoc">Possible incomplete last recovered log block. </div><div class="ttdef"><b>Definition:</b> log0recv.h:461</div></div>
<div class="ttc" id="innodb__utility_8h_html_af8087cee2d41561b30b9d1903cebfb3d"><div class="ttname"><a href="innodb__utility_8h.html#af8087cee2d41561b30b9d1903cebfb3d">UT_LIST_BASE_NODE_T</a></div><div class="ttdeci">#define UT_LIST_BASE_NODE_T(TYPE)</div><div class="ttdef"><b>Definition:</b> innodb_utility.h:47</div></div>
<div class="ttc" id="classMetadataRecover_html_a2a65fe67e279ada42f5dc54c61de5bdd"><div class="ttname"><a href="classMetadataRecover.html#a2a65fe67e279ada42f5dc54c61de5bdd">MetadataRecover::MetadataRecover</a></div><div class="ttdeci">MetadataRecover() 1</div><div class="ttdoc">Default constructor. </div><div class="ttdef"><b>Definition:</b> log0recv.h:348</div></div>
<div class="ttc" id="log0recv_8h_html_a1c01030420e934cac68e4e1d30f7eacb"><div class="ttname"><a href="log0recv_8h.html#a1c01030420e934cac68e4e1d30f7eacb">recv_sys_free</a></div><div class="ttdeci">void recv_sys_free()</div><div class="ttdoc">Frees the recovery system. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:831</div></div>
<div class="ttc" id="classMetadataRecover_html_a745bee131cd6b11e7aa2c46157c572e2"><div class="ttname"><a href="classMetadataRecover.html#a745bee131cd6b11e7aa2c46157c572e2">MetadataRecover::PersistentTables</a></div><div class="ttdeci">std::map&lt; table_id_t, PersistentTableMetadata *, std::less&lt; table_id_t &gt;, ut_allocator&lt; std::pair&lt; const table_id_t, PersistentTableMetadata * &gt; &gt;&gt; PersistentTables</div><div class="ttdef"><b>Definition:</b> log0recv.h:344</div></div>
<div class="ttc" id="classMetadataRecover_html"><div class="ttname"><a href="classMetadataRecover.html">MetadataRecover</a></div><div class="ttdoc">Class to parse persistent dynamic metadata redo log, store and merge them and apply them to in-memory...</div><div class="ttdef"><b>Definition:</b> log0recv.h:341</div></div>
<div class="ttc" id="log0recv_8h_html_aae4ba022bb3d67e4bfe32fb12787d105"><div class="ttname"><a href="log0recv_8h.html#aae4ba022bb3d67e4bfe32fb12787d105">recv_recovery_is_on</a></div><div class="ttdeci">UNIV_INLINE bool recv_recovery_is_on()</div><div class="ttdoc">Returns true if recovery is currently running. </div></div>
<div class="ttc" id="structrecv__sys__t_html_a1642c85182586110d5673477bc7e3e57"><div class="ttname"><a href="structrecv__sys__t.html#a1642c85182586110d5673477bc7e3e57">recv_sys_t::n_addrs</a></div><div class="ttdeci">ulint n_addrs</div><div class="ttdoc">Number of not processed hashed file addresses in the hash table. </div><div class="ttdef"><b>Definition:</b> log0recv.h:533</div></div>
<div class="ttc" id="structrecv__sys__t_html_a2830f474cfc53aaacc975e006e383477"><div class="ttname"><a href="structrecv__sys__t.html#a2830f474cfc53aaacc975e006e383477">recv_sys_t::mutex</a></div><div class="ttdeci">ib_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> log0recv.h:432</div></div>
<div class="ttc" id="structos__event_html"><div class="ttname"><a href="structos__event.html">os_event</a></div><div class="ttdoc">InnoDB condition variable. </div><div class="ttdef"><b>Definition:</b> os0event.cc:66</div></div>
<div class="ttc" id="structrecv__t_html_ae1bb14cf9117dd8d0da93e57b73e1a76"><div class="ttname"><a href="structrecv__t.html#ae1bb14cf9117dd8d0da93e57b73e1a76">recv_t::type</a></div><div class="ttdeci">mlog_id_t type</div><div class="ttdoc">Log record type. </div><div class="ttdef"><b>Definition:</b> log0recv.h:273</div></div>
<div class="ttc" id="buf0types_8h_html_a7b34944f1921a4bf7c1a28abfb86d73c"><div class="ttname"><a href="buf0types_8h.html#a7b34944f1921a4bf7c1a28abfb86d73c">buf_flush_t</a></div><div class="ttdeci">buf_flush_t</div><div class="ttdoc">Flags for flush types. </div><div class="ttdef"><b>Definition:</b> buf0types.h:65</div></div>
<div class="ttc" id="log0recv_8h_html_a58d1011ac6e208fb2892c6796de25bb5"><div class="ttname"><a href="log0recv_8h.html#a58d1011ac6e208fb2892c6796de25bb5">recv_recover_page_func</a></div><div class="ttdeci">void recv_recover_page_func(bool just_read_in, buf_block_t *block) SUPPRESS_UBSAN_CLANG10</div><div class="ttdoc">Applies the hashed log records to the page, if the page lsn is less than the lsn of a log record...</div><div class="ttdef"><b>Definition:</b> log0recv.cc:2407</div></div>
<div class="ttc" id="structrecv__sys__t_html_ad26d80cbdb01b8a8c0d86874d51a1937"><div class="ttname"><a href="structrecv__sys__t.html#ad26d80cbdb01b8a8c0d86874d51a1937">recv_sys_t::found_corrupt_log</a></div><div class="ttdeci">bool found_corrupt_log</div><div class="ttdoc">Set when finding a corrupt log block or record, or there is a log parsing buffer overflow. </div><div class="ttdef"><b>Definition:</b> log0recv.h:512</div></div>
<div class="ttc" id="structrecv__sys__t_1_1Space_html_a2120acc0760a0db2921f478b3452cacf"><div class="ttname"><a href="structrecv__sys__t_1_1Space.html#a2120acc0760a0db2921f478b3452cacf">recv_sys_t::Space::m_pages</a></div><div class="ttdeci">Pages m_pages</div><div class="ttdoc">Pages that need to be recovered. </div><div class="ttdef"><b>Definition:</b> log0recv.h:406</div></div>
<div class="ttc" id="log0recv_8h_html_aa8deff3aaa827eaf79277aa37e8d68a2"><div class="ttname"><a href="log0recv_8h.html#aa8deff3aaa827eaf79277aa37e8d68a2">recv_sys_create</a></div><div class="ttdeci">void recv_sys_create()</div><div class="ttdoc">Creates the recovery system. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:389</div></div>
<div class="ttc" id="structrecv__sys__t_html_a519ec5cfe5b184e0a20669f3053ddc80"><div class="ttname"><a href="structrecv__sys__t.html#a519ec5cfe5b184e0a20669f3053ddc80">recv_sys_t::last_block_buf_start</a></div><div class="ttdeci">byte * last_block_buf_start</div><div class="ttdoc">The nonaligned start address of the preceding buffer. </div><div class="ttdef"><b>Definition:</b> log0recv.h:464</div></div>
<div class="ttc" id="structrecv__t_html"><div class="ttname"><a href="structrecv__t.html">recv_t</a></div><div class="ttdoc">Stored log record struct. </div><div class="ttdef"><b>Definition:</b> log0recv.h:269</div></div>
<div class="ttc" id="structrecv__sys__t_html_a500b34cddb668735f531d693bc5822dc"><div class="ttname"><a href="structrecv__sys__t.html#a500b34cddb668735f531d693bc5822dc">recv_sys_t::Missing_Ids</a></div><div class="ttdeci">std::set&lt; space_id_t &gt; Missing_Ids</div><div class="ttdef"><b>Definition:</b> log0recv.h:409</div></div>
<div class="ttc" id="structrecv__sys__t_html_acb0107dfa00d2f181e9d7f21d0c9a80d"><div class="ttname"><a href="structrecv__sys__t.html#acb0107dfa00d2f181e9d7f21d0c9a80d">recv_sys_t::dblwr_state</a></div><div class="ttdeci">bool dblwr_state</div><div class="ttdoc">Doublewrite buffer state before MEB recovery starts. </div><div class="ttdef"><b>Definition:</b> log0recv.h:527</div></div>
<div class="ttc" id="hash0hash_8h_html"><div class="ttname"><a href="hash0hash_8h.html">hash0hash.h</a></div><div class="ttdoc">The simple hash table utility. </div></div>
<div class="ttc" id="libmysql_2authentication__win_2common_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">Blob class. </div><div class="ttdef"><b>Definition:</b> common.h:159</div></div>
<div class="ttc" id="structrecv__addr__t_html"><div class="ttname"><a href="structrecv__addr__t.html">recv_addr_t</a></div><div class="ttdoc">Hashed page file address struct. </div><div class="ttdef"><b>Definition:</b> log0recv.h:316</div></div>
<div class="ttc" id="log0recv_8h_html_a3f5aa2ca6270b43214c955cb53517e23a8a687e630d4e57fc748070019093dec8"><div class="ttname"><a href="log0recv_8h.html#a3f5aa2ca6270b43214c955cb53517e23a8a687e630d4e57fc748070019093dec8">RECV_NOT_PROCESSED</a></div><div class="ttdoc">not yet processed </div><div class="ttdef"><b>Definition:</b> log0recv.h:299</div></div>
<div class="ttc" id="log0recv_8h_html_aac7270d128627843f3e29fcbb6ad2efc"><div class="ttname"><a href="log0recv_8h.html#aac7270d128627843f3e29fcbb6ad2efc">recv_recovery_on</a></div><div class="ttdeci">volatile bool recv_recovery_on</div><div class="ttdoc">TRUE when applying redo log records during crash recovery; FALSE otherwise. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:96</div></div>
<div class="ttc" id="structrecv__sys__t_html_a751b651315d1d80514465ea1981ea661"><div class="ttname"><a href="structrecv__sys__t.html#a751b651315d1d80514465ea1981ea661">recv_sys_t::recovered_offset</a></div><div class="ttdeci">ulint recovered_offset</div><div class="ttdoc">Start offset of non-parsed log records in buf. </div><div class="ttdef"><b>Definition:</b> log0recv.h:494</div></div>
<div class="ttc" id="log0recv_8h_html_a4b7fdec36562ed96ce3a591b253a0d14"><div class="ttname"><a href="log0recv_8h.html#a4b7fdec36562ed96ce3a591b253a0d14">recv_sys_close</a></div><div class="ttdeci">void recv_sys_close()</div><div class="ttdoc">Release recovery system mutexes. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:472</div></div>
<div class="ttc" id="innodb__utility_8h_html_a496a8f8646bff5c74c18ee0c04134b6d"><div class="ttname"><a href="innodb__utility_8h.html#a496a8f8646bff5c74c18ee0c04134b6d">UT_LIST_NODE_T</a></div><div class="ttdeci">#define UT_LIST_NODE_T(TYPE)</div><div class="ttdef"><b>Definition:</b> innodb_utility.h:40</div></div>
<div class="ttc" id="structrecv__sys__t_html_aa97db6225b4da13620de81115ae6db49"><div class="ttname"><a href="structrecv__sys__t.html#aa97db6225b4da13620de81115ae6db49">recv_sys_t::missing_ids</a></div><div class="ttdeci">Missing_Ids missing_ids</div><div class="ttdoc">Tablespace IDs that were ignored during redo log apply. </div><div class="ttdef"><b>Definition:</b> log0recv.h:546</div></div>
<div class="ttc" id="log0recv_8cc_html_a293f74bfcacf450499e91607238fdaec"><div class="ttname"><a href="log0recv_8cc.html#a293f74bfcacf450499e91607238fdaec">log_block_checksum_is_ok</a></div><div class="ttdeci">static bool log_block_checksum_is_ok(const byte *block)</div><div class="ttdoc">Check the 4-byte checksum to the trailer checksum field of a log block. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:692</div></div>
<div class="ttc" id="mtr0types_8h_html"><div class="ttname"><a href="mtr0types_8h.html">mtr0types.h</a></div><div class="ttdoc">Mini-transaction buffer global types. </div></div>
<div class="ttc" id="log0recv_8cc_html_aefc150bb6e43114ad983c512d0a1847a"><div class="ttname"><a href="log0recv_8cc.html#aefc150bb6e43114ad983c512d0a1847a">recv_check_log_header_checksum</a></div><div class="ttdeci">static bool recv_check_log_header_checksum(const byte *buf)</div><div class="ttdoc">Check the consistency of a log header block. </div><div class="ttdef"><b>Definition:</b> log0recv.cc:677</div></div>
<div class="ttc" id="structrecv__sys__t_html"><div class="ttname"><a href="structrecv__sys__t.html">recv_sys_t</a></div><div class="ttdoc">Recovery system data structure. </div><div class="ttdef"><b>Definition:</b> log0recv.h:388</div></div>
<div class="ttc" id="structrecv__sys__t_html_a0aa844a4283cffb3de3654cb96dfbf4a"><div class="ttname"><a href="structrecv__sys__t.html#a0aa844a4283cffb3de3654cb96dfbf4a">recv_sys_t::Encryption_Keys</a></div><div class="ttdeci">std::vector&lt; Encryption_Key &gt; Encryption_Keys</div><div class="ttdoc">mutex protecting the fields apply_log_recs, n_addrs, and the state field in each recv_addr struct ...</div><div class="ttdef"><b>Definition:</b> log0recv.h:431</div></div>
<div class="ttc" id="structrecv__sys__t_html_a91ff6c3ca04ecb2f52bd7052fb4a3452"><div class="ttname"><a href="structrecv__sys__t.html#a91ff6c3ca04ecb2f52bd7052fb4a3452">recv_sys_t::is_cloned_db</a></div><div class="ttdeci">bool is_cloned_db</div><div class="ttdoc">If the recovery is from a cloned database. </div><div class="ttdef"><b>Definition:</b> log0recv.h:519</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_9b7ed1f29269ffabdc4c5f5522a0db25.html">include</a></li><li class="navelem"><a class="el" href="log0recv_8h.html">log0recv.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
