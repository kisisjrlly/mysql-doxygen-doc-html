<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: include/sql_string.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sql__string_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sql_string.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="sql__string_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef SQL_STRING_INCLUDED</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define SQL_STRING_INCLUDED</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/* Copyright (c) 2000, 2020, Oracle and/or its affiliates.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">   This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">   it under the terms of the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   as published by the Free Software Foundation.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   This program is also distributed with certain software (including</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">   but not limited to OpenSSL) that is licensed under separate terms,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   as designated in a particular file or component or in included license</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">   documentation.  The authors of MySQL hereby grant you an additional</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   permission to link the program and your derivative works with the</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">   separately licensed software that they have included with MySQL.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">   GNU General Public License, version 2.0, for more details.</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">   along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA */</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">  @file include/sql_string.h</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">  Our own string classes, used pervasively throughout the executor.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">  See in particular the comment on String before you use anything from here.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="string_8h.html">string.h</a>&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;new&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lex__string_8h.html">lex_string.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="m__ctype_8h.html">m_ctype.h</a>&quot;</span>   <span class="comment">// my_convert</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="m__string_8h.html">m_string.h</a>&quot;</span>  <span class="comment">// LEX_CSTRING</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="memory__debugging_8h.html">memory_debugging.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__alloc_8h.html">my_alloc.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__compiler_8h.html">my_compiler.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__dbug_8h.html">my_dbug.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__inttypes_8h.html">my_inttypes.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mysql__lex__string_8h.html">mysql/mysql_lex_string.h</a>&quot;</span>  <span class="comment">// LEX_STRING</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="psi__base_8h.html">mysql/psi/psi_base.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="psi_2psi__memory_8h.html">mysql/psi/psi_memory.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="service__mysql__alloc_8h.html">mysql/service_mysql_alloc.h</a>&quot;</span>  <span class="comment">// my_free</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">struct </span><a class="code" href="structMEM__ROOT.html">MEM_ROOT</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#ifdef MYSQL_SERVER</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">extern</span> <a class="code" href="group__psi__abi__memory.html#ga902dd5c9fe51b8cbdd7438a30e43fdd0">PSI_memory_key</a> <a class="code" href="sql__string_8h.html#a2f47db679a3ebbfa3045d59ba3c1886c">key_memory_String_value</a>;</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="sql__string_8h.html#ad523e8e2b149040ed7f9509262852599">   55</a></span>&#160;<span class="preprocessor">#define STRING_PSI_MEMORY_KEY key_memory_String_value</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#define STRING_PSI_MEMORY_KEY PSI_NOT_INSTRUMENTED</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">  A wrapper class for null-terminated constant strings.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">  Constructors make sure that the position of the &#39;\0&#39; terminating byte</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">  in m_str is always in sync with m_length.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">  This class must stay as small as possible as we often</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">  pass it and its descendants (such as Name_string) into functions</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">  using call-by-value evaluation.</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">  Don&#39;t add new members or virual methods into this class!</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classSimple__cstring.html">   71</a></span>&#160;<span class="keyword">class </span><a class="code" href="classSimple__cstring.html">Simple_cstring</a> {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#a0880f92974017d7d368a0da250d0d509">   73</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classSimple__cstring.html#a0880f92974017d7d368a0da250d0d509">m_str</a>;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">   74</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">    Initialize from a C string whose length is already known.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#afbc30daa9beb29a994269d8420d9217f">   80</a></span>&#160;  <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str_arg, <span class="keywordtype">size_t</span> length_arg) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// NULL is allowed only with length==0</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(str_arg || length_arg == 0);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// For non-NULL, make sure length_arg is in sync with &#39;\0&#39; terminator.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(!str_arg || str_arg[length_arg] == <span class="charliteral">&#39;\0&#39;</span>);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    m_str = str_arg;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    m_length = length_arg;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#afafa83524ca844b55fcd0663f84dcc6f">   88</a></span>&#160;  <a class="code" href="classSimple__cstring.html#afafa83524ca844b55fcd0663f84dcc6f">Simple_cstring</a>() { <span class="keyword">set</span>(<span class="keyword">nullptr</span>, 0); }</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#ad4e8195479eb84506eaa7b2527caff74">   89</a></span>&#160;  <a class="code" href="classSimple__cstring.html#ad4e8195479eb84506eaa7b2527caff74">Simple_cstring</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str_arg, <span class="keywordtype">size_t</span> length_arg) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">set</span>(str_arg, length_arg);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#a01de78a66dbaa16aa9194463dcbe7acf">   92</a></span>&#160;  <a class="code" href="classSimple__cstring.html#a01de78a66dbaa16aa9194463dcbe7acf">Simple_cstring</a>(<span class="keyword">const</span> <a class="code" href="structMYSQL__LEX__STRING.html">LEX_STRING</a> arg) { <span class="keyword">set</span>(arg.<a class="code" href="structMYSQL__LEX__STRING.html#a87e83f941e25558be1e4b44a04a438be">str</a>, arg.<a class="code" href="structMYSQL__LEX__STRING.html#adc0f5b45a80690636b88ca4866bfc557">length</a>); }</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#ad2f0e6cf2053b67606e900deb79d132d">   93</a></span>&#160;  <a class="code" href="classSimple__cstring.html#ad2f0e6cf2053b67606e900deb79d132d">Simple_cstring</a>(<span class="keyword">const</span> <a class="code" href="structMYSQL__LEX__CSTRING.html">LEX_CSTRING</a> arg) { <span class="keyword">set</span>(arg.<a class="code" href="structMYSQL__LEX__CSTRING.html#a8ec5bb16b4275a6809163e00592b105d">str</a>, arg.<a class="code" href="structMYSQL__LEX__CSTRING.html#a8f240ebce8d7084b44bcffa514183dc8">length</a>); }</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#a893a2459319f0f71da46359d58e1e4b6">   94</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classSimple__cstring.html#a893a2459319f0f71da46359d58e1e4b6">reset</a>() { <span class="keyword">set</span>(<span class="keyword">nullptr</span>, 0); }<span class="comment"></span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">    Set to a null-terminated string.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#a6e1da0134af26831ab50f6e85166f4f9">   98</a></span>&#160;  <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str) { <span class="keyword">set</span>(str, str ? strlen(str) : 0); }<span class="comment"></span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">    Return string buffer.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#a533ca91541b1e592c7e89e3fb6d08a89">  102</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classSimple__cstring.html#a533ca91541b1e592c7e89e3fb6d08a89">ptr</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classSimple__cstring.html#a0880f92974017d7d368a0da250d0d509">m_str</a>; }<span class="comment"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">    Check if m_ptr is set.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#a6c92e4edf06d1944567352f3e1e796dc">  106</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classSimple__cstring.html#a6c92e4edf06d1944567352f3e1e796dc">is_set</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_str != <span class="keyword">nullptr</span>; }<span class="comment"></span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">    Return name length.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">  110</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>; }<span class="comment"></span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">    Compare to another Simple_cstring.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#a15df91c7ffce10f384a3f559756bb6cd">  114</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classSimple__cstring.html#a15df91c7ffce10f384a3f559756bb6cd">eq_bin</a>(<span class="keyword">const</span> <a class="code" href="classSimple__cstring.html">Simple_cstring</a> other)<span class="keyword"> const </span>{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> m_length == other.<a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a> &amp;&amp;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;           memcmp(m_str, other.<a class="code" href="classSimple__cstring.html#a0880f92974017d7d368a0da250d0d509">m_str</a>, m_length) == 0;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }<span class="comment"></span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    Copy to the given buffer</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classSimple__cstring.html#ad27c10d91a1df77dc72af9fb3e94b4ac">  121</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classSimple__cstring.html#ad27c10d91a1df77dc72af9fb3e94b4ac">strcpy</a>(<span class="keywordtype">char</span> *buff)<span class="keyword"> const </span>{</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    memcpy(buff, m_str, m_length);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    buff[<a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;};</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keyword">class </span><a class="code" href="classString.html">String</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">struct </span><a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keyword">struct </span><a class="code" href="structIO__CACHE.html">IO_CACHE</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="sql__string_8h.html#ae807275f19ee4ed8973f5e7c9dc4cb2b">validate_string</a>(<span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>,</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                     <span class="keywordtype">size_t</span> *valid_length, <span class="keywordtype">bool</span> *length_error);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keywordtype">int</span> <a class="code" href="sql__string_8h.html#abfbb0c64199ee2793530081187ab5358">sortcmp</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> *a, <span class="keyword">const</span> <a class="code" href="classString.html">String</a> *b, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<a class="code" href="classString.html">String</a> *<a class="code" href="sql__string_8h.html#a38c763d51afb4830e5eb05b0aeea4720">copy_if_not_alloced</a>(<a class="code" href="classString.html">String</a> *to, <a class="code" href="classString.html">String</a> *from, <span class="keywordtype">size_t</span> from_length);</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="sql__string_8h.html#aa3dfb606f6d4399e1015527ee9b28a6b">  136</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="sql__string_8h.html#aa3dfb606f6d4399e1015527ee9b28a6b">copy_and_convert</a>(<span class="keywordtype">char</span> *to, <span class="keywordtype">size_t</span> to_length,</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                               <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *to_cs, <span class="keyword">const</span> <span class="keywordtype">char</span> *from,</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                               <span class="keywordtype">size_t</span> from_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *from_cs,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                               <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *errors) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="m__ctype_8h.html#a021d91630a02c4cebe7c4bf6df76b5e8">my_convert</a>(to, to_length, to_cs, from, from_length, from_cs, errors);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="sql__string_8h.html#a6d827230a7fee64f8a6b9962313b26d7">well_formed_copy_nchars</a>(<span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *to_cs, <span class="keywordtype">char</span> *to,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                               <span class="keywordtype">size_t</span> to_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *from_cs,</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">char</span> *from, <span class="keywordtype">size_t</span> from_length,</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                               <span class="keywordtype">size_t</span> nchars,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">char</span> **well_formed_error_pos,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">char</span> **cannot_convert_error_pos,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">char</span> **from_end_pos);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="sql__string_8h.html#abc69085a2d3f8217c20803019491e0dd">convert_to_printable</a>(<span class="keywordtype">char</span> *to, <span class="keywordtype">size_t</span> to_len, <span class="keyword">const</span> <span class="keywordtype">char</span> *from,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                            <span class="keywordtype">size_t</span> from_len, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *from_cs,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                            <span class="keywordtype">size_t</span> nbytes = 0);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="sql__string_8h.html#ad42b217141e04762bdc1d341b94e73b6">bin_to_hex_str</a>(<span class="keywordtype">char</span> *to, <span class="keywordtype">size_t</span> to_len, <span class="keyword">const</span> <span class="keywordtype">char</span> *from,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                      <span class="keywordtype">size_t</span> from_len);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">  Using this class is fraught with peril, and you need to be very careful</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">  when doing so. In particular, copy construction and assignment does not</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">  do a deep _nor_ a shallow copy; instead, it makes a _reference_ to the</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">  original string that will be invalid as soon as that string goes out of scope.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">  (Move constructiong and assignment is safe, though.) In general, it is</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">  probably better not to use this class at all if you can avoid it.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classString.html">  164</a></span>&#160;<span class="keyword">class </span><a class="code" href="classString.html">String</a> {</div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="classString.html#a86e65821760a167b56452d405bd905ec">  165</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="classString.html#a86e65821760a167b56452d405bd905ec">m_ptr</a>;</div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classString.html#a6525ef59b43a4e8cc13892419c9f90c2">  166</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classString.html#a6525ef59b43a4e8cc13892419c9f90c2">m_length</a>;</div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classString.html#a0d951103f43885f15382fe748306fdb0">  167</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *<a class="code" href="classString.html#a0d951103f43885f15382fe748306fdb0">m_charset</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classString.html#a2660513977128f7a2b4a56003d2bf0f3">  169</a></span>&#160;      <a class="code" href="classString.html#a2660513977128f7a2b4a56003d2bf0f3">m_alloced_length</a>;  <span class="comment">// should be size_t, but kept uint32 for size reasons</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classString.html#ae5df62c21d238ec13becaa68d28dbecc">  170</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#ae5df62c21d238ec13becaa68d28dbecc">m_is_alloced</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classString.html#a8a7ef356e05eb9b1ea1ab518baee3095">  173</a></span>&#160;  <a class="code" href="classString.html#a8a7ef356e05eb9b1ea1ab518baee3095">String</a>()</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      : m_ptr(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        m_length(0),</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        m_charset(&amp;<a class="code" href="m__ctype_8h.html#aa4bb45da77755c7a221e0bff25562753">my_charset_bin</a>),</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        m_alloced_length(0),</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        m_is_alloced(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {}</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classString.html#a6bdf56c5c17152e682bb0ece9fa9902f">  179</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classString.html#a6bdf56c5c17152e682bb0ece9fa9902f">String</a>(<span class="keywordtype">size_t</span> length_arg)</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      : m_ptr(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        m_length(0),</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        m_charset(&amp;<a class="code" href="m__ctype_8h.html#aa4bb45da77755c7a221e0bff25562753">my_charset_bin</a>),</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        m_alloced_length(0),</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        m_is_alloced(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    (void)real_alloc(length_arg);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  }</div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="classString.html#a7ec34d778c9d4728803db8bbd24e5f14">  187</a></span>&#160;  <a class="code" href="classString.html#a7ec34d778c9d4728803db8bbd24e5f14">String</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs)</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      : m_ptr(const_cast&lt;char *&gt;(str)),</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        m_length(strlen(str)),</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        m_charset(cs),</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        m_alloced_length(0),</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        m_is_alloced(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {}</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classString.html#a5a23e9f3c29695db3eb810c32c39a0a1">  193</a></span>&#160;  <a class="code" href="classString.html#a5a23e9f3c29695db3eb810c32c39a0a1">String</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> len, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      : m_ptr(const_cast&lt;char *&gt;(str)),</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        m_length(len),</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        m_charset(cs),</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        m_alloced_length(0),</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        m_is_alloced(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {}</div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classString.html#a5a22ba2c03afc5f73eef77fb81dcddb2">  199</a></span>&#160;  <a class="code" href="classString.html#a5a22ba2c03afc5f73eef77fb81dcddb2">String</a>(<span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> len, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      : m_ptr(str),</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        m_length(len),</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        m_charset(cs),</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        m_alloced_length(static_cast&lt;<a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>&gt;(len)),</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        m_is_alloced(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {}</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classString.html#a5774bcd4a4c232a8aec5a3ec6d01a157">  205</a></span>&#160;  <a class="code" href="classString.html#a5774bcd4a4c232a8aec5a3ec6d01a157">String</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;str)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      : m_ptr(str.m_ptr),</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        m_length(str.m_length),</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        m_charset(str.m_charset),</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        m_alloced_length(static_cast&lt;<a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a>&gt;(str.m_alloced_length)),</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        m_is_alloced(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {}</div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classString.html#a48abaabf4ba129e4797f432e24f2d63b">  211</a></span>&#160;  <a class="code" href="classString.html#a48abaabf4ba129e4797f432e24f2d63b">String</a>(<a class="code" href="classString.html">String</a> &amp;&amp;str) noexcept</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      : m_ptr(str.m_ptr),</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>(str.m_length),</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        m_charset(str.m_charset),</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        m_alloced_length(str.m_alloced_length),</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        m_is_alloced(str.m_is_alloced) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    str.m_is_alloced = <span class="keyword">false</span>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classString.html#ae43080fe87b5b5447736f627601246d1">  219</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> *<span class="keyword">operator</span> <span class="keyword">new</span>(<span class="keywordtype">size_t</span> size, <a class="code" href="structMEM__ROOT.html">MEM_ROOT</a> *<a class="code" href="client__plugin_8cc.html#a7d0fe2f135db987da18cea87b4778737">mem_root</a>,</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                            <span class="keyword">const</span> std::nothrow_t &amp;arg MY_ATTRIBUTE((unused)) =</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                std::nothrow) noexcept {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> mem_root-&gt;Alloc(size);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classString.html#a6f13ece9606f5dc5d1ed7ce0a5b93311">  224</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">operator</span> <span class="keyword">delete</span>(<span class="keywordtype">void</span> *ptr_arg, <span class="keywordtype">size_t</span> size) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    (void)ptr_arg;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    (void)size;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="memory__debugging_8h.html#a6fad7d1440c699120d7e8153dfb07096">TRASH</a>(ptr_arg, size);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="classString.html#a11c2825e37fdc38f35452cee917b2d94">  230</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">operator</span> <span class="keyword">delete</span>(</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordtype">void</span> *, <a class="code" href="structMEM__ROOT.html">MEM_ROOT</a> *, <span class="keyword">const</span> std::nothrow_t &amp;) noexcept { <span class="comment">/* never called */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classString.html#ac40b2a3fb58c2d8556f5e6ff73510036">  234</a></span>&#160;  <a class="code" href="classString.html#ac40b2a3fb58c2d8556f5e6ff73510036">~String</a>() { <a class="code" href="types_8h.html#a0e5c6616993f332b0721dfa8daa2b0d6">mem_free</a>(); }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classString.html#a766bd5117b1be075f635568ff9eaf75e">  236</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#a766bd5117b1be075f635568ff9eaf75e">set_charset</a>(<span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *charset_arg) { m_charset = charset_arg; }</div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classString.html#adeb3c645da2b33173c87c97ea21aaaf9">  237</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *<a class="code" href="classString.html#adeb3c645da2b33173c87c97ea21aaaf9">charset</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_charset; }</div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="classString.html#ad3b888edbfb3bab21d4bae4663d2211a">  238</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classString.html#ad3b888edbfb3bab21d4bae4663d2211a">length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>; }</div><div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classString.html#ad4918a8b58a8ba1412e24f728e712ad2">  239</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="classString.html#ad4918a8b58a8ba1412e24f728e712ad2">alloced_length</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_alloced_length; }</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="classString.html#ab4ef1ab40ed8cc7864321c48509fae56">  240</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> &amp;<a class="code" href="classString.html#ab4ef1ab40ed8cc7864321c48509fae56">operator[]</a>(<span class="keywordtype">size_t</span> i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_ptr[i]; }</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classString.html#a2d96cb323625c0bed69d6b7c1b1426ea">  241</a></span>&#160;  <span class="keywordtype">char</span> &amp;<a class="code" href="classString.html#a2d96cb323625c0bed69d6b7c1b1426ea">operator[]</a>(<span class="keywordtype">size_t</span> i) { <span class="keywordflow">return</span> m_ptr[i]; }</div><div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classString.html#ad717a9ab04b2116e678e2e7029efce27">  242</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#ad717a9ab04b2116e678e2e7029efce27">length</a>(<span class="keywordtype">size_t</span> len) { m_length = len; }</div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classString.html#a24dc175293fc77f5fd4643011c6e0372">  243</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#a24dc175293fc77f5fd4643011c6e0372">is_empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (m_length == 0); }</div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="classString.html#ac713769c0500de1f935356a8259ce88c">  244</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#ac713769c0500de1f935356a8259ce88c">mark_as_const</a>() { m_alloced_length = 0; }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">/* Returns a pointer to data, may not include NULL terminating character. */</span></div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="classString.html#a36e2d4a832274ed2718c9edf63041f08">  246</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classString.html#a36e2d4a832274ed2718c9edf63041f08">ptr</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_ptr; }</div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="classString.html#a1fc22c8a9205f5cb9bc75bbcfeabc9c6">  247</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="classString.html#a1fc22c8a9205f5cb9bc75bbcfeabc9c6">ptr</a>() { <span class="keywordflow">return</span> m_ptr; }</div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="classString.html#aeaf7246f97fb6eca08e3ef1fadf6a7d4">  248</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="classString.html#aeaf7246f97fb6eca08e3ef1fadf6a7d4">c_ptr</a>() {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(!m_is_alloced || !m_ptr || !m_alloced_length ||</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                (m_alloced_length &gt;= (m_length + 1)));</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">      Should be safe, but in case valgrind complains on this line, it means</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">      there is a misuse of c_ptr(). Please prefer &lt;ptr(), length()&gt; instead.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (!m_ptr || m_ptr[m_length]) (void)mem_realloc(m_length);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> m_ptr;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  }</div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="classString.html#a9d3bc4052c9a7d1b97443527ca53f49e">  259</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="classString.html#a9d3bc4052c9a7d1b97443527ca53f49e">c_ptr_quick</a>() {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (m_ptr &amp;&amp; m_length &lt; m_alloced_length) m_ptr[<a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>] = 0;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> m_ptr;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="classString.html#aa2f8fea71d5f8ba45bf9b3b81678243c">  263</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="classString.html#aa2f8fea71d5f8ba45bf9b3b81678243c">c_ptr_safe</a>() {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (m_ptr &amp;&amp; m_length &lt; m_alloced_length)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      m_ptr[<a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>] = 0;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      (<span class="keywordtype">void</span>)mem_realloc(m_length);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> m_ptr;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classString.html#a0929658a59b5b795519533b28a532324">  270</a></span>&#160;  <a class="code" href="structMYSQL__LEX__STRING.html">LEX_STRING</a> <a class="code" href="classString.html#a0929658a59b5b795519533b28a532324">lex_string</a>() { <span class="keywordflow">return</span> {m_ptr, <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>()}; }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classString.html#a07dbf843862b96a0171a01637197e814">  272</a></span>&#160;  <a class="code" href="structMYSQL__LEX__CSTRING.html">LEX_CSTRING</a> <a class="code" href="classString.html#a07dbf843862b96a0171a01637197e814">lex_cstring</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="structMYSQL__LEX__CSTRING.html">LEX_CSTRING</a> lex_cstring = {<a class="code" href="classSimple__cstring.html#a533ca91541b1e592c7e89e3fb6d08a89">ptr</a>(), <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>()};</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span> lex_cstring;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="classString.html#adc1130bf198730a0a9ae26345430b016">  277</a></span>&#160;  <span class="keywordtype">void</span> <span class="keyword">set</span>(<a class="code" href="classString.html">String</a> &amp;str, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> arg_length) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(&amp;str != <span class="keyword">this</span>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="types_8h.html#a0e5c6616993f332b0721dfa8daa2b0d6">mem_free</a>();</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    m_ptr = str.ptr() + offset;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    m_length = arg_length;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    m_is_alloced = <span class="keyword">false</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (str.m_alloced_length)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      m_alloced_length = str.m_alloced_length - <span class="keyword">static_cast&lt;</span><a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a><span class="keyword">&gt;</span>(offset);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      m_alloced_length = 0;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    m_charset = str.m_charset;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">     Points the internal buffer to the supplied one. The old buffer is freed.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">     @param str Pointer to the new buffer.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">     @param arg_length Length of the new buffer in characters, excluding any</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">            null character.</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">     @param cs Character set to use for interpreting string data.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">     @note The new buffer will not be null terminated.</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="classString.html#afdf69f9d3dc74fabc3a965caea305f4e">  298</a></span>&#160;  <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="types_8h.html#a0e5c6616993f332b0721dfa8daa2b0d6">mem_free</a>();</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    m_ptr = str;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    m_length = m_alloced_length = <span class="keyword">static_cast&lt;</span><a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a><span class="keyword">&gt;</span>(arg_length);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    m_is_alloced = <span class="keyword">false</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    m_charset = cs;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="classString.html#a2eb12b13408bb046e4d40daf4d32a696">  305</a></span>&#160;  <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="types_8h.html#a0e5c6616993f332b0721dfa8daa2b0d6">mem_free</a>();</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    m_ptr = <span class="keyword">const_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(str);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    m_length = arg_length;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    m_alloced_length = 0;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    m_is_alloced = <span class="keyword">false</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    m_charset = cs;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordtype">bool</span> set_ascii(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> arg_length);</div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classString.html#a811f2cccdf2c7a21b68459d001fd7e2c">  314</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#a811f2cccdf2c7a21b68459d001fd7e2c">set_quick</a>(<span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (!m_is_alloced) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      m_ptr = str;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      m_length = arg_length;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      m_alloced_length = <span class="keyword">static_cast&lt;</span><a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a><span class="keyword">&gt;</span>(arg_length);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    m_charset = cs;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordtype">bool</span> set_int(<a class="code" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> num, <span class="keywordtype">bool</span> unsigned_flag, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs);</div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="classString.html#a2b131352f743cead56e3be57f9649378">  323</a></span>&#160;  <span class="keywordtype">bool</span> <span class="keyword">set</span>(<a class="code" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> num, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> set_int(num, <span class="keyword">false</span>, cs);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classString.html#a330a3bb8df7148fbc6e25f1bd8994f40">  326</a></span>&#160;  <span class="keywordtype">bool</span> <span class="keyword">set</span>(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> num, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> set_int((<a class="code" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a>)num, <span class="keyword">true</span>, cs);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">    Sets the contents of this string to the string representation of the given</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">    double value.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">    @param num the double value</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">    @param decimals the number of decimals</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">    @param cs the character set of the string</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">    @return false on success, true on error</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordtype">bool</span> set_real(<span class="keywordtype">double</span> num, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> decimals, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">    PMG 2004.11.12</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">    This is a method that works the same as perl&#39;s &quot;chop&quot;. It simply</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">    drops the last byte of a string. This is useful in the case</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">    of the federated storage handler where I&#39;m building a unknown</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">    number, list of values and fields to be used in a sql insert</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">    statement to be run on the remote server, and have a comma after each.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">    When the list is complete, I &quot;chop&quot; off the trailing comma</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">    ex.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">      String stringobj;</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">      stringobj.append(&quot;VALUES (&#39;foo&#39;, &#39;fi&#39;, &#39;fo&#39;,&quot;);</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">      stringobj.chop();</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">      stringobj.append(&quot;)&quot;);</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">    In this case, the value of string was:</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">    VALUES (&#39;foo&#39;, &#39;fi&#39;, &#39;fo&#39;,</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">    VALUES (&#39;foo&#39;, &#39;fi&#39;, &#39;fo&#39;</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">    VALUES (&#39;foo&#39;, &#39;fi&#39;, &#39;fo&#39;)</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">    This is not safe to call when the string ends in a multi-byte character!</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="classString.html#a354b00334bdb0ff746194dd9d28c4ab8">  364</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#a354b00334bdb0ff746194dd9d28c4ab8">chop</a>() {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    m_length--;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    m_ptr[<a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="classString.html#aec6af13c8b30015c822f06ad5c64de40">  369</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#aec6af13c8b30015c822f06ad5c64de40">mem_claim</a>(<span class="keywordtype">bool</span> claim) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (m_is_alloced) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <a class="code" href="service__mysql__alloc_8h.html#aa4b1fa9ec96c70d5fab7fca1e99d96e6">my_claim</a>(m_ptr, claim);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classString.html#a347ef2e15adc6b5bc64551f8d91417d3">  375</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#a347ef2e15adc6b5bc64551f8d91417d3">mem_free</a>() {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">if</span> (m_is_alloced) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      m_is_alloced = <span class="keyword">false</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      m_alloced_length = 0;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <a class="code" href="my__memory_8cc.html#a3a3ddffcaadb60b7715c9889f8c56afb">my_free</a>(m_ptr);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      m_ptr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      m_length = 0; <span class="comment">/* Safety */</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classString.html#a1fc8dcc8f78b76f26e7210143c2dafaa">  385</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#a1fc8dcc8f78b76f26e7210143c2dafaa">alloc</a>(<span class="keywordtype">size_t</span> arg_length) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (arg_length &lt; m_alloced_length) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> real_alloc(arg_length);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordtype">bool</span> real_alloc(<span class="keywordtype">size_t</span> arg_length);  <span class="comment">// Empties old string</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordtype">bool</span> mem_realloc(<span class="keywordtype">size_t</span> arg_length, <span class="keywordtype">bool</span> force_on_heap = <span class="keyword">false</span>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordtype">size_t</span> next_realloc_exp_size(<span class="keywordtype">size_t</span> sz);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordtype">bool</span> mem_realloc_exp(<span class="keywordtype">size_t</span> arg_length);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// Shrink the buffer, but only if it is allocated on the heap.</span></div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="classString.html#ab94bb71cf804d8d1bd07f3897e455c91">  398</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#ab94bb71cf804d8d1bd07f3897e455c91">shrink</a>(<span class="keywordtype">size_t</span> arg_length) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (!is_alloced()) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> (arg_length &lt; m_alloced_length) {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordtype">char</span> *new_ptr;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">if</span> (!(new_ptr = static_cast&lt;char *&gt;(<a class="code" href="service__mysql__alloc_8h.html#ab71d77b4cc5e6962b28d940269b4d73d">my_realloc</a>(</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <a class="code" href="sql__string_8h.html#ad523e8e2b149040ed7f9509262852599">STRING_PSI_MEMORY_KEY</a>, m_ptr, arg_length, <a class="code" href="test__mysql__runtime__error_8cc.html#ab3b3804e3bf2734c0f4f1c72f30df1bd">MYF</a>(0))))) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        m_alloced_length = 0;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        real_alloc(arg_length);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        m_ptr = new_ptr;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        m_alloced_length = <span class="keyword">static_cast&lt;</span><a class="code" href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a><span class="keyword">&gt;</span>(arg_length);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="classString.html#aea2f656a9f5fd201219a7192d72ebd1c">  412</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#aea2f656a9f5fd201219a7192d72ebd1c">is_alloced</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_is_alloced; }</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="classString.html#af05f7df1db9885d2ff0daf8dcc77c2ea">  413</a></span>&#160;  <a class="code" href="classString.html">String</a> &amp;<a class="code" href="classString.html#af05f7df1db9885d2ff0daf8dcc77c2ea">operator=</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;s) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (&amp;s != <span class="keyword">this</span>) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">        It is forbidden to do assignments like</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">        some_string = substring_of_that_string</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(!s.<a class="code" href="classString.html#afefc541e086aca0de9ad738a63827546">uses_buffer_owned_by</a>(<span class="keyword">this</span>));</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <a class="code" href="types_8h.html#a0e5c6616993f332b0721dfa8daa2b0d6">mem_free</a>();</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      m_ptr = s.<a class="code" href="classString.html#a86e65821760a167b56452d405bd905ec">m_ptr</a>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      m_length = s.<a class="code" href="classString.html#a6525ef59b43a4e8cc13892419c9f90c2">m_length</a>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      m_alloced_length = s.<a class="code" href="classString.html#a2660513977128f7a2b4a56003d2bf0f3">m_alloced_length</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      m_charset = s.<a class="code" href="classString.html#a0d951103f43885f15382fe748306fdb0">m_charset</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      m_is_alloced = <span class="keyword">false</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div><div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="classString.html#ab7ecf3df882d0e112d0817fc0eaaa801">  429</a></span>&#160;  <a class="code" href="classString.html">String</a> &amp;<a class="code" href="classString.html#ab7ecf3df882d0e112d0817fc0eaaa801">operator=</a>(<a class="code" href="classString.html">String</a> &amp;&amp;s) noexcept {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (&amp;s != <span class="keyword">this</span>) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">        It is forbidden to do assignments like</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">        some_string = substring_of_that_string</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(!s.uses_buffer_owned_by(<span class="keyword">this</span>));</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <a class="code" href="types_8h.html#a0e5c6616993f332b0721dfa8daa2b0d6">mem_free</a>();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      m_ptr = s.m_ptr;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      m_length = s.m_length;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      m_alloced_length = s.m_alloced_length;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      m_charset = s.m_charset;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="comment">// This is the primary difference between move and copy.</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      m_is_alloced = s.m_is_alloced;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      s.m_is_alloced = <span class="keyword">false</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }<span class="comment"></span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">    Takeover the buffer owned by another string.</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">    &quot;this&quot; becomes the owner of the buffer and</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">    is further responsible to free it.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">    The string &quot;s&quot; is detached from the buffer (cleared).</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">    @param s - a String object to steal buffer from.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00455"></a><span class="lineno"><a class="line" href="classString.html#a2ce13099fcb22efd3828dd53a38e6cac">  455</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classString.html#a2ce13099fcb22efd3828dd53a38e6cac">takeover</a>(<a class="code" href="classString.html">String</a> &amp;s) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(<span class="keyword">this</span> != &amp;s);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// Make sure buffers of the two Strings do not overlap</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(!s.<a class="code" href="classString.html#afefc541e086aca0de9ad738a63827546">uses_buffer_owned_by</a>(<span class="keyword">this</span>));</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="types_8h.html#a0e5c6616993f332b0721dfa8daa2b0d6">mem_free</a>();</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    m_ptr = s.<a class="code" href="classString.html#a86e65821760a167b56452d405bd905ec">m_ptr</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    m_length = s.<a class="code" href="classString.html#a6525ef59b43a4e8cc13892419c9f90c2">m_length</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    m_alloced_length = s.<a class="code" href="classString.html#a2660513977128f7a2b4a56003d2bf0f3">m_alloced_length</a>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    m_is_alloced = s.<a class="code" href="classString.html#ae5df62c21d238ec13becaa68d28dbecc">m_is_alloced</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    m_charset = s.<a class="code" href="classString.html#a0d951103f43885f15382fe748306fdb0">m_charset</a>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    s.<a class="code" href="classString.html#a86e65821760a167b56452d405bd905ec">m_ptr</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    s.<a class="code" href="classString.html#a2660513977128f7a2b4a56003d2bf0f3">m_alloced_length</a> = 0;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    s.<a class="code" href="classString.html#a6525ef59b43a4e8cc13892419c9f90c2">m_length</a> = 0;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    s.<a class="code" href="classString.html#ae5df62c21d238ec13becaa68d28dbecc">m_is_alloced</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">copy</a>();                 <span class="comment">// Alloc string if not alloced</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">copy</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;s);  <span class="comment">// Allocate new string</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// Allocate new string</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">copy</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> needs_conversion(<span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs_from,</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                               <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs_to, <span class="keywordtype">size_t</span> *offset);</div><div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="classString.html#a4f0aade1c440020ce7c1840a31099131">  477</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#a4f0aade1c440020ce7c1840a31099131">needs_conversion</a>(<span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs_to)<span class="keyword"> const </span>{</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordtype">size_t</span> offset;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">return</span> needs_conversion(<a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>(), <a class="code" href="namespaceudf__ext_1_1consts.html#a6ddd3738c569a0bf58c9fab6a56731df">charset</a>(), cs_to, &amp;offset);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  }</div><div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="classString.html#aef828c49648333b3993a9260290f0b0e">  481</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#aef828c49648333b3993a9260290f0b0e">is_valid_string</a>(<span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs_to)<span class="keyword"> const </span>{</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordtype">size_t</span> valid_length;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">bool</span> length_error;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="sql__string_8h.html#ae807275f19ee4ed8973f5e7c9dc4cb2b">validate_string</a>(cs_to, <a class="code" href="classSimple__cstring.html#a533ca91541b1e592c7e89e3fb6d08a89">ptr</a>(), <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>(), &amp;valid_length,</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                            &amp;length_error);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> needs_conversion_on_storage(<span class="keywordtype">size_t</span> arg_length,</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs_from,</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs_to);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordtype">bool</span> copy_aligned(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> arg_length, <span class="keywordtype">size_t</span> offset,</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordtype">bool</span> set_or_copy_aligned(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> arg_length,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                           <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">copy</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *csfrom,</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *csto, <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *errors);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="suite__stubs_8c.html#abc6dbb856376b98a77f0de293e607c34">append</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;s);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="suite__stubs_8c.html#abc6dbb856376b98a77f0de293e607c34">append</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s);</div><div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="classString.html#a20db828e6fdfd135bb89939f6d82f5f7">  498</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#a20db828e6fdfd135bb89939f6d82f5f7">append</a>(<a class="code" href="structMYSQL__LEX__STRING.html">LEX_STRING</a> *ls) { <span class="keywordflow">return</span> <a class="code" href="classString.html#a20db828e6fdfd135bb89939f6d82f5f7">append</a>(ls-&gt;<a class="code" href="structMYSQL__LEX__STRING.html#a87e83f941e25558be1e4b44a04a438be">str</a>, ls-&gt;<a class="code" href="structMYSQL__LEX__STRING.html#adc0f5b45a80690636b88ca4866bfc557">length</a>); }</div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="classString.html#a29ff59e3ec14e5a6233ae15ffe8098fc">  499</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#a29ff59e3ec14e5a6233ae15ffe8098fc">append</a>(<a class="code" href="classSimple__cstring.html">Simple_cstring</a> str) { <span class="keywordflow">return</span> <a class="code" href="classString.html#a29ff59e3ec14e5a6233ae15ffe8098fc">append</a>(str.<a class="code" href="classSimple__cstring.html#a533ca91541b1e592c7e89e3fb6d08a89">ptr</a>(), str.<a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>()); }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="suite__stubs_8c.html#abc6dbb856376b98a77f0de293e607c34">append</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> arg_length);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="suite__stubs_8c.html#abc6dbb856376b98a77f0de293e607c34">append</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordtype">bool</span> append_ulonglong(<a class="code" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> val);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordtype">bool</span> append_longlong(<a class="code" href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a> val);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordtype">bool</span> append_with_prefill(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> arg_length, <span class="keywordtype">size_t</span> full_length,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                           <span class="keywordtype">char</span> fill_char);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordtype">bool</span> append_parenthesized(int64_t nr);<span class="comment"></span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">    Search for a substring.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">    @param search    substring to search for</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">    @param offset    starting point, bytes from the start of the string</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">    @return byte offset to the substring from the start of this string</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">    @retval -1 if the substring is not found starting from the offset</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordtype">int</span> strstr(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;search, <span class="keywordtype">size_t</span> offset = 0) <span class="keyword">const</span>;<span class="comment"></span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">    Reverse search for a substring.</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">    @param search    substring to search for</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">    @param offset    starting point, bytes from the start of the string</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">    @return byte offset to the substring from the start of this string</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">    @retval -1 if the substring is not found starting from the offset</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordtype">int</span> strrstr(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;search, <span class="keywordtype">size_t</span> offset = 0) <span class="keyword">const</span>;<span class="comment"></span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">   * Returns substring of given characters lenght, starting at given character</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">   * offset. Note that parameter indexes are character indexes and not byte</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">   * indexes.</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="classString.html">String</a> substr(<span class="keywordtype">int</span> offset, <span class="keywordtype">int</span> <a class="code" href="memcached_8c.html#a9e8f65e2f04446eb0a2f098411dacf9b">count</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="mysqlimport_8cc.html#a8dee86d04ccae709059c8c923826ac9c">replace</a>(<span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <span class="keywordtype">char</span> *to, <span class="keywordtype">size_t</span> <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="mysqlimport_8cc.html#a8dee86d04ccae709059c8c923826ac9c">replace</a>(<span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> arg_length, <span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;to);</div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="classString.html#a90e33aa0202353703ee87c12f9038a38">  536</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#a90e33aa0202353703ee87c12f9038a38">append</a>(<span class="keywordtype">char</span> chr) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (m_length &lt; m_alloced_length) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      m_ptr[m_length++] = chr;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">if</span> (mem_realloc_exp(m_length + 1)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      m_ptr[m_length++] = chr;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordtype">bool</span> fill(<span class="keywordtype">size_t</span> max_length, <span class="keywordtype">char</span> fill);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keyword">friend</span> <span class="keywordtype">int</span> <a class="code" href="sql__string_8h.html#abfbb0c64199ee2793530081187ab5358">sortcmp</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> *a, <span class="keyword">const</span> <a class="code" href="classString.html">String</a> *b, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keyword">friend</span> <span class="keywordtype">int</span> <a class="code" href="sql__string_8cc.html#a8af1b5188682b7b103a253cc1a6b2e54">stringcmp</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> *a, <span class="keyword">const</span> <a class="code" href="classString.html">String</a> *b);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classString.html">String</a> *<a class="code" href="sql__string_8h.html#a38c763d51afb4830e5eb05b0aeea4720">copy_if_not_alloced</a>(<a class="code" href="classString.html">String</a> *to, <a class="code" href="classString.html">String</a> *from,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                     <span class="keywordtype">size_t</span> from_length);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordtype">size_t</span> numchars() <span class="keyword">const</span>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordtype">size_t</span> charpos(<span class="keywordtype">size_t</span> i, <span class="keywordtype">size_t</span> offset = 0) <span class="keyword">const</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="classString.html#a81ca148d2d590b59a7cae3cd69764e7a">  553</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#a81ca148d2d590b59a7cae3cd69764e7a">reserve</a>(<span class="keywordtype">size_t</span> <a class="code" href="namespacejson__binary.html#a1a2b28bab7c00f1d363a30e4a2ab4691">space_needed</a>) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">return</span> mem_realloc(m_length + space_needed);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="json__dom_8cc.html#a018b61b42d8ca57123bb8e4bfdd67269">reserve</a>(<span class="keywordtype">size_t</span> <a class="code" href="namespacejson__binary.html#a1a2b28bab7c00f1d363a30e4a2ab4691">space_needed</a>, <span class="keywordtype">size_t</span> grow_by);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">/* Inline (general) functions used by the protocol functions */</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="classString.html#a83fff29f7ded1ef00c6d45b42b176c9f">  560</a></span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="classString.html#a83fff29f7ded1ef00c6d45b42b176c9f">prep_append</a>(<span class="keywordtype">size_t</span> arg_length, <span class="keywordtype">size_t</span> step_alloc) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordtype">size_t</span> new_length = arg_length + <a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span> (new_length &gt; m_alloced_length) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">if</span> (mem_realloc(new_length + step_alloc)) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordtype">size_t</span> old_length = <a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    m_length += arg_length;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">return</span> m_ptr + old_length; <span class="comment">/* Area to use */</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="classString.html#aaa3e15c1bdfb54bc1639b0d602407370">  570</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#aaa3e15c1bdfb54bc1639b0d602407370">append</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">size_t</span> arg_length, <span class="keywordtype">size_t</span> step_alloc) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordtype">size_t</span> new_length = arg_length + <a class="code" href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">m_length</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">if</span> (new_length &gt; m_alloced_length &amp;&amp;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        mem_realloc_exp(new_length + step_alloc))</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    memcpy(m_ptr + m_length, s, arg_length);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    m_length += arg_length;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="mcstat_8c.html#aeb0a66a1106a1c0097d605cbcb19766d">print</a>(<a class="code" href="classString.html">String</a> *<a class="code" href="mcstat_8c.html#aeb0a66a1106a1c0097d605cbcb19766d">print</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">/* Swap two string objects. Efficient way to exchange data without memcpy. */</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="sql__string_8h.html#aa04fcfeaf528cf9bbc4b3fff7d6c2466">swap</a>(<a class="code" href="classString.html">String</a> &amp;s) noexcept;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="classString.html#afefc541e086aca0de9ad738a63827546">  584</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#afefc541e086aca0de9ad738a63827546">uses_buffer_owned_by</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> *s)<span class="keyword"> const </span>{</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">return</span> (s-&gt;<a class="code" href="classString.html#ae5df62c21d238ec13becaa68d28dbecc">m_is_alloced</a> &amp;&amp; m_ptr &gt;= s-&gt;<a class="code" href="classString.html#a86e65821760a167b56452d405bd905ec">m_ptr</a> &amp;&amp;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            m_ptr &lt; s-&gt;m_ptr + s-&gt;<a class="code" href="classString.html#a6525ef59b43a4e8cc13892419c9f90c2">m_length</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="classString.html#a6c97ee4fce217ca7892141226c4d24a2">  588</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classString.html#a6c97ee4fce217ca7892141226c4d24a2">is_ascii</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>() == 0) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceudf__ext_1_1consts.html#a6ddd3738c569a0bf58c9fab6a56731df">charset</a>()-&gt;mbminlen &gt; 1) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> *c = <a class="code" href="classSimple__cstring.html#a533ca91541b1e592c7e89e3fb6d08a89">ptr</a>(), *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a> = c + <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>(); c &lt; <a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>; c++) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="m__ctype_8h.html#a57bc6fceeedca69f6066fc5d529ad982">my_isascii</a>(*c)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }<span class="comment"></span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">    Make a zero-terminated copy of our value,allocated in the specified MEM_ROOT</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">    @param root         MEM_ROOT to allocate the result</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">    @return allocated string or NULL</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordtype">char</span> *dup(MEM_ROOT *root) <span class="keyword">const</span>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;};</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="sql__string_8h.html#aa04fcfeaf528cf9bbc4b3fff7d6c2466">  606</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="sql__string_8h.html#aa04fcfeaf528cf9bbc4b3fff7d6c2466">swap</a>(<a class="code" href="classString.html">String</a> &amp;a, <a class="code" href="classString.html">String</a> &amp;b) noexcept { a.<a class="code" href="classString.html#aaa64f31519692a04359cc09dfd53fadf">swap</a>(b); }</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno"><a class="line" href="sql__string_8h.html#acf6f4573e9b7ee6da3883969aad66e4f">  608</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> std::string <a class="code" href="sql__string_8h.html#acf6f4573e9b7ee6da3883969aad66e4f">to_string</a>(<span class="keyword">const</span> <a class="code" href="classString.html">String</a> &amp;str) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">return</span> std::string(str.<a class="code" href="classString.html#a36e2d4a832274ed2718c9edf63041f08">ptr</a>(), str.<a class="code" href="classString.html#ad3b888edbfb3bab21d4bae4663d2211a">length</a>());</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">  String class wrapper with a preallocated buffer of size buff_sz</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">  This class allows to replace sequences of:</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">     char buff[12345];</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">     String str(buff, sizeof(buff));</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">     str.length(0);</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">  with a simple equivalent declaration:</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">     StringBuffer&lt;12345&gt; str;</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> buff_sz&gt;</div><div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="classStringBuffer.html">  624</a></span>&#160;<span class="keyword">class </span><a class="code" href="classStringBuffer.html">StringBuffer</a> : <span class="keyword">public</span> <a class="code" href="classString.html">String</a> {</div><div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="classStringBuffer.html#a1519f2bd3459a010a8cc29e1aa48bf14">  625</a></span>&#160;  <span class="keywordtype">char</span> buff[buff_sz];</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="classStringBuffer.html#a72cc4a3fd16f94fd27f8abf55fe20fac">  628</a></span>&#160;  <a class="code" href="classStringBuffer.html#a72cc4a3fd16f94fd27f8abf55fe20fac">StringBuffer</a>() : <a class="code" href="classString.html">String</a>(buff, buff_sz, &amp;<a class="code" href="m__ctype_8h.html#aa4bb45da77755c7a221e0bff25562753">my_charset_bin</a>) { <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>(0); }</div><div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="classStringBuffer.html#a84fa87669be8fa84c5be9ae630e67b5f">  629</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classStringBuffer.html#a84fa87669be8fa84c5be9ae630e67b5f">StringBuffer</a>(<span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs) : <a class="code" href="classString.html">String</a>(buff, buff_sz, cs) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>(0);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  }</div><div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="classStringBuffer.html#aa37fe73fb7554c469b01e6b6b02700e7">  632</a></span>&#160;  <a class="code" href="classStringBuffer.html#aa37fe73fb7554c469b01e6b6b02700e7">StringBuffer</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">size_t</span> <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>, <span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs)</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      : <a class="code" href="classString.html">String</a>(buff, buff_sz, cs) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keyword">set</span>(str, <a class="code" href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">length</a>, cs);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;};</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno"><a class="line" href="sql__string_8h.html#a33a6167c1ba6e6378491ee5b4c71abbb">  638</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="sql__string_8h.html#a33a6167c1ba6e6378491ee5b4c71abbb">check_if_only_end_space</a>(<span class="keyword">const</span> <a class="code" href="structCHARSET__INFO.html">CHARSET_INFO</a> *cs,</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                                           <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">return</span> str + cs-&gt;<a class="code" href="structCHARSET__INFO.html#aa3dd3461b180f806b3310c749ffa0c05">cset</a>-&gt;<a class="code" href="structMY__CHARSET__HANDLER.html#ad25c30bca760d5d3094d4fa0b7157bd7">scan</a>(cs, str, end, <a class="code" href="m__ctype_8h.html#af9b56f41152c5a2649fade58a507b707">MY_SEQ_SPACES</a>) == <a class="code" href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">end</a>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="sql__string_8h.html#a233b102144a0d42601187b1d19892f38">  643</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="structMYSQL__LEX__CSTRING.html">LEX_CSTRING</a> <a class="code" href="sql__string_8h.html#a233b102144a0d42601187b1d19892f38">to_lex_cstring</a>(<span class="keyword">const</span> <a class="code" href="structMYSQL__LEX__STRING.html">LEX_STRING</a> &amp;s) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="structMYSQL__LEX__CSTRING.html">LEX_CSTRING</a> cstr = {s.<a class="code" href="structMYSQL__LEX__STRING.html#a87e83f941e25558be1e4b44a04a438be">str</a>, s.<a class="code" href="structMYSQL__LEX__STRING.html#adc0f5b45a80690636b88ca4866bfc557">length</a>};</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">return</span> cstr;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="sql__string_8h.html#ace6d42a480f6662de2301e31bd80e309">  648</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="structMYSQL__LEX__STRING.html">LEX_STRING</a> <a class="code" href="sql__string_8h.html#ace6d42a480f6662de2301e31bd80e309">to_lex_string</a>(<span class="keyword">const</span> <a class="code" href="structMYSQL__LEX__CSTRING.html">LEX_CSTRING</a> &amp;s) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <a class="code" href="structMYSQL__LEX__STRING.html">LEX_STRING</a> str = {<span class="keyword">const_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(s.<a class="code" href="structMYSQL__LEX__CSTRING.html#a8ec5bb16b4275a6809163e00592b105d">str</a>), s.<a class="code" href="structMYSQL__LEX__CSTRING.html#a8f240ebce8d7084b44bcffa514183dc8">length</a>};</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">return</span> str;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="sql__string_8h.html#a9eb3069b003ed652fd69c1506f951705">  653</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="structMYSQL__LEX__CSTRING.html">LEX_CSTRING</a> <a class="code" href="sql__string_8h.html#a233b102144a0d42601187b1d19892f38">to_lex_cstring</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <a class="code" href="structMYSQL__LEX__CSTRING.html">LEX_CSTRING</a> cstr = {s, s != <span class="keyword">nullptr</span> ? strlen(s) : 0};</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">return</span> cstr;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;}</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="sql__string_8h.html#ae9abb9bab45ad68b282e57cedce70341">append_escaped</a>(<a class="code" href="classString.html">String</a> *to_str, <span class="keyword">const</span> <a class="code" href="classString.html">String</a> *from_str);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* SQL_STRING_INCLUDED */</span><span class="preprocessor"></span></div><div class="ttc" id="mysqlimport_8cc_html_a8dee86d04ccae709059c8c923826ac9c"><div class="ttname"><a href="mysqlimport_8cc.html#a8dee86d04ccae709059c8c923826ac9c">replace</a></div><div class="ttdeci">static bool replace</div><div class="ttdef"><b>Definition:</b> mysqlimport.cc:65</div></div>
<div class="ttc" id="classString_html_a1fc8dcc8f78b76f26e7210143c2dafaa"><div class="ttname"><a href="classString.html#a1fc8dcc8f78b76f26e7210143c2dafaa">String::alloc</a></div><div class="ttdeci">bool alloc(size_t arg_length)</div><div class="ttdef"><b>Definition:</b> sql_string.h:385</div></div>
<div class="ttc" id="my__inttypes_8h_html_a22152088aba12c47e916b7f0ffee0f51"><div class="ttname"><a href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a></div><div class="ttdeci">unsigned long long int ulonglong</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:55</div></div>
<div class="ttc" id="classString_html_ab94bb71cf804d8d1bd07f3897e455c91"><div class="ttname"><a href="classString.html#ab94bb71cf804d8d1bd07f3897e455c91">String::shrink</a></div><div class="ttdeci">void shrink(size_t arg_length)</div><div class="ttdef"><b>Definition:</b> sql_string.h:398</div></div>
<div class="ttc" id="classString_html_a354b00334bdb0ff746194dd9d28c4ab8"><div class="ttname"><a href="classString.html#a354b00334bdb0ff746194dd9d28c4ab8">String::chop</a></div><div class="ttdeci">void chop()</div><div class="ttdef"><b>Definition:</b> sql_string.h:364</div></div>
<div class="ttc" id="mcstat_8c_html_aeb0a66a1106a1c0097d605cbcb19766d"><div class="ttname"><a href="mcstat_8c.html#aeb0a66a1106a1c0097d605cbcb19766d">print</a></div><div class="ttdeci">static void print(const char *key, int keylen, const char *val, int vallen)</div><div class="ttdoc">Print the key value pair. </div><div class="ttdef"><b>Definition:</b> mcstat.c:106</div></div>
<div class="ttc" id="structMYSQL__LEX__STRING_html_a87e83f941e25558be1e4b44a04a438be"><div class="ttname"><a href="structMYSQL__LEX__STRING.html#a87e83f941e25558be1e4b44a04a438be">MYSQL_LEX_STRING::str</a></div><div class="ttdeci">char * str</div><div class="ttdef"><b>Definition:</b> mysql_lex_string.h:35</div></div>
<div class="ttc" id="memory__debugging_8h_html_a6fad7d1440c699120d7e8153dfb07096"><div class="ttname"><a href="memory__debugging_8h.html#a6fad7d1440c699120d7e8153dfb07096">TRASH</a></div><div class="ttdeci">void TRASH(void *ptr, size_t length)</div><div class="ttdoc">Put bad content in memory to be sure it will segfault if dereferenced. </div><div class="ttdef"><b>Definition:</b> memory_debugging.h:70</div></div>
<div class="ttc" id="service__mysql__alloc_8h_html"><div class="ttname"><a href="service__mysql__alloc_8h.html">service_mysql_alloc.h</a></div></div>
<div class="ttc" id="structMYSQL__LEX__STRING_html"><div class="ttname"><a href="structMYSQL__LEX__STRING.html">MYSQL_LEX_STRING</a></div><div class="ttdef"><b>Definition:</b> mysql_lex_string.h:34</div></div>
<div class="ttc" id="namespaceudf__ext_1_1consts_html_a6ddd3738c569a0bf58c9fab6a56731df"><div class="ttname"><a href="namespaceudf__ext_1_1consts.html#a6ddd3738c569a0bf58c9fab6a56731df">udf_ext::consts::charset</a></div><div class="ttdeci">const std::string charset(&quot;charset&quot;)</div></div>
<div class="ttc" id="memcached_8c_html_a9e8f65e2f04446eb0a2f098411dacf9b"><div class="ttname"><a href="memcached_8c.html#a9e8f65e2f04446eb0a2f098411dacf9b">count</a></div><div class="ttdeci">ssize_t count</div><div class="ttdef"><b>Definition:</b> memcached.c:386</div></div>
<div class="ttc" id="string_8h_html"><div class="ttname"><a href="string_8h.html">string.h</a></div></div>
<div class="ttc" id="classString_html_aa2f8fea71d5f8ba45bf9b3b81678243c"><div class="ttname"><a href="classString.html#aa2f8fea71d5f8ba45bf9b3b81678243c">String::c_ptr_safe</a></div><div class="ttdeci">char * c_ptr_safe()</div><div class="ttdef"><b>Definition:</b> sql_string.h:263</div></div>
<div class="ttc" id="classString_html_a81ca148d2d590b59a7cae3cd69764e7a"><div class="ttname"><a href="classString.html#a81ca148d2d590b59a7cae3cd69764e7a">String::reserve</a></div><div class="ttdeci">bool reserve(size_t space_needed)</div><div class="ttdef"><b>Definition:</b> sql_string.h:553</div></div>
<div class="ttc" id="sql__string_8h_html_a2f47db679a3ebbfa3045d59ba3c1886c"><div class="ttname"><a href="sql__string_8h.html#a2f47db679a3ebbfa3045d59ba3c1886c">key_memory_String_value</a></div><div class="ttdeci">PSI_memory_key key_memory_String_value</div><div class="ttdef"><b>Definition:</b> sql_string.cc:37</div></div>
<div class="ttc" id="namespacejson__binary_html_a1a2b28bab7c00f1d363a30e4a2ab4691"><div class="ttname"><a href="namespacejson__binary.html#a1a2b28bab7c00f1d363a30e4a2ab4691">json_binary::space_needed</a></div><div class="ttdeci">bool space_needed(const THD *thd, const Json_wrapper *value, bool large, size_t *needed)</div><div class="ttdoc">How much space is needed for a JSON value when it is stored in the binary format. ...</div><div class="ttdef"><b>Definition:</b> json_binary.cc:1536</div></div>
<div class="ttc" id="my__inttypes_8h_html"><div class="ttname"><a href="my__inttypes_8h.html">my_inttypes.h</a></div><div class="ttdoc">Some integer typedefs for easier portability. </div></div>
<div class="ttc" id="classString_html_a2ce13099fcb22efd3828dd53a38e6cac"><div class="ttname"><a href="classString.html#a2ce13099fcb22efd3828dd53a38e6cac">String::takeover</a></div><div class="ttdeci">void takeover(String &amp;s)</div><div class="ttdoc">Takeover the buffer owned by another string. </div><div class="ttdef"><b>Definition:</b> sql_string.h:455</div></div>
<div class="ttc" id="classString_html_a5a22ba2c03afc5f73eef77fb81dcddb2"><div class="ttname"><a href="classString.html#a5a22ba2c03afc5f73eef77fb81dcddb2">String::String</a></div><div class="ttdeci">String(char *str, size_t len, const CHARSET_INFO *cs)</div><div class="ttdef"><b>Definition:</b> sql_string.h:199</div></div>
<div class="ttc" id="sql__string_8h_html_ae9abb9bab45ad68b282e57cedce70341"><div class="ttname"><a href="sql__string_8h.html#ae9abb9bab45ad68b282e57cedce70341">append_escaped</a></div><div class="ttdeci">bool append_escaped(String *to_str, const String *from_str)</div><div class="ttdoc">Appends from_str to to_str, escaping certain characters. </div><div class="ttdef"><b>Definition:</b> sql_string.cc:1204</div></div>
<div class="ttc" id="classString_html_a2d96cb323625c0bed69d6b7c1b1426ea"><div class="ttname"><a href="classString.html#a2d96cb323625c0bed69d6b7c1b1426ea">String::operator[]</a></div><div class="ttdeci">char &amp; operator[](size_t i)</div><div class="ttdef"><b>Definition:</b> sql_string.h:241</div></div>
<div class="ttc" id="classString_html_aaa64f31519692a04359cc09dfd53fadf"><div class="ttname"><a href="classString.html#aaa64f31519692a04359cc09dfd53fadf">String::swap</a></div><div class="ttdeci">void swap(String &amp;s) noexcept</div><div class="ttdef"><b>Definition:</b> sql_string.cc:1022</div></div>
<div class="ttc" id="structMYSQL__LEX__CSTRING_html_a8ec5bb16b4275a6809163e00592b105d"><div class="ttname"><a href="structMYSQL__LEX__CSTRING.html#a8ec5bb16b4275a6809163e00592b105d">MYSQL_LEX_CSTRING::str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> mysql_lex_string.h:40</div></div>
<div class="ttc" id="classSimple__cstring_html_ad4e8195479eb84506eaa7b2527caff74"><div class="ttname"><a href="classSimple__cstring.html#ad4e8195479eb84506eaa7b2527caff74">Simple_cstring::Simple_cstring</a></div><div class="ttdeci">Simple_cstring(const char *str_arg, size_t length_arg)</div><div class="ttdef"><b>Definition:</b> sql_string.h:89</div></div>
<div class="ttc" id="sql__string_8h_html_acf6f4573e9b7ee6da3883969aad66e4f"><div class="ttname"><a href="sql__string_8h.html#acf6f4573e9b7ee6da3883969aad66e4f">to_string</a></div><div class="ttdeci">static std::string to_string(const String &amp;str)</div><div class="ttdef"><b>Definition:</b> sql_string.h:608</div></div>
<div class="ttc" id="structMYSQL__LEX__CSTRING_html"><div class="ttname"><a href="structMYSQL__LEX__CSTRING.html">MYSQL_LEX_CSTRING</a></div><div class="ttdef"><b>Definition:</b> mysql_lex_string.h:39</div></div>
<div class="ttc" id="classString_html_ab7ecf3df882d0e112d0817fc0eaaa801"><div class="ttname"><a href="classString.html#ab7ecf3df882d0e112d0817fc0eaaa801">String::operator=</a></div><div class="ttdeci">String &amp; operator=(String &amp;&amp;s) noexcept</div><div class="ttdef"><b>Definition:</b> sql_string.h:429</div></div>
<div class="ttc" id="classString_html_aeaf7246f97fb6eca08e3ef1fadf6a7d4"><div class="ttname"><a href="classString.html#aeaf7246f97fb6eca08e3ef1fadf6a7d4">String::c_ptr</a></div><div class="ttdeci">char * c_ptr()</div><div class="ttdef"><b>Definition:</b> sql_string.h:248</div></div>
<div class="ttc" id="my__memory_8cc_html_a3a3ddffcaadb60b7715c9889f8c56afb"><div class="ttname"><a href="my__memory_8cc.html#a3a3ddffcaadb60b7715c9889f8c56afb">my_free</a></div><div class="ttdeci">void my_free(void *ptr)</div><div class="ttdoc">Frees the memory pointed by the ptr. </div><div class="ttdef"><b>Definition:</b> my_memory.cc:81</div></div>
<div class="ttc" id="group__psi__abi__memory_html_ga902dd5c9fe51b8cbdd7438a30e43fdd0"><div class="ttname"><a href="group__psi__abi__memory.html#ga902dd5c9fe51b8cbdd7438a30e43fdd0">PSI_memory_key</a></div><div class="ttdeci">unsigned int PSI_memory_key</div><div class="ttdoc">Instrumented memory key. </div><div class="ttdef"><b>Definition:</b> psi_memory_bits.h:46</div></div>
<div class="ttc" id="m__string_8h_html"><div class="ttname"><a href="m__string_8h.html">m_string.h</a></div></div>
<div class="ttc" id="mysql__lex__string_8h_html"><div class="ttname"><a href="mysql__lex__string_8h.html">mysql_lex_string.h</a></div></div>
<div class="ttc" id="classString_html"><div class="ttname"><a href="classString.html">String</a></div><div class="ttdoc">Using this class is fraught with peril, and you need to be very careful when doing so...</div><div class="ttdef"><b>Definition:</b> sql_string.h:164</div></div>
<div class="ttc" id="classSimple__cstring_html_a01de78a66dbaa16aa9194463dcbe7acf"><div class="ttname"><a href="classSimple__cstring.html#a01de78a66dbaa16aa9194463dcbe7acf">Simple_cstring::Simple_cstring</a></div><div class="ttdeci">Simple_cstring(const LEX_STRING arg)</div><div class="ttdef"><b>Definition:</b> sql_string.h:92</div></div>
<div class="ttc" id="service__mysql__alloc_8h_html_ab71d77b4cc5e6962b28d940269b4d73d"><div class="ttname"><a href="service__mysql__alloc_8h.html#ab71d77b4cc5e6962b28d940269b4d73d">my_realloc</a></div><div class="ttdeci">void * my_realloc(PSI_memory_key key, void *ptr, size_t size, myf_t flags)</div><div class="ttdef"><b>Definition:</b> my_malloc.cc:94</div></div>
<div class="ttc" id="classSimple__cstring_html_a15df91c7ffce10f384a3f559756bb6cd"><div class="ttname"><a href="classSimple__cstring.html#a15df91c7ffce10f384a3f559756bb6cd">Simple_cstring::eq_bin</a></div><div class="ttdeci">bool eq_bin(const Simple_cstring other) const</div><div class="ttdoc">Compare to another Simple_cstring. </div><div class="ttdef"><b>Definition:</b> sql_string.h:114</div></div>
<div class="ttc" id="lex__string_8h_html"><div class="ttname"><a href="lex__string_8h.html">lex_string.h</a></div></div>
<div class="ttc" id="classString_html_ae5df62c21d238ec13becaa68d28dbecc"><div class="ttname"><a href="classString.html#ae5df62c21d238ec13becaa68d28dbecc">String::m_is_alloced</a></div><div class="ttdeci">bool m_is_alloced</div><div class="ttdef"><b>Definition:</b> sql_string.h:170</div></div>
<div class="ttc" id="classString_html_aec6af13c8b30015c822f06ad5c64de40"><div class="ttname"><a href="classString.html#aec6af13c8b30015c822f06ad5c64de40">String::mem_claim</a></div><div class="ttdeci">void mem_claim(bool claim)</div><div class="ttdef"><b>Definition:</b> sql_string.h:369</div></div>
<div class="ttc" id="classString_html_a5a23e9f3c29695db3eb810c32c39a0a1"><div class="ttname"><a href="classString.html#a5a23e9f3c29695db3eb810c32c39a0a1">String::String</a></div><div class="ttdeci">String(const char *str, size_t len, const CHARSET_INFO *cs)</div><div class="ttdef"><b>Definition:</b> sql_string.h:193</div></div>
<div class="ttc" id="psi__base_8h_html"><div class="ttname"><a href="psi__base_8h.html">psi_base.h</a></div><div class="ttdoc">Performance schema instrumentation interface. </div></div>
<div class="ttc" id="classString_html_a7ec34d778c9d4728803db8bbd24e5f14"><div class="ttname"><a href="classString.html#a7ec34d778c9d4728803db8bbd24e5f14">String::String</a></div><div class="ttdeci">String(const char *str, const CHARSET_INFO *cs)</div><div class="ttdef"><b>Definition:</b> sql_string.h:187</div></div>
<div class="ttc" id="sql__string_8h_html_ad42b217141e04762bdc1d341b94e73b6"><div class="ttname"><a href="sql__string_8h.html#ad42b217141e04762bdc1d341b94e73b6">bin_to_hex_str</a></div><div class="ttdeci">size_t bin_to_hex_str(char *to, size_t to_len, const char *from, size_t from_len)</div><div class="ttdoc">Convert a buffer to printable HEX encoded string For eg: ABCDEF1234. </div><div class="ttdef"><b>Definition:</b> sql_string.cc:1112</div></div>
<div class="ttc" id="memory__debugging_8h_html"><div class="ttname"><a href="memory__debugging_8h.html">memory_debugging.h</a></div><div class="ttdoc">Various macros useful for communicating with memory debuggers, such as Valgrind. </div></div>
<div class="ttc" id="my__dbug_8h_html_af5d75f213550ec27715b65d9bdfa45ec"><div class="ttname"><a href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a></div><div class="ttdeci">#define DBUG_ASSERT(A)</div><div class="ttdef"><b>Definition:</b> my_dbug.h:199</div></div>
<div class="ttc" id="classSimple__cstring_html_ad2f0e6cf2053b67606e900deb79d132d"><div class="ttname"><a href="classSimple__cstring.html#ad2f0e6cf2053b67606e900deb79d132d">Simple_cstring::Simple_cstring</a></div><div class="ttdeci">Simple_cstring(const LEX_CSTRING arg)</div><div class="ttdef"><b>Definition:</b> sql_string.h:93</div></div>
<div class="ttc" id="classString_html_aea2f656a9f5fd201219a7192d72ebd1c"><div class="ttname"><a href="classString.html#aea2f656a9f5fd201219a7192d72ebd1c">String::is_alloced</a></div><div class="ttdeci">bool is_alloced() const</div><div class="ttdef"><b>Definition:</b> sql_string.h:412</div></div>
<div class="ttc" id="classStringBuffer_html"><div class="ttname"><a href="classStringBuffer.html">StringBuffer</a></div><div class="ttdoc">String class wrapper with a preallocated buffer of size buff_sz. </div><div class="ttdef"><b>Definition:</b> sql_string.h:624</div></div>
<div class="ttc" id="classString_html_a5774bcd4a4c232a8aec5a3ec6d01a157"><div class="ttname"><a href="classString.html#a5774bcd4a4c232a8aec5a3ec6d01a157">String::String</a></div><div class="ttdeci">String(const String &amp;str)</div><div class="ttdef"><b>Definition:</b> sql_string.h:205</div></div>
<div class="ttc" id="sql__string_8cc_html_a8af1b5188682b7b103a253cc1a6b2e54"><div class="ttname"><a href="sql__string_8cc.html#a8af1b5188682b7b103a253cc1a6b2e54">stringcmp</a></div><div class="ttdeci">int stringcmp(const String *s, const String *t)</div><div class="ttdef"><b>Definition:</b> sql_string.cc:741</div></div>
<div class="ttc" id="classString_html_a1fc22c8a9205f5cb9bc75bbcfeabc9c6"><div class="ttname"><a href="classString.html#a1fc22c8a9205f5cb9bc75bbcfeabc9c6">String::ptr</a></div><div class="ttdeci">char * ptr()</div><div class="ttdef"><b>Definition:</b> sql_string.h:247</div></div>
<div class="ttc" id="types_8h_html_a0e5c6616993f332b0721dfa8daa2b0d6"><div class="ttname"><a href="types_8h.html#a0e5c6616993f332b0721dfa8daa2b0d6">mem_free</a></div><div class="ttdeci">#define mem_free(ptr, bsize)</div><div class="ttdef"><b>Definition:</b> types.h:63</div></div>
<div class="ttc" id="sql__string_8h_html_ad523e8e2b149040ed7f9509262852599"><div class="ttname"><a href="sql__string_8h.html#ad523e8e2b149040ed7f9509262852599">STRING_PSI_MEMORY_KEY</a></div><div class="ttdeci">#define STRING_PSI_MEMORY_KEY</div><div class="ttdef"><b>Definition:</b> sql_string.h:55</div></div>
<div class="ttc" id="classString_html_a29ff59e3ec14e5a6233ae15ffe8098fc"><div class="ttname"><a href="classString.html#a29ff59e3ec14e5a6233ae15ffe8098fc">String::append</a></div><div class="ttdeci">bool append(Simple_cstring str)</div><div class="ttdef"><b>Definition:</b> sql_string.h:499</div></div>
<div class="ttc" id="test__mysql__runtime__error_8cc_html_ab3b3804e3bf2734c0f4f1c72f30df1bd"><div class="ttname"><a href="test__mysql__runtime__error_8cc.html#ab3b3804e3bf2734c0f4f1c72f30df1bd">MYF</a></div><div class="ttdeci">#define MYF(v)</div></div>
<div class="ttc" id="classStringBuffer_html_a84fa87669be8fa84c5be9ae630e67b5f"><div class="ttname"><a href="classStringBuffer.html#a84fa87669be8fa84c5be9ae630e67b5f">StringBuffer::StringBuffer</a></div><div class="ttdeci">StringBuffer(const CHARSET_INFO *cs)</div><div class="ttdef"><b>Definition:</b> sql_string.h:629</div></div>
<div class="ttc" id="classSimple__cstring_html_a893a2459319f0f71da46359d58e1e4b6"><div class="ttname"><a href="classSimple__cstring.html#a893a2459319f0f71da46359d58e1e4b6">Simple_cstring::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> sql_string.h:94</div></div>
<div class="ttc" id="classString_html_a6c97ee4fce217ca7892141226c4d24a2"><div class="ttname"><a href="classString.html#a6c97ee4fce217ca7892141226c4d24a2">String::is_ascii</a></div><div class="ttdeci">bool is_ascii() const</div><div class="ttdef"><b>Definition:</b> sql_string.h:588</div></div>
<div class="ttc" id="namespacerules__table__service_html_a71d6ca457fe4ae5d5151f92c06cc3fd3"><div class="ttname"><a href="namespacerules__table__service.html#a71d6ca457fe4ae5d5151f92c06cc3fd3">rules_table_service::end</a></div><div class="ttdeci">Cursor end()</div><div class="ttdoc">A past-the-end Cursor. </div><div class="ttdef"><b>Definition:</b> rules_table_service.cc:188</div></div>
<div class="ttc" id="structMYSQL__LEX__CSTRING_html_a8f240ebce8d7084b44bcffa514183dc8"><div class="ttname"><a href="structMYSQL__LEX__CSTRING.html#a8f240ebce8d7084b44bcffa514183dc8">MYSQL_LEX_CSTRING::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition:</b> mysql_lex_string.h:41</div></div>
<div class="ttc" id="classString_html_a766bd5117b1be075f635568ff9eaf75e"><div class="ttname"><a href="classString.html#a766bd5117b1be075f635568ff9eaf75e">String::set_charset</a></div><div class="ttdeci">void set_charset(const CHARSET_INFO *charset_arg)</div><div class="ttdef"><b>Definition:</b> sql_string.h:236</div></div>
<div class="ttc" id="structIO__CACHE_html"><div class="ttname"><a href="structIO__CACHE.html">IO_CACHE</a></div><div class="ttdef"><b>Definition:</b> my_sys.h:338</div></div>
<div class="ttc" id="m__ctype_8h_html_af9b56f41152c5a2649fade58a507b707"><div class="ttname"><a href="m__ctype_8h.html#af9b56f41152c5a2649fade58a507b707">MY_SEQ_SPACES</a></div><div class="ttdeci">#define MY_SEQ_SPACES</div><div class="ttdef"><b>Definition:</b> m_ctype.h:106</div></div>
<div class="ttc" id="sql__string_8h_html_a6d827230a7fee64f8a6b9962313b26d7"><div class="ttname"><a href="sql__string_8h.html#a6d827230a7fee64f8a6b9962313b26d7">well_formed_copy_nchars</a></div><div class="ttdeci">size_t well_formed_copy_nchars(const CHARSET_INFO *to_cs, char *to, size_t to_length, const CHARSET_INFO *from_cs, const char *from, size_t from_length, size_t nchars, const char **well_formed_error_pos, const char **cannot_convert_error_pos, const char **from_end_pos)</div><div class="ttdef"><b>Definition:</b> sql_string.cc:819</div></div>
<div class="ttc" id="my__compiler_8h_html"><div class="ttname"><a href="my__compiler_8h.html">my_compiler.h</a></div><div class="ttdoc">Header for compiler-dependent features. </div></div>
<div class="ttc" id="m__ctype_8h_html_a57bc6fceeedca69f6066fc5d529ad982"><div class="ttname"><a href="m__ctype_8h.html#a57bc6fceeedca69f6066fc5d529ad982">my_isascii</a></div><div class="ttdeci">#define my_isascii(c)</div><div class="ttdef"><b>Definition:</b> m_ctype.h:651</div></div>
<div class="ttc" id="classString_html_a811f2cccdf2c7a21b68459d001fd7e2c"><div class="ttname"><a href="classString.html#a811f2cccdf2c7a21b68459d001fd7e2c">String::set_quick</a></div><div class="ttdeci">void set_quick(char *str, size_t arg_length, const CHARSET_INFO *cs)</div><div class="ttdef"><b>Definition:</b> sql_string.h:314</div></div>
<div class="ttc" id="sql__string_8h_html_ae807275f19ee4ed8973f5e7c9dc4cb2b"><div class="ttname"><a href="sql__string_8h.html#ae807275f19ee4ed8973f5e7c9dc4cb2b">validate_string</a></div><div class="ttdeci">bool validate_string(const CHARSET_INFO *cs, const char *str, size_t length, size_t *valid_length, bool *length_error)</div><div class="ttdoc">Check if an input byte sequence is a valid character string of a given charset. </div><div class="ttdef"><b>Definition:</b> sql_string.cc:1162</div></div>
<div class="ttc" id="uca-dump_8cc_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> uca-dump.cc:29</div></div>
<div class="ttc" id="classString_html_ab4ef1ab40ed8cc7864321c48509fae56"><div class="ttname"><a href="classString.html#ab4ef1ab40ed8cc7864321c48509fae56">String::operator[]</a></div><div class="ttdeci">const char &amp; operator[](size_t i) const</div><div class="ttdef"><b>Definition:</b> sql_string.h:240</div></div>
<div class="ttc" id="my__inttypes_8h_html_a9c0acdcb1b083d30069a62cee1ece644"><div class="ttname"><a href="my__inttypes_8h.html#a9c0acdcb1b083d30069a62cee1ece644">longlong</a></div><div class="ttdeci">long long int longlong</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:54</div></div>
<div class="ttc" id="classString_html_afefc541e086aca0de9ad738a63827546"><div class="ttname"><a href="classString.html#afefc541e086aca0de9ad738a63827546">String::uses_buffer_owned_by</a></div><div class="ttdeci">bool uses_buffer_owned_by(const String *s) const</div><div class="ttdef"><b>Definition:</b> sql_string.h:584</div></div>
<div class="ttc" id="structMY__CHARSET__HANDLER_html_ad25c30bca760d5d3094d4fa0b7157bd7"><div class="ttname"><a href="structMY__CHARSET__HANDLER.html#ad25c30bca760d5d3094d4fa0b7157bd7">MY_CHARSET_HANDLER::scan</a></div><div class="ttdeci">size_t(* scan)(const CHARSET_INFO *, const char *b, const char *e, int sq)</div><div class="ttdef"><b>Definition:</b> m_ctype.h:351</div></div>
<div class="ttc" id="my__inttypes_8h_html_acbd4acd0d29e2d6c43104827f77d9cd2"><div class="ttname"><a href="my__inttypes_8h.html#acbd4acd0d29e2d6c43104827f77d9cd2">uint32</a></div><div class="ttdeci">uint32_t uint32</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:66</div></div>
<div class="ttc" id="classString_html_a07dbf843862b96a0171a01637197e814"><div class="ttname"><a href="classString.html#a07dbf843862b96a0171a01637197e814">String::lex_cstring</a></div><div class="ttdeci">LEX_CSTRING lex_cstring() const</div><div class="ttdef"><b>Definition:</b> sql_string.h:272</div></div>
<div class="ttc" id="classSimple__cstring_html"><div class="ttname"><a href="classSimple__cstring.html">Simple_cstring</a></div><div class="ttdoc">A wrapper class for null-terminated constant strings. </div><div class="ttdef"><b>Definition:</b> sql_string.h:71</div></div>
<div class="ttc" id="suite__stubs_8c_html_abc6dbb856376b98a77f0de293e607c34"><div class="ttname"><a href="suite__stubs_8c.html#abc6dbb856376b98a77f0de293e607c34">append</a></div><div class="ttdeci">void append(ENGINE_HANDLE *h, ENGINE_HANDLE_V1 *h1)</div><div class="ttdef"><b>Definition:</b> suite_stubs.c:73</div></div>
<div class="ttc" id="structCHARSET__INFO_html"><div class="ttname"><a href="structCHARSET__INFO.html">CHARSET_INFO</a></div><div class="ttdef"><b>Definition:</b> m_ctype.h:359</div></div>
<div class="ttc" id="classString_html_a90e33aa0202353703ee87c12f9038a38"><div class="ttname"><a href="classString.html#a90e33aa0202353703ee87c12f9038a38">String::append</a></div><div class="ttdeci">bool append(char chr)</div><div class="ttdef"><b>Definition:</b> sql_string.h:536</div></div>
<div class="ttc" id="classSimple__cstring_html_ad55b02ad25fa2ea4fa556af0da0b32b0"><div class="ttname"><a href="classSimple__cstring.html#ad55b02ad25fa2ea4fa556af0da0b32b0">Simple_cstring::m_length</a></div><div class="ttdeci">size_t m_length</div><div class="ttdef"><b>Definition:</b> sql_string.h:74</div></div>
<div class="ttc" id="sql__string_8h_html_abfbb0c64199ee2793530081187ab5358"><div class="ttname"><a href="sql__string_8h.html#abfbb0c64199ee2793530081187ab5358">sortcmp</a></div><div class="ttdeci">int sortcmp(const String *a, const String *b, const CHARSET_INFO *cs)</div><div class="ttdef"><b>Definition:</b> sql_string.cc:718</div></div>
<div class="ttc" id="classSimple__cstring_html_a533ca91541b1e592c7e89e3fb6d08a89"><div class="ttname"><a href="classSimple__cstring.html#a533ca91541b1e592c7e89e3fb6d08a89">Simple_cstring::ptr</a></div><div class="ttdeci">const char * ptr() const</div><div class="ttdoc">Return string buffer. </div><div class="ttdef"><b>Definition:</b> sql_string.h:102</div></div>
<div class="ttc" id="json__dom_8cc_html_a018b61b42d8ca57123bb8e4bfdd67269"><div class="ttname"><a href="json__dom_8cc.html#a018b61b42d8ca57123bb8e4bfdd67269">reserve</a></div><div class="ttdeci">static bool reserve(String *buffer, size_t needed)</div><div class="ttdoc">Reserve space in a string buffer. </div><div class="ttdef"><b>Definition:</b> json_dom.cc:1185</div></div>
<div class="ttc" id="classString_html_a8a7ef356e05eb9b1ea1ab518baee3095"><div class="ttname"><a href="classString.html#a8a7ef356e05eb9b1ea1ab518baee3095">String::String</a></div><div class="ttdeci">String()</div><div class="ttdef"><b>Definition:</b> sql_string.h:173</div></div>
<div class="ttc" id="structMYSQL__LEX__STRING_html_adc0f5b45a80690636b88ca4866bfc557"><div class="ttname"><a href="structMYSQL__LEX__STRING.html#adc0f5b45a80690636b88ca4866bfc557">MYSQL_LEX_STRING::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition:</b> mysql_lex_string.h:36</div></div>
<div class="ttc" id="classSimple__cstring_html_afafa83524ca844b55fcd0663f84dcc6f"><div class="ttname"><a href="classSimple__cstring.html#afafa83524ca844b55fcd0663f84dcc6f">Simple_cstring::Simple_cstring</a></div><div class="ttdeci">Simple_cstring()</div><div class="ttdef"><b>Definition:</b> sql_string.h:88</div></div>
<div class="ttc" id="classSimple__cstring_html_ad27c10d91a1df77dc72af9fb3e94b4ac"><div class="ttname"><a href="classSimple__cstring.html#ad27c10d91a1df77dc72af9fb3e94b4ac">Simple_cstring::strcpy</a></div><div class="ttdeci">void strcpy(char *buff) const</div><div class="ttdoc">Copy to the given buffer. </div><div class="ttdef"><b>Definition:</b> sql_string.h:121</div></div>
<div class="ttc" id="client__plugin_8cc_html_a7d0fe2f135db987da18cea87b4778737"><div class="ttname"><a href="client__plugin_8cc.html#a7d0fe2f135db987da18cea87b4778737">mem_root</a></div><div class="ttdeci">static MEM_ROOT mem_root</div><div class="ttdef"><b>Definition:</b> client_plugin.cc:109</div></div>
<div class="ttc" id="classString_html_a2660513977128f7a2b4a56003d2bf0f3"><div class="ttname"><a href="classString.html#a2660513977128f7a2b4a56003d2bf0f3">String::m_alloced_length</a></div><div class="ttdeci">uint32 m_alloced_length</div><div class="ttdef"><b>Definition:</b> sql_string.h:169</div></div>
<div class="ttc" id="classString_html_a20db828e6fdfd135bb89939f6d82f5f7"><div class="ttname"><a href="classString.html#a20db828e6fdfd135bb89939f6d82f5f7">String::append</a></div><div class="ttdeci">bool append(LEX_STRING *ls)</div><div class="ttdef"><b>Definition:</b> sql_string.h:498</div></div>
<div class="ttc" id="classString_html_a48abaabf4ba129e4797f432e24f2d63b"><div class="ttname"><a href="classString.html#a48abaabf4ba129e4797f432e24f2d63b">String::String</a></div><div class="ttdeci">String(String &amp;&amp;str) noexcept</div><div class="ttdef"><b>Definition:</b> sql_string.h:211</div></div>
<div class="ttc" id="classStringBuffer_html_aa37fe73fb7554c469b01e6b6b02700e7"><div class="ttname"><a href="classStringBuffer.html#aa37fe73fb7554c469b01e6b6b02700e7">StringBuffer::StringBuffer</a></div><div class="ttdeci">StringBuffer(const char *str, size_t length, const CHARSET_INFO *cs)</div><div class="ttdef"><b>Definition:</b> sql_string.h:632</div></div>
<div class="ttc" id="classString_html_aef828c49648333b3993a9260290f0b0e"><div class="ttname"><a href="classString.html#aef828c49648333b3993a9260290f0b0e">String::is_valid_string</a></div><div class="ttdeci">bool is_valid_string(const CHARSET_INFO *cs_to) const</div><div class="ttdef"><b>Definition:</b> sql_string.h:481</div></div>
<div class="ttc" id="classString_html_ad717a9ab04b2116e678e2e7029efce27"><div class="ttname"><a href="classString.html#ad717a9ab04b2116e678e2e7029efce27">String::length</a></div><div class="ttdeci">void length(size_t len)</div><div class="ttdef"><b>Definition:</b> sql_string.h:242</div></div>
<div class="ttc" id="my__dbug_8h_html"><div class="ttname"><a href="my__dbug_8h.html">my_dbug.h</a></div></div>
<div class="ttc" id="psi_2psi__memory_8h_html"><div class="ttname"><a href="psi_2psi__memory_8h.html">psi_memory.h</a></div><div class="ttdoc">Performance schema instrumentation interface. </div></div>
<div class="ttc" id="classString_html_ac40b2a3fb58c2d8556f5e6ff73510036"><div class="ttname"><a href="classString.html#ac40b2a3fb58c2d8556f5e6ff73510036">String::~String</a></div><div class="ttdeci">~String()</div><div class="ttdef"><b>Definition:</b> sql_string.h:234</div></div>
<div class="ttc" id="sql__string_8h_html_a33a6167c1ba6e6378491ee5b4c71abbb"><div class="ttname"><a href="sql__string_8h.html#a33a6167c1ba6e6378491ee5b4c71abbb">check_if_only_end_space</a></div><div class="ttdeci">static bool check_if_only_end_space(const CHARSET_INFO *cs, const char *str, const char *end)</div><div class="ttdef"><b>Definition:</b> sql_string.h:638</div></div>
<div class="ttc" id="classSimple__cstring_html_a0880f92974017d7d368a0da250d0d509"><div class="ttname"><a href="classSimple__cstring.html#a0880f92974017d7d368a0da250d0d509">Simple_cstring::m_str</a></div><div class="ttdeci">const char * m_str</div><div class="ttdef"><b>Definition:</b> sql_string.h:73</div></div>
<div class="ttc" id="classString_html_a347ef2e15adc6b5bc64551f8d91417d3"><div class="ttname"><a href="classString.html#a347ef2e15adc6b5bc64551f8d91417d3">String::mem_free</a></div><div class="ttdeci">void mem_free()</div><div class="ttdef"><b>Definition:</b> sql_string.h:375</div></div>
<div class="ttc" id="classString_html_a86e65821760a167b56452d405bd905ec"><div class="ttname"><a href="classString.html#a86e65821760a167b56452d405bd905ec">String::m_ptr</a></div><div class="ttdeci">char * m_ptr</div><div class="ttdef"><b>Definition:</b> sql_string.h:165</div></div>
<div class="ttc" id="classString_html_a83fff29f7ded1ef00c6d45b42b176c9f"><div class="ttname"><a href="classString.html#a83fff29f7ded1ef00c6d45b42b176c9f">String::prep_append</a></div><div class="ttdeci">char * prep_append(size_t arg_length, size_t step_alloc)</div><div class="ttdef"><b>Definition:</b> sql_string.h:560</div></div>
<div class="ttc" id="sql__string_8h_html_aa04fcfeaf528cf9bbc4b3fff7d6c2466"><div class="ttname"><a href="sql__string_8h.html#aa04fcfeaf528cf9bbc4b3fff7d6c2466">swap</a></div><div class="ttdeci">static void swap(String &amp;a, String &amp;b) noexcept</div><div class="ttdef"><b>Definition:</b> sql_string.h:606</div></div>
<div class="ttc" id="classString_html_adeb3c645da2b33173c87c97ea21aaaf9"><div class="ttname"><a href="classString.html#adeb3c645da2b33173c87c97ea21aaaf9">String::charset</a></div><div class="ttdeci">const CHARSET_INFO * charset() const</div><div class="ttdef"><b>Definition:</b> sql_string.h:237</div></div>
<div class="ttc" id="m__ctype_8h_html"><div class="ttname"><a href="m__ctype_8h.html">m_ctype.h</a></div><div class="ttdoc">A better implementation of the UNIX ctype(3) library. </div></div>
<div class="ttc" id="m__ctype_8h_html_aa4bb45da77755c7a221e0bff25562753"><div class="ttname"><a href="m__ctype_8h.html#aa4bb45da77755c7a221e0bff25562753">my_charset_bin</a></div><div class="ttdeci">MYSQL_PLUGIN_IMPORT CHARSET_INFO my_charset_bin</div><div class="ttdef"><b>Definition:</b> ctype-bin.cc:510</div></div>
<div class="ttc" id="classString_html_a0d951103f43885f15382fe748306fdb0"><div class="ttname"><a href="classString.html#a0d951103f43885f15382fe748306fdb0">String::m_charset</a></div><div class="ttdeci">const CHARSET_INFO * m_charset</div><div class="ttdef"><b>Definition:</b> sql_string.h:167</div></div>
<div class="ttc" id="classString_html_a0929658a59b5b795519533b28a532324"><div class="ttname"><a href="classString.html#a0929658a59b5b795519533b28a532324">String::lex_string</a></div><div class="ttdeci">LEX_STRING lex_string()</div><div class="ttdef"><b>Definition:</b> sql_string.h:270</div></div>
<div class="ttc" id="classString_html_ac713769c0500de1f935356a8259ce88c"><div class="ttname"><a href="classString.html#ac713769c0500de1f935356a8259ce88c">String::mark_as_const</a></div><div class="ttdeci">void mark_as_const()</div><div class="ttdef"><b>Definition:</b> sql_string.h:244</div></div>
<div class="ttc" id="m__ctype_8h_html_a021d91630a02c4cebe7c4bf6df76b5e8"><div class="ttname"><a href="m__ctype_8h.html#a021d91630a02c4cebe7c4bf6df76b5e8">my_convert</a></div><div class="ttdeci">size_t my_convert(char *to, size_t to_length, const CHARSET_INFO *to_cs, const char *from, size_t from_length, const CHARSET_INFO *from_cs, uint *errors)</div><div class="ttdoc">Convert a string between two character sets. </div><div class="ttdef"><b>Definition:</b> ctype.cc:933</div></div>
<div class="ttc" id="classString_html_a24dc175293fc77f5fd4643011c6e0372"><div class="ttname"><a href="classString.html#a24dc175293fc77f5fd4643011c6e0372">String::is_empty</a></div><div class="ttdeci">bool is_empty() const</div><div class="ttdef"><b>Definition:</b> sql_string.h:243</div></div>
<div class="ttc" id="classString_html_a36e2d4a832274ed2718c9edf63041f08"><div class="ttname"><a href="classString.html#a36e2d4a832274ed2718c9edf63041f08">String::ptr</a></div><div class="ttdeci">const char * ptr() const</div><div class="ttdef"><b>Definition:</b> sql_string.h:246</div></div>
<div class="ttc" id="structMEM__ROOT_html"><div class="ttname"><a href="structMEM__ROOT.html">MEM_ROOT</a></div><div class="ttdoc">The MEM_ROOT is a simple arena, where allocations are carved out of larger blocks. </div><div class="ttdef"><b>Definition:</b> my_alloc.h:77</div></div>
<div class="ttc" id="classSimple__cstring_html_ab4e55015a7e231b0a86b1b74d755b3f6"><div class="ttname"><a href="classSimple__cstring.html#ab4e55015a7e231b0a86b1b74d755b3f6">Simple_cstring::length</a></div><div class="ttdeci">size_t length() const</div><div class="ttdoc">Return name length. </div><div class="ttdef"><b>Definition:</b> sql_string.h:110</div></div>
<div class="ttc" id="classSimple__cstring_html_a6c92e4edf06d1944567352f3e1e796dc"><div class="ttname"><a href="classSimple__cstring.html#a6c92e4edf06d1944567352f3e1e796dc">Simple_cstring::is_set</a></div><div class="ttdeci">bool is_set() const</div><div class="ttdoc">Check if m_ptr is set. </div><div class="ttdef"><b>Definition:</b> sql_string.h:106</div></div>
<div class="ttc" id="structCHARSET__INFO_html_aa3dd3461b180f806b3310c749ffa0c05"><div class="ttname"><a href="structCHARSET__INFO.html#aa3dd3461b180f806b3310c749ffa0c05">CHARSET_INFO::cset</a></div><div class="ttdeci">MY_CHARSET_HANDLER * cset</div><div class="ttdef"><b>Definition:</b> m_ctype.h:391</div></div>
<div class="ttc" id="sql__string_8h_html_a233b102144a0d42601187b1d19892f38"><div class="ttname"><a href="sql__string_8h.html#a233b102144a0d42601187b1d19892f38">to_lex_cstring</a></div><div class="ttdeci">LEX_CSTRING to_lex_cstring(const LEX_STRING &amp;s)</div><div class="ttdef"><b>Definition:</b> sql_string.h:643</div></div>
<div class="ttc" id="classString_html_a6525ef59b43a4e8cc13892419c9f90c2"><div class="ttname"><a href="classString.html#a6525ef59b43a4e8cc13892419c9f90c2">String::m_length</a></div><div class="ttdeci">size_t m_length</div><div class="ttdef"><b>Definition:</b> sql_string.h:166</div></div>
<div class="ttc" id="sql__string_8h_html_a38c763d51afb4830e5eb05b0aeea4720"><div class="ttname"><a href="sql__string_8h.html#a38c763d51afb4830e5eb05b0aeea4720">copy_if_not_alloced</a></div><div class="ttdeci">String * copy_if_not_alloced(String *to, String *from, size_t from_length)</div><div class="ttdoc">Makes a copy of a String&amp;#39;s buffer unless it&amp;#39;s already heap-allocated. </div><div class="ttdef"><b>Definition:</b> sql_string.cc:770</div></div>
<div class="ttc" id="classString_html_aaa3e15c1bdfb54bc1639b0d602407370"><div class="ttname"><a href="classString.html#aaa3e15c1bdfb54bc1639b0d602407370">String::append</a></div><div class="ttdeci">bool append(const char *s, size_t arg_length, size_t step_alloc)</div><div class="ttdef"><b>Definition:</b> sql_string.h:570</div></div>
<div class="ttc" id="sql__string_8h_html_ace6d42a480f6662de2301e31bd80e309"><div class="ttname"><a href="sql__string_8h.html#ace6d42a480f6662de2301e31bd80e309">to_lex_string</a></div><div class="ttdeci">LEX_STRING to_lex_string(const LEX_CSTRING &amp;s)</div><div class="ttdef"><b>Definition:</b> sql_string.h:648</div></div>
<div class="ttc" id="config__static_8h_html_a65e9886d74aaee76545e83dd09011727"><div class="ttname"><a href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></div><div class="ttdeci">#define false</div><div class="ttdef"><b>Definition:</b> config_static.h:43</div></div>
<div class="ttc" id="sql__string_8h_html_aa3dfb606f6d4399e1015527ee9b28a6b"><div class="ttname"><a href="sql__string_8h.html#aa3dfb606f6d4399e1015527ee9b28a6b">copy_and_convert</a></div><div class="ttdeci">size_t copy_and_convert(char *to, size_t to_length, const CHARSET_INFO *to_cs, const char *from, size_t from_length, const CHARSET_INFO *from_cs, uint *errors)</div><div class="ttdef"><b>Definition:</b> sql_string.h:136</div></div>
<div class="ttc" id="classString_html_ad3b888edbfb3bab21d4bae4663d2211a"><div class="ttname"><a href="classString.html#ad3b888edbfb3bab21d4bae4663d2211a">String::length</a></div><div class="ttdeci">size_t length() const</div><div class="ttdef"><b>Definition:</b> sql_string.h:238</div></div>
<div class="ttc" id="classString_html_af05f7df1db9885d2ff0daf8dcc77c2ea"><div class="ttname"><a href="classString.html#af05f7df1db9885d2ff0daf8dcc77c2ea">String::operator=</a></div><div class="ttdeci">String &amp; operator=(const String &amp;s)</div><div class="ttdef"><b>Definition:</b> sql_string.h:413</div></div>
<div class="ttc" id="classString_html_a9d3bc4052c9a7d1b97443527ca53f49e"><div class="ttname"><a href="classString.html#a9d3bc4052c9a7d1b97443527ca53f49e">String::c_ptr_quick</a></div><div class="ttdeci">char * c_ptr_quick()</div><div class="ttdef"><b>Definition:</b> sql_string.h:259</div></div>
<div class="ttc" id="sql__string_8h_html_abc69085a2d3f8217c20803019491e0dd"><div class="ttname"><a href="sql__string_8h.html#abc69085a2d3f8217c20803019491e0dd">convert_to_printable</a></div><div class="ttdeci">size_t convert_to_printable(char *to, size_t to_len, const char *from, size_t from_len, const CHARSET_INFO *from_cs, size_t nbytes=0)</div><div class="ttdoc">Convert string to printable ASCII string. </div><div class="ttdef"><b>Definition:</b> sql_string.cc:1055</div></div>
<div class="ttc" id="service__mysql__alloc_8h_html_aa4b1fa9ec96c70d5fab7fca1e99d96e6"><div class="ttname"><a href="service__mysql__alloc_8h.html#aa4b1fa9ec96c70d5fab7fca1e99d96e6">my_claim</a></div><div class="ttdeci">void my_claim(const void *ptr, bool claim)</div><div class="ttdef"><b>Definition:</b> my_malloc.cc:131</div></div>
<div class="ttc" id="classString_html_ad4918a8b58a8ba1412e24f728e712ad2"><div class="ttname"><a href="classString.html#ad4918a8b58a8ba1412e24f728e712ad2">String::alloced_length</a></div><div class="ttdeci">size_t alloced_length() const</div><div class="ttdef"><b>Definition:</b> sql_string.h:239</div></div>
<div class="ttc" id="namespaceCounter_html_a6129f96f99b4dc9358a7efaa40f84c30"><div class="ttname"><a href="namespaceCounter.html#a6129f96f99b4dc9358a7efaa40f84c30">Counter::copy</a></div><div class="ttdeci">void copy(Shards&lt; COUNT &gt; &amp;dst, const Shards&lt; COUNT &gt; &amp;src) noexcept</div><div class="ttdoc">Copy the counters, overwrite destination. </div><div class="ttdef"><b>Definition:</b> ut0counter.h:353</div></div>
<div class="ttc" id="my__alloc_8h_html"><div class="ttname"><a href="my__alloc_8h.html">my_alloc.h</a></div><div class="ttdoc">This file follows Google coding style, except for the name MEM_ROOT (which is kept for historical rea...</div></div>
<div class="ttc" id="dialog_8cc_html_ae7bd12bd7c9e418a420087971d0a7e31"><div class="ttname"><a href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></div><div class="ttdeci">Dialog Client Authentication nullptr</div><div class="ttdef"><b>Definition:</b> dialog.cc:353</div></div>
<div class="ttc" id="classString_html_a6bdf56c5c17152e682bb0ece9fa9902f"><div class="ttname"><a href="classString.html#a6bdf56c5c17152e682bb0ece9fa9902f">String::String</a></div><div class="ttdeci">String(size_t length_arg)</div><div class="ttdef"><b>Definition:</b> sql_string.h:179</div></div>
<div class="ttc" id="classStringBuffer_html_a72cc4a3fd16f94fd27f8abf55fe20fac"><div class="ttname"><a href="classStringBuffer.html#a72cc4a3fd16f94fd27f8abf55fe20fac">StringBuffer::StringBuffer</a></div><div class="ttdeci">StringBuffer()</div><div class="ttdef"><b>Definition:</b> sql_string.h:628</div></div>
<div class="ttc" id="classString_html_a4f0aade1c440020ce7c1840a31099131"><div class="ttname"><a href="classString.html#a4f0aade1c440020ce7c1840a31099131">String::needs_conversion</a></div><div class="ttdeci">bool needs_conversion(const CHARSET_INFO *cs_to) const</div><div class="ttdef"><b>Definition:</b> sql_string.h:477</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="sql__string_8h.html">sql_string.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
