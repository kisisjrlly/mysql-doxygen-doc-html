<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: storage/innobase/fts/fts0opt.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fts0opt_8cc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fts0opt.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Full Text Search optimize thread.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;<a class="el" href="time_8h_source.html">time.h</a>&gt;</code><br />
<code>#include &lt;zlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="current__thd_8h_source.html">current_thd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dict0dd_8h_source.html">dict0dd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fts0fts_8h_source.html">fts0fts.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fts0opt_8h_source.html">fts0opt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fts0priv_8h_source.html">fts0priv.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fts0types_8h_source.html">fts0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ha__prototypes_8h_source.html">ha_prototypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="os0thread-create_8h_source.html">os0thread-create.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="que0types_8h_source.html">que0types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="row0sel_8h_source.html">row0sel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sql__thd__internal__api_8h_source.html">sql_thd_internal_api.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="srv0start_8h_source.html">srv0start.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0list_8h_source.html">ut0list.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ut0wqueue_8h_source.html">ut0wqueue.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfts__zip__t.html">fts_zip_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compressed list of words that have been read from FTS INDEX that needs to be optimized.  <a href="structfts__zip__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfts__optimize__graph__t.html">fts_optimize_graph_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepared statemets used during optimize.  <a href="structfts__optimize__graph__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by fts_optimize() to store state.  <a href="structfts__optimize__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfts__encode__t.html">fts_encode_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by the optimize, to keep state during compacting nodes.  <a href="structfts__encode__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfts__slot__t.html">fts_slot_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">We use this information to determine when to start the optimize cycle for a table.  <a href="structfts__slot__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfts__msg__id__t.html">fts_msg_id_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A table remove message for the FTS optimize thread.  <a href="structfts__msg__id__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfts__msg__t.html">fts_msg_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The FTS optimize message work queue message type.  <a href="structfts__msg__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa20871660892f7c4dc4d3e52968ea04e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aa20871660892f7c4dc4d3e52968ea04e">FTS_DEBUG_PRINT</a></td></tr>
<tr class="separator:aa20871660892f7c4dc4d3e52968ea04e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa59ca3d868bbb40eccb3e4c48c1987d2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aa59ca3d868bbb40eccb3e4c48c1987d2">fts_state_t</a> { <br />
&#160;&#160;<a class="el" href="fts0opt_8cc.html#aa59ca3d868bbb40eccb3e4c48c1987d2a757ebd804c1e73eead23a8ee297c9f88">FTS_STATE_LOADED</a>, 
<a class="el" href="fts0opt_8cc.html#aa59ca3d868bbb40eccb3e4c48c1987d2abd8a154d1b666dee198405e26bbc5902">FTS_STATE_RUNNING</a>, 
<a class="el" href="fts0opt_8cc.html#aa59ca3d868bbb40eccb3e4c48c1987d2a295dca535554276a6a38285faf7b2ac8">FTS_STATE_SUSPENDED</a>, 
<a class="el" href="fts0opt_8cc.html#aa59ca3d868bbb40eccb3e4c48c1987d2a6a8ca30959c6491b469048ed302d7d2c">FTS_STATE_DONE</a>, 
<br />
&#160;&#160;<a class="el" href="fts0opt_8cc.html#aa59ca3d868bbb40eccb3e4c48c1987d2a0f3a72f2a885b0c779cd2ba535f6ceac">FTS_STATE_EMPTY</a>
<br />
 }<tr class="memdesc:aa59ca3d868bbb40eccb3e4c48c1987d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">State of a table within the optimization sub system.  <a href="fts0opt_8cc.html#aa59ca3d868bbb40eccb3e4c48c1987d2">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:aa59ca3d868bbb40eccb3e4c48c1987d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783a90ba96c9586bd122cff92d8ebae1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1">fts_msg_type_t</a> { <br />
&#160;&#160;<a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1ac7231578307f6265a2d038a5d74397a4">FTS_MSG_START</a>, 
<a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1a36b45657abdf5aee8a4841f81e66ff15">FTS_MSG_PAUSE</a>, 
<a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1ae73863a3dc28a449b45a582fba64adc6">FTS_MSG_STOP</a>, 
<a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1a45c3850bba52835a5aac2a9789108f02">FTS_MSG_ADD_TABLE</a>, 
<br />
&#160;&#160;<a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1a3f07bc78bd1f055b5ac7c94687c483c0">FTS_MSG_OPTIMIZE_TABLE</a>, 
<a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1a212f24d2056eaedc06f596a2e0f36c60">FTS_MSG_DEL_TABLE</a>, 
<a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1a3327648d020b59bdfeeb910abfacfdf6">FTS_MSG_SYNC_TABLE</a>
<br />
 }<tr class="memdesc:a783a90ba96c9586bd122cff92d8ebae1"><td class="mdescLeft">&#160;</td><td class="mdescRight">FTS optimize thread message types.  <a href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a783a90ba96c9586bd122cff92d8ebae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8b18a366e608927ab4c3f20429b821d5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a8b18a366e608927ab4c3f20429b821d5">fts_zip_initialize</a> (<a class="el" href="structfts__zip__t.html">fts_zip_t</a> *zip)</td></tr>
<tr class="memdesc:a8b18a366e608927ab4c3f20429b821d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize fts_zip_t.  <a href="#a8b18a366e608927ab4c3f20429b821d5">More...</a><br /></td></tr>
<tr class="separator:a8b18a366e608927ab4c3f20429b821d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a654fb79e0354900f7a24fe2121da4588"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfts__zip__t.html">fts_zip_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a654fb79e0354900f7a24fe2121da4588">fts_zip_create</a> (<a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *heap, ulint block_sz, ulint max_words)</td></tr>
<tr class="memdesc:a654fb79e0354900f7a24fe2121da4588"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an instance of fts_zip_t.  <a href="#a654fb79e0354900f7a24fe2121da4588">More...</a><br /></td></tr>
<tr class="separator:a654fb79e0354900f7a24fe2121da4588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f15c73d46257530f33d446bfaadf467"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a7f15c73d46257530f33d446bfaadf467">fts_zip_init</a> (<a class="el" href="structfts__zip__t.html">fts_zip_t</a> *zip)</td></tr>
<tr class="memdesc:a7f15c73d46257530f33d446bfaadf467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an instance of fts_zip_t.  <a href="#a7f15c73d46257530f33d446bfaadf467">More...</a><br /></td></tr>
<tr class="separator:a7f15c73d46257530f33d446bfaadf467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eb5e0e59cd72f18d1e70ad0e589be4f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfts__word__t.html">fts_word_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a8eb5e0e59cd72f18d1e70ad0e589be4f">fts_word_init</a> (<a class="el" href="structfts__word__t.html">fts_word_t</a> *word, <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *utf8, ulint len)</td></tr>
<tr class="memdesc:a8eb5e0e59cd72f18d1e70ad0e589be4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a fts_optimizer_word_t instance.  <a href="#a8eb5e0e59cd72f18d1e70ad0e589be4f">More...</a><br /></td></tr>
<tr class="separator:a8eb5e0e59cd72f18d1e70ad0e589be4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d9327b75ae90f0115b8dccddb4c385"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfts__node__t.html">fts_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a22d9327b75ae90f0115b8dccddb4c385">fts_optimize_read_node</a> (<a class="el" href="structfts__word__t.html">fts_word_t</a> *word, <a class="el" href="que0types_8h.html#a3509f9b5d79a0b309f8250593e46ed00">que_node_t</a> *exp)</td></tr>
<tr class="memdesc:a22d9327b75ae90f0115b8dccddb4c385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the FTS INDEX row.  <a href="#a22d9327b75ae90f0115b8dccddb4c385">More...</a><br /></td></tr>
<tr class="separator:a22d9327b75ae90f0115b8dccddb4c385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a782387612a921e4214c5d51e79eefd56"><td class="memItemLeft" align="right" valign="top">ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a782387612a921e4214c5d51e79eefd56">fts_optimize_index_fetch_node</a> (void *row, void *user_arg)</td></tr>
<tr class="memdesc:a782387612a921e4214c5d51e79eefd56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to fetch the rows in an FTS INDEX record.  <a href="#a782387612a921e4214c5d51e79eefd56">More...</a><br /></td></tr>
<tr class="separator:a782387612a921e4214c5d51e79eefd56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62539d38e4f1ae4a948eed5874bf0953"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a62539d38e4f1ae4a948eed5874bf0953">fts_index_fetch_nodes</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="que0types_8h.html#a3052106eec0aaf80a6028b16f70372b1">que_t</a> **graph, <a class="el" href="structfts__table__t.html">fts_table_t</a> *fts_table, const <a class="el" href="structfts__string__t.html">fts_string_t</a> *word, <a class="el" href="structfts__fetch__t.html">fts_fetch_t</a> *fetch)</td></tr>
<tr class="memdesc:a62539d38e4f1ae4a948eed5874bf0953"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the rows from the FTS inde.  <a href="#a62539d38e4f1ae4a948eed5874bf0953">More...</a><br /></td></tr>
<tr class="separator:a62539d38e4f1ae4a948eed5874bf0953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a304825f20021b9db4330dc9f51a8cdfe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a304825f20021b9db4330dc9f51a8cdfe">fts_zip_read_word</a> (<a class="el" href="structfts__zip__t.html">fts_zip_t</a> *zip, <a class="el" href="structfts__string__t.html">fts_string_t</a> *word)</td></tr>
<tr class="memdesc:a304825f20021b9db4330dc9f51a8cdfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a word.  <a href="#a304825f20021b9db4330dc9f51a8cdfe">More...</a><br /></td></tr>
<tr class="separator:a304825f20021b9db4330dc9f51a8cdfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb6ccb3de655227b8a47a27c73de283"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a3bb6ccb3de655227b8a47a27c73de283">fts_fetch_index_words</a> (void *row, void *user_arg)</td></tr>
<tr class="memdesc:a3bb6ccb3de655227b8a47a27c73de283"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to fetch and compress the word in an FTS INDEX record.  <a href="#a3bb6ccb3de655227b8a47a27c73de283">More...</a><br /></td></tr>
<tr class="separator:a3bb6ccb3de655227b8a47a27c73de283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325f49ab713b36779e89aece81bb4b33"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a325f49ab713b36779e89aece81bb4b33">fts_zip_deflate_end</a> (<a class="el" href="structfts__zip__t.html">fts_zip_t</a> *zip)</td></tr>
<tr class="memdesc:a325f49ab713b36779e89aece81bb4b33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish Zip deflate.  <a href="#a325f49ab713b36779e89aece81bb4b33">More...</a><br /></td></tr>
<tr class="separator:a325f49ab713b36779e89aece81bb4b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf3eb20e3f8746aa3131875f064d7cf0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#adf3eb20e3f8746aa3131875f064d7cf0">fts_index_fetch_words</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim, const <a class="el" href="structfts__string__t.html">fts_string_t</a> *word, ulint n_words)</td></tr>
<tr class="memdesc:adf3eb20e3f8746aa3131875f064d7cf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the words from the FTS INDEX.  <a href="#adf3eb20e3f8746aa3131875f064d7cf0">More...</a><br /></td></tr>
<tr class="separator:adf3eb20e3f8746aa3131875f064d7cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4edc85debda9ddd9fb5043ccb800b746"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a4edc85debda9ddd9fb5043ccb800b746">fts_fetch_doc_ids</a> (void *row, void *user_arg)</td></tr>
<tr class="memdesc:a4edc85debda9ddd9fb5043ccb800b746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to fetch the doc id from the record.  <a href="#a4edc85debda9ddd9fb5043ccb800b746">More...</a><br /></td></tr>
<tr class="separator:a4edc85debda9ddd9fb5043ccb800b746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefdd19df9af8ceedda3b84f00bee46b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aefdd19df9af8ceedda3b84f00bee46b3">fts_table_fetch_doc_ids</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structfts__table__t.html">fts_table_t</a> *fts_table, <a class="el" href="structfts__doc__ids__t.html">fts_doc_ids_t</a> *doc_ids)</td></tr>
<tr class="memdesc:aefdd19df9af8ceedda3b84f00bee46b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the rows from a FTS common auxiliary table.  <a href="#aefdd19df9af8ceedda3b84f00bee46b3">More...</a><br /></td></tr>
<tr class="separator:aefdd19df9af8ceedda3b84f00bee46b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ae39777fc6245161db93a60f699816"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a59ae39777fc6245161db93a60f699816">fts_bsearch</a> (<a class="el" href="structfts__update__t.html">fts_update_t</a> *array, int lower, int upper, <a class="el" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> doc_id)</td></tr>
<tr class="memdesc:a59ae39777fc6245161db93a60f699816"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a binary search for a doc id in the array.  <a href="#a59ae39777fc6245161db93a60f699816">More...</a><br /></td></tr>
<tr class="separator:a59ae39777fc6245161db93a60f699816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960e88a06a1f846f2f16c8882ea24591"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a960e88a06a1f846f2f16c8882ea24591">fts_optimize_lookup</a> (<a class="el" href="structib__vector__t.html">ib_vector_t</a> *doc_ids, ulint lower, <a class="el" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> first_doc_id, <a class="el" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> last_doc_id)</td></tr>
<tr class="memdesc:a960e88a06a1f846f2f16c8882ea24591"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search in the to delete array whether any of the doc ids within the [first, last] range are to be deleted.  <a href="#a960e88a06a1f846f2f16c8882ea24591">More...</a><br /></td></tr>
<tr class="separator:a960e88a06a1f846f2f16c8882ea24591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d50f7caa9d3fcf5cfcddd64d372582"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a44d50f7caa9d3fcf5cfcddd64d372582">fts_optimize_encode_node</a> (<a class="el" href="structfts__node__t.html">fts_node_t</a> *node, <a class="el" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a> doc_id, <a class="el" href="structfts__encode__t.html">fts_encode_t</a> *enc)</td></tr>
<tr class="memdesc:a44d50f7caa9d3fcf5cfcddd64d372582"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode the word pos list into the node.  <a href="#a44d50f7caa9d3fcf5cfcddd64d372582">More...</a><br /></td></tr>
<tr class="separator:a44d50f7caa9d3fcf5cfcddd64d372582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abff94fcebe1e9f21cfa1e0b68471a040"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#abff94fcebe1e9f21cfa1e0b68471a040">fts_optimize_node</a> (<a class="el" href="structib__vector__t.html">ib_vector_t</a> *del_vec, int *del_pos, <a class="el" href="structfts__node__t.html">fts_node_t</a> *dst_node, <a class="el" href="structfts__node__t.html">fts_node_t</a> *src_node, <a class="el" href="structfts__encode__t.html">fts_encode_t</a> *enc)</td></tr>
<tr class="memdesc:abff94fcebe1e9f21cfa1e0b68471a040"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimize the data contained in a node.  <a href="#abff94fcebe1e9f21cfa1e0b68471a040">More...</a><br /></td></tr>
<tr class="separator:abff94fcebe1e9f21cfa1e0b68471a040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add7b8b857de7cdaab9557c54edcd14e9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#add7b8b857de7cdaab9557c54edcd14e9">fts_optimize_deleted_pos</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim, <a class="el" href="structfts__word__t.html">fts_word_t</a> *word)</td></tr>
<tr class="memdesc:add7b8b857de7cdaab9557c54edcd14e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the starting pos within the deleted doc id vector for a word.  <a href="#add7b8b857de7cdaab9557c54edcd14e9">More...</a><br /></td></tr>
<tr class="separator:add7b8b857de7cdaab9557c54edcd14e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2097b57a4fbb75a3586bd69cf90d804d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a2097b57a4fbb75a3586bd69cf90d804d">fts_optimize_word</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim, <a class="el" href="structfts__word__t.html">fts_word_t</a> *word)</td></tr>
<tr class="memdesc:a2097b57a4fbb75a3586bd69cf90d804d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compact the nodes for a word, we also remove any doc ids during the compaction pass.  <a href="#a2097b57a4fbb75a3586bd69cf90d804d">More...</a><br /></td></tr>
<tr class="separator:a2097b57a4fbb75a3586bd69cf90d804d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c513a33475b085d5b72e8fa3deafb27"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a6c513a33475b085d5b72e8fa3deafb27">fts_optimize_write_word</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structfts__table__t.html">fts_table_t</a> *fts_table, <a class="el" href="structfts__string__t.html">fts_string_t</a> *word, <a class="el" href="structib__vector__t.html">ib_vector_t</a> *nodes)</td></tr>
<tr class="memdesc:a6c513a33475b085d5b72e8fa3deafb27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the FTS index table.  <a href="#a6c513a33475b085d5b72e8fa3deafb27">More...</a><br /></td></tr>
<tr class="separator:a6c513a33475b085d5b72e8fa3deafb27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc76c5208080a9e36b4d6092c3bd783e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#acc76c5208080a9e36b4d6092c3bd783e">fts_word_free</a> (<a class="el" href="structfts__word__t.html">fts_word_t</a> *word)</td></tr>
<tr class="memdesc:acc76c5208080a9e36b4d6092c3bd783e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free fts_optimizer_word_t instanace.  <a href="#acc76c5208080a9e36b4d6092c3bd783e">More...</a><br /></td></tr>
<tr class="separator:acc76c5208080a9e36b4d6092c3bd783e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ffb86f86317b080b79f8ce46fc72068"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a4ffb86f86317b080b79f8ce46fc72068">fts_optimize_compact</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="ut0ut_8h.html#a3d7efb6a0ff993a01dd08a7fa914056a">ib_time_monotonic_t</a> start_time)</td></tr>
<tr class="memdesc:a4ffb86f86317b080b79f8ce46fc72068"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimize the word ilist and rewrite data to the FTS index.  <a href="#a4ffb86f86317b080b79f8ce46fc72068">More...</a><br /></td></tr>
<tr class="separator:a4ffb86f86317b080b79f8ce46fc72068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c630106e6bc75aef9d10501ab48633"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a59c630106e6bc75aef9d10501ab48633">fts_optimize_create</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a59c630106e6bc75aef9d10501ab48633"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an instance of fts_optimize_t.  <a href="#a59c630106e6bc75aef9d10501ab48633">More...</a><br /></td></tr>
<tr class="separator:a59c630106e6bc75aef9d10501ab48633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0601c67d5b532a6b6cba595d37f3dc5d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a0601c67d5b532a6b6cba595d37f3dc5d">fts_optimize_graph_free</a> (<a class="el" href="structfts__optimize__graph__t.html">fts_optimize_graph_t</a> *graph)</td></tr>
<tr class="memdesc:a0601c67d5b532a6b6cba595d37f3dc5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the optimize prepared statements.  <a href="#a0601c67d5b532a6b6cba595d37f3dc5d">More...</a><br /></td></tr>
<tr class="separator:a0601c67d5b532a6b6cba595d37f3dc5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029d9582185880adb47e29f1695d454a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a029d9582185880adb47e29f1695d454a">fts_optimize_free</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:a029d9582185880adb47e29f1695d454a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free all optimize resources.  <a href="#a029d9582185880adb47e29f1695d454a">More...</a><br /></td></tr>
<tr class="separator:a029d9582185880adb47e29f1695d454a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed7d7fec7b0aca1a98a1e15dc06ef81"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ut0ut_8h.html#aefa75a301c357c9780b2b68cce397653">ib_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#abed7d7fec7b0aca1a98a1e15dc06ef81">fts_optimize_get_time_limit</a> (<a class="el" href="structtrx__t.html">trx_t</a> *trx, <a class="el" href="structfts__table__t.html">fts_table_t</a> *fts_table)</td></tr>
<tr class="memdesc:abed7d7fec7b0aca1a98a1e15dc06ef81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the max time optimize should run in millisecs.  <a href="#abed7d7fec7b0aca1a98a1e15dc06ef81">More...</a><br /></td></tr>
<tr class="separator:abed7d7fec7b0aca1a98a1e15dc06ef81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aaa52e70f6e790d72ba3d79e1e19c64"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a6aaa52e70f6e790d72ba3d79e1e19c64">fts_optimize_words</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structfts__string__t.html">fts_string_t</a> *word)</td></tr>
<tr class="memdesc:a6aaa52e70f6e790d72ba3d79e1e19c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run OPTIMIZE on the given table.  <a href="#a6aaa52e70f6e790d72ba3d79e1e19c64">More...</a><br /></td></tr>
<tr class="separator:a6aaa52e70f6e790d72ba3d79e1e19c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f6d0421c21f85acf19cd2ed5513a15e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a0f6d0421c21f85acf19cd2ed5513a15e">fts_optimize_index_completed</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a0f6d0421c21f85acf19cd2ed5513a15e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimize is complete.  <a href="#a0f6d0421c21f85acf19cd2ed5513a15e">More...</a><br /></td></tr>
<tr class="separator:a0f6d0421c21f85acf19cd2ed5513a15e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a242cda8e356b18d0976062e032119185"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a242cda8e356b18d0976062e032119185">fts_optimize_index_read_words</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>, <a class="el" href="structfts__string__t.html">fts_string_t</a> *word)</td></tr>
<tr class="memdesc:a242cda8e356b18d0976062e032119185"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the list of words from the FTS auxiliary index that will be optimized in this pass.  <a href="#a242cda8e356b18d0976062e032119185">More...</a><br /></td></tr>
<tr class="separator:a242cda8e356b18d0976062e032119185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f300c9133bd980583a3662cbd5da3b5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a9f300c9133bd980583a3662cbd5da3b5">fts_optimize_index</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim, <a class="el" href="structdict__index__t.html">dict_index_t</a> *<a class="el" href="mysql_8cc.html#adfa69ae672499b1037123a1f17c5552b">index</a>)</td></tr>
<tr class="memdesc:a9f300c9133bd980583a3662cbd5da3b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run OPTIMIZE on the given FTS index.  <a href="#a9f300c9133bd980583a3662cbd5da3b5">More...</a><br /></td></tr>
<tr class="separator:a9f300c9133bd980583a3662cbd5da3b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63cfd1d18c9d2da77eba138d8b6d9626"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a63cfd1d18c9d2da77eba138d8b6d9626">fts_optimize_purge_deleted_doc_ids</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:a63cfd1d18c9d2da77eba138d8b6d9626"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the document ids in the delete, and delete cache tables.  <a href="#a63cfd1d18c9d2da77eba138d8b6d9626">More...</a><br /></td></tr>
<tr class="separator:a63cfd1d18c9d2da77eba138d8b6d9626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1fac086ecf22af37dd986add1252b99"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aa1fac086ecf22af37dd986add1252b99">fts_optimize_purge_deleted_doc_id_snapshot</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:aa1fac086ecf22af37dd986add1252b99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the document ids in the pending delete, and delete tables.  <a href="#aa1fac086ecf22af37dd986add1252b99">More...</a><br /></td></tr>
<tr class="separator:aa1fac086ecf22af37dd986add1252b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade8db78417897f2edd7a8b2564a47442"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#ade8db78417897f2edd7a8b2564a47442">fts_optimize_being_deleted_count</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:ade8db78417897f2edd7a8b2564a47442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the deleted doc ids that will be purged during this optimize run to the being deleted FTS auxiliary tables.  <a href="#ade8db78417897f2edd7a8b2564a47442">More...</a><br /></td></tr>
<tr class="separator:ade8db78417897f2edd7a8b2564a47442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9912aa235d5bdcee9823952190a25701"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a9912aa235d5bdcee9823952190a25701">fts_optimize_create_deleted_doc_id_snapshot</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:a9912aa235d5bdcee9823952190a25701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the deleted doc ids that will be purged during this optimize run to the being deleted FTS auxiliary tables.  <a href="#a9912aa235d5bdcee9823952190a25701">More...</a><br /></td></tr>
<tr class="separator:a9912aa235d5bdcee9823952190a25701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2d7e547763b91a1806db43941029ce"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#afb2d7e547763b91a1806db43941029ce">fts_optimize_read_deleted_doc_id_snapshot</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:afb2d7e547763b91a1806db43941029ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read in the document ids that are to be purged during optimize.  <a href="#afb2d7e547763b91a1806db43941029ce">More...</a><br /></td></tr>
<tr class="separator:afb2d7e547763b91a1806db43941029ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41f07bc1126deb80e511686fe8b2c3b6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a41f07bc1126deb80e511686fe8b2c3b6">fts_optimize_indexes</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:a41f07bc1126deb80e511686fe8b2c3b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimze all the FTS indexes, skipping those that have already been optimized, since the FTS auxiliary indexes are not guaranteed to be of the same cardinality.  <a href="#a41f07bc1126deb80e511686fe8b2c3b6">More...</a><br /></td></tr>
<tr class="separator:a41f07bc1126deb80e511686fe8b2c3b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1fa02504e47a1e48ff3833beb93bb54"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#ad1fa02504e47a1e48ff3833beb93bb54">fts_optimize_purge_snapshot</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:ad1fa02504e47a1e48ff3833beb93bb54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup the snapshot tables and the master deleted table.  <a href="#ad1fa02504e47a1e48ff3833beb93bb54">More...</a><br /></td></tr>
<tr class="separator:ad1fa02504e47a1e48ff3833beb93bb54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4cead85da218155c97717e08c52de94"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#ac4cead85da218155c97717e08c52de94">fts_optimize_reset_start_time</a> (<a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *optim)</td></tr>
<tr class="memdesc:ac4cead85da218155c97717e08c52de94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the start time to 0 so that a new optimize can be started.  <a href="#ac4cead85da218155c97717e08c52de94">More...</a><br /></td></tr>
<tr class="separator:ac4cead85da218155c97717e08c52de94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94900a7e2e4f4e21fb6141f797f9eda9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a94900a7e2e4f4e21fb6141f797f9eda9">fts_optimize_table_bk</a> (<a class="el" href="structfts__slot__t.html">fts_slot_t</a> *slot)</td></tr>
<tr class="memdesc:a94900a7e2e4f4e21fb6141f797f9eda9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run OPTIMIZE on the given table by a background thread.  <a href="#a94900a7e2e4f4e21fb6141f797f9eda9">More...</a><br /></td></tr>
<tr class="separator:a94900a7e2e4f4e21fb6141f797f9eda9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc948b546a25a7d00be9e9e8fd48eb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a4fc948b546a25a7d00be9e9e8fd48eb3">fts_optimize_table</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a4fc948b546a25a7d00be9e9e8fd48eb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run OPTIMIZE on the given table.  <a href="#a4fc948b546a25a7d00be9e9e8fd48eb3">More...</a><br /></td></tr>
<tr class="separator:a4fc948b546a25a7d00be9e9e8fd48eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b1ee436189ea80fc3f99cf6872b1bda"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfts__msg__t.html">fts_msg_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a0b1ee436189ea80fc3f99cf6872b1bda">fts_optimize_create_msg</a> (<a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1">fts_msg_type_t</a> type, void *ptr)</td></tr>
<tr class="memdesc:a0b1ee436189ea80fc3f99cf6872b1bda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the table to add to the OPTIMIZER's list.  <a href="#a0b1ee436189ea80fc3f99cf6872b1bda">More...</a><br /></td></tr>
<tr class="separator:a0b1ee436189ea80fc3f99cf6872b1bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6424320ac87c5ce1df6d9fda27db1eac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a6424320ac87c5ce1df6d9fda27db1eac">fts_optimize_add_table</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a6424320ac87c5ce1df6d9fda27db1eac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the table to add to the OPTIMIZER's list.  <a href="#a6424320ac87c5ce1df6d9fda27db1eac">More...</a><br /></td></tr>
<tr class="separator:a6424320ac87c5ce1df6d9fda27db1eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5f6042d1ee47dcc941828c2ed84368"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aac5f6042d1ee47dcc941828c2ed84368">fts_optimize_remove_table</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:aac5f6042d1ee47dcc941828c2ed84368"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the table from the OPTIMIZER's list.  <a href="#aac5f6042d1ee47dcc941828c2ed84368">More...</a><br /></td></tr>
<tr class="separator:aac5f6042d1ee47dcc941828c2ed84368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bc15571f87f005549b6f5672ed00098"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a1bc15571f87f005549b6f5672ed00098">fts_optimize_request_sync_table</a> (<a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a1bc15571f87f005549b6f5672ed00098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send sync fts cache for the table.  <a href="#a1bc15571f87f005549b6f5672ed00098">More...</a><br /></td></tr>
<tr class="separator:a1bc15571f87f005549b6f5672ed00098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66dc4ca94c8f7bd3c60d3852e3fbaf4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structfts__slot__t.html">fts_slot_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#af66dc4ca94c8f7bd3c60d3852e3fbaf4">fts_optimize_find_slot</a> (<a class="el" href="structib__vector__t.html">ib_vector_t</a> *tables, <a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> table_id)</td></tr>
<tr class="memdesc:af66dc4ca94c8f7bd3c60d3852e3fbaf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the slot for a particular table.  <a href="#af66dc4ca94c8f7bd3c60d3852e3fbaf4">More...</a><br /></td></tr>
<tr class="separator:af66dc4ca94c8f7bd3c60d3852e3fbaf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a108f25477746a6dbc0883ac8899007"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a3a108f25477746a6dbc0883ac8899007">fts_optimize_start_table</a> (<a class="el" href="structib__vector__t.html">ib_vector_t</a> *tables, <a class="el" href="structdict__table__t.html">dict_table_t</a> *table)</td></tr>
<tr class="memdesc:a3a108f25477746a6dbc0883ac8899007"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start optimizing table.  <a href="#a3a108f25477746a6dbc0883ac8899007">More...</a><br /></td></tr>
<tr class="separator:a3a108f25477746a6dbc0883ac8899007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a7ae09bd1402a3e827ecbf7d44f5d9"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a23a7ae09bd1402a3e827ecbf7d44f5d9">fts_optimize_new_table</a> (<a class="el" href="structib__vector__t.html">ib_vector_t</a> *tables, <a class="el" href="structfts__msg__id__t.html">fts_msg_id_t</a> *<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="memdesc:a23a7ae09bd1402a3e827ecbf7d44f5d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the table to the vector if it doesn't already exist.  <a href="#a23a7ae09bd1402a3e827ecbf7d44f5d9">More...</a><br /></td></tr>
<tr class="separator:a23a7ae09bd1402a3e827ecbf7d44f5d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3e986433ae2d349c5d2b4f15a98e3fd"><td class="memItemLeft" align="right" valign="top">static ibool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#ac3e986433ae2d349c5d2b4f15a98e3fd">fts_optimize_del_table</a> (<a class="el" href="structib__vector__t.html">ib_vector_t</a> *tables, <a class="el" href="structfts__msg__id__t.html">fts_msg_id_t</a> *<a class="el" href="test__sql__9__sessions_8cc.html#af6a786aadb2fc26d9c6d8dcb60c181f9">msg</a>)</td></tr>
<tr class="memdesc:ac3e986433ae2d349c5d2b4f15a98e3fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the table from the vector if it exists.  <a href="#ac3e986433ae2d349c5d2b4f15a98e3fd">More...</a><br /></td></tr>
<tr class="separator:ac3e986433ae2d349c5d2b4f15a98e3fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fe108287141ac033e46205c9d628fc9"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a6fe108287141ac033e46205c9d628fc9">fts_optimize_how_many</a> (const <a class="el" href="structib__vector__t.html">ib_vector_t</a> *tables)</td></tr>
<tr class="memdesc:a6fe108287141ac033e46205c9d628fc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate how many of the registered tables need to be optimized.  <a href="#a6fe108287141ac033e46205c9d628fc9">More...</a><br /></td></tr>
<tr class="separator:a6fe108287141ac033e46205c9d628fc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a541b46d64e0a17b4ca65461db562703d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a541b46d64e0a17b4ca65461db562703d">fts_is_sync_needed</a> (const <a class="el" href="structib__vector__t.html">ib_vector_t</a> *tables)</td></tr>
<tr class="memdesc:a541b46d64e0a17b4ca65461db562703d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the total memory used by all FTS table exceeds the maximum limit.  <a href="#a541b46d64e0a17b4ca65461db562703d">More...</a><br /></td></tr>
<tr class="separator:a541b46d64e0a17b4ca65461db562703d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cc26c6966dbf46191b1e6bba1345cc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a4cc26c6966dbf46191b1e6bba1345cc3">fts_optimize_sync_table</a> (<a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a> table_id)</td></tr>
<tr class="memdesc:a4cc26c6966dbf46191b1e6bba1345cc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync fts cache of a table.  <a href="#a4cc26c6966dbf46191b1e6bba1345cc3">More...</a><br /></td></tr>
<tr class="separator:a4cc26c6966dbf46191b1e6bba1345cc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63d887ec659c5079530e600603ca62c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#ae63d887ec659c5079530e600603ca62c">fts_optimize_thread</a> (<a class="el" href="structib__wqueue__t.html">ib_wqueue_t</a> *wq)</td></tr>
<tr class="memdesc:ae63d887ec659c5079530e600603ca62c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optimize all FTS tables.  <a href="#ae63d887ec659c5079530e600603ca62c">More...</a><br /></td></tr>
<tr class="separator:ae63d887ec659c5079530e600603ca62c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a491b0fb210b0620f3c9a3f655b1e4be9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a491b0fb210b0620f3c9a3f655b1e4be9">fts_optimize_init</a> (void)</td></tr>
<tr class="memdesc:a491b0fb210b0620f3c9a3f655b1e4be9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Startup the optimize thread and create the work queue.  <a href="#a491b0fb210b0620f3c9a3f655b1e4be9">More...</a><br /></td></tr>
<tr class="separator:a491b0fb210b0620f3c9a3f655b1e4be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2730a91e3da686b48ddbee082de7f3f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a2730a91e3da686b48ddbee082de7f3f9">fts_optimize_shutdown</a> ()</td></tr>
<tr class="memdesc:a2730a91e3da686b48ddbee082de7f3f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown fts optimize thread.  <a href="#a2730a91e3da686b48ddbee082de7f3f9">More...</a><br /></td></tr>
<tr class="separator:a2730a91e3da686b48ddbee082de7f3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a75ca4a9a51f9c3880ebcbe989592676c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structib__wqueue__t.html">ib_wqueue_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a75ca4a9a51f9c3880ebcbe989592676c">fts_optimize_wq</a></td></tr>
<tr class="memdesc:a75ca4a9a51f9c3880ebcbe989592676c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The FTS optimize thread's work queue.  <a href="#a75ca4a9a51f9c3880ebcbe989592676c">More...</a><br /></td></tr>
<tr class="separator:a75ca4a9a51f9c3880ebcbe989592676c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed68ade2ff8c56b4bcf7a5d432ca11b2"><td class="memItemLeft" align="right" valign="top">static const ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aed68ade2ff8c56b4bcf7a5d432ca11b2">FTS_QUEUE_WAIT_IN_USECS</a> = 5000000</td></tr>
<tr class="memdesc:aed68ade2ff8c56b4bcf7a5d432ca11b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time to wait for a message.  <a href="#aed68ade2ff8c56b4bcf7a5d432ca11b2">More...</a><br /></td></tr>
<tr class="separator:aed68ade2ff8c56b4bcf7a5d432ca11b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab970e3ce6f57b7fb4b0a0e237b390236"><td class="memItemLeft" align="right" valign="top">static const ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#ab970e3ce6f57b7fb4b0a0e237b390236">FTS_OPTIMIZE_INTERVAL_IN_SECS</a> = 300</td></tr>
<tr class="memdesc:ab970e3ce6f57b7fb4b0a0e237b390236"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default optimize interval in secs.  <a href="#ab970e3ce6f57b7fb4b0a0e237b390236">More...</a><br /></td></tr>
<tr class="separator:ab970e3ce6f57b7fb4b0a0e237b390236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ba4ff366c559a75a1803775124a050"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aa0ba4ff366c559a75a1803775124a050">fts_opt_start_shutdown</a> = <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></td></tr>
<tr class="memdesc:aa0ba4ff366c559a75a1803775124a050"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server is shutting down, so does we exiting the optimize thread.  <a href="#aa0ba4ff366c559a75a1803775124a050">More...</a><br /></td></tr>
<tr class="separator:aa0ba4ff366c559a75a1803775124a050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addc2b2853b6c031911c29dd0f0a0cc8a"><td class="memItemLeft" align="right" valign="top">static const ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#addc2b2853b6c031911c29dd0f0a0cc8a">FTS_WORD_NODES_INIT_SIZE</a> = 64</td></tr>
<tr class="memdesc:addc2b2853b6c031911c29dd0f0a0cc8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial size of nodes in fts_word_t.  <a href="#addc2b2853b6c031911c29dd0f0a0cc8a">More...</a><br /></td></tr>
<tr class="separator:addc2b2853b6c031911c29dd0f0a0cc8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46f83e0f423644566c4ac6ebfebba1e7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ut0ut_8h.html#a3d7efb6a0ff993a01dd08a7fa914056a">ib_time_monotonic_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a46f83e0f423644566c4ac6ebfebba1e7">last_check_sync_time</a></td></tr>
<tr class="memdesc:a46f83e0f423644566c4ac6ebfebba1e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last time we did check whether system need a sync.  <a href="#a46f83e0f423644566c4ac6ebfebba1e7">More...</a><br /></td></tr>
<tr class="separator:a46f83e0f423644566c4ac6ebfebba1e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea590c3216a103482d8e6c8867cc1c79"><td class="memItemLeft" align="right" valign="top"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aea590c3216a103482d8e6c8867cc1c79">fts_num_word_optimize</a></td></tr>
<tr class="memdesc:aea590c3216a103482d8e6c8867cc1c79"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of words to read and optimize in a single pass.  <a href="#aea590c3216a103482d8e6c8867cc1c79">More...</a><br /></td></tr>
<tr class="separator:aea590c3216a103482d8e6c8867cc1c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27da593ca22ff9447f1889662c99dcd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#aa27da593ca22ff9447f1889662c99dcd">fts_enable_diag_print</a></td></tr>
<tr class="memdesc:aa27da593ca22ff9447f1889662c99dcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable specifying whether we do additional FTS diagnostic printout in the log.  <a href="#aa27da593ca22ff9447f1889662c99dcd">More...</a><br /></td></tr>
<tr class="separator:aa27da593ca22ff9447f1889662c99dcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affd0b90c44352fd218246d78bf609e60"><td class="memItemLeft" align="right" valign="top">static ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#affd0b90c44352fd218246d78bf609e60">FTS_ZIP_BLOCK_SIZE</a> = 1024</td></tr>
<tr class="memdesc:affd0b90c44352fd218246d78bf609e60"><td class="mdescLeft">&#160;</td><td class="mdescRight">ZLib compressed block size.  <a href="#affd0b90c44352fd218246d78bf609e60">More...</a><br /></td></tr>
<tr class="separator:affd0b90c44352fd218246d78bf609e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6916e0c98bd35c1618bbbb0749dcae73"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ut0ut_8h.html#aefa75a301c357c9780b2b68cce397653">ib_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a6916e0c98bd35c1618bbbb0749dcae73">fts_optimize_time_limit</a> = 0</td></tr>
<tr class="memdesc:a6916e0c98bd35c1618bbbb0749dcae73"><td class="mdescLeft">&#160;</td><td class="mdescRight">The amount of time optimizing in a single pass, in milliseconds.  <a href="#a6916e0c98bd35c1618bbbb0749dcae73">More...</a><br /></td></tr>
<tr class="separator:a6916e0c98bd35c1618bbbb0749dcae73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae87392184c91ab0ed706a8644a8645aa"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#ae87392184c91ab0ed706a8644a8645aa">fts_common_tables</a> []</td></tr>
<tr class="memdesc:ae87392184c91ab0ed706a8644a8645aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">It's defined in fts0fts.cc.  <a href="#ae87392184c91ab0ed706a8644a8645aa">More...</a><br /></td></tr>
<tr class="separator:ae87392184c91ab0ed706a8644a8645aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d19483e734bf1f7c4bdf8668b3b10c0"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#a7d19483e734bf1f7c4bdf8668b3b10c0">fts_init_delete_sql</a></td></tr>
<tr class="memdesc:a7d19483e734bf1f7c4bdf8668b3b10c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">SQL Statement for changing state of rows to be deleted from FTS Index.  <a href="#a7d19483e734bf1f7c4bdf8668b3b10c0">More...</a><br /></td></tr>
<tr class="separator:a7d19483e734bf1f7c4bdf8668b3b10c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c836aee603bf8dfeecbed3529dbc52"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#ac9c836aee603bf8dfeecbed3529dbc52">fts_delete_doc_ids_sql</a></td></tr>
<tr class="separator:ac9c836aee603bf8dfeecbed3529dbc52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd44a1b732780f6485fae97e6b4c3207"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fts0opt_8cc.html#abd44a1b732780f6485fae97e6b4c3207">fts_end_delete_sql</a></td></tr>
<tr class="separator:abd44a1b732780f6485fae97e6b4c3207"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Full Text Search optimize thread. </p>
<p>Created 2007/03/27 Sunny Bains Completed 2011/7/10 Sunny and Jimmy Yang </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa20871660892f7c4dc4d3e52968ea04e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa20871660892f7c4dc4d3e52968ea04e">&#9670;&nbsp;</a></span>FTS_DEBUG_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FTS_DEBUG_PRINT</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a783a90ba96c9586bd122cff92d8ebae1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a783a90ba96c9586bd122cff92d8ebae1">&#9670;&nbsp;</a></span>fts_msg_type_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1">fts_msg_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FTS optimize thread message types. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a783a90ba96c9586bd122cff92d8ebae1ac7231578307f6265a2d038a5d74397a4"></a>FTS_MSG_START&#160;</td><td class="fielddoc"><p>Start optimizing thread. </p>
</td></tr>
<tr><td class="fieldname"><a id="a783a90ba96c9586bd122cff92d8ebae1a36b45657abdf5aee8a4841f81e66ff15"></a>FTS_MSG_PAUSE&#160;</td><td class="fielddoc"><p>Pause optimizing thread. </p>
</td></tr>
<tr><td class="fieldname"><a id="a783a90ba96c9586bd122cff92d8ebae1ae73863a3dc28a449b45a582fba64adc6"></a>FTS_MSG_STOP&#160;</td><td class="fielddoc"><p>Stop optimizing and exit thread. </p>
</td></tr>
<tr><td class="fieldname"><a id="a783a90ba96c9586bd122cff92d8ebae1a45c3850bba52835a5aac2a9789108f02"></a>FTS_MSG_ADD_TABLE&#160;</td><td class="fielddoc"><p>Add table to the optimize thread's work queue. </p>
</td></tr>
<tr><td class="fieldname"><a id="a783a90ba96c9586bd122cff92d8ebae1a3f07bc78bd1f055b5ac7c94687c483c0"></a>FTS_MSG_OPTIMIZE_TABLE&#160;</td><td class="fielddoc"><p>Optimize a table. </p>
</td></tr>
<tr><td class="fieldname"><a id="a783a90ba96c9586bd122cff92d8ebae1a212f24d2056eaedc06f596a2e0f36c60"></a>FTS_MSG_DEL_TABLE&#160;</td><td class="fielddoc"><p>Remove a table from the optimize threads work queue. </p>
</td></tr>
<tr><td class="fieldname"><a id="a783a90ba96c9586bd122cff92d8ebae1a3327648d020b59bdfeeb910abfacfdf6"></a>FTS_MSG_SYNC_TABLE&#160;</td><td class="fielddoc"><p>Sync fts cache of a table. </p>
</td></tr>
</table>

</div>
</div>
<a id="aa59ca3d868bbb40eccb3e4c48c1987d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa59ca3d868bbb40eccb3e4c48c1987d2">&#9670;&nbsp;</a></span>fts_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="fts0opt_8cc.html#aa59ca3d868bbb40eccb3e4c48c1987d2">fts_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>State of a table within the optimization sub system. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa59ca3d868bbb40eccb3e4c48c1987d2a757ebd804c1e73eead23a8ee297c9f88"></a>FTS_STATE_LOADED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa59ca3d868bbb40eccb3e4c48c1987d2abd8a154d1b666dee198405e26bbc5902"></a>FTS_STATE_RUNNING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa59ca3d868bbb40eccb3e4c48c1987d2a295dca535554276a6a38285faf7b2ac8"></a>FTS_STATE_SUSPENDED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa59ca3d868bbb40eccb3e4c48c1987d2a6a8ca30959c6491b469048ed302d7d2c"></a>FTS_STATE_DONE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa59ca3d868bbb40eccb3e4c48c1987d2a0f3a72f2a885b0c779cd2ba535f6ceac"></a>FTS_STATE_EMPTY&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a59ae39777fc6245161db93a60f699816"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59ae39777fc6245161db93a60f699816">&#9670;&nbsp;</a></span>fts_bsearch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fts_bsearch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__update__t.html">fts_update_t</a> *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>upper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a>&#160;</td>
          <td class="paramname"><em>doc_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a binary search for a doc id in the array. </p>
<dl class="section return"><dt>Returns</dt><dd>+ve index if found -ve index where it should be inserted if not found </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">array</td><td>in: array to sort </td></tr>
    <tr><td class="paramname">lower</td><td>in: the array lower bound </td></tr>
    <tr><td class="paramname">upper</td><td>in: the array upper bound </td></tr>
    <tr><td class="paramname">doc_id</td><td>in: the doc id to search for </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4edc85debda9ddd9fb5043ccb800b746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4edc85debda9ddd9fb5043ccb800b746">&#9670;&nbsp;</a></span>fts_fetch_doc_ids()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool fts_fetch_doc_ids </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback function to fetch the doc id from the record. </p>
<dl class="section return"><dt>Returns</dt><dd>always returns true </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">row</td><td>in: sel_node_t* </td></tr>
    <tr><td class="paramname">user_arg</td><td>in: pointer to ib_vector_t </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3bb6ccb3de655227b8a47a27c73de283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bb6ccb3de655227b8a47a27c73de283">&#9670;&nbsp;</a></span>fts_fetch_index_words()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool fts_fetch_index_words </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback function to fetch and compress the word in an FTS INDEX record. </p>
<dl class="section return"><dt>Returns</dt><dd>false on EOF </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">row</td><td>in: sel_node_t* </td></tr>
    <tr><td class="paramname">user_arg</td><td>in: pointer to ib_vector_t </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a62539d38e4f1ae4a948eed5874bf0953"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62539d38e4f1ae4a948eed5874bf0953">&#9670;&nbsp;</a></span>fts_index_fetch_nodes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_index_fetch_nodes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="que0types_8h.html#a3052106eec0aaf80a6028b16f70372b1">que_t</a> **&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__table__t.html">fts_table_t</a> *&#160;</td>
          <td class="paramname"><em>fts_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfts__string__t.html">fts_string_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__fetch__t.html">fts_fetch_t</a> *&#160;</td>
          <td class="paramname"><em>fetch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the rows from the FTS inde. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">graph</td><td>in: prepared statement </td></tr>
    <tr><td class="paramname">fts_table</td><td>in: table of the FTS INDEX </td></tr>
    <tr><td class="paramname">word</td><td>in: the word to fetch </td></tr>
    <tr><td class="paramname">fetch</td><td>in: fetch callback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf3eb20e3f8746aa3131875f064d7cf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf3eb20e3f8746aa3131875f064d7cf0">&#9670;&nbsp;</a></span>fts_index_fetch_words()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_index_fetch_words </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfts__string__t.html">fts_string_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>n_words</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the words from the FTS INDEX. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK, DB_TABLE_NOT_FOUND if no more indexes to search else error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize scratch pad </td></tr>
    <tr><td class="paramname">word</td><td>in: get words greater than this word </td></tr>
    <tr><td class="paramname">n_words</td><td>in: max words to read </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a541b46d64e0a17b4ca65461db562703d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a541b46d64e0a17b4ca65461db562703d">&#9670;&nbsp;</a></span>fts_is_sync_needed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> fts_is_sync_needed </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>tables</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the total memory used by all FTS table exceeds the maximum limit. </p>
<dl class="section return"><dt>Returns</dt><dd>true if a sync is needed, false otherwise </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tables</td><td>in: registered tables vector </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6424320ac87c5ce1df6d9fda27db1eac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6424320ac87c5ce1df6d9fda27db1eac">&#9670;&nbsp;</a></span>fts_optimize_add_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fts_optimize_add_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the table to add to the OPTIMIZER's list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table to add </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ade8db78417897f2edd7a8b2564a47442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade8db78417897f2edd7a8b2564a47442">&#9670;&nbsp;</a></span>fts_optimize_being_deleted_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint fts_optimize_being_deleted_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy the deleted doc ids that will be purged during this optimize run to the being deleted FTS auxiliary tables. </p>
<p>The transaction is committed upon successful copy and rolled back on DB_DUPLICATE_KEY error. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4ffb86f86317b080b79f8ce46fc72068"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ffb86f86317b080b79f8ce46fc72068">&#9670;&nbsp;</a></span>fts_optimize_compact()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_compact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ut0ut_8h.html#a3d7efb6a0ff993a01dd08a7fa914056a">ib_time_monotonic_t</a>&#160;</td>
          <td class="paramname"><em>start_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Optimize the word ilist and rewrite data to the FTS index. </p>
<dl class="section return"><dt>Returns</dt><dd>status one of RESTART, EXIT, ERROR </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize state data </td></tr>
    <tr><td class="paramname">index</td><td>in: current FTS being optimized </td></tr>
    <tr><td class="paramname">start_time</td><td>in: optimize start time </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a59c630106e6bc75aef9d10501ab48633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59c630106e6bc75aef9d10501ab48633">&#9670;&nbsp;</a></span>fts_optimize_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structfts__optimize__t.html">fts_optimize_t</a>* fts_optimize_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create an instance of fts_optimize_t. </p>
<p>Also create a new background transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table with FTS indexes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9912aa235d5bdcee9823952190a25701"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9912aa235d5bdcee9823952190a25701">&#9670;&nbsp;</a></span>fts_optimize_create_deleted_doc_id_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_create_deleted_doc_id_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy the deleted doc ids that will be purged during this optimize run to the being deleted FTS auxiliary tables. </p>
<p>The transaction is committed upon successful copy and rolled back on DB_DUPLICATE_KEY error. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0b1ee436189ea80fc3f99cf6872b1bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b1ee436189ea80fc3f99cf6872b1bda">&#9670;&nbsp;</a></span>fts_optimize_create_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structfts__msg__t.html">fts_msg_t</a>* fts_optimize_create_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fts0opt_8cc.html#a783a90ba96c9586bd122cff92d8ebae1">fts_msg_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the table to add to the OPTIMIZER's list. </p>
<dl class="section return"><dt>Returns</dt><dd>new message instance </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>in: type of message </td></tr>
    <tr><td class="paramname">ptr</td><td>in: message payload </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac3e986433ae2d349c5d2b4f15a98e3fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3e986433ae2d349c5d2b4f15a98e3fd">&#9670;&nbsp;</a></span>fts_optimize_del_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool fts_optimize_del_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__msg__id__t.html">fts_msg_id_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove the table from the vector if it exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tables</td><td>in/out: vector of tables </td></tr>
    <tr><td class="paramname">msg</td><td>in: table to delete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="add7b8b857de7cdaab9557c54edcd14e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add7b8b857de7cdaab9557c54edcd14e9">&#9670;&nbsp;</a></span>fts_optimize_deleted_pos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fts_optimize_deleted_pos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__word__t.html">fts_word_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the starting pos within the deleted doc id vector for a word. </p>
<dl class="section return"><dt>Returns</dt><dd>delete position </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize state data </td></tr>
    <tr><td class="paramname">word</td><td>in: the word data to check </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a44d50f7caa9d3fcf5cfcddd64d372582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44d50f7caa9d3fcf5cfcddd64d372582">&#9670;&nbsp;</a></span>fts_optimize_encode_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_encode_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__node__t.html">fts_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a>&#160;</td>
          <td class="paramname"><em>doc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__encode__t.html">fts_encode_t</a> *&#160;</td>
          <td class="paramname"><em>enc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Encode the word pos list into the node. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>in: node to fill </td></tr>
    <tr><td class="paramname">doc_id</td><td>in: doc id to encode </td></tr>
    <tr><td class="paramname">enc</td><td>in: encoding state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af66dc4ca94c8f7bd3c60d3852e3fbaf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af66dc4ca94c8f7bd3c60d3852e3fbaf4">&#9670;&nbsp;</a></span>fts_optimize_find_slot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structfts__slot__t.html">fts_slot_t</a>* fts_optimize_find_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a>&#160;</td>
          <td class="paramname"><em>table_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the slot for a particular table. </p>
<dl class="section return"><dt>Returns</dt><dd>slot if found else NULL. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tables</td><td>in: vector of tables </td></tr>
    <tr><td class="paramname">table_id</td><td>in: table id to find </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a029d9582185880adb47e29f1695d454a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029d9582185880adb47e29f1695d454a">&#9670;&nbsp;</a></span>fts_optimize_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fts_optimize_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free all optimize resources. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: table with on FTS index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abed7d7fec7b0aca1a98a1e15dc06ef81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed7d7fec7b0aca1a98a1e15dc06ef81">&#9670;&nbsp;</a></span>fts_optimize_get_time_limit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="ut0ut_8h.html#aefa75a301c357c9780b2b68cce397653">ib_time_t</a> fts_optimize_get_time_limit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__table__t.html">fts_table_t</a> *&#160;</td>
          <td class="paramname"><em>fts_table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the max time optimize should run in millisecs. </p>
<dl class="section return"><dt>Returns</dt><dd>max optimize time limit in millisecs. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">fts_table</td><td>in: aux table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0601c67d5b532a6b6cba595d37f3dc5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0601c67d5b532a6b6cba595d37f3dc5d">&#9670;&nbsp;</a></span>fts_optimize_graph_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fts_optimize_graph_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__graph__t.html">fts_optimize_graph_t</a> *&#160;</td>
          <td class="paramname"><em>graph</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free the optimize prepared statements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graph</td><td>in/out: The graph instances to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6fe108287141ac033e46205c9d628fc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fe108287141ac033e46205c9d628fc9">&#9670;&nbsp;</a></span>fts_optimize_how_many()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ulint fts_optimize_how_many </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>tables</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate how many of the registered tables need to be optimized. </p>
<dl class="section return"><dt>Returns</dt><dd>no. of tables to optimize </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tables</td><td>in: registered tables vector </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f300c9133bd980583a3662cbd5da3b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f300c9133bd980583a3662cbd5da3b5">&#9670;&nbsp;</a></span>fts_optimize_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run OPTIMIZE on the given FTS index. </p>
<p>Note: this can take a very long time (hours). </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
    <tr><td class="paramname">index</td><td>in: table with one FTS index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0f6d0421c21f85acf19cd2ed5513a15e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f6d0421c21f85acf19cd2ed5513a15e">&#9670;&nbsp;</a></span>fts_optimize_index_completed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_index_completed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Optimize is complete. </p>
<p>Set the completion time, and reset the optimize start string for this FTS index to "". </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
    <tr><td class="paramname">index</td><td>in: table with one FTS index </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a782387612a921e4214c5d51e79eefd56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a782387612a921e4214c5d51e79eefd56">&#9670;&nbsp;</a></span>fts_optimize_index_fetch_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ibool fts_optimize_index_fetch_node </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function to fetch the rows in an FTS INDEX record. </p>
<dl class="section return"><dt>Returns</dt><dd>always returns non-NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">row</td><td>in: sel_node_t* </td></tr>
    <tr><td class="paramname">user_arg</td><td>in: pointer to ib_vector_t </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a242cda8e356b18d0976062e032119185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a242cda8e356b18d0976062e032119185">&#9670;&nbsp;</a></span>fts_optimize_index_read_words()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_index_read_words </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__string__t.html">fts_string_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the list of words from the FTS auxiliary index that will be optimized in this pass. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
    <tr><td class="paramname">index</td><td>in: table with one FTS index </td></tr>
    <tr><td class="paramname">word</td><td>in: buffer to use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a41f07bc1126deb80e511686fe8b2c3b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41f07bc1126deb80e511686fe8b2c3b6">&#9670;&nbsp;</a></span>fts_optimize_indexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_indexes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Optimze all the FTS indexes, skipping those that have already been optimized, since the FTS auxiliary indexes are not guaranteed to be of the same cardinality. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a491b0fb210b0620f3c9a3f655b1e4be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a491b0fb210b0620f3c9a3f655b1e4be9">&#9670;&nbsp;</a></span>fts_optimize_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fts_optimize_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Startup the optimize thread and create the work queue. </p>

</div>
</div>
<a id="a960e88a06a1f846f2f16c8882ea24591"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a960e88a06a1f846f2f16c8882ea24591">&#9670;&nbsp;</a></span>fts_optimize_lookup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fts_optimize_lookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>doc_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>lower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a>&#160;</td>
          <td class="paramname"><em>first_doc_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fts0fts_8h.html#a380910af8d69503a3e3dcbf6d809a3b6">doc_id_t</a>&#160;</td>
          <td class="paramname"><em>last_doc_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search in the to delete array whether any of the doc ids within the [first, last] range are to be deleted. </p>
<dl class="section return"><dt>Returns</dt><dd>+ve index if found -ve index where it should be inserted if not found </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc_ids</td><td>in: array to search </td></tr>
    <tr><td class="paramname">lower</td><td>in: lower limit of array </td></tr>
    <tr><td class="paramname">first_doc_id</td><td>in: doc id to lookup </td></tr>
    <tr><td class="paramname">last_doc_id</td><td>in: doc id to lookup </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a23a7ae09bd1402a3e827ecbf7d44f5d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23a7ae09bd1402a3e827ecbf7d44f5d9">&#9670;&nbsp;</a></span>fts_optimize_new_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ibool fts_optimize_new_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__msg__id__t.html">fts_msg_id_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the table to the vector if it doesn't already exist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tables</td><td>in/out: vector of tables </td></tr>
    <tr><td class="paramname">msg</td><td>in: table to delete </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abff94fcebe1e9f21cfa1e0b68471a040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abff94fcebe1e9f21cfa1e0b68471a040">&#9670;&nbsp;</a></span>fts_optimize_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>del_vec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>del_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__node__t.html">fts_node_t</a> *&#160;</td>
          <td class="paramname"><em>dst_node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__node__t.html">fts_node_t</a> *&#160;</td>
          <td class="paramname"><em>src_node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__encode__t.html">fts_encode_t</a> *&#160;</td>
          <td class="paramname"><em>enc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Optimize the data contained in a node. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">del_vec</td><td>in: vector of doc ids to delete </td></tr>
    <tr><td class="paramname">del_pos</td><td>in: offset into above vector </td></tr>
    <tr><td class="paramname">dst_node</td><td>in: node to fill </td></tr>
    <tr><td class="paramname">src_node</td><td>in: source node for data </td></tr>
    <tr><td class="paramname">enc</td><td>in: encoding state </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1fac086ecf22af37dd986add1252b99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1fac086ecf22af37dd986add1252b99">&#9670;&nbsp;</a></span>fts_optimize_purge_deleted_doc_id_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_purge_deleted_doc_id_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete the document ids in the pending delete, and delete tables. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a63cfd1d18c9d2da77eba138d8b6d9626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63cfd1d18c9d2da77eba138d8b6d9626">&#9670;&nbsp;</a></span>fts_optimize_purge_deleted_doc_ids()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_purge_deleted_doc_ids </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete the document ids in the delete, and delete cache tables. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad1fa02504e47a1e48ff3833beb93bb54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1fa02504e47a1e48ff3833beb93bb54">&#9670;&nbsp;</a></span>fts_optimize_purge_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_purge_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleanup the snapshot tables and the master deleted table. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afb2d7e547763b91a1806db43941029ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb2d7e547763b91a1806db43941029ce">&#9670;&nbsp;</a></span>fts_optimize_read_deleted_doc_id_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_read_deleted_doc_id_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read in the document ids that are to be purged during optimize. </p>
<p>The transaction is committed upon successfully read. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a22d9327b75ae90f0115b8dccddb4c385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22d9327b75ae90f0115b8dccddb4c385">&#9670;&nbsp;</a></span>fts_optimize_read_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structfts__node__t.html">fts_node_t</a>* fts_optimize_read_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__word__t.html">fts_word_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="que0types_8h.html#a3509f9b5d79a0b309f8250593e46ed00">que_node_t</a> *&#160;</td>
          <td class="paramname"><em>exp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the FTS INDEX row. </p>
<dl class="section return"><dt>Returns</dt><dd>fts_node_t instance </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">word</td><td>in: </td></tr>
    <tr><td class="paramname">exp</td><td>in: </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aac5f6042d1ee47dcc941828c2ed84368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac5f6042d1ee47dcc941828c2ed84368">&#9670;&nbsp;</a></span>fts_optimize_remove_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fts_optimize_remove_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the table from the OPTIMIZER's list. </p>
<p>We do wait for acknowledgement from the consumer of the message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1bc15571f87f005549b6f5672ed00098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bc15571f87f005549b6f5672ed00098">&#9670;&nbsp;</a></span>fts_optimize_request_sync_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fts_optimize_request_sync_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send sync fts cache for the table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table</td><td>table to sync </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac4cead85da218155c97717e08c52de94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4cead85da218155c97717e08c52de94">&#9670;&nbsp;</a></span>fts_optimize_reset_start_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_reset_start_time </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the start time to 0 so that a new optimize can be started. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2730a91e3da686b48ddbee082de7f3f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2730a91e3da686b48ddbee082de7f3f9">&#9670;&nbsp;</a></span>fts_optimize_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fts_optimize_shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown fts optimize thread. </p>

</div>
</div>
<a id="a3a108f25477746a6dbc0883ac8899007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a108f25477746a6dbc0883ac8899007">&#9670;&nbsp;</a></span>fts_optimize_start_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fts_optimize_start_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start optimizing table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tables</td><td>in/out: vector of tables </td></tr>
    <tr><td class="paramname">table</td><td>in: table to optimize </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4cc26c6966dbf46191b1e6bba1345cc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cc26c6966dbf46191b1e6bba1345cc3">&#9670;&nbsp;</a></span>fts_optimize_sync_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fts_optimize_sync_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="dict0types_8h.html#ac877e05c194a7c04fa5921c88cdcb1f7">table_id_t</a>&#160;</td>
          <td class="paramname"><em>table_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sync fts cache of a table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">table_id</td><td>table id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4fc948b546a25a7d00be9e9e8fd48eb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc948b546a25a7d00be9e9e8fd48eb3">&#9670;&nbsp;</a></span>fts_optimize_table()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdict__table__t.html">dict_table_t</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run OPTIMIZE on the given table. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>in: table to optimiza </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a94900a7e2e4f4e21fb6141f797f9eda9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94900a7e2e4f4e21fb6141f797f9eda9">&#9670;&nbsp;</a></span>fts_optimize_table_bk()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_table_bk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__slot__t.html">fts_slot_t</a> *&#160;</td>
          <td class="paramname"><em>slot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run OPTIMIZE on the given table by a background thread. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS if all OK </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slot</td><td>in: table to optimiza </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae63d887ec659c5079530e600603ca62c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63d887ec659c5079530e600603ca62c">&#9670;&nbsp;</a></span>fts_optimize_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fts_optimize_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structib__wqueue__t.html">ib_wqueue_t</a> *&#160;</td>
          <td class="paramname"><em>wq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Optimize all FTS tables. </p>

</div>
</div>
<a id="a2097b57a4fbb75a3586bd69cf90d804d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2097b57a4fbb75a3586bd69cf90d804d">&#9670;&nbsp;</a></span>fts_optimize_word()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structib__vector__t.html">ib_vector_t</a>* fts_optimize_word </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__word__t.html">fts_word_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compact the nodes for a word, we also remove any doc ids during the compaction pass. </p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize state data </td></tr>
    <tr><td class="paramname">word</td><td>in: the word to optimize </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6aaa52e70f6e790d72ba3d79e1e19c64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aaa52e70f6e790d72ba3d79e1e19c64">&#9670;&nbsp;</a></span>fts_optimize_words()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fts_optimize_words </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__optimize__t.html">fts_optimize_t</a> *&#160;</td>
          <td class="paramname"><em>optim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdict__index__t.html">dict_index_t</a> *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__string__t.html">fts_string_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run OPTIMIZE on the given table. </p>
<p>Note: this can take a very long time (hours). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">optim</td><td>in: optimize instance </td></tr>
    <tr><td class="paramname">index</td><td>in: current FTS being optimized </td></tr>
    <tr><td class="paramname">word</td><td>in: the starting word to optimize </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c513a33475b085d5b72e8fa3deafb27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c513a33475b085d5b72e8fa3deafb27">&#9670;&nbsp;</a></span>fts_optimize_write_word()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_optimize_write_word </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__table__t.html">fts_table_t</a> *&#160;</td>
          <td class="paramname"><em>fts_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__string__t.html">fts_string_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structib__vector__t.html">ib_vector_t</a> *&#160;</td>
          <td class="paramname"><em>nodes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the FTS index table. </p>
<p>This is a delete followed by an insert. </p><dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">fts_table</td><td>in: table of FTS index </td></tr>
    <tr><td class="paramname">word</td><td>in: word data to write </td></tr>
    <tr><td class="paramname">nodes</td><td>in: the nodes to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aefdd19df9af8ceedda3b84f00bee46b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefdd19df9af8ceedda3b84f00bee46b3">&#9670;&nbsp;</a></span>fts_table_fetch_doc_ids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> fts_table_fetch_doc_ids </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrx__t.html">trx_t</a> *&#160;</td>
          <td class="paramname"><em>trx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__table__t.html">fts_table_t</a> *&#160;</td>
          <td class="paramname"><em>fts_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__doc__ids__t.html">fts_doc_ids_t</a> *&#160;</td>
          <td class="paramname"><em>doc_ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the rows from a FTS common auxiliary table. </p>
<p>Read the rows from the FTS index.</p>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx</td><td>in: transaction </td></tr>
    <tr><td class="paramname">fts_table</td><td>in: table </td></tr>
    <tr><td class="paramname">doc_ids</td><td>in: For collecting doc ids </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acc76c5208080a9e36b4d6092c3bd783e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc76c5208080a9e36b4d6092c3bd783e">&#9670;&nbsp;</a></span>fts_word_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fts_word_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__word__t.html">fts_word_t</a> *&#160;</td>
          <td class="paramname"><em>word</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free fts_optimizer_word_t instanace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">word</td><td>in: instance to free. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8eb5e0e59cd72f18d1e70ad0e589be4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eb5e0e59cd72f18d1e70ad0e589be4f">&#9670;&nbsp;</a></span>fts_word_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structfts__word__t.html">fts_word_t</a>* fts_word_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__word__t.html">fts_word_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a> *&#160;</td>
          <td class="paramname"><em>utf8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a fts_optimizer_word_t instance. </p>
<dl class="section return"><dt>Returns</dt><dd>new instance </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">word</td><td>in: word to initialize </td></tr>
    <tr><td class="paramname">utf8</td><td>in: UTF-8 string </td></tr>
    <tr><td class="paramname">len</td><td>in: length of string in bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a654fb79e0354900f7a24fe2121da4588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a654fb79e0354900f7a24fe2121da4588">&#9670;&nbsp;</a></span>fts_zip_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structfts__zip__t.html">fts_zip_t</a>* fts_zip_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mem0mem_8h.html#a29a10a74bdb0acc8a530dd6ec3c8538a">mem_heap_t</a> *&#160;</td>
          <td class="paramname"><em>heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>block_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ulint&#160;</td>
          <td class="paramname"><em>max_words</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create an instance of fts_zip_t. </p>
<dl class="section return"><dt>Returns</dt><dd>a new instance of fts_zip_t </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">heap</td><td>in: heap </td></tr>
    <tr><td class="paramname">block_sz</td><td>in: size of a zip block. </td></tr>
    <tr><td class="paramname">max_words</td><td>in: max words to read </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a325f49ab713b36779e89aece81bb4b33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a325f49ab713b36779e89aece81bb4b33">&#9670;&nbsp;</a></span>fts_zip_deflate_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fts_zip_deflate_end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__zip__t.html">fts_zip_t</a> *&#160;</td>
          <td class="paramname"><em>zip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finish Zip deflate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip</td><td>in: instance that should be closed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7f15c73d46257530f33d446bfaadf467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f15c73d46257530f33d446bfaadf467">&#9670;&nbsp;</a></span>fts_zip_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fts_zip_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__zip__t.html">fts_zip_t</a> *&#160;</td>
          <td class="paramname"><em>zip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize an instance of fts_zip_t. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip</td><td>in: zip instance to init </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8b18a366e608927ab4c3f20429b821d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b18a366e608927ab4c3f20429b821d5">&#9670;&nbsp;</a></span>fts_zip_initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fts_zip_initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__zip__t.html">fts_zip_t</a> *&#160;</td>
          <td class="paramname"><em>zip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize fts_zip_t. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip</td><td>out: zip instance to initialize </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a304825f20021b9db4330dc9f51a8cdfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a304825f20021b9db4330dc9f51a8cdfe">&#9670;&nbsp;</a></span>fts_zip_read_word()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libmysql_2authentication__win_2common_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>* fts_zip_read_word </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfts__zip__t.html">fts_zip_t</a> *&#160;</td>
          <td class="paramname"><em>zip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfts__string__t.html">fts_string_t</a> *&#160;</td>
          <td class="paramname"><em>word</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a word. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zip</td><td>in: Zip state + data </td></tr>
    <tr><td class="paramname">word</td><td>out: uncompressed word </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae87392184c91ab0ed706a8644a8645aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae87392184c91ab0ed706a8644a8645aa">&#9670;&nbsp;</a></span>fts_common_tables</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* fts_common_tables[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>It's defined in fts0fts.cc. </p>
<p>It's defined in fts0fts.cc. </p>

</div>
</div>
<a id="ac9c836aee603bf8dfeecbed3529dbc52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9c836aee603bf8dfeecbed3529dbc52">&#9670;&nbsp;</a></span>fts_delete_doc_ids_sql</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* fts_delete_doc_ids_sql</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">    <span class="stringliteral">&quot;BEGIN\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;DELETE FROM $deleted WHERE doc_id = :doc_id1;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;DELETE FROM $deleted_cache WHERE doc_id = :doc_id2;\n&quot;</span></div></div><!-- fragment -->
</div>
</div>
<a id="aa27da593ca22ff9447f1889662c99dcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27da593ca22ff9447f1889662c99dcd">&#9670;&nbsp;</a></span>fts_enable_diag_print</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> fts_enable_diag_print</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variable specifying whether we do additional FTS diagnostic printout in the log. </p>

</div>
</div>
<a id="abd44a1b732780f6485fae97e6b4c3207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd44a1b732780f6485fae97e6b4c3207">&#9670;&nbsp;</a></span>fts_end_delete_sql</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* fts_end_delete_sql</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">    <span class="stringliteral">&quot;BEGIN\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;DELETE FROM $being_deleted;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;DELETE FROM $being_deleted_cache;\n&quot;</span></div></div><!-- fragment -->
</div>
</div>
<a id="a7d19483e734bf1f7c4bdf8668b3b10c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d19483e734bf1f7c4bdf8668b3b10c0">&#9670;&nbsp;</a></span>fts_init_delete_sql</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* fts_init_delete_sql</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">    <span class="stringliteral">&quot;BEGIN\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;INSERT INTO $being_deleted\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;SELECT doc_id FROM $deleted;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;INSERT INTO $being_deleted_cache\n&quot;</span></div><div class="line">    <span class="stringliteral">&quot;SELECT doc_id FROM $deleted_cache;\n&quot;</span></div></div><!-- fragment -->
<p>SQL Statement for changing state of rows to be deleted from FTS Index. </p>

</div>
</div>
<a id="aea590c3216a103482d8e6c8867cc1c79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea590c3216a103482d8e6c8867cc1c79">&#9670;&nbsp;</a></span>fts_num_word_optimize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="my__inttypes_8h.html#a718b4eb2652c286f4d42dc18a8e71a1a">ulong</a> fts_num_word_optimize</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of words to read and optimize in a single pass. </p>
<p>Variable specifying the number of word to optimize for each optimize table call.</p>

</div>
</div>
<a id="aa0ba4ff366c559a75a1803775124a050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0ba4ff366c559a75a1803775124a050">&#9670;&nbsp;</a></span>fts_opt_start_shutdown</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> fts_opt_start_shutdown = <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Server is shutting down, so does we exiting the optimize thread. </p>

</div>
</div>
<a id="ab970e3ce6f57b7fb4b0a0e237b390236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab970e3ce6f57b7fb4b0a0e237b390236">&#9670;&nbsp;</a></span>FTS_OPTIMIZE_INTERVAL_IN_SECS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const ulint FTS_OPTIMIZE_INTERVAL_IN_SECS = 300</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default optimize interval in secs. </p>

</div>
</div>
<a id="a6916e0c98bd35c1618bbbb0749dcae73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6916e0c98bd35c1618bbbb0749dcae73">&#9670;&nbsp;</a></span>fts_optimize_time_limit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ut0ut_8h.html#aefa75a301c357c9780b2b68cce397653">ib_time_t</a> fts_optimize_time_limit = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The amount of time optimizing in a single pass, in milliseconds. </p>

</div>
</div>
<a id="a75ca4a9a51f9c3880ebcbe989592676c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75ca4a9a51f9c3880ebcbe989592676c">&#9670;&nbsp;</a></span>fts_optimize_wq</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structib__wqueue__t.html">ib_wqueue_t</a>* fts_optimize_wq</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The FTS optimize thread's work queue. </p>

</div>
</div>
<a id="aed68ade2ff8c56b4bcf7a5d432ca11b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed68ade2ff8c56b4bcf7a5d432ca11b2">&#9670;&nbsp;</a></span>FTS_QUEUE_WAIT_IN_USECS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const ulint FTS_QUEUE_WAIT_IN_USECS = 5000000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time to wait for a message. </p>

</div>
</div>
<a id="addc2b2853b6c031911c29dd0f0a0cc8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addc2b2853b6c031911c29dd0f0a0cc8a">&#9670;&nbsp;</a></span>FTS_WORD_NODES_INIT_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const ulint FTS_WORD_NODES_INIT_SIZE = 64</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initial size of nodes in fts_word_t. </p>

</div>
</div>
<a id="affd0b90c44352fd218246d78bf609e60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd0b90c44352fd218246d78bf609e60">&#9670;&nbsp;</a></span>FTS_ZIP_BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ulint FTS_ZIP_BLOCK_SIZE = 1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ZLib compressed block size. </p>

</div>
</div>
<a id="a46f83e0f423644566c4ac6ebfebba1e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46f83e0f423644566c4ac6ebfebba1e7">&#9670;&nbsp;</a></span>last_check_sync_time</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ut0ut_8h.html#a3d7efb6a0ff993a01dd08a7fa914056a">ib_time_monotonic_t</a> last_check_sync_time</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Last time we did check whether system need a sync. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_70f20ecf11358dff00a0daf546d3147e.html">storage</a></li><li class="navelem"><a class="el" href="dir_3fec0aa9607ea05e0bb1c96aee1a8c4e.html">innobase</a></li><li class="navelem"><a class="el" href="dir_fd18fac32ac7310620e63cce0ced4863.html">fts</a></li><li class="navelem"><a class="el" href="fts0opt_8cc.html">fts0opt.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
