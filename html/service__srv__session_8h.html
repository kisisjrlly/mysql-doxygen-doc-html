<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: include/mysql/service_srv_session.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('service__srv__session_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">service_srv_session.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for the Server session service.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="service__srv__session__bits_8h_source.html">mysql/service_srv_session_bits.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="include_2mysql_2plugin_8h_source.html">mysql/plugin.h</a>&quot;</code><br />
</div>
<p><a href="service__srv__session_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsrv__session__service__st.html">srv_session_service_st</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1ee17fc0e82d4c1e12b25872c2acdb00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__srv__session_8h.html#a1ee17fc0e82d4c1e12b25872c2acdb00">srv_session_init_thread</a> (const void *<a class="el" href="test__services__host__application__signal_8cc.html#a49308eac63cac1d140bf78a2ee88dbd0">plugin</a>)</td></tr>
<tr class="memdesc:a1ee17fc0e82d4c1e12b25872c2acdb00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the current physical thread to use with session service.  <a href="#a1ee17fc0e82d4c1e12b25872c2acdb00">More...</a><br /></td></tr>
<tr class="separator:a1ee17fc0e82d4c1e12b25872c2acdb00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2569b9f0ab6376ccd23d45af66158c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__srv__session_8h.html#ac2569b9f0ab6376ccd23d45af66158c8">srv_session_deinit_thread</a> ()</td></tr>
<tr class="memdesc:ac2569b9f0ab6376ccd23d45af66158c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitializes the current physical thread to use with session service.  <a href="#ac2569b9f0ab6376ccd23d45af66158c8">More...</a><br /></td></tr>
<tr class="separator:ac2569b9f0ab6376ccd23d45af66158c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad320991ffed7b727b8bf8419fb051818"><td class="memItemLeft" align="right" valign="top"><a class="el" href="service__srv__session__bits_8h.html#a09b79198061bb3debe316aec5d72b59a">MYSQL_SESSION</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__srv__session_8h.html#ad320991ffed7b727b8bf8419fb051818">srv_session_open</a> (<a class="el" href="service__srv__session__bits_8h.html#afa8a83e5504321b1dcc44daed53dde30">srv_session_error_cb</a> error_cb, void *<a class="el" href="test__sql__9__sessions_8cc.html#aeac6b6909105bf9aaed960a8f8d57e8b">plugin_ctx</a>)</td></tr>
<tr class="memdesc:ad320991ffed7b727b8bf8419fb051818"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a server session.  <a href="#ad320991ffed7b727b8bf8419fb051818">More...</a><br /></td></tr>
<tr class="separator:ad320991ffed7b727b8bf8419fb051818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af09d39f86e6462cd136035a8fd15ed9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__srv__session_8h.html#af09d39f86e6462cd136035a8fd15ed9b">srv_session_detach</a> (<a class="el" href="service__srv__session__bits_8h.html#a09b79198061bb3debe316aec5d72b59a">MYSQL_SESSION</a> <a class="el" href="test__sql__9__sessions_8cc.html#a50fdcc0cc7aed7fda7242e9d466729ae">session</a>)</td></tr>
<tr class="memdesc:af09d39f86e6462cd136035a8fd15ed9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detaches a session from current physical thread.  <a href="#af09d39f86e6462cd136035a8fd15ed9b">More...</a><br /></td></tr>
<tr class="separator:af09d39f86e6462cd136035a8fd15ed9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac739c805ae39eead2386367305209307"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__srv__session_8h.html#ac739c805ae39eead2386367305209307">srv_session_close</a> (<a class="el" href="service__srv__session__bits_8h.html#a09b79198061bb3debe316aec5d72b59a">MYSQL_SESSION</a> <a class="el" href="test__sql__9__sessions_8cc.html#a50fdcc0cc7aed7fda7242e9d466729ae">session</a>)</td></tr>
<tr class="memdesc:ac739c805ae39eead2386367305209307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a previously opened session.  <a href="#ac739c805ae39eead2386367305209307">More...</a><br /></td></tr>
<tr class="separator:ac739c805ae39eead2386367305209307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ba1c692910cc27e1b6d11ae4b0477c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__srv__session_8h.html#ac2ba1c692910cc27e1b6d11ae4b0477c">srv_session_server_is_available</a> ()</td></tr>
<tr class="memdesc:ac2ba1c692910cc27e1b6d11ae4b0477c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if the server is available (not booting or shutting down)  <a href="#ac2ba1c692910cc27e1b6d11ae4b0477c">More...</a><br /></td></tr>
<tr class="separator:ac2ba1c692910cc27e1b6d11ae4b0477c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c30f975dbd1572e62f81949957afcc4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__srv__session_8h.html#a9c30f975dbd1572e62f81949957afcc4">srv_session_attach</a> (<a class="el" href="service__srv__session__bits_8h.html#a09b79198061bb3debe316aec5d72b59a">MYSQL_SESSION</a> <a class="el" href="test__sql__9__sessions_8cc.html#a50fdcc0cc7aed7fda7242e9d466729ae">session</a>, <a class="el" href="replication_8h.html#a2466913ab4144372494c96b714a8a9e5">MYSQL_THD</a> *ret_previous_thd)</td></tr>
<tr class="memdesc:a9c30f975dbd1572e62f81949957afcc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches a session to current physical thread.  <a href="#a9c30f975dbd1572e62f81949957afcc4">More...</a><br /></td></tr>
<tr class="separator:a9c30f975dbd1572e62f81949957afcc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0011801950a7da9b8a22fab23df1cfea"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsrv__session__service__st.html">srv_session_service_st</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="service__srv__session_8h.html#a0011801950a7da9b8a22fab23df1cfea">srv_session_service</a></td></tr>
<tr class="separator:a0011801950a7da9b8a22fab23df1cfea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for the Server session service. </p>
<p>This service is to provide of creating sessions with the server. These sessions can be furtherly used together with the Command service to execute commands in the server.</p>
<dl class="section note"><dt>Note</dt><dd>Session should not be used after being closed, unless MYSQL_SESSION handle is set to NULL. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9c30f975dbd1572e62f81949957afcc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c30f975dbd1572e62f81949957afcc4">&#9670;&nbsp;</a></span>srv_session_attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int srv_session_attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service__srv__session__bits_8h.html#a09b79198061bb3debe316aec5d72b59a">MYSQL_SESSION</a>&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="replication_8h.html#a2466913ab4144372494c96b714a8a9e5">MYSQL_THD</a> *&#160;</td>
          <td class="paramname"><em>ret_previous_thd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attaches a session to current physical thread. </p>
<p>Previously attached THD is detached and returned through ret_previous_thd. THD associated with session is attached.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>Session to attach</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 success 1 failure</dd></dl>
<p>Attaches a session to current physical thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>Session handle to attach </td></tr>
    <tr><td class="paramname">ret_previous_thd</td><td>Previously attached THD</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 success 1 failure </dd></dl>

</div>
</div>
<a id="ac739c805ae39eead2386367305209307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac739c805ae39eead2386367305209307">&#9670;&nbsp;</a></span>srv_session_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int srv_session_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service__srv__session__bits_8h.html#a09b79198061bb3debe316aec5d72b59a">MYSQL_SESSION</a>&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes a previously opened session. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>Session to close</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This method close the session but session handle is not set to NULL. Session handle should be set to NULL explicitly after calling this method. Session should not be used otherwise.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 success 1 failure </dd></dl>

</div>
</div>
<a id="ac2569b9f0ab6376ccd23d45af66158c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2569b9f0ab6376ccd23d45af66158c8">&#9670;&nbsp;</a></span>srv_session_deinit_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void srv_session_deinit_thread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitializes the current physical thread to use with session service. </p>
<p>Call this function ONLY in physical threads which were initialized using srv_session_init_thread().</p>
<p>Deinitializes the current physical thread to use with session service. </p>

</div>
</div>
<a id="af09d39f86e6462cd136035a8fd15ed9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af09d39f86e6462cd136035a8fd15ed9b">&#9670;&nbsp;</a></span>srv_session_detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int srv_session_detach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service__srv__session__bits_8h.html#a09b79198061bb3debe316aec5d72b59a">MYSQL_SESSION</a>&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detaches a session from current physical thread. </p>
<p>Detaches a previously session. Which can only occur when the MYSQL_SESSION was manually attached by "srv_session_attach". Other srv_session calls automatically attached/detached the THD when the MYSQL_SESSION is used (for example command_service_run_command()).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session</td><td>Session to detach</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 success 1 failure </dd></dl>

</div>
</div>
<a id="a1ee17fc0e82d4c1e12b25872c2acdb00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ee17fc0e82d4c1e12b25872c2acdb00">&#9670;&nbsp;</a></span>srv_session_init_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int srv_session_init_thread </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>plugin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the current physical thread to use with session service. </p>
<p>Call this function ONLY in physical threads which are not initialized in any way by the server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">plugin</td><td>Pointer to the plugin structure, passed to the plugin over the plugin init function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 success 1 failure</dd></dl>
<p>Initializes the current physical thread to use with session service.</p>
<dl class="section return"><dt>Returns</dt><dd>0 success 1 failure </dd></dl>

</div>
</div>
<a id="ad320991ffed7b727b8bf8419fb051818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad320991ffed7b727b8bf8419fb051818">&#9670;&nbsp;</a></span>srv_session_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="service__srv__session__bits_8h.html#a09b79198061bb3debe316aec5d72b59a">MYSQL_SESSION</a> srv_session_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="service__srv__session__bits_8h.html#afa8a83e5504321b1dcc44daed53dde30">srv_session_error_cb</a>&#160;</td>
          <td class="paramname"><em>error_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>plugin_ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens a server session. </p>
<p>In a thread not initialized by the server itself, this function should be called only after srv_session_init_thread() has already been called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error_cb</td><td>session error callback </td></tr>
    <tr><td class="paramname">plugin_ctx</td><td>Plugin's context, opaque pointer that would be provided to callbacks. Might be NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>session on success NULL on failure</dd></dl>
<p>Opens a server session.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error_cb</td><td>Default completion callback </td></tr>
    <tr><td class="paramname">plugin_ctx</td><td>Plugin's context, opaque pointer that would be provided to callbacks. Might be NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>handler of session on success NULL on failure </dd></dl>

</div>
</div>
<a id="ac2ba1c692910cc27e1b6d11ae4b0477c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ba1c692910cc27e1b6d11ae4b0477c">&#9670;&nbsp;</a></span>srv_session_server_is_available()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int srv_session_server_is_available </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns if the server is available (not booting or shutting down) </p>
<dl class="section return"><dt>Returns</dt><dd>0 not available 1 available </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a0011801950a7da9b8a22fab23df1cfea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0011801950a7da9b8a22fab23df1cfea">&#9670;&nbsp;</a></span>srv_session_service</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsrv__session__service__st.html">srv_session_service_st</a> *  srv_session_service</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_70d4c64b7fa4d8934a31e8e779c55748.html">mysql</a></li><li class="navelem"><a class="el" href="service__srv__session_8h.html">service_srv_session.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
