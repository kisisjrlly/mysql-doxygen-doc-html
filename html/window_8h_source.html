<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: sql/window.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('window_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">window.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="window_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Copyright (c) 2017, 2020, Oracle and/or its affiliates.</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   it under the terms of the GNU General Public License, version 2.0,</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   as published by the Free Software Foundation.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">   This program is also distributed with certain software (including</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   but not limited to OpenSSL) that is licensed under separate terms,</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">   as designated in a particular file or component or in included license</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   documentation.  The authors of MySQL hereby grant you an additional</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">   permission to link the program and your derivative works with the</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   separately licensed software that they have included with MySQL.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">   GNU General Public License, version 2.0, for more details.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">   along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#ifndef WINDOWS_INCLUDED</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define WINDOWS_INCLUDED</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span>  <span class="comment">// std::memcpy</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__dbug_8h.html">my_dbug.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__inttypes_8h.html">my_inttypes.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="enum__query__type_8h.html">sql/enum_query_type.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sql_2handler_8h.html">sql/handler.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem__root__array_8h.html">sql/mem_root_array.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sql__lex_8h.html">sql/sql_lex.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sql__list_8h.html">sql/sql_list.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sql_2table_8h.html">sql/table.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">  Some Window-related symbols must be known to sql_lex.h which is a frequently</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">  included header.</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">  To avoid that any change to window.h causes a recompilation of the whole</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">  Server, those symbols go into this header:</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="window__lex_8h.html">sql/window_lex.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">class </span><a class="code" href="classCached__item.html">Cached_item</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">class </span><a class="code" href="classItem.html">Item</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">class </span><a class="code" href="classItem__func.html">Item_func</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">class </span><a class="code" href="classItem__string.html">Item_string</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">class </span><a class="code" href="classItem__sum.html">Item_sum</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">class </span><a class="code" href="classPT__border.html">PT_border</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">class </span><a class="code" href="classPT__frame.html">PT_frame</a>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">class </span><a class="code" href="classPT__order__list.html">PT_order_list</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">class </span><a class="code" href="classPT__window.html">PT_window</a>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">class </span><a class="code" href="classString.html">String</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">class </span><a class="code" href="classTHD.html">THD</a>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">class </span><a class="code" href="classTemp__table__param.html">Temp_table_param</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">  Position hints for the frame buffer are saved for these kind of row</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">  accesses, cf. #Window::m_frame_buffer_positions.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7f">   64</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7f">Window_retrieve_cached_row_reason</a> {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa30fd0f6b96519b88023f4aaf287bbf59">WONT_UPDATE_HINT</a> = -1,  <span class="comment">// special value when using restore_special_record</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fabcf8f2fc3b6be3cb7cf2e8a8d52f613c">FIRST_IN_PARTITION</a> = 0,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7faa2770969c827f0f2910f6179418462df">CURRENT</a> = 1,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa87458dc7d4fd697bd28ad5e371486d54">FIRST_IN_FRAME</a> = 2,</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa7b99c3e233301e750ca335b65361858b">LAST_IN_FRAME</a> = 3,</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa8ecaa4621d23528a20d5dea20a01958c">LAST_IN_PEERSET</a> = 4,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa53f4d96b33c0bda32aec8530304661c2">MISC_POSITIONS</a> = 5  <span class="comment">// NTH_VALUE, LEAD/LAG have dynamic indexes 5..N</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;};</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">  Represents the (explicit) window of a SQL 2003 section 7.11 &lt;window clause&gt;,</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">  or the implicit (inlined) window of a window function call, or a reference to</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">  a named window in a window function call (instead of the inlined definition)</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">  before resolution.  After resolving referencing instances become unused,</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">  having been replaced with the window resolved to in the w.f. call.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">  @verbatim</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">  Cf. 7.11 &lt;window definition&gt; and &lt;existing window name&gt;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">      6.10 &lt;window name or specification&gt; and</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">           &lt;in-line window specification&gt;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">      5.4 &lt;window name&gt;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">  @endverbatim</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">  See also PT_window (which wraps Window as a parse_tree_node), and the related</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">  classes PT_frame, PT_border and PT_exclusion in parse_tree_nodes.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">  Currently includes both prepared query and execution state information.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">  The latter is marked as such for ease of separation later.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="classWindow.html">   94</a></span>&#160;<span class="keyword">class </span><a class="code" href="classWindow.html">Window</a> {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">/*------------------------------------------------------------------------</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">   * Variables stable during execution</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">   *------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classWindow.html#af1289c052b4481e33dfad38f02ec30c1">  101</a></span>&#160;  <a class="code" href="classSELECT__LEX.html">SELECT_LEX</a> *<a class="code" href="classWindow.html#af1289c052b4481e33dfad38f02ec30c1">m_select</a>;                 <span class="comment">///&lt; The SELECT the window is on</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classWindow.html#afca36dae2db6f95e3529d27081c930d2">  102</a></span>&#160;<span class="comment"></span>  <a class="code" href="classPT__order__list.html">PT_order_list</a> *<span class="keyword">const</span> <a class="code" href="classWindow.html#afca36dae2db6f95e3529d27081c930d2">m_partition_by</a>;  <span class="comment">///&lt; &lt;window partition clause&gt;</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classWindow.html#a495a78db188bf6ba6e5aa43499bcd0e6">  103</a></span>&#160;<span class="comment"></span>  <a class="code" href="classPT__order__list.html">PT_order_list</a> *<span class="keyword">const</span> <a class="code" href="classWindow.html#a495a78db188bf6ba6e5aa43499bcd0e6">m_order_by</a>;      <span class="comment">///&lt; &lt;window order clause&gt;</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classWindow.html#a330f0aba2e75358c29f62bd6fbd68905">  104</a></span>&#160;<span class="comment"></span>  <a class="code" href="structORDER.html">ORDER</a> *<a class="code" href="classWindow.html#a330f0aba2e75358c29f62bd6fbd68905">m_sorting_order</a>;               <span class="comment">///&lt; merged partition/order by</span></div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classWindow.html#adb88a512c5644560e4266986bd27afd2">  105</a></span>&#160;<span class="comment"></span>  <a class="code" href="classPT__frame.html">PT_frame</a> *<span class="keyword">const</span> <a class="code" href="classWindow.html#adb88a512c5644560e4266986bd27afd2">m_frame</a>;              <span class="comment">///&lt; &lt;window frame clause&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classWindow.html#a21602ae681064bae23ee0eefa3801206">  106</a></span>&#160;<span class="comment"></span>  <a class="code" href="classItem__string.html">Item_string</a> *<a class="code" href="classWindow.html#a21602ae681064bae23ee0eefa3801206">m_name</a>;                  <span class="comment">///&lt; &lt;window name&gt;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span><span class="comment">  /**</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">    Position of definition in query&#39;s text, 1 for leftmost. References don&#39;t</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">    count. Thus, anonymous windows in SELECT list, then windows of WINDOW</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">    clause, then anonymous windows in ORDER BY.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classWindow.html#a3b6b5bce2537a290d061f6ed540bbce8">  112</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classWindow.html#a3b6b5bce2537a290d061f6ed540bbce8">m_def_pos</a>;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classWindow.html#a028148fc459db83d705edab451e8aca7">  113</a></span>&#160;  <a class="code" href="classItem__string.html">Item_string</a> *<span class="keyword">const</span> <a class="code" href="classWindow.html#a028148fc459db83d705edab451e8aca7">m_inherit_from</a>;  <span class="comment">///&lt; &lt;existing window name&gt;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"></span><span class="comment">  /**</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">    If true, m_name is an unbound window reference, other fields</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">    are unused.</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classWindow.html#a05d4d1ea03ffe3d8caa4a0f853bc600c">  118</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a05d4d1ea03ffe3d8caa4a0f853bc600c">m_is_reference</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">    (At least) one window function needs to buffer frame rows for evaluation</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">    i.e. it cannot be evaluated on the fly just from previous rows seen</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classWindow.html#ac95a62be57b6562776d29cd5dd333c58">  124</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ac95a62be57b6562776d29cd5dd333c58">m_needs_frame_buffering</a>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">    (At least) one window function needs the peer set of the current row to</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">    evaluate the wf for the current row</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classWindow.html#a319c45af7cf6c66c1f93339cc460fcab">  130</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a319c45af7cf6c66c1f93339cc460fcab">m_needs_peerset</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">    (At least) one window function (currently JSON_OBJECTAGG) needs the</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">    last peer for the current row to evaluate the wf for the current row.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">    (This is used only during inversion/optimization)</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classWindow.html#a829ca8e083149c23d83a3351853f350c">  137</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a829ca8e083149c23d83a3351853f350c">m_needs_last_peer_in_frame</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">    (At least) one window function needs the cardinality of the partition of</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">    the current row to evaluate the wf for the current row</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classWindow.html#ada1c69cb59cce1cc6e9d5aff2db67d41">  143</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ada1c69cb59cce1cc6e9d5aff2db67d41">m_needs_card</a>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">    The functions are optimizable with ROW unit. For example SUM is, MAX is</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">    not always optimizable. Optimized means we can use the optimized evaluation</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">    path in process_buffered_windowing_record which uses inversion to avoid</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">    revisiting all frame rows for every row being evaluated.</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="classWindow.html#a049216e091cc1cfcf7be86efbcbe9509">  151</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a049216e091cc1cfcf7be86efbcbe9509">m_row_optimizable</a>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">    The functions are optimizable with RANGE unit. For example SUM is, MAX is</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">    not always optimizable. Optimized means we can use the optimized evaluation</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">    path in process_buffered_windowing_record which uses inversion to avoid</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">    revisiting all frame rows for every row being evaluated.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classWindow.html#a5df31eacc380806c96b30395d2de25f9">  159</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a5df31eacc380806c96b30395d2de25f9">m_range_optimizable</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">    The aggregates (SUM, etc) can be evaluated once for a partition, since it</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">    is static, i.e. all rows will have the same value for the aggregates, e.g.</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">    ROWS/RANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classWindow.html#a60f03eb20e00b2bad5edb160f0c94e2c">  166</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a60f03eb20e00b2bad5edb160f0c94e2c">m_static_aggregates</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    Window equires re-evaluation of the first row in optimized moving frame mode</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">    e.g. FIRST_VALUE.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="classWindow.html#a5ca855dfc77e145638ec936fe899d995">  172</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a5ca855dfc77e145638ec936fe899d995">m_opt_first_row</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">    Window requires re-evaluation of the last row in optimized moving frame mode</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">    e.g. LAST_VALUE.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classWindow.html#afcdb975ad871c18bf2252b890eaf0d53">  178</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#afcdb975ad871c18bf2252b890eaf0d53">m_opt_last_row</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">    Can be true if first window after a join: we may need to restore the input</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">    record after buffered window processing if EQRefIterator&#39;s caching logic</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">    presumes the record hasn&#39;t been modified (when last qep_tab uses JT_EQ_REF).</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="classWindow.html#a6860d51c1f431ba49b2b6616b100e6a4">  185</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a6860d51c1f431ba49b2b6616b100e6a4">m_needs_restore_input_row</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">    The last window to be evaluated at execution time.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classWindow.html#a832a813a83de44449ea5e9d627a571dd">  190</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a832a813a83de44449ea5e9d627a571dd">m_last</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="structWindow_1_1st__offset.html">  193</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structWindow_1_1st__offset.html">st_offset</a> {</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structWindow_1_1st__offset.html#a9f1810540f9014e069d8c859dcd2ee9b">  194</a></span>&#160;    <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="structWindow_1_1st__offset.html#a9f1810540f9014e069d8c859dcd2ee9b">m_rowno</a>;</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="structWindow_1_1st__offset.html#a49a79e53c85b1592741e5c35e1fc9cc8">  195</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structWindow_1_1st__offset.html#a49a79e53c85b1592741e5c35e1fc9cc8">m_from_last</a>;</div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="structWindow_1_1st__offset.html#a2fa0c6e5b43b7c3aedeb158d6afaaa43">  196</a></span>&#160;    <a class="code" href="structWindow_1_1st__offset.html#a2fa0c6e5b43b7c3aedeb158d6afaaa43">st_offset</a>() : m_rowno(0), m_from_last(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {}<span class="comment"></span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">      Used for sorting offsets in ascending order for faster traversal of</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">      frame buffer tmp file</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="structWindow_1_1st__offset.html#a27cc2541d36a34244bd90af2afc74724">  201</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structWindow_1_1st__offset.html#a27cc2541d36a34244bd90af2afc74724">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structWindow_1_1st__offset.html">st_offset</a> &amp;a)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_rowno &lt; a.<a class="code" href="structWindow_1_1st__offset.html#a9f1810540f9014e069d8c859dcd2ee9b">m_rowno</a>; }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  };</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="structWindow_1_1st__ll__offset.html">  204</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structWindow_1_1st__ll__offset.html">st_ll_offset</a> {</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="structWindow_1_1st__ll__offset.html#a13567d8d18fbdfaf301b271d48622a21">  205</a></span>&#160;    <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="structWindow_1_1st__ll__offset.html#a13567d8d18fbdfaf301b271d48622a21">m_rowno</a>;  <span class="comment">///&lt; negative values is LEAD</span></div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="structWindow_1_1st__ll__offset.html#a0455101459b66f3a010372ac352e1a55">  206</a></span>&#160;<span class="comment"></span>    <a class="code" href="structWindow_1_1st__ll__offset.html#a0455101459b66f3a010372ac352e1a55">st_ll_offset</a>() : m_rowno(<a class="code" href="my__inttypes_8h.html#a34c80736531fb7d0b1988f6b174bac42">INT_MIN64</a> <span class="comment">/* uninitialized marker*/</span>) {}<span class="comment"></span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">      Used for sorting offsets in ascending order for faster traversal of</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">      frame buffer tmp file</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="structWindow_1_1st__ll__offset.html#ac1d765c79f3f1608c69843d531a3587e">  211</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structWindow_1_1st__ll__offset.html#ac1d765c79f3f1608c69843d531a3587e">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structWindow_1_1st__ll__offset.html">st_ll_offset</a> &amp;a)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_rowno &lt; a.<a class="code" href="structWindow_1_1st__ll__offset.html#a13567d8d18fbdfaf301b271d48622a21">m_rowno</a>; }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  };</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="structWindow_1_1st__nth.html">  214</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structWindow_1_1st__nth.html">st_nth</a> {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classMem__root__array__YY.html">Mem_root_array_YY&lt;st_offset&gt;</a></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="structWindow_1_1st__nth.html#aa98d95113198cbb3cac0825f32cac351">  216</a></span>&#160;        <a class="code" href="structWindow_1_1st__nth.html#aa98d95113198cbb3cac0825f32cac351">m_offsets</a>;  <span class="comment">///&lt; sorted set of NTH_VALUE offsets</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span>  };</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="structWindow_1_1st__lead__lag.html">  219</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structWindow_1_1st__lead__lag.html">st_lead_lag</a> {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="classMem__root__array__YY.html">Mem_root_array_YY&lt;st_ll_offset&gt;</a></div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="structWindow_1_1st__lead__lag.html#af873e86d630b947a864a04050173baf6">  221</a></span>&#160;        <a class="code" href="structWindow_1_1st__lead__lag.html#af873e86d630b947a864a04050173baf6">m_offsets</a>;  <span class="comment">///&lt; sorted set of LEAD/LAG offsets</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"></span>  };</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; <span class="keyword">protected</span>:<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">    Window requires re-evaluation of the Nth row in optimized moving frame mode</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">    e.g. NTH_VALUE.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="classWindow.html#af0f11b0e36b054f484466ac3f022d689">  229</a></span>&#160;  <a class="code" href="structWindow_1_1st__nth.html">st_nth</a> <a class="code" href="classWindow.html#af0f11b0e36b054f484466ac3f022d689">m_opt_nth_row</a>;</div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="classWindow.html#a946f2b8a5f05df71fb2d80c7eae52cbf">  230</a></span>&#160;  <a class="code" href="structWindow_1_1st__lead__lag.html">st_lead_lag</a> <a class="code" href="classWindow.html#a946f2b8a5f05df71fb2d80c7eae52cbf">m_opt_lead_lag</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; <span class="keyword">protected</span>:</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classWindow.html#a38996f07642a040a1b70d791d6bca516">  233</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classWindow.html">Window</a> *<a class="code" href="classWindow.html#a38996f07642a040a1b70d791d6bca516">m_ancestor</a>;             <span class="comment">///&lt; resolved from existing window name</span></div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classWindow.html#afb76d6cd2505424786356826381a2d4d">  234</a></span>&#160;<span class="comment"></span>  <a class="code" href="classList.html">List&lt;Item_sum&gt;</a> <a class="code" href="classWindow.html#afb76d6cd2505424786356826381a2d4d">m_functions</a>;           <span class="comment">///&lt; window functions based on &#39;this&#39;</span></div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classWindow.html#abc606a658acfeaedb7b7e2ebc68e596e">  235</a></span>&#160;<span class="comment"></span>  <a class="code" href="classList.html">List&lt;Cached_item&gt;</a> <a class="code" href="classWindow.html#abc606a658acfeaedb7b7e2ebc68e596e">m_partition_items</a>;  <span class="comment">///&lt; items for the PARTITION BY columns</span></div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classWindow.html#a4969fceeeb0328dc5d3cecdf3c76ddaa">  236</a></span>&#160;<span class="comment"></span>  <a class="code" href="classList.html">List&lt;Cached_item&gt;</a> <a class="code" href="classWindow.html#a4969fceeeb0328dc5d3cecdf3c76ddaa">m_order_by_items</a>;   <span class="comment">///&lt; items for the ORDER BY exprs.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">/*------------------------------------------------------------------------</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">   * Execution state variables</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">   *------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">    Cardinality of m_frame_buffer_positions if no NTH_VALUE, LEAD/LAG</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="classWindow.html#a7791674012b0ed3d0e891f53e521a575">  247</a></span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> FRAME_BUFFER_POSITIONS_CARD =</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa53f4d96b33c0bda32aec8530304661c2">Window_retrieve_cached_row_reason::MISC_POSITIONS</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">    Holds information about a position in the buffer frame as stored in a</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">    temporary file (cf. m_frame_buffer). We save a number of such positions</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">    to speed up lookup when we move the window frame, cf.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">    m_frame_buffer_positions</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="structWindow_1_1Frame__buffer__position.html">  256</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structWindow_1_1Frame__buffer__position.html">Frame_buffer_position</a> {<span class="comment"></span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">    ///&lt; The size of the file position is determined by handler::ref_length</span></div><div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="structWindow_1_1Frame__buffer__position.html#a729928b5d818e6d257324322d756a6d7">  258</a></span>&#160;<span class="comment"></span>    <a class="code" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="code" href="structWindow_1_1Frame__buffer__position.html#a729928b5d818e6d257324322d756a6d7">m_position</a>;<span class="comment"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">    ///&lt; Row number in partition, 1-based</span></div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="structWindow_1_1Frame__buffer__position.html#a3eb8d6a03c0e892ffa82e3024e6f0340">  260</a></span>&#160;<span class="comment"></span>    <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="structWindow_1_1Frame__buffer__position.html#a3eb8d6a03c0e892ffa82e3024e6f0340">m_rowno</a>;</div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="structWindow_1_1Frame__buffer__position.html#aa4084c0b32ab81b3b975b3fcdb8ebffc">  261</a></span>&#160;    <a class="code" href="structWindow_1_1Frame__buffer__position.html#aa4084c0b32ab81b3b975b3fcdb8ebffc">Frame_buffer_position</a>(<a class="code" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *position, <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> rowno)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        : m_position(position), m_rowno(rowno) {}</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  };</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">    Execution state: used iff m_needs_frame_buffering. Holds pointers to</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">    positions in the file in m_frame_buffer. We use these saved positions to</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">    avoid having to position to the first row in the partition and then</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">    making many read calls to find the desired row. By repositioning to a</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">    suitably(*) saved position we normally (**) need to do only one positioned</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">    read and one ha_rdn_next call to get at a desired row.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">    @verbatim</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">      [0] the first row in the partition: at the</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">          beginning of a new partition that is the first row in the partition.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">          Its rowno == 1 by definition.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">      [1] position of the current row N  (for jump-back to current row or next</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">                                          current row in combo with ha_rnd_next)</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">      [2] position of the current first row M in frame (for aggregation looping</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">          jump-back)</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">      [3] position of the current last row in a frame</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">      [4] position and line number of the row last read</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">   and optionally:</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">      [5..X] positions of Nth row of X-5+1 NTH_VALUE functions invoked on window</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">      [X+1..Y] position of last row of lead/lag functions invoked on window</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">    @endverbatim</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">    Pointers are lazily initialized if needed.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">    (*) We use the position closest below the desired position, cf logic in</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">    read_frame_buffer_row.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">    (**) Unless we have a frame beyond the current row, in which case we need</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">    to do some scanning for the first row in the partition.</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">    Also NTH_VALUE with RANGE might sometimes needs to read several rows, since</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">    the frame start can jump several rows ahead when the current row moves</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">    forward.</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="classWindow.html#ac5eac4e74934033635df8387a4f29c9c">  299</a></span>&#160;  <a class="code" href="classMem__root__array__YY.html">Mem_root_array_YY&lt;Frame_buffer_position&gt;</a> <a class="code" href="classWindow.html#ac5eac4e74934033635df8387a4f29c9c">m_frame_buffer_positions</a>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">    Sometimes we read one row too many, so that the saved position will</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">    be too far out because we subsequently need to read an earlier (previous)</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">    row of the same kind (reason). For such cases, we first save the</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">    current position, read, and if we see we read too far, restore the old</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">    position. See #save_pos and #restore_pos.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="classWindow.html#a22890eaf1766c609c6798a304066d87b">  308</a></span>&#160;  <a class="code" href="structWindow_1_1Frame__buffer__position.html">Frame_buffer_position</a> <a class="code" href="classWindow.html#a22890eaf1766c609c6798a304066d87b">m_tmp_pos</a>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">    See #m_tmp_pos</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="classWindow.html#a95b0aea4fd06cb60b0d4799c160f833f">  313</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a95b0aea4fd06cb60b0d4799c160f833f">save_pos</a>(<a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7f">Window_retrieve_cached_row_reason</a> reason) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">int</span> reason_index = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(reason);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    m_tmp_pos.<a class="code" href="structWindow_1_1Frame__buffer__position.html#a3eb8d6a03c0e892ffa82e3024e6f0340">m_rowno</a> = m_frame_buffer_positions[reason_index].m_rowno;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    std::memcpy(m_tmp_pos.<a class="code" href="structWindow_1_1Frame__buffer__position.html#a729928b5d818e6d257324322d756a6d7">m_position</a>,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                m_frame_buffer_positions[reason_index].m_position,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                frame_buffer()-&gt;<a class="code" href="namespacefile.html">file</a>-&gt;ref_length);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">    See #m_tmp_pos</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classWindow.html#ae3e270a2d26c26ce8ff55e2ceb163e08">  324</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#ae3e270a2d26c26ce8ff55e2ceb163e08">restore_pos</a>(<a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7f">Window_retrieve_cached_row_reason</a> reason) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordtype">int</span> reason_index = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(reason);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    m_frame_buffer_positions[reason_index].m_rowno = m_tmp_pos.<a class="code" href="structWindow_1_1Frame__buffer__position.html#a3eb8d6a03c0e892ffa82e3024e6f0340">m_rowno</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    std::memcpy(m_frame_buffer_positions[reason_index].m_position,</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                m_tmp_pos.<a class="code" href="structWindow_1_1Frame__buffer__position.html#a729928b5d818e6d257324322d756a6d7">m_position</a>, frame_buffer()-&gt;<a class="code" href="namespacefile.html">file</a>-&gt;ref_length);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">    Copy frame buffer position hint from one to another.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="classWindow.html#a2a05cd78c25c41cd82e91da74aca63f7">  334</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a2a05cd78c25c41cd82e91da74aca63f7">copy_pos</a>(<a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7f">Window_retrieve_cached_row_reason</a> from_reason,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <a class="code" href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7f">Window_retrieve_cached_row_reason</a> to_reason) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">int</span> from_index = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(from_reason);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordtype">int</span> to_index = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(to_reason);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    m_frame_buffer_positions[to_index].m_rowno =</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        m_frame_buffer_positions[from_index].m_rowno;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    std::memcpy(m_frame_buffer_positions[to_index].m_position,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                m_frame_buffer_positions[from_index].m_position,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                frame_buffer()-&gt;<a class="code" href="namespacefile.html">file</a>-&gt;ref_length);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">     Keys for m_frame_buffer_cache and m_special_rows_cache, for special</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">     rows.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="classWindow.html#acd4370dc1039029dd04e36ad5912a795">  350</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classWindow.html#acd4370dc1039029dd04e36ad5912a795">Special_keys</a> {<span class="comment"></span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">      We read an incoming row. We notice it is the start of a new</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">      partition. We must thus process the just-finished partition, but that</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">      processing uses this row&#39;s buffer; so, we save this row first, process</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">     the partition, and restore it later.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="classWindow.html#acd4370dc1039029dd04e36ad5912a795ab4a020d8f4b16e8cfec253f05373e1e2">  357</a></span>&#160;    FBC_FIRST_IN_NEXT_PARTITION = -1,<span class="comment"></span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">    /// The last row cached in the frame buffer; needed to resurrect input row</span></div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="classWindow.html#acd4370dc1039029dd04e36ad5912a795a4618c13adf2be869f1b456ef57fbcd3f">  359</a></span>&#160;<span class="comment"></span>    FBC_LAST_BUFFERED_ROW = -2,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// Insert new values here.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// And keep the ones below up to date.</span></div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="classWindow.html#acd4370dc1039029dd04e36ad5912a795aa62e2f406702d0ee4951a3442695139f">  362</a></span>&#160;    FBC_FIRST_KEY = FBC_FIRST_IN_NEXT_PARTITION,</div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="classWindow.html#acd4370dc1039029dd04e36ad5912a795a3b575399866c3e5e3b0caaefcb025b80">  363</a></span>&#160;    FBC_LAST_KEY = FBC_LAST_BUFFERED_ROW,</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  };</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; <span class="keyword">protected</span>:<span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">    Execution state: used iff m_needs_frame_buffering. Holds the temporary</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">    file (used for the frame buffering) parameters</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classWindow.html#a3ca64477e64b5415037c60fa1ba2e0f3">  371</a></span>&#160;  <a class="code" href="classTemp__table__param.html">Temp_table_param</a> *<a class="code" href="classWindow.html#a3ca64477e64b5415037c60fa1ba2e0f3">m_frame_buffer_param</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">    Execution state: Holds the temporary output table (for next step) parameters</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="classWindow.html#a1fd1b950667807719717cdc6ad9195a7">  376</a></span>&#160;  <a class="code" href="classTemp__table__param.html">Temp_table_param</a> *<a class="code" href="classWindow.html#a1fd1b950667807719717cdc6ad9195a7">m_outtable_param</a>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">    Execution state: used iff m_needs_frame_buffering. Holds the TABLE</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">   object for the the temporary file used for the frame buffering.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="classWindow.html#ab36ff971eea06183a78bc39c0f67e883">  382</a></span>&#160;  <a class="code" href="structTABLE.html">TABLE</a> *<a class="code" href="classWindow.html#ab36ff971eea06183a78bc39c0f67e883">m_frame_buffer</a>;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">    Execution state: The frame buffer tmp file is not truncated for each new</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">    partition.  We need to keep track of where a partition starts in case we</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">    need to switch from heap to innodb tmp file on overflow, in order to</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">    re-initialize m_frame_buffer_positions with the current partition&#39;s row 1</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">    (which is the minimum hint required) as we cross over.  This number is</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">    incremented for each write.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classWindow.html#a5830feb57732ae91f99b41fd23879c27">  392</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a5830feb57732ae91f99b41fd23879c27">m_frame_buffer_total_rows</a>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">    Execution state: Snapshot of m_frame_buffer_total_rows when we start a new</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">    partition, i.e. for the first row in the first partition we will have a</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">    value of 1.</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="classWindow.html#a2b1cb972563a9134fef4be429c2836e1">  399</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a2b1cb972563a9134fef4be429c2836e1">m_frame_buffer_partition_offset</a>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">     If &gt;=1: the row with this number (1-based, relative to start of</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">     partition) currently has its fields in the record buffer of the IN table</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">     and of the OUT table. 0 means &quot;unset&quot;.</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">     Usable only with buffering. Set and read by bring_back_frame_row(), so</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">     that multiple successive calls to it for same row do only one read from</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">     FB (optimization).</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="classWindow.html#a28e7a3070aabf03f05ee216d7fd3f886">  409</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a28e7a3070aabf03f05ee216d7fd3f886">m_row_has_fields_in_out_table</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">    Holds a fixed number of copies of special rows; each copy can use up to</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">    #m_special_rows_cache_max_length bytes.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">    cf. the Special_keys enumeration.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="classWindow.html#a75a8e25446490ffa084534e03596d9a0">  416</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="code" href="classWindow.html#a75a8e25446490ffa084534e03596d9a0">m_special_rows_cache</a>;<span class="comment"></span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">  /// Length of each copy in #m_special_rows_cache, in bytes</span></div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="classWindow.html#a49025f4eb90aeeb36a2e873ffd4a0597">  418</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">size_t</span> m_special_rows_cache_length[FBC_FIRST_KEY - FBC_LAST_KEY + 1];<span class="comment"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">  /// Maximum allocated size in #m_special_rows_cache</span></div><div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="classWindow.html#aaf2f33599ecc0b594d97a6053a8133cc">  420</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">size_t</span> <a class="code" href="classWindow.html#aaf2f33599ecc0b594d97a6053a8133cc">m_special_rows_cache_max_length</a>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">    Execution state: used iff m_needs_frame_buffering. Holds the row</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">    number (in the partition) of the last row (hitherto) saved in the frame</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">    buffer</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="classWindow.html#acb81870ca3607b1038dc2dc843e87e2b">  427</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#acb81870ca3607b1038dc2dc843e87e2b">m_last_rowno_in_cache</a>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">    Execution state: used iff m_needs_peerset. Holds the rowno</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">    for the last row in this peer set.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="classWindow.html#ab8129cbc0ab6ad7fcec814dd09f7555a">  433</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#ab8129cbc0ab6ad7fcec814dd09f7555a">m_last_rowno_in_peerset</a>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">    Execution state: used iff m_needs_last_peer_in_frame. True if a row</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">    leaving the frame is the last row in the peer set withing the frame.</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classWindow.html#a4461190125463218b323ec001845f169">  439</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a4461190125463218b323ec001845f169">m_is_last_row_in_peerset_within_frame</a>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">    Execution state: the current row number in the current partition.</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">    Set in check_partition_boundary. Used while reading input rows, in contrast</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">    to m_rowno_in_partition, which is used when processing buffered rows.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">    Cf. check_partition_boundary.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="classWindow.html#a4952f1c8b0e3325d30d564f89162e629">  447</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a4952f1c8b0e3325d30d564f89162e629">m_part_row_number</a>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">    Execution state: the current row starts a new partition.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">    Set in check_partition_boundary.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="classWindow.html#ab6eff4d39a973df2aed891ca8cd23880">  453</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ab6eff4d39a973df2aed891ca8cd23880">m_partition_border</a>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">    Execution state: The number, in the current partition, of the last output</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">    row, i.e. the row number of the last row hitherto evaluated and output to</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">    the next phase.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="classWindow.html#ad2f40dea3086ce2e97bacb03d4317877">  460</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#ad2f40dea3086ce2e97bacb03d4317877">m_last_row_output</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">    Execution state: The number of the row being visited for its contribution</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">    to a window function, relative to the start of the partition. Note that</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">    this will often be different from the current row for which we are</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">    processing the window function, reading it for output. That is given by</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">    m_rowno_in_partition, q.v.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="classWindow.html#a794fb95b5dbce1596be075d8898d58be">  469</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a794fb95b5dbce1596be075d8898d58be">m_rowno_being_visited</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">    Execution state: the row number of the current row within a frame, cf.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">    m_is_last_row_in_frame, relative to start of the frame. 1-based.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="classWindow.html#a8a0fc7fc0abfbad9c8aaa1492240c54b">  475</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a8a0fc7fc0abfbad9c8aaa1492240c54b">m_rowno_in_frame</a>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">    Execution state: The row number of the current row being readied for</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">    output within the partition. 1-based.</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="classWindow.html#a100dcb0cd123248943b0877b1958e9d3">  481</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a100dcb0cd123248943b0877b1958e9d3">m_rowno_in_partition</a>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">   Execution state: for optimizable aggregates, cf. m_row_optimizable and</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">   m_range_optimizable, we need to keep track of when we have computed the</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">   first aggregate, since aggregates for rows 2..N are computed in an optimized</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">   way by inverse aggregation of the row moving out of the frame.</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="classWindow.html#a8b039f74e30aaecabeb02800198edcaa">  489</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a8b039f74e30aaecabeb02800198edcaa">m_aggregates_primed</a>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="comment">/*------------------------------------------------------------------------</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">   * RANGE boundary frame state variables.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">   *------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">    RANGE bound determination computation; first index is a value of the</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">    enum_window_border_type enum; second index 0 for the start bound, 1 for</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">    the end bound. Each item is Item_func_lt/gt.</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="classWindow.html#a0a6335e70f5e0fc0b35c1672484afaea">  502</a></span>&#160;  <a class="code" href="classItem__func.html">Item_func</a> *m_comparators[<a class="code" href="window__lex_8h.html#aacf6e2c5ab15b74f44e72c7221c71f8baa60594f2a674a4c740f0839f2f3efe27">WBT_VALUE_FOLLOWING</a> + 1][2];<span class="comment"></span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">    Each item has inverse operation of the corresponding</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">    comparator in m_comparators. Determines if comparison</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">    should continue with next field in order by list.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="classWindow.html#a1e84191eed4b7e87c6ec53b1305be2b5">  508</a></span>&#160;  <a class="code" href="classItem__func.html">Item_func</a> *m_inverse_comparators[<a class="code" href="window__lex_8h.html#aacf6e2c5ab15b74f44e72c7221c71f8baa60594f2a674a4c740f0839f2f3efe27">WBT_VALUE_FOLLOWING</a> + 1][2];</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; <span class="keyword">protected</span>:<span class="comment"></span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">    Execution state: the row number of the first row in a frame when evaluating</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">    RANGE based frame bounds. When using RANGE bounds, we don&#39;t know a priori</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">    when moving the frame which row number will be the next lower bound, but</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">    we know it will have to be a row number higher than the lower bound of</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">    the previous frame, since the bounds increase monotonically as long</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">    as the frame bounds are static within the query (current limitation).</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">    So, it makes sense to remember the first row number in a frame until</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">    we have determined the start of the next frame.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">    If the frame for the previous current row in the partition was empty (cf.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">    &quot;current_row&quot; in process_buffered_windowing_record), this should point</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">    to the next possible frame start. Relative to partition start, 1-based.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="classWindow.html#a1e13895b07ee0d799f470b44992a4f14">  525</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a1e13895b07ee0d799f470b44992a4f14">m_first_rowno_in_range_frame</a>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">    Execution state: used for RANGE bounds frame evaluation</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">    for the continued evaluation for current row &gt; 2 in a partition.</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">    If the frame for the current row visited (cf &quot;current_row&quot; in</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">    process_buffered_windowing_record) was empty, the invariant</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">         m_last_rowno_in_range_frame &lt; m_first_rowno_in_range_frame</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">    should hold after the visit. Relative to partition start. 1-based.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="classWindow.html#ad2d7b5922eb43a3b83d9fa8ca8712d58">  537</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#ad2d7b5922eb43a3b83d9fa8ca8712d58">m_last_rowno_in_range_frame</a>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">/*------------------------------------------------------------------------</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">   * Window function special behaviour toggles. These boolean flag influence</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">   * the action taken when a window function is evaluated, i.e.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">   *     Item_xxx::val_xxx</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">   * They are set locally just before and after a call to evaluate functions,</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">   * i.e.</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">   *     w.set_&lt;toggle&gt;(true)</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">   *     copy_&lt;kind&gt;_window_functions()  [see process_buffered_windowing_record]</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">   *     w.set_&lt;toggle&gt;(false)</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">   * to achive a special semantic, since we cannot pass down extra parameters.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">   *------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">    Execution state: the current row is the last row in a window frame</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">    For some aggregate functions, e.g AVG, we can save computation by not</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">    evaluating the entire function value before the last row has been read.</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">    For AVG, do the summation for each row in the frame, but the division only</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">    for the last row, at which time the result is needed for the wf.</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">    Probably only useful for ROW based or static frames.</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">    For frame with peer set computation, determining the last row in the</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">    peer set ahead of processing is not possible, so we use a pessimistic</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">    assumption.</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="classWindow.html#a02aacede481bcb89a62e6c118d1dca1a">  568</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a02aacede481bcb89a62e6c118d1dca1a">m_is_last_row_in_frame</a>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">    Execution state: make frame wf produce a NULL (or 0 depending, e.g. if</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">    COUNT) value because no rows are available for aggregation: e.g. for first</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">    row in partition if frame is ROWS BETWEEN 2 PRECEDING and 1 PRECEDING has</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">    no rows for which aggregation can happen</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="classWindow.html#a5bb44dc670100b86590b3fdd3f8bc07e">  576</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a5bb44dc670100b86590b3fdd3f8bc07e">m_do_copy_null</a>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">    Execution state: do inverse, e.g. subtract rather than add in aggregates.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">    Used for optimizing computation of sliding frames for eligible aggregates,</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">    cf. Item_sum::check_wf_semantics.</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00583"></a><span class="lineno"><a class="line" href="classWindow.html#a5cfb1fcff13e5b844c1ea5ba39a5d6d0">  583</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a5cfb1fcff13e5b844c1ea5ba39a5d6d0">m_inverse_aggregation</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">/*------------------------------------------------------------------------</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">   * Constructors</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">   *------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">    Generic window constructor, shared</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="classWindow.html#ada9b08a9f8e4f79d05abfc64b79a395e">  594</a></span>&#160;  <a class="code" href="classWindow.html#ada9b08a9f8e4f79d05abfc64b79a395e">Window</a>(<a class="code" href="classItem__string.html">Item_string</a> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>, <a class="code" href="classPT__order__list.html">PT_order_list</a> *part, <a class="code" href="classPT__order__list.html">PT_order_list</a> *ord,</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <a class="code" href="classPT__frame.html">PT_frame</a> *frame, <span class="keywordtype">bool</span> is_reference, <a class="code" href="classItem__string.html">Item_string</a> *inherit)</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      : m_select(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        m_partition_by(part),</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        m_order_by(ord),</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        m_sorting_order(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        m_frame(frame),</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        m_name(name),</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        m_def_pos(0),</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        m_inherit_from(inherit),</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        m_is_reference(is_reference),</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        m_needs_frame_buffering(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        m_needs_peerset(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        m_needs_last_peer_in_frame(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        m_needs_card(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        m_row_optimizable(<a class="code" href="config__static_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>),</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        m_range_optimizable(<a class="code" href="config__static_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>),</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        m_static_aggregates(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        m_opt_first_row(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        m_opt_last_row(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        m_needs_restore_input_row(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        m_last(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        m_ancestor(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        m_tmp_pos(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>, -1),</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        m_frame_buffer_param(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        m_outtable_param(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        m_frame_buffer(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>),</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        m_frame_buffer_total_rows(0),</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        m_frame_buffer_partition_offset(0),</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        m_row_has_fields_in_out_table(0),</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        m_special_rows_cache_max_length(0),</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        m_last_rowno_in_cache(0),</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        m_last_rowno_in_peerset(0),</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        m_is_last_row_in_peerset_within_frame(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        m_part_row_number(0),</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        m_partition_border(<a class="code" href="config__static_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>),</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        m_last_row_output(0),</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        m_rowno_being_visited(0),</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        m_rowno_in_frame(0),</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        m_rowno_in_partition(0),</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        m_aggregates_primed(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        m_first_rowno_in_range_frame(1),</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        m_last_rowno_in_range_frame(0),</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        m_is_last_row_in_frame(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        m_do_copy_null(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        m_inverse_aggregation(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    m_opt_nth_row.<a class="code" href="structWindow_1_1st__nth.html#aa98d95113198cbb3cac0825f32cac351">m_offsets</a>.init_empty_const();</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    m_opt_lead_lag.<a class="code" href="structWindow_1_1st__lead__lag.html#af873e86d630b947a864a04050173baf6">m_offsets</a>.init_empty_const();</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    m_frame_buffer_positions.<a class="code" href="classMem__root__array__YY.html#ae9d77f670da27615efa7b4baefd0e20e">init_empty_const</a>();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">    Reference to a named window. This kind is only used before resolution,</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">    references to it being replaced by the referenced window object thereafter.</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="classWindow.html#a52f671af8e7c5531b73672865c39b4f5">  650</a></span>&#160;  <a class="code" href="classWindow.html#a52f671af8e7c5531b73672865c39b4f5">Window</a>(<a class="code" href="classItem__string.html">Item_string</a> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>)</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      : <a class="code" href="classWindow.html">Window</a>(name, <a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>, <a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>, <a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>, <a class="code" href="config__static_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>, <a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>) {}</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">    Unnamed window. If the window turns out to be named, the name will be set</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">    later, cf. #set_name().</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00657"></a><span class="lineno"><a class="line" href="classWindow.html#a64ea5b709b9cdcf4716fe50d1d89de04">  657</a></span>&#160;  <a class="code" href="classWindow.html#a64ea5b709b9cdcf4716fe50d1d89de04">Window</a>(<a class="code" href="classPT__order__list.html">PT_order_list</a> *partition_by, <a class="code" href="classPT__order__list.html">PT_order_list</a> *order_by, <a class="code" href="classPT__frame.html">PT_frame</a> *frame)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      : <a class="code" href="classWindow.html">Window</a>(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>, partition_by, order_by, frame, <a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>) {}</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">    Unnamed window based on a named window. If the window turns out to be</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">    named, the name will be set later, cf. #set_name().</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="classWindow.html#a8c7c66af3fe356c0900189b0c1567dfe">  664</a></span>&#160;  <a class="code" href="classWindow.html#a8c7c66af3fe356c0900189b0c1567dfe">Window</a>(<a class="code" href="classPT__order__list.html">PT_order_list</a> *partition_by, <a class="code" href="classPT__order__list.html">PT_order_list</a> *order_by, <a class="code" href="classPT__frame.html">PT_frame</a> *frame,</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;         <a class="code" href="classItem__string.html">Item_string</a> *inherit)</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      : <a class="code" href="classWindow.html">Window</a>(<a class="code" href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a>, partition_by, order_by, frame, <a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, inherit) {}</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">/*------------------------------------------------------------------------</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">   * Methods</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">   *------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">    We have a named window. Now set its name. Used once, if at all, for a</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">    window as part of parsing.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="classWindow.html#a712c4eb7d7170bffaeb5a8d3ebc19274">  678</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a712c4eb7d7170bffaeb5a8d3ebc19274">set_name</a>(<a class="code" href="classItem__string.html">Item_string</a> *<a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>) { m_name = <a class="code" href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a>; }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">    After resolving an existing window name reference in a window definition,</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment">    we set the ancestor pointer to easy access later.</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="classWindow.html#a8ef7fcb16a29b9f7437f80d34ef728f4">  684</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a8ef7fcb16a29b9f7437f80d34ef728f4">set_ancestor</a>(<a class="code" href="classWindow.html">Window</a> *a) { m_ancestor = a; }</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">    Get the name of a window. Can be empty, cf. #printable_name which is not.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="classWindow.html#a1f41db4ef8446e3e3a85134d5658fe7d">  689</a></span>&#160;  <a class="code" href="classItem__string.html">Item_string</a> *<a class="code" href="classWindow.html#a1f41db4ef8446e3e3a85134d5658fe7d">name</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_name; }</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="classWindow.html#ada67710bbdbe70e79d1a5e358a650352">  691</a></span>&#160;  <a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classWindow.html#ada67710bbdbe70e79d1a5e358a650352">def_pos</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_def_pos; }       <span class="comment">///&lt; @see #m_def_pos</span></div><div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="classWindow.html#a183ec945821c6b62836322c0832049cb">  692</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a183ec945821c6b62836322c0832049cb">set_def_pos</a>(<a class="code" href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>) { m_def_pos = <a class="code" href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a>; }  <span class="comment">///&lt; @see #m_def_pos</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"></span><span class="comment"></span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">    Get the frame, if any. SQL 2011 7.11 GR 1.b.i.6</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="classWindow.html#ad5cc04aa3c3ecddbf9683da7851c6b22">  697</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classPT__frame.html">PT_frame</a> *<a class="code" href="classWindow.html#ad5cc04aa3c3ecddbf9683da7851c6b22">frame</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_frame; }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">    Get the ORDER BY, if any. That is, the first we find along</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">    the ancestor chain. Uniqueness checked in #setup_windows1</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">    SQL 2011 7.11 GR 1.b.i.5.A-C</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="classWindow.html#aaa7c710a8b30918145c2d8852c59e38d">  704</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classPT__order__list.html">PT_order_list</a> *<a class="code" href="classWindow.html#aaa7c710a8b30918145c2d8852c59e38d">effective_order_by</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keyword">const</span> <a class="code" href="classPT__order__list.html">PT_order_list</a> *o = m_order_by;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keyword">const</span> <a class="code" href="classWindow.html">Window</a> *w = m_ancestor;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">while</span> (o == <span class="keyword">nullptr</span> &amp;&amp; w != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      o = w-&gt;<a class="code" href="classWindow.html#a495a78db188bf6ba6e5aa43499bcd0e6">m_order_by</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      w = w-&gt;<a class="code" href="classWindow.html#a38996f07642a040a1b70d791d6bca516">m_ancestor</a>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">return</span> o;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">    Get the first argument of the ORDER BY clause for this window</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">    if any. &quot;ORDER BY&quot; is not checked in ancestor unlike</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">    effective_order_by().</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">    Use when the goal is to operate on the set of item clauses for</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">    all windows of a query. When interrogating the effective order</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">    by for a window (specified for it or inherited from another</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">    window) use effective_order_by().</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="structORDER.html">ORDER</a> *first_order_by() <span class="keyword">const</span>;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">    Get partition, if any. That is, the partition if any, of the</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment">    root window. SQL 2011 7.11 GR 1.b.i.4.A-C</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="classWindow.html#a01ab8ce122fbc31b8227b65398e6022b">  730</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classPT__order__list.html">PT_order_list</a> *<a class="code" href="classWindow.html#a01ab8ce122fbc31b8227b65398e6022b">effective_partition_by</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keyword">const</span> <a class="code" href="classPT__order__list.html">PT_order_list</a> *<a class="code" href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a> = m_partition_by;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keyword">const</span> <a class="code" href="classWindow.html">Window</a> *w = m_ancestor;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">while</span> (w != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> (w-&gt;<a class="code" href="classWindow.html#a38996f07642a040a1b70d791d6bca516">m_ancestor</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="comment">/* root  */</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        p = w-&gt;<a class="code" href="classWindow.html#afca36dae2db6f95e3529d27081c930d2">m_partition_by</a>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="comment">/* See #setup_windows for checking */</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <a class="code" href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a>(w-&gt;<a class="code" href="classWindow.html#afca36dae2db6f95e3529d27081c930d2">m_partition_by</a> == <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      }</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      w = w-&gt;<a class="code" href="classWindow.html#a38996f07642a040a1b70d791d6bca516">m_ancestor</a>;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }<span class="comment"></span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">    Get the first argument of the PARTITION clause for this window</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">    if any. &quot;PARTITION BY&quot; is not checked in ancestor unlike</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">    effective_partition_by().</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">    Use when the goal is to operate on the set of item clauses for</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">    all windows of a query. When interrogating the effective</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">    partition by for a window (specified for it or inherited from</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">    another window) use effective_partition_by().</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <a class="code" href="structORDER.html">ORDER</a> *first_partition_by() <span class="keyword">const</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">    Get the list of functions invoked on this window.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="classWindow.html#a57e1fc73a241169d5e2d609f760b333b">  759</a></span>&#160;  <a class="code" href="classList.html">List&lt;Item_sum&gt;</a> &amp;<a class="code" href="classWindow.html#a57e1fc73a241169d5e2d609f760b333b">functions</a>() { <span class="keywordflow">return</span> m_functions; }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">    Concatenation of columns in PARTITION BY and ORDER BY.</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">    Columns present in both list (redundancies) are eliminated, while</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">    making sure the order of columns in the ORDER BY is maintained</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">    in the merged list.</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">    @param thd                Optional. Session state. If not nullptr,</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">                              initialize the cache.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">    @param implicit_grouping  Optional. If true, we won&#39;t sort (single row</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">                              result set). Presence implies thd != nullptr for</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">                              the first call when we lazily set up this</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">                              information.  Succeeding calls return the cached</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">                              value.</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">    @returns The start of the concatenated ordering expressions, or nullptr</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="structORDER.html">ORDER</a> *sorting_order(<a class="code" href="classTHD.html">THD</a> *thd = <span class="keyword">nullptr</span>, <span class="keywordtype">bool</span> implicit_grouping = <span class="keyword">false</span>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">    Check that the semantic requirements for window functions over this</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">    window are fulfilled, and accumulate evaluation requirements.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">    This is run at resolution.</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordtype">bool</span> check_window_functions1(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classSELECT__LEX.html">SELECT_LEX</a> *select);<span class="comment"></span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">    Like check_window_functions1() but contains checks which must wait until</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">    the start of the execution phase.</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordtype">bool</span> check_window_functions2(<a class="code" href="classTHD.html">THD</a> *thd);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">    For RANGE frames we need to do computations involving add/subtract and</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">    less than, smaller than. To make this work across types, we construct</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">    item trees to do the computations, so we can reuse all the special case</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">    handling, e.g. for signed/unsigned int wrap-around, overflow etc.</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordtype">bool</span> setup_range_expressions(<a class="code" href="classTHD.html">THD</a> *thd);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">    Return if this window represents an unresolved window reference seen</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">    in a window function OVER clause.</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00804"></a><span class="lineno"><a class="line" href="classWindow.html#ab552c6855bb972ba76b316f2a990e41a">  804</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ab552c6855bb972ba76b316f2a990e41a">is_reference</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_is_reference; }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">    Check if the just read input row marks the start of a new partition.</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">    Sets the member variables:</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">    m_partition_border and m_part_row_number</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordtype">void</span> check_partition_boundary();</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">    Reset the current row&#39;s ORDER BY expressions when starting a new</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">    peer set.</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordtype">void</span> reset_order_by_peer_set();</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">    Determine if the current row is not in the same peer set as the previous</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">    row. Used for RANGE frame and implicit RANGE frame (the latter is used by</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">    aggregates in the presence of ORDER BY).</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment">    The current row is in the same peer set if all ORDER BY columns</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">    have the same value as in the previous row.</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">    For JSON_OBJECTAGG only the first order by column needs to be</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">    compared to check if a row is in peer set.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">    @param compare_all_order_by_items If true, compare all the order by items</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">                                      to determine if a row is in peer set.</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">                                      Else, compare only the first order by</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">                                      item to determine peer set.</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">    @return true if current row is in a new peer set</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordtype">bool</span> in_new_order_by_peer_set(<span class="keywordtype">bool</span> compare_all_order_by_items = <span class="keyword">true</span>);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment">    While processing buffered rows in RANGE frame mode we, determine</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">    if the present row revisited from the buffer is before the row</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">    being processed; i.e. the current row.</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">    @return true if the present row is before the RANGE, i.e. not to</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">    be included</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="classWindow.html#a94c51faca303360d8dac082df8d068e2">  849</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a94c51faca303360d8dac082df8d068e2">before_frame</a>() { <span class="keywordflow">return</span> before_or_after_frame(<span class="keyword">true</span>); }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">  ///&lt; See before_frame()</span></div><div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="classWindow.html#a27426a6440302a91461ab00cef8a5899">  852</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a27426a6440302a91461ab00cef8a5899">after_frame</a>() { <span class="keywordflow">return</span> before_or_after_frame(<span class="keyword">false</span>); }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">    Check if we have read all the rows in a partition, possibly</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">    having buffered them for further processing</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">    @returns true if this is the case</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="classWindow.html#a824e6fd952f270a08725286ed9ccec01">  860</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a824e6fd952f270a08725286ed9ccec01">at_partition_border</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_partition_border; }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordtype">void</span> save_special_record(<a class="code" href="my__inttypes_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a> special_rowno, <a class="code" href="structTABLE.html">TABLE</a> *t);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordtype">void</span> restore_special_record(<a class="code" href="my__inttypes_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a> special_rowno, <a class="code" href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="code" href="structrecord.html">record</a>);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">    Resolve any named window to its definition</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">    and update m_window to point to the definition instead</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> resolve_reference(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classItem__sum.html">Item_sum</a> *wf, <a class="code" href="classPT__window.html">PT_window</a> **m_window);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">    Semantic checking of windows. Run at resolution.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">    * Process any window inheritance, that is a window, that in its</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">    specification refer to another named window.</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">    Rules:</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">    1) There should be no loops</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">    2) The inheriting window can not specify partitioning</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">    3) The inheriting window can not specify is already specify by</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">       an ancestor.</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">    4) An ancestor can not specify window framing clause.</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">    Cf. SQL 2011 7.11 window clause SR 10-11.</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">    * Check requirements to the window from its using window functions and</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">    make a note of those so we know at execution time, for example if we need</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">    to buffer rows to process the window functions, whether inversion</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">    optimzation will be used for moving frames etc.</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">    * Prepare the physical ordering lists used by sorting at execution time.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">    * Set up cached items for partition determination and for range/peer</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">    determination based on order by columns.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">    * Check any frame semantics and for RANGE frames, set up bounds computation</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">    item trees.</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">    @param thd              The session&#39;s execution thread</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">    @param select           The select for which we are doing windowing</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment">    @param ref_item_array   The base ref items</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">    @param tables           The list of tables involved</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">    @param fields           The list of all fields, including hidden ones</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">    @param windows          The list of windows defined for this select</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">    @return false if success, true if error</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> setup_windows1(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classSELECT__LEX.html">SELECT_LEX</a> *select,</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                             <a class="code" href="classBounds__checked__array.html">Ref_item_array</a> ref_item_array, <a class="code" href="structTABLE__LIST.html">TABLE_LIST</a> *tables,</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                             <a class="code" href="classmem__root__deque.html">mem_root_deque&lt;Item *&gt;</a> *fields,</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                             <a class="code" href="classList.html">List&lt;Window&gt;</a> &amp;windows);<span class="comment"></span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">    Like setup_windows1() but contains operations which must wait until</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">    the start of the execution phase.</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">    @param thd              The session&#39;s execution thread</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">    @param select           The select for which we are doing windowing</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">    @param windows          The list of windows defined for this select</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">    @return false if success, true if error</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> setup_windows2(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classSELECT__LEX.html">SELECT_LEX</a> *select,</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                             <a class="code" href="classList.html">List&lt;Window&gt;</a> &amp;windows);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">    Remove unused window definitions. Do this only after syntactic and</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">    semantic checking for errors has been performed.</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">    @param thd             The session&#39;s execution thread</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">    @param windows         The list of windows defined for this select</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> remove_unused_windows(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classList.html">List&lt;Window&gt;</a> &amp;windows);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">    Resolve and set up the PARTITION BY or an ORDER BY list of a window.</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">    @param thd              The session&#39;s execution thread</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">    @param ref_item_array   The base ref items</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">    @param tables           The list of tables involved</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">    @param fields           The list of all fields, including hidden ones</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">    @param o                A list of order by expressions</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">    @param partition_order  If true, o represent a windowing PARTITION BY,</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">           else it represents a windowing ORDER BY</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">    @returns false if success, true if error</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keywordtype">bool</span> resolve_window_ordering(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classBounds__checked__array.html">Ref_item_array</a> ref_item_array,</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                               <a class="code" href="structTABLE__LIST.html">TABLE_LIST</a> *tables,</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                               <a class="code" href="classmem__root__deque.html">mem_root_deque&lt;Item *&gt;</a> *fields, <a class="code" href="structORDER.html">ORDER</a> *o,</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                               <span class="keywordtype">bool</span> partition_order);<span class="comment"></span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">    Return true if this window&#39;s name is not unique in windows</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keywordtype">bool</span> check_unique_name(<a class="code" href="classList.html">List&lt;Window&gt;</a> &amp;windows);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">    Set up cached items for an partition or an order by list</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">    updating m_partition_items or m_order_by_items respectively.</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">    @param thd              The session&#39;s execution thread</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">    @param select           The select for which we are doing windowing</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">    @param o                The list of ordering expressions</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">    @param partition_order  If true, o represents a partition order list,</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">                            else an ORDER BY list.</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">    @returns false if success, true if error</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="keywordtype">bool</span> setup_ordering_cached_items(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classSELECT__LEX.html">SELECT_LEX</a> *select,</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classPT__order__list.html">PT_order_list</a> *o,</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                   <span class="keywordtype">bool</span> partition_order);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">    Determine if the window had either a partition clause (inclusive) or a</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">    ORDER BY clause, either defined by itself or inherited from another window.</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">    @return true if we have such a clause, which means we need to sort the</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">            input table before evaluating the window functions, unless it has</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">            been made redundant by a previous windowing step, cf.</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">            reorder_and_eliminate_sorts, or due to a single row result set,</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">            cf. SELECT_LEX::is_implicitly_grouped().</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00981"></a><span class="lineno"><a class="line" href="classWindow.html#a91f7ea6b5cd627fb8ed3f42e35e85659">  981</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a91f7ea6b5cd627fb8ed3f42e35e85659">needs_sorting</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_sorting_order != <span class="keyword">nullptr</span>; }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">    If we cannot compute one of window functions without looking at succeeding</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment">    rows, return true, else false.</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00987"></a><span class="lineno"><a class="line" href="classWindow.html#a575e7bc09584f7c853e4940e170e228b">  987</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a575e7bc09584f7c853e4940e170e228b">needs_buffering</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_needs_frame_buffering; }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">    If we cannot compute one of window functions without looking at all</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">    rows in the peerset of the current row, return true, else</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">    false. E.g. CUME_DIST.</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="classWindow.html#acda722c65501ed833321f9cd7d16a41e">  994</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#acda722c65501ed833321f9cd7d16a41e">needs_peerset</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_needs_peerset; }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">    If we cannot compute one of window functions without looking at all</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">    rows in the peerset of the current row in this frame, return true, else</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">    false. E.g. JSON_OBJECTAGG.</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01001"></a><span class="lineno"><a class="line" href="classWindow.html#a068cd0671aae0f28f0c8e68536fea2eb"> 1001</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a068cd0671aae0f28f0c8e68536fea2eb">needs_last_peer_in_frame</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_needs_last_peer_in_frame; }<span class="comment"></span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">    If we need to read the entire partition before we can evaluate</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">    some window function(s) on this window,</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">    @returns true if that is the case, else false</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01007"></a><span class="lineno"><a class="line" href="classWindow.html#ababaeb649cb3b579e216bb8e18145b91"> 1007</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ababaeb649cb3b579e216bb8e18145b91">needs_card</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_needs_card; }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">    Return true if the set of window functions are all ROW unit optimizable.</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">    Only relevant if m_needs_buffering and m_row_optimizable are true.</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="classWindow.html#ac5e70f4dfb65c24741c6c886f32110ab"> 1013</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ac5e70f4dfb65c24741c6c886f32110ab">optimizable_row_aggregates</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_row_optimizable; }</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">    Return true if the set of window functions are all RANGE unit optimizable.</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">    Only relevant if m_needs_buffering and m_range_optimizable are true.</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="classWindow.html#ade0d0f6baea34cd23bc9e89a6456ae1a"> 1019</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ade0d0f6baea34cd23bc9e89a6456ae1a">optimizable_range_aggregates</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_range_optimizable; }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">    Return true if the aggregates are static, i.e. the same aggregate values for</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">    all rows in partition. Only relevant if m_needs_buffering is true.</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="classWindow.html#a235f5d841e5191626d716038a6d2713b"> 1025</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a235f5d841e5191626d716038a6d2713b">static_aggregates</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_static_aggregates; }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">    See #m_opt_first_row</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01030"></a><span class="lineno"><a class="line" href="classWindow.html#a6ebc242f5aa9a2ed75b7c3df47e922f7"> 1030</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a6ebc242f5aa9a2ed75b7c3df47e922f7">opt_first_row</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_opt_first_row; }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">    See #m_opt_last_row</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01035"></a><span class="lineno"><a class="line" href="classWindow.html#a0d6bfa76488853925dc6790c8df0532f"> 1035</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a0d6bfa76488853925dc6790c8df0532f">opt_last_row</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_opt_last_row; }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">    See #m_last</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01040"></a><span class="lineno"><a class="line" href="classWindow.html#ac9b1846e6e0a24207674c5eedfd34561"> 1040</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ac9b1846e6e0a24207674c5eedfd34561">is_last</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_last; }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">    See #m_needs_restore_input_row</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01045"></a><span class="lineno"><a class="line" href="classWindow.html#a6611c566d596c0aaffd9f01fdfae38c6"> 1045</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a6611c566d596c0aaffd9f01fdfae38c6">set_needs_restore_input_row</a>(<span class="keywordtype">bool</span> b) { m_needs_restore_input_row = b; }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">    See #m_needs_restore_input_row</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="classWindow.html#af4f046772a208b624fc57a77f08ecf5b"> 1050</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#af4f046772a208b624fc57a77f08ecf5b">needs_restore_input_row</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_needs_restore_input_row; }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">    See #m_opt_nth_row</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01055"></a><span class="lineno"><a class="line" href="classWindow.html#aa89929fd75370740ec6403630420b7f7"> 1055</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structWindow_1_1st__nth.html">st_nth</a> &amp;<a class="code" href="classWindow.html#aa89929fd75370740ec6403630420b7f7">opt_nth_row</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_opt_nth_row; }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">    See #m_opt_lead_lag</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="classWindow.html#a5b8ed36e63b1d764d6b2c198061bf765"> 1060</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structWindow_1_1st__lead__lag.html">st_lead_lag</a> &amp;<a class="code" href="classWindow.html#a5b8ed36e63b1d764d6b2c198061bf765">opt_lead_lag</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_opt_lead_lag; }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">    Getter for m_frame_buffer_param, q.v.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01065"></a><span class="lineno"><a class="line" href="classWindow.html#ada05c0467175f4809da720968d71b754"> 1065</a></span>&#160;  <a class="code" href="classTemp__table__param.html">Temp_table_param</a> *<a class="code" href="classWindow.html#ada05c0467175f4809da720968d71b754">frame_buffer_param</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_frame_buffer_param; }</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">    Setter for m_frame_buffer_param, q.v.</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01070"></a><span class="lineno"><a class="line" href="classWindow.html#a4b2aa17761fdd6bb0b06a78a46ecfe9e"> 1070</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a4b2aa17761fdd6bb0b06a78a46ecfe9e">set_frame_buffer_param</a>(<a class="code" href="classTemp__table__param.html">Temp_table_param</a> *<a class="code" href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a>) { m_frame_buffer_param = <a class="code" href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a>; }</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">    Getter for m_frame_buffer, q.v.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01075"></a><span class="lineno"><a class="line" href="classWindow.html#a3db276e3aadcb170aef5f5867f0a4093"> 1075</a></span>&#160;  <a class="code" href="structTABLE.html">TABLE</a> *<a class="code" href="classWindow.html#a3db276e3aadcb170aef5f5867f0a4093">frame_buffer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_frame_buffer; }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">    Setter for m_frame_buffer, q.v.</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01080"></a><span class="lineno"><a class="line" href="classWindow.html#a4e4fa7833379ad91e58e022e5be66d79"> 1080</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a4e4fa7833379ad91e58e022e5be66d79">set_frame_buffer</a>(<a class="code" href="structTABLE.html">TABLE</a> *tab) { m_frame_buffer = tab; }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">   Getter for m_outtable_param, q.v.</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="classWindow.html#a687e9949d29ff808d1fb1c2bff2d6579"> 1085</a></span>&#160;  <a class="code" href="classTemp__table__param.html">Temp_table_param</a> *<a class="code" href="classWindow.html#a687e9949d29ff808d1fb1c2bff2d6579">outtable_param</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_outtable_param; }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">   Setter for m_outtable_param, q.v.</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="classWindow.html#a99bd08f876de6bb6ce7ab6c424b7f687"> 1090</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a99bd08f876de6bb6ce7ab6c424b7f687">set_outtable_param</a>(<a class="code" href="classTemp__table__param.html">Temp_table_param</a> *<a class="code" href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a>) { m_outtable_param = <a class="code" href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a>; }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">    Getter for m_part_row_number, q.v., the current row number within the</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">    partition.</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="classWindow.html#aa0b53e1d1beeeb61008d4611b401f33b"> 1096</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#aa0b53e1d1beeeb61008d4611b401f33b">partition_rowno</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_part_row_number; }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">    Allocate the cache for special rows</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">    @param thd      thread handle</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">    @param out_tbl  The table where this window function&#39;s value is written to</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">    @returns true if error.</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordtype">bool</span> make_special_rows_cache(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="structTABLE.html">TABLE</a> *out_tbl);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">    See #m_last_row_output</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01109"></a><span class="lineno"><a class="line" href="classWindow.html#a97df217d2998bfc76d5d1ac0c8067e64"> 1109</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a97df217d2998bfc76d5d1ac0c8067e64">last_row_output</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_last_row_output; }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">    See #m_last_row_output</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01114"></a><span class="lineno"><a class="line" href="classWindow.html#a8f6f6d07efa04796b38196522728d8c8"> 1114</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a8f6f6d07efa04796b38196522728d8c8">set_last_row_output</a>(<a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> rno) { m_last_row_output = rno; }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">   See #m_rowno_being_visited</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01119"></a><span class="lineno"><a class="line" href="classWindow.html#add3b90334621a4011707563afc0faa27"> 1119</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#add3b90334621a4011707563afc0faa27">rowno_being_visited</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_rowno_being_visited; }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">   See #m_rowno_being_visited</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01124"></a><span class="lineno"><a class="line" href="classWindow.html#aada96ea4b7c867e24e884f64d1a5c39f"> 1124</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#aada96ea4b7c867e24e884f64d1a5c39f">set_rowno_being_visited</a>(<a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> rno) { m_rowno_being_visited = rno; }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">    See #m_last_rowno_in_cache</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01129"></a><span class="lineno"><a class="line" href="classWindow.html#af654adb66a91ceb82fb2b1728b8f0a76"> 1129</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#af654adb66a91ceb82fb2b1728b8f0a76">last_rowno_in_cache</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_last_rowno_in_cache; }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">    See #m_last_rowno_in_cache</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="classWindow.html#ab92af7504ac7ba66e9994c1895ec3677"> 1134</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#ab92af7504ac7ba66e9994c1895ec3677">set_last_rowno_in_cache</a>(<a class="code" href="my__inttypes_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a> rno) { m_last_rowno_in_cache = rno; }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">    See #m_last_rowno_in_range_frame</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="classWindow.html#a076d4cf1c54d6c83f31977e22ff61afc"> 1139</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a076d4cf1c54d6c83f31977e22ff61afc">last_rowno_in_range_frame</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">return</span> m_last_rowno_in_range_frame;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">    See #m_last_rowno_in_range_frame</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01146"></a><span class="lineno"><a class="line" href="classWindow.html#a148f15c47457c9b5ceb14ecedeeb3ef1"> 1146</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a148f15c47457c9b5ceb14ecedeeb3ef1">set_last_rowno_in_range_frame</a>(<a class="code" href="my__inttypes_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a> rno) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    m_last_rowno_in_range_frame = rno;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">    See #m_last_rowno_in_peerset</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01153"></a><span class="lineno"><a class="line" href="classWindow.html#ac3b4b07aed9cb072e570b7162f204879"> 1153</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#ac3b4b07aed9cb072e570b7162f204879">last_rowno_in_peerset</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_last_rowno_in_peerset; }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">    See #m_last_rowno_in_peerset</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="classWindow.html#a9d7db13aa61ec8ede42fd8c2916ea730"> 1158</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a9d7db13aa61ec8ede42fd8c2916ea730">set_last_rowno_in_peerset</a>(<a class="code" href="my__inttypes_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a> rno) { m_last_rowno_in_peerset = rno; }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">    See #m_is_last_row_in_peerset_within_frame</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01163"></a><span class="lineno"><a class="line" href="classWindow.html#a8f9a2b5b1353bd02183a9705c8cdfa55"> 1163</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a8f9a2b5b1353bd02183a9705c8cdfa55">is_last_row_in_peerset_within_frame</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">return</span> m_is_last_row_in_peerset_within_frame;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">    See #m_is_last_row_in_peerset_within_frame</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01170"></a><span class="lineno"><a class="line" href="classWindow.html#a6db435963ca6dda1c5dbfa964d67770e"> 1170</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a6db435963ca6dda1c5dbfa964d67770e">set_is_last_row_in_peerset_within_frame</a>(<span class="keywordtype">bool</span> <a class="code" href="persisted__variable_8cc.html#a211d620ef86d6a09b1d29b51b6e44f06">value</a>) {</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    m_is_last_row_in_peerset_within_frame = <a class="code" href="persisted__variable_8cc.html#a211d620ef86d6a09b1d29b51b6e44f06">value</a>;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">    See #m_do_copy_null</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01177"></a><span class="lineno"><a class="line" href="classWindow.html#ab3c27b87499dd88acc0f95db4d1d02f4"> 1177</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#ab3c27b87499dd88acc0f95db4d1d02f4">do_copy_null</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_do_copy_null; }</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">    See #m_do_copy_null</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01182"></a><span class="lineno"><a class="line" href="classWindow.html#afb8fc05e57c149b0c22b72b414e46608"> 1182</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#afb8fc05e57c149b0c22b72b414e46608">set_do_copy_null</a>(<span class="keywordtype">bool</span> b) { m_do_copy_null = b; }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">    See #m_inverse_aggregation</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01187"></a><span class="lineno"><a class="line" href="classWindow.html#aa7fc427740f0edee7ac124636be94d32"> 1187</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#aa7fc427740f0edee7ac124636be94d32">do_inverse</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_inverse_aggregation; }</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">    See #m_inverse_aggregation</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01192"></a><span class="lineno"><a class="line" href="classWindow.html#ab8f866028034436425a5c44bd70f0cfe"> 1192</a></span>&#160;  <a class="code" href="classWindow.html">Window</a> &amp;<a class="code" href="classWindow.html#ab8f866028034436425a5c44bd70f0cfe">set_inverse</a>(<span class="keywordtype">bool</span> b) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    m_inverse_aggregation = b;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">    See #m_aggregates_primed</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="classWindow.html#a400fc74c97d29d7e3a72f1dc3081bfc0"> 1200</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a400fc74c97d29d7e3a72f1dc3081bfc0">aggregates_primed</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_aggregates_primed; }</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">    See #m_aggregates_primed</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01205"></a><span class="lineno"><a class="line" href="classWindow.html#aed86c074d30075ddabe9decb5a2372f3"> 1205</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#aed86c074d30075ddabe9decb5a2372f3">set_aggregates_primed</a>(<span class="keywordtype">bool</span> b) { m_aggregates_primed = b; }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">    See #m_is_last_row_in_frame</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01210"></a><span class="lineno"><a class="line" href="classWindow.html#a6cef719ee622b79be8ef4724faf528cb"> 1210</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classWindow.html#a6cef719ee622b79be8ef4724faf528cb">is_last_row_in_frame</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">return</span> m_is_last_row_in_frame || m_select-&gt;<a class="code" href="classSELECT__LEX.html#af760949c139ac7733abaf22491f71273">table_list</a>.<a class="code" href="classSQL__I__List.html#a479a62a37484f593bf24cf93d3cb9389">elements</a> == 0;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  }</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">    See #m_is_last_row_in_frame</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01217"></a><span class="lineno"><a class="line" href="classWindow.html#aed1355142ce82e6669ba4251438261bb"> 1217</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#aed1355142ce82e6669ba4251438261bb">set_is_last_row_in_frame</a>(<span class="keywordtype">bool</span> b) { m_is_last_row_in_frame = b; }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">    Return the size of the frame in number of rows</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">    @returns frame size</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="comment">// int64 frame_cardinality();</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">    See #m_rowno_in_frame</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01228"></a><span class="lineno"><a class="line" href="classWindow.html#a4ac5c168dd9a8c6a40a66a30583fca2c"> 1228</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a4ac5c168dd9a8c6a40a66a30583fca2c">rowno_in_frame</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_rowno_in_frame; }</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">    See #m_rowno_in_frame</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01233"></a><span class="lineno"><a class="line" href="classWindow.html#a823ff8c353ee4278ec9d4f3b4e03dcb2"> 1233</a></span>&#160;  <a class="code" href="classWindow.html">Window</a> &amp;<a class="code" href="classWindow.html#a823ff8c353ee4278ec9d4f3b4e03dcb2">set_rowno_in_frame</a>(<a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> rowno) {</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    m_rowno_in_frame = rowno;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment">    See #m_rowno_in_partition</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01241"></a><span class="lineno"><a class="line" href="classWindow.html#a0206fd0843b62659b7fdc0dda2019c25"> 1241</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a0206fd0843b62659b7fdc0dda2019c25">rowno_in_partition</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_rowno_in_partition; }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">    See #m_rowno_in_partition</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01246"></a><span class="lineno"><a class="line" href="classWindow.html#ae0bc5d170459a069cc26928e7fd7f298"> 1246</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#ae0bc5d170459a069cc26928e7fd7f298">set_rowno_in_partition</a>(<a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> rowno) { m_rowno_in_partition = rowno; }</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">    See #m_first_rowno_in_range_frame</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01251"></a><span class="lineno"><a class="line" href="classWindow.html#a37b5169f16d3479c9dd078a83adab157"> 1251</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a37b5169f16d3479c9dd078a83adab157">set_first_rowno_in_range_frame</a>(<a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> rowno) {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    m_first_rowno_in_range_frame = rowno;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">    See #m_first_rowno_in_range_frame</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="classWindow.html#a25304b705102e40e3e7035ab26ef4281"> 1258</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a25304b705102e40e3e7035ab26ef4281">first_rowno_in_range_frame</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">return</span> m_first_rowno_in_range_frame;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment">    See #m_frame_buffer_total_rows</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01265"></a><span class="lineno"><a class="line" href="classWindow.html#ae9e7936f935c13637e39373ec43c37ab"> 1265</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#ae9e7936f935c13637e39373ec43c37ab">set_frame_buffer_total_rows</a>(<a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> rows) {</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    m_frame_buffer_total_rows = rows;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">    See #m_frame_buffer_total_rows</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01272"></a><span class="lineno"><a class="line" href="classWindow.html#a502a019632199a5527a57264d2c38a77"> 1272</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a502a019632199a5527a57264d2c38a77">frame_buffer_total_rows</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_frame_buffer_total_rows; }</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">    See #m_frame_buffer_partition_offset</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01277"></a><span class="lineno"><a class="line" href="classWindow.html#abf06c4e9907c3255ee5f2d782f875a3b"> 1277</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#abf06c4e9907c3255ee5f2d782f875a3b">set_frame_buffer_partition_offset</a>(<a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> offset) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    m_frame_buffer_partition_offset = offset;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">    See #m_frame_buffer_partition_offset</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01284"></a><span class="lineno"><a class="line" href="classWindow.html#aebba3282a95d28b241853110f07520aa"> 1284</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#aebba3282a95d28b241853110f07520aa">frame_buffer_partition_offset</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">return</span> m_frame_buffer_partition_offset;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">    See #m_row_has_fields_in_out_table</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01291"></a><span class="lineno"><a class="line" href="classWindow.html#a42f719c44d707e5f713b8a508b0fd52a"> 1291</a></span>&#160;  <a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> <a class="code" href="classWindow.html#a42f719c44d707e5f713b8a508b0fd52a">row_has_fields_in_out_table</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">return</span> m_row_has_fields_in_out_table;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">    See #m_row_has_fields_in_out_table</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="classWindow.html#a30d7f64d0e916d27a300f2e4fe4ad40c"> 1298</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a30d7f64d0e916d27a300f2e4fe4ad40c">set_row_has_fields_in_out_table</a>(<a class="code" href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a> rowno) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    m_row_has_fields_in_out_table = rowno;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">    Free up any resource used to process the window functions of this window,</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">    e.g. temporary files and in-memory data structures. Called when done</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment">    with all window processing steps from SELECT_LEX::cleanup.</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="keywordtype">void</span> cleanup(<a class="code" href="classTHD.html">THD</a> *thd);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">    Free structures that were set up during preparation of window functions</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="my__alloc_8h.html#a28315dc6f65bdd04a2c84b4aca4ca248">destroy</a>();</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">   Reset window state for a new partition.</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">   Reset the temporary storage used for window frames, typically when we find</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">   a new partition. The rows in the buffer are then no longer needed.</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01320"></a><span class="lineno"><a class="line" href="classWindow.html#a1e43cbaf2e782e53ca0d368308d2f94c"> 1320</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a1e43cbaf2e782e53ca0d368308d2f94c">reset_partition_state</a>() { reset_execution_state(RL_PARTITION); }</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">    Reset execution state for next call to JOIN::exec, cf. JOIN::reset,</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">    or using [Buffering]WindowingIterator::Init.</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01326"></a><span class="lineno"><a class="line" href="classWindow.html#abc1da9fee9ddb97d7a5520e86bb72452"> 1326</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#abc1da9fee9ddb97d7a5520e86bb72452">reset_round</a>() { reset_execution_state(RL_ROUND); }</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment">    Reset resolution and execution state to prepare for next execution of a</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment">    prepared statement.</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01332"></a><span class="lineno"><a class="line" href="classWindow.html#a56f0eeb27ae12bf2cae3f89f9da937d9"> 1332</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classWindow.html#a56f0eeb27ae12bf2cae3f89f9da937d9">reinit_before_use</a>() { reset_execution_state(RL_FULL); }</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">    Reset execution state for LEAD/LAG for the current row in partition.</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordtype">void</span> reset_lead_lag();</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"><a class="line" href="classWindow.html#ad1abdab0773d91d2963573ed5cf4eddaa24fdeab51a63fc7f44000d9cace935c3"> 1339</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classWindow.html#ad1abdab0773d91d2963573ed5cf4edda">Reset_level</a> { RL_FULL, <a class="code" href="classWindow.html#ad1abdab0773d91d2963573ed5cf4eddaa24fdeab51a63fc7f44000d9cace935c3">RL_ROUND</a>, RL_PARTITION };</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">  /// Common function for all types of resetting</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> reset_execution_state(<a class="code" href="classWindow.html#ad1abdab0773d91d2963573ed5cf4edda">Reset_level</a> level);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">    Reset the execution state for all window functions defined on this window.</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keywordtype">void</span> reset_all_wf_state();</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *printable_name() <span class="keyword">const</span>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="mcstat_8c.html#aeb0a66a1106a1c0097d605cbcb19766d">print</a>(<span class="keyword">const</span> <a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classString.html">String</a> *str, <a class="code" href="enum__query__type_8h.html#a84267bb0a3694b1d41b6494868ce18ac">enum_query_type</a> qt,</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;             <span class="keywordtype">bool</span> expand_definition) <span class="keyword">const</span>;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="keywordtype">bool</span> has_windowing_steps() <span class="keyword">const</span>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">    Compute sorting costs for windowing.</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">    @param cost Cost of sorting result set once</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">    @param windows The set of windows</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">    @returns the aggregated sorting costs of the windowing</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">double</span> compute_cost(<span class="keywordtype">double</span> cost, <a class="code" href="classList.html">List&lt;Window&gt;</a> &amp;windows);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">    Common implementation of before_frame() and after_frame().</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">    @param  before  True if &#39;before&#39; is wanted; false if &#39;after&#39; is.</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keywordtype">bool</span> before_or_after_frame(<span class="keywordtype">bool</span> before);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordtype">void</span> print_frame(<span class="keyword">const</span> <a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classString.html">String</a> *str, <a class="code" href="enum__query__type_8h.html#a84267bb0a3694b1d41b6494868ce18ac">enum_query_type</a> qt) <span class="keyword">const</span>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordtype">void</span> print_border(<span class="keyword">const</span> <a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classString.html">String</a> *str, <a class="code" href="classPT__border.html">PT_border</a> *b,</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                    <a class="code" href="enum__query__type_8h.html#a84267bb0a3694b1d41b6494868ce18ac">enum_query_type</a> qt) <span class="keyword">const</span>;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">    Reorder windows and eliminate redundant ordering. If a window has the</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">    same ordering requirements as another, we will move them next to each other</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">    in the evaluation sequence, so we can sort only once, i.e. before the</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">    first window step. This allows us to fulfill the guarantee given by</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">    SQL standard when it comes to repeatability of non-deterministic (partially</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">    ordered) result sets for windowing inside a query, cf. #equal_sort.</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">    If more than two have the same ordering, the same applies, we only sort</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">    before the first (sort equivalent) window.</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">    If the result set is implicitly grouped, we also skip any sorting for</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">    windows.</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">    @param windows     list of windows</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> reorder_and_eliminate_sorts(<a class="code" href="classList.html">List&lt;Window&gt;</a> &amp;windows);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">    Return true of the physical[1] sort orderings for the two windows are the</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">    same, cf. guarantee of</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">    SQL 2014 4.15.15 Windowed tables bullet two: The windowing functions are</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">    computed using the same row ordering if they specify the same ordering.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment">    Collation and null handling is not supported, so moot.</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">    The two other bullet points are also covered by this test.</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">    [1] After concatenating effective PARTITION BY and ORDER BY (including</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">    inheritance) expressions.</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> equal_sort(<a class="code" href="classWindow.html">Window</a> *w1, <a class="code" href="classWindow.html">Window</a> *w2);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">    Check that a frame border is constant during execution and that it does</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">    not contain subqueries (relevant for INTERVAL only): implementation</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">    limitation.</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">    @param thd    Session thread</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">    @param border The border to check</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">    @return false if OK, true if error</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordtype">bool</span> check_constant_bound(<a class="code" href="classTHD.html">THD</a> *thd, <a class="code" href="classPT__border.html">PT_border</a> *border);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">    Check that frame borders are sane; resolution phase.</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">    @param thd      Session thread</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">    @returns true if error</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <span class="keywordtype">bool</span> check_border_sanity1(<a class="code" href="classTHD.html">THD</a> *thd);<span class="comment"></span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">    Like check_border_sanity1() but contains checks which must wait until</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">    the start of the execution phase.</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">    @param thd      Session thread</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">    @returns true if error</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="keywordtype">bool</span> check_border_sanity2(<a class="code" href="classTHD.html">THD</a> *thd);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;};</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">  Collects evaluation requirements from a window function,</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">  used by Item_sum::check_wf_semantics and its overrides.</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html"> 1445</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structWindow__evaluation__requirements.html">Window_evaluation_requirements</a> {<span class="comment"></span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">    Set to true if window function requires row buffering</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01449"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#a084c1e6de377b9a281568faa40442d85"> 1449</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structWindow__evaluation__requirements.html#a084c1e6de377b9a281568faa40442d85">needs_buffer</a>;<span class="comment"></span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment">    Set to true if we need peerset for evaluation (e.g. CUME_DIST)</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01453"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#ad7c9e25d6decd4be80ae9d5adc2e12af"> 1453</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structWindow__evaluation__requirements.html#ad7c9e25d6decd4be80ae9d5adc2e12af">needs_peerset</a>;<span class="comment"></span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">    Set to true if we need last peer for evaluation within a frame</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">    (e.g. JSON_OBJECTAGG)</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01458"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#a45b4bc53095d9288733c7896080f4439"> 1458</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structWindow__evaluation__requirements.html#a45b4bc53095d9288733c7896080f4439">needs_last_peer_in_frame</a>;<span class="comment"></span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">    Set to true if we need FIRST_VALUE or optimized MIN/MAX</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01462"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#a4b116fbe73bbfb5211059c6357b54d9c"> 1462</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structWindow__evaluation__requirements.html#a4b116fbe73bbfb5211059c6357b54d9c">opt_first_row</a>;<span class="comment"></span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">    Set to true if we need LAST_VALUE or optimized MIN/MAX</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01466"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#a8e12f442202d317a3739f0bc8bef37f0"> 1466</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structWindow__evaluation__requirements.html#a8e12f442202d317a3739f0bc8bef37f0">opt_last_row</a>;</div><div class="line"><a name="l01467"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#a7ea24e33fcdafabf3f0260c4bc53c04d"> 1467</a></span>&#160;  <a class="code" href="structWindow_1_1st__offset.html">Window::st_offset</a> <a class="code" href="structWindow__evaluation__requirements.html#a7ea24e33fcdafabf3f0260c4bc53c04d">opt_nth_row</a>;    <span class="comment">///&lt; Used if we have NTH_VALUE</span></div><div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#ae3ee445c04f765300cb79ead4d179252"> 1468</a></span>&#160;<span class="comment"></span>  <a class="code" href="structWindow_1_1st__ll__offset.html">Window::st_ll_offset</a> <a class="code" href="structWindow__evaluation__requirements.html#ae3ee445c04f765300cb79ead4d179252">opt_ll_row</a>;  <span class="comment">///&lt; Used if we have LEAD or LAG</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment"></span><span class="comment">  /**</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">    Set to true if we can compute a sliding window by a combination of</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment">    undoing the contribution of rows going out of the frame and adding the</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">    contribution of rows coming into the frame.  For example, SUM and AVG</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">    allows this, but MAX/MIN do not. Only applicable if the frame has ROW</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">    bounds unit.</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01476"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#acd2d0ab747a075f452909a555ed7dd84"> 1476</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structWindow__evaluation__requirements.html#acd2d0ab747a075f452909a555ed7dd84">row_optimizable</a>;<span class="comment"></span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">  /**</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">    Similar to row_optimizable but for RANGE frame bounds unit</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#a6a5c9c550bc0e5be27add05fc712f44a"> 1480</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structWindow__evaluation__requirements.html#a6a5c9c550bc0e5be27add05fc712f44a">range_optimizable</a>;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="structWindow__evaluation__requirements.html#a6b69019ecb6551dead2c0553e73d66d0"> 1482</a></span>&#160;  <a class="code" href="structWindow__evaluation__requirements.html#a6b69019ecb6551dead2c0553e73d66d0">Window_evaluation_requirements</a>()</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      : needs_buffer(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        needs_peerset(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        needs_last_peer_in_frame(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        opt_first_row(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        opt_last_row(<a class="code" href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>),</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        row_optimizable(<a class="code" href="config__static_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>),</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        range_optimizable(<a class="code" href="config__static_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>) {}</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;};</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* WINDOWS_INCLUDED */</span><span class="preprocessor"></span></div><div class="ttc" id="classWindow_html_a9d7db13aa61ec8ede42fd8c2916ea730"><div class="ttname"><a href="classWindow.html#a9d7db13aa61ec8ede42fd8c2916ea730">Window::set_last_rowno_in_peerset</a></div><div class="ttdeci">void set_last_rowno_in_peerset(uint64 rno)</div><div class="ttdoc">See m_last_rowno_in_peerset. </div><div class="ttdef"><b>Definition:</b> window.h:1158</div></div>
<div class="ttc" id="structWindow_1_1st__nth_html_aa98d95113198cbb3cac0825f32cac351"><div class="ttname"><a href="structWindow_1_1st__nth.html#aa98d95113198cbb3cac0825f32cac351">Window::st_nth::m_offsets</a></div><div class="ttdeci">Mem_root_array_YY&lt; st_offset &gt; m_offsets</div><div class="ttdoc">sorted set of NTH_VALUE offsets </div><div class="ttdef"><b>Definition:</b> window.h:216</div></div>
<div class="ttc" id="classWindow_html_ae3e270a2d26c26ce8ff55e2ceb163e08"><div class="ttname"><a href="classWindow.html#ae3e270a2d26c26ce8ff55e2ceb163e08">Window::restore_pos</a></div><div class="ttdeci">void restore_pos(Window_retrieve_cached_row_reason reason)</div><div class="ttdoc">See m_tmp_pos. </div><div class="ttdef"><b>Definition:</b> window.h:324</div></div>
<div class="ttc" id="mcstat_8c_html_aeb0a66a1106a1c0097d605cbcb19766d"><div class="ttname"><a href="mcstat_8c.html#aeb0a66a1106a1c0097d605cbcb19766d">print</a></div><div class="ttdeci">static void print(const char *key, int keylen, const char *val, int vallen)</div><div class="ttdoc">Print the key value pair. </div><div class="ttdef"><b>Definition:</b> mcstat.c:106</div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_a4b116fbe73bbfb5211059c6357b54d9c"><div class="ttname"><a href="structWindow__evaluation__requirements.html#a4b116fbe73bbfb5211059c6357b54d9c">Window_evaluation_requirements::opt_first_row</a></div><div class="ttdeci">bool opt_first_row</div><div class="ttdoc">Set to true if we need FIRST_VALUE or optimized MIN/MAX. </div><div class="ttdef"><b>Definition:</b> window.h:1462</div></div>
<div class="ttc" id="my__inttypes_8h_html_a65f85814a8290f9797005d3b28e7e5fc"><div class="ttname"><a href="my__inttypes_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a></div><div class="ttdeci">unsigned char uchar</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:51</div></div>
<div class="ttc" id="classWindow_html_a068cd0671aae0f28f0c8e68536fea2eb"><div class="ttname"><a href="classWindow.html#a068cd0671aae0f28f0c8e68536fea2eb">Window::needs_last_peer_in_frame</a></div><div class="ttdeci">bool needs_last_peer_in_frame() const</div><div class="ttdoc">If we cannot compute one of window functions without looking at all rows in the peerset of the curren...</div><div class="ttdef"><b>Definition:</b> window.h:1001</div></div>
<div class="ttc" id="classWindow_html_a02aacede481bcb89a62e6c118d1dca1a"><div class="ttname"><a href="classWindow.html#a02aacede481bcb89a62e6c118d1dca1a">Window::m_is_last_row_in_frame</a></div><div class="ttdeci">bool m_is_last_row_in_frame</div><div class="ttdoc">Execution state: the current row is the last row in a window frame For some aggregate functions...</div><div class="ttdef"><b>Definition:</b> window.h:568</div></div>
<div class="ttc" id="classWindow_html_acb81870ca3607b1038dc2dc843e87e2b"><div class="ttname"><a href="classWindow.html#acb81870ca3607b1038dc2dc843e87e2b">Window::m_last_rowno_in_cache</a></div><div class="ttdeci">int64 m_last_rowno_in_cache</div><div class="ttdoc">Execution state: used iff m_needs_frame_buffering. </div><div class="ttdef"><b>Definition:</b> window.h:427</div></div>
<div class="ttc" id="structWindow_1_1st__offset_html"><div class="ttname"><a href="structWindow_1_1st__offset.html">Window::st_offset</a></div><div class="ttdef"><b>Definition:</b> window.h:193</div></div>
<div class="ttc" id="classWindow_html_a99bd08f876de6bb6ce7ab6c424b7f687"><div class="ttname"><a href="classWindow.html#a99bd08f876de6bb6ce7ab6c424b7f687">Window::set_outtable_param</a></div><div class="ttdeci">void set_outtable_param(Temp_table_param *p)</div><div class="ttdoc">Setter for m_outtable_param, q.v. </div><div class="ttdef"><b>Definition:</b> window.h:1090</div></div>
<div class="ttc" id="classWindow_html_a57e1fc73a241169d5e2d609f760b333b"><div class="ttname"><a href="classWindow.html#a57e1fc73a241169d5e2d609f760b333b">Window::functions</a></div><div class="ttdeci">List&lt; Item_sum &gt; &amp; functions()</div><div class="ttdoc">Get the list of functions invoked on this window. </div><div class="ttdef"><b>Definition:</b> window.h:759</div></div>
<div class="ttc" id="classWindow_html_abc606a658acfeaedb7b7e2ebc68e596e"><div class="ttname"><a href="classWindow.html#abc606a658acfeaedb7b7e2ebc68e596e">Window::m_partition_items</a></div><div class="ttdeci">List&lt; Cached_item &gt; m_partition_items</div><div class="ttdoc">items for the PARTITION BY columns </div><div class="ttdef"><b>Definition:</b> window.h:235</div></div>
<div class="ttc" id="classMem__root__array__YY_html"><div class="ttname"><a href="classMem__root__array__YY.html">Mem_root_array_YY</a></div><div class="ttdoc">A typesafe replacement for DYNAMIC_ARRAY. </div><div class="ttdef"><b>Definition:</b> mem_root_array.h:58</div></div>
<div class="ttc" id="classWindow_html_ae0bc5d170459a069cc26928e7fd7f298"><div class="ttname"><a href="classWindow.html#ae0bc5d170459a069cc26928e7fd7f298">Window::set_rowno_in_partition</a></div><div class="ttdeci">void set_rowno_in_partition(int64 rowno)</div><div class="ttdoc">See m_rowno_in_partition. </div><div class="ttdef"><b>Definition:</b> window.h:1246</div></div>
<div class="ttc" id="classWindow_html_a94c51faca303360d8dac082df8d068e2"><div class="ttname"><a href="classWindow.html#a94c51faca303360d8dac082df8d068e2">Window::before_frame</a></div><div class="ttdeci">bool before_frame()</div><div class="ttdoc">While processing buffered rows in RANGE frame mode we, determine if the present row revisited from th...</div><div class="ttdef"><b>Definition:</b> window.h:849</div></div>
<div class="ttc" id="structORDER_html"><div class="ttname"><a href="structORDER.html">ORDER</a></div><div class="ttdef"><b>Definition:</b> table.h:272</div></div>
<div class="ttc" id="classWindow_html_a42f719c44d707e5f713b8a508b0fd52a"><div class="ttname"><a href="classWindow.html#a42f719c44d707e5f713b8a508b0fd52a">Window::row_has_fields_in_out_table</a></div><div class="ttdeci">int64 row_has_fields_in_out_table() const</div><div class="ttdoc">See m_row_has_fields_in_out_table. </div><div class="ttdef"><b>Definition:</b> window.h:1291</div></div>
<div class="ttc" id="structrecord_html"><div class="ttname"><a href="structrecord.html">record</a></div><div class="ttdef"><b>Definition:</b> mi_test3.cc:54</div></div>
<div class="ttc" id="window_8h_html_aa1a426efe3df5da9b1e0a0f7f0e99a7fa53f4d96b33c0bda32aec8530304661c2"><div class="ttname"><a href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa53f4d96b33c0bda32aec8530304661c2">Window_retrieve_cached_row_reason::MISC_POSITIONS</a></div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html"><div class="ttname"><a href="structWindow__evaluation__requirements.html">Window_evaluation_requirements</a></div><div class="ttdoc">Collects evaluation requirements from a window function, used by Item_sum::check_wf_semantics and its...</div><div class="ttdef"><b>Definition:</b> window.h:1445</div></div>
<div class="ttc" id="classWindow_html_a0206fd0843b62659b7fdc0dda2019c25"><div class="ttname"><a href="classWindow.html#a0206fd0843b62659b7fdc0dda2019c25">Window::rowno_in_partition</a></div><div class="ttdeci">int64 rowno_in_partition() const</div><div class="ttdoc">See m_rowno_in_partition. </div><div class="ttdef"><b>Definition:</b> window.h:1241</div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_ae3ee445c04f765300cb79ead4d179252"><div class="ttname"><a href="structWindow__evaluation__requirements.html#ae3ee445c04f765300cb79ead4d179252">Window_evaluation_requirements::opt_ll_row</a></div><div class="ttdeci">Window::st_ll_offset opt_ll_row</div><div class="ttdoc">Used if we have LEAD or LAG. </div><div class="ttdef"><b>Definition:</b> window.h:1468</div></div>
<div class="ttc" id="classWindow_html_a1f41db4ef8446e3e3a85134d5658fe7d"><div class="ttname"><a href="classWindow.html#a1f41db4ef8446e3e3a85134d5658fe7d">Window::name</a></div><div class="ttdeci">Item_string * name() const</div><div class="ttdoc">Get the name of a window. </div><div class="ttdef"><b>Definition:</b> window.h:689</div></div>
<div class="ttc" id="my__inttypes_8h_html"><div class="ttname"><a href="my__inttypes_8h.html">my_inttypes.h</a></div><div class="ttdoc">Some integer typedefs for easier portability. </div></div>
<div class="ttc" id="classWindow_html_ada1c69cb59cce1cc6e9d5aff2db67d41"><div class="ttname"><a href="classWindow.html#ada1c69cb59cce1cc6e9d5aff2db67d41">Window::m_needs_card</a></div><div class="ttdeci">bool m_needs_card</div><div class="ttdoc">(At least) one window function needs the cardinality of the partition of the current row to evaluate ...</div><div class="ttdef"><b>Definition:</b> window.h:143</div></div>
<div class="ttc" id="classWindow_html_a687e9949d29ff808d1fb1c2bff2d6579"><div class="ttname"><a href="classWindow.html#a687e9949d29ff808d1fb1c2bff2d6579">Window::outtable_param</a></div><div class="ttdeci">Temp_table_param * outtable_param() const</div><div class="ttdoc">Getter for m_outtable_param, q.v. </div><div class="ttdef"><b>Definition:</b> window.h:1085</div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_acd2d0ab747a075f452909a555ed7dd84"><div class="ttname"><a href="structWindow__evaluation__requirements.html#acd2d0ab747a075f452909a555ed7dd84">Window_evaluation_requirements::row_optimizable</a></div><div class="ttdeci">bool row_optimizable</div><div class="ttdoc">Set to true if we can compute a sliding window by a combination of undoing the contribution of rows g...</div><div class="ttdef"><b>Definition:</b> window.h:1476</div></div>
<div class="ttc" id="classWindow_html_aada96ea4b7c867e24e884f64d1a5c39f"><div class="ttname"><a href="classWindow.html#aada96ea4b7c867e24e884f64d1a5c39f">Window::set_rowno_being_visited</a></div><div class="ttdeci">void set_rowno_being_visited(int64 rno)</div><div class="ttdoc">See m_rowno_being_visited. </div><div class="ttdef"><b>Definition:</b> window.h:1124</div></div>
<div class="ttc" id="classBounds__checked__array_html"><div class="ttname"><a href="classBounds__checked__array.html">Bounds_checked_array</a></div><div class="ttdoc">A wrapper class which provides array bounds checking. </div><div class="ttdef"><b>Definition:</b> sql_array.h:41</div></div>
<div class="ttc" id="classmem__root__deque_html"><div class="ttname"><a href="classmem__root__deque.html">mem_root_deque</a></div><div class="ttdoc">A (partial) implementation of std::deque allocating its blocks on a MEM_ROOT. </div><div class="ttdef"><b>Definition:</b> mem_root_deque.h:109</div></div>
<div class="ttc" id="classWindow_html_ac5eac4e74934033635df8387a4f29c9c"><div class="ttname"><a href="classWindow.html#ac5eac4e74934033635df8387a4f29c9c">Window::m_frame_buffer_positions</a></div><div class="ttdeci">Mem_root_array_YY&lt; Frame_buffer_position &gt; m_frame_buffer_positions</div><div class="ttdoc">Execution state: used iff m_needs_frame_buffering. </div><div class="ttdef"><b>Definition:</b> window.h:299</div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_a6b69019ecb6551dead2c0553e73d66d0"><div class="ttname"><a href="structWindow__evaluation__requirements.html#a6b69019ecb6551dead2c0553e73d66d0">Window_evaluation_requirements::Window_evaluation_requirements</a></div><div class="ttdeci">Window_evaluation_requirements()</div><div class="ttdef"><b>Definition:</b> window.h:1482</div></div>
<div class="ttc" id="classPT__order__list_html"><div class="ttname"><a href="classPT__order__list.html">PT_order_list</a></div><div class="ttdef"><b>Definition:</b> parse_tree_nodes.h:211</div></div>
<div class="ttc" id="classWindow_html_a575e7bc09584f7c853e4940e170e228b"><div class="ttname"><a href="classWindow.html#a575e7bc09584f7c853e4940e170e228b">Window::needs_buffering</a></div><div class="ttdeci">bool needs_buffering() const</div><div class="ttdoc">If we cannot compute one of window functions without looking at succeeding rows, return true...</div><div class="ttdef"><b>Definition:</b> window.h:987</div></div>
<div class="ttc" id="window_8h_html_aa1a426efe3df5da9b1e0a0f7f0e99a7f"><div class="ttname"><a href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7f">Window_retrieve_cached_row_reason</a></div><div class="ttdeci">Window_retrieve_cached_row_reason</div><div class="ttdoc">Position hints for the frame buffer are saved for these kind of row accesses, cf. ...</div><div class="ttdef"><b>Definition:</b> window.h:64</div></div>
<div class="ttc" id="classWindow_html_ada9b08a9f8e4f79d05abfc64b79a395e"><div class="ttname"><a href="classWindow.html#ada9b08a9f8e4f79d05abfc64b79a395e">Window::Window</a></div><div class="ttdeci">Window(Item_string *name, PT_order_list *part, PT_order_list *ord, PT_frame *frame, bool is_reference, Item_string *inherit)</div><div class="ttdoc">Generic window constructor, shared. </div><div class="ttdef"><b>Definition:</b> window.h:594</div></div>
<div class="ttc" id="classSELECT__LEX_html"><div class="ttname"><a href="classSELECT__LEX.html">SELECT_LEX</a></div><div class="ttdoc">This class represents a query block, aka a query specification, which is a query consisting of a SELE...</div><div class="ttdef"><b>Definition:</b> sql_lex.h:1089</div></div>
<div class="ttc" id="classWindow_html_a05d4d1ea03ffe3d8caa4a0f853bc600c"><div class="ttname"><a href="classWindow.html#a05d4d1ea03ffe3d8caa4a0f853bc600c">Window::m_is_reference</a></div><div class="ttdeci">const bool m_is_reference</div><div class="ttdoc">If true, m_name is an unbound window reference, other fields are unused. </div><div class="ttdef"><b>Definition:</b> window.h:118</div></div>
<div class="ttc" id="classItem__func_html"><div class="ttname"><a href="classItem__func.html">Item_func</a></div><div class="ttdef"><b>Definition:</b> item_func.h:131</div></div>
<div class="ttc" id="classItem__string_html"><div class="ttname"><a href="classItem__string.html">Item_string</a></div><div class="ttdef"><b>Definition:</b> item.h:4928</div></div>
<div class="ttc" id="classWindow_html"><div class="ttname"><a href="classWindow.html">Window</a></div><div class="ttdoc">Represents the (explicit) window of a SQL 2003 section 7.11 &lt;window clause&gt;, or the implicit (inlined...</div><div class="ttdef"><b>Definition:</b> window.h:94</div></div>
<div class="ttc" id="classWindow_html_aa0b53e1d1beeeb61008d4611b401f33b"><div class="ttname"><a href="classWindow.html#aa0b53e1d1beeeb61008d4611b401f33b">Window::partition_rowno</a></div><div class="ttdeci">int64 partition_rowno() const</div><div class="ttdoc">Getter for m_part_row_number, q.v., the current row number within the partition. </div><div class="ttdef"><b>Definition:</b> window.h:1096</div></div>
<div class="ttc" id="classWindow_html_ad5cc04aa3c3ecddbf9683da7851c6b22"><div class="ttname"><a href="classWindow.html#ad5cc04aa3c3ecddbf9683da7851c6b22">Window::frame</a></div><div class="ttdeci">const PT_frame * frame() const</div><div class="ttdoc">Get the frame, if any. </div><div class="ttdef"><b>Definition:</b> window.h:697</div></div>
<div class="ttc" id="classWindow_html_aaa7c710a8b30918145c2d8852c59e38d"><div class="ttname"><a href="classWindow.html#aaa7c710a8b30918145c2d8852c59e38d">Window::effective_order_by</a></div><div class="ttdeci">const PT_order_list * effective_order_by() const</div><div class="ttdoc">Get the ORDER BY, if any. </div><div class="ttdef"><b>Definition:</b> window.h:704</div></div>
<div class="ttc" id="classPT__window_html"><div class="ttname"><a href="classPT__window.html">PT_window</a></div><div class="ttdoc">Parse tree node for a window; just a shallow wrapper for class Window, q.v. </div><div class="ttdef"><b>Definition:</b> parse_tree_window.h:38</div></div>
<div class="ttc" id="classWindow_html_acd4370dc1039029dd04e36ad5912a795"><div class="ttname"><a href="classWindow.html#acd4370dc1039029dd04e36ad5912a795">Window::Special_keys</a></div><div class="ttdeci">Special_keys</div><div class="ttdoc">Keys for m_frame_buffer_cache and m_special_rows_cache, for special rows. </div><div class="ttdef"><b>Definition:</b> window.h:350</div></div>
<div class="ttc" id="classWindow_html_a3db276e3aadcb170aef5f5867f0a4093"><div class="ttname"><a href="classWindow.html#a3db276e3aadcb170aef5f5867f0a4093">Window::frame_buffer</a></div><div class="ttdeci">TABLE * frame_buffer() const</div><div class="ttdoc">Getter for m_frame_buffer, q.v. </div><div class="ttdef"><b>Definition:</b> window.h:1075</div></div>
<div class="ttc" id="classWindow_html_ad2d7b5922eb43a3b83d9fa8ca8712d58"><div class="ttname"><a href="classWindow.html#ad2d7b5922eb43a3b83d9fa8ca8712d58">Window::m_last_rowno_in_range_frame</a></div><div class="ttdeci">int64 m_last_rowno_in_range_frame</div><div class="ttdoc">Execution state: used for RANGE bounds frame evaluation for the continued evaluation for current row ...</div><div class="ttdef"><b>Definition:</b> window.h:537</div></div>
<div class="ttc" id="classWindow_html_a946f2b8a5f05df71fb2d80c7eae52cbf"><div class="ttname"><a href="classWindow.html#a946f2b8a5f05df71fb2d80c7eae52cbf">Window::m_opt_lead_lag</a></div><div class="ttdeci">st_lead_lag m_opt_lead_lag</div><div class="ttdef"><b>Definition:</b> window.h:230</div></div>
<div class="ttc" id="window__lex_8h_html"><div class="ttname"><a href="window__lex_8h.html">window_lex.h</a></div></div>
<div class="ttc" id="classWindow_html_a1fd1b950667807719717cdc6ad9195a7"><div class="ttname"><a href="classWindow.html#a1fd1b950667807719717cdc6ad9195a7">Window::m_outtable_param</a></div><div class="ttdeci">Temp_table_param * m_outtable_param</div><div class="ttdoc">Execution state: Holds the temporary output table (for next step) parameters. </div><div class="ttdef"><b>Definition:</b> window.h:376</div></div>
<div class="ttc" id="classWindow_html_a0d6bfa76488853925dc6790c8df0532f"><div class="ttname"><a href="classWindow.html#a0d6bfa76488853925dc6790c8df0532f">Window::opt_last_row</a></div><div class="ttdeci">bool opt_last_row() const</div><div class="ttdoc">See m_opt_last_row. </div><div class="ttdef"><b>Definition:</b> window.h:1035</div></div>
<div class="ttc" id="classWindow_html_ae9e7936f935c13637e39373ec43c37ab"><div class="ttname"><a href="classWindow.html#ae9e7936f935c13637e39373ec43c37ab">Window::set_frame_buffer_total_rows</a></div><div class="ttdeci">void set_frame_buffer_total_rows(int64 rows)</div><div class="ttdoc">See m_frame_buffer_total_rows. </div><div class="ttdef"><b>Definition:</b> window.h:1265</div></div>
<div class="ttc" id="classWindow_html_a4e4fa7833379ad91e58e022e5be66d79"><div class="ttname"><a href="classWindow.html#a4e4fa7833379ad91e58e022e5be66d79">Window::set_frame_buffer</a></div><div class="ttdeci">void set_frame_buffer(TABLE *tab)</div><div class="ttdoc">Setter for m_frame_buffer, q.v. </div><div class="ttdef"><b>Definition:</b> window.h:1080</div></div>
<div class="ttc" id="enum__query__type_8h_html_a84267bb0a3694b1d41b6494868ce18ac"><div class="ttname"><a href="enum__query__type_8h.html#a84267bb0a3694b1d41b6494868ce18ac">enum_query_type</a></div><div class="ttdeci">enum_query_type</div><div class="ttdoc">Query type constants (usable as bitmap flags). </div><div class="ttdef"><b>Definition:</b> enum_query_type.h:30</div></div>
<div class="ttc" id="window_8h_html_aa1a426efe3df5da9b1e0a0f7f0e99a7faa2770969c827f0f2910f6179418462df"><div class="ttname"><a href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7faa2770969c827f0f2910f6179418462df">Window_retrieve_cached_row_reason::CURRENT</a></div></div>
<div class="ttc" id="classWindow_html_adb88a512c5644560e4266986bd27afd2"><div class="ttname"><a href="classWindow.html#adb88a512c5644560e4266986bd27afd2">Window::m_frame</a></div><div class="ttdeci">PT_frame *const m_frame</div><div class="ttdoc">&lt;window frame clause&gt; </div><div class="ttdef"><b>Definition:</b> window.h:105</div></div>
<div class="ttc" id="classWindow_html_a6ebc242f5aa9a2ed75b7c3df47e922f7"><div class="ttname"><a href="classWindow.html#a6ebc242f5aa9a2ed75b7c3df47e922f7">Window::opt_first_row</a></div><div class="ttdeci">bool opt_first_row() const</div><div class="ttdoc">See m_opt_first_row. </div><div class="ttdef"><b>Definition:</b> window.h:1030</div></div>
<div class="ttc" id="classString_html"><div class="ttname"><a href="classString.html">String</a></div><div class="ttdoc">Using this class is fraught with peril, and you need to be very careful when doing so...</div><div class="ttdef"><b>Definition:</b> sql_string.h:164</div></div>
<div class="ttc" id="classWindow_html_a028148fc459db83d705edab451e8aca7"><div class="ttname"><a href="classWindow.html#a028148fc459db83d705edab451e8aca7">Window::m_inherit_from</a></div><div class="ttdeci">Item_string *const m_inherit_from</div><div class="ttdoc">&lt;existing window name&gt; </div><div class="ttdef"><b>Definition:</b> window.h:113</div></div>
<div class="ttc" id="classWindow_html_ab36ff971eea06183a78bc39c0f67e883"><div class="ttname"><a href="classWindow.html#ab36ff971eea06183a78bc39c0f67e883">Window::m_frame_buffer</a></div><div class="ttdeci">TABLE * m_frame_buffer</div><div class="ttdoc">Execution state: used iff m_needs_frame_buffering. </div><div class="ttdef"><b>Definition:</b> window.h:382</div></div>
<div class="ttc" id="enum__query__type_8h_html"><div class="ttname"><a href="enum__query__type_8h.html">enum_query_type.h</a></div></div>
<div class="ttc" id="classWindow_html_ab92af7504ac7ba66e9994c1895ec3677"><div class="ttname"><a href="classWindow.html#ab92af7504ac7ba66e9994c1895ec3677">Window::set_last_rowno_in_cache</a></div><div class="ttdeci">void set_last_rowno_in_cache(uint64 rno)</div><div class="ttdoc">See m_last_rowno_in_cache. </div><div class="ttdef"><b>Definition:</b> window.h:1134</div></div>
<div class="ttc" id="structTABLE_html"><div class="ttname"><a href="structTABLE.html">TABLE</a></div><div class="ttdef"><b>Definition:</b> table.h:1363</div></div>
<div class="ttc" id="classWindow_html_a183ec945821c6b62836322c0832049cb"><div class="ttname"><a href="classWindow.html#a183ec945821c6b62836322c0832049cb">Window::set_def_pos</a></div><div class="ttdeci">void set_def_pos(uint pos)</div><div class="ttdef"><b>Definition:</b> window.h:692</div></div>
<div class="ttc" id="classWindow_html_af654adb66a91ceb82fb2b1728b8f0a76"><div class="ttname"><a href="classWindow.html#af654adb66a91ceb82fb2b1728b8f0a76">Window::last_rowno_in_cache</a></div><div class="ttdeci">int64 last_rowno_in_cache() const</div><div class="ttdoc">See m_last_rowno_in_cache. </div><div class="ttdef"><b>Definition:</b> window.h:1129</div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_a7ea24e33fcdafabf3f0260c4bc53c04d"><div class="ttname"><a href="structWindow__evaluation__requirements.html#a7ea24e33fcdafabf3f0260c4bc53c04d">Window_evaluation_requirements::opt_nth_row</a></div><div class="ttdeci">Window::st_offset opt_nth_row</div><div class="ttdoc">Used if we have NTH_VALUE. </div><div class="ttdef"><b>Definition:</b> window.h:1467</div></div>
<div class="ttc" id="classWindow_html_abf06c4e9907c3255ee5f2d782f875a3b"><div class="ttname"><a href="classWindow.html#abf06c4e9907c3255ee5f2d782f875a3b">Window::set_frame_buffer_partition_offset</a></div><div class="ttdeci">void set_frame_buffer_partition_offset(int64 offset)</div><div class="ttdoc">See m_frame_buffer_partition_offset. </div><div class="ttdef"><b>Definition:</b> window.h:1277</div></div>
<div class="ttc" id="classWindow_html_a6db435963ca6dda1c5dbfa964d67770e"><div class="ttname"><a href="classWindow.html#a6db435963ca6dda1c5dbfa964d67770e">Window::set_is_last_row_in_peerset_within_frame</a></div><div class="ttdeci">void set_is_last_row_in_peerset_within_frame(bool value)</div><div class="ttdoc">See m_is_last_row_in_peerset_within_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1170</div></div>
<div class="ttc" id="classWindow_html_a4952f1c8b0e3325d30d564f89162e629"><div class="ttname"><a href="classWindow.html#a4952f1c8b0e3325d30d564f89162e629">Window::m_part_row_number</a></div><div class="ttdeci">int64 m_part_row_number</div><div class="ttdoc">Execution state: the current row number in the current partition. </div><div class="ttdef"><b>Definition:</b> window.h:447</div></div>
<div class="ttc" id="classWindow_html_ade0d0f6baea34cd23bc9e89a6456ae1a"><div class="ttname"><a href="classWindow.html#ade0d0f6baea34cd23bc9e89a6456ae1a">Window::optimizable_range_aggregates</a></div><div class="ttdeci">bool optimizable_range_aggregates() const</div><div class="ttdoc">Return true if the set of window functions are all RANGE unit optimizable. </div><div class="ttdef"><b>Definition:</b> window.h:1019</div></div>
<div class="ttc" id="mem__root__array_8h_html"><div class="ttname"><a href="mem__root__array_8h.html">mem_root_array.h</a></div></div>
<div class="ttc" id="classWindow_html_a8f6f6d07efa04796b38196522728d8c8"><div class="ttname"><a href="classWindow.html#a8f6f6d07efa04796b38196522728d8c8">Window::set_last_row_output</a></div><div class="ttdeci">void set_last_row_output(int64 rno)</div><div class="ttdoc">See m_last_row_output. </div><div class="ttdef"><b>Definition:</b> window.h:1114</div></div>
<div class="ttc" id="structWindow_1_1st__ll__offset_html_a0455101459b66f3a010372ac352e1a55"><div class="ttname"><a href="structWindow_1_1st__ll__offset.html#a0455101459b66f3a010372ac352e1a55">Window::st_ll_offset::st_ll_offset</a></div><div class="ttdeci">st_ll_offset()</div><div class="ttdef"><b>Definition:</b> window.h:206</div></div>
<div class="ttc" id="my__dbug_8h_html_af5d75f213550ec27715b65d9bdfa45ec"><div class="ttname"><a href="my__dbug_8h.html#af5d75f213550ec27715b65d9bdfa45ec">DBUG_ASSERT</a></div><div class="ttdeci">#define DBUG_ASSERT(A)</div><div class="ttdef"><b>Definition:</b> my_dbug.h:199</div></div>
<div class="ttc" id="classWindow_html_add3b90334621a4011707563afc0faa27"><div class="ttname"><a href="classWindow.html#add3b90334621a4011707563afc0faa27">Window::rowno_being_visited</a></div><div class="ttdeci">int64 rowno_being_visited() const</div><div class="ttdoc">See m_rowno_being_visited. </div><div class="ttdef"><b>Definition:</b> window.h:1119</div></div>
<div class="ttc" id="classWindow_html_a56f0eeb27ae12bf2cae3f89f9da937d9"><div class="ttname"><a href="classWindow.html#a56f0eeb27ae12bf2cae3f89f9da937d9">Window::reinit_before_use</a></div><div class="ttdeci">void reinit_before_use()</div><div class="ttdoc">Reset resolution and execution state to prepare for next execution of a prepared statement. </div><div class="ttdef"><b>Definition:</b> window.h:1332</div></div>
<div class="ttc" id="structWindow_1_1Frame__buffer__position_html_aa4084c0b32ab81b3b975b3fcdb8ebffc"><div class="ttname"><a href="structWindow_1_1Frame__buffer__position.html#aa4084c0b32ab81b3b975b3fcdb8ebffc">Window::Frame_buffer_position::Frame_buffer_position</a></div><div class="ttdeci">Frame_buffer_position(uchar *position, int64 rowno)</div><div class="ttdef"><b>Definition:</b> window.h:261</div></div>
<div class="ttc" id="classWindow_html_a824e6fd952f270a08725286ed9ccec01"><div class="ttname"><a href="classWindow.html#a824e6fd952f270a08725286ed9ccec01">Window::at_partition_border</a></div><div class="ttdeci">bool at_partition_border() const</div><div class="ttdoc">Check if we have read all the rows in a partition, possibly having buffered them for further processi...</div><div class="ttdef"><b>Definition:</b> window.h:860</div></div>
<div class="ttc" id="classWindow_html_a5ca855dfc77e145638ec936fe899d995"><div class="ttname"><a href="classWindow.html#a5ca855dfc77e145638ec936fe899d995">Window::m_opt_first_row</a></div><div class="ttdeci">bool m_opt_first_row</div><div class="ttdoc">Window equires re-evaluation of the first row in optimized moving frame mode e.g. ...</div><div class="ttdef"><b>Definition:</b> window.h:172</div></div>
<div class="ttc" id="classWindow_html_a30d7f64d0e916d27a300f2e4fe4ad40c"><div class="ttname"><a href="classWindow.html#a30d7f64d0e916d27a300f2e4fe4ad40c">Window::set_row_has_fields_in_out_table</a></div><div class="ttdeci">void set_row_has_fields_in_out_table(int64 rowno)</div><div class="ttdoc">See m_row_has_fields_in_out_table. </div><div class="ttdef"><b>Definition:</b> window.h:1298</div></div>
<div class="ttc" id="classWindow_html_ab8f866028034436425a5c44bd70f0cfe"><div class="ttname"><a href="classWindow.html#ab8f866028034436425a5c44bd70f0cfe">Window::set_inverse</a></div><div class="ttdeci">Window &amp; set_inverse(bool b)</div><div class="ttdoc">See m_inverse_aggregation. </div><div class="ttdef"><b>Definition:</b> window.h:1192</div></div>
<div class="ttc" id="classWindow_html_a319c45af7cf6c66c1f93339cc460fcab"><div class="ttname"><a href="classWindow.html#a319c45af7cf6c66c1f93339cc460fcab">Window::m_needs_peerset</a></div><div class="ttdeci">bool m_needs_peerset</div><div class="ttdoc">(At least) one window function needs the peer set of the current row to evaluate the wf for the curre...</div><div class="ttdef"><b>Definition:</b> window.h:130</div></div>
<div class="ttc" id="classPT__border_html"><div class="ttname"><a href="classPT__border.html">PT_border</a></div><div class="ttdoc">Parse tree node for a single of a window extent&amp;#39;s borders, cf. </div><div class="ttdef"><b>Definition:</b> parse_tree_nodes.h:1278</div></div>
<div class="ttc" id="classWindow_html_aa7fc427740f0edee7ac124636be94d32"><div class="ttname"><a href="classWindow.html#aa7fc427740f0edee7ac124636be94d32">Window::do_inverse</a></div><div class="ttdeci">bool do_inverse() const</div><div class="ttdoc">See m_inverse_aggregation. </div><div class="ttdef"><b>Definition:</b> window.h:1187</div></div>
<div class="ttc" id="do__ctype_8cc_html_ab5ad9aa3d3e725ca44ebfa85e0b1020d"><div class="ttname"><a href="do__ctype_8cc.html#ab5ad9aa3d3e725ca44ebfa85e0b1020d">pos</a></div><div class="ttdeci">char * pos</div><div class="ttdef"><b>Definition:</b> do_ctype.cc:76</div></div>
<div class="ttc" id="sql_2handler_8h_html"><div class="ttname"><a href="sql_2handler_8h.html">handler.h</a></div></div>
<div class="ttc" id="classWindow_html_a5830feb57732ae91f99b41fd23879c27"><div class="ttname"><a href="classWindow.html#a5830feb57732ae91f99b41fd23879c27">Window::m_frame_buffer_total_rows</a></div><div class="ttdeci">int64 m_frame_buffer_total_rows</div><div class="ttdoc">Execution state: The frame buffer tmp file is not truncated for each new partition. </div><div class="ttdef"><b>Definition:</b> window.h:392</div></div>
<div class="ttc" id="classWindow_html_a97df217d2998bfc76d5d1ac0c8067e64"><div class="ttname"><a href="classWindow.html#a97df217d2998bfc76d5d1ac0c8067e64">Window::last_row_output</a></div><div class="ttdeci">int64 last_row_output() const</div><div class="ttdoc">See m_last_row_output. </div><div class="ttdef"><b>Definition:</b> window.h:1109</div></div>
<div class="ttc" id="classWindow_html_a64ea5b709b9cdcf4716fe50d1d89de04"><div class="ttname"><a href="classWindow.html#a64ea5b709b9cdcf4716fe50d1d89de04">Window::Window</a></div><div class="ttdeci">Window(PT_order_list *partition_by, PT_order_list *order_by, PT_frame *frame)</div><div class="ttdoc">Unnamed window. </div><div class="ttdef"><b>Definition:</b> window.h:657</div></div>
<div class="ttc" id="classWindow_html_ad1abdab0773d91d2963573ed5cf4edda"><div class="ttname"><a href="classWindow.html#ad1abdab0773d91d2963573ed5cf4edda">Window::Reset_level</a></div><div class="ttdeci">Reset_level</div><div class="ttdef"><b>Definition:</b> window.h:1339</div></div>
<div class="ttc" id="sql__lex_8h_html"><div class="ttname"><a href="sql__lex_8h.html">sql_lex.h</a></div></div>
<div class="ttc" id="classWindow_html_ab552c6855bb972ba76b316f2a990e41a"><div class="ttname"><a href="classWindow.html#ab552c6855bb972ba76b316f2a990e41a">Window::is_reference</a></div><div class="ttdeci">bool is_reference() const</div><div class="ttdoc">Return if this window represents an unresolved window reference seen in a window function OVER clause...</div><div class="ttdef"><b>Definition:</b> window.h:804</div></div>
<div class="ttc" id="classItem__sum_html"><div class="ttname"><a href="classItem__sum.html">Item_sum</a></div><div class="ttdoc">Class Item_sum is the base class used for special expressions that SQL calls &amp;#39;set functions&amp;#39;...</div><div class="ttdef"><b>Definition:</b> item_sum.h:394</div></div>
<div class="ttc" id="classList_html"><div class="ttname"><a href="classList.html">List&lt; Item_sum &gt;</a></div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_ad7c9e25d6decd4be80ae9d5adc2e12af"><div class="ttname"><a href="structWindow__evaluation__requirements.html#ad7c9e25d6decd4be80ae9d5adc2e12af">Window_evaluation_requirements::needs_peerset</a></div><div class="ttdeci">bool needs_peerset</div><div class="ttdoc">Set to true if we need peerset for evaluation (e.g. </div><div class="ttdef"><b>Definition:</b> window.h:1453</div></div>
<div class="ttc" id="classWindow_html_ada67710bbdbe70e79d1a5e358a650352"><div class="ttname"><a href="classWindow.html#ada67710bbdbe70e79d1a5e358a650352">Window::def_pos</a></div><div class="ttdeci">uint def_pos() const</div><div class="ttdef"><b>Definition:</b> window.h:691</div></div>
<div class="ttc" id="classCached__item_html"><div class="ttname"><a href="classCached__item.html">Cached_item</a></div><div class="ttdoc">This is used for segregating rows in groups (e.g. </div><div class="ttdef"><b>Definition:</b> item.h:6136</div></div>
<div class="ttc" id="structWindow_1_1st__ll__offset_html"><div class="ttname"><a href="structWindow_1_1st__ll__offset.html">Window::st_ll_offset</a></div><div class="ttdef"><b>Definition:</b> window.h:204</div></div>
<div class="ttc" id="classWindow_html_a8f9a2b5b1353bd02183a9705c8cdfa55"><div class="ttname"><a href="classWindow.html#a8f9a2b5b1353bd02183a9705c8cdfa55">Window::is_last_row_in_peerset_within_frame</a></div><div class="ttdeci">int64 is_last_row_in_peerset_within_frame() const</div><div class="ttdoc">See m_is_last_row_in_peerset_within_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1163</div></div>
<div class="ttc" id="my__inttypes_8h_html_a7cde0074dfd288f2d70c0e035dacb28a"><div class="ttname"><a href="my__inttypes_8h.html#a7cde0074dfd288f2d70c0e035dacb28a">int64</a></div><div class="ttdeci">int64_t int64</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:67</div></div>
<div class="ttc" id="classWindow_html_ada05c0467175f4809da720968d71b754"><div class="ttname"><a href="classWindow.html#ada05c0467175f4809da720968d71b754">Window::frame_buffer_param</a></div><div class="ttdeci">Temp_table_param * frame_buffer_param() const</div><div class="ttdoc">Getter for m_frame_buffer_param, q.v. </div><div class="ttdef"><b>Definition:</b> window.h:1065</div></div>
<div class="ttc" id="structWindow_1_1st__offset_html_a49a79e53c85b1592741e5c35e1fc9cc8"><div class="ttname"><a href="structWindow_1_1st__offset.html#a49a79e53c85b1592741e5c35e1fc9cc8">Window::st_offset::m_from_last</a></div><div class="ttdeci">bool m_from_last</div><div class="ttdef"><b>Definition:</b> window.h:195</div></div>
<div class="ttc" id="classWindow_html_a8ef7fcb16a29b9f7437f80d34ef728f4"><div class="ttname"><a href="classWindow.html#a8ef7fcb16a29b9f7437f80d34ef728f4">Window::set_ancestor</a></div><div class="ttdeci">void set_ancestor(Window *a)</div><div class="ttdoc">After resolving an existing window name reference in a window definition, we set the ancestor pointer...</div><div class="ttdef"><b>Definition:</b> window.h:684</div></div>
<div class="ttc" id="structWindow_1_1st__offset_html_a9f1810540f9014e069d8c859dcd2ee9b"><div class="ttname"><a href="structWindow_1_1st__offset.html#a9f1810540f9014e069d8c859dcd2ee9b">Window::st_offset::m_rowno</a></div><div class="ttdeci">int64 m_rowno</div><div class="ttdef"><b>Definition:</b> window.h:194</div></div>
<div class="ttc" id="classWindow_html_a4ac5c168dd9a8c6a40a66a30583fca2c"><div class="ttname"><a href="classWindow.html#a4ac5c168dd9a8c6a40a66a30583fca2c">Window::rowno_in_frame</a></div><div class="ttdeci">int64 rowno_in_frame() const</div><div class="ttdoc">Return the size of the frame in number of rows. </div><div class="ttdef"><b>Definition:</b> window.h:1228</div></div>
<div class="ttc" id="classWindow_html_a22890eaf1766c609c6798a304066d87b"><div class="ttname"><a href="classWindow.html#a22890eaf1766c609c6798a304066d87b">Window::m_tmp_pos</a></div><div class="ttdeci">Frame_buffer_position m_tmp_pos</div><div class="ttdoc">Sometimes we read one row too many, so that the saved position will be too far out because we subsequ...</div><div class="ttdef"><b>Definition:</b> window.h:308</div></div>
<div class="ttc" id="classWindow_html_a52f671af8e7c5531b73672865c39b4f5"><div class="ttname"><a href="classWindow.html#a52f671af8e7c5531b73672865c39b4f5">Window::Window</a></div><div class="ttdeci">Window(Item_string *name)</div><div class="ttdoc">Reference to a named window. </div><div class="ttdef"><b>Definition:</b> window.h:650</div></div>
<div class="ttc" id="classWindow_html_aaf2f33599ecc0b594d97a6053a8133cc"><div class="ttname"><a href="classWindow.html#aaf2f33599ecc0b594d97a6053a8133cc">Window::m_special_rows_cache_max_length</a></div><div class="ttdeci">size_t m_special_rows_cache_max_length</div><div class="ttdoc">Maximum allocated size in m_special_rows_cache. </div><div class="ttdef"><b>Definition:</b> window.h:420</div></div>
<div class="ttc" id="classWindow_html_af1289c052b4481e33dfad38f02ec30c1"><div class="ttname"><a href="classWindow.html#af1289c052b4481e33dfad38f02ec30c1">Window::m_select</a></div><div class="ttdeci">SELECT_LEX * m_select</div><div class="ttdoc">The SELECT the window is on. </div><div class="ttdef"><b>Definition:</b> window.h:101</div></div>
<div class="ttc" id="classWindow_html_a8a0fc7fc0abfbad9c8aaa1492240c54b"><div class="ttname"><a href="classWindow.html#a8a0fc7fc0abfbad9c8aaa1492240c54b">Window::m_rowno_in_frame</a></div><div class="ttdeci">int64 m_rowno_in_frame</div><div class="ttdoc">Execution state: the row number of the current row within a frame, cf. </div><div class="ttdef"><b>Definition:</b> window.h:475</div></div>
<div class="ttc" id="classWindow_html_afb8fc05e57c149b0c22b72b414e46608"><div class="ttname"><a href="classWindow.html#afb8fc05e57c149b0c22b72b414e46608">Window::set_do_copy_null</a></div><div class="ttdeci">void set_do_copy_null(bool b)</div><div class="ttdoc">See m_do_copy_null. </div><div class="ttdef"><b>Definition:</b> window.h:1182</div></div>
<div class="ttc" id="classWindow_html_a5bb44dc670100b86590b3fdd3f8bc07e"><div class="ttname"><a href="classWindow.html#a5bb44dc670100b86590b3fdd3f8bc07e">Window::m_do_copy_null</a></div><div class="ttdeci">bool m_do_copy_null</div><div class="ttdoc">Execution state: make frame wf produce a NULL (or 0 depending, e.g. </div><div class="ttdef"><b>Definition:</b> window.h:576</div></div>
<div class="ttc" id="sql__list_8h_html"><div class="ttname"><a href="sql__list_8h.html">sql_list.h</a></div></div>
<div class="ttc" id="classWindow_html_a01ab8ce122fbc31b8227b65398e6022b"><div class="ttname"><a href="classWindow.html#a01ab8ce122fbc31b8227b65398e6022b">Window::effective_partition_by</a></div><div class="ttdeci">const PT_order_list * effective_partition_by() const</div><div class="ttdoc">Get partition, if any. </div><div class="ttdef"><b>Definition:</b> window.h:730</div></div>
<div class="ttc" id="classWindow_html_a823ff8c353ee4278ec9d4f3b4e03dcb2"><div class="ttname"><a href="classWindow.html#a823ff8c353ee4278ec9d4f3b4e03dcb2">Window::set_rowno_in_frame</a></div><div class="ttdeci">Window &amp; set_rowno_in_frame(int64 rowno)</div><div class="ttdoc">See m_rowno_in_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1233</div></div>
<div class="ttc" id="classWindow_html_a049216e091cc1cfcf7be86efbcbe9509"><div class="ttname"><a href="classWindow.html#a049216e091cc1cfcf7be86efbcbe9509">Window::m_row_optimizable</a></div><div class="ttdeci">bool m_row_optimizable</div><div class="ttdoc">The functions are optimizable with ROW unit. </div><div class="ttdef"><b>Definition:</b> window.h:151</div></div>
<div class="ttc" id="classItem_html"><div class="ttname"><a href="classItem.html">Item</a></div><div class="ttdef"><b>Definition:</b> item.h:775</div></div>
<div class="ttc" id="uca-dump_8cc_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="uca-dump_8cc.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> uca-dump.cc:29</div></div>
<div class="ttc" id="classWindow_html_a400fc74c97d29d7e3a72f1dc3081bfc0"><div class="ttname"><a href="classWindow.html#a400fc74c97d29d7e3a72f1dc3081bfc0">Window::aggregates_primed</a></div><div class="ttdeci">bool aggregates_primed() const</div><div class="ttdoc">See m_aggregates_primed. </div><div class="ttdef"><b>Definition:</b> window.h:1200</div></div>
<div class="ttc" id="classWindow_html_a712c4eb7d7170bffaeb5a8d3ebc19274"><div class="ttname"><a href="classWindow.html#a712c4eb7d7170bffaeb5a8d3ebc19274">Window::set_name</a></div><div class="ttdeci">void set_name(Item_string *name)</div><div class="ttdoc">We have a named window. </div><div class="ttdef"><b>Definition:</b> window.h:678</div></div>
<div class="ttc" id="sslopt-case_8h_html_ae00b773898ac853cec38cdf7a08b8e89"><div class="ttname"><a href="sslopt-case_8h.html#ae00b773898ac853cec38cdf7a08b8e89">name</a></div><div class="ttdeci">case opt name</div><div class="ttdef"><b>Definition:</b> sslopt-case.h:32</div></div>
<div class="ttc" id="classWindow_html_ac9b1846e6e0a24207674c5eedfd34561"><div class="ttname"><a href="classWindow.html#ac9b1846e6e0a24207674c5eedfd34561">Window::is_last</a></div><div class="ttdeci">bool is_last() const</div><div class="ttdoc">See m_last. </div><div class="ttdef"><b>Definition:</b> window.h:1040</div></div>
<div class="ttc" id="config__static_8h_html_a41f9c5fb8b08eb5dc3edce4dcb37fee7"><div class="ttname"><a href="config__static_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></div><div class="ttdeci">#define true</div><div class="ttdef"><b>Definition:</b> config_static.h:44</div></div>
<div class="ttc" id="classWindow_html_a502a019632199a5527a57264d2c38a77"><div class="ttname"><a href="classWindow.html#a502a019632199a5527a57264d2c38a77">Window::frame_buffer_total_rows</a></div><div class="ttdeci">int64 frame_buffer_total_rows() const</div><div class="ttdoc">See m_frame_buffer_total_rows. </div><div class="ttdef"><b>Definition:</b> window.h:1272</div></div>
<div class="ttc" id="window__lex_8h_html_aacf6e2c5ab15b74f44e72c7221c71f8baa60594f2a674a4c740f0839f2f3efe27"><div class="ttname"><a href="window__lex_8h.html#aacf6e2c5ab15b74f44e72c7221c71f8baa60594f2a674a4c740f0839f2f3efe27">WBT_VALUE_FOLLOWING</a></div><div class="ttdef"><b>Definition:</b> window_lex.h:39</div></div>
<div class="ttc" id="classMem__root__array__YY_html_ae9d77f670da27615efa7b4baefd0e20e"><div class="ttname"><a href="classMem__root__array__YY.html#ae9d77f670da27615efa7b4baefd0e20e">Mem_root_array_YY::init_empty_const</a></div><div class="ttdeci">void init_empty_const()</div><div class="ttdoc">Initialize empty array that we aren&amp;#39;t going to grow. </div><div class="ttdef"><b>Definition:</b> mem_root_array.h:81</div></div>
<div class="ttc" id="classWindow_html_a1e13895b07ee0d799f470b44992a4f14"><div class="ttname"><a href="classWindow.html#a1e13895b07ee0d799f470b44992a4f14">Window::m_first_rowno_in_range_frame</a></div><div class="ttdeci">int64 m_first_rowno_in_range_frame</div><div class="ttdoc">Execution state: the row number of the first row in a frame when evaluating RANGE based frame bounds...</div><div class="ttdef"><b>Definition:</b> window.h:525</div></div>
<div class="ttc" id="classWindow_html_a5cfb1fcff13e5b844c1ea5ba39a5d6d0"><div class="ttname"><a href="classWindow.html#a5cfb1fcff13e5b844c1ea5ba39a5d6d0">Window::m_inverse_aggregation</a></div><div class="ttdeci">bool m_inverse_aggregation</div><div class="ttdoc">Execution state: do inverse, e.g. </div><div class="ttdef"><b>Definition:</b> window.h:583</div></div>
<div class="ttc" id="classWindow_html_a5df31eacc380806c96b30395d2de25f9"><div class="ttname"><a href="classWindow.html#a5df31eacc380806c96b30395d2de25f9">Window::m_range_optimizable</a></div><div class="ttdeci">bool m_range_optimizable</div><div class="ttdoc">The functions are optimizable with RANGE unit. </div><div class="ttdef"><b>Definition:</b> window.h:159</div></div>
<div class="ttc" id="classSQL__I__List_html_a479a62a37484f593bf24cf93d3cb9389"><div class="ttname"><a href="classSQL__I__List.html#a479a62a37484f593bf24cf93d3cb9389">SQL_I_List::elements</a></div><div class="ttdeci">uint elements</div><div class="ttdef"><b>Definition:</b> sql_list.h:47</div></div>
<div class="ttc" id="classWindow_html_a27426a6440302a91461ab00cef8a5899"><div class="ttname"><a href="classWindow.html#a27426a6440302a91461ab00cef8a5899">Window::after_frame</a></div><div class="ttdeci">bool after_frame()</div><div class="ttdef"><b>Definition:</b> window.h:852</div></div>
<div class="ttc" id="classSELECT__LEX_html_af760949c139ac7733abaf22491f71273"><div class="ttname"><a href="classSELECT__LEX.html#af760949c139ac7733abaf22491f71273">SELECT_LEX::table_list</a></div><div class="ttdeci">SQL_I_List&lt; TABLE_LIST &gt; table_list</div><div class="ttdoc">List of tables in FROM clause - use TABLE_LIST::next_local to traverse. </div><div class="ttdef"><b>Definition:</b> sql_lex.h:1845</div></div>
<div class="ttc" id="classWindow_html_ab8129cbc0ab6ad7fcec814dd09f7555a"><div class="ttname"><a href="classWindow.html#ab8129cbc0ab6ad7fcec814dd09f7555a">Window::m_last_rowno_in_peerset</a></div><div class="ttdeci">int64 m_last_rowno_in_peerset</div><div class="ttdoc">Execution state: used iff m_needs_peerset. </div><div class="ttdef"><b>Definition:</b> window.h:433</div></div>
<div class="ttc" id="structWindow_1_1st__lead__lag_html_af873e86d630b947a864a04050173baf6"><div class="ttname"><a href="structWindow_1_1st__lead__lag.html#af873e86d630b947a864a04050173baf6">Window::st_lead_lag::m_offsets</a></div><div class="ttdeci">Mem_root_array_YY&lt; st_ll_offset &gt; m_offsets</div><div class="ttdoc">sorted set of LEAD/LAG offsets </div><div class="ttdef"><b>Definition:</b> window.h:221</div></div>
<div class="ttc" id="classWindow_html_a75a8e25446490ffa084534e03596d9a0"><div class="ttname"><a href="classWindow.html#a75a8e25446490ffa084534e03596d9a0">Window::m_special_rows_cache</a></div><div class="ttdeci">uchar * m_special_rows_cache</div><div class="ttdoc">Holds a fixed number of copies of special rows; each copy can use up to m_special_rows_cache_max_leng...</div><div class="ttdef"><b>Definition:</b> window.h:416</div></div>
<div class="ttc" id="classWindow_html_aed86c074d30075ddabe9decb5a2372f3"><div class="ttname"><a href="classWindow.html#aed86c074d30075ddabe9decb5a2372f3">Window::set_aggregates_primed</a></div><div class="ttdeci">void set_aggregates_primed(bool b)</div><div class="ttdoc">See m_aggregates_primed. </div><div class="ttdef"><b>Definition:</b> window.h:1205</div></div>
<div class="ttc" id="classWindow_html_a8c7c66af3fe356c0900189b0c1567dfe"><div class="ttname"><a href="classWindow.html#a8c7c66af3fe356c0900189b0c1567dfe">Window::Window</a></div><div class="ttdeci">Window(PT_order_list *partition_by, PT_order_list *order_by, PT_frame *frame, Item_string *inherit)</div><div class="ttdoc">Unnamed window based on a named window. </div><div class="ttdef"><b>Definition:</b> window.h:664</div></div>
<div class="ttc" id="classWindow_html_aebba3282a95d28b241853110f07520aa"><div class="ttname"><a href="classWindow.html#aebba3282a95d28b241853110f07520aa">Window::frame_buffer_partition_offset</a></div><div class="ttdeci">int64 frame_buffer_partition_offset() const</div><div class="ttdoc">See m_frame_buffer_partition_offset. </div><div class="ttdef"><b>Definition:</b> window.h:1284</div></div>
<div class="ttc" id="classWindow_html_a3b6b5bce2537a290d061f6ed540bbce8"><div class="ttname"><a href="classWindow.html#a3b6b5bce2537a290d061f6ed540bbce8">Window::m_def_pos</a></div><div class="ttdeci">uint m_def_pos</div><div class="ttdoc">Position of definition in query&amp;#39;s text, 1 for leftmost. </div><div class="ttdef"><b>Definition:</b> window.h:112</div></div>
<div class="ttc" id="classWindow_html_ac5e70f4dfb65c24741c6c886f32110ab"><div class="ttname"><a href="classWindow.html#ac5e70f4dfb65c24741c6c886f32110ab">Window::optimizable_row_aggregates</a></div><div class="ttdeci">bool optimizable_row_aggregates() const</div><div class="ttdoc">Return true if the set of window functions are all ROW unit optimizable. </div><div class="ttdef"><b>Definition:</b> window.h:1013</div></div>
<div class="ttc" id="classWindow_html_a5b8ed36e63b1d764d6b2c198061bf765"><div class="ttname"><a href="classWindow.html#a5b8ed36e63b1d764d6b2c198061bf765">Window::opt_lead_lag</a></div><div class="ttdeci">const st_lead_lag &amp; opt_lead_lag() const</div><div class="ttdoc">See m_opt_lead_lag. </div><div class="ttdef"><b>Definition:</b> window.h:1060</div></div>
<div class="ttc" id="classWindow_html_afcdb975ad871c18bf2252b890eaf0d53"><div class="ttname"><a href="classWindow.html#afcdb975ad871c18bf2252b890eaf0d53">Window::m_opt_last_row</a></div><div class="ttdeci">bool m_opt_last_row</div><div class="ttdoc">Window requires re-evaluation of the last row in optimized moving frame mode e.g. ...</div><div class="ttdef"><b>Definition:</b> window.h:178</div></div>
<div class="ttc" id="structWindow_1_1st__nth_html"><div class="ttname"><a href="structWindow_1_1st__nth.html">Window::st_nth</a></div><div class="ttdef"><b>Definition:</b> window.h:214</div></div>
<div class="ttc" id="classWindow_html_a37b5169f16d3479c9dd078a83adab157"><div class="ttname"><a href="classWindow.html#a37b5169f16d3479c9dd078a83adab157">Window::set_first_rowno_in_range_frame</a></div><div class="ttdeci">void set_first_rowno_in_range_frame(int64 rowno)</div><div class="ttdoc">See m_first_rowno_in_range_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1251</div></div>
<div class="ttc" id="structWindow_1_1Frame__buffer__position_html"><div class="ttname"><a href="structWindow_1_1Frame__buffer__position.html">Window::Frame_buffer_position</a></div><div class="ttdoc">Holds information about a position in the buffer frame as stored in a temporary file (cf...</div><div class="ttdef"><b>Definition:</b> window.h:256</div></div>
<div class="ttc" id="classWindow_html_a4461190125463218b323ec001845f169"><div class="ttname"><a href="classWindow.html#a4461190125463218b323ec001845f169">Window::m_is_last_row_in_peerset_within_frame</a></div><div class="ttdeci">int64 m_is_last_row_in_peerset_within_frame</div><div class="ttdoc">Execution state: used iff m_needs_last_peer_in_frame. </div><div class="ttdef"><b>Definition:</b> window.h:439</div></div>
<div class="ttc" id="window_8h_html_aa1a426efe3df5da9b1e0a0f7f0e99a7fa87458dc7d4fd697bd28ad5e371486d54"><div class="ttname"><a href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa87458dc7d4fd697bd28ad5e371486d54">Window_retrieve_cached_row_reason::FIRST_IN_FRAME</a></div></div>
<div class="ttc" id="classWindow_html_a38996f07642a040a1b70d791d6bca516"><div class="ttname"><a href="classWindow.html#a38996f07642a040a1b70d791d6bca516">Window::m_ancestor</a></div><div class="ttdeci">const Window * m_ancestor</div><div class="ttdoc">resolved from existing window name </div><div class="ttdef"><b>Definition:</b> window.h:233</div></div>
<div class="ttc" id="classWindow_html_a60f03eb20e00b2bad5edb160f0c94e2c"><div class="ttname"><a href="classWindow.html#a60f03eb20e00b2bad5edb160f0c94e2c">Window::m_static_aggregates</a></div><div class="ttdeci">bool m_static_aggregates</div><div class="ttdoc">The aggregates (SUM, etc) can be evaluated once for a partition, since it is static, i.e. </div><div class="ttdef"><b>Definition:</b> window.h:166</div></div>
<div class="ttc" id="classWindow_html_a832a813a83de44449ea5e9d627a571dd"><div class="ttname"><a href="classWindow.html#a832a813a83de44449ea5e9d627a571dd">Window::m_last</a></div><div class="ttdeci">bool m_last</div><div class="ttdoc">The last window to be evaluated at execution time. </div><div class="ttdef"><b>Definition:</b> window.h:190</div></div>
<div class="ttc" id="classWindow_html_ac95a62be57b6562776d29cd5dd333c58"><div class="ttname"><a href="classWindow.html#ac95a62be57b6562776d29cd5dd333c58">Window::m_needs_frame_buffering</a></div><div class="ttdeci">bool m_needs_frame_buffering</div><div class="ttdoc">(At least) one window function needs to buffer frame rows for evaluation i.e. </div><div class="ttdef"><b>Definition:</b> window.h:124</div></div>
<div class="ttc" id="classWindow_html_ab3c27b87499dd88acc0f95db4d1d02f4"><div class="ttname"><a href="classWindow.html#ab3c27b87499dd88acc0f95db4d1d02f4">Window::do_copy_null</a></div><div class="ttdeci">bool do_copy_null() const</div><div class="ttdoc">See m_do_copy_null. </div><div class="ttdef"><b>Definition:</b> window.h:1177</div></div>
<div class="ttc" id="classWindow_html_a495a78db188bf6ba6e5aa43499bcd0e6"><div class="ttname"><a href="classWindow.html#a495a78db188bf6ba6e5aa43499bcd0e6">Window::m_order_by</a></div><div class="ttdeci">PT_order_list *const m_order_by</div><div class="ttdoc">&lt;window order clause&gt; </div><div class="ttdef"><b>Definition:</b> window.h:103</div></div>
<div class="ttc" id="classWindow_html_a076d4cf1c54d6c83f31977e22ff61afc"><div class="ttname"><a href="classWindow.html#a076d4cf1c54d6c83f31977e22ff61afc">Window::last_rowno_in_range_frame</a></div><div class="ttdeci">int64 last_rowno_in_range_frame() const</div><div class="ttdoc">See m_last_rowno_in_range_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1139</div></div>
<div class="ttc" id="my__inttypes_8h_html_a34c80736531fb7d0b1988f6b174bac42"><div class="ttname"><a href="my__inttypes_8h.html#a34c80736531fb7d0b1988f6b174bac42">INT_MIN64</a></div><div class="ttdeci">#define INT_MIN64</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:74</div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_a084c1e6de377b9a281568faa40442d85"><div class="ttname"><a href="structWindow__evaluation__requirements.html#a084c1e6de377b9a281568faa40442d85">Window_evaluation_requirements::needs_buffer</a></div><div class="ttdeci">bool needs_buffer</div><div class="ttdoc">Set to true if window function requires row buffering. </div><div class="ttdef"><b>Definition:</b> window.h:1449</div></div>
<div class="ttc" id="structWindow_1_1Frame__buffer__position_html_a3eb8d6a03c0e892ffa82e3024e6f0340"><div class="ttname"><a href="structWindow_1_1Frame__buffer__position.html#a3eb8d6a03c0e892ffa82e3024e6f0340">Window::Frame_buffer_position::m_rowno</a></div><div class="ttdeci">int64 m_rowno</div><div class="ttdef"><b>Definition:</b> window.h:260</div></div>
<div class="ttc" id="my__dbug_8h_html"><div class="ttname"><a href="my__dbug_8h.html">my_dbug.h</a></div></div>
<div class="ttc" id="classWindow_html_afb76d6cd2505424786356826381a2d4d"><div class="ttname"><a href="classWindow.html#afb76d6cd2505424786356826381a2d4d">Window::m_functions</a></div><div class="ttdeci">List&lt; Item_sum &gt; m_functions</div><div class="ttdoc">window functions based on &amp;#39;this&amp;#39; </div><div class="ttdef"><b>Definition:</b> window.h:234</div></div>
<div class="ttc" id="classWindow_html_a6cef719ee622b79be8ef4724faf528cb"><div class="ttname"><a href="classWindow.html#a6cef719ee622b79be8ef4724faf528cb">Window::is_last_row_in_frame</a></div><div class="ttdeci">bool is_last_row_in_frame() const</div><div class="ttdoc">See m_is_last_row_in_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1210</div></div>
<div class="ttc" id="classWindow_html_a6611c566d596c0aaffd9f01fdfae38c6"><div class="ttname"><a href="classWindow.html#a6611c566d596c0aaffd9f01fdfae38c6">Window::set_needs_restore_input_row</a></div><div class="ttdeci">void set_needs_restore_input_row(bool b)</div><div class="ttdoc">See m_needs_restore_input_row. </div><div class="ttdef"><b>Definition:</b> window.h:1045</div></div>
<div class="ttc" id="structWindow_1_1st__offset_html_a2fa0c6e5b43b7c3aedeb158d6afaaa43"><div class="ttname"><a href="structWindow_1_1st__offset.html#a2fa0c6e5b43b7c3aedeb158d6afaaa43">Window::st_offset::st_offset</a></div><div class="ttdeci">st_offset()</div><div class="ttdef"><b>Definition:</b> window.h:196</div></div>
<div class="ttc" id="classWindow_html_abc1da9fee9ddb97d7a5520e86bb72452"><div class="ttname"><a href="classWindow.html#abc1da9fee9ddb97d7a5520e86bb72452">Window::reset_round</a></div><div class="ttdeci">void reset_round()</div><div class="ttdoc">Reset execution state for next call to JOIN::exec, cf. </div><div class="ttdef"><b>Definition:</b> window.h:1326</div></div>
<div class="ttc" id="classPT__frame_html"><div class="ttname"><a href="classPT__frame.html">PT_frame</a></div><div class="ttdoc">Parse tree node for a window&amp;#39;s frame, cf. </div><div class="ttdef"><b>Definition:</b> parse_tree_nodes.h:1357</div></div>
<div class="ttc" id="my__alloc_8h_html_a28315dc6f65bdd04a2c84b4aca4ca248"><div class="ttname"><a href="my__alloc_8h.html#a28315dc6f65bdd04a2c84b4aca4ca248">destroy</a></div><div class="ttdeci">void destroy(T *ptr)</div><div class="ttdef"><b>Definition:</b> my_alloc.h:382</div></div>
<div class="ttc" id="classWindow_html_a235f5d841e5191626d716038a6d2713b"><div class="ttname"><a href="classWindow.html#a235f5d841e5191626d716038a6d2713b">Window::static_aggregates</a></div><div class="ttdeci">bool static_aggregates() const</div><div class="ttdoc">Return true if the aggregates are static, i.e. </div><div class="ttdef"><b>Definition:</b> window.h:1025</div></div>
<div class="ttc" id="window_8h_html_aa1a426efe3df5da9b1e0a0f7f0e99a7fabcf8f2fc3b6be3cb7cf2e8a8d52f613c"><div class="ttname"><a href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fabcf8f2fc3b6be3cb7cf2e8a8d52f613c">Window_retrieve_cached_row_reason::FIRST_IN_PARTITION</a></div></div>
<div class="ttc" id="classWindow_html_a91f7ea6b5cd627fb8ed3f42e35e85659"><div class="ttname"><a href="classWindow.html#a91f7ea6b5cd627fb8ed3f42e35e85659">Window::needs_sorting</a></div><div class="ttdeci">bool needs_sorting() const</div><div class="ttdoc">Determine if the window had either a partition clause (inclusive) or a ORDER BY clause, either defined by itself or inherited from another window. </div><div class="ttdef"><b>Definition:</b> window.h:981</div></div>
<div class="ttc" id="classWindow_html_ababaeb649cb3b579e216bb8e18145b91"><div class="ttname"><a href="classWindow.html#ababaeb649cb3b579e216bb8e18145b91">Window::needs_card</a></div><div class="ttdeci">bool needs_card() const</div><div class="ttdoc">If we need to read the entire partition before we can evaluate some window function(s) on this window...</div><div class="ttdef"><b>Definition:</b> window.h:1007</div></div>
<div class="ttc" id="classWindow_html_a21602ae681064bae23ee0eefa3801206"><div class="ttname"><a href="classWindow.html#a21602ae681064bae23ee0eefa3801206">Window::m_name</a></div><div class="ttdeci">Item_string * m_name</div><div class="ttdoc">&lt;window name&gt; </div><div class="ttdef"><b>Definition:</b> window.h:106</div></div>
<div class="ttc" id="classWindow_html_afca36dae2db6f95e3529d27081c930d2"><div class="ttname"><a href="classWindow.html#afca36dae2db6f95e3529d27081c930d2">Window::m_partition_by</a></div><div class="ttdeci">PT_order_list *const m_partition_by</div><div class="ttdoc">&lt;window partition clause&gt; </div><div class="ttdef"><b>Definition:</b> window.h:102</div></div>
<div class="ttc" id="classWindow_html_a4b2aa17761fdd6bb0b06a78a46ecfe9e"><div class="ttname"><a href="classWindow.html#a4b2aa17761fdd6bb0b06a78a46ecfe9e">Window::set_frame_buffer_param</a></div><div class="ttdeci">void set_frame_buffer_param(Temp_table_param *p)</div><div class="ttdoc">Setter for m_frame_buffer_param, q.v. </div><div class="ttdef"><b>Definition:</b> window.h:1070</div></div>
<div class="ttc" id="classWindow_html_af0f11b0e36b054f484466ac3f022d689"><div class="ttname"><a href="classWindow.html#af0f11b0e36b054f484466ac3f022d689">Window::m_opt_nth_row</a></div><div class="ttdeci">st_nth m_opt_nth_row</div><div class="ttdoc">Window requires re-evaluation of the Nth row in optimized moving frame mode e.g. </div><div class="ttdef"><b>Definition:</b> window.h:229</div></div>
<div class="ttc" id="classWindow_html_a4969fceeeb0328dc5d3cecdf3c76ddaa"><div class="ttname"><a href="classWindow.html#a4969fceeeb0328dc5d3cecdf3c76ddaa">Window::m_order_by_items</a></div><div class="ttdeci">List&lt; Cached_item &gt; m_order_by_items</div><div class="ttdoc">items for the ORDER BY exprs. </div><div class="ttdef"><b>Definition:</b> window.h:236</div></div>
<div class="ttc" id="classWindow_html_a794fb95b5dbce1596be075d8898d58be"><div class="ttname"><a href="classWindow.html#a794fb95b5dbce1596be075d8898d58be">Window::m_rowno_being_visited</a></div><div class="ttdeci">int64 m_rowno_being_visited</div><div class="ttdoc">Execution state: The number of the row being visited for its contribution to a window function...</div><div class="ttdef"><b>Definition:</b> window.h:469</div></div>
<div class="ttc" id="classWindow_html_acda722c65501ed833321f9cd7d16a41e"><div class="ttname"><a href="classWindow.html#acda722c65501ed833321f9cd7d16a41e">Window::needs_peerset</a></div><div class="ttdeci">bool needs_peerset() const</div><div class="ttdoc">If we cannot compute one of window functions without looking at all rows in the peerset of the curren...</div><div class="ttdef"><b>Definition:</b> window.h:994</div></div>
<div class="ttc" id="structWindow_1_1st__ll__offset_html_ac1d765c79f3f1608c69843d531a3587e"><div class="ttname"><a href="structWindow_1_1st__ll__offset.html#ac1d765c79f3f1608c69843d531a3587e">Window::st_ll_offset::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const st_ll_offset &amp;a) const</div><div class="ttdoc">Used for sorting offsets in ascending order for faster traversal of frame buffer tmp file...</div><div class="ttdef"><b>Definition:</b> window.h:211</div></div>
<div class="ttc" id="namespacefile_html"><div class="ttname"><a href="namespacefile.html">file</a></div><div class="ttdef"><b>Definition:</b> os0file.h:85</div></div>
<div class="ttc" id="ctype-mb_8cc_html_a6bc6b007533335efe02bafff799ec64c"><div class="ttname"><a href="ctype-mb_8cc.html#a6bc6b007533335efe02bafff799ec64c">p</a></div><div class="ttdeci">const char * p</div><div class="ttdef"><b>Definition:</b> ctype-mb.cc:1235</div></div>
<div class="ttc" id="persisted__variable_8cc_html_a211d620ef86d6a09b1d29b51b6e44f06"><div class="ttname"><a href="persisted__variable_8cc.html#a211d620ef86d6a09b1d29b51b6e44f06">value</a></div><div class="ttdeci">const string value(&quot;\alue\)</div></div>
<div class="ttc" id="classWindow_html_a25304b705102e40e3e7035ab26ef4281"><div class="ttname"><a href="classWindow.html#a25304b705102e40e3e7035ab26ef4281">Window::first_rowno_in_range_frame</a></div><div class="ttdeci">int64 first_rowno_in_range_frame() const</div><div class="ttdoc">See m_first_rowno_in_range_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1258</div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_a8e12f442202d317a3739f0bc8bef37f0"><div class="ttname"><a href="structWindow__evaluation__requirements.html#a8e12f442202d317a3739f0bc8bef37f0">Window_evaluation_requirements::opt_last_row</a></div><div class="ttdeci">bool opt_last_row</div><div class="ttdoc">Set to true if we need LAST_VALUE or optimized MIN/MAX. </div><div class="ttdef"><b>Definition:</b> window.h:1466</div></div>
<div class="ttc" id="window_8h_html_aa1a426efe3df5da9b1e0a0f7f0e99a7fa7b99c3e233301e750ca335b65361858b"><div class="ttname"><a href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa7b99c3e233301e750ca335b65361858b">Window_retrieve_cached_row_reason::LAST_IN_FRAME</a></div></div>
<div class="ttc" id="sql_2table_8h_html"><div class="ttname"><a href="sql_2table_8h.html">table.h</a></div></div>
<div class="ttc" id="classWindow_html_ad1abdab0773d91d2963573ed5cf4eddaa24fdeab51a63fc7f44000d9cace935c3"><div class="ttname"><a href="classWindow.html#ad1abdab0773d91d2963573ed5cf4eddaa24fdeab51a63fc7f44000d9cace935c3">Window::RL_ROUND</a></div><div class="ttdef"><b>Definition:</b> window.h:1339</div></div>
<div class="ttc" id="structTABLE__LIST_html"><div class="ttname"><a href="structTABLE__LIST.html">TABLE_LIST</a></div><div class="ttdef"><b>Definition:</b> table.h:2540</div></div>
<div class="ttc" id="classWindow_html_a100dcb0cd123248943b0877b1958e9d3"><div class="ttname"><a href="classWindow.html#a100dcb0cd123248943b0877b1958e9d3">Window::m_rowno_in_partition</a></div><div class="ttdeci">int64 m_rowno_in_partition</div><div class="ttdoc">Execution state: The row number of the current row being readied for output within the partition...</div><div class="ttdef"><b>Definition:</b> window.h:481</div></div>
<div class="ttc" id="classWindow_html_a148f15c47457c9b5ceb14ecedeeb3ef1"><div class="ttname"><a href="classWindow.html#a148f15c47457c9b5ceb14ecedeeb3ef1">Window::set_last_rowno_in_range_frame</a></div><div class="ttdeci">void set_last_rowno_in_range_frame(uint64 rno)</div><div class="ttdoc">See m_last_rowno_in_range_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1146</div></div>
<div class="ttc" id="classWindow_html_ac3b4b07aed9cb072e570b7162f204879"><div class="ttname"><a href="classWindow.html#ac3b4b07aed9cb072e570b7162f204879">Window::last_rowno_in_peerset</a></div><div class="ttdeci">int64 last_rowno_in_peerset() const</div><div class="ttdoc">See m_last_rowno_in_peerset. </div><div class="ttdef"><b>Definition:</b> window.h:1153</div></div>
<div class="ttc" id="classWindow_html_af4f046772a208b624fc57a77f08ecf5b"><div class="ttname"><a href="classWindow.html#af4f046772a208b624fc57a77f08ecf5b">Window::needs_restore_input_row</a></div><div class="ttdeci">bool needs_restore_input_row() const</div><div class="ttdoc">See m_needs_restore_input_row. </div><div class="ttdef"><b>Definition:</b> window.h:1050</div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_a6a5c9c550bc0e5be27add05fc712f44a"><div class="ttname"><a href="structWindow__evaluation__requirements.html#a6a5c9c550bc0e5be27add05fc712f44a">Window_evaluation_requirements::range_optimizable</a></div><div class="ttdeci">bool range_optimizable</div><div class="ttdoc">Similar to row_optimizable but for RANGE frame bounds unit. </div><div class="ttdef"><b>Definition:</b> window.h:1480</div></div>
<div class="ttc" id="classWindow_html_a8b039f74e30aaecabeb02800198edcaa"><div class="ttname"><a href="classWindow.html#a8b039f74e30aaecabeb02800198edcaa">Window::m_aggregates_primed</a></div><div class="ttdeci">bool m_aggregates_primed</div><div class="ttdoc">Execution state: for optimizable aggregates, cf. </div><div class="ttdef"><b>Definition:</b> window.h:489</div></div>
<div class="ttc" id="classWindow_html_a6860d51c1f431ba49b2b6616b100e6a4"><div class="ttname"><a href="classWindow.html#a6860d51c1f431ba49b2b6616b100e6a4">Window::m_needs_restore_input_row</a></div><div class="ttdeci">bool m_needs_restore_input_row</div><div class="ttdoc">Can be true if first window after a join: we may need to restore the input record after buffered wind...</div><div class="ttdef"><b>Definition:</b> window.h:185</div></div>
<div class="ttc" id="classWindow_html_ad2f40dea3086ce2e97bacb03d4317877"><div class="ttname"><a href="classWindow.html#ad2f40dea3086ce2e97bacb03d4317877">Window::m_last_row_output</a></div><div class="ttdeci">int64 m_last_row_output</div><div class="ttdoc">Execution state: The number, in the current partition, of the last output row, i.e. </div><div class="ttdef"><b>Definition:</b> window.h:460</div></div>
<div class="ttc" id="classWindow_html_a2b1cb972563a9134fef4be429c2836e1"><div class="ttname"><a href="classWindow.html#a2b1cb972563a9134fef4be429c2836e1">Window::m_frame_buffer_partition_offset</a></div><div class="ttdeci">int64 m_frame_buffer_partition_offset</div><div class="ttdoc">Execution state: Snapshot of m_frame_buffer_total_rows when we start a new partition, i.e. </div><div class="ttdef"><b>Definition:</b> window.h:399</div></div>
<div class="ttc" id="classWindow_html_a3ca64477e64b5415037c60fa1ba2e0f3"><div class="ttname"><a href="classWindow.html#a3ca64477e64b5415037c60fa1ba2e0f3">Window::m_frame_buffer_param</a></div><div class="ttdeci">Temp_table_param * m_frame_buffer_param</div><div class="ttdoc">Execution state: used iff m_needs_frame_buffering. </div><div class="ttdef"><b>Definition:</b> window.h:371</div></div>
<div class="ttc" id="classWindow_html_a1e43cbaf2e782e53ca0d368308d2f94c"><div class="ttname"><a href="classWindow.html#a1e43cbaf2e782e53ca0d368308d2f94c">Window::reset_partition_state</a></div><div class="ttdeci">void reset_partition_state()</div><div class="ttdoc">Reset window state for a new partition. </div><div class="ttdef"><b>Definition:</b> window.h:1320</div></div>
<div class="ttc" id="structWindow_1_1st__lead__lag_html"><div class="ttname"><a href="structWindow_1_1st__lead__lag.html">Window::st_lead_lag</a></div><div class="ttdef"><b>Definition:</b> window.h:219</div></div>
<div class="ttc" id="window_8h_html_aa1a426efe3df5da9b1e0a0f7f0e99a7fa8ecaa4621d23528a20d5dea20a01958c"><div class="ttname"><a href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa8ecaa4621d23528a20d5dea20a01958c">Window_retrieve_cached_row_reason::LAST_IN_PEERSET</a></div></div>
<div class="ttc" id="structWindow_1_1Frame__buffer__position_html_a729928b5d818e6d257324322d756a6d7"><div class="ttname"><a href="structWindow_1_1Frame__buffer__position.html#a729928b5d818e6d257324322d756a6d7">Window::Frame_buffer_position::m_position</a></div><div class="ttdeci">uchar * m_position</div><div class="ttdoc">&lt; The size of the file position is determined by handler::ref_length </div><div class="ttdef"><b>Definition:</b> window.h:258</div></div>
<div class="ttc" id="config__static_8h_html_a65e9886d74aaee76545e83dd09011727"><div class="ttname"><a href="config__static_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></div><div class="ttdeci">#define false</div><div class="ttdef"><b>Definition:</b> config_static.h:43</div></div>
<div class="ttc" id="classWindow_html_a829ca8e083149c23d83a3351853f350c"><div class="ttname"><a href="classWindow.html#a829ca8e083149c23d83a3351853f350c">Window::m_needs_last_peer_in_frame</a></div><div class="ttdeci">bool m_needs_last_peer_in_frame</div><div class="ttdoc">(At least) one window function (currently JSON_OBJECTAGG) needs the last peer for the current row to ...</div><div class="ttdef"><b>Definition:</b> window.h:137</div></div>
<div class="ttc" id="classWindow_html_aed1355142ce82e6669ba4251438261bb"><div class="ttname"><a href="classWindow.html#aed1355142ce82e6669ba4251438261bb">Window::set_is_last_row_in_frame</a></div><div class="ttdeci">void set_is_last_row_in_frame(bool b)</div><div class="ttdoc">See m_is_last_row_in_frame. </div><div class="ttdef"><b>Definition:</b> window.h:1217</div></div>
<div class="ttc" id="my__inttypes_8h_html_abc0f5bc07737e498f287334775dff2b6"><div class="ttname"><a href="my__inttypes_8h.html#abc0f5bc07737e498f287334775dff2b6">uint64</a></div><div class="ttdeci">uint64_t uint64</div><div class="ttdef"><b>Definition:</b> my_inttypes.h:68</div></div>
<div class="ttc" id="structWindow_1_1st__ll__offset_html_a13567d8d18fbdfaf301b271d48622a21"><div class="ttname"><a href="structWindow_1_1st__ll__offset.html#a13567d8d18fbdfaf301b271d48622a21">Window::st_ll_offset::m_rowno</a></div><div class="ttdeci">int64 m_rowno</div><div class="ttdoc">negative values is LEAD </div><div class="ttdef"><b>Definition:</b> window.h:205</div></div>
<div class="ttc" id="classWindow_html_a28e7a3070aabf03f05ee216d7fd3f886"><div class="ttname"><a href="classWindow.html#a28e7a3070aabf03f05ee216d7fd3f886">Window::m_row_has_fields_in_out_table</a></div><div class="ttdeci">int64 m_row_has_fields_in_out_table</div><div class="ttdoc">If &gt;=1: the row with this number (1-based, relative to start of partition) currently has its fields i...</div><div class="ttdef"><b>Definition:</b> window.h:409</div></div>
<div class="ttc" id="classWindow_html_a95b0aea4fd06cb60b0d4799c160f833f"><div class="ttname"><a href="classWindow.html#a95b0aea4fd06cb60b0d4799c160f833f">Window::save_pos</a></div><div class="ttdeci">void save_pos(Window_retrieve_cached_row_reason reason)</div><div class="ttdoc">See m_tmp_pos. </div><div class="ttdef"><b>Definition:</b> window.h:313</div></div>
<div class="ttc" id="classWindow_html_ab6eff4d39a973df2aed891ca8cd23880"><div class="ttname"><a href="classWindow.html#ab6eff4d39a973df2aed891ca8cd23880">Window::m_partition_border</a></div><div class="ttdeci">bool m_partition_border</div><div class="ttdoc">Execution state: the current row starts a new partition. </div><div class="ttdef"><b>Definition:</b> window.h:453</div></div>
<div class="ttc" id="classTemp__table__param_html"><div class="ttname"><a href="classTemp__table__param.html">Temp_table_param</a></div><div class="ttdoc">Object containing parameters used when creating and using temporary tables. </div><div class="ttdef"><b>Definition:</b> temp_table_param.h:74</div></div>
<div class="ttc" id="window_8h_html_aa1a426efe3df5da9b1e0a0f7f0e99a7fa30fd0f6b96519b88023f4aaf287bbf59"><div class="ttname"><a href="window_8h.html#aa1a426efe3df5da9b1e0a0f7f0e99a7fa30fd0f6b96519b88023f4aaf287bbf59">Window_retrieve_cached_row_reason::WONT_UPDATE_HINT</a></div></div>
<div class="ttc" id="structWindow__evaluation__requirements_html_a45b4bc53095d9288733c7896080f4439"><div class="ttname"><a href="structWindow__evaluation__requirements.html#a45b4bc53095d9288733c7896080f4439">Window_evaluation_requirements::needs_last_peer_in_frame</a></div><div class="ttdeci">bool needs_last_peer_in_frame</div><div class="ttdoc">Set to true if we need last peer for evaluation within a frame (e.g. </div><div class="ttdef"><b>Definition:</b> window.h:1458</div></div>
<div class="ttc" id="structWindow_1_1st__offset_html_a27cc2541d36a34244bd90af2afc74724"><div class="ttname"><a href="structWindow_1_1st__offset.html#a27cc2541d36a34244bd90af2afc74724">Window::st_offset::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const st_offset &amp;a) const</div><div class="ttdoc">Used for sorting offsets in ascending order for faster traversal of frame buffer tmp file...</div><div class="ttdef"><b>Definition:</b> window.h:201</div></div>
<div class="ttc" id="classWindow_html_a2a05cd78c25c41cd82e91da74aca63f7"><div class="ttname"><a href="classWindow.html#a2a05cd78c25c41cd82e91da74aca63f7">Window::copy_pos</a></div><div class="ttdeci">void copy_pos(Window_retrieve_cached_row_reason from_reason, Window_retrieve_cached_row_reason to_reason)</div><div class="ttdoc">Copy frame buffer position hint from one to another. </div><div class="ttdef"><b>Definition:</b> window.h:334</div></div>
<div class="ttc" id="classWindow_html_a330f0aba2e75358c29f62bd6fbd68905"><div class="ttname"><a href="classWindow.html#a330f0aba2e75358c29f62bd6fbd68905">Window::m_sorting_order</a></div><div class="ttdeci">ORDER * m_sorting_order</div><div class="ttdoc">merged partition/order by </div><div class="ttdef"><b>Definition:</b> window.h:104</div></div>
<div class="ttc" id="classTHD_html"><div class="ttname"><a href="classTHD.html">THD</a></div><div class="ttdoc">For each client connection we create a separate thread with THD serving as a thread/connection descri...</div><div class="ttdef"><b>Definition:</b> sql_class.h:803</div></div>
<div class="ttc" id="dialog_8cc_html_ae7bd12bd7c9e418a420087971d0a7e31"><div class="ttname"><a href="dialog_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></div><div class="ttdeci">Dialog Client Authentication nullptr</div><div class="ttdef"><b>Definition:</b> dialog.cc:353</div></div>
<div class="ttc" id="classWindow_html_aa89929fd75370740ec6403630420b7f7"><div class="ttname"><a href="classWindow.html#aa89929fd75370740ec6403630420b7f7">Window::opt_nth_row</a></div><div class="ttdeci">const st_nth &amp; opt_nth_row() const</div><div class="ttdoc">See m_opt_nth_row. </div><div class="ttdef"><b>Definition:</b> window.h:1055</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li><li class="navelem"><a class="el" href="window_8h.html">window.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
