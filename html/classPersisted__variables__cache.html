<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: Persisted_variables_cache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classPersisted__variables__cache.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classPersisted__variables__cache-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Persisted_variables_cache Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="persisted__variable_8h_source.html">persisted_variable.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9e9dd3d8b97d258a6b954836c939da82"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a9e9dd3d8b97d258a6b954836c939da82">init</a> (int *<a class="el" href="do__ctype_8cc.html#a58c88df0898cc7bbcb9b7e1a48a4eb21">argc</a>, char ***<a class="el" href="do__ctype_8cc.html#a1b5d2a82062528707ab3855772528912">argv</a>)</td></tr>
<tr class="memdesc:a9e9dd3d8b97d258a6b954836c939da82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize class members.  <a href="#a9e9dd3d8b97d258a6b954836c939da82">More...</a><br /></td></tr>
<tr class="separator:a9e9dd3d8b97d258a6b954836c939da82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a829ea692c61673dc8c11778cc43db42d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a829ea692c61673dc8c11778cc43db42d">set_variable</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classset__var.html">set_var</a> *system_var)</td></tr>
<tr class="memdesc:a829ea692c61673dc8c11778cc43db42d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update in-memory copy for every SET PERSIST statement.  <a href="#a829ea692c61673dc8c11778cc43db42d">More...</a><br /></td></tr>
<tr class="separator:a829ea692c61673dc8c11778cc43db42d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9707b817e754beeef091aee7e6fad8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#adb9707b817e754beeef091aee7e6fad8">flush_to_file</a> ()</td></tr>
<tr class="memdesc:adb9707b817e754beeef091aee7e6fad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush in-memory copy to persistent file.  <a href="#adb9707b817e754beeef091aee7e6fad8">More...</a><br /></td></tr>
<tr class="separator:adb9707b817e754beeef091aee7e6fad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cdc2d3a92b732a02aad54d0ec6eba20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a7cdc2d3a92b732a02aad54d0ec6eba20">read_persist_file</a> ()</td></tr>
<tr class="memdesc:a7cdc2d3a92b732a02aad54d0ec6eba20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read options from persistent file.  <a href="#a7cdc2d3a92b732a02aad54d0ec6eba20">More...</a><br /></td></tr>
<tr class="separator:a7cdc2d3a92b732a02aad54d0ec6eba20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d004a91ad2afac343092ac497cc828e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a2d004a91ad2afac343092ac497cc828e">load_persist_file</a> ()</td></tr>
<tr class="memdesc:a2d004a91ad2afac343092ac497cc828e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for persisted config file and if found read persistent options.  <a href="#a2d004a91ad2afac343092ac497cc828e">More...</a><br /></td></tr>
<tr class="separator:a2d004a91ad2afac343092ac497cc828e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebb865f04710d61d4a575b281fdc2f4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#aebb865f04710d61d4a575b281fdc2f4f">set_persist_options</a> (<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> plugin_options=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:aebb865f04710d61d4a575b281fdc2f4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set persisted options.  <a href="#aebb865f04710d61d4a575b281fdc2f4f">More...</a><br /></td></tr>
<tr class="separator:aebb865f04710d61d4a575b281fdc2f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11c487aa3ade1fa5e67187e90ea41f9f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a11c487aa3ade1fa5e67187e90ea41f9f">reset_persisted_variables</a> (<a class="el" href="classTHD.html">THD</a> *thd, const char *<a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> if_exists)</td></tr>
<tr class="memdesc:a11c487aa3ade1fa5e67187e90ea41f9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset persisted options.  <a href="#a11c487aa3ade1fa5e67187e90ea41f9f">More...</a><br /></td></tr>
<tr class="separator:a11c487aa3ade1fa5e67187e90ea41f9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b62786a1140b576c7f237d372b4eac4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structst__persist__var.html">st_persist_var</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a7b62786a1140b576c7f237d372b4eac4">get_persisted_variables</a> ()</td></tr>
<tr class="memdesc:a7b62786a1140b576c7f237d372b4eac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get persisted variables.  <a href="#a7b62786a1140b576c7f237d372b4eac4">More...</a><br /></td></tr>
<tr class="separator:a7b62786a1140b576c7f237d372b4eac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d470b3f22226138744a24bda7dd92e9"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="structst__persist__var.html">st_persist_var</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a9d470b3f22226138744a24bda7dd92e9">get_persist_ro_variables</a> ()</td></tr>
<tr class="memdesc:a9d470b3f22226138744a24bda7dd92e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get persisted static variables.  <a href="#a9d470b3f22226138744a24bda7dd92e9">More...</a><br /></td></tr>
<tr class="separator:a9d470b3f22226138744a24bda7dd92e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae038573ca9edb7f79cee48bd694b9166"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#ae038573ca9edb7f79cee48bd694b9166">append_read_only_variables</a> (int *<a class="el" href="do__ctype_8cc.html#a58c88df0898cc7bbcb9b7e1a48a4eb21">argc</a>, char ***<a class="el" href="do__ctype_8cc.html#a1b5d2a82062528707ab3855772528912">argv</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> plugin_options=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:ae038573ca9edb7f79cee48bd694b9166"><td class="mdescLeft">&#160;</td><td class="mdescRight">append read only persisted variables to command line options with a separator.  <a href="#ae038573ca9edb7f79cee48bd694b9166">More...</a><br /></td></tr>
<tr class="separator:ae038573ca9edb7f79cee48bd694b9166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f57b7da0151947a4c524015d93e804c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a4f57b7da0151947a4c524015d93e804c">cleanup</a> ()</td></tr>
<tr class="separator:a4f57b7da0151947a4c524015d93e804c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad064141000d4f388a7fdba962b371f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a8ad064141000d4f388a7fdba962b371f">lock</a> ()</td></tr>
<tr class="memdesc:a8ad064141000d4f388a7fdba962b371f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire lock on m_persist_variables/m_persist_ro_variables.  <a href="#a8ad064141000d4f388a7fdba962b371f">More...</a><br /></td></tr>
<tr class="separator:a8ad064141000d4f388a7fdba962b371f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1510a29cf1d4b69616264d497aa57888"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a1510a29cf1d4b69616264d497aa57888">unlock</a> ()</td></tr>
<tr class="memdesc:a1510a29cf1d4b69616264d497aa57888"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release lock on m_persist_variables/m_persist_ro_variables.  <a href="#a1510a29cf1d4b69616264d497aa57888">More...</a><br /></td></tr>
<tr class="separator:a1510a29cf1d4b69616264d497aa57888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2f46d92b6458e5ee0d2da41f0ccd94e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#ad2f46d92b6458e5ee0d2da41f0ccd94e">assert_lock_owner</a> ()</td></tr>
<tr class="memdesc:ad2f46d92b6458e5ee0d2da41f0ccd94e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assert caller that owns lock on m_persist_variables/m_persist_ro_variables.  <a href="#ad2f46d92b6458e5ee0d2da41f0ccd94e">More...</a><br /></td></tr>
<tr class="separator:ad2f46d92b6458e5ee0d2da41f0ccd94e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5a6b4217000189faab119adf4193cf32"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classPersisted__variables__cache.html">Persisted_variables_cache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a5a6b4217000189faab119adf4193cf32">get_instance</a> ()</td></tr>
<tr class="memdesc:a5a6b4217000189faab119adf4193cf32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a singleton object.  <a href="#a5a6b4217000189faab119adf4193cf32">More...</a><br /></td></tr>
<tr class="separator:a5a6b4217000189faab119adf4193cf32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af49752dbcd37d4d948e8102201e051be"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#af49752dbcd37d4d948e8102201e051be">extract_variables_from_json</a> (const <a class="el" href="classJson__dom.html">Json_dom</a> *dom, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_read_only=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a>)</td></tr>
<tr class="memdesc:af49752dbcd37d4d948e8102201e051be"><td class="mdescLeft">&#160;</td><td class="mdescRight">extract_variables_from_json() is used to extract all the variable information which is in the form of Json_object.  <a href="#af49752dbcd37d4d948e8102201e051be">More...</a><br /></td></tr>
<tr class="separator:af49752dbcd37d4d948e8102201e051be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbb8fdfd275f4849038c36da8cf91618"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#adbb8fdfd275f4849038c36da8cf91618">open_persist_file</a> (int <a class="el" href="hp__test2_8cc.html#a49fd07a69e183ac48c658336ad8bbb27">flag</a>)</td></tr>
<tr class="memdesc:adbb8fdfd275f4849038c36da8cf91618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open persisted config file.  <a href="#adbb8fdfd275f4849038c36da8cf91618">More...</a><br /></td></tr>
<tr class="separator:adbb8fdfd275f4849038c36da8cf91618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2128f403f0e2d429bee32dda403c1f75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a2128f403f0e2d429bee32dda403c1f75">close_persist_file</a> ()</td></tr>
<tr class="memdesc:a2128f403f0e2d429bee32dda403c1f75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close persisted config file.  <a href="#a2128f403f0e2d429bee32dda403c1f75">More...</a><br /></td></tr>
<tr class="separator:a2128f403f0e2d429bee32dda403c1f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a935abc5986f8f395ca17666052a41173"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classString.html">String</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a935abc5986f8f395ca17666052a41173">get_variable_value</a> (<a class="el" href="classTHD.html">THD</a> *thd, <a class="el" href="classsys__var.html">sys_var</a> *system_var, <a class="el" href="classString.html">String</a> *str, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *is_null)</td></tr>
<tr class="memdesc:a935abc5986f8f395ca17666052a41173"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve variables value from sys_var.  <a href="#a935abc5986f8f395ca17666052a41173">More...</a><br /></td></tr>
<tr class="separator:a935abc5986f8f395ca17666052a41173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4f1c5d5c3254e41c763fc309808c781"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#af4f1c5d5c3254e41c763fc309808c781">get_variable_name</a> (<a class="el" href="classsys__var.html">sys_var</a> *system_var)</td></tr>
<tr class="memdesc:af4f1c5d5c3254e41c763fc309808c781"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve variables name from sys_var.  <a href="#af4f1c5d5c3254e41c763fc309808c781">More...</a><br /></td></tr>
<tr class="separator:af4f1c5d5c3254e41c763fc309808c781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4f62ca29dcda59e2c7549ca2894c947"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classString.html">String</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#ae4f62ca29dcda59e2c7549ca2894c947">construct_json_string</a> (std::string <a class="el" href="persisted__variable_8cc.html#a02b8247840db27f85191d734d51598fa">name</a>, std::string <a class="el" href="persisted__variable_8cc.html#a211d620ef86d6a09b1d29b51b6e44f06">value</a>, <a class="el" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a> <a class="el" href="persisted__variable_8cc.html#a7ae4492f386ecb304442670d1dee0f0d">timestamp</a>, std::string <a class="el" href="persisted__variable_8cc.html#a8b83cc1a954492359ecbdba847d13e53">user</a>, std::string <a class="el" href="persisted__variable_8cc.html#ac27d1f298862a7b4c7d6b7bcc59c9ffd">host</a>, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> is_null, <a class="el" href="classString.html">String</a> *dest)</td></tr>
<tr class="memdesc:ae4f62ca29dcda59e2c7549ca2894c947"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given information of variable which needs to be persisted, this function will construct a json foematted string out of it.  <a href="#ae4f62ca29dcda59e2c7549ca2894c947">More...</a><br /></td></tr>
<tr class="separator:ae4f62ca29dcda59e2c7549ca2894c947"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3a96025b6c220fb4d37bcf045899b427"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structst__persist__var.html">st_persist_var</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a3a96025b6c220fb4d37bcf045899b427">m_persist_variables</a></td></tr>
<tr class="separator:a3a96025b6c220fb4d37bcf045899b427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f005585508430f69f782a38d655807"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structst__persist__var.html">st_persist_var</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#ae5f005585508430f69f782a38d655807">m_persist_plugin_variables</a></td></tr>
<tr class="separator:ae5f005585508430f69f782a38d655807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0235c967f79f522cedebb87e82bb094e"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="structst__persist__var.html">st_persist_var</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a0235c967f79f522cedebb87e82bb094e">m_persist_ro_variables</a></td></tr>
<tr class="separator:a0235c967f79f522cedebb87e82bb094e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1bded092874680e5a1e6dbc8123788e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmysql__mutex__t.html">mysql_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#aa1bded092874680e5a1e6dbc8123788e">m_LOCK_persist_variables</a></td></tr>
<tr class="separator:aa1bded092874680e5a1e6dbc8123788e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62fd7b6f7470571c8241814afaad57b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMYSQL__FILE.html">MYSQL_FILE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a62fd7b6f7470571c8241814afaad57b7">m_fd</a></td></tr>
<tr class="separator:a62fd7b6f7470571c8241814afaad57b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6894bf30fbf2222b6743fda5bddc77a1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a6894bf30fbf2222b6743fda5bddc77a1">m_persist_filename</a></td></tr>
<tr class="separator:a6894bf30fbf2222b6743fda5bddc77a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a892eec544485f9acd25bfbd155a75f04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmysql__mutex__t.html">mysql_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a892eec544485f9acd25bfbd155a75f04">m_LOCK_persist_file</a></td></tr>
<tr class="separator:a892eec544485f9acd25bfbd155a75f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a679eb851d8fea053d3c2ba2542443f6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMEM__ROOT.html">MEM_ROOT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a679eb851d8fea053d3c2ba2542443f6f">ro_persisted_argv_alloc</a> {<a class="el" href="group__psi__abi.html#ga4134fd776a0630d856a60c7ef69f9c8a">PSI_NOT_INSTRUMENTED</a>, 512}</td></tr>
<tr class="separator:a679eb851d8fea053d3c2ba2542443f6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3fc34d1c5183920ea4f426d149e5be"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMEM__ROOT.html">MEM_ROOT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#aff3fc34d1c5183920ea4f426d149e5be">ro_persisted_plugin_argv_alloc</a> {<a class="el" href="group__psi__abi.html#ga4134fd776a0630d856a60c7ef69f9c8a">PSI_NOT_INSTRUMENTED</a>, 512}</td></tr>
<tr class="separator:aff3fc34d1c5183920ea4f426d149e5be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a3eb1bd079204dc9958d9d6dc547a6ed8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classPersisted__variables__cache.html">Persisted_variables_cache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPersisted__variables__cache.html#a3eb1bd079204dc9958d9d6dc547a6ed8">m_instance</a> = <a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></td></tr>
<tr class="separator:a3eb1bd079204dc9958d9d6dc547a6ed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae038573ca9edb7f79cee48bd694b9166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae038573ca9edb7f79cee48bd694b9166">&#9670;&nbsp;</a></span>append_read_only_variables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Persisted_variables_cache::append_read_only_variables </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>plugin_options</em> = <code><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>append read only persisted variables to command line options with a separator. </p>
<p>append_read_only_variables() does a lookup into persist_variables for read only variables and place them after the command line options with a separator "----persist-args-separator----"</p>
<p>This function does nothing when &ndash;no-defaults is set or if persisted_globals_load is disabled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>Pointer to argc of original program </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>Pointer to argv of original program </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">plugin_options</td><td>This flag tells wether options are handled during plugin install. If set to true options are handled as part of install plugin.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 Success </dd>
<dd>
1 Failure </dd></dl>

</div>
</div>
<a id="ad2f46d92b6458e5ee0d2da41f0ccd94e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2f46d92b6458e5ee0d2da41f0ccd94e">&#9670;&nbsp;</a></span>assert_lock_owner()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Persisted_variables_cache::assert_lock_owner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assert caller that owns lock on m_persist_variables/m_persist_ro_variables. </p>

</div>
</div>
<a id="a4f57b7da0151947a4c524015d93e804c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f57b7da0151947a4c524015d93e804c">&#9670;&nbsp;</a></span>cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Persisted_variables_cache::cleanup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2128f403f0e2d429bee32dda403c1f75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2128f403f0e2d429bee32dda403c1f75">&#9670;&nbsp;</a></span>close_persist_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Persisted_variables_cache::close_persist_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Close persisted config file. </p>

</div>
</div>
<a id="ae4f62ca29dcda59e2c7549ca2894c947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4f62ca29dcda59e2c7549ca2894c947">&#9670;&nbsp;</a></span>construct_json_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classString.html">String</a> * Persisted_variables_cache::construct_json_string </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="my__inttypes_8h.html#a22152088aba12c47e916b7f0ffee0f51">ulonglong</a>&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_null</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classString.html">String</a> *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given information of variable which needs to be persisted, this function will construct a json foematted string out of it. </p>
<p>Format will be as below for variable named "X": "X" : { "Value" : "value", "Metadata" : { "Timestamp" : timestamp_value, "User" : "user_name", "Host" : "host_name" } }</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Variable name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>Variable value </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timestamp</td><td>Timestamp value when this variable was set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user</td><td>User who set this variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Host on which this variable was set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_null</td><td>Is variable value NULL or not. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dest</td><td>String object where json formatted string is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to String instance holding the json formatted string </dd></dl>

</div>
</div>
<a id="af49752dbcd37d4d948e8102201e051be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af49752dbcd37d4d948e8102201e051be">&#9670;&nbsp;</a></span>extract_variables_from_json()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Persisted_variables_cache::extract_variables_from_json </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJson__dom.html">Json_dom</a> *&#160;</td>
          <td class="paramname"><em>dom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>is_read_only</em> = <code><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>extract_variables_from_json() is used to extract all the variable information which is in the form of Json_object. </p>
<p>New format for mysqld-auto.cnf is as below: { "Version" : 1, "mysql_server" : { "variable_name" : { "Value" : "variable_value", "Metadata" : { "Timestamp" : timestamp_value, "User" : "user_name", "Host" : "host_name" } } } { "variable_name" : { ...</p>
<p>{ "mysql_server_static_options" : { "variable_name" : { "Value" : "variable_value", ... } ... }</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dom</td><td>Pointer to the Json_dom object which is an internal representation of parsed json string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_read_only</td><td>Bool value when set to TRUE extracts read only variables and dynamic variables when set to FALSE.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 Success </dd>
<dd>
1 Failure </dd></dl>
<p>Static variables by themselves is represented as a json object with key "mysql_server_static_options" as parent element.</p>
<p>Every Json object which represents Variable information must have only 2 elements which is { "Value" : "variable_value", &ndash; 1st element "Metadata" : { &ndash; 2nd element "Timestamp" : timestamp_value, "User" : "user_name", "Host" : "host_name" } }</p>

</div>
</div>
<a id="adb9707b817e754beeef091aee7e6fad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb9707b817e754beeef091aee7e6fad8">&#9670;&nbsp;</a></span>flush_to_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Persisted_variables_cache::flush_to_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush in-memory copy to persistent file. </p>
<p>Convert in-memory copy into a stream of characters and write this stream to persisted config file.</p>
<dl class="section return"><dt>Returns</dt><dd>Error state </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>An error occurred </td></tr>
    <tr><td class="paramname">false</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5a6b4217000189faab119adf4193cf32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a6b4217000189faab119adf4193cf32">&#9670;&nbsp;</a></span>get_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPersisted__variables__cache.html">Persisted_variables_cache</a> * Persisted_variables_cache::get_instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a singleton object. </p>

</div>
</div>
<a id="a9d470b3f22226138744a24bda7dd92e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d470b3f22226138744a24bda7dd92e9">&#9670;&nbsp;</a></span>get_persist_ro_variables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">map&lt; string, <a class="el" href="structst__persist__var.html">st_persist_var</a> &gt; * Persisted_variables_cache::get_persist_ro_variables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get persisted static variables. </p>
<p>Return in-memory copy for static persisted variables. </p>

</div>
</div>
<a id="a7b62786a1140b576c7f237d372b4eac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b62786a1140b576c7f237d372b4eac4">&#9670;&nbsp;</a></span>get_persisted_variables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; <a class="el" href="structst__persist__var.html">st_persist_var</a> &gt; * Persisted_variables_cache::get_persisted_variables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get persisted variables. </p>
<p>Return in-memory copy persist_variables_. </p>

</div>
</div>
<a id="af4f1c5d5c3254e41c763fc309808c781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4f1c5d5c3254e41c763fc309808c781">&#9670;&nbsp;</a></span>get_variable_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * Persisted_variables_cache::get_variable_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsys__var.html">sys_var</a> *&#160;</td>
          <td class="paramname"><em>system_var</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve variables name from sys_var. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">system_var</td><td>Pointer to sys_var which is being SET </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to buffer holding the name </dd></dl>

</div>
</div>
<a id="a935abc5986f8f395ca17666052a41173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935abc5986f8f395ca17666052a41173">&#9670;&nbsp;</a></span>get_variable_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classString.html">String</a> * Persisted_variables_cache::get_variable_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsys__var.html">sys_var</a> *&#160;</td>
          <td class="paramname"><em>system_var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classString.html">String</a> *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>is_null</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve variables value from sys_var. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Pointer to connection handler </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">system_var</td><td>Pointer to sys_var which is being SET </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>Pointer to String instance into which value is copied </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">is_null</td><td>Is value NULL or not.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to String instance holding the value </dd></dl>

</div>
</div>
<a id="a9e9dd3d8b97d258a6b954836c939da82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e9dd3d8b97d258a6b954836c939da82">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Persisted_variables_cache::init </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize class members. </p>
<p>This function reads datadir if present in config file or set at command line, in order to know from where to load this config file. If datadir is not set then read from MYSQL_DATADIR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>Pointer to argc of original program </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>Pointer to argv of original program</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 Success </dd>
<dd>
1 Failure </dd></dl>

</div>
</div>
<a id="a2d004a91ad2afac343092ac497cc828e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d004a91ad2afac343092ac497cc828e">&#9670;&nbsp;</a></span>load_persist_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Persisted_variables_cache::load_persist_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search for persisted config file and if found read persistent options. </p>
<p>load_persist_file() read persisted config file</p>
<dl class="section return"><dt>Returns</dt><dd>Error state </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>An error occurred </td></tr>
    <tr><td class="paramname">false</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8ad064141000d4f388a7fdba962b371f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ad064141000d4f388a7fdba962b371f">&#9670;&nbsp;</a></span>lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Persisted_variables_cache::lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire lock on m_persist_variables/m_persist_ro_variables. </p>

</div>
</div>
<a id="adbb8fdfd275f4849038c36da8cf91618"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbb8fdfd275f4849038c36da8cf91618">&#9670;&nbsp;</a></span>open_persist_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Persisted_variables_cache::open_persist_file </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Open persisted config file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>File open mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error state </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>An error occurred </td></tr>
    <tr><td class="paramname">false</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7cdc2d3a92b732a02aad54d0ec6eba20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cdc2d3a92b732a02aad54d0ec6eba20">&#9670;&nbsp;</a></span>read_persist_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Persisted_variables_cache::read_persist_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read options from persistent file. </p>
<p>read_persist_file() reads the persisted config file</p>
<p>This function does following:</p><ol type="1">
<li>Read the persisted config file into a string buffer</li>
<li>This string buffer is parsed with JSON parser to check if the format is correct or not.</li>
<li>Check for correct group name.</li>
<li>Extract key/value pair and populate in m_persist_variables, m_persist_ro_variables. mysqld-auto.cnf file will have variable properties like when a variable is set, by wholm and on what host this variable was set.</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>Error state </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>or 1 Failure </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a11c487aa3ade1fa5e67187e90ea41f9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11c487aa3ade1fa5e67187e90ea41f9f">&#9670;&nbsp;</a></span>reset_persisted_variables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Persisted_variables_cache::reset_persisted_variables </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>if_exists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset persisted options. </p>
<p>reset_persisted_variables() does a lookup into persist_variables and remove the variable from the hash if present and flush the hash to file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Pointer to connection handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Name of variable to remove, if NULL all variables are removed from config file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">if_exists</td><td>Bool value when set to true reports warning else error if variable is not present in the config file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 Success </dd>
<dd>
1 Failure </dd></dl>

</div>
</div>
<a id="aebb865f04710d61d4a575b281fdc2f4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebb865f04710d61d4a575b281fdc2f4f">&#9670;&nbsp;</a></span>set_persist_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Persisted_variables_cache::set_persist_options </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>plugin_options</em> = <code><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a65e9886d74aaee76545e83dd09011727">false</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set persisted options. </p>
<p>set_persist_options() will set the options read from persisted config file</p>
<p>This function does nothing when &ndash;no-defaults is set or if persisted_globals_load is set to false</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">plugin_options</td><td>Flag which tells what options are being set. If set to false non plugin variables are set else plugin variables are set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error state </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>An error occurred </td></tr>
    <tr><td class="paramname">false</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a829ea692c61673dc8c11778cc43db42d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a829ea692c61673dc8c11778cc43db42d">&#9670;&nbsp;</a></span>set_variable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> Persisted_variables_cache::set_variable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTHD.html">THD</a> *&#160;</td>
          <td class="paramname"><em>thd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classset__var.html">set_var</a> *&#160;</td>
          <td class="paramname"><em>setvar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update in-memory copy for every SET PERSIST statement. </p>
<p>Retrieve variables name/value and update the in-memory copy with this new values.</p>
<p>If value is default then remove this entry from in-memory copy, else update existing key with new value</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thd</td><td>Pointer to connection handler </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">setvar</td><td>Pointer to set_var which is being SET</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true Failure </dd>
<dd>
false Success </dd></dl>

</div>
</div>
<a id="a1510a29cf1d4b69616264d497aa57888"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1510a29cf1d4b69616264d497aa57888">&#9670;&nbsp;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Persisted_variables_cache::unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release lock on m_persist_variables/m_persist_ro_variables. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a62fd7b6f7470571c8241814afaad57b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62fd7b6f7470571c8241814afaad57b7">&#9670;&nbsp;</a></span>m_fd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMYSQL__FILE.html">MYSQL_FILE</a>* Persisted_variables_cache::m_fd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3eb1bd079204dc9958d9d6dc547a6ed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eb1bd079204dc9958d9d6dc547a6ed8">&#9670;&nbsp;</a></span>m_instance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPersisted__variables__cache.html">Persisted_variables_cache</a> * Persisted_variables_cache::m_instance = <a class="el" href="auth__ldap__sasl__client_8cc.html#ae7bd12bd7c9e418a420087971d0a7e31">nullptr</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a892eec544485f9acd25bfbd155a75f04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a892eec544485f9acd25bfbd155a75f04">&#9670;&nbsp;</a></span>m_LOCK_persist_file</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmysql__mutex__t.html">mysql_mutex_t</a> Persisted_variables_cache::m_LOCK_persist_file</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa1bded092874680e5a1e6dbc8123788e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1bded092874680e5a1e6dbc8123788e">&#9670;&nbsp;</a></span>m_LOCK_persist_variables</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmysql__mutex__t.html">mysql_mutex_t</a> Persisted_variables_cache::m_LOCK_persist_variables</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6894bf30fbf2222b6743fda5bddc77a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6894bf30fbf2222b6743fda5bddc77a1">&#9670;&nbsp;</a></span>m_persist_filename</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Persisted_variables_cache::m_persist_filename</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae5f005585508430f69f782a38d655807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5f005585508430f69f782a38d655807">&#9670;&nbsp;</a></span>m_persist_plugin_variables</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structst__persist__var.html">st_persist_var</a>&gt; Persisted_variables_cache::m_persist_plugin_variables</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0235c967f79f522cedebb87e82bb094e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0235c967f79f522cedebb87e82bb094e">&#9670;&nbsp;</a></span>m_persist_ro_variables</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, <a class="el" href="structst__persist__var.html">st_persist_var</a>&gt; Persisted_variables_cache::m_persist_ro_variables</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3a96025b6c220fb4d37bcf045899b427"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a96025b6c220fb4d37bcf045899b427">&#9670;&nbsp;</a></span>m_persist_variables</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structst__persist__var.html">st_persist_var</a>&gt; Persisted_variables_cache::m_persist_variables</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a679eb851d8fea053d3c2ba2542443f6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a679eb851d8fea053d3c2ba2542443f6f">&#9670;&nbsp;</a></span>ro_persisted_argv_alloc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMEM__ROOT.html">MEM_ROOT</a> Persisted_variables_cache::ro_persisted_argv_alloc {<a class="el" href="group__psi__abi.html#ga4134fd776a0630d856a60c7ef69f9c8a">PSI_NOT_INSTRUMENTED</a>, 512}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aff3fc34d1c5183920ea4f426d149e5be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff3fc34d1c5183920ea4f426d149e5be">&#9670;&nbsp;</a></span>ro_persisted_plugin_argv_alloc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMEM__ROOT.html">MEM_ROOT</a> Persisted_variables_cache::ro_persisted_plugin_argv_alloc {<a class="el" href="group__psi__abi.html#ga4134fd776a0630d856a60c7ef69f9c8a">PSI_NOT_INSTRUMENTED</a>, 512}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sql/<a class="el" href="persisted__variable_8h_source.html">persisted_variable.h</a></li>
<li>sql/<a class="el" href="persisted__variable_8cc.html">persisted_variable.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classPersisted__variables__cache.html">Persisted_variables_cache</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
