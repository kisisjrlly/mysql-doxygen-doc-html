<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MySQL: undo Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mysql.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-mysql-110x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MySQL
   &#160;<span id="projectnumber">8.0.22</span>
   </div>
   <div id="projectbrief">Source Code Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespaceundo.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">undo Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Inject__failure__once.html">Inject_failure_once</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inject a failure in the undo truncation debug compiled code at various places so that it fails the first time it hits and succeeds after that.  <a href="classundo_1_1Inject__failure__once.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structundo_1_1space__id__account.html">space_id_account</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The currently used undo space IDs for an undo space number along with a boolean showing whether the undo space number is in use.  <a href="structundo_1_1space__id__account.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structundo_1_1Tablespace.html">Tablespace</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An undo::Tablespace object is used to easily convert between undo_space_id and undo_space_num and to create the automatic file_name and space name.  <a href="structundo_1_1Tablespace.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Tablespaces.html">Tablespaces</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of undo tablespaces, each containing a list of rollback segments.  <a href="classundo_1_1Tablespaces.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classundo_1_1Truncate.html">Truncate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Track an UNDO tablespace marked for truncate.  <a href="classundo_1_1Truncate.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a57e5c0971ef01b40eb3277ad5da898a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a57e5c0971ef01b40eb3277ad5da898a2">is_reserved</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a57e5c0971ef01b40eb3277ad5da898a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the space_id is an undo space ID in the reserved range.  <a href="#a57e5c0971ef01b40eb3277ad5da898a2">More...</a><br /></td></tr>
<tr class="separator:a57e5c0971ef01b40eb3277ad5da898a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae97bf0eb5ea4f8d4d679295d74cf7196"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#ae97bf0eb5ea4f8d4d679295d74cf7196">num2id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num, size_t ndx)</td></tr>
<tr class="memdesc:ae97bf0eb5ea4f8d4d679295d74cf7196"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an undo space number (from 1 to 127) into the undo space_id, given an index indicating which space_id from the pool assigned to that undo number.  <a href="#ae97bf0eb5ea4f8d4d679295d74cf7196">More...</a><br /></td></tr>
<tr class="separator:ae97bf0eb5ea4f8d4d679295d74cf7196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec18e04ba68e9c474f81dbae20576b1d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#aec18e04ba68e9c474f81dbae20576b1d">num2id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num)</td></tr>
<tr class="memdesc:aec18e04ba68e9c474f81dbae20576b1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an undo space number (from 1 to 127) into an undo space_id.  <a href="#aec18e04ba68e9c474f81dbae20576b1d">More...</a><br /></td></tr>
<tr class="separator:aec18e04ba68e9c474f81dbae20576b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9773db89c031c1a6b3c96f2ee63a6965"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a9773db89c031c1a6b3c96f2ee63a6965">id2num</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a9773db89c031c1a6b3c96f2ee63a6965"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an undo space ID into an undo space number.  <a href="#a9773db89c031c1a6b3c96f2ee63a6965">More...</a><br /></td></tr>
<tr class="separator:a9773db89c031c1a6b3c96f2ee63a6965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7255debca9a267b79e238bb501ed9b01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a7255debca9a267b79e238bb501ed9b01">id2next_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="separator:a7255debca9a267b79e238bb501ed9b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2631c559ccdf84403ba8570d2efcc8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#af2631c559ccdf84403ba8570d2efcc8a">init_space_id_bank</a> ()</td></tr>
<tr class="memdesc:af2631c559ccdf84403ba8570d2efcc8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the undo tablespace space_id bank which is a lock free repository for information about the space IDs used for undo tablespaces.  <a href="#af2631c559ccdf84403ba8570d2efcc8a">More...</a><br /></td></tr>
<tr class="separator:af2631c559ccdf84403ba8570d2efcc8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef97c77981be1c6e488d387a1dea3e5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#aef97c77981be1c6e488d387a1dea3e5e">use_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:aef97c77981be1c6e488d387a1dea3e5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Note that the undo space number for a space ID is being used.  <a href="#aef97c77981be1c6e488d387a1dea3e5e">More...</a><br /></td></tr>
<tr class="separator:aef97c77981be1c6e488d387a1dea3e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42b14e65523c0d309adf946839edb480"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a42b14e65523c0d309adf946839edb480">use_next_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num)</td></tr>
<tr class="memdesc:a42b14e65523c0d309adf946839edb480"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark that the given undo space number is being used and return the next available space_id for that space number.  <a href="#a42b14e65523c0d309adf946839edb480">More...</a><br /></td></tr>
<tr class="separator:a42b14e65523c0d309adf946839edb480"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad607fb01104acc911f24ffa281906791"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#ad607fb01104acc911f24ffa281906791">unuse_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:ad607fb01104acc911f24ffa281906791"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark an undo number associated with a given space_id as unused and available to be resused.  <a href="#ad607fb01104acc911f24ffa281906791">More...</a><br /></td></tr>
<tr class="separator:ad607fb01104acc911f24ffa281906791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5a62e4fb65a13d1c06c6a0e581baea2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#ad5a62e4fb65a13d1c06c6a0e581baea2">next_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num)</td></tr>
<tr class="memdesc:ad5a62e4fb65a13d1c06c6a0e581baea2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a valid undo space_id or SPACE_UNKNOWN, return the next space_id for the given space number.  <a href="#ad5a62e4fb65a13d1c06c6a0e581baea2">More...</a><br /></td></tr>
<tr class="separator:ad5a62e4fb65a13d1c06c6a0e581baea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade47a613763c8dce313daddcca6974da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#ade47a613763c8dce313daddcca6974da">next_space_id</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:ade47a613763c8dce313daddcca6974da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a valid undo space_id, return the next space_id for that space number.  <a href="#ade47a613763c8dce313daddcca6974da">More...</a><br /></td></tr>
<tr class="separator:ade47a613763c8dce313daddcca6974da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71d8d24a97e030f84e99b4520f819ba3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a71d8d24a97e030f84e99b4520f819ba3">get_next_available_space_num</a> ()</td></tr>
<tr class="memdesc:a71d8d24a97e030f84e99b4520f819ba3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the next available undo space ID to be used for a new explicit undo tablespaces.  <a href="#a71d8d24a97e030f84e99b4520f819ba3">More...</a><br /></td></tr>
<tr class="separator:a71d8d24a97e030f84e99b4520f819ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a0eafa70b59e422ece6a63fdffe4a5a"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a1a0eafa70b59e422ece6a63fdffe4a5a">make_space_name</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a1a0eafa70b59e422ece6a63fdffe4a5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a standard undo tablespace name from a space_id.  <a href="#a1a0eafa70b59e422ece6a63fdffe4a5a">More...</a><br /></td></tr>
<tr class="separator:a1a0eafa70b59e422ece6a63fdffe4a5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c2c38add781aa24744ca18d72275eb2"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a1c2c38add781aa24744ca18d72275eb2">make_file_name</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a1c2c38add781aa24744ca18d72275eb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a standard undo tablespace file name from a space_id.  <a href="#a1c2c38add781aa24744ca18d72275eb2">More...</a><br /></td></tr>
<tr class="separator:a1c2c38add781aa24744ca18d72275eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa459988289fe75d0bb0e1da38dc99bc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#aa459988289fe75d0bb0e1da38dc99bc4">inject_crash</a> (const char *injection_point_name)</td></tr>
<tr class="memdesc:aa459988289fe75d0bb0e1da38dc99bc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inject a crash if a certain SET GLOBAL DEBUG has been set.  <a href="#aa459988289fe75d0bb0e1da38dc99bc4">More...</a><br /></td></tr>
<tr class="separator:aa459988289fe75d0bb0e1da38dc99bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8199343283d3fa2224c8ae81559bbced"><td class="memItemLeft" align="right" valign="top"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a8199343283d3fa2224c8ae81559bbced">start_logging</a> (<a class="el" href="structundo_1_1Tablespace.html">Tablespace</a> *undo_space)</td></tr>
<tr class="memdesc:a8199343283d3fa2224c8ae81559bbced"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the truncate log file.  <a href="#a8199343283d3fa2224c8ae81559bbced">More...</a><br /></td></tr>
<tr class="separator:a8199343283d3fa2224c8ae81559bbced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1774e724560168aac019b197d462b205"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a1774e724560168aac019b197d462b205">done_logging</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num)</td></tr>
<tr class="memdesc:a1774e724560168aac019b197d462b205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark completion of undo truncate action by writing magic number to the log file and then removing it from the disk.  <a href="#a1774e724560168aac019b197d462b205">More...</a><br /></td></tr>
<tr class="separator:a1774e724560168aac019b197d462b205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08cb53aed10b0a9c48eded240d1d0674"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a08cb53aed10b0a9c48eded240d1d0674">is_active_truncate_log_present</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_num)</td></tr>
<tr class="memdesc:a08cb53aed10b0a9c48eded240d1d0674"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if TRUNCATE_DDL_LOG file exist.  <a href="#a08cb53aed10b0a9c48eded240d1d0674">More...</a><br /></td></tr>
<tr class="separator:a08cb53aed10b0a9c48eded240d1d0674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab76dbc44dc03e9fec6840a9b11fb9731"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#ab76dbc44dc03e9fec6840a9b11fb9731">add_space_to_construction_list</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:ab76dbc44dc03e9fec6840a9b11fb9731"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add undo tablespace to s_under_construction vector.  <a href="#ab76dbc44dc03e9fec6840a9b11fb9731">More...</a><br /></td></tr>
<tr class="separator:ab76dbc44dc03e9fec6840a9b11fb9731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72ffda44ae989b04483e8f1957c5cc14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a72ffda44ae989b04483e8f1957c5cc14">clear_construction_list</a> ()</td></tr>
<tr class="memdesc:a72ffda44ae989b04483e8f1957c5cc14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the s_under_construction vector.  <a href="#a72ffda44ae989b04483e8f1957c5cc14">More...</a><br /></td></tr>
<tr class="separator:a72ffda44ae989b04483e8f1957c5cc14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab061a1907548cdd2fe2221cdf5b1d70b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#ab061a1907548cdd2fe2221cdf5b1d70b">is_under_construction</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:ab061a1907548cdd2fe2221cdf5b1d70b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is an undo tablespace under constuction at the moment.  <a href="#ab061a1907548cdd2fe2221cdf5b1d70b">More...</a><br /></td></tr>
<tr class="separator:ab061a1907548cdd2fe2221cdf5b1d70b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f7e056728b73387da841676376d24b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a95f7e056728b73387da841676376d24b">set_active</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id)</td></tr>
<tr class="memdesc:a95f7e056728b73387da841676376d24b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an undo tablespace active.  <a href="#a95f7e056728b73387da841676376d24b">More...</a><br /></td></tr>
<tr class="separator:a95f7e056728b73387da841676376d24b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16fb6085ef2e93316f4b550861c179c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#af16fb6085ef2e93316f4b550861c179c">is_active</a> (<a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> space_id, <a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> get_latch=<a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>)</td></tr>
<tr class="separator:af16fb6085ef2e93316f4b550861c179c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adc4fa13662eba93c465635d54f3eba69"><td class="memItemLeft" align="right" valign="top">const ib_uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#adc4fa13662eba93c465635d54f3eba69">s_magic</a> = 76845412</td></tr>
<tr class="memdesc:adc4fa13662eba93c465635d54f3eba69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Magic Number to indicate truncate action is complete.  <a href="#adc4fa13662eba93c465635d54f3eba69">More...</a><br /></td></tr>
<tr class="separator:adc4fa13662eba93c465635d54f3eba69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b79d8a260cd5a77bfe0861af0444bd"><td class="memItemLeft" align="right" valign="top">const char *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a56b79d8a260cd5a77bfe0861af0444bd">s_log_prefix</a> = &quot;undo_&quot;</td></tr>
<tr class="memdesc:a56b79d8a260cd5a77bfe0861af0444bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate Log file Prefix.  <a href="#a56b79d8a260cd5a77bfe0861af0444bd">More...</a><br /></td></tr>
<tr class="separator:a56b79d8a260cd5a77bfe0861af0444bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa3389662c718b8234e35e9277d70e6f"><td class="memItemLeft" align="right" valign="top">const char *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#afa3389662c718b8234e35e9277d70e6f">s_log_ext</a> = &quot;trunc.log&quot;</td></tr>
<tr class="memdesc:afa3389662c718b8234e35e9277d70e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Truncate Log file Extension.  <a href="#afa3389662c718b8234e35e9277d70e6f">More...</a><br /></td></tr>
<tr class="separator:afa3389662c718b8234e35e9277d70e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a44d99d6e9500d7142a4949043f5d09"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structundo_1_1space__id__account.html">space_id_account</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a5a44d99d6e9500d7142a4949043f5d09">space_id_bank</a></td></tr>
<tr class="memdesc:a5a44d99d6e9500d7142a4949043f5d09"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of currently used undo space IDs for each undo space number along with a boolean showing whether the undo space number is in use.  <a href="#a5a44d99d6e9500d7142a4949043f5d09">More...</a><br /></td></tr>
<tr class="separator:a5a44d99d6e9500d7142a4949043f5d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56c0719c3bdfe31f2acd94ea2a95c243"><td class="memItemLeft" align="right" valign="top">ib_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a56c0719c3bdfe31f2acd94ea2a95c243">ddl_mutex</a></td></tr>
<tr class="memdesc:a56c0719c3bdfe31f2acd94ea2a95c243"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutext for serializing undo tablespace related DDL.  <a href="#a56c0719c3bdfe31f2acd94ea2a95c243">More...</a><br /></td></tr>
<tr class="separator:a56c0719c3bdfe31f2acd94ea2a95c243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5bd7a41f7041f6e1ffd5b5a71fc98f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classundo_1_1Tablespaces.html">Tablespaces</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#ac5bd7a41f7041f6e1ffd5b5a71fc98f7">spaces</a></td></tr>
<tr class="memdesc:ac5bd7a41f7041f6e1ffd5b5a71fc98f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">A global object that contains a vector of undo::Tablespace structs.  <a href="#ac5bd7a41f7041f6e1ffd5b5a71fc98f7">More...</a><br /></td></tr>
<tr class="separator:ac5bd7a41f7041f6e1ffd5b5a71fc98f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3c890341cad52e3cd63f5a5d9cf3bbb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSpace__Ids.html">Space_Ids</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#ab3c890341cad52e3cd63f5a5d9cf3bbb">s_under_construction</a></td></tr>
<tr class="memdesc:ab3c890341cad52e3cd63f5a5d9cf3bbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of undo tablespaces that need header pages and rollback segments written to them at startup.  <a href="#ab3c890341cad52e3cd63f5a5d9cf3bbb">More...</a><br /></td></tr>
<tr class="separator:ab3c890341cad52e3cd63f5a5d9cf3bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95153043abee982b0cdd372a3798adeb"><td class="memItemLeft" align="right" valign="top">constexpr ulint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceundo.html#a95153043abee982b0cdd372a3798adeb">TRUNCATE_FREQUENCY</a> = 128</td></tr>
<tr class="separator:a95153043abee982b0cdd372a3798adeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab76dbc44dc03e9fec6840a9b11fb9731"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab76dbc44dc03e9fec6840a9b11fb9731">&#9670;&nbsp;</a></span>add_space_to_construction_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::add_space_to_construction_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add undo tablespace to s_under_construction vector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>space id of tablespace to truncate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a72ffda44ae989b04483e8f1957c5cc14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72ffda44ae989b04483e8f1957c5cc14">&#9670;&nbsp;</a></span>clear_construction_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::clear_construction_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the s_under_construction vector. </p>

</div>
</div>
<a id="a1774e724560168aac019b197d462b205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1774e724560168aac019b197d462b205">&#9670;&nbsp;</a></span>done_logging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::done_logging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark completion of undo truncate action by writing magic number to the log file and then removing it from the disk. </p>
<p>If we are going to remove it from disk then why write magic number? This is to safeguard from unlink (file-system) anomalies that will keep the link to the file even after unlink action is successful and ref-count = 0. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_num</td><td>number of the undo tablespace to truncate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a71d8d24a97e030f84e99b4520f819ba3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71d8d24a97e030f84e99b4520f819ba3">&#9670;&nbsp;</a></span>get_next_available_space_num()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::get_next_available_space_num </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the next available undo space ID to be used for a new explicit undo tablespaces. </p>
<p>The slot will be marked as in-use. </p><dl class="section return"><dt>Returns</dt><dd>next available undo space number if successful. </dd>
<dd>
SPACE_UNKNOWN if failed </dd></dl>

</div>
</div>
<a id="a7255debca9a267b79e238bb501ed9b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7255debca9a267b79e238bb501ed9b01">&#9670;&nbsp;</a></span>id2next_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::id2next_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9773db89c031c1a6b3c96f2ee63a6965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9773db89c031c1a6b3c96f2ee63a6965">&#9670;&nbsp;</a></span>id2num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::id2num </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert an undo space ID into an undo space number. </p>
<p>NOTE: This may be an undo space_id from a pre-exisiting 5.7 database which used space_ids from 1 to 127. If so, the space_id is the space_num. The space_ids are assigned to number ranges in reverse from high to low. In addition, the first space IDs for each undo number occur sequentionally and descending before the second space_id.</p>
<p>Since s_max_undo_space_id = 0xFFFFFFEF, FSP_MAX_UNDO_TABLESPACES = 127 and s_undo_space_id_range = 400,000: Space ID Space Num Space ID Space Num ... Space ID Space Num 0xFFFFFFEF 1 0xFFFFFFEe 2 ... 0xFFFFFF71 127 0xFFFFFF70 1 0xFFFFFF6F 2 ... 0xFFFFFEF2 127 0xFFFFFEF1 1 0xFFFFFEF0 2 ... 0xFFFFFE73 127 ...</p>
<p>This is done to maintain backward compatibility to when there was only one space_id per undo space number. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>undo tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>space number of the undo tablespace </dd></dl>

</div>
</div>
<a id="af2631c559ccdf84403ba8570d2efcc8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2631c559ccdf84403ba8570d2efcc8a">&#9670;&nbsp;</a></span>init_space_id_bank()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::init_space_id_bank </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the undo tablespace space_id bank which is a lock free repository for information about the space IDs used for undo tablespaces. </p>
<p>It is used during creation in order to assign an unused space number and during truncation in order to assign the next space_id within that space_number range.</p>
<p>It is used during creation in order to assign an unused space number and during truncation in order to assign the next space_id within that space_number range. It is initialized with the minimum value in the range so that if a new space ID is needed in that range the max space ID will be used first. As truncation occurs, the space_ids are assigned from max down to min. </p>

</div>
</div>
<a id="aa459988289fe75d0bb0e1da38dc99bc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa459988289fe75d0bb0e1da38dc99bc4">&#9670;&nbsp;</a></span>inject_crash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::inject_crash </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>injection_point_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inject a crash if a certain SET GLOBAL DEBUG has been set. </p>
<p>Before DBUG_SUICIDE(), write an entry about this crash to the error log and flush the redo log. </p>

</div>
</div>
<a id="af16fb6085ef2e93316f4b550861c179c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af16fb6085ef2e93316f4b550861c179c">&#9670;&nbsp;</a></span>is_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> undo::is_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td>
          <td class="paramname"><em>get_latch</em> = <code><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a08cb53aed10b0a9c48eded240d1d0674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08cb53aed10b0a9c48eded240d1d0674">&#9670;&nbsp;</a></span>is_active_truncate_log_present()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> undo::is_active_truncate_log_present </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if TRUNCATE_DDL_LOG file exist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_num</td><td>undo tablespace number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if exist else false. </dd></dl>

</div>
</div>
<a id="a57e5c0971ef01b40eb3277ad5da898a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57e5c0971ef01b40eb3277ad5da898a2">&#9670;&nbsp;</a></span>is_reserved()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> undo::is_reserved </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the space_id is an undo space ID in the reserved range. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>undo tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if it is in the reserved undo space ID range. </dd></dl>

</div>
</div>
<a id="ab061a1907548cdd2fe2221cdf5b1d70b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab061a1907548cdd2fe2221cdf5b1d70b">&#9670;&nbsp;</a></span>is_under_construction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="innodb__memcache_2util-src_2config__parser_8c.html#abb452686968e48b67397da5f97445f5b">bool</a> undo::is_under_construction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is an undo tablespace under constuction at the moment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>space id to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if marked for truncate, else false. </dd></dl>

</div>
</div>
<a id="a1c2c38add781aa24744ca18d72275eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c2c38add781aa24744ca18d72275eb2">&#9670;&nbsp;</a></span>make_file_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * undo::make_file_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a standard undo tablespace file name from a space_id. </p>
<p>This will create a name like 'undo_001' if the space_id is in the reserved range, else it will be like 'undo001'. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>id of the undo tablespace. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>file_name of the undo tablespace file </dd></dl>

</div>
</div>
<a id="a1a0eafa70b59e422ece6a63fdffe4a5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a0eafa70b59e422ece6a63fdffe4a5a">&#9670;&nbsp;</a></span>make_space_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * undo::make_space_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a standard undo tablespace name from a space_id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>id of the undo tablespace. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>tablespace name of the undo tablespace file </dd></dl>

</div>
</div>
<a id="ad5a62e4fb65a13d1c06c6a0e581baea2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5a62e4fb65a13d1c06c6a0e581baea2">&#9670;&nbsp;</a></span>next_space_id() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::next_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a valid undo space_id or SPACE_UNKNOWN, return the next space_id for the given space number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>undo tablespace ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">space_num</td><td>undo tablespace number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next tablespace ID to use </dd></dl>

</div>
</div>
<a id="ade47a613763c8dce313daddcca6974da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade47a613763c8dce313daddcca6974da">&#9670;&nbsp;</a></span>next_space_id() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::next_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a valid undo space_id, return the next space_id for that space number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>undo tablespace ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next tablespace ID to use </dd></dl>

</div>
</div>
<a id="ae97bf0eb5ea4f8d4d679295d74cf7196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae97bf0eb5ea4f8d4d679295d74cf7196">&#9670;&nbsp;</a></span>num2id() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::num2id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ndx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert an undo space number (from 1 to 127) into the undo space_id, given an index indicating which space_id from the pool assigned to that undo number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_num</td><td>undo tablespace number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ndx</td><td>index of the space_id within that undo number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>space_id of the undo tablespace </dd></dl>

</div>
</div>
<a id="aec18e04ba68e9c474f81dbae20576b1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec18e04ba68e9c474f81dbae20576b1d">&#9670;&nbsp;</a></span>num2id() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::num2id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert an undo space number (from 1 to 127) into an undo space_id. </p>
<p>Use the undo::space_id_bank to return the curent space_id assigned to that undo number. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_num</td><td>undo tablespace number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>space_id of the undo tablespace </dd></dl>

</div>
</div>
<a id="a95f7e056728b73387da841676376d24b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f7e056728b73387da841676376d24b">&#9670;&nbsp;</a></span>set_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::set_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set an undo tablespace active. </p>

</div>
</div>
<a id="a8199343283d3fa2224c8ae81559bbced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8199343283d3fa2224c8ae81559bbced">&#9670;&nbsp;</a></span>start_logging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="db0err_8h.html#a6fdd08971b32ee513b20967238f1654d">dberr_t</a> undo::start_logging </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structundo_1_1Tablespace.html">Tablespace</a> *&#160;</td>
          <td class="paramname"><em>undo_space</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the truncate log file. </p>
<p>Needed to track the state of truncate during a crash. An auxiliary redo log file undo_&lt;space_id&gt;_trunc.log will be created while the truncate of the UNDO is in progress. This file is required during recovery to complete the truncate. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">undo_space</td><td>undo tablespace to truncate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DB_SUCCESS or error code. </dd></dl>

</div>
</div>
<a id="ad607fb01104acc911f24ffa281906791"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad607fb01104acc911f24ffa281906791">&#9670;&nbsp;</a></span>unuse_space_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::unuse_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark an undo number associated with a given space_id as unused and available to be resused. </p>
<p>This happens when the fil_space_t is closed associated with a drop undo tablespace. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>Undo Tablespace ID </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a42b14e65523c0d309adf946839edb480"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42b14e65523c0d309adf946839edb480">&#9670;&nbsp;</a></span>use_next_space_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a> undo::use_next_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark that the given undo space number is being used and return the next available space_id for that space number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_num</td><td>undo tablespace number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the next tablespace ID to use </dd></dl>

</div>
</div>
<a id="aef97c77981be1c6e488d387a1dea3e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef97c77981be1c6e488d387a1dea3e5e">&#9670;&nbsp;</a></span>use_space_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void undo::use_space_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="api0api_8h.html#a02e9c11b4a9783f4b0b89fcf060f8f28">space_id_t</a>&#160;</td>
          <td class="paramname"><em>space_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Note that the undo space number for a space ID is being used. </p>
<p>Put that space_id into the space_id_bank. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">space_id</td><td>undo tablespace number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a56c0719c3bdfe31f2acd94ea2a95c243"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56c0719c3bdfe31f2acd94ea2a95c243">&#9670;&nbsp;</a></span>ddl_mutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ib_mutex_t undo::ddl_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mutext for serializing undo tablespace related DDL. </p>
<p>These have to do with creating and dropping undo tablespaces. </p>

</div>
</div>
<a id="afa3389662c718b8234e35e9277d70e6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa3389662c718b8234e35e9277d70e6f">&#9670;&nbsp;</a></span>s_log_ext</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* const undo::s_log_ext = &quot;trunc.log&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncate Log file Extension. </p>

</div>
</div>
<a id="a56b79d8a260cd5a77bfe0861af0444bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56b79d8a260cd5a77bfe0861af0444bd">&#9670;&nbsp;</a></span>s_log_prefix</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* const undo::s_log_prefix = &quot;undo_&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Truncate Log file Prefix. </p>

</div>
</div>
<a id="adc4fa13662eba93c465635d54f3eba69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc4fa13662eba93c465635d54f3eba69">&#9670;&nbsp;</a></span>s_magic</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ib_uint32_t undo::s_magic = 76845412</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Magic Number to indicate truncate action is complete. </p>

</div>
</div>
<a id="ab3c890341cad52e3cd63f5a5d9cf3bbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3c890341cad52e3cd63f5a5d9cf3bbb">&#9670;&nbsp;</a></span>s_under_construction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSpace__Ids.html">Space_Ids</a> undo::s_under_construction</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>list of undo tablespaces that need header pages and rollback segments written to them at startup. </p>
<p>This can be because they are newly initialized, were being truncated and the system crashed, or they were an old format at startup and were replaced when they were opened. Old format undo tablespaces do not have space_ids between dict_sys_t::s_min_undo_space_id and dict_sys_t::s_max_undo_space_id and they do not contain an RSEG_ARRAY page. </p>

</div>
</div>
<a id="a5a44d99d6e9500d7142a4949043f5d09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a44d99d6e9500d7142a4949043f5d09">&#9670;&nbsp;</a></span>space_id_bank</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structundo_1_1space__id__account.html">space_id_account</a> * undo::space_id_bank</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List of currently used undo space IDs for each undo space number along with a boolean showing whether the undo space number is in use. </p>

</div>
</div>
<a id="ac5bd7a41f7041f6e1ffd5b5a71fc98f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5bd7a41f7041f6e1ffd5b5a71fc98f7">&#9670;&nbsp;</a></span>spaces</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classundo_1_1Tablespaces.html">Tablespaces</a> * undo::spaces</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A global object that contains a vector of undo::Tablespace structs. </p>

</div>
</div>
<a id="a95153043abee982b0cdd372a3798adeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95153043abee982b0cdd372a3798adeb">&#9670;&nbsp;</a></span>TRUNCATE_FREQUENCY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr ulint undo::TRUNCATE_FREQUENCY = 128</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceundo.html">undo</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
